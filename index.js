'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var React__default = require('react');
var reactDom = require('react-dom');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

function _interopNamespace(e) {
    if (e && e.__esModule) return e;
    var n = Object.create(null);
    if (e) {
        Object.keys(e).forEach(function (k) {
            if (k !== 'default') {
                var d = Object.getOwnPropertyDescriptor(e, k);
                Object.defineProperty(n, k, d.get ? d : {
                    enumerable: true,
                    get: function () { return e[k]; }
                });
            }
        });
    }
    n["default"] = e;
    return Object.freeze(n);
}

var React__default__default = /*#__PURE__*/_interopDefaultLegacy(React__default);
var React__default__namespace = /*#__PURE__*/_interopNamespace(React__default);

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var __assign$1 = function () {
  __assign$1 = Object.assign || function __assign(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
    }

    return t;
  };

  return __assign$1.apply(this, arguments);
};
function __awaiter(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}
function __generator(thisArg, body) {
  var _ = {
    label: 0,
    sent: function () {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) try {
      if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
      if (y = 0, t) op = [op[0] & 2, t.value];

      switch (op[0]) {
        case 0:
        case 1:
          t = op;
          break;

        case 4:
          _.label++;
          return {
            value: op[1],
            done: false
          };

        case 5:
          _.label++;
          y = op[1];
          op = [0];
          continue;

        case 7:
          op = _.ops.pop();

          _.trys.pop();

          continue;

        default:
          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
            _ = 0;
            continue;
          }

          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
            _.label = op[1];
            break;
          }

          if (op[0] === 6 && _.label < t[1]) {
            _.label = t[1];
            t = op;
            break;
          }

          if (t && _.label < t[2]) {
            _.label = t[2];

            _.ops.push(op);

            break;
          }

          if (t[2]) _.ops.pop();

          _.trys.pop();

          continue;
      }

      op = body.call(thisArg, _);
    } catch (e) {
      op = [6, e];
      y = 0;
    } finally {
      f = t = 0;
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
}
function __spreadArray$1(to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
}

var commonjsGlobal$1 = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

var sendbirdLive_min = {exports: {}};

(function (module, exports) {
	!function (e, t) {
	  t(exports) ;
	}(commonjsGlobal$1, function (D) {

	  function M(t, e) {
	    var n,
	        r = Object.keys(t);
	    return Object.getOwnPropertySymbols && (n = Object.getOwnPropertySymbols(t), e && (n = n.filter(function (e) {
	      return Object.getOwnPropertyDescriptor(t, e).enumerable;
	    })), r.push.apply(r, n)), r;
	  }

	  function x(t) {
	    for (var e = 1; e < arguments.length; e++) {
	      var n = null != arguments[e] ? arguments[e] : {};
	      e % 2 ? M(Object(n), !0).forEach(function (e) {
	        m(t, e, n[e]);
	      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : M(Object(n)).forEach(function (e) {
	        Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(n, e));
	      });
	    }

	    return t;
	  }

	  function L(e, t, n, r, i, s, a) {
	    try {
	      var o = e[s](a),
	          u = o.value;
	    } catch (e) {
	      return void n(e);
	    }

	    o.done ? t(u) : Promise.resolve(u).then(r, i);
	  }

	  function v(o) {
	    return function () {
	      var e = this,
	          a = arguments;
	      return new Promise(function (t, n) {
	        var r = o.apply(e, a);

	        function i(e) {
	          L(r, t, n, i, s, "next", e);
	        }

	        function s(e) {
	          L(r, t, n, i, s, "throw", e);
	        }

	        i(void 0);
	      });
	    };
	  }

	  function _(e, t) {
	    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
	  }

	  function P(e, t) {
	    for (var n = 0; n < t.length; n++) {
	      var r = t[n];
	      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
	    }
	  }

	  function y(e, t, n) {
	    return t && P(e.prototype, t), n && P(e, n), Object.defineProperty(e, "prototype", {
	      writable: !1
	    }), e;
	  }

	  function m(e, t, n) {
	    t in e ? Object.defineProperty(e, t, {
	      value: n,
	      enumerable: !0,
	      configurable: !0,
	      writable: !0
	    }) : e[t] = n;
	  }

	  function g(e, t) {
	    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
	    e.prototype = Object.create(t && t.prototype, {
	      constructor: {
	        value: e,
	        writable: !0,
	        configurable: !0
	      }
	    }), Object.defineProperty(e, "prototype", {
	      writable: !1
	    }), t && q(e, t);
	  }

	  function U(e) {
	    return (U = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
	      return e.__proto__ || Object.getPrototypeOf(e);
	    })(e);
	  }

	  function q(e, t) {
	    return (q = Object.setPrototypeOf || function (e, t) {
	      return e.__proto__ = t, e;
	    })(e, t);
	  }

	  function E(e) {
	    if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
	    return e;
	  }

	  function b(n) {
	    var r = function () {
	      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
	      if (Reflect.construct.sham) return !1;
	      if ("function" == typeof Proxy) return !0;

	      try {
	        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
	      } catch (e) {
	        return !1;
	      }
	    }();

	    return function () {
	      var e,
	          t = U(n),
	          t = (e = r ? (e = U(this).constructor, Reflect.construct(t, arguments, e)) : t.apply(this, arguments), this);
	      if (e && ("object" == typeof e || "function" == typeof e)) return e;
	      if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
	      return E(t);
	    };
	  }

	  function F(e) {
	    return function (e) {
	      if (Array.isArray(e)) return H(e);
	    }(e) || function (e) {
	      if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"]) return Array.from(e);
	    }(e) || j(e) || function () {
	      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
	    }();
	  }

	  function j(e, t) {
	    if (e) {
	      if ("string" == typeof e) return H(e, t);
	      var n = Object.prototype.toString.call(e).slice(8, -1);
	      return "Map" === (n = "Object" === n && e.constructor ? e.constructor.name : n) || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? H(e, t) : void 0;
	    }
	  }

	  function H(e, t) {
	    (null == t || t > e.length) && (t = e.length);

	    for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];

	    return r;
	  }

	  function G(e, t) {
	    var n,
	        r = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];

	    if (!r) {
	      if (Array.isArray(e) || (r = j(e)) || t && e && "number" == typeof e.length) return r && (e = r), n = 0, {
	        s: t = function () {},
	        n: function () {
	          return n >= e.length ? {
	            done: !0
	          } : {
	            done: !1,
	            value: e[n++]
	          };
	        },
	        e: function (e) {
	          throw e;
	        },
	        f: t
	      };
	      throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
	    }

	    var i,
	        s = !0,
	        a = !1;
	    return {
	      s: function () {
	        r = r.call(e);
	      },
	      n: function () {
	        var e = r.next();
	        return s = e.done, e;
	      },
	      e: function (e) {
	        a = !0, i = e;
	      },
	      f: function () {
	        try {
	          s || null == r.return || r.return();
	        } finally {
	          if (a) throw i;
	        }
	      }
	    };
	  }

	  var V,
	      B = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof commonjsGlobal$1 ? commonjsGlobal$1 : "undefined" != typeof self ? self : {},
	      K = {
	    exports: {}
	  },
	      K = function (a) {
	    var u,
	        e = Object.prototype,
	        c = e.hasOwnProperty,
	        t = "function" == typeof Symbol ? Symbol : {},
	        r = t.iterator || "@@iterator",
	        n = t.asyncIterator || "@@asyncIterator",
	        i = t.toStringTag || "@@toStringTag";

	    function s(e, t, n) {
	      return Object.defineProperty(e, t, {
	        value: n,
	        enumerable: !0,
	        configurable: !0,
	        writable: !0
	      }), e[t];
	    }

	    try {
	      s({}, "");
	    } catch (e) {
	      s = function (e, t, n) {
	        return e[t] = n;
	      };
	    }

	    function o(e, t, n, r) {
	      var i,
	          s,
	          a,
	          o,
	          t = t && t.prototype instanceof _ ? t : _,
	          t = Object.create(t.prototype),
	          r = new S(r || []);
	      return t._invoke = (i = e, s = n, a = r, o = h, function (e, t) {
	        if (o === f) throw new Error("Generator is already running");

	        if (o === p) {
	          if ("throw" === e) throw t;
	          return k();
	        }

	        for (a.method = e, a.arg = t;;) {
	          var n = a.delegate;

	          if (n) {
	            n = function e(t, n) {
	              var r = t.iterator[n.method];

	              if (r === u) {
	                if (n.delegate = null, "throw" === n.method) {
	                  if (t.iterator.return && (n.method = "return", n.arg = u, e(t, n), "throw" === n.method)) return v;
	                  n.method = "throw", n.arg = new TypeError("The iterator does not provide a 'throw' method");
	                }

	                return v;
	              }

	              r = l(r, t.iterator, n.arg);
	              if ("throw" === r.type) return n.method = "throw", n.arg = r.arg, n.delegate = null, v;
	              r = r.arg;
	              if (!r) return n.method = "throw", n.arg = new TypeError("iterator result is not an object"), n.delegate = null, v;
	              {
	                if (!r.done) return r;
	                n[t.resultName] = r.value, n.next = t.nextLoc, "return" !== n.method && (n.method = "next", n.arg = u);
	              }
	              n.delegate = null;
	              return v;
	            }(n, a);

	            if (n) {
	              if (n === v) continue;
	              return n;
	            }
	          }

	          if ("next" === a.method) a.sent = a._sent = a.arg;else if ("throw" === a.method) {
	            if (o === h) throw o = p, a.arg;
	            a.dispatchException(a.arg);
	          } else "return" === a.method && a.abrupt("return", a.arg);
	          o = f;
	          n = l(i, s, a);

	          if ("normal" === n.type) {
	            if (o = a.done ? p : d, n.arg !== v) return {
	              value: n.arg,
	              done: a.done
	            };
	          } else "throw" === n.type && (o = p, a.method = "throw", a.arg = n.arg);
	        }
	      }), t;
	    }

	    function l(e, t, n) {
	      try {
	        return {
	          type: "normal",
	          arg: e.call(t, n)
	        };
	      } catch (e) {
	        return {
	          type: "throw",
	          arg: e
	        };
	      }
	    }

	    a.wrap = o;
	    var h = "suspendedStart",
	        d = "suspendedYield",
	        f = "executing",
	        p = "completed",
	        v = {};

	    function _() {}

	    function y() {}

	    function m() {}

	    var t = {},
	        g = (s(t, r, function () {
	      return this;
	    }), Object.getPrototypeOf),
	        g = g && g(g(C([]))),
	        E = (g && g !== e && c.call(g, r) && (t = g), m.prototype = _.prototype = Object.create(t));

	    function b(e) {
	      ["next", "throw", "return"].forEach(function (t) {
	        s(e, t, function (e) {
	          return this._invoke(t, e);
	        });
	      });
	    }

	    function I(a, o) {
	      var t;

	      this._invoke = function (n, r) {
	        function e() {
	          return new o(function (e, t) {
	            !function t(e, n, r, i) {
	              var s,
	                  e = l(a[e], a, n);
	              if ("throw" !== e.type) return (n = (s = e.arg).value) && "object" == typeof n && c.call(n, "__await") ? o.resolve(n.__await).then(function (e) {
	                t("next", e, r, i);
	              }, function (e) {
	                t("throw", e, r, i);
	              }) : o.resolve(n).then(function (e) {
	                s.value = e, r(s);
	              }, function (e) {
	                return t("throw", e, r, i);
	              });
	              i(e.arg);
	            }(n, r, e, t);
	          });
	        }

	        return t = t ? t.then(e, e) : e();
	      };
	    }

	    function w(e) {
	      var t = {
	        tryLoc: e[0]
	      };
	      1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t);
	    }

	    function T(e) {
	      var t = e.completion || {};
	      t.type = "normal", delete t.arg, e.completion = t;
	    }

	    function S(e) {
	      this.tryEntries = [{
	        tryLoc: "root"
	      }], e.forEach(w, this), this.reset(!0);
	    }

	    function C(t) {
	      if (t) {
	        var n,
	            e = t[r];
	        if (e) return e.call(t);
	        if ("function" == typeof t.next) return t;
	        if (!isNaN(t.length)) return n = -1, (e = function e() {
	          for (; ++n < t.length;) if (c.call(t, n)) return e.value = t[n], e.done = !1, e;

	          return e.value = u, e.done = !0, e;
	        }).next = e;
	      }

	      return {
	        next: k
	      };
	    }

	    function k() {
	      return {
	        value: u,
	        done: !0
	      };
	    }

	    return s(E, "constructor", y.prototype = m), s(m, "constructor", y), y.displayName = s(m, i, "GeneratorFunction"), a.isGeneratorFunction = function (e) {
	      e = "function" == typeof e && e.constructor;
	      return !!e && (e === y || "GeneratorFunction" === (e.displayName || e.name));
	    }, a.mark = function (e) {
	      return Object.setPrototypeOf ? Object.setPrototypeOf(e, m) : (e.__proto__ = m, s(e, i, "GeneratorFunction")), e.prototype = Object.create(E), e;
	    }, a.awrap = function (e) {
	      return {
	        __await: e
	      };
	    }, b(I.prototype), s(I.prototype, n, function () {
	      return this;
	    }), a.AsyncIterator = I, a.async = function (e, t, n, r, i) {
	      void 0 === i && (i = Promise);
	      var s = new I(o(e, t, n, r), i);
	      return a.isGeneratorFunction(t) ? s : s.next().then(function (e) {
	        return e.done ? e.value : s.next();
	      });
	    }, b(E), s(E, i, "Generator"), s(E, r, function () {
	      return this;
	    }), s(E, "toString", function () {
	      return "[object Generator]";
	    }), a.keys = function (n) {
	      var e,
	          r = [];

	      for (e in n) r.push(e);

	      return r.reverse(), function e() {
	        for (; r.length;) {
	          var t = r.pop();
	          if (t in n) return e.value = t, e.done = !1, e;
	        }

	        return e.done = !0, e;
	      };
	    }, a.values = C, S.prototype = {
	      constructor: S,
	      reset: function (e) {
	        if (this.prev = 0, this.next = 0, this.sent = this._sent = u, this.done = !1, this.delegate = null, this.method = "next", this.arg = u, this.tryEntries.forEach(T), !e) for (var t in this) "t" === t.charAt(0) && c.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = u);
	      },
	      stop: function () {
	        this.done = !0;
	        var e = this.tryEntries[0].completion;
	        if ("throw" === e.type) throw e.arg;
	        return this.rval;
	      },
	      dispatchException: function (n) {
	        if (this.done) throw n;
	        var r = this;

	        function e(e, t) {
	          return s.type = "throw", s.arg = n, r.next = e, t && (r.method = "next", r.arg = u), !!t;
	        }

	        for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
	          var i = this.tryEntries[t],
	              s = i.completion;
	          if ("root" === i.tryLoc) return e("end");

	          if (i.tryLoc <= this.prev) {
	            var a = c.call(i, "catchLoc"),
	                o = c.call(i, "finallyLoc");

	            if (a && o) {
	              if (this.prev < i.catchLoc) return e(i.catchLoc, !0);
	              if (this.prev < i.finallyLoc) return e(i.finallyLoc);
	            } else if (a) {
	              if (this.prev < i.catchLoc) return e(i.catchLoc, !0);
	            } else {
	              if (!o) throw new Error("try statement without catch or finally");
	              if (this.prev < i.finallyLoc) return e(i.finallyLoc);
	            }
	          }
	        }
	      },
	      abrupt: function (e, t) {
	        for (var n = this.tryEntries.length - 1; 0 <= n; --n) {
	          var r = this.tryEntries[n];

	          if (r.tryLoc <= this.prev && c.call(r, "finallyLoc") && this.prev < r.finallyLoc) {
	            var i = r;
	            break;
	          }
	        }

	        var s = (i = i && ("break" === e || "continue" === e) && i.tryLoc <= t && t <= i.finallyLoc ? null : i) ? i.completion : {};
	        return s.type = e, s.arg = t, i ? (this.method = "next", this.next = i.finallyLoc, v) : this.complete(s);
	      },
	      complete: function (e, t) {
	        if ("throw" === e.type) throw e.arg;
	        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), v;
	      },
	      finish: function (e) {
	        for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
	          var n = this.tryEntries[t];
	          if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), T(n), v;
	        }
	      },
	      catch: function (e) {
	        for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
	          var n,
	              r,
	              i = this.tryEntries[t];
	          if (i.tryLoc === e) return "throw" === (n = i.completion).type && (r = n.arg, T(i)), r;
	        }

	        throw new Error("illegal catch attempt");
	      },
	      delegateYield: function (e, t, n) {
	        return this.delegate = {
	          iterator: C(e),
	          resultName: t,
	          nextLoc: n
	        }, "next" === this.method && (this.arg = u), v;
	      }
	    }, a;
	  }(K.exports);

	  try {
	    regeneratorRuntime = K;
	  } catch (e) {
	    "object" == typeof globalThis ? globalThis.regeneratorRuntime = K : Function("r", "regeneratorRuntime = r")(K);
	  }

	  var Q = new Uint8Array(16);
	  var z = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;

	  function W(e) {
	    return "string" == typeof e && z.test(e);
	  }

	  for (var Y = [], X = 0; X < 256; ++X) Y.push((X + 256).toString(16).substr(1));

	  function J(e, t) {
	    t = 1 < arguments.length && void 0 !== t ? t : 0, e = (Y[e[t + 0]] + Y[e[t + 1]] + Y[e[t + 2]] + Y[e[t + 3]] + "-" + Y[e[t + 4]] + Y[e[t + 5]] + "-" + Y[e[t + 6]] + Y[e[t + 7]] + "-" + Y[e[t + 8]] + Y[e[t + 9]] + "-" + Y[e[t + 10]] + Y[e[t + 11]] + Y[e[t + 12]] + Y[e[t + 13]] + Y[e[t + 14]] + Y[e[t + 15]]).toLowerCase();
	    if (W(e)) return e;
	    throw TypeError("Stringified UUID is invalid");
	  }

	  function Z() {
	    try {
	      0;
	    } catch (e) {}
	  }

	  function $(e, t, n) {
	    var r = (e = e || {}).random || (e.rng || function () {
	      if (V = V || "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto)) return V(Q);
	      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
	    })();

	    if (r[6] = 15 & r[6] | 64, r[8] = 63 & r[8] | 128, t) {
	      n = n || 0;

	      for (var i = 0; i < 16; ++i) t[n + i] = r[i];

	      return t;
	    }

	    return J(r);
	  }

	  Z(), Z();

	  function ee(e) {
	    return e && e.Math == Math && e;
	  }

	  function te(e) {
	    try {
	      return !!e();
	    } catch (e) {
	      return !0;
	    }
	  }

	  function ne(e, t) {
	    return {
	      enumerable: !(1 & e),
	      configurable: !(2 & e),
	      writable: !(4 & e),
	      value: t
	    };
	  }

	  function oe(e) {
	    return ot(at(e), 8, -1);
	  }

	  function ue(e) {
	    if (null == e) throw ht("Can't call method on " + e);
	    return e;
	  }

	  function ce(e) {
	    return dt(ft(e));
	  }

	  function le(e) {
	    return "function" == typeof e;
	  }

	  function he(e) {
	    return "object" == typeof e ? null !== e : pt(e);
	  }

	  function de(e, t) {
	    return arguments.length < 2 ? (n = vt[e], _t(n) ? n : void 0) : vt[e] && vt[e][t];
	    var n;
	  }

	  function fe(e) {
	    try {
	      return Nt(e);
	    } catch (e) {
	      return "Object";
	    }
	  }

	  function pe(e) {
	    if (At(e)) return e;
	    throw Rt(Ot(e) + " is not a function");
	  }

	  function ve(e, t) {
	    return null == (e = e[t]) ? void 0 : Dt(e);
	  }

	  function _e(t, n) {
	    try {
	      qt(Ut, t, {
	        value: n,
	        configurable: !0,
	        writable: !0
	      });
	    } catch (e) {
	      Ut[t] = n;
	    }

	    return n;
	  }

	  function ye(e) {
	    return Gt(Ht(e));
	  }

	  function me(e) {
	    return "Symbol(" + (void 0 === e ? "" : e) + ")_" + Wt(++Qt + zt, 36);
	  }

	  function ge(e) {
	    var t;
	    return Xt(en, e) && (Zt || "string" == typeof en[e]) || (t = "Symbol." + e, Zt && Xt(tn, e) ? en[e] = tn[e] : en[e] = ($t && nn ? nn : rn)(t)), en[e];
	  }

	  function Ee(e, t) {
	    if (!an(e) || on(e)) return e;
	    var n = un(e, hn);

	    if (n) {
	      if (n = sn(n, e, t = void 0 === t ? "default" : t), !an(n) || on(n)) return n;
	      throw ln("Can't convert object to primitive value");
	    }

	    return cn(e, t = void 0 === t ? "number" : t);
	  }

	  function be(e) {
	    return e = dn(e, "string"), fn(e) ? e : e + "";
	  }

	  function Ie(e) {
	    return vn ? pn.createElement(e) : {};
	  }

	  function we(e) {
	    if (Sn(e)) return e;
	    throw kn(Cn(e) + " is not an object");
	  }

	  function Te(e) {
	    return Bn[e] || (Bn[e] = Vn(e));
	  }

	  function Se(e, t, n, r) {
	    var i = (r = r || {}).enumerable,
	        s = void 0 !== r.name ? r.name : t;
	    if (ur(n) && lr(n, s, r), r.global) i ? e[t] = n : hr(t, n);else {
	      try {
	        r.unsafe ? e[t] && (i = !0) : delete e[t];
	      } catch (e) {}

	      i ? e[t] = n : cr.f(e, t, {
	        value: n,
	        enumerable: !1,
	        configurable: !r.nonConfigurable,
	        writable: !r.nonWritable
	      });
	    }
	    return e;
	  }

	  function Ce(e) {
	    return (e = +e) != e || 0 == e ? 0 : pr(e);
	  }

	  function ke(e, t) {
	    return (e = vr(e)) < 0 ? _r(e + t, 0) : yr(e, t);
	  }

	  function Ne(e) {
	    return 0 < e ? gr(mr(e), 9007199254740991) : 0;
	  }

	  function Ae(e) {
	    return Er(e.length);
	  }

	  function Oe(o) {
	    return function (e, t, n) {
	      var r,
	          i = br(e),
	          s = wr(i),
	          a = Ir(n, s);

	      if (o && t != t) {
	        for (; a < s;) if ((r = i[a++]) != r) return !0;
	      } else for (; a < s; a++) if ((o || a in i) && i[a] === t) return o || a || 0;

	      return !o && -1;
	    };
	  }

	  function Re(e, t) {
	    var n,
	        r = Sr(e),
	        i = 0,
	        s = [];

	    for (n in r) !Tr(kr, n) && Tr(r, n) && Nr(s, n);

	    for (; t.length > i;) !Tr(r, n = t[i++]) || ~Cr(s, n) || Nr(s, n);

	    return s;
	  }

	  function De(e, t) {
	    return (e = Vr[Gr(e)]) == Kr || e != Br && (jr(t) ? Fr(t) : !!t);
	  }

	  function Me(e, t) {
	    var n,
	        r,
	        i,
	        s = e.target,
	        a = e.global,
	        o = e.stat,
	        u = a ? Qr : o ? Qr[s] || Xr(s, {}) : (Qr[s] || {}).prototype;
	    if (u) for (n in t) {
	      if (r = t[n], i = e.dontCallGetSet ? (i = zr(u, n)) && i.value : u[n], !Zr(a ? n : s + (o ? "." : "#") + n, e.forced) && void 0 !== i) {
	        if (typeof r == typeof i) continue;
	        Jr(r, i);
	      }

	      (e.sham || i && i.sham) && Wr(r, "sham", !0), Yr(u, n, r, e);
	    }
	  }

	  function xe(e, t) {
	    return $r(e), void 0 === t ? e : ei ? ti(e, t) : function () {
	      return e.apply(t, arguments);
	    };
	  }

	  function Le() {}

	  function Pe(e) {
	    if (!hi(e)) return !1;

	    try {
	      return vi(Le, pi, e), !0;
	    } catch (e) {
	      return !1;
	    }
	  }

	  function Ue(e) {
	    if (!hi(e)) return !1;

	    switch (di(e)) {
	      case "AsyncFunction":
	      case "GeneratorFunction":
	      case "AsyncGeneratorFunction":
	        return !1;
	    }

	    try {
	      return mi || !!yi(_i, fi(e));
	    } catch (e) {
	      return !0;
	    }
	  }

	  function qe(e, t) {
	    return new (Ti(e))(0 === t ? 0 : t);
	  }

	  function Fe(d) {
	    var f = 1 == d,
	        p = 2 == d,
	        v = 3 == d,
	        _ = 4 == d,
	        y = 6 == d,
	        m = 7 == d,
	        g = 5 == d || y;

	    return function (e, t, n, r) {
	      for (var i, s, a = ki(e), o = Ci(a), u = Si(t, n), c = Ni(o), l = 0, t = r || Ai, h = f ? t(e, c) : p || m ? t(e, 0) : void 0; l < c; l++) if ((g || l in o) && (s = u(i = o[l], l, a), d)) if (f) h[l] = s;else if (s) switch (d) {
	        case 3:
	          return !0;

	        case 5:
	          return i;

	        case 6:
	          return l;

	        case 2:
	          Oi(h, i);
	      } else switch (d) {
	        case 4:
	          return !1;

	        case 7:
	          Oi(h, i);
	      }

	      return y ? -1 : v || _ ? _ : h;
	    };
	  }

	  function je(t) {
	    return 51 <= Di || !Ri(function () {
	      var e = [];
	      return (e.constructor = {})[Mi] = function () {
	        return {
	          foo: 1
	        };
	      }, 1 !== e[t](Boolean).foo;
	    });
	  }

	  var He,
	      Ge,
	      Ve,
	      Be,
	      Ke,
	      Qe,
	      ze,
	      We,
	      u,
	      Ye,
	      K = ee("object" == typeof globalThis && globalThis) || ee("object" == typeof window && window) || ee("object" == typeof self && self) || ee("object" == typeof B && B) || function () {
	    return this;
	  }() || Function("return this")(),
	      B = {},
	      e = !te(function () {
	    return 7 != Object.defineProperty({}, 1, {
	      get: function () {
	        return 7;
	      }
	    })[1];
	  }),
	      Xe = !te(function () {
	    var e = function () {}.bind();

	    return "function" != typeof e || e.hasOwnProperty("prototype");
	  }),
	      Je = Function.prototype.call,
	      Ze = Xe ? Je.bind(Je) : function () {
	    return Je.apply(Je, arguments);
	  },
	      $e = {},
	      et = {}.propertyIsEnumerable,
	      tt = Object.getOwnPropertyDescriptor,
	      nt = tt && !et.call({
	    1: 2
	  }, 1),
	      nt = ($e.f = nt ? function (e) {
	    e = tt(this, e);
	    return !!e && e.enumerable;
	  } : et, Xe),
	      et = Function.prototype,
	      rt = et.bind,
	      it = et.call,
	      st = nt && rt.bind(it, it),
	      et = nt ? function (e) {
	    return e && st(e);
	  } : function (e) {
	    return e && function () {
	      return it.apply(e, arguments);
	    };
	  },
	      rt = et,
	      at = rt({}.toString),
	      ot = rt("".slice),
	      nt = te,
	      ut = oe,
	      ct = Object,
	      lt = et("".split),
	      rt = nt(function () {
	    return !ct("z").propertyIsEnumerable(0);
	  }) ? function (e) {
	    return "String" == ut(e) ? lt(e, "") : ct(e);
	  } : ct,
	      ht = TypeError,
	      dt = rt,
	      ft = ue,
	      pt = le,
	      vt = K,
	      _t = le,
	      nt = et({}.isPrototypeOf),
	      yt = de("navigator", "userAgent") || "",
	      mt = yt,
	      gt = K.process,
	      Et = K.Deno,
	      gt = gt && gt.versions || Et && Et.version,
	      Et = gt && gt.v8,
	      gt = kt = !(kt = Et ? 0 < (It = Et.split("."))[0] && It[0] < 4 ? 1 : +(It[0] + It[1]) : kt) && mt && (!(It = mt.match(/Edge\/(\d+)/)) || 74 <= It[1]) && (It = mt.match(/Chrome\/(\d+)/)) ? +It[1] : kt,
	      bt = gt,
	      Et = te,
	      mt = !!Object.getOwnPropertySymbols && !Et(function () {
	    var e = Symbol();
	    return !String(e) || !(Object(e) instanceof Symbol) || !Symbol.sham && bt && bt < 41;
	  }),
	      It = mt && !Symbol.sham && "symbol" == typeof Symbol.iterator,
	      wt = de,
	      Tt = le,
	      St = nt,
	      Ct = Object,
	      kt = It ? function (e) {
	    return "symbol" == typeof e;
	  } : function (e) {
	    var t = wt("Symbol");
	    return Tt(t) && St(t.prototype, Ct(e));
	  },
	      Nt = String,
	      At = le,
	      Ot = fe,
	      Rt = TypeError,
	      Dt = pe,
	      Mt = Ze,
	      xt = le,
	      Lt = he,
	      Pt = TypeError,
	      Et = {
	    exports: {}
	  },
	      Ut = K,
	      qt = Object.defineProperty,
	      t = _e,
	      Ft = "__core-js_shared__",
	      t = K[Ft] || t(Ft, {}),
	      jt = t,
	      Ht = ((Et.exports = function (e, t) {
	    return jt[e] || (jt[e] = void 0 !== t ? t : {});
	  })("versions", []).push({
	    version: "3.23.4",
	    mode: "global",
	    copyright: "Â© 2014-2022 Denis Pushkarev (zloirock.ru)",
	    license: "https://github.com/zloirock/core-js/blob/v3.23.4/LICENSE",
	    source: "https://github.com/zloirock/core-js"
	  }), ue),
	      Gt = Object,
	      Vt = ye,
	      Bt = et({}.hasOwnProperty),
	      Ft = Object.hasOwn || function (e, t) {
	    return Bt(Vt(e), t);
	  },
	      Kt = et,
	      Qt = 0,
	      zt = Math.random(),
	      Wt = Kt(1..toString),
	      Kt = K,
	      Yt = Et.exports,
	      Xt = Ft,
	      Jt = me,
	      Zt = mt,
	      $t = It,
	      en = Yt("wks"),
	      tn = Kt.Symbol,
	      nn = tn && tn.for,
	      rn = $t ? tn : tn && tn.withoutSetter || Jt,
	      sn = Ze,
	      an = he,
	      on = kt,
	      un = ve,
	      cn = function (e, t) {
	    var n, r;
	    if ("string" === t && xt(n = e.toString) && !Lt(r = Mt(n, e))) return r;
	    if (xt(n = e.valueOf) && !Lt(r = Mt(n, e))) return r;
	    if ("string" !== t && xt(n = e.toString) && !Lt(r = Mt(n, e))) return r;
	    throw Pt("Can't convert object to primitive value");
	  },
	      ln = TypeError,
	      hn = ge("toPrimitive"),
	      dn = Ee,
	      fn = kt,
	      mt = he,
	      pn = K.document,
	      vn = mt(pn) && mt(pn.createElement),
	      _n = Ie,
	      It = !e && !te(function () {
	    return 7 != Object.defineProperty(_n("div"), "a", {
	      get: function () {
	        return 7;
	      }
	    }).a;
	  }),
	      yn = Ze,
	      mn = $e,
	      gn = ne,
	      En = ce,
	      bn = be,
	      In = Ft,
	      wn = It,
	      Tn = Object.getOwnPropertyDescriptor,
	      Yt = (B.f = e ? Tn : function (e, t) {
	    if (e = En(e), t = bn(t), wn) try {
	      return Tn(e, t);
	    } catch (e) {}
	    if (In(e, t)) return gn(!yn(mn.f, e, t), e[t]);
	  }, {}),
	      Kt = e && te(function () {
	    return 42 != Object.defineProperty(function () {}, "prototype", {
	      value: 42,
	      writable: !1
	    }).prototype;
	  }),
	      Sn = he,
	      Cn = String,
	      kn = TypeError,
	      Nn = It,
	      An = we,
	      On = be,
	      Rn = TypeError,
	      Dn = Object.defineProperty,
	      Mn = Object.getOwnPropertyDescriptor,
	      xn = "enumerable",
	      Ln = "configurable",
	      Pn = "writable",
	      Jt = (Yt.f = e ? Kt ? function (e, t, n) {
	    var r;
	    return An(e), t = On(t), An(n), "function" == typeof e && "prototype" === t && "value" in n && Pn in n && !n[Pn] && (r = Mn(e, t)) && r[Pn] && (e[t] = n.value, n = {
	      configurable: (Ln in n ? n : r)[Ln],
	      enumerable: (xn in n ? n : r)[xn],
	      writable: !1
	    }), Dn(e, t, n);
	  } : Dn : function (e, t, n) {
	    if (An(e), t = On(t), An(n), Nn) try {
	      return Dn(e, t, n);
	    } catch (e) {}
	    if ("get" in n || "set" in n) throw Rn("Accessors not supported");
	    return "value" in n && (e[t] = n.value), e;
	  }, e),
	      Un = Yt,
	      qn = ne,
	      mt = Jt ? function (e, t, n) {
	    return Un.f(e, t, qn(1, n));
	  } : function (e, t, n) {
	    return e[t] = n, e;
	  },
	      It = {
	    exports: {}
	  },
	      Jt = e,
	      n = Ft,
	      Fn = Function.prototype,
	      jn = Jt && Object.getOwnPropertyDescriptor,
	      n = n(Fn, "name"),
	      n = {
	    EXISTS: n,
	    PROPER: n && "something" === function () {}.name,
	    CONFIGURABLE: n && (!Jt || jn(Fn, "name").configurable)
	  },
	      Jt = le,
	      jn = t,
	      Hn = et(Function.toString),
	      Fn = (Jt(jn.inspectSource) || (jn.inspectSource = function (e) {
	    return Hn(e);
	  }), jn.inspectSource),
	      Jt = le,
	      jn = Fn,
	      Gn = K.WeakMap,
	      Jt = Jt(Gn) && /native code/.test(jn(Gn)),
	      jn = Et.exports,
	      Vn = me,
	      Bn = jn("keys"),
	      Gn = {},
	      jn = et,
	      Kn = he,
	      Qn = mt,
	      zn = Ft,
	      Wn = Te,
	      r = Gn,
	      Yn = "Object already initialized",
	      Xn = K.TypeError,
	      Jn = K.WeakMap,
	      Jt = (ze = Jt || t.state ? (He = t.state || (t.state = new Jn()), Ge = jn(He.get), Ve = jn(He.has), Be = jn(He.set), Ke = function (e, t) {
	    if (Ve(He, e)) throw new Xn(Yn);
	    return t.facade = e, Be(He, e, t), t;
	  }, Qe = function (e) {
	    return Ge(He, e) || {};
	  }, function (e) {
	    return Ve(He, e);
	  }) : (r[We = Wn("state")] = !0, Ke = function (e, t) {
	    if (zn(e, We)) throw new Xn(Yn);
	    return t.facade = e, Qn(e, We, t), t;
	  }, Qe = function (e) {
	    return zn(e, We) ? e[We] : {};
	  }, function (e) {
	    return zn(e, We);
	  }), {
	    set: Ke,
	    get: Qe,
	    has: ze,
	    enforce: function (e) {
	      return ze(e) ? Qe(e) : Ke(e, {});
	    },
	    getterFor: function (t) {
	      return function (e) {
	        if (Kn(e) && (e = Qe(e)).type === t) return e;
	        throw Xn("Incompatible receiver, " + t + " required");
	      };
	    }
	  }),
	      t = te,
	      Zn = le,
	      $n = Ft,
	      er = e,
	      tr = n.CONFIGURABLE,
	      nr = Fn,
	      rr = Jt.enforce,
	      ir = Jt.get,
	      sr = Object.defineProperty,
	      ar = er && !t(function () {
	    return 8 !== sr(function () {}, "length", {
	      value: 8
	    }).length;
	  }),
	      or = String(String).split("String"),
	      Jn = It.exports = function (e, t, n) {
	    "Symbol(" === String(t).slice(0, 7) && (t = "[" + String(t).replace(/^Symbol\(([^)]*)\)/, "$1") + "]"), n && n.getter && (t = "get " + t), n && n.setter && (t = "set " + t), (!$n(e, "name") || tr && e.name !== t) && (er ? sr(e, "name", {
	      value: t,
	      configurable: !0
	    }) : e.name = t), ar && n && $n(n, "arity") && e.length !== n.arity && sr(e, "length", {
	      value: n.arity
	    });

	    try {
	      n && $n(n, "constructor") && n.constructor ? er && sr(e, "prototype", {
	        writable: !1
	      }) : e.prototype && (e.prototype = void 0);
	    } catch (e) {}

	    n = rr(e);
	    return $n(n, "source") || (n.source = or.join("string" == typeof t ? t : "")), e;
	  },
	      ur = (Function.prototype.toString = Jn(function () {
	    return Zn(this) && ir(this).source || nr(this);
	  }, "toString"), le),
	      cr = Yt,
	      lr = It.exports,
	      hr = _e,
	      jn = {},
	      dr = Math.ceil,
	      fr = Math.floor,
	      pr = Math.trunc || function (e) {
	    e = +e;
	    return (0 < e ? fr : dr)(e);
	  },
	      vr = Ce,
	      _r = Math.max,
	      yr = Math.min,
	      mr = Ce,
	      gr = Math.min,
	      Er = Ne,
	      br = ce,
	      Ir = ke,
	      wr = Ae,
	      r = {
	    includes: Oe(!0),
	    indexOf: Oe(!1)
	  },
	      Wn = et,
	      Tr = Ft,
	      Sr = ce,
	      Cr = r.indexOf,
	      kr = Gn,
	      Nr = Wn([].push),
	      t = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"],
	      Ar = Re,
	      Or = t.concat("length", "prototype"),
	      Jn = (jn.f = Object.getOwnPropertyNames || function (e) {
	    return Ar(e, Or);
	  }, {}),
	      It = (Jn.f = Object.getOwnPropertySymbols, de),
	      Rr = jn,
	      Dr = Jn,
	      Mr = we,
	      xr = et([].concat),
	      Wn = It("Reflect", "ownKeys") || function (e) {
	    var t = Rr.f(Mr(e)),
	        n = Dr.f;
	    return n ? xr(t, n(e)) : t;
	  },
	      Lr = Ft,
	      Pr = Wn,
	      Ur = B,
	      qr = Yt,
	      Fr = te,
	      jr = le,
	      Hr = /#|\.prototype\./,
	      Gr = De.normalize = function (e) {
	    return String(e).replace(Hr, ".").toLowerCase();
	  },
	      Vr = De.data = {},
	      Br = De.NATIVE = "N",
	      Kr = De.POLYFILL = "P",
	      It = De,
	      Qr = K,
	      zr = B.f,
	      Wr = mt,
	      Yr = Se,
	      Xr = _e,
	      Jr = function (e, t, n) {
	    for (var r = Pr(t), i = qr.f, s = Ur.f, a = 0; a < r.length; a++) {
	      var o = r[a];
	      Lr(e, o) || n && Lr(n, o) || i(e, o, s(t, o));
	    }
	  },
	      Zr = It,
	      $r = pe,
	      ei = Xe,
	      ti = et(et.bind),
	      ni = oe,
	      Wn = Array.isArray || function (e) {
	    return "Array" == ni(e);
	  },
	      i = {},
	      i = (i[ge("toStringTag")] = "z", "[object z]" === String(i)),
	      ri = i,
	      ii = le,
	      si = oe,
	      ai = ge("toStringTag"),
	      oi = Object,
	      ui = "Arguments" == si(function () {
	    return arguments;
	  }()),
	      ri = ri ? si : function (e) {
	    var t;
	    return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (t = function (e, t) {
	      try {
	        return e[t];
	      } catch (e) {}
	    }(e = oi(e), ai)) ? t : ui ? si(e) : "Object" == (t = si(e)) && ii(e.callee) ? "Arguments" : t;
	  },
	      ci = et,
	      li = te,
	      hi = le,
	      di = ri,
	      fi = Fn,
	      pi = [],
	      vi = de("Reflect", "construct"),
	      _i = /^\s*(?:class|function)\b/,
	      yi = ci(_i.exec),
	      mi = !_i.exec(Le),
	      ci = (Ue.sham = !0, !vi || li(function () {
	    var e;
	    return Pe(Pe.call) || !Pe(Object) || !Pe(function () {
	      e = !0;
	    }) || e;
	  }) ? Ue : Pe),
	      gi = Wn,
	      Ei = ci,
	      bi = he,
	      Ii = ge("species"),
	      wi = Array,
	      Ti = function (e) {
	    var t;
	    return gi(e) && (t = e.constructor, (Ei(t) && (t === wi || gi(t.prototype)) || bi(t) && null === (t = t[Ii])) && (t = void 0)), void 0 === t ? wi : t;
	  },
	      Si = xe,
	      Ci = rt,
	      ki = ye,
	      Ni = Ae,
	      Ai = qe,
	      Oi = et([].push),
	      li = {
	    forEach: Fe(0),
	    map: Fe(1),
	    filter: Fe(2),
	    some: Fe(3),
	    every: Fe(4),
	    find: Fe(5),
	    findIndex: Fe(6),
	    filterReject: Fe(7)
	  },
	      Ri = te,
	      Di = gt,
	      Mi = ge("species"),
	      s = Me,
	      xi = li.map,
	      Li = (s({
	    target: "Array",
	    proto: !0,
	    forced: !je("map")
	  }, {
	    map: function (e) {
	      return xi(this, e, 1 < arguments.length ? arguments[1] : void 0);
	    }
	  }), y(function e() {
	    _(this, e);
	  })),
	      Pi = function () {
	    g(t, Li);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.call(this);
	    }

	    return y(t, [{
	      key: "getApiOption",
	      value: function () {
	        return {
	          auth: this.getAuth(),
	          path: this.getPath(),
	          method: this.getMethod(),
	          body: this.getData(),
	          headers: this.getHeaders()
	        };
	      }
	    }, {
	      key: "getAuth",
	      value: function () {
	        return !0;
	      }
	    }, {
	      key: "getHeaders",
	      value: function () {
	        return {};
	      }
	    }]), t;
	  }(),
	      Ui = function () {
	    g(t, Pi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.call(this);
	    }

	    return y(t, [{
	      key: "getPath",
	      value: function () {
	        return "/v1".concat(this.getSubPath());
	      }
	    }]), t;
	  }(),
	      qi = ((s = u = u || {}).CREATE = "create", s.UPDATE = "update", s.GET = "get", s.DELETE = "delete", s.QUERY = "query", s.READY = "ready", s.START = "start", s.ENTER_HOST = "enter_host", s.GET_HOSTS = "get_hosts", s.EXIT_HOST = "exit_host", s.HOST_ALIVE = "host_alive", s.AUDIO = "audio", s.VIDEO = "video", s.HOST_CREATE_STREAM = "host_create_stream", s.HOST_DELETE_STREAM = "host_delete_stream", s.HOST_CONNECTED = "host_connected", s.ENTER = "enter", s.EXIT = "exit", s.ALIVE = "alive", s.GET_PARTICIPANTS = "get_participants", s.CREATE_STREAM = "create_stream", s.DELETE_STREAM = "delete_stream", s.CONNECTED = "connected", s.ATTACH = "attach", s.CUSTOM_ITEMS_GET = "custom_items_get", s.CUSTOM_ITEMS_UPDATE = "custom_items_update", s.CUSTOM_ITEMS_DELETE = "custom_items_delete", s.LIVE_EVENT_READY = "live_event_ready", s.LIVE_EVENT_STARTED = "live_event_started", s.LIVE_EVENT_ENDED = "live_event_ended", s.LIVE_EVENT_UPDATED = "live_event_updated", s.HOST_ENTERED = "host_entered", s.HOST_EXITED = "host_exited", s.HOST_DISCONNECTED = "host_disconnected", s.HOST_AUDIO_STATUS_CHANGED = "host_audio_status_changed", s.HOST_VIDEO_STATUS_CHANGED = "host_video_status_changed", s.PARTICIPANT_ENTERED = "participant_entered", s.PARTICIPANT_EXITED = "participant_exited", (s = Ye = Ye || {}).SINGLE_HOST = "single_host", s.MULTIPLE_HOST = "multiple_host", function () {
	    g(r, Li);
	    var n = b(r);

	    function r(e) {
	      var t;
	      return _(this, r), (t = n.call(this)).payload = t.parseData(e), t;
	    }

	    return y(r);
	  }()),
	      Fi = function () {
	    g(t, qi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t);
	  }();

	  function ji(e) {
	    return {
	      liveEventId: e.live_event_id,
	      createdAt: e.created_at,
	      setReadyAt: e.set_ready_at,
	      startedAt: e.started_at,
	      endedAt: e.ended_at,
	      state: e.state,
	      isHostStreaming: e.is_host_streaming,
	      createdBy: e.created_by,
	      setReadyBy: e.set_ready_by,
	      startedBy: e.started_by,
	      endedBy: e.ended_by,
	      duration: e.duration,
	      host: e.host ? Hi(e.host) : void 0,
	      participantCount: e.participant_count,
	      peakParticipantCount: e.peak_participant_count,
	      cumulativeParticipantCount: e.cumulative_participant_count,
	      userIdsForHost: e.user_ids_for_host,
	      customItems: e.custom_items,
	      title: e.title,
	      coverUrl: e.cover_url
	    };
	  }

	  function Hi(e) {
	    return {
	      hostId: e.host_id,
	      userId: e.user.user_id,
	      nickname: e.user.nickname,
	      profileURL: e.user.profile_url,
	      enteredAt: e.entered_at,
	      connectedAt: e.connected_at,
	      disconnectedAt: e.disconnected_at,
	      exitedAt: e.exited_at,
	      duration: e.duration,
	      state: e.state,
	      isAudioOn: e.is_audio_on,
	      isVideoOn: e.is_video_on,
	      liveEventId: e.live_event_id
	    };
	  }

	  function Gi(e) {
	    return {
	      id: e.rtcstream_id
	    };
	  }

	  function Vi(e) {
	    return {
	      participantId: e.participant_id,
	      userId: e.user.user_id,
	      nickname: e.user.nickname,
	      profileURL: e.user.profile_url,
	      enteredAt: e.entered_at,
	      exitedAt: e.exited_at,
	      duration: e.duration,
	      state: e.state,
	      liveEventId: e.live_event_id
	    };
	  }

	  var s = Me,
	      Bi = li.filter;
	  s({
	    target: "Array",
	    proto: !0,
	    forced: !je("filter")
	  }, {
	    filter: function (e) {
	      return Bi(this, e, 1 < arguments.length ? arguments[1] : void 0);
	    }
	  });

	  function Ki(e) {
	    if (9007199254740991 < e) throw es("Maximum allowed index exceeded");
	    return e;
	  }

	  function Qi(e, t, n) {
	    (t = ts(t)) in e ? ns.f(e, t, rs(0, n)) : e[t] = n;
	  }

	  function zi(e) {
	    if ("Symbol" === ps(e)) throw TypeError("Cannot convert a Symbol value to a string");
	    return vs(e);
	  }

	  function Wi() {
	    var e = _s(this),
	        t = "";

	    return e.hasIndices && (t += "d"), e.global && (t += "g"), e.ignoreCase && (t += "i"), e.multiline && (t += "m"), e.dotAll && (t += "s"), e.unicode && (t += "u"), e.unicodeSets && (t += "v"), e.sticky && (t += "y"), t;
	  }

	  var Yi = ri,
	      Xi = (i || Se(Object.prototype, "toString", i ? {}.toString : function () {
	    return "[object " + Yi(this) + "]";
	  }, {
	    unsafe: !0
	  }), Re),
	      Ji = t,
	      s = Object.keys || function (e) {
	    return Xi(e, Ji);
	  },
	      Zi = ye,
	      $i = s,
	      es = (Me({
	    target: "Object",
	    stat: !0,
	    forced: te(function () {
	      $i(1);
	    })
	  }, {
	    keys: function (e) {
	      return $i(Zi(e));
	    }
	  }), TypeError),
	      ts = be,
	      ns = Yt,
	      rs = ne,
	      i = Me,
	      a = te,
	      is = Wn,
	      ss = he,
	      as = ye,
	      os = Ae,
	      us = Ki,
	      cs = Qi,
	      ls = qe,
	      hs = je,
	      ds = gt,
	      fs = ge("isConcatSpreadable"),
	      ds = 51 <= ds || !a(function () {
	    var e = [];
	    return e[fs] = !1, e.concat()[0] !== e;
	  }),
	      a = hs("concat"),
	      ps = (i({
	    target: "Array",
	    proto: !0,
	    arity: 1,
	    forced: !ds || !a
	  }, {
	    concat: function (e) {
	      for (var t, n, r, i = as(this), s = ls(i, 0), a = 0, o = -1, u = arguments.length; o < u; o++) if (function (e) {
	        if (!ss(e)) return !1;
	        var t = e[fs];
	        return void 0 !== t ? !!t : is(e);
	      }(r = -1 === o ? i : arguments[o])) for (n = os(r), us(a + n), t = 0; t < n; t++, a++) t in r && cs(s, a, r[t]);else us(a + 1), cs(s, a++, r);

	      return s.length = a, s;
	    }
	  }), ri),
	      vs = String,
	      _s = we,
	      ys = Ze,
	      ms = Ft,
	      gs = nt,
	      Es = Wi,
	      bs = RegExp.prototype,
	      hs = n.PROPER,
	      i = Se,
	      Is = we,
	      ws = zi,
	      ds = te,
	      Ts = function (e) {
	    var t = e.flags;
	    return void 0 !== t || "flags" in bs || ms(e, "flags") || !gs(bs, e) ? t : ys(Es, e);
	  },
	      a = "toString",
	      Ss = RegExp.prototype[a],
	      ds = ds(function () {
	    return "/a/b" != Ss.call({
	      source: "a",
	      flags: "b"
	    });
	  }),
	      hs = hs && Ss.name != a;

	  function Cs(t) {
	    return Object.keys(t).filter(function (e) {
	      return null != t[e];
	    }).map(function (e) {
	      return "".concat(encodeURIComponent(e), "=").concat(function (e) {
	        if (Array.isArray(e)) return e.map(function (e) {
	          return encodeURIComponent(e.toString());
	        }).join(",");
	        return encodeURIComponent(e.toString());
	      }(t[e]));
	    }).join("&");
	  }

	  (ds || hs) && i(RegExp.prototype, a, function () {
	    var e = Is(this);
	    return "/" + ws(e.source) + "/" + ws(Ts(e));
	  }, {
	    unsafe: !0
	  });

	  var ks = function () {
	    g(s, Ui);
	    var i = b(s);

	    function s(e, t, n) {
	      var r;
	      return _(this, s), m(E(r = i.call(this)), "type", u.QUERY), r.params = r._normalizeParams(e), r.prevToken = t, r.nextToken = n, r;
	    }

	    return y(s, [{
	      key: "getData",
	      value: function () {}
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events?".concat(this._createQuery());
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return "GET";
	      }
	    }, {
	      key: "_normalizeParams",
	      value: function (e) {
	        var t = e.hostType,
	            n = e.liveEventState,
	            r = e.createdAtRange,
	            i = e.participantCountRange,
	            s = e.durationRange,
	            a = e.liveEventIds,
	            o = e.createdByUserIds,
	            e = e.limit;
	        return {
	          hostType: t,
	          liveEventState: n,
	          createdAtRange: r,
	          participantCountRange: i,
	          durationRange: s,
	          liveEventIds: a,
	          createdByUserIds: o,
	          limit: null != e ? Math.min(Math.max(1, e), 100) : void 0
	        };
	      }
	    }, {
	      key: "_createQuery",
	      value: function () {
	        var e;
	        return Cs({
	          hostType: this.params.hostType,
	          liveEventState: this.params.liveEventState,
	          created_at_start_date: null == (e = this.params.createdAtRange) ? void 0 : e[0],
	          created_at_end_date: null == (e = this.params.createdAtRange) ? void 0 : e[0],
	          participant_count_gte: null == (e = this.params.participantCountRange) ? void 0 : e[0],
	          participant_count_lte: null == (e = this.params.participantCountRange) ? void 0 : e[1],
	          duration_range_gte: null == (e = this.params.durationRange) ? void 0 : e[0],
	          duration_range_lte: null == (e = this.params.durationRange) ? void 0 : e[1],
	          liveEventIds: this.params.liveEventIds,
	          createdByUserIds: this.params.createdByUserIds,
	          limit: this.params.limit,
	          prev: this.prevToken,
	          next: this.nextToken
	        });
	      }
	    }]), s;
	  }(),
	      Ns = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        var t;
	        return {
	          liveEvents: null == (t = e.live_events) ? void 0 : t.map(ji),
	          prev: e.prev,
	          next: e.next
	        };
	      }
	    }]), t;
	  }(),
	      As = function () {
	    function n(e, t) {
	      _(this, n), this.isLoading = !1, this.params = e, this.sender = t, this.prevToken = null, this.nextToken = null;
	    }

	    var r, e, t;
	    return y(n, [{
	      key: "hasPrev",
	      get: function () {
	        return !!this.prevToken;
	      }
	    }, {
	      key: "hasNext",
	      get: function () {
	        return !this.prevToken && !this.nextToken || !!this.nextToken;
	      }
	    }, {
	      key: "next",
	      value: (t = v(regeneratorRuntime.mark(function e() {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (this.isLoading) throw new Error("query is in progress");
	              e.next = 2;
	              break;

	            case 2:
	              if (this.hasNext) {
	                e.next = 4;
	                break;
	              }

	              return e.abrupt("return", []);

	            case 4:
	              return e.abrupt("return", this._sendQueryCommand(null, this.nextToken));

	            case 5:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "prev",
	      value: (e = v(regeneratorRuntime.mark(function e() {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (this.isLoading) throw new Error("query is in progress");
	              e.next = 2;
	              break;

	            case 2:
	              if (this.hasPrev) {
	                e.next = 4;
	                break;
	              }

	              return e.abrupt("return", []);

	            case 4:
	              return e.abrupt("return", this._sendQueryCommand(this.prevToken, null));

	            case 5:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return e.apply(this, arguments);
	      })
	    }, {
	      key: "_sendQueryCommand",
	      value: (r = v(regeneratorRuntime.mark(function e(t, n) {
	        var r, i;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (t && n) throw new Error("internal error while creating LiveEventListQueryCommand");
	              e.next = 2;
	              break;

	            case 2:
	              return this.isLoading = !0, r = new ks(this.params, t, n), e.next = 6, this.sender.send(r);

	            case 6:
	              return r = e.sent, i = r.payload, this.prevToken = i.prev, this.nextToken = i.next, this.isLoading = !1, e.abrupt("return", i.liveEvents);

	            case 12:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e, t) {
	        return r.apply(this, arguments);
	      })
	    }]), n;
	  }(),
	      ds = {},
	      Os = Yt,
	      Rs = we,
	      Ds = ce,
	      Ms = s;

	  ds.f = e && !Kt ? Object.defineProperties : function (e, t) {
	    Rs(e);

	    for (var n, r = Ds(t), i = Ms(t), s = i.length, a = 0; a < s;) Os.f(e, n = i[a++], r[n]);

	    return e;
	  };

	  function xs() {}

	  function Ls(e) {
	    e.write(zs("")), e.close();
	    var t = e.parentWindow.Object;
	    return e = null, t;
	  }

	  function Ps(e) {
	    Xs[Ys][e] = !0;
	  }

	  var Us,
	      qs,
	      hs = de("document", "documentElement"),
	      Fs = we,
	      js = ds,
	      Hs = t,
	      i = Gn,
	      Gs = hs,
	      Vs = Ie,
	      Bs = "prototype",
	      Ks = "script",
	      Qs = Te("IE_PROTO"),
	      zs = function (e) {
	    return "<" + Ks + ">" + e + "</" + Ks + ">";
	  },
	      Ws = function () {
	    try {
	      Us = new ActiveXObject("htmlfile");
	    } catch (e) {}

	    Ws = "undefined" == typeof document || document.domain && Us ? Ls(Us) : (e = Vs("iframe"), t = "java" + Ks + ":", e.style.display = "none", Gs.appendChild(e), e.src = String(t), (t = e.contentWindow.document).open(), t.write(zs("document.F=Object")), t.close(), t.F);

	    for (var e, t, n = Hs.length; n--;) delete Ws[Bs][Hs[n]];

	    return Ws();
	  },
	      a = (i[Qs] = !0, Object.create || function (e, t) {
	    var n;
	    return null !== e ? (xs[Bs] = Fs(e), n = new xs(), xs[Bs] = null, n[Qs] = e) : n = Ws(), void 0 === t ? n : js.f(n, t);
	  }),
	      Kt = ge,
	      ds = a,
	      t = Yt.f,
	      Ys = Kt("unscopables"),
	      Xs = Array.prototype,
	      i = (null == Xs[Ys] && t(Xs, Ys, {
	    configurable: !0,
	    value: ds(null)
	  }), Me),
	      Js = li.findIndex,
	      Kt = Ps,
	      t = "findIndex",
	      Zs = !0,
	      ds = (t in [] && Array(1)[t](function () {
	    Zs = !1;
	  }), i({
	    target: "Array",
	    proto: !0,
	    forced: Zs
	  }, {
	    findIndex: function (e) {
	      return Js(this, e, 1 < arguments.length ? arguments[1] : void 0);
	    }
	  }), Kt(t), {}),
	      i = !te(function () {
	    function e() {}

	    return e.prototype.constructor = null, Object.getPrototypeOf(new e()) !== e.prototype;
	  }),
	      $s = Ft,
	      ea = le,
	      ta = ye,
	      Kt = i,
	      na = Te("IE_PROTO"),
	      ra = Object,
	      ia = ra.prototype,
	      t = Kt ? ra.getPrototypeOf : function (e) {
	    e = ta(e);
	    if ($s(e, na)) return e[na];
	    var t = e.constructor;
	    return ea(t) && e instanceof t ? t.prototype : e instanceof ra ? ia : null;
	  },
	      i = te,
	      Kt = le,
	      sa = t,
	      aa = Se,
	      oa = ge("iterator"),
	      ua = !1;

	  [].keys && ("next" in (fa = [].keys()) ? (sa = sa(sa(fa))) !== Object.prototype && (qs = sa) : ua = !0);

	  function ca(e, t, n) {
	    (e = e && !n ? e.prototype : e) && !va(e, _a) && pa(e, _a, {
	      configurable: !0,
	      value: t
	    });
	  }

	  function la() {
	    return this;
	  }

	  function ha() {
	    return this;
	  }

	  function da(e, t, n, r, i, s, a) {
	    function o(e) {
	      if (e === i && f) return f;
	      if (!Ha && e in h) return h[e];

	      switch (e) {
	        case "keys":
	        case Va:
	        case Ba:
	          return function () {
	            return new n(this, e);
	          };
	      }

	      return function () {
	        return new n(this);
	      };
	    }

	    Ra(n, t, r);
	    var u,
	        c,
	        r = t + " Iterator",
	        l = !1,
	        h = e.prototype,
	        d = h[Ga] || h["@@iterator"] || i && h[i],
	        f = !Ha && d || o(i),
	        p = "Array" == t && h.entries || d;
	    if (p && (p = Da(p.call(new e()))) !== Object.prototype && p.next && (Da(p) !== ja && (Ma ? Ma(p, ja) : Oa(p[Ga]) || Pa(p, Ga, ha)), xa(p, r, !0)), qa && i == Va && d && d.name !== Va && (Fa ? La(h, "name", Va) : (l = !0, f = function () {
	      return Aa(d, this);
	    })), i) if (u = {
	      values: o(Va),
	      keys: s ? f : o("keys"),
	      entries: o(Ba)
	    }, a) for (c in u) !Ha && !l && c in h || Pa(h, c, u[c]);else Na({
	      target: t,
	      proto: !0,
	      forced: Ha || l
	    }, u);
	    return h[Ga] !== f && Pa(h, Ga, f, {
	      name: i
	    }), Ua[t] = f, u;
	  }

	  Kt((qs = null == qs || i(function () {
	    var e = {};
	    return qs[oa].call(e) !== e;
	  }) ? {} : qs)[oa]) || aa(qs, oa, function () {
	    return this;
	  });

	  var fa = {
	    IteratorPrototype: qs,
	    BUGGY_SAFARI_ITERATORS: ua
	  },
	      pa = Yt.f,
	      va = Ft,
	      _a = ge("toStringTag"),
	      ya = fa.IteratorPrototype,
	      ma = a,
	      ga = ne,
	      Ea = ca,
	      ba = ds,
	      Ia = le,
	      wa = String,
	      Ta = TypeError,
	      Sa = et,
	      Ca = we,
	      ka = function (e) {
	    if ("object" == typeof e || Ia(e)) return e;
	    throw Ta("Can't set " + wa(e) + " as a prototype");
	  },
	      sa = Object.setPrototypeOf || ("__proto__" in {} ? function () {
	    var n,
	        r = !1,
	        e = {};

	    try {
	      (n = Sa(Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set))(e, []), r = e instanceof Array;
	    } catch (e) {}

	    return function (e, t) {
	      return Ca(e), ka(t), r ? n(e, t) : e.__proto__ = t, e;
	    };
	  }() : void 0),
	      Na = Me,
	      Aa = Ze,
	      Oa = le,
	      Ra = function (e, t, n, r) {
	    t += " Iterator";
	    return e.prototype = ma(ya, {
	      next: ga(+!r, n)
	    }), Ea(e, t, !1), ba[t] = la, e;
	  },
	      Da = t,
	      Ma = sa,
	      xa = ca,
	      La = mt,
	      Pa = Se,
	      Kt = ge,
	      Ua = ds,
	      qa = n.PROPER,
	      Fa = n.CONFIGURABLE,
	      ja = fa.IteratorPrototype,
	      Ha = fa.BUGGY_SAFARI_ITERATORS,
	      Ga = Kt("iterator"),
	      Va = "values",
	      Ba = "entries",
	      Ka = ce,
	      i = Ps,
	      aa = ds,
	      ua = Jt,
	      t = Yt.f,
	      n = da,
	      fa = e,
	      Qa = "Array Iterator",
	      za = ua.set,
	      Wa = ua.getterFor(Qa),
	      Kt = n(Array, "Array", function (e, t) {
	    za(this, {
	      type: Qa,
	      target: Ka(e),
	      index: 0,
	      kind: t
	    });
	  }, function () {
	    var e = Wa(this),
	        t = e.target,
	        n = e.kind,
	        r = e.index++;
	    return !t || r >= t.length ? {
	      value: e.target = void 0,
	      done: !0
	    } : "keys" == n ? {
	      value: r,
	      done: !1
	    } : "values" == n ? {
	      value: t[r],
	      done: !1
	    } : {
	      value: [r, t[r]],
	      done: !1
	    };
	  }, "values"),
	      ua = aa.Arguments = aa.Array;

	  if (i("keys"), i("values"), i("entries"), fa && "values" !== ua.name) try {
	    t(ua, "name", {
	      value: "values"
	    });
	  } catch (e) {}

	  var n = {
	    exports: {}
	  },
	      aa = {},
	      Ya = ke,
	      Xa = Ae,
	      Ja = Qi,
	      Za = Array,
	      $a = Math.max,
	      eo = oe,
	      to = ce,
	      no = jn.f,
	      ro = function (e, t, n) {
	    for (var r = Xa(e), i = Ya(t, r), s = Ya(void 0 === n ? r : n, r), a = Za($a(s - i, 0)), o = 0; i < s; i++, o++) Ja(a, o, e[i]);

	    return a.length = o, a;
	  },
	      io = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];

	  aa.f = function (e) {
	    if (!io || "Window" != eo(e)) return no(to(e));

	    try {
	      return no(e);
	    } catch (e) {
	      return ro(io);
	    }
	  };

	  function so(e) {
	    vo(e, bo, {
	      value: {
	        objectID: "O" + Io++,
	        weakData: {}
	      }
	    });
	  }

	  var i = te(function () {
	    var e;
	    "function" == typeof ArrayBuffer && (e = new ArrayBuffer(8), Object.isExtensible(e) && Object.defineProperty(e, "a", {
	      value: 8
	    }));
	  }),
	      fa = te,
	      ao = he,
	      oo = oe,
	      uo = i,
	      co = Object.isExtensible,
	      t = fa(function () {
	  }) || uo ? function (e) {
	    return !!ao(e) && (!uo || "ArrayBuffer" != oo(e)) && (!co || co(e));
	  } : co,
	      ua = !te(function () {
	    return Object.isExtensible(Object.preventExtensions({}));
	  }),
	      lo = Me,
	      ho = et,
	      i = Gn,
	      fo = he,
	      po = Ft,
	      vo = Yt.f,
	      _o = jn,
	      yo = aa,
	      mo = t,
	      go = ua,
	      Eo = !1,
	      bo = me("meta"),
	      Io = 0,
	      wo = n.exports = {
	    enable: function () {
	      wo.enable = function () {}, Eo = !0;
	      var i = _o.f,
	          s = ho([].splice),
	          e = {};
	      e[bo] = 1, i(e).length && (_o.f = function (e) {
	        for (var t = i(e), n = 0, r = t.length; n < r; n++) if (t[n] === bo) {
	          s(t, n, 1);
	          break;
	        }

	        return t;
	      }, lo({
	        target: "Object",
	        stat: !0,
	        forced: !0
	      }, {
	        getOwnPropertyNames: yo.f
	      }));
	    },
	    fastKey: function (e, t) {
	      if (!fo(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;

	      if (!po(e, bo)) {
	        if (!mo(e)) return "F";
	        if (!t) return "E";
	        so(e);
	      }

	      return e[bo].objectID;
	    },
	    getWeakData: function (e, t) {
	      if (!po(e, bo)) {
	        if (!mo(e)) return !0;
	        if (!t) return !1;
	        so(e);
	      }

	      return e[bo].weakData;
	    },
	    onFreeze: function (e) {
	      return go && Eo && mo(e) && !po(e, bo) && so(e), e;
	    }
	  };
	  i[bo] = !0;

	  function To(e) {
	    if (null != e) return Do(e, xo) || Do(e, "@@iterator") || Mo[Ro(e)];
	  }

	  function So(e, t) {
	    this.stopped = e, this.result = t;
	  }

	  function Co(e, t, n) {
	    function r(e) {
	      return s && $o(s, "normal", e), new So(!0, e);
	    }

	    function i(e) {
	      return d ? (Qo(e), v ? _(e[0], e[1], r) : _(e[0], e[1])) : v ? _(e, r) : _(e);
	    }

	    var s,
	        a,
	        o,
	        u,
	        c,
	        l,
	        h = n && n.that,
	        d = !(!n || !n.AS_ENTRIES),
	        f = !(!n || !n.IS_RECORD),
	        p = !(!n || !n.IS_ITERATOR),
	        v = !(!n || !n.INTERRUPTED),
	        _ = Bo(t, h);

	    if (f) s = e.iterator;else if (p) s = e;else {
	      if (!(n = Zo(e))) throw eu(zo(e) + " is not iterable");

	      if (Wo(n)) {
	        for (a = 0, o = Yo(e); a < o; a++) if ((u = i(e[a])) && Xo(tu, u)) return u;

	        return new So(!1);
	      }

	      s = Jo(e, n);
	    }

	    for (c = (f ? e : s).next; !(l = Ko(c, s)).done;) {
	      try {
	        u = i(l.value);
	      } catch (e) {
	        $o(s, "throw", e);
	      }

	      if ("object" == typeof u && u && Xo(tu, u)) return u;
	    }

	    return new So(!1);
	  }

	  function ko(e, t) {
	    if (nu(t, e)) return e;
	    throw ru("Incorrect invocation");
	  }

	  var No = ds,
	      Ao = ge("iterator"),
	      Oo = Array.prototype,
	      Ro = ri,
	      Do = ve,
	      Mo = ds,
	      xo = ge("iterator"),
	      Lo = Ze,
	      Po = pe,
	      Uo = we,
	      qo = fe,
	      Fo = To,
	      jo = TypeError,
	      Ho = Ze,
	      Go = we,
	      Vo = ve,
	      Bo = xe,
	      Ko = Ze,
	      Qo = we,
	      zo = fe,
	      Wo = function (e) {
	    return void 0 !== e && (No.Array === e || Oo[Ao] === e);
	  },
	      Yo = Ae,
	      Xo = nt,
	      Jo = function (e, t) {
	    t = arguments.length < 2 ? Fo(e) : t;
	    if (Po(t)) return Uo(Lo(t, e));
	    throw jo(qo(e) + " is not iterable");
	  },
	      Zo = To,
	      $o = function (e, t, n) {
	    var r, i;
	    Go(e);

	    try {
	      if (!(r = Vo(e, "return"))) {
	        if ("throw" === t) throw n;
	        return n;
	      }

	      r = Ho(r, e);
	    } catch (e) {
	      i = !0, r = e;
	    }

	    if ("throw" === t) throw n;
	    if (i) throw r;
	    return Go(r), n;
	  },
	      eu = TypeError,
	      tu = So.prototype,
	      nu = nt,
	      ru = TypeError,
	      iu = ge("iterator"),
	      su = !1;

	  try {
	    var au = 0,
	        ou = {
	      next: function () {
	        return {
	          done: !!au++
	        };
	      },
	      return: function () {
	        su = !0;
	      }
	    };
	    ou[iu] = function () {
	      return this;
	    }, Array.from(ou, function () {
	      throw 2;
	    });
	  } catch (e) {}

	  function uu(e, t) {
	    if (!t && !su) return !1;
	    var n = !1;

	    try {
	      var r = {};
	      r[iu] = function () {
	        return {
	          next: function () {
	            return {
	              done: n = !0
	            };
	          }
	        };
	      }, e(r);
	    } catch (e) {}

	    return n;
	  }

	  function cu(e, t, n) {
	    return _u && pu(t = t.constructor) && t !== n && vu(t = t.prototype) && t !== n.prototype && _u(e, t), e;
	  }

	  function lu(e) {
	    var e = Du(e),
	        t = Mu.f;
	    xu && e && !e[Lu] && t(e, Lu, {
	      configurable: !0,
	      get: function () {
	        return this;
	      }
	    });
	  }

	  function hu(i) {
	    return function (e, t) {
	      var n,
	          e = Yu(Xu(e)),
	          t = Wu(t),
	          r = e.length;
	      return t < 0 || r <= t ? i ? "" : void 0 : (n = Zu(e, t)) < 55296 || 56319 < n || t + 1 === r || (r = Zu(e, t + 1)) < 56320 || 57343 < r ? i ? Ju(e, t) : n : i ? $u(e, t, t + 2) : r - 56320 + (n - 55296 << 10) + 65536;
	    };
	  }

	  function du(t, e) {
	    if (t) {
	      if (t[cc] !== hc) try {
	        uc(t, cc, hc);
	      } catch (e) {
	        t[cc] = hc;
	      }
	      if (t[lc] || uc(t, lc, e), ac[e]) for (var n in oc) if (t[n] !== oc[n]) try {
	        uc(t, n, oc[n]);
	      } catch (e) {
	        t[n] = oc[n];
	      }
	    }
	  }

	  var fu,
	      pu = le,
	      vu = he,
	      _u = sa,
	      yu = Me,
	      mu = K,
	      gu = et,
	      Eu = It,
	      bu = Se,
	      Iu = n.exports,
	      wu = Co,
	      Tu = ko,
	      Su = le,
	      Cu = he,
	      ku = te,
	      Nu = uu,
	      Au = ca,
	      Ou = cu,
	      Ru = Se,
	      Du = de,
	      Mu = Yt,
	      xu = e,
	      Lu = ge("species"),
	      Pu = Yt.f,
	      Uu = a,
	      qu = function (e, t, n) {
	    for (var r in t) Ru(e, r, t[r], n);

	    return e;
	  },
	      Fu = xe,
	      ju = ko,
	      Hu = Co,
	      Gu = da,
	      Vu = lu,
	      Bu = e,
	      Ku = n.exports.fastKey,
	      Qu = Jt.set,
	      zu = Jt.getterFor,
	      fa = (function (e, t, n) {
	    function r(e) {
	      var n = gu(f[e]);
	      bu(f, e, "add" == e ? function (e) {
	        return n(this, 0 === e ? 0 : e), this;
	      } : "delete" == e ? function (e) {
	        return !(l && !Cu(e)) && n(this, 0 === e ? 0 : e);
	      } : "get" == e ? function (e) {
	        return l && !Cu(e) ? void 0 : n(this, 0 === e ? 0 : e);
	      } : "has" == e ? function (e) {
	        return !(l && !Cu(e)) && n(this, 0 === e ? 0 : e);
	      } : function (e, t) {
	        return n(this, 0 === e ? 0 : e, t), this;
	      });
	    }

	    var i,
	        s,
	        a,
	        o,
	        u,
	        c = -1 !== e.indexOf("Map"),
	        l = -1 !== e.indexOf("Weak"),
	        h = c ? "set" : "add",
	        d = mu[e],
	        f = d && d.prototype,
	        p = d,
	        v = {};
	    return Eu(e, !Su(d) || !(l || f.forEach && !ku(function () {
	      new d().entries().next();
	    }))) ? (p = n.getConstructor(t, e, c, h), Iu.enable()) : Eu(e, !0) && (s = (i = new p())[h](l ? {} : -0, 1) != i, a = ku(function () {
	      i.has(1);
	    }), o = Nu(function (e) {
	      new d(e);
	    }), u = !l && ku(function () {
	      for (var e = new d(), t = 5; t--;) e[h](t, t);

	      return !e.has(-0);
	    }), o || (((p = t(function (e, t) {
	      Tu(e, f);
	      e = Ou(new d(), e, p);
	      return null != t && wu(t, e[h], {
	        that: e,
	        AS_ENTRIES: c
	      }), e;
	    })).prototype = f).constructor = p), (a || u) && (r("delete"), r("has"), c && r("get")), (u || s) && r(h), l && f.clear && delete f.clear), v[e] = p, yu({
	      global: !0,
	      constructor: !0,
	      forced: p != d
	    }, v), Au(p, e), l || n.setStrong(p, e, c), p;
	  }("Map", function (e) {
	    return function () {
	      return e(this, arguments.length ? arguments[0] : void 0);
	    };
	  }, {
	    getConstructor: function (e, n, r, i) {
	      function s(e, t, n) {
	        var r,
	            i = u(e),
	            s = a(e, t);
	        return s ? s.value = n : (i.last = s = {
	          index: r = Ku(t, !0),
	          key: t,
	          value: n,
	          previous: t = i.last,
	          next: void 0,
	          removed: !1
	        }, i.first || (i.first = s), t && (t.next = s), Bu ? i.size++ : e.size++, "F" !== r && (i.index[r] = s)), e;
	      }

	      function a(e, t) {
	        var n,
	            e = u(e),
	            r = Ku(t);
	        if ("F" !== r) return e.index[r];

	        for (n = e.first; n; n = n.next) if (n.key == t) return n;
	      }

	      var e = e(function (e, t) {
	        ju(e, o), Qu(e, {
	          type: n,
	          index: Uu(null),
	          first: void 0,
	          last: void 0,
	          size: 0
	        }), Bu || (e.size = 0), null != t && Hu(t, e[i], {
	          that: e,
	          AS_ENTRIES: r
	        });
	      }),
	          o = e.prototype,
	          u = zu(n);
	      return qu(o, {
	        clear: function () {
	          for (var e = u(this), t = e.index, n = e.first; n;) n.removed = !0, n.previous && (n.previous = n.previous.next = void 0), delete t[n.index], n = n.next;

	          e.first = e.last = void 0, Bu ? e.size = 0 : this.size = 0;
	        },
	        delete: function (e) {
	          var t,
	              n,
	              r = u(this),
	              e = a(this, e);
	          return e && (t = e.next, n = e.previous, delete r.index[e.index], e.removed = !0, n && (n.next = t), t && (t.previous = n), r.first == e && (r.first = t), r.last == e && (r.last = n), Bu ? r.size-- : this.size--), !!e;
	        },
	        forEach: function (e) {
	          for (var t, n = u(this), r = Fu(e, 1 < arguments.length ? arguments[1] : void 0); t = t ? t.next : n.first;) for (r(t.value, t.key, this); t && t.removed;) t = t.previous;
	        },
	        has: function (e) {
	          return !!a(this, e);
	        }
	      }), qu(o, r ? {
	        get: function (e) {
	          e = a(this, e);
	          return e && e.value;
	        },
	        set: function (e, t) {
	          return s(this, 0 === e ? 0 : e, t);
	        }
	      } : {
	        add: function (e) {
	          return s(this, e = 0 === e ? 0 : e, e);
	        }
	      }), Bu && Pu(o, "size", {
	        get: function () {
	          return u(this).size;
	        }
	      }), e;
	    },
	    setStrong: function (e, t, n) {
	      var r = t + " Iterator",
	          i = zu(t),
	          s = zu(r);
	      Gu(e, t, function (e, t) {
	        Qu(this, {
	          type: r,
	          target: e,
	          state: i(e),
	          kind: t,
	          last: void 0
	        });
	      }, function () {
	        for (var e = s(this), t = e.kind, n = e.last; n && n.removed;) n = n.previous;

	        return e.target && (e.last = n = n ? n.next : e.state.first) ? "keys" == t ? {
	          value: n.key,
	          done: !1
	        } : "values" == t ? {
	          value: n.value,
	          done: !1
	        } : {
	          value: [n.key, n.value],
	          done: !1
	        } : {
	          value: e.target = void 0,
	          done: !0
	        };
	      }, n ? "entries" : "values", !n, !0), Vu(t);
	    }
	  }), et),
	      Wu = Ce,
	      Yu = zi,
	      Xu = ue,
	      Ju = fa("".charAt),
	      Zu = fa("".charCodeAt),
	      $u = fa("".slice),
	      Gn = {
	    codeAt: hu(!1),
	    charAt: hu(!0)
	  },
	      ec = Gn.charAt,
	      tc = zi,
	      aa = Jt,
	      t = da,
	      nc = "String Iterator",
	      rc = aa.set,
	      ic = aa.getterFor(nc),
	      ua = (t(String, "String", function (e) {
	    rc(this, {
	      type: nc,
	      string: tc(e),
	      index: 0
	    });
	  }, function () {
	    var e = ic(this),
	        t = e.string,
	        n = e.index;
	    return n >= t.length ? {
	      value: void 0,
	      done: !0
	    } : (t = ec(t, n), e.index += t.length, {
	      value: t,
	      done: !1
	    });
	  }), {
	    CSSRuleList: 0,
	    CSSStyleDeclaration: 0,
	    CSSValueList: 0,
	    ClientRectList: 0,
	    DOMRectList: 0,
	    DOMStringList: 0,
	    DOMTokenList: 1,
	    DataTransferItemList: 0,
	    FileList: 0,
	    HTMLAllCollection: 0,
	    HTMLCollection: 0,
	    HTMLFormElement: 0,
	    HTMLSelectElement: 0,
	    MediaList: 0,
	    MimeTypeArray: 0,
	    NamedNodeMap: 0,
	    NodeList: 1,
	    PaintRequestList: 0,
	    Plugin: 0,
	    PluginArray: 0,
	    SVGLengthList: 0,
	    SVGNumberList: 0,
	    SVGPathSegList: 0,
	    SVGPointList: 0,
	    SVGStringList: 0,
	    SVGTransformList: 0,
	    SourceBufferList: 0,
	    StyleSheetList: 0,
	    TextTrackCueList: 0,
	    TextTrackList: 0,
	    TouchList: 0
	  }),
	      i = Ie("span").classList,
	      ri = i && i.constructor && i.constructor.prototype,
	      ds = ri === Object.prototype ? void 0 : ri,
	      sc = K,
	      ac = ua,
	      ou = ds,
	      oc = Kt,
	      uc = mt,
	      n = ge,
	      cc = n("iterator"),
	      lc = n("toStringTag"),
	      hc = oc.values;

	  for (fu in ac) du(sc[fu] && sc[fu].prototype, fu);

	  du(ou, "DOMTokenList");

	  function dc(e, t) {
	    var n = [][e];
	    return !!n && Bl(function () {
	      n.call(null, t || function () {
	        return 1;
	      }, 1);
	    });
	  }

	  function fc(t) {
	    if (t && t.forEach !== Wl) try {
	      Yl(t, "forEach", Wl);
	    } catch (e) {
	      t.forEach = Wl;
	    }
	  }

	  var pc,
	      vc,
	      _c = e,
	      fa = et,
	      yc = Ze,
	      aa = te,
	      mc = s,
	      gc = Jn,
	      Ec = $e,
	      bc = ye,
	      Ic = rt,
	      wc = Object.assign,
	      Tc = Object.defineProperty,
	      Sc = fa([].concat),
	      t = !wc || aa(function () {
	    if (_c && 1 !== wc({
	      b: 1
	    }, wc(Tc({}, "a", {
	      enumerable: !0,
	      get: function () {
	        Tc(this, "b", {
	          value: 3,
	          enumerable: !1
	        });
	      }
	    }), {
	      b: 2
	    })).b) return !0;
	    var e = {},
	        t = {},
	        n = Symbol(),
	        r = "abcdefghijklmnopqrst";
	    return e[n] = 7, r.split("").forEach(function (e) {
	      t[e] = e;
	    }), 7 != wc({}, e)[n] || mc(wc({}, t)).join("") != r;
	  }) ? function (e, t) {
	    for (var n = bc(e), r = arguments.length, i = 1, s = gc.f, a = Ec.f; i < r;) for (var o, u = Ic(arguments[i++]), c = s ? Sc(mc(u), s(u)) : mc(u), l = c.length, h = 0; h < l;) o = c[h++], _c && !yc(a, u, o) || (n[o] = u[o]);

	    return n;
	  } : wc,
	      i = (Me({
	    target: "Object",
	    stat: !0,
	    arity: 2,
	    forced: Object.assign !== t
	  }, {
	    assign: t
	  }), Me),
	      Cc = r.includes,
	      ri = Ps,
	      kc = (i({
	    target: "Array",
	    proto: !0,
	    forced: te(function () {
	      return !Array(1).includes();
	    })
	  }, {
	    includes: function (e) {
	      return Cc(this, e, 1 < arguments.length ? arguments[1] : void 0);
	    }
	  }), ri("includes"), he),
	      Nc = oe,
	      Ac = ge("match"),
	      Oc = function (e) {
	    var t;
	    return kc(e) && (void 0 !== (t = e[Ac]) ? !!t : "RegExp" == Nc(e));
	  },
	      Rc = TypeError,
	      Dc = ge("match"),
	      Kt = Me,
	      Mc = function (e) {
	    if (Oc(e)) throw Rc("The method doesn't accept regular expressions");
	    return e;
	  },
	      xc = ue,
	      Lc = zi,
	      n = function (t) {
	    var n = /./;

	    try {
	      "/./"[t](n);
	    } catch (e) {
	      try {
	        return n[Dc] = !1, "/./"[t](n);
	      } catch (e) {}
	    }

	    return !1;
	  },
	      Pc = et("".indexOf),
	      Uc = (Kt({
	    target: "String",
	    proto: !0,
	    forced: !n("includes")
	  }, {
	    includes: function (e) {
	      return !!~Pc(Lc(xc(this)), Lc(Mc(e)), 1 < arguments.length ? arguments[1] : void 0);
	    }
	  }), D.LiveEventRole = void 0, (ou = D.LiveEventRole || (D.LiveEventRole = {})).HOST = "host", ou.PARTICIPANT = "participant", D.LiveEventState = void 0, (s = D.LiveEventState || (D.LiveEventState = {})).CREATED = "created", s.READY = "ready", s.ONGOING = "ongoing", s.PAUSED = "paused", s.ENDED = "ended", D.HostState = void 0, (Jn = D.HostState || (D.HostState = {})).ENTERED = "entered", Jn.CONNECTED = "connected", Jn.DISCONNECTED = "disconnected", Jn.EXITED = "exited", D.ParticipantState = void 0, ($e = D.ParticipantState || (D.ParticipantState = {})).ENTERED = "entered", $e.EXITED = "exited", function () {
	    g(s, Pi);
	    var i = b(s);

	    function s(e, t, n) {
	      var r;
	      return _(this, s), (r = i.call(this)).appId = e, r.userId = t, r.accessToken = n, r;
	    }

	    return y(s, [{
	      key: "getAuth",
	      value: function () {
	        return !1;
	      }
	    }, {
	      key: "getData",
	      value: function () {
	        return {
	          app_id: this.appId,
	          user_id: this.userId,
	          access_token: this.accessToken
	        };
	      }
	    }, {
	      key: "getPath",
	      value: function () {
	        return "/v1/users/".concat(encodeURIComponent(this.userId), "/login");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return "POST";
	      }
	    }]), s;
	  }()),
	      qc = ((fa = pc = pc || {}).POST = "POST", fa.GET = "GET", fa.DELETE = "DELETE", fa.OPTION = "OPTION", fa.PUT = "PUT", function () {
	    g(o, Ui);
	    var a = b(o);

	    function o(e, t, n, r, i) {
	      var s;
	      return _(this, o), m(E(s = a.call(this)), "type", u.CREATE), s.hostType = e, s.hostIds = Array.isArray(t) ? t : [t], s.title = null === n ? "" : n, s.coverUrl = null === r ? "" : r, s.coverFile = null === i ? "" : i, s;
	    }

	    return y(o, [{
	      key: "getData",
	      value: function () {
	        function e(e, t, n, r) {
	          void 0 !== n && i.set(t, n);
	        }

	        var i = new FormData();
	        return e(0, "host_type", this.hostType), e(0, "user_ids_for_host", String(this.hostIds)), e(0, "title", this.title), e(0, "cover_url", this.coverUrl), e(0, "cover_file", this.coverFile), i;
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events";
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), o;
	  }()),
	      Fc = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEvent: ji(e.live_event)
	        };
	      }
	    }]), t;
	  }(),
	      jc = function () {
	    g(r, Ui);
	    var n = b(r);

	    function r(e) {
	      var t;
	      return _(this, r), m(E(t = n.call(this)), "type", u.GET), t.liveEventId = e, t;
	    }

	    return y(r, [{
	      key: "getData",
	      value: function () {}
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId);
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.GET;
	      }
	    }]), r;
	  }(),
	      Hc = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEvent: ji(e.live_event)
	        };
	      }
	    }]), t;
	  }(),
	      Gc = function () {
	    g(i, Ui);
	    var r = b(i);

	    function i(e, t) {
	      var n;
	      return _(this, i), m(E(n = r.call(this)), "type", u.ENTER_HOST), m(E(n), "mediaOption", {
	        turnAudioOn: !0,
	        turnVideoOn: !0
	      }), n.liveEventId = e, n.mediaOption = t, n;
	    }

	    return y(i, [{
	      key: "getData",
	      value: function () {
	        return {
	          is_audio_on: this.mediaOption.turnAudioOn,
	          is_video_on: this.mediaOption.turnVideoOn
	        };
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/hosts");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), i;
	  }(),
	      Vc = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          host: Hi(e.host)
	        };
	      }
	    }]), t;
	  }(),
	      Bc = function () {
	    g(r, Ui);
	    var n = b(r);

	    function r(e) {
	      var t;
	      return _(this, r), m(E(t = n.call(this)), "type", u.READY), t.liveEventId = e, t;
	    }

	    return y(r, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/ready");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), r;
	  }(),
	      Kc = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEvent: ji(e.live_event)
	        };
	      }
	    }]), t;
	  }(),
	      Qc = function () {
	    g(r, Ui);
	    var n = b(r);

	    function r(e) {
	      var t;
	      return _(this, r), m(E(t = n.call(this)), "type", u.START), t.liveEventId = e, t;
	    }

	    return y(r, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/start");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), r;
	  }(),
	      zc = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEvent: ji(e.live_event)
	        };
	      }
	    }]), t;
	  }(),
	      Wc = function () {
	    g(i, Ui);
	    var r = b(i);

	    function i(e, t) {
	      var n;
	      return _(this, i), m(E(n = r.call(this)), "type", u.EXIT_HOST), n.liveEventId = e, n.hostId = t, n;
	    }

	    return y(i, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/hosts/").concat(this.hostId);
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.DELETE;
	      }
	    }]), i;
	  }(),
	      Yc = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          host: Hi(e.host)
	        };
	      }
	    }]), t;
	  }(),
	      Xc = function () {
	    g(r, Ui);
	    var n = b(r);

	    function r(e) {
	      var t;
	      return _(this, r), m(E(t = n.call(this)), "type", u.DELETE), t.liveEventId = e, t;
	    }

	    return y(r, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId);
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.DELETE;
	      }
	    }]), r;
	  }(),
	      Jc = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEvent: ji(e.live_event)
	        };
	      }
	    }]), t;
	  }(),
	      Zc = function () {
	    g(r, Ui);
	    var n = b(r);

	    function r(e) {
	      var t;
	      return _(this, r), m(E(t = n.call(this)), "type", u.ENTER), t.liveEventId = e, t;
	    }

	    return y(r, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/participants");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), r;
	  }(),
	      $c = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          participant: Vi(e.participant)
	        };
	      }
	    }]), t;
	  }(),
	      el = function () {
	    g(i, Ui);
	    var r = b(i);

	    function i(e, t) {
	      var n;
	      return _(this, i), m(E(n = r.call(this)), "type", u.EXIT), n.liveEventId = e, n.participantId = t, n;
	    }

	    return y(i, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/participants/").concat(this.participantId);
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.DELETE;
	      }
	    }]), i;
	  }(),
	      tl = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          participant: Vi(e.participant)
	        };
	      }
	    }]), t;
	  }(),
	      nl = function () {
	    g(s, Ui);
	    var i = b(s);

	    function s(e, t, n) {
	      var r;
	      return _(this, s), m(E(r = i.call(this)), "type", u.CONNECTED), r.liveEventId = e, r.participantId = t, r.endpointId = n, r;
	    }

	    return y(s, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/participants/").concat(this.participantId, "/rtcstreams/").concat(this.endpointId, "/connected");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), s;
	  }(),
	      rl = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          endpoint: Gi(e.rtcstream)
	        };
	      }
	    }]), t;
	  }(),
	      il = function () {
	    g(s, Ui);
	    var i = b(s);

	    function s(e, t, n) {
	      var r;
	      return _(this, s), m(E(r = i.call(this)), "type", u.HOST_CONNECTED), r.liveEventId = e, r.hostId = t, r.endpointId = n, r;
	    }

	    return y(s, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/hosts/").concat(this.hostId, "/rtcstreams/").concat(this.endpointId, "/connected");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), s;
	  }(),
	      sl = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          endpoint: Gi(e.rtcstream)
	        };
	      }
	    }]), t;
	  }(),
	      al = function () {
	    g(s, Ui);
	    var i = b(s);

	    function s(e, t, n) {
	      var r;
	      return _(this, s), m(E(r = i.call(this)), "type", u.DELETE_STREAM), r.liveEventId = e, r.participantId = t, r.endpointId = n, r;
	    }

	    return y(s, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/participants/").concat(this.participantId, "/rtcstreams/").concat(this.endpointId);
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.DELETE;
	      }
	    }]), s;
	  }(),
	      ol = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {};
	      }
	    }]), t;
	  }(),
	      ul = function () {
	    g(s, Ui);
	    var i = b(s);

	    function s(e, t, n) {
	      var r;
	      return _(this, s), m(E(r = i.call(this)), "type", u.HOST_DELETE_STREAM), r.liveEventId = e, r.hostId = t, r.endpointId = n, r;
	    }

	    return y(s, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/hosts/").concat(this.hostId, "/rtcstreams/").concat(this.endpointId);
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.DELETE;
	      }
	    }]), s;
	  }(),
	      cl = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {};
	      }
	    }]), t;
	  }(),
	      ll = function () {
	    g(a, Ui);
	    var s = b(a);

	    function a(e, t, n, r) {
	      var i;
	      return _(this, a), m(E(i = s.call(this)), "type", u.ATTACH), i.liveEventId = e, i.participantId = t, i.endpointId = n, i.attachTo = r, i;
	    }

	    return y(a, [{
	      key: "getData",
	      value: function () {
	        return {
	          attach_to: this.attachTo
	        };
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/participants/").concat(this.participantId, "/rtcstreams/").concat(this.endpointId, "/attach");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), a;
	  }(),
	      hl = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          endpoint: Gi(e.rtcstream)
	        };
	      }
	    }]), t;
	  }(),
	      dl = function () {
	    g(r, Li);
	    var n = b(r);

	    function r(e) {
	      var t;
	      return _(this, r), (t = n.call(this)).type = e.type, t.version = e.version, t.messageId = e.message_id, t.payload = t.parseData(e.payload), t;
	    }

	    return y(r);
	  }(),
	      fl = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          liveEvent: ji(e.live_event)
	        };
	      }
	    }]), t;
	  }(),
	      pl = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          liveEvent: ji(e.live_event)
	        };
	      }
	    }]), t;
	  }(),
	      vl = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          liveEvent: ji(e.live_event)
	        };
	      }
	    }]), t;
	  }(),
	      _l = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          host: Hi(e.host)
	        };
	      }
	    }]), t;
	  }(),
	      yl = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          host: Hi(e.host)
	        };
	      }
	    }]), t;
	  }(),
	      ml = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          host: Hi(e.host)
	        };
	      }
	    }]), t;
	  }(),
	      gl = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          host: Hi(e.host)
	        };
	      }
	    }]), t;
	  }(),
	      El = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          host: Hi(e.host)
	        };
	      }
	    }]), t;
	  }(),
	      bl = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          participant: Vi(e.participant),
	          participantCount: e.particpant_count,
	          peakParticipantCount: e.peak_participant_count,
	          cumulativeParticipantCount: e.cumulative_participant_count
	        };
	      }
	    }]), t;
	  }(),
	      Il = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          participant: Vi(e.participant),
	          participantCount: e.particpant_count,
	          peakParticipantCount: e.peak_participant_count,
	          cumulativeParticipantCount: e.cumulative_participant_count
	        };
	      }
	    }]), t;
	  }(),
	      wl = function () {
	    g(o, Ui);
	    var a = b(o);

	    function o(e, t, n, r, i) {
	      var s;
	      return _(this, o), m(E(s = a.call(this)), "type", u.CREATE_STREAM), s.liveEventId = e, s.participantId = t, s.sdp = n, s.audioAttr = r, s.videoAttr = i, s;
	    }

	    return y(o, [{
	      key: "getData",
	      value: function () {
	        return {
	          sdp: this.sdp,
	          audio_attr: this.audioAttr,
	          video_attr: this.videoAttr
	        };
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/participants/").concat(this.participantId, "/rtcstreams");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), o;
	  }(),
	      Tl = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          sdp: e.sdp,
	          endpoint: Gi(e.rtcstream)
	        };
	      }
	    }]), t;
	  }(),
	      Sl = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          hosts: e.hosts.map(Hi)
	        };
	      }
	    }]), t;
	  }(),
	      Cl = function () {
	    g(i, Ui);
	    var r = b(i);

	    function i(e, t) {
	      var n;
	      return _(this, i), m(E(n = r.call(this)), "type", u.HOST_ALIVE), n.liveEventId = e, n.hostId = t, n;
	    }

	    return y(i, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/hosts/").concat(this.hostId, "/alive");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), i;
	  }(),
	      kl = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {};
	      }
	    }]), t;
	  }(),
	      Nl = function () {
	    g(o, Ui);
	    var a = b(o);

	    function o(e, t, n, r, i) {
	      var s;
	      return _(this, o), m(E(s = a.call(this)), "type", u.HOST_CREATE_STREAM), s.liveEventId = e, s.hostId = t, s.sdp = n, s.audioAttr = r, s.videoAttr = i, s;
	    }

	    return y(o, [{
	      key: "getData",
	      value: function () {
	        return {
	          sdp: this.sdp,
	          audio_attr: this.audioAttr,
	          video_attr: this.videoAttr
	        };
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/hosts/").concat(this.hostId, "/rtcstreams");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), o;
	  }(),
	      Al = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          sdp: e.sdp,
	          endpoint: Gi(e.rtcstream)
	        };
	      }
	    }]), t;
	  }(),
	      Ol = function () {
	    g(i, Ui);
	    var r = b(i);

	    function i(e, t) {
	      var n;
	      return _(this, i), m(E(n = r.call(this)), "type", u.ALIVE), n.liveEventId = e, n.participantId = t, n;
	    }

	    return y(i, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/participants/").concat(this.participantId, "/alive");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), i;
	  }(),
	      Rl = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {};
	      }
	    }]), t;
	  }(),
	      Dl = function () {
	    g(t, Fi);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          participant: Vi(e.participant)
	        };
	      }
	    }]), t;
	  }(),
	      Ml = function () {
	    g(s, Ui);
	    var i = b(s);

	    function s(e, t, n) {
	      var r;
	      return _(this, s), m(E(r = i.call(this)), "type", u.AUDIO), r.liveEventId = e, r.hostId = t, r.on = n, r;
	    }

	    return y(s, [{
	      key: "getData",
	      value: function () {
	        return {
	          on: this.on
	        };
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/hosts/").concat(this.hostId, "/audio");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), s;
	  }(),
	      xl = function () {
	    g(s, Ui);
	    var i = b(s);

	    function s(e, t, n) {
	      var r;
	      return _(this, s), m(E(r = i.call(this)), "type", u.VIDEO), r.liveEventId = e, r.hostId = t, r.on = n, r;
	    }

	    return y(s, [{
	      key: "getData",
	      value: function () {
	        return {
	          on: this.on
	        };
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/hosts/").concat(this.hostId, "/video");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.POST;
	      }
	    }]), s;
	  }(),
	      Ll = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          host: Hi(e.host)
	        };
	      }
	    }]), t;
	  }(),
	      Pl = function () {
	    g(o, Ui);
	    var a = b(o);

	    function o(e, t, n, r, i) {
	      var s;
	      return _(this, o), m(E(s = a.call(this)), "type", u.UPDATE), s.liveEventId = e, s.hostIds = null === t ? "" : Array.isArray(t) ? t : [t], s.title = null === n ? "" : n, s.coverUrl = null === r ? "" : r, s.coverFile = null === i ? "" : i, s;
	    }

	    return y(o, [{
	      key: "getData",
	      value: function () {
	        function e(e, t, n, r) {
	          void 0 !== n && i.set(t, n);
	        }

	        var i = new FormData();
	        return e(0, "user_ids_for_host", String(this.hostIds)), e(0, "title", this.title), e(0, "cover_url", this.coverUrl), e(0, "cover_file", this.coverFile), i;
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId);
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.PUT;
	      }
	    }]), o;
	  }(),
	      Ul = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          liveEvent: ji(e.live_event)
	        };
	      }
	    }]), t;
	  }(),
	      ql = function () {
	    g(r, Ui);
	    var n = b(r);

	    function r(e) {
	      var t;
	      return _(this, r), m(E(t = n.call(this)), "type", u.CUSTOM_ITEMS_GET), t.liveEventId = e, t;
	    }

	    return y(r, [{
	      key: "getData",
	      value: function () {
	        return {};
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/custom-items");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.GET;
	      }
	    }]), r;
	  }(),
	      Fl = function () {
	    g(i, Ui);
	    var r = b(i);

	    function i(e, t) {
	      var n;
	      return _(this, i), m(E(n = r.call(this)), "type", u.CUSTOM_ITEMS_UPDATE), n.liveEventId = e, n.customItems = t, n;
	    }

	    return y(i, [{
	      key: "getData",
	      value: function () {
	        return this.customItems;
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/custom-items");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.PUT;
	      }
	    }]), i;
	  }(),
	      jl = function () {
	    g(i, Ui);
	    var r = b(i);

	    function i(e, t) {
	      var n;
	      return _(this, i), m(E(n = r.call(this)), "type", u.CUSTOM_ITEMS_DELETE), n.liveEventId = e, n.keys = t, n;
	    }

	    return y(i, [{
	      key: "getData",
	      value: function () {
	        return this.keys;
	      }
	    }, {
	      key: "getSubPath",
	      value: function () {
	        return "/live-events/".concat(this.liveEventId, "/custom-items");
	      }
	    }, {
	      key: "getMethod",
	      value: function () {
	        return pc.DELETE;
	      }
	    }]), i;
	  }(),
	      Hl = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          updatedAt: e.updated_at,
	          customItems: e.custom_items,
	          updatedKeys: e.updated_keys
	        };
	      }
	    }]), t;
	  }(),
	      Gl = function () {
	    g(t, dl);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "parseData",
	      value: function (e) {
	        return {
	          liveEventId: e.live_event_id,
	          deletedAt: e.deleted_at,
	          customItems: e.custom_items,
	          deletedKeys: e.deleted_keys
	        };
	      }
	    }]), t;
	  }(),
	      Vl = function () {
	    function e() {
	      _(this, e);
	    }

	    return y(e, null, [{
	      key: "createAuth",
	      value: function (e, t, n) {
	        return new Uc(e, t, n);
	      }
	    }, {
	      key: "createLiveEvent",
	      value: function (e, t, n, r, i) {
	        return new qc(e, t, n, r, i);
	      }
	    }, {
	      key: "updateLiveEvent",
	      value: function (e, t, n, r, i) {
	        return new Pl(e, t, n, r, i);
	      }
	    }, {
	      key: "createGetLiveEvent",
	      value: function (e) {
	        return new jc(e);
	      }
	    }, {
	      key: "createEnterHost",
	      value: function (e, t) {
	        return new Gc(e, t);
	      }
	    }, {
	      key: "createReady",
	      value: function (e) {
	        return new Bc(e);
	      }
	    }, {
	      key: "createStart",
	      value: function (e) {
	        return new Qc(e);
	      }
	    }, {
	      key: "createExitHost",
	      value: function (e, t) {
	        return new Wc(e, t);
	      }
	    }, {
	      key: "createEndLiveEvent",
	      value: function (e) {
	        return new Xc(e);
	      }
	    }, {
	      key: "createEnter",
	      value: function (e) {
	        return new Zc(e);
	      }
	    }, {
	      key: "createExit",
	      value: function (e, t) {
	        return new el(e, t);
	      }
	    }, {
	      key: "createConnected",
	      value: function (e, t, n) {
	        return new nl(e, t, n);
	      }
	    }, {
	      key: "createHostConnected",
	      value: function (e, t, n) {
	        return new il(e, t, n);
	      }
	    }, {
	      key: "createStream",
	      value: function (e, t, n, r, i) {
	        return new wl(e, t, n, r, i);
	      }
	    }, {
	      key: "createHostCreateStream",
	      value: function (e, t, n, r, i) {
	        return new Nl(e, t, n, r, i);
	      }
	    }, {
	      key: "createDeleteStream",
	      value: function (e, t, n) {
	        return new al(e, t, n);
	      }
	    }, {
	      key: "createHostDeleteStream",
	      value: function (e, t, n) {
	        return new ul(e, t, n);
	      }
	    }, {
	      key: "createAttach",
	      value: function (e, t, n, r) {
	        return new ll(e, t, n, r);
	      }
	    }, {
	      key: "createAudio",
	      value: function (e, t, n) {
	        return new Ml(e, t, n);
	      }
	    }, {
	      key: "createVideo",
	      value: function (e, t, n) {
	        return new xl(e, t, n);
	      }
	    }, {
	      key: "createAlive",
	      value: function (e, t) {
	        return new Ol(e, t);
	      }
	    }, {
	      key: "createHostAlive",
	      value: function (e, t) {
	        return new Cl(e, t);
	      }
	    }, {
	      key: "createGetCustomItems",
	      value: function (e) {
	        return new ql(e);
	      }
	    }, {
	      key: "createUpdateCustomItems",
	      value: function (e, t) {
	        return new Fl(e, t);
	      }
	    }, {
	      key: "createDeleteCustomItems",
	      value: function (e, t) {
	        return new jl(e, t);
	      }
	    }, {
	      key: "parseResponse",
	      value: function (e, t) {
	        try {
	          switch (e.type) {
	            case u.CREATE:
	              return new Fc(t);

	            case u.GET:
	              return new Hc(t);

	            case u.DELETE:
	              return new Jc(t);

	            case u.QUERY:
	              return new Ns(t);

	            case u.READY:
	              return new Kc(t);

	            case u.START:
	              return new zc(t);

	            case u.ENTER_HOST:
	              return new Vc(t);

	            case u.GET_HOSTS:
	              return new Sl(t);

	            case u.EXIT_HOST:
	              return new Yc(t);

	            case u.HOST_ALIVE:
	              return new kl(t);

	            case u.AUDIO:
	              return new gl(t);

	            case u.VIDEO:
	              return new El(t);

	            case u.HOST_CREATE_STREAM:
	              return new Al(t);

	            case u.HOST_DELETE_STREAM:
	              return new cl(t);

	            case u.HOST_CONNECTED:
	              return new sl(t);

	            case u.ENTER:
	              return new $c(t);

	            case u.EXIT:
	              return new tl(t);

	            case u.ALIVE:
	              return new Rl(t);

	            case u.GET_PARTICIPANTS:
	              return new Dl(t);

	            case u.CREATE_STREAM:
	              return new Tl(t);

	            case u.DELETE_STREAM:
	              return new ol(t);

	            case u.CONNECTED:
	              return new rl(t);

	            case u.ATTACH:
	              return new hl(t);

	            case u.CUSTOM_ITEMS_UPDATE:
	              return new Hl(t);

	            case u.CUSTOM_ITEMS_DELETE:
	              return new Gl(t);
	          }
	        } catch (e) {
	          return;
	        }
	      }
	    }, {
	      key: "parse",
	      value: function (e) {
	        if ("live" === e.call_type) try {
	          switch (e.type) {
	            case u.LIVE_EVENT_READY:
	              return new fl(e);

	            case u.LIVE_EVENT_STARTED:
	              return new pl(e);

	            case u.LIVE_EVENT_ENDED:
	              return new vl(e);

	            case u.LIVE_EVENT_UPDATED:
	              return new Ul(e);

	            case u.HOST_ENTERED:
	              return new _l(e);

	            case u.HOST_EXITED:
	              return new yl(e);

	            case u.HOST_CONNECTED:
	              return new ml(e);

	            case u.HOST_DISCONNECTED:
	              return new Ll(e);

	            case u.HOST_AUDIO_STATUS_CHANGED:
	              return new gl(e);

	            case u.HOST_VIDEO_STATUS_CHANGED:
	              return new El(e);

	            case u.PARTICIPANT_ENTERED:
	              return new bl(e);

	            case u.PARTICIPANT_EXITED:
	              return new Il(e);
	          }
	        } catch (e) {
	          return;
	        }
	      }
	    }]), e;
	  }(),
	      Bl = te,
	      Kl = li.forEach,
	      Ql = K,
	      zl = ua,
	      aa = ds,
	      Wl = dc("forEach") ? [].forEach : function (e) {
	    return Kl(this, e, 1 < arguments.length ? arguments[1] : void 0);
	  },
	      Yl = mt;

	  for (vc in zl) zl[vc] && fc(Ql[vc] && Ql[vc].prototype);

	  fc(aa);

	  var Xl = fe,
	      Jl = TypeError,
	      t = Me,
	      Zl = ye,
	      $l = ke,
	      eh = Ce,
	      th = Ae,
	      nh = Ki,
	      rh = qe,
	      ih = Qi,
	      sh = function (e, t) {
	    if (!delete e[t]) throw Jl("Cannot delete property " + Xl(t) + " of " + Xl(e));
	  },
	      i = je("splice"),
	      ah = Math.max,
	      oh = Math.min;

	  t({
	    target: "Array",
	    proto: !0,
	    forced: !i
	  }, {
	    splice: function (e, t) {
	      var n,
	          r,
	          i,
	          s,
	          a,
	          o,
	          u = Zl(this),
	          c = th(u),
	          l = $l(e, c),
	          e = arguments.length;

	      for (0 === e ? n = r = 0 : r = 1 === e ? (n = 0, c - l) : (n = e - 2, oh(ah(eh(t), 0), c - l)), nh(c + n - r), i = rh(u, r), s = 0; s < r; s++) (a = l + s) in u && ih(i, s, u[a]);

	      if (n < (i.length = r)) {
	        for (s = l; s < c - r; s++) o = s + n, (a = s + r) in u ? u[o] = u[a] : sh(u, o);

	        for (s = c; c - r + n < s; s--) sh(u, s - 1);
	      } else if (r < n) for (s = c - r; l < s; s--) o = s + n - 1, (a = s + r - 1) in u ? u[o] = u[a] : sh(u, o);

	      for (s = 0; s < n; s++) u[s + l] = arguments[s + 2];

	      return u.length = c - r + n, i;
	    }
	  });
	  var uh,
	      ri = et([].slice),
	      Kt = Me,
	      ch = Wn,
	      lh = ci,
	      hh = he,
	      dh = ke,
	      fh = Ae,
	      ph = ce,
	      vh = Qi,
	      n = ge,
	      _h = ri,
	      s = je("slice"),
	      yh = n("species"),
	      mh = Array,
	      gh = Math.max,
	      Eh = (Kt({
	    target: "Array",
	    proto: !0,
	    forced: !s
	  }, {
	    slice: function (e, t) {
	      var n,
	          r,
	          i,
	          s = ph(this),
	          a = fh(s),
	          o = dh(e, a),
	          u = dh(void 0 === t ? a : t, a);
	      if (ch(s) && (n = s.constructor, (n = lh(n) && (n === mh || ch(n.prototype)) || hh(n) && null === (n = n[yh]) ? void 0 : n) === mh || void 0 === n)) return _h(s, o, u);

	      for (r = new (void 0 === n ? mh : n)(gh(u - o, 0)), i = 0; o < u; o++, i++) o in s && vh(r, i, s[o]);

	      return r.length = i, r;
	    }
	  }), function () {
	    function e() {
	      _(this, e), m(this, "_listeners", {}), m(this, "on", this.addEventListener), m(this, "off", this.removeEventListener);
	    }

	    return y(e, [{
	      key: "addEventListener",
	      value: function (e, t) {
	        var n = this;
	        return e in this._listeners || (this._listeners[e] = []), this._listeners[e].push(t), function () {
	          return n.removeEventListener(e, t);
	        };
	      }
	    }, {
	      key: "once",
	      value: function (t, n) {
	        var r = this;
	        return this.on(t, function e() {
	          n.apply(void 0, arguments), r.removeEventListener(t, e);
	        });
	      }
	    }, {
	      key: "removeEventListener",
	      value: function (e, t) {
	        if (e in this._listeners) for (var n = this._listeners[e], r = 0, i = n.length; r < i; r++) if (n[r] === t) return void n.splice(r, 1);
	      }
	    }, {
	      key: "removeAllEventListeners",
	      value: function () {
	        this._listeners = {};
	      }
	    }, {
	      key: "_dispatchEvent",
	      value: function (e) {
	        if (e in this._listeners) {
	          for (var t = this._listeners[e].slice(), n = arguments.length, r = new Array(1 < n ? n - 1 : 0), i = 1; i < n; i++) r[i - 1] = arguments[i];

	          for (var s, a = 0, o = t.length; a < o; a++) (s = t[a]).call.apply(s, [this].concat(r));
	        }
	      }
	    }]), e;
	  }()),
	      Jn = Me,
	      $e = et,
	      bh = r.indexOf,
	      ua = dc,
	      Ih = $e([].indexOf),
	      wh = !!Ih && 1 / Ih([1], 1, -0) < 0,
	      ds = ua("indexOf");
	  Jn({
	    target: "Array",
	    proto: !0,
	    forced: wh || !ds
	  }, {
	    indexOf: function (e) {
	      var t = 1 < arguments.length ? arguments[1] : void 0;
	      return wh ? Ih(this, e, t) || 0 : bh(this, e, t);
	    }
	  }), (aa = uh = uh || {}).VERBOSE = "VERBOSE", aa.DEBUG = "DEBUG", aa.INFO = "INFO", aa.WARNING = "WARNING", aa.ERROR = "ERROR", aa.NONE = "NONE";

	  function Th(n, e, t, r) {
	    var a,
	        i = Jh(n),
	        o = !Xh(function () {
	      var e = {};
	      return e[i] = function () {
	        return 7;
	      }, 7 != ""[n](e);
	    }),
	        s = o && !Xh(function () {
	      var e = !1,
	          t = /a/;
	      return "split" === n && ((t = {
	        constructor: {}
	      }).constructor[$h] = function () {
	        return t;
	      }, t.flags = "", t[i] = /./[i]), t.exec = function () {
	        return e = !0, null;
	      }, t[i](""), !e;
	    });
	    o && s && !t || (a = zh(/./[i]), s = e(i, ""[n], function (e, t, n, r, i) {
	      var e = zh(e),
	          s = t.exec;
	      return s === Yh || s === ed.exec ? o && !i ? {
	        done: !0,
	        value: a(t, n, r)
	      } : {
	        done: !0,
	        value: e(n, t, r)
	      } : {
	        done: !1
	      };
	    }), Wh(String.prototype, n, s[0]), Wh(ed, i, s[1])), r && Zh(ed[i], "sham", !0);
	  }

	  function Sh(e, t, n) {
	    return t + (n ? td(e, t).length : 1);
	  }

	  function Ch(e, t) {
	    var n = e.exec;
	    if (hd(n)) return null !== (n = cd(n, e, t)) && ld(n), n;
	    if ("RegExp" === dd(e)) return cd(fd, e, t);
	    throw pd("RegExp#exec called on incompatible receiver");
	  }

	  var I = new (function () {
	    function e() {
	      _(this, e), this._listeners = [];
	    }

	    return y(e, [{
	      key: "verbose",
	      value: function () {
	        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];

	        this._log.apply(this, [uh.VERBOSE].concat(t));
	      }
	    }, {
	      key: "debug",
	      value: function () {
	        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];

	        this._log.apply(this, [uh.DEBUG].concat(t));
	      }
	    }, {
	      key: "info",
	      value: function () {
	        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];

	        this._log.apply(this, [uh.INFO].concat(t));
	      }
	    }, {
	      key: "warning",
	      value: function () {
	        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];

	        this._log.apply(this, [uh.WARNING].concat(t));
	      }
	    }, {
	      key: "error",
	      value: function () {
	        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];

	        this._log.apply(this, [uh.ERROR].concat(t));
	      }
	    }, {
	      key: "_log",
	      value: function (e) {
	        for (var t = arguments.length, n = new Array(1 < t ? t - 1 : 0), r = 1; r < t; r++) n[r - 1] = arguments[r];

	        var i,
	            s = G(this._listeners);

	        try {
	          for (s.s(); !(i = s.n()).done;) {
	            var a = i.value;

	            a._permit.apply(a, [e].concat(n));
	          }
	        } catch (e) {
	          s.e(e);
	        } finally {
	          s.f();
	        }
	      }
	    }, {
	      key: "addListener",
	      value: function (e) {
	        this._listeners.push(e);
	      }
	    }, {
	      key: "removeListener",
	      value: function (e) {
	        e = this._listeners.indexOf(e);
	        -1 !== e && this._listeners.splice(e, 1);
	      }
	    }, {
	      key: "removeAllListener",
	      value: function () {
	        this._listeners = [];
	      }
	    }]), e;
	  }())(),
	      t = te,
	      kh = K.RegExp,
	      i = t(function () {
	    var e = kh("a", "y");
	    return e.lastIndex = 2, null != e.exec("abcd");
	  }),
	      Wn = i || t(function () {
	    return !kh("a", "y").sticky;
	  }),
	      n = {
	    BROKEN_CARET: i || t(function () {
	      var e = kh("^r", "gy");
	      return e.lastIndex = 2, null != e.exec("str");
	    }),
	    MISSED_STICKY: Wn,
	    UNSUPPORTED_Y: i
	  },
	      Kt = te,
	      Nh = K.RegExp,
	      s = Kt(function () {
	    var e = Nh(".", "s");
	    return !(e.dotAll && e.exec("\n") && "s" === e.flags);
	  }),
	      r = te,
	      Ah = K.RegExp,
	      $e = r(function () {
	    var e = Ah("(?<a>b)", "g");
	    return "b" !== e.exec("b").groups.a || "bc" !== "b".replace(e, "$<a>c");
	  }),
	      Oh = Ze,
	      ua = et,
	      Rh = zi,
	      Dh = Wi,
	      Jn = n,
	      ds = Et.exports,
	      Mh = a,
	      xh = Jt.get,
	      aa = s,
	      t = $e,
	      Lh = ds("native-string-replace", String.prototype.replace),
	      Ph = RegExp.prototype.exec,
	      Uh = Ph,
	      qh = ua("".charAt),
	      Fh = ua("".indexOf),
	      jh = ua("".replace),
	      Hh = ua("".slice),
	      Gh = (Wn = /b*/g, Oh(Ph, i = /a/, "a"), Oh(Ph, Wn, "a"), 0 !== i.lastIndex || 0 !== Wn.lastIndex),
	      Vh = Jn.BROKEN_CARET,
	      Bh = void 0 !== /()??/.exec("")[1],
	      Kt = Uh = Gh || Bh || Vh || aa || t ? function (e) {
	    var t,
	        n,
	        r,
	        i,
	        s,
	        a,
	        o = this,
	        u = xh(o),
	        e = Rh(e),
	        c = u.raw;
	    if (c) return c.lastIndex = o.lastIndex, h = Oh(Uh, c, e), o.lastIndex = c.lastIndex, h;
	    var l = u.groups,
	        c = Vh && o.sticky,
	        h = Oh(Dh, o),
	        u = o.source,
	        d = 0,
	        f = e;
	    if (c && (h = jh(h, "y", ""), -1 === Fh(h, "g") && (h += "g"), f = Hh(e, o.lastIndex), 0 < o.lastIndex && (!o.multiline || o.multiline && "\n" !== qh(e, o.lastIndex - 1)) && (u = "(?: " + u + ")", f = " " + f, d++), t = new RegExp("^(?:" + u + ")", h)), Bh && (t = new RegExp("^" + u + "$(?!\\s)", h)), Gh && (n = o.lastIndex), r = Oh(Ph, c ? t : o, f), c ? r ? (r.input = Hh(r.input, d), r[0] = Hh(r[0], d), r.index = o.lastIndex, o.lastIndex += r[0].length) : o.lastIndex = 0 : Gh && r && (o.lastIndex = o.global ? r.index + r[0].length : n), Bh && r && 1 < r.length && Oh(Lh, r[0], t, function () {
	      for (i = 1; i < arguments.length - 2; i++) void 0 === arguments[i] && (r[i] = void 0);
	    }), r && l) for (r.groups = s = Mh(null), i = 0; i < l.length; i++) s[(a = l[i])[0]] = r[a[1]];
	    return r;
	  } : Uh,
	      r = (Me({
	    target: "RegExp",
	    proto: !0,
	    forced: /./.exec !== Kt
	  }, {
	    exec: Kt
	  }), Xe),
	      n = Function.prototype,
	      Kh = n.apply,
	      Qh = n.call,
	      Et = "object" == typeof Reflect && Reflect.apply || (r ? Qh.bind(Kh) : function () {
	    return Qh.apply(Kh, arguments);
	  }),
	      zh = et,
	      Wh = Se,
	      Yh = Kt,
	      Xh = te,
	      Jh = ge,
	      Zh = mt,
	      $h = Jh("species"),
	      ed = RegExp.prototype,
	      td = Gn.charAt,
	      a = et,
	      nd = ye,
	      rd = Math.floor,
	      id = a("".charAt),
	      sd = a("".replace),
	      ad = a("".slice),
	      od = /\$([$&'`]|\d{1,2}|<[^>]*>)/g,
	      ud = /\$([$&'`]|\d{1,2})/g,
	      cd = Ze,
	      ld = we,
	      hd = le,
	      dd = oe,
	      fd = Kt,
	      pd = TypeError,
	      vd = Et,
	      _d = Ze,
	      s = et,
	      $e = Th,
	      ds = te,
	      yd = we,
	      md = le,
	      gd = Ce,
	      Ed = Ne,
	      bd = zi,
	      Id = ue,
	      wd = Sh,
	      Td = ve,
	      Sd = function (s, a, o, u, c, e) {
	    var l = o + s.length,
	        h = u.length,
	        t = ud;
	    return void 0 !== c && (c = nd(c), t = od), sd(e, t, function (e, t) {
	      var n;

	      switch (id(t, 0)) {
	        case "$":
	          return "$";

	        case "&":
	          return s;

	        case "`":
	          return ad(a, 0, o);

	        case "'":
	          return ad(a, l);

	        case "<":
	          n = c[ad(t, 1, -1)];
	          break;

	        default:
	          var r,
	              i = +t;
	          if (0 == i) return e;
	          if (h < i) return 0 !== (r = rd(i / 10)) && r <= h ? void 0 === u[r - 1] ? id(t, 1) : u[r - 1] + id(t, 1) : e;
	          n = u[i - 1];
	      }

	      return void 0 === n ? "" : n;
	    });
	  },
	      Cd = Ch,
	      kd = ge("replace"),
	      Nd = Math.max,
	      Ad = Math.min,
	      Od = s([].concat),
	      Rd = s([].push),
	      Dd = s("".indexOf),
	      Md = s("".slice),
	      ua = "$0" === "a".replace(/./, "$0"),
	      xd = !!/./[kd] && "" === /./[kd]("a", "$0");

	  $e("replace", function (e, g, E) {
	    var b = xd ? "$" : "$0";
	    return [function (e, t) {
	      var n = Id(this),
	          r = null == e ? void 0 : Td(e, kd);
	      return r ? _d(r, e, n, t) : _d(g, bd(n), e, t);
	    }, function (e, t) {
	      var n = yd(this),
	          r = bd(e);

	      if ("string" == typeof t && -1 === Dd(t, b) && -1 === Dd(t, "$<")) {
	        e = E(g, n, r, t);
	        if (e.done) return e.value;
	      }

	      for (var i, s = md(t), a = (s || (t = bd(t)), n.global), o = (a && (i = n.unicode, n.lastIndex = 0), []); null !== (d = Cd(n, r)) && (Rd(o, d), a);) "" === bd(d[0]) && (n.lastIndex = wd(r, Ed(n.lastIndex), i));

	      for (var u, c = "", l = 0, h = 0; h < o.length; h++) {
	        for (var d, f = bd((d = o[h])[0]), p = Nd(Ad(gd(d.index), r.length), 0), v = [], _ = 1; _ < d.length; _++) Rd(v, void 0 === (u = d[_]) ? u : String(u));

	        var y = d.groups,
	            m = s ? (m = Od([f], v, p, r), void 0 !== y && Rd(m, y), bd(vd(t, void 0, m))) : Sd(f, r, p, v, y, t);
	        l <= p && (c += Md(r, l, p) + m, l = p + f.length);
	      }

	      return c + Md(r, l);
	    }];
	  }, !!ds(function () {
	    var e = /./;
	    return e.exec = function () {
	      var e = [];
	      return e.groups = {
	        a: "7"
	      }, e;
	    }, "7" !== "".replace(e, "$<a>");
	  }) || !ua || xd);

	  function Ld(t) {
	    return function (e) {
	      e = Ud(Pd(e));
	      return 1 & t && (e = qd(e, Fd, "")), e = 2 & t ? qd(e, jd, "") : e;
	    };
	  }

	  var i = et(1..valueOf),
	      Wn = "\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",
	      Pd = ue,
	      Ud = zi,
	      qd = et("".replace),
	      Jn = "[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",
	      Fd = RegExp("^" + Jn + Jn + "*"),
	      jd = RegExp(Jn + Jn + "*$"),
	      aa = {
	    start: Ld(1),
	    end: Ld(2),
	    trim: Ld(3)
	  },
	      t = e,
	      Xe = K,
	      n = et,
	      r = It,
	      mt = Se,
	      Hd = Ft,
	      Gd = cu,
	      Vd = nt,
	      Bd = kt,
	      Kd = Ee,
	      Qd = te,
	      Gn = jn.f,
	      zd = B.f,
	      Wd = Yt.f,
	      Yd = i,
	      Xd = aa.trim,
	      a = "Number",
	      Jd = Xe[a],
	      Zd = Jd.prototype,
	      $d = Xe.TypeError,
	      ef = n("".slice),
	      tf = n("".charCodeAt),
	      nf = function (e) {
	    var t,
	        n,
	        r,
	        i,
	        s,
	        a,
	        o,
	        u = Kd(e, "number");
	    if (Bd(u)) throw $d("Cannot convert a Symbol value to a number");
	    if ("string" == typeof u && 2 < u.length) if (u = Xd(u), 43 === (e = tf(u, 0)) || 45 === e) {
	      if (88 === (t = tf(u, 2)) || 120 === t) return NaN;
	    } else if (48 === e) {
	      switch (tf(u, 1)) {
	        case 66:
	        case 98:
	          n = 2, r = 49;
	          break;

	        case 79:
	        case 111:
	          n = 8, r = 55;
	          break;

	        default:
	          return +u;
	      }

	      for (s = (i = ef(u, 2)).length, a = 0; a < s; a++) if ((o = tf(i, a)) < 48 || r < o) return NaN;

	      return parseInt(i, n);
	    }
	    return +u;
	  };

	  if (r(a, !Jd(" 0o1") || !Jd("0b1") || Jd("+0x1"))) {
	    for (var rf, sf = function (e) {
	      var e = arguments.length < 1 ? 0 : Jd(function (e) {
	        e = Kd(e, "number");
	        return "bigint" == typeof e ? e : nf(e);
	      }(e)),
	          t = this;
	      return Vd(Zd, t) && Qd(function () {
	        Yd(t);
	      }) ? Gd(Object(e), t, sf) : e;
	    }, af = t ? Gn(Jd) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","), of = 0; af.length > of; of++) Hd(Jd, rf = af[of]) && !Hd(sf, rf) && Wd(sf, rf, zd(Jd, rf));

	    mt(Xe, a, (sf.prototype = Zd).constructor = sf, {
	      constructor: !0
	    });
	  }

	  function uf(n) {
	    Object.keys(n).forEach(function (e) {
	      var t;
	      (void 0 === (t = n[e]) || Number.isNaN(t) || "" === t || Array.isArray(t) && 0 === t.length) && delete n[e];
	    });
	  }

	  var cf,
	      lf,
	      hf,
	      df = function () {
	    var t = v(regeneratorRuntime.mark(function e(t) {
	      var n, r, i, s, a, o, u, c, l;
	      return regeneratorRuntime.wrap(function (e) {
	        for (;;) switch (e.prev = e.next) {
	          case 0:
	            if (t) {
	              e.next = 2;
	              break;
	            }

	            throw new Error("'getCandidateInfo()' is called without rtcConnection");

	          case 2:
	            return e.next = 4, t.getStats();

	          case 4:
	            n = e.sent, i = n.entries(), s = 0;

	          case 7:
	            if (!(s < n.size)) {
	              e.next = 18;
	              break;
	            }

	            if (a = i.next(), a = a.value) {
	              e.next = 11;
	              break;
	            }

	            return e.abrupt("continue", 15);

	          case 11:
	            if ("candidate-pair" === (o = a[1]).type && "succeeded" === o.state) return r = o.localCandidateId, e.abrupt("break", 18);
	            e.next = 15;
	            break;

	          case 15:
	            s++, e.next = 7;
	            break;

	          case 18:
	            if (!(s < n.size)) {
	              e.next = 28;
	              break;
	            }

	            if (o = i.next(), u = o.value) {
	              e.next = 22;
	              break;
	            }

	            return e.abrupt("continue", 25);

	          case 22:
	            if ("local-candidate" === (c = u[1]).type && c.id === r) return e.abrupt("return", {
	              connectionType: null != (l = c.candidateType) ? l : "",
	              protocol: null != (l = c.protocol) ? l : "",
	              relayProtocol: null != (l = c.relayProtocol) ? l : ""
	            });
	            e.next = 25;
	            break;

	          case 25:
	            s++, e.next = 18;
	            break;

	          case 28:
	            return e.abrupt("return", null);

	          case 29:
	          case "end":
	            return e.stop();
	        }
	      }, e);
	    }));
	    return function (e) {
	      return t.apply(this, arguments);
	    };
	  }(),
	      ff = function () {
	    var t = v(regeneratorRuntime.mark(function e(t) {
	      var n, r, i, s, a, o, u;
	      return regeneratorRuntime.wrap(function (e) {
	        for (;;) switch (e.prev = e.next) {
	          case 0:
	            return n = {}, r = {}, i = {}, s = {}, a = new Map(), o = new Map(), t.forEach(function (e) {
	              "codec" === e.type && a.set(e.id, e), "candidate-pair" === e.type && "succeeded" === e.state && (u = e.localCandidateId, n.webrtc_timestamp = e.time), "media-source" === e.type && o.set(e.kind, e);
	            }), t.forEach(function (e) {
	              var t;
	              "local-candidate" === e.type && e.id === u && (r.network_type = e.networkType, r.protocol = e.protocol, r.candidate_type = e.candidateType), "audio" !== e.kind && "audio" !== e.mediaType || ("outbound-rtp" === e.type && (i.codec = null == (t = a.get(e.codecId)) ? void 0 : t.mimeType, i.total_packets_sent = e.packetsSent, i.retransmitted_packets_sent = e.retransmittedPacketsSent), "remote-inbound-rtp" === e.type && (i.rtt = 1e3 * e.roundTripTime), "inbound-rtp" === e.type && (t = e.packetsLost / (e.packetsLost + e.packetsReceived) * 100, i.total_packets_received = e.packetsReceived, i.total_packets_lost_rate = t, i.total_packets_lost = e.packetsLost, i.jitter = 1e3 * e.jitter), "track" === e.type && e.remoteSource && (i.jitter_buffer_delay = e.jitterBufferDelay, i.jitter_buffer_emitted_count = e.jitterBufferDelayEmittedCount)), "video" !== e.kind && "video" !== e.mediaType || (s.video_source_width = null == (t = o.get("video")) ? void 0 : t.width, s.video_source_height = null == (t = o.get("video")) ? void 0 : t.height, s.video_source_frames_per_second = null == (t = o.get("video")) ? void 0 : t.framesPerSecond, "outbound-rtp" === e.type && (s.codec = null == (t = a.get(e.codecId)) ? void 0 : t.mimeType, s.fir_count = e.firCount, s.pli_count = e.pliCount, s.nack_count = e.nackCount, s.qp_sum = e.qpSum, s.retransmitted_packets_sent = e.retransmittedBytesSent, s.quality_limitation_reason = e.qualityLimitationReason, s.quality_limitation_resolution_changes = e.qualityLimitationResolutionChanges), "remote-inbound-rtp" === e.type && (s.rtt = 1e3 * e.roundTripTime), "inbound-rtp" === e.type && (s.header_bytes_received = e.headerBytesReceived, s.key_frames_decoded = e.keyFramesDecoded, s.total_decode_time = e.totalDecodeTime, s.total_inter_frame_delay = e.totalInterFrameDelay, s.total_squared_inter_frame_delay = e.totalSquaredInterFrameDelay, t = e.packetsLost / (e.packetsLost + e.packetsReceived) * 100, s.total_packets_lost = e.packetsLost, s.total_packets_received = e.packetsReceived, s.total_packets_lost_rate = t), "track" === e.type && (e.remoteSource ? (s.jitter_buffer_delay = e.jitterBufferDelay, s.jitter_buffer_emitted_count = e.jitterBufferDelayEmittedCount, s.received_frame_width = e.frameWidth, s.received_frame_height = e.frameHeight, s.frames_received = e.framesReceived, s.frames_decoded = e.framesDecoded, s.frames_dropped = e.framesDropped, s.freeze_count = e.freezeCount, s.pause_count = e.pauseCount, s.total_freezes_duration = e.totalFreezesDuration, s.total_pauses_duration = e.totalPausesDuration, s.total_frames_duration = e.totalFramesDuration, s.sum_of_squared_frames_duration = e.sumOfSquaredFramesDuration) : (s.sent_frame_width = e.frameWidth, s.sent_frame_height = e.frameHeight)));
	            }), uf(r), uf(i), uf(s), n.transport_info = r, n.audio = i, n.video = s, e.abrupt("return", n);

	          case 15:
	          case "end":
	            return e.stop();
	        }
	      }, e);
	    }));
	    return function (e) {
	      return t.apply(this, arguments);
	    };
	  }(),
	      pf = function () {
	    var t = v(regeneratorRuntime.mark(function e(t) {
	      var n;
	      return regeneratorRuntime.wrap(function (e) {
	        for (;;) switch (e.prev = e.next) {
	          case 0:
	            if (t) {
	              e.next = 2;
	              break;
	            }

	            throw new Error("'getStats()' is called without rtcConnection");

	          case 2:
	            return e.next = 4, t.getStats();

	          case 4:
	            return n = e.sent, e.abrupt("return", ff(n));

	          case 6:
	          case "end":
	            return e.stop();
	        }
	      }, e);
	    }));
	    return function (e) {
	      return t.apply(this, arguments);
	    };
	  }(),
	      vf = function () {
	    function t(e) {
	      _(this, t), this._context = e;
	    }

	    return y(t, [{
	      key: "state",
	      get: function () {
	        return this._state;
	      }
	    }, {
	      key: "_changeState",
	      value: function (e) {
	        this._state && this._state.type === e.type || (this._state && this._state.destroy(), this._state = e, this._state.context = this._context, this._state.start());
	      }
	    }]), t;
	  }(),
	      _f = function () {
	    function t(e) {
	      _(this, t), this._stateMutator = e;
	    }

	    return y(t, [{
	      key: "context",
	      set: function (e) {
	        this._context = e;
	      }
	    }, {
	      key: "start",
	      value: function () {
	        this._onStart();
	      }
	    }, {
	      key: "destroy",
	      value: function () {
	        this._onDestroy();
	      }
	    }]), t;
	  }(),
	      yf = function () {
	    function n(e, t) {
	      _(this, n), this._context = e, this._stateMutator = t, this._context = e, this._stateMutator = t;
	    }

	    return y(n, [{
	      key: "state",
	      get: function () {
	        return this._stateMutator.state;
	      }
	    }]), n;
	  }(),
	      mf = function () {
	    g(n, _f);
	    var t = b(n);

	    function n(e) {
	      return _(this, n), t.call(this, e);
	    }

	    return y(n);
	  }(),
	      gf = ((Kt = cf = cf || {}).IDLE = "idle", Kt.OFFERING = "offering", Kt.ANSWERING = "answering", Kt.CONNECTED = "connected", Kt.RECONNECTING = "reconnecting", Kt.ICE_RESTART_OFFERING = "iceRestartOffering", Kt.ICE_RESTART_ANSWERING = "iceRestartAnswering", Kt.CLOSED = "closed", function () {
	    g(r, mf);
	    var t,
	        n = b(r);

	    function r(e, t) {
	      return _(this, r), m(E(e = n.call(this, e)), "type", cf.ANSWERING), e._offerCommand = t, e;
	    }

	    return y(r, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("answering"), this._context.createRTCConnection(), this._offerCommand && this.onOfferReceived(this._offerCommand);
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "onOfferReceived",
	      value: (t = v(regeneratorRuntime.mark(function e(t) {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, this._context.setRemoteDescription("offer", t.payload.sdp);

	            case 2:
	              this._context.prepareSessionDescription(), this._context.sendAnswer().catch(function (e) {});

	            case 4:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "onIceConnected",
	      value: function () {
	        this._stateMutator.toConnected(!1);
	      }
	    }, {
	      key: "onClose",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), r;
	  }()),
	      Ef = function () {
	    g(s, mf);
	    var i = b(s);

	    function s() {
	      var e;

	      _(this, s);

	      for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];

	      return m(E(e = i.call.apply(i, [this].concat(n))), "type", cf.CLOSED), e;
	    }

	    return y(s, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("closed");
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }]), s;
	  }(),
	      bf = function () {
	    g(r, mf);
	    var t,
	        n = b(r);

	    function r(e, t) {
	      return _(this, r), m(E(e = n.call(this, e)), "type", cf.CONNECTED), e._isReconnected = t, e;
	    }

	    return y(r, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("connected");
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "onOfferReceived",
	      value: (t = v(regeneratorRuntime.mark(function e(t) {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              this._stateMutator.toReconnecting(t);

	            case 1:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "onIceDisconnected",
	      value: function () {
	        this._stateMutator.toReconnecting();
	      }
	    }, {
	      key: "onIceFailed",
	      value: function () {
	        this._context.isDisposable && this.onClose(), this._context.isInitiator ? this._stateMutator.toIceRestartOffering() : this._stateMutator.toIceRestartAnswering();
	      }
	    }, {
	      key: "onClose",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), r;
	  }(),
	      If = function () {
	    g(r, mf);
	    var t,
	        n = b(r);

	    function r(e, t) {
	      return _(this, r), m(E(e = n.call(this, e)), "type", cf.ICE_RESTART_ANSWERING), e._offerCommand = t, e;
	    }

	    return y(r, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("iceRestartAnswering"), this._offerCommand && this.onOfferReceived(this._offerCommand);
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "onOfferReceived",
	      value: (t = v(regeneratorRuntime.mark(function e(t) {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, this._context.setRemoteDescription("offer", t.payload.sdp);

	            case 2:
	              this._context.sendAnswer().catch(function (e) {});

	            case 3:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "onIceConnected",
	      value: function () {
	        this._stateMutator.toConnected(!0);
	      }
	    }, {
	      key: "onClose",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), r;
	  }(),
	      wf = function () {
	    g(s, mf);
	    var i = b(s);

	    function s() {
	      var e;

	      _(this, s);

	      for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];

	      return m(E(e = i.call.apply(i, [this].concat(n))), "type", cf.ICE_RESTART_OFFERING), e;
	    }

	    return y(s, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("iceRestartOffering"), this._context.sendOffer(!0);
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "onAnswerReceived",
	      value: function (e) {
	        this._context.setRemoteDescription("answer", e.payload.sdp);
	      }
	    }, {
	      key: "onIceConnected",
	      value: function () {
	        this._stateMutator.toConnected(!0);
	      }
	    }, {
	      key: "onClose",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), s;
	  }(),
	      Tf = function () {
	    g(s, mf);
	    var t,
	        i = b(s);

	    function s() {
	      var e;

	      _(this, s);

	      for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];

	      return m(E(e = i.call.apply(i, [this].concat(n))), "type", cf.IDLE), e;
	    }

	    return y(s, [{
	      key: "_onStart",
	      value: function () {}
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "createOffer",
	      value: function () {
	        this._stateMutator.toOffering();
	      }
	    }, {
	      key: "onOfferReceived",
	      value: (t = v(regeneratorRuntime.mark(function e(t) {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              this._stateMutator.toAnswering(t);

	            case 1:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "onClose",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), s;
	  }(),
	      Sf = function () {
	    g(s, mf);
	    var i = b(s);

	    function s() {
	      var e;

	      _(this, s);

	      for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];

	      return m(E(e = i.call.apply(i, [this].concat(n))), "type", cf.OFFERING), e;
	    }

	    return y(s, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("offering"), this._context.createRTCConnection(), this._context.prepareSessionDescription();
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "onAnswerReceived",
	      value: function (e) {
	        this._context.setRemoteDescription("answer", e.payload.sdp);
	      }
	    }, {
	      key: "onIceConnected",
	      value: function () {
	        this._stateMutator.toConnected(!1);
	      }
	    }, {
	      key: "onClose",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), s;
	  }(),
	      Cf = function () {
	    g(r, mf);
	    var n = b(r);

	    function r(e, t) {
	      return _(this, r), m(E(e = n.call(this, e)), "type", cf.RECONNECTING), e._offerCommand = t, e;
	    }

	    return y(r, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("reconnecting"), this._offerCommand && this.onOfferReceived(this._offerCommand);
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "onOfferReceived",
	      value: function (e) {
	        this._stateMutator.toIceRestartAnswering(e);
	      }
	    }, {
	      key: "onIceConnected",
	      value: function () {
	        this._stateMutator.toConnected(!0);
	      }
	    }, {
	      key: "onIceFailed",
	      value: function () {
	        this._context.isDisposable && this.onClose(), this._context.isInitiator ? this._stateMutator.toIceRestartOffering() : this._stateMutator.toIceRestartAnswering();
	      }
	    }, {
	      key: "onClose",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), r;
	  }(),
	      kf = function () {
	    g(t, vf);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "state",
	      get: function () {
	        return this._state;
	      }
	    }, {
	      key: "name",
	      get: function () {
	        return "PeerConnection";
	      }
	    }, {
	      key: "toIdle",
	      value: function () {
	        this._changeState(new Tf(this));
	      }
	    }, {
	      key: "toOffering",
	      value: function () {
	        this._changeState(new Sf(this));
	      }
	    }, {
	      key: "toAnswering",
	      value: function (e) {
	        this._changeState(new gf(this, e));
	      }
	    }, {
	      key: "toConnected",
	      value: function (e) {
	        this._changeState(new bf(this, e));
	      }
	    }, {
	      key: "toReconnecting",
	      value: function (e) {
	        this._changeState(new Cf(this, e));
	      }
	    }, {
	      key: "toIceRestartOffering",
	      value: function () {
	        this._changeState(new wf(this));
	      }
	    }, {
	      key: "toIceRestartAnswering",
	      value: function (e) {
	        this._changeState(new If(this, e));
	      }
	    }, {
	      key: "toClosed",
	      value: function () {
	        this._changeState(new Ef(this));
	      }
	    }]), t;
	  }(),
	      Nf = function () {
	    g(n, yf);
	    var t = b(n);

	    function n(e) {
	      return _(this, n), (e = t.call(this, e, new kf(e)))._stateMutator.toIdle(), e;
	    }

	    return y(n, [{
	      key: "state",
	      get: function () {
	        return this._stateMutator.state;
	      }
	    }, {
	      key: "onOfferReceived",
	      value: function (e) {
	        I.verbose("[".concat(this.state.type, "] onOfferReceived"));
	        var t = this.state;

	        switch (t.type) {
	          case cf.IDLE:
	          case cf.ANSWERING:
	          case cf.CONNECTED:
	          case cf.RECONNECTING:
	          case cf.ICE_RESTART_ANSWERING:
	            t.onOfferReceived(e);
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onOfferReceived"));
	        }
	      }
	    }, {
	      key: "onAnswerReceived",
	      value: function (e) {
	        I.verbose("[".concat(this.state.type, "] onAnswerReceived"));
	        var t = this.state;

	        switch (t.type) {
	          case cf.OFFERING:
	          case cf.ICE_RESTART_OFFERING:
	            t.onAnswerReceived(e);
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onAnswerReceived"));
	        }
	      }
	    }, {
	      key: "onClose",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onClose"));
	        var e = this.state;

	        switch (e.type) {
	          case cf.IDLE:
	          case cf.OFFERING:
	          case cf.ANSWERING:
	          case cf.CONNECTED:
	          case cf.RECONNECTING:
	          case cf.ICE_RESTART_OFFERING:
	          case cf.ICE_RESTART_ANSWERING:
	            e.onClose();
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onClose"));
	        }
	      }
	    }, {
	      key: "createOffer",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] createOffer"));
	        var e = this.state;
	        e.type === cf.IDLE ? e.createOffer() : I.error("[".concat(this.state.type, "] createOffer"));
	      }
	    }, {
	      key: "onIceConnected",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onIceConnected"));
	        var e = this.state;

	        switch (e.type) {
	          case cf.OFFERING:
	          case cf.ANSWERING:
	          case cf.RECONNECTING:
	          case cf.ICE_RESTART_OFFERING:
	          case cf.ICE_RESTART_ANSWERING:
	            e.onIceConnected();
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onIceConnected"));
	        }
	      }
	    }, {
	      key: "onIceDisconnected",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onIceDisconnected"));
	        var e = this.state;
	        e.type === cf.CONNECTED ? e.onIceDisconnected() : I.error("[".concat(this.state.type, "] onIceDisconnected"));
	      }
	    }, {
	      key: "onIceFailed",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onIceFailed"));
	        var e = this.state;

	        switch (e.type) {
	          case cf.CONNECTED:
	          case cf.RECONNECTING:
	            e.onIceFailed();
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onIceFailed"));
	        }
	      }
	    }]), n;
	  }(),
	      Af = ((s = lf = lf || {}).RELAY = "relay", s.ALL = "all", function () {
	    g(l, Eh);
	    var e,
	        t,
	        n,
	        r,
	        c = b(l);

	    function l(e, t, n, r, i, s, a, o) {
	      var u;
	      return _(this, l), (u = c.call(this))._ctx = e, u.id = t, u._signalingClient = n, u._localStream = r, u._isInitiator = i, u._turnCredential = s, u._mediaDirections = a, u._isDisposable = o, u._stateMachine = new Nf({
	        dispatchEvent: u._dispatchEvent.bind(E(u)),
	        isInitiator: u._isInitiator,
	        setRemoteDescription: u._setRemoteDescription.bind(E(u)),
	        sendAnswer: u._sendAnswer.bind(E(u)),
	        sendOffer: u._sendOffer.bind(E(u)),
	        createRTCConnection: u._createRTCConnection.bind(E(u)),
	        prepareSessionDescription: u._prepareSessionDescription.bind(E(u)),
	        isDisposable: u._isDisposable
	      }), r && r.on("streamChanged", function (e) {
	        return u.onLocalStream(e);
	      }), u;
	    }

	    return y(l, [{
	      key: "_state",
	      get: function () {
	        return this._stateMachine.state;
	      }
	    }, {
	      key: "rtcConnection",
	      get: function () {
	        return this._rtcConnection;
	      }
	    }, {
	      key: "remoteStream",
	      get: function () {
	        return this._remoteStream;
	      }
	    }, {
	      key: "signalingClient",
	      get: function () {
	        return this._signalingClient;
	      }
	    }, {
	      key: "onEvent",
	      value: function (e) {
	        switch (e.type) {
	          case hf.CANDIDATE:
	            return void this._receiveCandidate(e);

	          case hf.OFFER:
	            this._stateMachine.onOfferReceived(e);

	            break;

	          case hf.ANSWER:
	            this._stateMachine.onAnswerReceived(e);

	            break;

	          default:
	            I.error(new Error("unhandled call event ".concat(e)));
	        }
	      }
	    }, {
	      key: "createOffer",
	      value: function () {
	        this._stateMachine.createOffer();
	      }
	    }, {
	      key: "close",
	      value: function () {
	        this._closeRTCConnection(), this._stateMachine.onClose();
	      }
	    }, {
	      key: "onLocalStream",
	      value: function (e) {
	        if (this._rtcConnection) {
	          var t,
	              n = G(e.getTracks());

	          try {
	            for (n.s(); !(t = n.n()).done;) {
	              var r = t.value;

	              this._replaceTrack(r);
	            }
	          } catch (e) {
	            n.e(e);
	          } finally {
	            n.f();
	          }
	        }
	      }
	    }, {
	      key: "getCandidateInfo",
	      value: (r = v(regeneratorRuntime.mark(function e() {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.abrupt("return", df(this.rtcConnection));

	            case 1:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return r.apply(this, arguments);
	      })
	    }, {
	      key: "getStatsLog",
	      value: (n = v(regeneratorRuntime.mark(function e() {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.abrupt("return", pf(this.rtcConnection));

	            case 1:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return n.apply(this, arguments);
	      })
	    }, {
	      key: "_replaceTrack",
	      value: function (e) {
	        var t,
	            n = G(this._rtcConnection.getSenders());

	        try {
	          for (n.s(); !(t = n.n()).done;) {
	            var r = t.value;
	            r.track && r.track.kind === e.kind && r.replaceTrack(e);
	          }
	        } catch (e) {
	          n.e(e);
	        } finally {
	          n.f();
	        }
	      }
	    }, {
	      key: "_createRTCConnection",
	      value: function () {
	        var e,
	            r = this,
	            t = (this._turnCredential && (e = {
	          iceServers: [{
	            username: this._turnCredential.username,
	            credential: this._turnCredential.password,
	            urls: this._turnCredential.turnUrls
	          }],
	          iceTransportPolicy: this._turnCredential.transportPolicy || lf.ALL
	        }), new RTCPeerConnection(e));
	        t.onnegotiationneeded = function () {
	          r._sendOffer(!1);
	        }, t.onicecandidate = function (e) {
	          var t, n;
	          e.candidate && null != (t = (n = r._signalingClient).sendCandidate) && t.call(n, e.candidate);
	        }, t.onconnectionstatechange = function () {
	          return r._handleConnectionStateChange(t);
	        }, t.oniceconnectionstatechange = function () {
	          return r._handleIceConnectionStateChange(t);
	        }, t.ontrack = function (e) {
	          return r._onRemoteTrack(e);
	        }, this._rtcConnection = t;
	      }
	    }, {
	      key: "_closeRTCConnection",
	      value: function () {
	        this._rtcConnection && (this._rtcConnection.onnegotiationneeded = null, this._rtcConnection.onicecandidate = null, this._rtcConnection.oniceconnectionstatechange = null, this._rtcConnection.onconnectionstatechange = null, this._rtcConnection.close(), this._rtcConnection = null, delete this._remoteStream);
	      }
	    }, {
	      key: "_prepareSessionDescription",
	      value: function () {
	        var e = this._mediaDirections,
	            t = e.audio,
	            e = e.video,
	            n = {
	          sendrecv: [],
	          sendonly: [],
	          recvonly: [],
	          none: []
	        };
	        n[t].push("audio"), n[e].push("video"), n.sendrecv.length && this._addTracks(n.sendrecv), n.sendonly.length && this._addSendOnlyTransceivers(n.sendonly), n.recvonly.length && this._addReceiveOnlyTransceivers(n.recvonly);
	      }
	    }, {
	      key: "_addTracks",
	      value: function (t) {
	        var n = this,
	            r = (I.debug("_addTracks()"), this._localStream.localStream);
	        r.getTracks().forEach(function (e) {
	          t.includes(e.kind) && n._rtcConnection.addTrack(e, r);
	        });
	      }
	    }, {
	      key: "_addReceiveOnlyTransceivers",
	      value: function (e) {
	        var t = this;
	        e.forEach(function (e) {
	          t._rtcConnection.addTransceiver(e, {
	            direction: "recvonly"
	          });
	        });
	      }
	    }, {
	      key: "_addSendOnlyTransceivers",
	      value: function (e) {
	        var n = this,
	            r = this._localStream.localStream;
	        e.forEach(function (t) {
	          r.getTracks().forEach(function (e) {
	            e.kind === t && n._rtcConnection.addTransceiver(e, {
	              direction: "sendonly",
	              streams: [r]
	            });
	          });
	        });
	      }
	    }, {
	      key: "_setRemoteDescription",
	      value: function (e, t) {
	        t = t.replace(/a=extmap:0 ulpfec\r\n/, ""), e = new RTCSessionDescription({
	          type: e,
	          sdp: t
	        });
	        return this._rtcConnection.setRemoteDescription(e);
	      }
	    }, {
	      key: "_sendOffer",
	      value: (t = v(regeneratorRuntime.mark(function e(t) {
	        var n;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return n = {
	                iceRestart: t || !1
	              }, e.next = 3, this._rtcConnection.createOffer(n);

	            case 3:
	              return n = e.sent, e.next = 6, this._rtcConnection.setLocalDescription(n);

	            case 6:
	              return e.abrupt("return", this._signalingClient.sendOfferSdp(this._rtcConnection.localDescription));

	            case 7:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "_sendAnswer",
	      value: (e = v(regeneratorRuntime.mark(function e() {
	        var t;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, this._rtcConnection.createAnswer();

	            case 2:
	              return (t = e.sent).sdp = t.sdp.replace("actpass", "active"), e.next = 6, this._rtcConnection.setLocalDescription(t);

	            case 6:
	              return e.abrupt("return", this._signalingClient.sendAnswerSdp(this._rtcConnection.localDescription));

	            case 7:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return e.apply(this, arguments);
	      })
	    }, {
	      key: "_handleIceConnectionStateChange",
	      value: function (e) {
	        switch (I.verbose("[".concat(this._state.type, "] iceConnectionState ").concat(e.iceConnectionState)), e.iceConnectionState) {
	          case "connected":
	            this._stateMachine.onIceConnected();

	            break;

	          case "disconnected":
	            this._stateMachine.onIceDisconnected();

	            break;

	          case "failed":
	            this._dispatchEvent("iceFailed");

	        }
	      }
	    }, {
	      key: "_handleConnectionStateChange",
	      value: function (e) {
	        I.verbose("[".concat(this._state.type, "] connectionState ").concat(e.connectionState));
	      }
	    }, {
	      key: "_receiveCandidate",
	      value: function (e) {
	        e = e.payload.candidate;

	        this._rtcConnection.addIceCandidate({
	          sdpMLineIndex: e.sdpMLineIndex,
	          sdpMid: e.sdpMid,
	          candidate: e.sdp
	        }).catch(function (e) {
	          I.error(e);
	        });
	      }
	    }, {
	      key: "_onRemoteTrack",
	      value: function (e) {
	        this._remoteStream = e.streams[0], this._dispatchEvent("remoteStream", this._remoteStream);
	      }
	    }]), l;
	  }());

	  ($e = hf = hf || {}).OFFER = "offer", $e.ANSWER = "answer", $e.CANDIDATE = "candidate";

	  var Of,
	      Rf,
	      ds = "process" == oe(K.process),
	      Df = ci,
	      Mf = fe,
	      xf = TypeError,
	      Lf = we,
	      Pf = function (e) {
	    if (Df(e)) return e;
	    throw xf(Mf(e) + " is not a constructor");
	  },
	      Uf = ge("species"),
	      qf = TypeError,
	      ua = /(?:ipad|iphone|ipod).*applewebkit/i.test(yt),
	      Ff = K,
	      jf = Et,
	      Jn = xe,
	      Hf = le,
	      Gf = Ft,
	      e = te,
	      Vf = hs,
	      Bf = ri,
	      Kf = Ie,
	      Qf = function (e, t) {
	    if (e < t) throw qf("Not enough arguments");
	    return e;
	  },
	      nt = ua,
	      kt = ds,
	      jn = Ff.setImmediate,
	      Yt = Ff.clearImmediate,
	      zf = Ff.process,
	      Wf = Ff.Dispatch,
	      Yf = Ff.Function,
	      i = Ff.MessageChannel,
	      Xf = Ff.String,
	      Jf = 0,
	      Zf = {},
	      $f = "onreadystatechange";

	  try {
	    Of = Ff.location;
	  } catch (e) {}

	  function ep(e) {
	    return function () {
	      yp(e);
	    };
	  }

	  function tp(e) {
	    yp(e.data);
	  }

	  function np(e) {
	    Ff.postMessage(Xf(e), Of.protocol + "//" + Of.host);
	  }

	  function rp(e) {
	    try {
	      return {
	        error: !1,
	        value: e()
	      };
	    } catch (e) {
	      return {
	        error: !0,
	        value: e
	      };
	    }
	  }

	  function ip() {
	    this.head = null, this.tail = null;
	  }

	  function sp(e) {
	    var n, r;
	    this.promise = new e(function (e, t) {
	      if (void 0 !== n || void 0 !== r) throw TypeError("Bad Promise constructor");
	      n = e, r = t;
	    }), this.resolve = Ap(n), this.reject = Ap(r);
	  }

	  function ap(e, t) {
	    var n,
	        r,
	        i,
	        s,
	        a = t.value,
	        o = t.state == rv,
	        u = o ? e.ok : e.fail,
	        c = e.resolve,
	        l = e.reject,
	        h = e.domain;

	    try {
	      u ? (o || (t.rejection === av && (s = t, Dp(qp, Rp, function () {
	        var e = s.facade;
	        Op ? Jp.emit("rejectionHandled", e) : cv(nv, e, s.value);
	      })), t.rejection = sv), !0 === u ? n = a : (h && h.enter(), n = u(a), h && (h.exit(), i = !0)), n === e.promise ? l(Yp("Promise-chain cycle")) : (r = ov(n)) ? Dp(r, n, c, l) : c(n)) : l(a);
	    } catch (e) {
	      h && !i && h.exit(), l(e);
	    }
	  }

	  var op,
	      up,
	      cp,
	      lp,
	      hp,
	      dp,
	      fp,
	      pp,
	      vp,
	      _p,
	      yp = function (e) {
	    var t;
	    Gf(Zf, e) && (t = Zf[e], delete Zf[e], t());
	  },
	      t = (jn && Yt || (jn = function (e) {
	    Qf(arguments.length, 1);
	    var t = Hf(e) ? e : Yf(e),
	        n = Bf(arguments, 1);
	    return Zf[++Jf] = function () {
	      jf(t, void 0, n);
	    }, Rf(Jf), Jf;
	  }, Yt = function (e) {
	    delete Zf[e];
	  }, kt ? Rf = function (e) {
	    zf.nextTick(ep(e));
	  } : Wf && Wf.now ? Rf = function (e) {
	    Wf.now(ep(e));
	  } : i && !nt ? (r = (n = new i()).port2, n.port1.onmessage = tp, Rf = Jn(r.postMessage, r)) : Ff.addEventListener && Hf(Ff.postMessage) && !Ff.importScripts && Of && "file:" !== Of.protocol && !e(np) ? (Rf = np, Ff.addEventListener("message", tp, !1)) : Rf = $f in Kf("script") ? function (e) {
	    Vf.appendChild(Kf("script"))[$f] = function () {
	      Vf.removeChild(this), yp(e);
	    };
	  } : function (e) {
	    setTimeout(ep(e), 0);
	  }), {
	    set: jn,
	    clear: Yt
	  }),
	      Gn = K,
	      mt = /ipad|iphone|ipod/i.test(yt) && void 0 !== Gn.Pebble,
	      Xe = /web0s(?!.*chrome)/i.test(yt),
	      a = K,
	      Kt = xe,
	      s = B.f,
	      mp = t.set,
	      $e = ua,
	      ci = mt,
	      Et = Xe,
	      gp = ds,
	      Ft = a.MutationObserver || a.WebKitMutationObserver,
	      hs = a.document,
	      Ep = a.process,
	      ri = a.Promise,
	      kt = s(a, "queueMicrotask"),
	      nt = kt && kt.value,
	      n = (nt || (op = function () {
	    var e, t;

	    for (gp && (e = Ep.domain) && e.exit(); up;) {
	      t = up.fn, up = up.next;

	      try {
	        t();
	      } catch (e) {
	        throw up ? lp() : cp = void 0, e;
	      }
	    }

	    cp = void 0, e && e.enter();
	  }, lp = $e || gp || Et || !Ft || !hs ? !ci && ri && ri.resolve ? ((i = ri.resolve(void 0)).constructor = ri, fp = Kt(i.then, i), function () {
	    fp(op);
	  }) : gp ? function () {
	    Ep.nextTick(op);
	  } : (mp = Kt(mp, a), function () {
	    mp(op);
	  }) : (hp = !0, dp = hs.createTextNode(""), new Ft(op).observe(dp, {
	    characterData: !0
	  }), function () {
	    dp.data = hp = !hp;
	  })), nt || function (e) {
	    e = {
	      fn: e,
	      next: void 0
	    };
	    cp && (cp.next = e), up || (up = e, lp()), cp = e;
	  }),
	      bp = K,
	      Jn = (ip.prototype = {
	    add: function (e) {
	      e = {
	        item: e,
	        next: null
	      };
	      this.head ? this.tail.next = e : this.head = e, this.tail = e;
	    },
	    get: function () {
	      var e = this.head;
	      if (e) return this.head = e.next, this.tail === e && (this.tail = null), e.item;
	    }
	  }, ip),
	      r = K.Promise,
	      e = "object" == typeof window && "object" != typeof Deno,
	      jn = K,
	      Ip = r,
	      Yt = le,
	      Gn = It,
	      wp = Fn,
	      B = ge,
	      Tp = e,
	      Sp = gt,
	      Cp = (Ip && Ip.prototype, B("species")),
	      kp = !1,
	      Np = Yt(jn.PromiseRejectionEvent),
	      ua = {
	    CONSTRUCTOR: Gn("Promise", function () {
	      var e = wp(Ip),
	          t = e !== String(Ip);
	      if (!t && 66 === Sp) return !0;
	      if (51 <= Sp && /native code/.test(e)) return !1;

	      function n(e) {
	        e(function () {}, function () {});
	      }

	      e = new Ip(function (e) {
	        e(1);
	      });
	      return (e.constructor = {})[Cp] = n, !(kp = e.then(function () {}) instanceof n) || !t && Tp && !Np;
	    }),
	    REJECTION_EVENT: Np,
	    SUBCLASSING: kp
	  },
	      mt = {},
	      Ap = pe,
	      Xe = (mt.f = function (e) {
	    return new sp(e);
	  }, Me),
	      Op = ds,
	      Rp = K,
	      Dp = Ze,
	      s = Se,
	      kt = sa,
	      $e = ca,
	      Et = lu,
	      Mp = pe,
	      xp = le,
	      Lp = he,
	      Pp = ko,
	      Up = function (e, t) {
	    var e = Lf(e).constructor;
	    return void 0 === e || null == (e = Lf(e)[Uf]) ? t : Pf(e);
	  },
	      qp = t.set,
	      Fp = n,
	      jp = function (e, t) {
	    var n = bp.console;
	    n && n.error && (1 == arguments.length ? n.error(e) : n.error(e, t));
	  },
	      Hp = rp,
	      Gp = Jn,
	      ci = Jt,
	      ri = r,
	      i = mt,
	      Vp = "Promise",
	      Kt = ua.CONSTRUCTOR,
	      Bp = ua.REJECTION_EVENT,
	      a = ua.SUBCLASSING,
	      Kp = ci.getterFor(Vp),
	      Qp = ci.set,
	      hs = ri && ri.prototype,
	      zp = ri,
	      Wp = hs,
	      Yp = Rp.TypeError,
	      Xp = Rp.document,
	      Jp = Rp.process,
	      Zp = i.f,
	      $p = Zp,
	      ev = !!(Xp && Xp.createEvent && Rp.dispatchEvent),
	      tv = "unhandledrejection",
	      nv = "rejectionhandled",
	      rv = 1,
	      iv = 2,
	      sv = 1,
	      av = 2,
	      ov = function (e) {
	    var t;
	    return !(!Lp(e) || !xp(t = e.then)) && t;
	  },
	      uv = function (n, i) {
	    n.notified || (n.notified = !0, Fp(function () {
	      for (var e, r, t = n.reactions; e = t.get();) ap(e, n);

	      n.notified = !1, i && !n.rejection && (r = n, Dp(qp, Rp, function () {
	        var e = r.facade,
	            t = r.value,
	            n = lv(r);
	        if (n && (n = Hp(function () {
	          Op ? Jp.emit("unhandledRejection", t, e) : cv(tv, e, t);
	        }), r.rejection = Op || lv(r) ? av : sv, n.error)) throw n.value;
	      }));
	    }));
	  },
	      cv = function (e, t, n) {
	    var r;
	    ev ? ((r = Xp.createEvent("Event")).promise = t, r.reason = n, r.initEvent(e, !1, !0), Rp.dispatchEvent(r)) : r = {
	      promise: t,
	      reason: n
	    }, !Bp && (t = Rp["on" + e]) ? t(r) : e === tv && jp("Unhandled promise rejection", n);
	  },
	      lv = function (e) {
	    return e.rejection !== sv && !e.parent;
	  },
	      hv = function (t, n, r) {
	    return function (e) {
	      t(n, e, r);
	    };
	  },
	      dv = function (e, t, n) {
	    e.done || (e.done = !0, (e = n ? n : e).value = t, e.state = iv, uv(e, !0));
	  },
	      fv = function (n, e, t) {
	    if (!n.done) {
	      n.done = !0, t && (n = t);

	      try {
	        if (n.facade === e) throw Yp("Promise can't be resolved itself");
	        var r = ov(e);
	        r ? Fp(function () {
	          var t = {
	            done: !1
	          };

	          try {
	            Dp(r, e, hv(fv, t, n), hv(dv, t, n));
	          } catch (e) {
	            dv(t, e, n);
	          }
	        }) : (n.value = e, n.state = rv, uv(n, !1));
	      } catch (e) {
	        dv({
	          done: !1
	        }, e, n);
	      }
	    }
	  };

	  if (Kt && (Wp = (zp = function (e) {
	    Pp(this, Wp), Mp(e), Dp(pp, this);
	    var t = Kp(this);

	    try {
	      e(hv(fv, t), hv(dv, t));
	    } catch (e) {
	      dv(t, e);
	    }
	  }).prototype, (pp = function (e) {
	    Qp(this, {
	      type: Vp,
	      done: !1,
	      notified: !1,
	      parent: !1,
	      reactions: new Gp(),
	      rejection: !1,
	      state: 0,
	      value: void 0
	    });
	  }).prototype = s(Wp, "then", function (e, t) {
	    var n = Kp(this),
	        r = Zp(Up(this, zp));
	    return n.parent = !0, r.ok = !xp(e) || e, r.fail = xp(t) && t, r.domain = Op ? Jp.domain : void 0, 0 == n.state ? n.reactions.add(r) : Fp(function () {
	      ap(r, n);
	    }), r.promise;
	  }), vp = function () {
	    var e = new pp(),
	        t = Kp(e);
	    this.promise = e, this.resolve = hv(fv, t), this.reject = hv(dv, t);
	  }, i.f = Zp = function (e) {
	    return e === zp || void 0 === e ? new vp() : $p(e);
	  }, xp(ri) && hs !== Object.prototype)) {
	    _p = hs.then, a || s(hs, "then", function (e, t) {
	      var n = this;
	      return new zp(function (e, t) {
	        Dp(_p, n, e, t);
	      }).then(e, t);
	    }, {
	      unsafe: !0
	    });

	    try {
	      delete hs.constructor;
	    } catch (e) {}

	    kt && kt(hs, Wp);
	  }

	  Xe({
	    global: !0,
	    constructor: !0,
	    wrap: !0,
	    forced: Kt
	  }, {
	    Promise: zp
	  }), $e(zp, Vp, !1), Et(Vp);
	  var pv = r,
	      Ft = uu,
	      nt = ua.CONSTRUCTOR || !Ft(function (e) {
	    pv.all(e).then(void 0, function () {});
	  }),
	      vv = Ze,
	      _v = pe,
	      yv = mt,
	      mv = rp,
	      gv = Co,
	      It = (Me({
	    target: "Promise",
	    stat: !0,
	    forced: nt
	  }, {
	    all: function (e) {
	      var o = this,
	          t = yv.f(o),
	          u = t.resolve,
	          c = t.reject,
	          n = mv(function () {
	        var r = _v(o.resolve),
	            i = [],
	            s = 0,
	            a = 1;

	        gv(e, function (e) {
	          var t = s++,
	              n = !1;
	          a++, vv(r, o, e).then(function (e) {
	            n || (n = !0, i[t] = e, --a || u(i));
	          }, c);
	        }), --a || u(i);
	      });
	      return n.error && c(n.value), t.promise;
	    }
	  }), Me),
	      Fn = r,
	      e = de,
	      B = le,
	      Yt = Se,
	      jn = Fn && Fn.prototype;
	  It({
	    target: "Promise",
	    proto: !0,
	    forced: ua.CONSTRUCTOR,
	    real: !0
	  }, {
	    catch: function (e) {
	      return this.then(void 0, e);
	    }
	  }), B(Fn) && (Gn = e("Promise").prototype.catch, jn.catch !== Gn && Yt(jn, "catch", Gn, {
	    unsafe: !0
	  }));
	  var Ev = Ze,
	      bv = pe,
	      Iv = mt,
	      wv = rp,
	      Tv = Co;
	  Me({
	    target: "Promise",
	    stat: !0,
	    forced: nt
	  }, {
	    race: function (e) {
	      var n = this,
	          r = Iv.f(n),
	          i = r.reject,
	          t = wv(function () {
	        var t = bv(n.resolve);
	        Tv(e, function (e) {
	          Ev(t, n, e).then(r.resolve, i);
	        });
	      });
	      return t.error && i(t.value), r.promise;
	    }
	  });

	  function Sv(c) {
	    return function (e, t, n, r) {
	      o_(t);
	      var i = u_(e),
	          s = c_(i),
	          a = l_(i),
	          o = c ? a - 1 : 0,
	          u = c ? -1 : 1;
	      if (n < 2) for (;;) {
	        if (o in s) {
	          r = s[o], o += u;
	          break;
	        }

	        if (o += u, c ? o < 0 : a <= o) throw h_("Reduce of empty array with no initial value");
	      }

	      for (; c ? 0 <= o : o < a; o += u) o in s && (r = t(r, s[o], o, i));

	      return r;
	    };
	  }

	  var Cv,
	      kv,
	      Nv = Ze,
	      Av = mt,
	      Ov = (Me({
	    target: "Promise",
	    stat: !0,
	    forced: ua.CONSTRUCTOR
	  }, {
	    reject: function (e) {
	      var t = Av.f(this);
	      return Nv(t.reject, void 0, e), t.promise;
	    }
	  }), we),
	      Rv = he,
	      Dv = mt,
	      sa = Me,
	      t = de,
	      n = ua.CONSTRUCTOR,
	      Mv = function (e, t) {
	    if (Ov(e), Rv(t) && t.constructor === e) return t;
	    e = Dv.f(e);
	    return (0, e.resolve)(t), e.promise;
	  },
	      xv = (t("Promise"), sa({
	    target: "Promise",
	    stat: !0,
	    forced: n
	  }, {
	    resolve: function (e) {
	      return Mv(this, e);
	    }
	  }), y(function e() {
	    var n = this;
	    _(this, e), this.promise = new Promise(function (e, t) {
	      n.resolve = e, n.reject = t;
	    });
	  })),
	      Lv = function () {
	    var r = v(regeneratorRuntime.mark(function e(t, n, r) {
	      var i,
	          s,
	          a,
	          o,
	          u,
	          c,
	          l = arguments;
	      return regeneratorRuntime.wrap(function (e) {
	        for (;;) switch (e.prev = e.next) {
	          case 0:
	            return a = 3 < l.length && void 0 !== l[3] ? l[3] : {
	              count: 0,
	              deferred: new xv()
	            }, i = a.deferred, s = a.count, e.prev = 2, e.next = 5, n();

	          case 5:
	            a = e.sent, 0 < s && null != (o = r.onRecover) && o.call(r), i.resolve(a), e.next = 19;
	            break;

	          case 10:
	            if (e.prev = 10, e.t0 = e.catch(2), null != (o = r.onError) && o.call(r, e.t0), 0 <= (u = t.calcTimeout(s + 1))) return null != (c = r.onRetrial) && c.call(r, s + 1, e.t0), setTimeout(function () {
	              Lv(t, n, r, {
	                count: s + 1,
	                deferred: i
	              });
	            }, u), e.abrupt("return", i.promise);
	            e.next = 18;
	            break;

	          case 18:
	            i.reject(e.t0);

	          case 19:
	            return e.abrupt("return", i.promise);

	          case 20:
	          case "end":
	            return e.stop();
	        }
	      }, e, null, [[2, 10]]);
	    }));
	    return function (e, t, n) {
	      return r.apply(this, arguments);
	    };
	  }(),
	      Pv = function () {
	    function e() {
	      _(this, e);
	    }

	    return y(e, [{
	      key: "calcTimeout",
	      value: function (e) {
	        switch (e) {
	          case 1:
	            return 1e3;

	          case 2:
	            return 2e3;

	          case 3:
	            return 3e3;

	          default:
	            return -1;
	        }
	      }
	    }]), e;
	  }(),
	      Uv = function () {
	    function r(e, t, n) {
	      _(this, r), this.interval = e, this.noise = t, this.maxRetrial = n;
	    }

	    return y(r, [{
	      key: "calcTimeout",
	      value: function (e) {
	        return e > this.maxRetrial ? -1 : e * this.interval + (Math.random() - .5) * this.noise * 2;
	      }
	    }]), r;
	  }(),
	      qv = function () {
	    function t(e) {
	      _(this, t), this._requests = new Map(), this.timeoutTime = e;
	    }

	    return y(t, [{
	      key: "has",
	      value: function (e) {
	        return this._requests.has(e);
	      }
	    }, {
	      key: "get",
	      value: function (e) {
	        return this._requests.get(e);
	      }
	    }, {
	      key: "register",
	      value: function (e) {
	        if (!e) throw new Error("invalid request id");
	        if (this._requests.has(e)) throw new Error("duplicate requests");
	        var t = new xv();
	        return this._requests.set(e, {
	          deferred: t,
	          timer: this._createTimeoutTimer(e)
	        }), t;
	      }
	    }, {
	      key: "unregister",
	      value: function (e) {
	        if (!this._requests.has(e)) return null;

	        var t = this._requests.get(e),
	            n = t.timer,
	            t = t.deferred;

	        return clearTimeout(n), this._requests.delete(e), t;
	      }
	    }, {
	      key: "_createTimeoutTimer",
	      value: function (e) {
	        var t = this;
	        return setTimeout(function () {
	          t.unregister(e).reject(new Error("no response due to timeout"));
	        }, this._getTimeoutTime());
	      }
	    }, {
	      key: "rejectAll",
	      value: function (e) {
	        var t,
	            n = G(this._requests.keys());

	        try {
	          for (n.s(); !(t = n.n()).done;) {
	            var r = t.value,
	                i = this._requests.get(r);

	            clearTimeout(i.timer), i.deferred.reject(e);
	          }
	        } catch (e) {
	          n.e(e);
	        } finally {
	          n.f();
	        }

	        this._requests.clear();
	      }
	    }, {
	      key: "_getTimeoutTime",
	      value: function () {
	        return this.timeoutTime;
	      }
	    }]), t;
	  }(),
	      Fv = function () {
	    function i(e, t, n, r) {
	      _(this, i), m(this, "_timeoutTime", 6e4), this._ctx = e, this._participantId = t, this._mediaDirections = n, this._endpointId = r, this._requestMap = new qv(this._timeoutTime);
	    }

	    var t, n, r;
	    return y(i, [{
	      key: "sendOfferSdp",
	      value: (r = v(regeneratorRuntime.mark(function e(t) {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (this._endpointId) {
	                e.next = 5;
	                break;
	              }

	              return e.next = 3, this._sendOfferAndUnregisterCreateEndpointRequest(t);

	            case 3:
	              e.next = 7;
	              break;

	            case 5:
	              return e.next = 7, this._sendOfferAndUnregisterPutEndpointRequest(t);

	            case 7:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return r.apply(this, arguments);
	      })
	    }, {
	      key: "_sendOfferAndUnregisterCreateEndpointRequest",
	      value: (n = v(regeneratorRuntime.mark(function e(t) {
	        var n, r;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return n = this._requestMap.unregister("".concat(this._participantId, ":create-endpoint-request")), e.prev = 1, e.next = 4, this._sendCreateEndpoint(t);

	            case 4:
	              return r = e.sent, n && n.resolve(r), e.abrupt("return", r);

	            case 9:
	              throw e.prev = 9, e.t0 = e.catch(1), n && n.reject(e.t0), e.t0;

	            case 13:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[1, 9]]);
	      })), function (e) {
	        return n.apply(this, arguments);
	      })
	    }, {
	      key: "_sendOfferAndUnregisterPutEndpointRequest",
	      value: (t = v(regeneratorRuntime.mark(function e(t) {
	        var n, r;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return n = this._requestMap.unregister("".concat(this._participantId, ":put-endpoint-request")), e.prev = 1, e.next = 4, this._sendCreateEndpoint(t);

	            case 4:
	              return r = e.sent, n && n.resolve(r), e.abrupt("return", r);

	            case 9:
	              throw e.prev = 9, e.t0 = e.catch(1), n && n.reject(e.t0), e.t0;

	            case 13:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[1, 9]]);
	      })), function (e) {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "registerCreateEndpointRequest",
	      value: function () {
	        if (this._endpointId) throw new Error("Cannot register create endpoint request on endpoint recycle");
	        return this._requestMap.register("".concat(this._participantId, ":create-endpoint-request"));
	      }
	    }, {
	      key: "registerPutEndpointRequest",
	      value: function () {
	        if (this._endpointId) return this._requestMap.register("".concat(this._participantId, ":put-endpoint-request"));
	        throw new Error("Cannot register put endpoint request without endpoint id");
	      }
	    }, {
	      key: "_sendCreateEndpoint",
	      value: function (e) {
	        return this._ctx.sendCreateEndpoint(e);
	      }
	    }, {
	      key: "_sendPutEndpoint",
	      value: function (e) {
	        return this._ctx.sendPutEndpoint(e);
	      }
	    }]), i;
	  }(),
	      jv = function () {
	    g(n, _f);
	    var t = b(n);

	    function n(e) {
	      return _(this, n), t.call(this, e);
	    }

	    return y(n);
	  }(),
	      Hv = ((Jn = Cv = Cv || {}).PENDING = "pending", Jn.ESTABLISHED = "established", Jn.CONNECTED = "connected", Jn.FAILED = "failed", Jn.RELEASING = "releasing", Jn.CLOSED = "closed", function () {
	    g(s, jv);
	    var i = b(s);

	    function s() {
	      var e;

	      _(this, s);

	      for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];

	      return m(E(e = i.call.apply(i, [this].concat(n))), "type", Cv.CLOSED), e;
	    }

	    return y(s, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("closed");
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }]), s;
	  }()),
	      Gv = function () {
	    g(n, jv);
	    var t = b(n);

	    function n(e) {
	      return _(this, n), m(E(e = t.call(this, e)), "type", Cv.CONNECTED), e;
	    }

	    return y(n, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("connected");
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "onICEFailed",
	      value: function () {
	        this._stateMutator.toPending();
	      }
	    }, {
	      key: "onAttach",
	      value: function () {
	        this._context.requestAttach();
	      }
	    }, {
	      key: "onRelease",
	      value: function () {
	        this._stateMutator.toReleasing();
	      }
	    }, {
	      key: "onExit",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), n;
	  }(),
	      Vv = function () {
	    g(i, jv);
	    var r = b(i);

	    function i(e, t, n) {
	      return _(this, i), m(E(e = r.call(this, e)), "type", Cv.ESTABLISHED), e._sdp = t, e._hasPendingAttach = n, e;
	    }

	    return y(i, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("established"), this._context.setRemoteDescription(this._sdp), this._hasPendingAttach && this.onAttach();
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "onPCConnected",
	      value: function () {
	        this._stateMutator.toConnected();
	      }
	    }, {
	      key: "onICEFailed",
	      value: function () {
	        this._stateMutator.toPending();
	      }
	    }, {
	      key: "onAttach",
	      value: function () {
	        this._context.requestAttach();
	      }
	    }, {
	      key: "onRelease",
	      value: function () {
	        this._stateMutator.toReleasing();
	      }
	    }, {
	      key: "onExit",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), i;
	  }(),
	      Bv = function () {
	    g(s, jv);
	    var i = b(s);

	    function s() {
	      var e;

	      _(this, s);

	      for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];

	      return m(E(e = i.call.apply(i, [this].concat(n))), "type", Cv.FAILED), e;
	    }

	    return y(s, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("failed"), this._context.endpoint.id ? this._stateMutator.toReleasing() : this._stateMutator.toClosed();
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "onExit",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), s;
	  }(),
	      Kv = function () {
	    g(s, jv);
	    var i = b(s);

	    function s() {
	      var e;

	      _(this, s);

	      for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];

	      return m(E(e = i.call.apply(i, [this].concat(n))), "type", Cv.PENDING), e;
	    }

	    return y(s, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("pending"), this._request();
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {
	        this._requestTimeout && clearTimeout(this._requestTimeout), delete this._requestTimeout;
	      }
	    }, {
	      key: "_request",
	      value: function () {
	        var e = this,
	            t = (this._context.trialCount += 1, this._context.trialCount);
	        9 <= t ? this._stateMutator.toFailed() : 1 < t ? this._requestTimeout = setTimeout(function () {
	          e._context.createSession();
	        }, 5e3 * t + 2e3 * (Math.random() - .5)) : this._context.createSession();
	      }
	    }, {
	      key: "onEndpointRequestSucceeded",
	      value: function (e) {
	        this._stateMutator.toEstablished(e, this._hasPendingAttach);
	      }
	    }, {
	      key: "onEndpointRequestFailed",
	      value: function () {
	        this._request();
	      }
	    }, {
	      key: "onAttach",
	      value: function () {
	        this._hasPendingAttach = !0;
	      }
	    }, {
	      key: "onRelease",
	      value: function () {
	        this._stateMutator.toReleasing();
	      }
	    }, {
	      key: "onExit",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), s;
	  }(),
	      Qv = function () {
	    g(s, jv);
	    var i = b(s);

	    function s() {
	      var e;

	      _(this, s);

	      for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];

	      return m(E(e = i.call.apply(i, [this].concat(n))), "type", Cv.RELEASING), e;
	    }

	    return y(s, [{
	      key: "_onStart",
	      value: function () {
	        this._context.dispatchEvent("releasing"), this._context.closePeerConnection(), this._context.endpoint.id && this._context.requestRelease();
	      }
	    }, {
	      key: "_onDestroy",
	      value: function () {}
	    }, {
	      key: "onEndpointRequestSucceeded",
	      value: function () {
	        this._context.requestRelease();
	      }
	    }, {
	      key: "onEndpointRequestFailed",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }, {
	      key: "onReleased",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }, {
	      key: "onExit",
	      value: function () {
	        this._stateMutator.toClosed();
	      }
	    }]), s;
	  }(),
	      zv = function () {
	    g(t, vf);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t, [{
	      key: "state",
	      get: function () {
	        return this._state;
	      }
	    }, {
	      key: "name",
	      get: function () {
	        return "PeerConnection";
	      }
	    }, {
	      key: "toPending",
	      value: function () {
	        this._changeState(new Kv(this));
	      }
	    }, {
	      key: "toEstablished",
	      value: function (e, t) {
	        this._changeState(new Vv(this, e, t));
	      }
	    }, {
	      key: "toConnected",
	      value: function () {
	        this._changeState(new Gv(this));
	      }
	    }, {
	      key: "toFailed",
	      value: function () {
	        this._changeState(new Bv(this));
	      }
	    }, {
	      key: "toReleasing",
	      value: function () {
	        this._changeState(new Qv(this));
	      }
	    }, {
	      key: "toClosed",
	      value: function () {
	        this._changeState(new Hv(this));
	      }
	    }]), t;
	  }(),
	      Wv = function () {
	    g(n, yf);
	    var t = b(n);

	    function n(e) {
	      return _(this, n), (e = t.call(this, e, new zv(e)))._stateMutator.toPending(), e;
	    }

	    return y(n, [{
	      key: "state",
	      get: function () {
	        return this._stateMutator.state;
	      }
	    }, {
	      key: "onEndpointRequestSucceeded",
	      value: function (e) {
	        I.verbose("[".concat(this.state.type, "] onEndpointRequestSucceeded"));
	        var t = this.state;

	        switch (t.type) {
	          case Cv.PENDING:
	            t.onEndpointRequestSucceeded(e);
	            break;

	          case Cv.RELEASING:
	            t.onEndpointRequestSucceeded();
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onEndpointRequestSucceeded"));
	        }
	      }
	    }, {
	      key: "onEndpointRequestFailed",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onEndpointCreateFailed"));
	        var e = this.state;

	        switch (e.type) {
	          case Cv.PENDING:
	          case Cv.RELEASING:
	            e.onEndpointRequestFailed();
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onEndpointCreateFailed"));
	        }
	      }
	    }, {
	      key: "onICEFailed",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onICEFailed"));
	        var e = this.state;

	        switch (e.type) {
	          case Cv.ESTABLISHED:
	          case Cv.CONNECTED:
	            e.onICEFailed();
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onICEFailed"));
	        }
	      }
	    }, {
	      key: "onPCConnected",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onPCConnected"));
	        var e = this.state;
	        e.type === Cv.ESTABLISHED ? e.onPCConnected() : I.error("[".concat(this.state.type, "] onPCConnected"));
	      }
	    }, {
	      key: "onAttach",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onAttach"));
	        var e = this.state;

	        switch (e.type) {
	          case Cv.PENDING:
	          case Cv.ESTABLISHED:
	          case Cv.CONNECTED:
	            e.onAttach();
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onAttach"));
	        }
	      }
	    }, {
	      key: "onRelease",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onRelease"));
	        var e = this.state;

	        switch (e.type) {
	          case Cv.PENDING:
	          case Cv.ESTABLISHED:
	          case Cv.CONNECTED:
	            e.onRelease();
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onRelease"));
	        }
	      }
	    }, {
	      key: "onReleased",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onReleased"));
	        var e = this.state;
	        e.type === Cv.RELEASING ? e.onReleased() : I.error("[".concat(this.state.type, "] onReleased"));
	      }
	    }, {
	      key: "onExit",
	      value: function () {
	        I.verbose("[".concat(this.state.type, "] onExit"));
	        var e = this.state;

	        switch (e.type) {
	          case Cv.RELEASING:
	          case Cv.PENDING:
	          case Cv.CONNECTED:
	          case Cv.ESTABLISHED:
	          case Cv.FAILED:
	            e.onExit();
	            break;

	          default:
	            I.error("[".concat(this.state.type, "] onExit"));
	        }
	      }
	    }]), n;
	  }(),
	      Yv = function () {
	    g(r, Li);
	    var n = b(r);

	    function r(e) {
	      var t;
	      return _(this, r), (t = n.call(this)).payload = e.payload || {}, t;
	    }

	    return y(r);
	  }(),
	      Xv = function () {
	    g(t, Yv);
	    var e = b(t);

	    function t() {
	      return _(this, t), e.apply(this, arguments);
	    }

	    return y(t);
	  }(),
	      Jv = ((Jt = kv = kv || {}).OFFER = "offer", Jt.ANSWER = "answer", Jt.CANDIDATE = "candidate", function () {
	    g(n, Xv);
	    var t = b(n);

	    function n(e) {
	      return _(this, n), m(E(e = t.call(this, {
	        payload: e
	      })), "type", kv.ANSWER), e;
	    }

	    return y(n);
	  }()),
	      Zv = function () {
	    g(n, Xv);
	    var t = b(n);

	    function n(e) {
	      return _(this, n), m(E(e = t.call(this, {
	        payload: e
	      })), "type", kv.CANDIDATE), e;
	    }

	    return y(n);
	  }(),
	      $v = function () {
	    g(n, Xv);
	    var t = b(n);

	    function n(e) {
	      return _(this, n), m(E(e = t.call(this, {
	        payload: e
	      })), "type", kv.OFFER), e;
	    }

	    return y(n);
	  }(),
	      e_ = function () {
	    function e() {
	      _(this, e);
	    }

	    return y(e, null, [{
	      key: "createOffer",
	      value: function (e, t) {
	        return new $v({
	          peerConnectionId: e,
	          sdp: t
	        });
	      }
	    }, {
	      key: "createAnswer",
	      value: function (e, t) {
	        return new Jv({
	          peerConnectionId: e,
	          sdp: t
	        });
	      }
	    }, {
	      key: "createCandidate",
	      value: function (e, t) {
	        return new Zv({
	          peerConnectionId: e,
	          candidate: t
	        });
	      }
	    }]), e;
	  }(),
	      t_ = function () {
	    g(a, Eh);
	    var s = b(a);

	    function a(e, t, n, r) {
	      var i;
	      return _(this, a), m(E(i = s.call(this)), "tmpId", $()), m(E(i), "_createSession", function () {
	        switch (I.debug("_createSession()"), i._type) {
	          case "master":
	            i._createMasterSession();

	            break;

	          case "viewer":
	            i._createViewerSession();

	            break;

	          default:
	            I.error("Not supported endpoint type : ", i._type);
	        }
	      }), m(E(i), "_closePeerConnection", function () {
	        I.debug("_closePeerConnection()"), i._pc.removeAllEventListeners(), i._pc.close();
	      }), m(E(i), "_requestAttach", function () {
	        Lv(new Uv(5e3, 1e3, 8), function () {
	          return i._sendAttach(i._attachedTo);
	        }, {
	          onError: function (e) {
	            I.error("Fail attach endpoint endpointId = ".concat(i.id, ", to = ").concat(i._attachedTo, " ErrorCode = ").concat(e.code));
	          }
	        }).then(function () {
	          i._dispatchEvent("attached", i._attachedTo);
	        });
	      }), m(E(i), "_requestRelease", function () {
	        I.debug("_requestRelease()"), i._sendReleaseEndpoint().then(function () {
	          i._stateMachine.onReleased();
	        }).catch(function (e) {
	          I.error("Release request failed", e), i._stateMachine.onReleased();
	        });
	      }), m(E(i), "_setRemoteDescription", function (e) {
	        I.debug("_setRemoteDescription()");
	        var t = i._pc,
	            e = e_.createAnswer(void 0, e);
	        t.onEvent(e), t.once("connected", function () {
	          i._stateMachine.onPCConnected(), i._sendConnected();
	        }), t.once("iceFailed", function () {
	          i._stateMachine.onICEFailed();
	        });
	      }), i._ctx = e, i._localStream = t, i._type = n, i._participantId = r, i._stateMachine = new Wv({
	        endpoint: E(i),
	        dispatchEvent: i._dispatchEvent.bind(E(i)),
	        createSession: i._createSession,
	        setRemoteDescription: i._setRemoteDescription,
	        closePeerConnection: i._closePeerConnection,
	        requestAttach: i._requestAttach,
	        requestRelease: i._requestRelease,
	        trialCount: 0
	      }), i;
	    }

	    return y(a, [{
	      key: "pc",
	      get: function () {
	        return this._pc;
	      }
	    }, {
	      key: "_state",
	      get: function () {
	        return this._stateMachine.state;
	      }
	    }, {
	      key: "_masterSessionDirection",
	      get: function () {
	        return this._ctx.masterSessionDirection;
	      }
	    }, {
	      key: "_viewerSessionDirection",
	      get: function () {
	        return this._ctx.viewerSessionDirection;
	      }
	    }, {
	      key: "attach",
	      value: function (e) {
	        I.debug("attach()"), this._attachedTo = e, this._stateMachine.onAttach();
	      }
	    }, {
	      key: "release",
	      value: function () {
	        I.debug("release()"), this._stateMachine.onRelease();
	      }
	    }, {
	      key: "exit",
	      value: function () {
	        I.debug("exit()"), this._closePeerConnection(), this._stateMachine.onExit();
	      }
	    }, {
	      key: "_createMasterSession",
	      value: function () {
	        I.debug("_createMasterSession()"), this._createPeerConnection(this._masterSessionDirection, this._localStream), this._requestCreateEndpoint();
	      }
	    }, {
	      key: "_createViewerSession",
	      value: function () {
	        I.debug("_createViewerSession()"), this._createPeerConnection(this._viewerSessionDirection, void 0), this._requestCreateEndpoint();
	      }
	    }, {
	      key: "_createPeerConnection",
	      value: function (e, t) {
	        I.debug("_createPeerConnection()");
	        var n = new Fv(this._ctx, this._participantId, e, this.id);
	        this._pc = new Af(this._ctx, void 0, n, t, !0, void 0, e, !0), this._dispatchEvent("pcChanged", this._pc);
	      }
	    }, {
	      key: "_requestCreateEndpoint",
	      value: function () {
	        var t = this,
	            e = (I.debug("_requestCreateEndpoint()"), this._pc),
	            n = this.id ? e.signalingClient.registerPutEndpointRequest() : e.signalingClient.registerCreateEndpointRequest();
	        e.createOffer(), n.promise.then(function (e) {
	          t.id = e.payload.endpoint.id, t._stateMachine.onEndpointRequestSucceeded(e.payload.sdp);
	        }).catch(function (e) {
	          I.error("Endpoint request failed", e), t._stateMachine.onEndpointRequestFailed();
	        });
	      }
	    }, {
	      key: "_sendConnected",
	      value: function () {
	        return this._ctx.sendConnected(this);
	      }
	    }, {
	      key: "_sendReleaseEndpoint",
	      value: function () {
	        return this._ctx.sendReleaseEndpoint(this);
	      }
	    }, {
	      key: "_sendAttach",
	      value: function (e) {
	        return this._ctx.sendAttach(this, e);
	      }
	    }]), a;
	  }(),
	      n_ = function () {
	    g(n, Eh);
	    var e,
	        t = b(n);

	    function n() {
	      return _(this, n), t.call(this);
	    }

	    return y(n, [{
	      key: "stream",
	      get: function () {
	        return this._stream;
	      }
	    }, {
	      key: "isSharing",
	      get: function () {
	        return !!this._stream;
	      }
	    }, {
	      key: "startStream",
	      value: (e = v(regeneratorRuntime.mark(function e() {
	        var t,
	            n = this;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.prev = 0, e.next = 3, navigator.mediaDevices.getDisplayMedia({
	                video: !0
	              });

	            case 3:
	              t = e.sent, this._stream = t, this._stream.getVideoTracks()[0].onended = function () {
	                n._releaseStream(), n._dispatchEvent("streamStopped");
	              }, e.next = 19;
	              break;

	            case 8:
	              e.prev = 8, e.t0 = e.catch(0), e.t1 = e.t0.name, e.next = "InvalidStateError" === e.t1 ? 13 : "NotAllowedError" === e.t1 ? 14 : "NotFoundError" === e.t1 ? 15 : "NotReadableError" === e.t1 ? 16 : 17;
	              break;

	            case 13:
	            case 14:
	            case 15:
	            case 16:
	              return e.abrupt("break", 18);

	            case 17:
	              throw new Error("");

	            case 18:
	              throw new Error("failed to start screen share");

	            case 19:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[0, 8]]);
	      })), function () {
	        return e.apply(this, arguments);
	      })
	    }, {
	      key: "stopStream",
	      value: function () {
	        this._releaseStream(), this._dispatchEvent("streamStopped");
	      }
	    }, {
	      key: "_releaseStream",
	      value: function () {
	        if (this._stream) {
	          var e,
	              t = G(this._stream.getTracks());

	          try {
	            for (t.s(); !(e = t.n()).done;) e.value.stop();
	          } catch (e) {
	            t.e(e);
	          } finally {
	            t.f();
	          }

	          delete this._stream;
	        }
	      }
	    }]), n;
	  }(),
	      r_ = function () {
	    g(i, Eh);
	    var e,
	        r = b(i);

	    function i(e) {
	      var t,
	          n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {
	        audio: !0,
	        video: !0
	      };
	      return _(this, i), m(E(t = r.call(this)), "_checkScreenSharePrerequisites", function () {
	        if (!navigator.mediaDevices.getDisplayMedia) throw new Error("screen share is not supported in this browser");
	      }), t._deviceManager = e, t._mediaConstraints = n, t._screenShare = new n_(), t._screenShare.on("streamStopped", function () {
	        t._releaseMergedStream(), t._dispatchEvent("screenShareStreamStopped");
	      }), t;
	    }

	    return y(i, [{
	      key: "mediaConstraints",
	      set: function (e) {
	        this._mediaConstraints = e;
	      }
	    }, {
	      key: "hasPermission",
	      get: function () {
	        var e;
	        return null == (e = this._mediaAccess) ? void 0 : e.hasPermission;
	      }
	    }, {
	      key: "localStream",
	      get: function () {
	        return this.isScreenSharing ? this._mergedStream : this.getLocalMediaStream();
	      }
	    }, {
	      key: "mergedStream",
	      get: function () {
	        return this._mergedStream;
	      }
	    }, {
	      key: "screenStream",
	      get: function () {
	        return this._screenShare.stream;
	      }
	    }, {
	      key: "isScreenSharing",
	      get: function () {
	        return this._screenShare.isSharing;
	      }
	    }, {
	      key: "useScreenStream",
	      value: (e = v(regeneratorRuntime.mark(function e() {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return this._checkScreenSharePrerequisites(), e.next = 3, this._screenShare.startStream();

	            case 3:
	              this._mergeScreenShareStream(), this._dispatchEvent("streamChanged", this.localStream);

	            case 5:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return e.apply(this, arguments);
	      })
	    }, {
	      key: "getLocalMediaStream",
	      value: function () {
	        return this._mediaAccess || this._grantMediaAccess(this._mediaConstraints), this._mediaAccess.stream;
	      }
	    }, {
	      key: "stopScreenShare",
	      value: function () {
	        this._screenShare.isSharing && this._screenShare.stopStream();
	      }
	    }, {
	      key: "revokeMediaAccess",
	      value: function () {
	        this._mediaAccess && (this._mediaAccess.dispose(), this._mediaAccess = null);
	      }
	    }, {
	      key: "release",
	      value: function () {
	        this.stopScreenShare(), this.revokeMediaAccess();
	      }
	    }, {
	      key: "_grantMediaAccess",
	      value: function (e) {
	        var t = this;
	        this._mediaAccess = this._deviceManager.useMedia(e), this._mediaAccess.on("streamChanged", function () {
	          t._screenShare.isSharing && t._mergeScreenShareStream(), t._dispatchEvent("streamChanged", t.localStream);
	        }), this._mediaAccess.on("audioOutputChanged", function () {
	          return t._dispatchEvent("audioOutputChanged");
	        });
	      }
	    }, {
	      key: "_mergeScreenShareStream",
	      value: function () {
	        var e;
	        this._screenShare.isSharing && (e = new MediaStream(), this._mediaAccess.stream && 0 < this._mediaAccess.stream.getAudioTracks().length && e.addTrack(this._mediaAccess.stream.getAudioTracks()[0]), e.addTrack(this.screenStream.getVideoTracks()[0]), this._mergedStream = e);
	      }
	    }, {
	      key: "_releaseMergedStream",
	      value: function () {
	        this._mergedStream && (this._mergedStream.removeTrack(this._mergedStream.getAudioTracks()[0]), delete this._mergedStream, this._dispatchEvent("streamChanged", this.localStream));
	      }
	    }]), i;
	  }(),
	      i_ = function () {
	    function i(e, t, n, r) {
	      _(this, i), this._liveEvent = e, this._sender = n, this._deviceManager = t, this._mediaOption = r;
	    }

	    var t, n, r;
	    return y(i, [{
	      key: "mediaView",
	      get: function () {
	        return this._mediaView;
	      },
	      set: function (e) {
	        this._mediaView !== e && (this._mediaView && (this._mediaView = null), e ? this.isHostStream ? this._mediaView = this._updateMediaViewStream(e, this.localStream) : this._mediaView = this._updateMediaViewStream(e, this.stream) : delete this._mediaView);
	      }
	    }, {
	      key: "localStream",
	      get: function () {
	        var e;
	        return null == (e = this._localStream) ? void 0 : e.localStream;
	      }
	    }, {
	      key: "stream",
	      get: function () {
	        var e;
	        return null == (e = this._endpoint.pc) ? void 0 : e.remoteStream;
	      }
	    }, {
	      key: "isHostStream",
	      get: function () {
	        return this._mediaOption;
	      }
	    }, {
	      key: "_createLocalStream",
	      value: function () {
	        var e = this;
	        this._localStream = new r_(this._deviceManager, {
	          audio: !0,
	          video: !0
	        }), this._localStream.on("streamChanged", function () {
	          e._onLocalStream();
	        });
	      }
	    }, {
	      key: "_createEndpoint",
	      value: function () {
	        var e,
	            t = this;
	        return this.isHostStream ? (this._localStream || this._createLocalStream(), new t_({
	          masterSessionDirection: {
	            audio: "sendonly",
	            video: "sendonly"
	          },
	          viewerSessionDirection: {
	            audio: "recvonly",
	            video: "recvonly"
	          },
	          sender: this._sender,
	          sendConnected: this._sendConnected.bind(this),
	          sendReleaseEndpoint: this._sendReleaseEndpoint.bind(this),
	          sendAttach: this._sendAttach.bind(this),
	          sendCreateEndpoint: this._sendCreateEndpoint.bind(this),
	          sendPutEndpoint: this._sendPutEndpoint.bind(this)
	        }, this._localStream, "master", this._liveEvent.host.hostId)) : (e = new t_({
	          masterSessionDirection: {
	            audio: "sendonly",
	            video: "sendonly"
	          },
	          viewerSessionDirection: {
	            audio: "recvonly",
	            video: "recvonly"
	          },
	          sender: this._sender,
	          sendConnected: this._sendConnected.bind(this),
	          sendReleaseEndpoint: this._sendReleaseEndpoint.bind(this),
	          sendAttach: this._sendAttach.bind(this),
	          sendCreateEndpoint: this._sendCreateEndpoint.bind(this),
	          sendPutEndpoint: this._sendPutEndpoint.bind(this)
	        }, void 0, "viewer", this._liveEvent.currentLiveUser.participantId), this._unsubscriber = e.pc.on("remoteStream", function (e) {
	          t._onStream();
	        }), e);
	      }
	    }, {
	      key: "openStream",
	      value: function () {
	        this._endpoint && this._teardown(), this._endpoint = this._createEndpoint();
	      }
	    }, {
	      key: "closeStream",
	      value: function (e) {
	        e && this._endpoint.release(), this._teardown();
	      }
	    }, {
	      key: "attach",
	      value: function (e) {
	        this._endpoint.attach(e);
	      }
	    }, {
	      key: "toggleAudio",
	      value: function (t) {
	        var e;
	        null != (e = this.localStream.getAudioTracks()) && e.forEach(function (e) {
	          e.enabled = t;
	        }), this._mediaOption.turnAudioOn = t;
	      }
	    }, {
	      key: "toggleVideo",
	      value: function (t) {
	        var e;
	        null != (e = this.localStream.getVideoTracks()) && e.forEach(function (e) {
	          e.enabled = t;
	        }), this._mediaOption.turnVideoOn = t;
	      }
	    }, {
	      key: "chooseMediaDevice",
	      value: function (e, t) {
	        this._deviceManager.selectDevice(e, t);
	      }
	    }, {
	      key: "_onLocalStream",
	      value: function () {
	        this.toggleAudio(this._mediaOption.turnAudioOn), this.toggleVideo(this._mediaOption.turnVideoOn), this._mediaView && this._updateMediaViewStream(this._mediaView, this.localStream);
	      }
	    }, {
	      key: "_onStream",
	      value: function () {
	        var e = this.stream;
	        this._mediaView && this._updateMediaViewStream(this._mediaView, e);
	      }
	    }, {
	      key: "_updateMediaViewStream",
	      value: function (e, t) {
	        return t && (e.srcObject = t), e;
	      }
	    }, {
	      key: "_sendConnected",
	      value: (r = v(regeneratorRuntime.mark(function e(t) {
	        var n;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return n = this.isHostStream ? Vl.createHostConnected(this._liveEvent.liveEventId, this._liveEvent.host.hostId, t.id) : Vl.createConnected(this._liveEvent.liveEventId, this._liveEvent.currentLiveUser.participantId, t.id), e.abrupt("return", this._sender.send(n));

	            case 2:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return r.apply(this, arguments);
	      })
	    }, {
	      key: "_sendReleaseEndpoint",
	      value: function (e) {
	        e = this.isHostStream ? Vl.createHostDeleteStream(this._liveEvent.liveEventId, this._liveEvent.host.hostId, e.id) : Vl.createDeleteStream(this._liveEvent.liveEventId, this._liveEvent.currentLiveUser.participantId, e.id);
	        return this._sender.sendWithRetry(e);
	      }
	    }, {
	      key: "_sendAttach",
	      value: function (e, t) {
	        e = Vl.createAttach(this._liveEvent.liveEventId, this._liveEvent.currentLiveUser.participantId, e.id, t);
	        return this._sender.sendWithRetry(e);
	      }
	    }, {
	      key: "_sendCreateEndpoint",
	      value: (n = v(regeneratorRuntime.mark(function e(t) {
	        var n;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (this.isHostStream) return n = Vl.createHostCreateStream(this._liveEvent.liveEventId, this._liveEvent.host.hostId, t.sdp, "sendonly", "sendonly"), e.abrupt("return", this._sender.send(n));
	              e.next = 5;
	              break;

	            case 5:
	              return n = Vl.createStream(this._liveEvent.liveEventId, this._liveEvent.currentLiveUser.participantId, t.sdp, "recvonly", "recvonly"), e.abrupt("return", this._sender.send(n));

	            case 7:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return n.apply(this, arguments);
	      })
	    }, {
	      key: "_sendPutEndpoint",
	      value: (t = v(regeneratorRuntime.mark(function e(t) {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.abrupt("return", this._sendCreateEndpoint(t));

	            case 1:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "_teardown",
	      value: function () {
	        var e;
	        null != (e = this._endpoint) && e.exit(), (this._endpoint = null) != (e = this._unsubscriber) && e.call(this), this._unsubscriber = null;
	      }
	    }]), i;
	  }(),
	      s_ = function () {
	    g(p, Eh);
	    var t,
	        n,
	        e,
	        r,
	        i,
	        s,
	        a,
	        o,
	        u,
	        c,
	        l,
	        h,
	        d,
	        f = b(p);

	    function p(e) {
	      var t,
	          n = e.deviceManager,
	          r = e.sender,
	          i = e.sb,
	          s = e.userId,
	          e = e.info;
	      return _(this, p), m(E(t = f.call(this)), "_customItemsUpdatedAt", 0), t._deviceManager = n, t._sender = r, t._sb = i, t._userId = s, t._streams = new Map(), t._customItems = null, e && Object.assign(E(t), e), t._unsubscriber = t._sender.on("command", function (e) {
	        t._onEvent(e);
	      }), t;
	    }

	    return y(p, [{
	      key: "customItems",
	      get: function () {
	        return x({}, this._customItems);
	      },
	      set: function (e) {
	        this._customItems = e;
	      }
	    }, {
	      key: "myRole",
	      get: function () {
	        return this.userIdsForHost.includes(this._userId) ? D.LiveEventRole.HOST : D.LiveEventRole.PARTICIPANT;
	      }
	    }, {
	      key: "isHost",
	      get: function () {
	        return this.myRole === D.LiveEventRole.HOST;
	      }
	    }, {
	      key: "isActiveHost",
	      get: function () {
	        return this.isHost && !!this.host;
	      }
	    }, {
	      key: "duration",
	      get: function () {
	        return 0 < this._duration ? this._duration : Date.now() - this.startedAt;
	      },
	      set: function (e) {
	        this._duration = e;
	      }
	    }, {
	      key: "fetchOpenChannel",
	      value: (d = v(regeneratorRuntime.mark(function e() {
	        var t;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, this._sb.openChannel.getChannelWithoutCache(this.liveEventId);

	            case 2:
	              return t = e.sent, t = this._sb.openChannel.buildOpenChannelFromSerializedData(t), this.openChannel = t, e.abrupt("return", t);

	            case 6:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return d.apply(this, arguments);
	      })
	    }, {
	      key: "_getOpenChannel",
	      value: (h = v(regeneratorRuntime.mark(function e() {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (this.openChannel) return e.abrupt("return", this.openChannel);
	              e.next = 2;
	              break;

	            case 2:
	              return e.abrupt("return", this.fetchOpenChannel());

	            case 3:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return h.apply(this, arguments);
	      })
	    }, {
	      key: "enterAsHost",
	      value: (l = v(regeneratorRuntime.mark(function e(t) {
	        var n, r;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, this._getOpenChannel();

	            case 2:
	              return n = e.sent, e.next = 5, n.enter();

	            case 5:
	              return e.prev = 5, e.next = 8, this._sender.send(Vl.createEnterHost(this.liveEventId, t));

	            case 8:
	              r = e.sent, r = r.payload.host, this._streams.set(r.hostId, new i_(this, this._deviceManager, this._sender, t)), this.upsert({
	                host: r
	              }), e.next = 19;
	              break;

	            case 14:
	              return e.prev = 14, e.t0 = e.catch(5), e.next = 18, n.exit();

	            case 18:
	              throw e.t0;

	            case 19:
	              this._startToSendAlive();

	            case 20:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[5, 14]]);
	      })), function (e) {
	        return l.apply(this, arguments);
	      })
	    }, {
	      key: "setEventReady",
	      value: (c = v(regeneratorRuntime.mark(function e() {
	        var t;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (this.isHost) {
	                e.next = 2;
	                break;
	              }

	              throw new Error("host only action");

	            case 2:
	              return e.next = 4, this._sender.send(Vl.createReady(this.liveEventId));

	            case 4:
	              t = e.sent, t = t.payload.liveEvent, this.upsert(t);

	            case 7:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return c.apply(this, arguments);
	      })
	    }, {
	      key: "startEvent",
	      value: (u = v(regeneratorRuntime.mark(function e(t) {
	        var n;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (this.isHost) {
	                e.next = 2;
	                break;
	              }

	              throw new Error("host only action");

	            case 2:
	              return e.next = 4, this._sender.send(Vl.createStart(this.liveEventId));

	            case 4:
	              n = e.sent, n = n.payload.liveEvent, this.upsert(n), this.isHostStreaming || this.startStreaming(t), this._toggleAudio(t.turnAudioOn), this._toggleVideo(t.turnVideoOn);

	            case 10:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return u.apply(this, arguments);
	      })
	    }, {
	      key: "startStreaming",
	      value: function (e) {
	        if (!this.isActiveHost) throw new Error("current host only action");

	        var t = this._streams.get(this.host.hostId);

	        t || (e = new i_(this, this._deviceManager, this._sender, e), this._streams.set(this.host.hostId, e)), t.openStream();
	      }
	    }, {
	      key: "endStreaming",
	      value: function () {
	        if (!this.isActiveHost) throw new Error("current host only action");

	        var e = this._streams.get(this.host.hostId);

	        e && (this._streams.delete(this.host.hostId), e.closeStream(!0));
	      }
	    }, {
	      key: "exitAsHost",
	      value: (o = v(regeneratorRuntime.mark(function e() {
	        var t, n;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (this.isActiveHost) {
	                e.next = 2;
	                break;
	              }

	              throw new Error("current host only action");

	            case 2:
	              return t = this.host.hostId, e.next = 5, this._sender.send(Vl.createExitHost(this.liveEventId, t));

	            case 5:
	              t = e.sent, n = t.payload.host, this.upsert({
	                host: n
	              }), this.teardown();

	            case 9:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return o.apply(this, arguments);
	      })
	    }, {
	      key: "endEvent",
	      value: (a = v(regeneratorRuntime.mark(function e() {
	        var t;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, this._sender.send(Vl.createEndLiveEvent(this.liveEventId));

	            case 2:
	              t = e.sent, t = t.payload.liveEvent, this.upsert(t), this.teardown();

	            case 6:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return a.apply(this, arguments);
	      })
	    }, {
	      key: "muteAudioInput",
	      value: function () {
	        this._toggleAudio(!1);
	      }
	    }, {
	      key: "unmuteAudioInput",
	      value: function () {
	        this._toggleAudio(!0);
	      }
	    }, {
	      key: "_toggleAudio",
	      value: function (e) {
	        if (!this.isActiveHost) throw new Error("current host only action");
	        this._streams.get(this.host.hostId).toggleAudio(e), this._sender.send(Vl.createAudio(this.liveEventId, this.host.hostId, e));
	      }
	    }, {
	      key: "stopVideo",
	      value: function () {
	        this._toggleVideo(!1);
	      }
	    }, {
	      key: "startVideo",
	      value: function () {
	        this._toggleVideo(!0);
	      }
	    }, {
	      key: "_toggleVideo",
	      value: function (e) {
	        if (!this.isActiveHost) throw new Error("current host only action");
	        this._streams.get(this.host.hostId).toggleVideo(e), this._sender.send(Vl.createVideo(this.liveEventId, this.host.hostId, e));
	      }
	    }, {
	      key: "selectAudioInput",
	      value: function (e) {
	        return this._deviceManager.selectDevice("audioinput", e);
	      }
	    }, {
	      key: "selectVideoInput",
	      value: function (e) {
	        return this._deviceManager.selectDevice("videoinput", e);
	      }
	    }, {
	      key: "enter",
	      value: (s = v(regeneratorRuntime.mark(function e() {
	        var t, n;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, this._getOpenChannel();

	            case 2:
	              return t = e.sent, e.next = 5, t.enter();

	            case 5:
	              return e.prev = 5, e.next = 8, this._sender.send(Vl.createEnter(this.liveEventId));

	            case 8:
	              n = e.sent, n = n.payload.participant, this.upsert({
	                currentLiveUser: n
	              }), this._tryOpen(), e.next = 19;
	              break;

	            case 14:
	              return e.prev = 14, e.t0 = e.catch(5), e.next = 18, t.exit();

	            case 18:
	              throw e.t0;

	            case 19:
	              this._startToSendAlive();

	            case 20:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[5, 14]]);
	      })), function () {
	        return s.apply(this, arguments);
	      })
	    }, {
	      key: "exit",
	      value: (i = v(regeneratorRuntime.mark(function e() {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, this._sender.send(Vl.createExit(this.liveEventId, this.currentLiveUser.participantId));

	            case 2:
	              e.sent.payload.participant, this.teardown();

	            case 5:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return i.apply(this, arguments);
	      })
	    }, {
	      key: "setVideoViewForLiveEvent",
	      value: function (e, t) {
	        t = this._streams.get(t);
	        t && (t.mediaView = e);
	      }
	    }, {
	      key: "updateLiveEventInfo",
	      value: (r = v(regeneratorRuntime.mark(function e(t) {
	        var n, r;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return n = Vl.updateLiveEvent(this.liveEventId, t.userIdsForHost, t.title, t.coverUrl, t.coverFile), e.next = 3, this._sender.send(n);

	            case 3:
	              n = e.sent, r = n.payload.liveEvent, this.upsert(r);

	            case 6:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return r.apply(this, arguments);
	      })
	    }, {
	      key: "fetchCustomItems",
	      value: (e = v(regeneratorRuntime.mark(function e() {
	        var t, n;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return t = Vl.createGetCustomItems(this.liveEventId), e.prev = 1, e.next = 4, this._sender.send(t);

	            case 4:
	              return t = e.sent, n = t.payload, this._setCustomItems(n.customItems), e.abrupt("return", n);

	            case 10:
	              throw e.prev = 10, e.t0 = e.catch(1), I.error("failed to update customItems"), e.t0;

	            case 14:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[1, 10]]);
	      })), function () {
	        return e.apply(this, arguments);
	      })
	    }, {
	      key: "updateCustomItems",
	      value: (n = v(regeneratorRuntime.mark(function e(t) {
	        var n, r;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (Object.keys(t).some(function (e) {
	                return "string" != typeof t[e];
	              })) throw new Error("invalid parameter");
	              e.next = 2;
	              break;

	            case 2:
	              return n = Vl.createUpdateCustomItems(this.liveEventId, t), e.prev = 3, e.next = 6, this._sender.send(n);

	            case 6:
	              return n = e.sent, r = n.payload, this._setCustomItems(r.customItems, r.updatedAt), e.abrupt("return", r);

	            case 12:
	              throw e.prev = 12, e.t0 = e.catch(3), I.error("failed to update customItems"), e.t0;

	            case 16:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[3, 12]]);
	      })), function (e) {
	        return n.apply(this, arguments);
	      })
	    }, {
	      key: "deleteCustomItems",
	      value: (t = v(regeneratorRuntime.mark(function e(t) {
	        var n, r;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (t.some(function (e) {
	                return "string" != typeof e;
	              })) throw new Error("invalid parameter");
	              e.next = 2;
	              break;

	            case 2:
	              return n = Vl.createDeleteCustomItems(this.liveEventId, t), e.prev = 3, e.next = 6, this._sender.send(n);

	            case 6:
	              return n = e.sent, r = n.payload, this._setCustomItems(r.customItems, r.deletedAt), e.abrupt("return", r);

	            case 12:
	              throw e.prev = 12, e.t0 = e.catch(3), I.error("failed to delete customItems"), e.t0;

	            case 16:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[3, 12]]);
	      })), function (e) {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "upsert",
	      value: function (e) {
	        Object.assign(this, e);
	      }
	    }, {
	      key: "teardown",
	      value: function () {
	        null != (e = this.openChannel) && e.exit();
	        var e,
	            t,
	            n = G(this._streams.values());

	        try {
	          for (n.s(); !(t = n.n()).done;) t.value.closeStream();
	        } catch (e) {
	          n.e(e);
	        } finally {
	          n.f();
	        }

	        this._streams.clear(), this._stopToSendAlive(), this.upsert({
	          currentLiveUser: void 0
	        });
	      }
	    }, {
	      key: "_setCustomItems",
	      value: function (e, t) {
	        return (void 0 === t || t > this._customItemsUpdatedAt) && (this._customItemsUpdatedAt = t, this._customItems = e || {}, !0);
	      }
	    }, {
	      key: "_onEvent",
	      value: function (e) {
	        if (this.liveEventId === e.payload.liveEventId) if (e instanceof fl) this._onReady(e);else if (e instanceof pl) this._onStarted(e);else if (e instanceof vl) this._onEnded(e);else if (e instanceof Ul) this._onUpdated(e);else if (e instanceof _l) this._onHostEntered(e);else if (e instanceof yl) this._onHostExited(e);else if (e instanceof ml) this._onHostConnected(e);else if (e instanceof Ll) this._onHostDisconnected(e);else if (e instanceof gl) this._onHostAudioStatusChanged(e);else if (e instanceof El) this._onHostVideoStatusChanged(e);else if (e instanceof bl) this._onParticipantEntered(e);else if (e instanceof Il) this._onParticipantExited(e);else if (e instanceof Hl) this._onUpdateCustomItems(e);else {
	          if (!(e instanceof Gl)) throw new Error("unknown event is received");

	          this._onDeleteCustomItems(e);
	        }
	      }
	    }, {
	      key: "_onReady",
	      value: function (e) {
	        e = e.payload.liveEvent;
	        this.upsert(e), this._dispatchEvent("liveEventReady", this);
	      }
	    }, {
	      key: "_onStarted",
	      value: function (e) {
	        e = e.payload.liveEvent;
	        this.upsert(e), this._dispatchEvent("liveEventStarted", this), this._tryOpen();
	      }
	    }, {
	      key: "_onEnded",
	      value: function (e) {
	        e = e.payload.liveEvent;
	        this.upsert(e), this._dispatchEvent("liveEventEnded", this), this.teardown();
	      }
	    }, {
	      key: "_onUpdated",
	      value: function (e) {
	        e = e.payload.liveEvent;
	        this.upsert(e), this._dispatchEvent("liveEventUpdated", this);
	      }
	    }, {
	      key: "_onHostEntered",
	      value: function (e) {
	        e = e.payload.host;
	        this.upsert({
	          host: e
	        }), this._dispatchEvent("hostEntered", this, this.host);
	      }
	    }, {
	      key: "_onHostExited",
	      value: function (e) {
	        e = e.payload.host;
	        this.upsert({
	          host: void 0
	        }), this._dispatchEvent("hostExited", this, e);
	      }
	    }, {
	      key: "_onHostConnected",
	      value: function (e) {
	        e = e.payload.host;
	        this.upsert({
	          host: e
	        }), this._dispatchEvent("hostConnected", this, this.host), this._tryOpen();
	      }
	    }, {
	      key: "_onHostDisconnected",
	      value: function (e) {
	        e = e.payload.host;
	        this.upsert({
	          host: e
	        }), this._dispatchEvent("hostDisconnected", this, this.host);
	      }
	    }, {
	      key: "_onHostAudioStatusChanged",
	      value: function (e) {
	        e = e.payload.host;
	        this.upsert({
	          host: e
	        }), e.isAudioOn && this._dispatchEvent("hostUnmutedAudio", this, this.host), e.isAudioOn || this._dispatchEvent("hostMutedAudio", this, this.host);
	      }
	    }, {
	      key: "_onHostVideoStatusChanged",
	      value: function (e) {
	        e = e.payload.host;
	        this.upsert({
	          host: e
	        }), e.isVideoOn && this._dispatchEvent("hostStartedVideo", this, this.host), e.isVideoOn || this._dispatchEvent("hostStoppedVideo", this, this.host);
	      }
	    }, {
	      key: "_onParticipantEntered",
	      value: function (e) {
	        var e = e.payload,
	            t = e.participant,
	            n = e.participantCount,
	            r = e.peakParticipantCount,
	            e = e.cumulativeParticipantCount;
	        this.upsert({
	          participantCount: n,
	          peakParticipantCount: r,
	          cumulativeParticipantCount: e
	        }), this._dispatchEvent("participantEntered", this, t);
	      }
	    }, {
	      key: "_onParticipantExited",
	      value: function (e) {
	        var e = e.payload,
	            t = e.participant,
	            n = e.participantCount,
	            r = e.peakParticipantCount,
	            e = e.cumulativeParticipantCount;
	        this.upsert({
	          participantCount: n,
	          peakParticipantCount: r,
	          cumulativeParticipantCount: e
	        }), this._dispatchEvent("participantExited", this, t);
	      }
	    }, {
	      key: "_onUpdateCustomItems",
	      value: function (e) {
	        var e = e.payload,
	            t = e.customItems,
	            n = e.updatedAt;
	        e.updatedKeys, this._setCustomItems(t, n) && this._dispatchEvent("customItemsUpdated", t, n);
	      }
	    }, {
	      key: "_onDeleteCustomItems",
	      value: function (e) {
	        var e = e.payload,
	            t = e.customItems,
	            n = e.deletedAt;
	        e.deletedKeys, this._setCustomItems(t, n) && this._dispatchEvent("customItemsDeleted", t, n);
	      }
	    }, {
	      key: "_tryOpen",
	      value: function () {
	        var e, t;
	        this.host && this.host.state === D.HostState.CONNECTED && this.state === D.LiveEventState.ONGOING && (e = this.host.hostId, this._streams.has(e) ? t = this._streams.get(e) : (t = new i_(this, this._deviceManager, this._sender), this._streams.set(e, t)), t.openStream(), t.attach(e));
	      }
	    }, {
	      key: "_tryClose",
	      value: function () {}
	    }, {
	      key: "_startToSendAlive",
	      value: function () {
	        var t = this;
	        this.isActiveHost ? this._aliveIntervalId = setInterval(function () {
	          var e = Vl.createHostAlive(t.liveEventId, t.host.hostId);

	          t._sender.send(e);
	        }, 3e3) : this._aliveIntervalId = setInterval(function () {
	          var e = Vl.createAlive(t.liveEventId, t.currentLiveUser.participantId);

	          t._sender.send(e);
	        }, 9e4);
	      }
	    }, {
	      key: "_stopToSendAlive",
	      value: function () {
	        this._aliveIntervalId && (clearInterval(this._aliveIntervalId), delete this._aliveIntervalId);
	      }
	    }]), p;
	  }(),
	      a_ = function () {
	    function t(e) {
	      _(this, t), this._liveEvents = [], this._ctx = e;
	    }

	    var n, r;
	    return y(t, [{
	      key: "createLiveEvent",
	      value: (r = v(regeneratorRuntime.mark(function e(t) {
	        var n, r;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return n = Vl.createLiveEvent(Ye.SINGLE_HOST, t.userIdsForHost ? [].concat(F(t.userIdsForHost), [this.userId]) : [this.userId], t.title, t.coverUrl, t.coverFile), e.next = 3, this._ctx.commandRouter.send(n);

	            case 3:
	              return n = e.sent, r = n.payload.liveEvent, r = new s_({
	                deviceManager: this._ctx.deviceManager,
	                sender: this._ctx.commandRouter,
	                sb: this._ctx.sb,
	                userId: this.userId,
	                info: r
	              }), e.prev = 6, e.next = 9, r.fetchOpenChannel();

	            case 9:
	              e.next = 14;
	              break;

	            case 11:
	              e.prev = 11, e.t0 = e.catch(6), I.error("failed to fetch initial open channel");

	            case 14:
	              return this._liveEvents.push(r), e.abrupt("return", r);

	            case 16:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[6, 11]]);
	      })), function (e) {
	        return r.apply(this, arguments);
	      })
	    }, {
	      key: "getLiveEvent",
	      value: (n = v(regeneratorRuntime.mark(function e(t) {
	        var n, r, i, s, a;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return n = Vl.createGetLiveEvent(t), e.next = 3, this._ctx.commandRouter.send(n);

	            case 3:
	              if (n = e.sent, r = n.payload.liveEvent, -1 < (i = this._liveEvents.findIndex(function (e) {
	                return e.liveEventId === t;
	              }))) return (s = this._liveEvents[i]).upsert(r), e.prev = 9, e.next = 12, s.fetchOpenChannel();
	              e.next = 20;
	              break;

	            case 12:
	              e.next = 17;
	              break;

	            case 14:
	              e.prev = 14, e.t0 = e.catch(9), I.error("failed to fetch initial open channel");

	            case 17:
	              return e.abrupt("return", s);

	            case 20:
	              return a = new s_({
	                deviceManager: this._ctx.deviceManager,
	                sender: this._ctx.commandRouter,
	                sb: this._ctx.sb,
	                userId: this.userId,
	                info: r
	              }), e.prev = 21, e.next = 24, a.fetchOpenChannel();

	            case 24:
	              e.next = 29;
	              break;

	            case 26:
	              e.prev = 26, e.t1 = e.catch(21), I.error("failed to fetch initial open channel");

	            case 29:
	              return this._liveEvents.push(a), e.abrupt("return", a);

	            case 31:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[9, 14], [21, 26]]);
	      })), function (e) {
	        return n.apply(this, arguments);
	      })
	    }, {
	      key: "clear",
	      value: function () {
	        this._liveEvents = [];
	        var e,
	            t = G(this._liveEvents);

	        try {
	          for (t.s(); !(e = t.n()).done;) e.value.teardown();
	        } catch (e) {
	          t.e(e);
	        } finally {
	          t.f();
	        }
	      }
	    }]), t;
	  }(),
	      o_ = pe,
	      u_ = ye,
	      c_ = rt,
	      l_ = Ae,
	      h_ = TypeError,
	      ci = Me,
	      d_ = {
	    left: Sv(!1),
	    right: Sv(!0)
	  }.left,
	      i = gt,
	      ri = ds,
	      a = (ci({
	    target: "Array",
	    proto: !0,
	    forced: !dc("reduce") || !ri && 79 < i && i < 83
	  }, {
	    reduce: function (e) {
	      var t = arguments.length;
	      return d_(this, e, t, 1 < t ? arguments[1] : void 0);
	    }
	  }), Me),
	      f_ = li.find,
	      s = Ps,
	      kt = "find",
	      p_ = !0,
	      hs = (kt in [] && Array(1)[kt](function () {
	    p_ = !1;
	  }), a({
	    target: "Array",
	    proto: !0,
	    forced: p_
	  }, {
	    find: function (e) {
	      return f_(this, e, 1 < arguments.length ? arguments[1] : void 0);
	    }
	  }), s(kt), function () {
	    function n(e, t) {
	      _(this, n), this.key = e, this.value = t;
	    }

	    return y(n, [{
	      key: "toString",
	      value: function () {
	        return this.key;
	      }
	    }, {
	      key: "equals",
	      value: function (e) {
	        return this.value.width === e.value.width && this.value.height === e.value.height;
	      }
	    }]), n;
	  }()),
	      v_ = (m(hs, "_720P", new hs("_720P", {
	    width: 1280,
	    height: 720
	  })), m(hs, "_540P", new hs("_540P", {
	    width: 960,
	    height: 540
	  })), m(hs, "_480P", new hs("_480P", {
	    width: 848,
	    height: 480
	  })), m(hs, "_360P", new hs("_360P", {
	    width: 640,
	    height: 360
	  })), hs._720P),
	      __ = function () {
	    g(i, Eh);
	    var r = b(i);

	    function i(e, t) {
	      var n;
	      return _(this, i), m(E(n = r.call(this)), "hasPermission", !1), n._streamManger = e, n.constraints = t, n;
	    }

	    return y(i, [{
	      key: "stream",
	      get: function () {
	        return this._streamManger.stream;
	      }
	    }, {
	      key: "dispose",
	      value: function () {
	        var e;
	        this.removeAllEventListeners(), null != (e = this.onDisposed) && e.call(this);
	      }
	    }, {
	      key: "streamChanged",
	      value: function (e) {
	        this._dispatchEvent("streamChanged", e);
	      }
	    }, {
	      key: "audioOutputChanged",
	      value: function () {
	        this._dispatchEvent("audioOutputChanged");
	      }
	    }]), i;
	  }(),
	      y_ = Ze,
	      m_ = we,
	      g_ = Ne,
	      E_ = zi,
	      b_ = ue,
	      I_ = ve,
	      w_ = Sh,
	      T_ = Ch;

	  Th("match", function (r, o, u) {
	    return [function (e) {
	      var t = b_(this),
	          n = null == e ? void 0 : I_(e, r);
	      return n ? y_(n, e, t) : new RegExp(e)[r](E_(t));
	    }, function (e) {
	      var t = m_(this),
	          n = E_(e),
	          e = u(o, t, n);
	      if (e.done) return e.value;
	      if (!t.global) return T_(t, n);

	      for (var r = t.unicode, i = [], s = t.lastIndex = 0; null !== (a = T_(t, n));) {
	        var a = E_(a[0]);
	        "" === (i[s] = a) && (t.lastIndex = w_(n, g_(t.lastIndex), r)), s++;
	      }

	      return 0 === s ? null : i;
	    }];
	  });

	  function S_(e, t) {
	    var n, r, i, s, a;
	    t.audio && 0 === e.getAudioTracks().length && e.addTrack((i = C_ = C_ || new (window.AudioContext || window.webkitAudioContext)(), k_ = i.createOscillator(), n = i.createMediaStreamDestination(), (r = i.createGain()).gain.setValueAtTime(0, i.currentTime), k_.connect(r).connect(n), k_.start(), O_ = n.stream.getAudioTracks()[0], n.stream.getAudioTracks()[0])), t.video && 0 === e.getVideoTracks().length && e.addTrack((i = x(x({}, v_.value), {}, {
	      frameRate: 24
	    }), s = i.width, a = i.height, i = i.frameRate, (N_ = N_ || document.createElement("canvas")).width = s, N_.height = a, N_.getContext("2d").fillRect(0, 0, s, a), A_ = A_ || setInterval(function () {
	      N_.getContext("2d").fillRect(0, 0, s, a);
	    }, 1e3), i = N_.captureStream(i), R_ = i.getVideoTracks()[0], i.getVideoTracks()[0]));
	  }

	  var C_,
	      k_,
	      N_,
	      A_,
	      O_,
	      R_,
	      Xe = te,
	      Kt = et,
	      D_ = zi,
	      M_ = aa.trim,
	      $e = Wn,
	      x_ = K.parseInt,
	      Et = K.Symbol,
	      L_ = Et && Et.iterator,
	      P_ = /^[+-]?0x/i,
	      U_ = Kt(P_.exec),
	      Ft = 8 !== x_($e + "08") || 22 !== x_($e + "0x16") || L_ && !Xe(function () {
	    x_(Object(L_));
	  }) ? function (e, t) {
	    e = M_(D_(e));
	    return x_(e, t >>> 0 || (U_(P_, e) ? 16 : 10));
	  } : x_;
	  Me({
	    global: !0,
	    forced: parseInt != Ft
	  }, {
	    parseInt: Ft
	  });

	  function q_() {
	    O_ && O_.stop(), R_ && R_.stop(), R_ = O_ = null, A_ && (clearInterval(A_), A_ = null), k_ && (k_.onended = function () {
	      k_.disconnect(), k_ = null;
	    }, k_.stop());
	  }

	  function F_(e) {
	    if (e) {
	      var t,
	          n = G(e.getTracks());

	      try {
	        for (n.s(); !(t = n.n()).done;) t.value.stop();
	      } catch (e) {
	        n.e(e);
	      } finally {
	        n.f();
	      }
	    }
	  }

	  function j_(e, t, n) {
	    return (e = e.match(t)) && e.length >= n && parseInt(e[n], 10);
	  }

	  var H_ = "safari" === function () {
	    var e = {
	      browser: null,
	      version: null
	    };
	    if ("undefined" == typeof window || !window.navigator) return e.browser = "Not a browser.", e;
	    var t = window.navigator;
	    if (t.mozGetUserMedia) e.browser = "firefox", e.version = j_(t.userAgent, /Firefox\/(\d+)\./, 1);else if (t.webkitGetUserMedia || !1 === window.isSecureContext && window.webkitRTCPeerConnection && !window.RTCIceGatherer) e.browser = "chrome", e.version = j_(t.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);else if (t.mediaDevices && t.userAgent.match(/Edge\/(\d+).(\d+)$/)) e.browser = "edge", e.version = j_(t.userAgent, /Edge\/(\d+).(\d+)$/, 2);else {
	      if (!window.RTCPeerConnection || !t.userAgent.match(/AppleWebKit\/(\d+)\./)) return e.browser = "Not a supported browser.", e;
	      e.browser = "safari", e.version = j_(t.userAgent, /AppleWebKit\/(\d+)\./, 1), e.supportsUnifiedPlan = window.RTCRtpTransceiver && "currentDirection" in window.RTCRtpTransceiver.prototype;
	    }
	    return e;
	  }().browser,
	      G_ = function () {
	    function t(e) {
	      _(this, t), m(this, "_hasPermission", !1), this._deviceManager = e, this._updateQueued = !1;
	    }

	    var e;
	    return y(t, [{
	      key: "updateStream",
	      value: (e = v(regeneratorRuntime.mark(function e() {
	        var t, n, r, i, s, a, o, u, c;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (this._updateAt) return this._updateQueued = !0, e.abrupt("return");
	              e.next = 3;
	              break;

	            case 3:
	              if (t = this._deviceManager.mediaAccesses.some(function (e) {
	                return e.constraints.audio;
	              }), n = this._deviceManager.mediaAccesses.some(function (e) {
	                return e.constraints.video;
	              }), t || n) {
	                e.next = 9;
	                break;
	              }

	              return F_(this.stream), q_(), e.abrupt("return");

	            case 9:
	              return this._updateAt = Date.now(), (r = this.stream) || (s = new MediaStream(), S_(s, {
	                audio: t,
	                video: n
	              }), this.stream = s), H_ && F_(r), e.prev = 13, e.next = 16, this._deviceManager.getMediaConstraints({
	                usingAudio: t,
	                usingVideo: n
	              });

	            case 16:
	              return s = e.sent, e.next = 19, navigator.mediaDevices.getUserMedia(s);

	            case 19:
	              i = e.sent, this._hasPermission = !0, a = G(this._deviceManager.mediaAccesses);

	              try {
	                for (a.s(); !(o = a.n()).done;) o.value.hasPermission = !0;
	              } catch (e) {
	                a.e(e);
	              } finally {
	                a.f();
	              }

	              q_(), e.next = 29;
	              break;

	            case 26:
	              e.prev = 26, e.t0 = e.catch(13), i = new MediaStream();

	            case 29:
	              S_(i, {
	                audio: t,
	                video: n
	              }), H_ || F_(r), this.stream = i, u = G(this._deviceManager.mediaAccesses);

	              try {
	                for (u.s(); !(c = u.n()).done;) c.value.streamChanged(this.stream);
	              } catch (e) {
	                u.e(e);
	              } finally {
	                u.f();
	              }

	              delete this._updateAt, this._updateQueued ? (this._updateQueued = !1, this.updateStream()) : this._deviceManager.refreshMediaDevices({
	                audio: t,
	                video: n
	              }, !0);

	            case 36:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[13, 26]]);
	      })), function () {
	        return e.apply(this, arguments);
	      })
	    }]), t;
	  }();

	  function V_(e, t) {
	    return (null == e ? void 0 : e.deviceId) === (null == t ? void 0 : t.deviceId) && (null == e ? void 0 : e.label) === (null == t ? void 0 : t.label) && (null == e ? void 0 : e.groupId) === (null == t ? void 0 : t.groupId);
	  }

	  var B_ = function () {
	    function t() {
	      var e = this;
	      _(this, t), this.mediaAccesses = [], this._availableMediaDevices = {
	        audioinput: [],
	        audiooutput: [],
	        videoinput: []
	      }, this._currentMediaDevices = {
	        audioinput: void 0,
	        audiooutput: void 0,
	        videoinput: void 0
	      }, this._sendbirdCallListeners = new Map(), this._streamManager = new G_(this), navigator.mediaDevices.ondevicechange = function () {
	        return e._onDeviceChanged();
	      };
	    }

	    var n, r, e, i;
	    return y(t, [{
	      key: "_onDeviceChanged",
	      value: function () {
	        0 !== this.mediaAccesses.length && this.refreshMediaDevices({
	          audio: this.mediaAccesses.some(function (e) {
	            return e.constraints.audio;
	          }),
	          video: this.mediaAccesses.some(function (e) {
	            return e.constraints.video;
	          })
	        });
	      }
	    }, {
	      key: "addSendBirdCallListener",
	      value: function (e, t) {
	        this._sendbirdCallListeners.set(e, t);
	      }
	    }, {
	      key: "removeSendBirdCallListener",
	      value: function (e) {
	        this._sendbirdCallListeners.delete(e);
	      }
	    }, {
	      key: "removeAllSendBirdCallListener",
	      value: function () {
	        this._sendbirdCallListeners.clear();
	      }
	    }, {
	      key: "getCurrentAudioInputDevice",
	      value: function () {
	        return this._currentMediaDevices.audioinput;
	      }
	    }, {
	      key: "getCurrentAudioOutputDevice",
	      value: function () {
	        return this._currentMediaDevices.audiooutput;
	      }
	    }, {
	      key: "getCurrentVideoInputDevice",
	      value: function () {
	        return this._currentMediaDevices.videoinput;
	      }
	    }, {
	      key: "getAvailableAudioInputDevices",
	      value: function () {
	        return this._availableMediaDevices.audioinput;
	      }
	    }, {
	      key: "getAvailableAudioOutputDevices",
	      value: function () {
	        return this._availableMediaDevices.audiooutput;
	      }
	    }, {
	      key: "getAvailableVideoInputDevices",
	      value: function () {
	        return this._availableMediaDevices.videoinput;
	      }
	    }, {
	      key: "_updateStream",
	      value: (i = v(regeneratorRuntime.mark(function e() {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.abrupt("return", this._streamManager.updateStream());

	            case 1:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return i.apply(this, arguments);
	      })
	    }, {
	      key: "_registerMediaAccess",
	      value: function (e) {
	        var t = this;
	        this.mediaAccesses.push(e), e.onDisposed = function () {
	          return t.stopMedia(e);
	        };
	      }
	    }, {
	      key: "useMedia",
	      value: function (e) {
	        {
	          if (e.audio || e.video) return e = new __(this._streamManager, e), this._registerMediaAccess(e), this._updateStream(), e;
	          I.error(new Error("you should set true for at least 1 media type."));
	        }
	      }
	    }, {
	      key: "stopMedia",
	      value: function (e) {
	        this.mediaAccesses.splice(this.mediaAccesses.indexOf(e), 1), this._updateStream();
	      }
	    }, {
	      key: "fetchMediaDevices",
	      value: (e = v(regeneratorRuntime.mark(function e() {
	        var t;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, navigator.mediaDevices.enumerateDevices();

	            case 2:
	              return t = e.sent, e.abrupt("return", t.reduce(function (e, t) {
	                return e[t.kind].push(t), e;
	              }, {
	                audioinput: [],
	                audiooutput: [],
	                videoinput: []
	              }));

	            case 4:
	            case "end":
	              return e.stop();
	          }
	        }, e);
	      })), function () {
	        return e.apply(this, arguments);
	      })
	    }, {
	      key: "getMediaConstraints",
	      value: (r = v(regeneratorRuntime.mark(function e(t) {
	        var n, r, i, s, a;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return n = t.usingAudio, r = t.usingVideo, i = {
	                audio: !1,
	                video: !1
	              }, e.next = 4, this.fetchMediaDevices();

	            case 4:
	              return s = e.sent, a = s.audioinput, s = s.videoinput, n && a.length && (a = this.getCurrentAudioInputDevice(), i.audio = {
	                deviceId: null == a ? void 0 : a.deviceId
	              }), r && s.length && (a = this.getCurrentVideoInputDevice(), i.video = x(x({
	                deviceId: null == a ? void 0 : a.deviceId
	              }, v_.value), {}, {
	                frameRate: 24
	              })), e.abrupt("return", i);

	            case 10:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return r.apply(this, arguments);
	      })
	    }, {
	      key: "_updateCurrentMediaDevice",
	      value: function (e, t) {
	        var n,
	            r = this._availableMediaDevices[e],
	            i = this._currentMediaDevices[e],
	            s = r.find(function (e) {
	          return e.deviceId === (null == t ? void 0 : t.deviceId);
	        });
	        return s || (I.warning("Selected device is unavailable. fallback to default device."), s = (null != (n = s) ? n : 0 < r.length) ? r[0] : null), !V_(i, this._currentMediaDevices[e] = s);
	      }
	    }, {
	      key: "_onAudioOutputChanged",
	      value: function () {
	        var e,
	            t = G(this.mediaAccesses);

	        try {
	          for (t.s(); !(e = t.n()).done;) {
	            var n = e.value;
	            n.constraints.audio && n.audioOutputChanged();
	          }
	        } catch (e) {
	          t.e(e);
	        } finally {
	          t.f();
	        }
	      }
	    }, {
	      key: "selectDevice",
	      value: function (e, t) {
	        t.kind !== e ? I.error(new Error("Tried to select invalid device of type")) : this._updateCurrentMediaDevice(e, t) && ("audioinput" !== e && "videoinput" !== e || this._updateStream(), "audiooutput" === e && this._onAudioOutputChanged());
	      }
	    }, {
	      key: "_updateAvailableDevices",
	      value: function (e, t) {
	        var n,
	            r,
	            i,
	            s = this._currentMediaDevices[e];
	        if (!!function (e, t) {
	          if (e.length === t.length) {
	            for (var n = 0; n < t.length; n++) if (!V_(e[n], t[n])) return;

	            return 1;
	          }
	        }(this._availableMediaDevices[e], t)) return !1;
	        this._availableMediaDevices[e] = t, s = this._updateCurrentMediaDevice(e, s);
	        var a,
	            o = G(this._sendbirdCallListeners.values());

	        try {
	          for (o.s(); !(a = o.n()).done;) {
	            var u = a.value,
	                c = this._currentMediaDevices[e];

	            switch (e) {
	              case "audioinput":
	                null != (n = u.onAudioInputDeviceChanged) && n.call(u, c, t);
	                break;

	              case "audiooutput":
	                null != (r = u.onAudioOutputDeviceChanged) && r.call(u, c, t);
	                break;

	              case "videoinput":
	                null != (i = u.onVideoInputDeviceChanged) && i.call(u, c, t);
	            }
	          }
	        } catch (e) {
	          o.e(e);
	        } finally {
	          o.f();
	        }

	        return s;
	      }
	    }, {
	      key: "refreshMediaDevices",
	      value: (n = v(regeneratorRuntime.mark(function e(t) {
	        var n,
	            r,
	            i,
	            s,
	            a,
	            o,
	            u,
	            c,
	            l = arguments;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (n = t.audio, r = t.video, i = 1 < l.length && void 0 !== l[1] && l[1], n || r) {
	                e.next = 4;
	                break;
	              }

	              throw new Error("at least one of the audio or video must be true");

	            case 4:
	              return e.next = 6, this.fetchMediaDevices();

	            case 6:
	              o = e.sent, s = o.audioinput, a = o.audiooutput, o = o.videoinput, c = u = !1, n && (u = this._updateAvailableDevices("audioinput", s), c = this._updateAvailableDevices("audiooutput", a)), r && (u = this._updateAvailableDevices("videoinput", o) || u), !i && u && this._updateStream(), c && this._onAudioOutputChanged();

	            case 16:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return n.apply(this, arguments);
	      })
	    }]), t;
	  }(),
	      K_ = "v1.0.0-beta.3",
	      Q_ = function () {
	    function t(e) {
	      _(this, t), this._parse = e;
	    }

	    return y(t, [{
	      key: "parseToJson",
	      value: function (e) {
	        try {
	          return JSON.parse(e);
	        } catch (e) {
	          return {};
	        }
	      }
	    }, {
	      key: "validate",
	      value: function (e) {
	        var t = e.cmd,
	            n = e.request_id,
	            e = e.call_type;
	        return !!(n || t || e);
	      }
	    }, {
	      key: "parseCommand",
	      value: function (e) {
	        return e.error ? {
	          isValid: !0,
	          error: {
	            requestId: e.request_id,
	            message: e.message,
	            code: e.code
	          }
	        } : {
	          isValid: !0,
	          command: this._parse(e)
	        };
	      }
	    }, {
	      key: "parse",
	      value: function (e) {
	        e = this.parseToJson(e);
	        return this.validate(e) ? this.parseCommand(e) : {
	          isValid: !1
	        };
	      }
	    }]), t;
	  }(),
	      z_ = function () {
	    g(r, Eh);
	    var n = b(r);

	    function r(e) {
	      var t;
	      return _(this, r), (t = n.call(this))._ctx = e, t._ws = null, t._retryTimer = null, t._closed = !0, t._sessionKey = null, t._requestMap = new qv(t._getTimeoutTime()), t._messageParser = new Q_(t._ctx.parse), t._hostUrl = null != (e = t._ctx.websocketHost) ? e : "wss://ws-IDENTIFIER.calls.sendbird.com".replace("IDENTIFIER", t._ctx.appId), t;
	    }

	    return y(r, [{
	      key: "connect",
	      value: function () {
	        var r = this;
	        return new Promise(function (e, t) {
	          r._sessionKey || t(new Error("tried to connect to websocket server without auth")), r._ws = r._createWebSocket(), r._closed = !1, r._ws.onopen = function () {
	            r._onOpen(), e(null);
	          }, r._ws.onmessage = function (e) {
	            var e = r._messageParser.parse(e.data),
	                t = e.isValid,
	                n = e.error,
	                e = e.command;

	            t && (n ? r._processError(n) : r.processCommand(e));
	          }, r._ws.onerror = function (e) {
	            return r._onError(e);
	          }, r._ws.onclose = function () {
	            r._onClose(), t(new Error("websocket connection failed"));
	          };
	        });
	      }
	    }, {
	      key: "_processError",
	      value: function (e) {
	        var t = e.requestId,
	            e = (e.code, e.message),
	            t = this._requestMap.unregister(t);

	        t && t.reject(new Error(e));
	      }
	    }, {
	      key: "processCommand",
	      value: function (e) {
	        this._dispatchEvent("command", e);
	      }
	    }, {
	      key: "setSessionKey",
	      value: function (e) {
	        this._sessionKey = e;
	      }
	    }, {
	      key: "clearSessionKey",
	      value: function () {
	        this._disconnect(), this._sessionKey = null;
	      }
	    }, {
	      key: "_disconnect",
	      value: function () {
	        this._ws && (this._closed = !0, this._removeRetryTimer(), this._ws.onopen = null, this._ws.onmessage = null, this._ws.onerror = null, this._ws.onclose = null, this._ws.close(), this._requestMap.rejectAll(new Error("request failed due to websocket connection lost")), this._ws = null);
	      }
	    }, {
	      key: "isConnected",
	      get: function () {
	        return !!this._ws && 1 === this._ws.readyState;
	      }
	    }, {
	      key: "_onOpen",
	      value: function () {}
	    }, {
	      key: "_onError",
	      value: function (e) {}
	    }, {
	      key: "_onClose",
	      value: function () {
	        this._startToReconnect();
	      }
	    }, {
	      key: "_createWebSocket",
	      value: function () {
	        var e = "/?sbcall_session_token=".concat(encodeURIComponent(this._sessionKey), "&sbcall_client_id=").concat(encodeURIComponent(this._ctx.clientId), "&sendbird=").concat(encodeURIComponent(this._getVersion()));
	        return new WebSocket(this._getHost() + e);
	      }
	    }, {
	      key: "_getVersion",
	      value: function () {
	        return "JS,".concat(this._getOsVersion(), ",").concat(K_);
	      }
	    }, {
	      key: "_getHost",
	      value: function () {
	        return this._hostUrl;
	      }
	    }, {
	      key: "_startToReconnect",
	      value: function () {
	        this._closed || this._retryTimer || (this._retryTimer = setTimeout(this._reconnect.bind(this), this._getRetryTime()));
	      }
	    }, {
	      key: "_reconnect",
	      value: function () {
	        this._removeRetryTimer(), this.connect().catch(function () {});
	      }
	    }, {
	      key: "_removeRetryTimer",
	      value: function () {
	        this._retryTimer && (clearTimeout(this._retryTimer), this._retryTimer = null);
	      }
	    }, {
	      key: "_getTimeoutTime",
	      value: function () {
	        return 6e4;
	      }
	    }, {
	      key: "_getRetryTime",
	      value: function () {
	        return 2e3;
	      }
	    }, {
	      key: "_getOsVersion",
	      value: function () {
	        return "undefined" != typeof navigator && navigator.userAgent ? navigator.userAgent.replace(/,/g, ".") : "undefined";
	      }
	    }]), r;
	  }(),
	      W_ = function () {
	    function t(e) {
	      _(this, t), this._ctx = e, this._fetch = function () {
	        var e;
	        return (e = window).fetch.apply(e, arguments);
	      }, this._sessionKey = null, this._hostUrl = null != (e = this._ctx.apiHost) ? e : "https://api-IDENTIFIER.calls.sendbird.com".replace("IDENTIFIER", this._ctx.appId);
	    }

	    var n;
	    return y(t, [{
	      key: "setSessionKey",
	      value: function (e) {
	        this._sessionKey = e;
	      }
	    }, {
	      key: "clearSessionKey",
	      value: function () {
	        this._sessionKey = null;
	      }
	    }, {
	      key: "send",
	      value: (n = v(regeneratorRuntime.mark(function e(t) {
	        var n, r, i, s, a;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              if (t.getApiOption) {
	                e.next = 2;
	                break;
	              }

	              throw new Error("invalid api request ".concat(JSON.stringify(t)));

	            case 2:
	              if ((n = t.getApiOption()).auth && !this._sessionKey) throw new Error("tried to call private api without auth");
	              e.next = 5;
	              break;

	            case 5:
	              return i = x({}, n.headers), n.body instanceof FormData || (i["Content-Type"] = "application/json"), i.SendBird = "JS,".concat(this._getOsVersion(), ",").concat(K_), i["SBCall-Client-Id"] = this._ctx.clientId, this._sessionKey && (i["SBCall-Session-Token"] = this._sessionKey), e.next = 12, this._fetch("".concat(this._getHost()).concat(n.path), {
	                method: n.method,
	                body: n.body instanceof FormData ? n.body : JSON.stringify(n.body),
	                headers: i
	              });

	            case 12:
	              return r = e.sent, e.next = 15, r.text();

	            case 15:
	              i = e.sent, s = null, e.prev = 17, s = JSON.parse(i), e.next = 24;
	              break;

	            case 21:
	              throw e.prev = 21, e.t0 = e.catch(17), new Error("malformed data");

	            case 24:
	              if (r.ok) {
	                e.next = 34;
	                break;
	              }

	              if (s.error) throw new Error("server error");
	              e.next = 29;
	              break;

	            case 29:
	              if (500 === r.status) throw new Error("internal server error");
	              e.next = 31;
	              break;

	            case 31:
	              if (300 <= r.status && r.status < 400) throw new Error("malformed data");
	              e.next = 33;
	              break;

	            case 33:
	              throw new Error("request failed");

	            case 34:
	              if (e.prev = 34, a = this._ctx.parseResponse(t, s)) return e.abrupt("return", a);
	              e.next = 38;
	              break;

	            case 38:
	              e.next = 43;
	              break;

	            case 40:
	              return e.prev = 40, e.t1 = e.catch(34), e.abrupt("return", s);

	            case 43:
	              return e.abrupt("return", s);

	            case 44:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[17, 21], [34, 40]]);
	      })), function (e) {
	        return n.apply(this, arguments);
	      })
	    }, {
	      key: "_getHost",
	      value: function () {
	        return this._hostUrl;
	      }
	    }, {
	      key: "_getOsVersion",
	      value: function () {
	        return "undefined" != typeof navigator && navigator.userAgent ? navigator.userAgent.replace(/,/g, ".") : "undefined";
	      }
	    }]), t;
	  }(),
	      Y_ = function (e, t) {
	    return (Y_ = Object.setPrototypeOf || {
	      __proto__: []
	    } instanceof Array && function (e, t) {
	      e.__proto__ = t;
	    } || function (e, t) {
	      for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
	    })(e, t);
	  };

	  function o(e, t) {
	    if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");

	    function n() {
	      this.constructor = e;
	    }

	    Y_(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n());
	  }

	  var f = function () {
	    return (f = Object.assign || function (e) {
	      for (var t, n = 1, r = arguments.length; n < r; n++) for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);

	      return e;
	    }).apply(this, arguments);
	  };

	  function re(e, a, o, u) {
	    return new (o = o || Promise)(function (n, t) {
	      function r(e) {
	        try {
	          s(u.next(e));
	        } catch (e) {
	          t(e);
	        }
	      }

	      function i(e) {
	        try {
	          s(u.throw(e));
	        } catch (e) {
	          t(e);
	        }
	      }

	      function s(e) {
	        var t;
	        e.done ? n(e.value) : ((t = e.value) instanceof o ? t : new o(function (e) {
	          e(t);
	        })).then(r, i);
	      }

	      s((u = u.apply(e, a || [])).next());
	    });
	  }

	  function ie(r, i) {
	    var s,
	        a,
	        o,
	        u = {
	      label: 0,
	      sent: function () {
	        if (1 & o[0]) throw o[1];
	        return o[1];
	      },
	      trys: [],
	      ops: []
	    },
	        e = {
	      next: t(0),
	      throw: t(1),
	      return: t(2)
	    };
	    return "function" == typeof Symbol && (e[Symbol.iterator] = function () {
	      return this;
	    }), e;

	    function t(n) {
	      return function (e) {
	        var t = [n, e];
	        if (s) throw new TypeError("Generator is already executing.");

	        for (; u;) try {
	          if (s = 1, a && (o = 2 & t[0] ? a.return : t[0] ? a.throw || ((o = a.return) && o.call(a), 0) : a.next) && !(o = o.call(a, t[1])).done) return o;

	          switch (a = 0, (t = o ? [2 & t[0], o.value] : t)[0]) {
	            case 0:
	            case 1:
	              o = t;
	              break;

	            case 4:
	              return u.label++, {
	                value: t[1],
	                done: !1
	              };

	            case 5:
	              u.label++, a = t[1], t = [0];
	              continue;

	            case 7:
	              t = u.ops.pop(), u.trys.pop();
	              continue;

	            default:
	              if (!((o = 0 < (o = u.trys).length && o[o.length - 1]) || 6 !== t[0] && 2 !== t[0])) {
	                u = 0;
	                continue;
	              }

	              if (3 === t[0] && (!o || t[1] > o[0] && t[1] < o[3])) {
	                u.label = t[1];
	                break;
	              }

	              if (6 === t[0] && u.label < o[1]) {
	                u.label = o[1], o = t;
	                break;
	              }

	              if (o && u.label < o[2]) {
	                u.label = o[2], u.ops.push(t);
	                break;
	              }

	              o[2] && u.ops.pop(), u.trys.pop();
	              continue;
	          }

	          t = i.call(r, u);
	        } catch (e) {
	          t = [6, e], a = 0;
	        } finally {
	          s = o = 0;
	        }

	        if (5 & t[0]) throw t[1];
	        return {
	          value: t[0] ? t[1] : void 0,
	          done: !0
	        };
	      };
	    }
	  }

	  function se(e) {
	    var t = "function" == typeof Symbol && Symbol.iterator,
	        n = t && e[t],
	        r = 0;
	    if (n) return n.call(e);
	    if (e && "number" == typeof e.length) return {
	      next: function () {
	        return {
	          value: (e = e && r >= e.length ? void 0 : e) && e[r++],
	          done: !e
	        };
	      }
	    };
	    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
	  }

	  function X_(e, t) {
	    var n = "function" == typeof Symbol && e[Symbol.iterator];
	    if (!n) return e;
	    var r,
	        i,
	        s = n.call(e),
	        a = [];

	    try {
	      for (; (void 0 === t || 0 < t--) && !(r = s.next()).done;) a.push(r.value);
	    } catch (e) {
	      i = {
	        error: e
	      };
	    } finally {
	      try {
	        r && !r.done && (n = s.return) && n.call(s);
	      } finally {
	        if (i) throw i.error;
	      }
	    }

	    return a;
	  }

	  function J_(e, t, n) {
	    if (n || 2 === arguments.length) for (var r, i = 0, s = t.length; i < s; i++) !r && i in t || ((r = r || Array.prototype.slice.call(t, 0, i))[i] = t[i]);
	    return e.concat(r || Array.prototype.slice.call(t));
	  }

	  Object.defineProperty($_, "OS_VERSION", {
	    get: function () {
	      return "undefined" != typeof navigator && navigator.userAgent ? navigator.userAgent.replace(/,/g, ".") : "noAgent";
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty($_, "SDK_VERSION", {
	    get: function () {
	      return "4.0.6";
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty($_, "SDK_MAJOR_VERSION", {
	    get: function () {
	      return $_.SDK_VERSION.split(".")[0];
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty($_, "DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL", {
	    get: function () {
	      return 100;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty($_, "INTERNAL_CALL", {
	    get: function () {
	      return "ic";
	    },
	    enumerable: !1,
	    configurable: !0
	  });
	  var d,
	      Z_ = $_;

	  function $_() {}

	  (r = d = d || {})[r.INVALID_TOKEN = 400111] = "INVALID_TOKEN", r[r.SESSION_KEY_EXPIRED = 400302] = "SESSION_KEY_EXPIRED", r[r.SESSION_TOKEN_EXPIRED = 400309] = "SESSION_TOKEN_EXPIRED", r[r.INTERNAL_SERVER_ERROR = 500901] = "INTERNAL_SERVER_ERROR", r[r.RATE_LIMIT_EXCEEDED = 500910] = "RATE_LIMIT_EXCEEDED", r[r.UNKNOWN_SERVER_ERROR = 900200] = "UNKNOWN_SERVER_ERROR", r[r.DEBUG_MODE_REQUIRED = 7e5] = "DEBUG_MODE_REQUIRED", r[r.LOST_INSTANCE = 700100] = "LOST_INSTANCE", r[r.CONNECTION_RENEW = 700102] = "CONNECTION_RENEW", r[r.INVALID_CONNECTION_STATE_TRANSITION = 700200] = "INVALID_CONNECTION_STATE_TRANSITION", r[r.INVALID_INITIALIZATION = 800100] = "INVALID_INITIALIZATION", r[r.CONNECTION_REQUIRED = 800101] = "CONNECTION_REQUIRED", r[r.CONNECTION_CANCELED = 800102] = "CONNECTION_CANCELED", r[r.INVALID_PARAMETER = 800110] = "INVALID_PARAMETER", r[r.NETWORK_ERROR = 800120] = "NETWORK_ERROR", r[r.NETWORK_ROUTING_ERROR = 800121] = "NETWORK_ROUTING_ERROR", r[r.MALFORMED_DATA = 800130] = "MALFORMED_DATA", r[r.MALFORMED_ERROR_DATA = 800140] = "MALFORMED_ERROR_DATA", r[r.WRONG_CHANNEL_TYPE = 800150] = "WRONG_CHANNEL_TYPE", r[r.MARK_AS_READ_RATE_LIMIT_EXCEEDED = 800160] = "MARK_AS_READ_RATE_LIMIT_EXCEEDED", r[r.QUERY_IN_PROGRESS = 800170] = "QUERY_IN_PROGRESS", r[r.ACK_TIMEOUT = 800180] = "ACK_TIMEOUT", r[r.LOGIN_TIMEOUT = 800190] = "LOGIN_TIMEOUT", r[r.WEBSOCKET_CONNECTION_CLOSED = 800200] = "WEBSOCKET_CONNECTION_CLOSED", r[r.WEBSOCKET_CONNECTION_FAILED = 800210] = "WEBSOCKET_CONNECTION_FAILED", r[r.REQUEST_FAILED = 800220] = "REQUEST_FAILED", r[r.FILE_UPLOAD_CANCEL_FAILED = 800230] = "FILE_UPLOAD_CANCEL_FAILED", r[r.REQUEST_CANCELED = 800240] = "REQUEST_CANCELED", r[r.REQUEST_DUPLICATED = 800250] = "REQUEST_DUPLICATED", r[r.FILE_SIZE_LIMIT_EXCEEDED = 800260] = "FILE_SIZE_LIMIT_EXCEEDED", r[r.SESSION_TOKEN_REQUEST_FAILED = 800500] = "SESSION_TOKEN_REQUEST_FAILED", r[r.SESSION_TOKEN_REFRESHED = 800501] = "SESSION_TOKEN_REFRESHED", r[r.SESSION_TOKEN_REFRESH_FAILED = 800502] = "SESSION_TOKEN_REFRESH_FAILED";

	  function ey(e) {
	    return !(e instanceof p && !e.shouldThrowOutside);
	  }

	  function ty(e, t) {
	    return e === t || (e = f({}, e), t = f({}, t), !(e.hasOwnProperty("messageId") && t.hasOwnProperty("messageId") && e.messageId !== t.messageId || e.hasOwnProperty("reqId") && t.hasOwnProperty("reqId") && e.reqId !== t.reqId || (e.hasOwnProperty("messageId") && delete e.messageId, e.hasOwnProperty("reqId") && delete e.reqId, t.hasOwnProperty("messageId") && delete t.messageId, t.hasOwnProperty("reqId") && delete t.reqId, JSON.stringify(e) !== JSON.stringify(t))));
	  }

	  function ny(e) {
	    return 0 < e && 0 <= cy.indexOf(e);
	  }

	  function ry(e, t) {
	    if ((t = void 0 === t ? !1 : t) && null === e) return !0;

	    if (!(t = c("object", e) && null !== e && e.hasOwnProperty("name") && "string" == typeof e.name && e.hasOwnProperty("uri") && "string" == typeof e.uri && e.hasOwnProperty("type") && "string" == typeof e.type)) {
	      if ("undefined" != typeof Blob) return e instanceof Blob;
	      if ("undefined" != typeof File) return e instanceof File;
	    }

	    return t;
	  }

	  function iy(e) {
	    var t = void 0 === (t = e.encryption) ? null : t,
	        n = void 0 === (n = e.store) ? null : n,
	        e = void 0 === (e = e.localCacheEnabled) || e;
	    this.nestdb = null, this.store = n, this.preference = new vy({
	      store: n
	    }), this.encryption = null != t ? t : py, this.localCacheEnabled = e;
	  }

	  function sy() {
	    var n = new Date().getTime();
	    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) {
	      var t = (n + 16 * Math.random()) % 16 | 0;
	      return n = Math.floor(n / 16), ("x" === e ? t : 3 & t | 8).toString(16);
	    });
	  }

	  function ay() {}

	  function w(t) {
	    var n = {};
	    return t && Object.keys(t).forEach(function (e) {
	      void 0 !== t[e] && NaN !== t[e] && null !== t[e] && (n[e] = t[e]);
	    }), n;
	  }

	  o(l, oy = Error), Object.defineProperty(l.prototype, "isInvalidTokenError", {
	    get: function () {
	      return this.code === d.INVALID_TOKEN;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l.prototype, "isSessionTokenExpiredError", {
	    get: function () {
	      return this.code === d.SESSION_TOKEN_EXPIRED;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l.prototype, "isSessionKeyExpiredError", {
	    get: function () {
	      return this.code === d.SESSION_KEY_EXPIRED;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "debugModeRequired", {
	    get: function () {
	      return new l({
	        code: d.DEBUG_MODE_REQUIRED,
	        message: "Cannot run this operation in production mode."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "lostInstance", {
	    get: function () {
	      return new l({
	        code: d.LOST_INSTANCE,
	        message: "Instance ID is missing. It should belong to an instance."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "connectionRenew", {
	    get: function () {
	      return new l({
	        code: d.CONNECTION_RENEW,
	        message: "Connection restarts."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "invalidConnectionStateTransition", {
	    get: function () {
	      return new l({
	        code: d.INVALID_CONNECTION_STATE_TRANSITION,
	        message: "Invalid connection state transition."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "connectionRequired", {
	    get: function () {
	      return new l({
	        code: d.CONNECTION_REQUIRED,
	        message: "Connection is required."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "connectionCanceled", {
	    get: function () {
	      return new l({
	        code: d.CONNECTION_CANCELED,
	        message: "Connection is canceled."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "invalidParameters", {
	    get: function () {
	      return new l({
	        code: d.INVALID_PARAMETER,
	        message: "Invalid parameters."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "networkError", {
	    get: function () {
	      return new l({
	        code: d.NETWORK_ERROR,
	        message: "There was a network error."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "markAsReadAllRateLimitExceeded", {
	    get: function () {
	      return new l({
	        code: d.MARK_AS_READ_RATE_LIMIT_EXCEEDED,
	        message: "markAsRead rate limit exceeded."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "queryInProgress", {
	    get: function () {
	      return new l({
	        code: d.QUERY_IN_PROGRESS,
	        message: "Query in progress."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "noAckTimeout", {
	    get: function () {
	      return new l({
	        code: d.ACK_TIMEOUT,
	        message: "Command received no ack."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "loginTimeout", {
	    get: function () {
	      return new l({
	        code: d.LOGIN_TIMEOUT,
	        message: "Connection timeout."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "connectionClosed", {
	    get: function () {
	      return new l({
	        code: d.WEBSOCKET_CONNECTION_CLOSED,
	        message: "Connection is closed. Please reconnect."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "requestFailed", {
	    get: function () {
	      return new l({
	        code: d.REQUEST_FAILED,
	        message: "Request failed."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "fileUploadCanceled", {
	    get: function () {
	      return new l({
	        code: d.FILE_UPLOAD_CANCEL_FAILED,
	        message: "File upload has been canceled."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "requestCanceled", {
	    get: function () {
	      return new l({
	        code: d.REQUEST_CANCELED,
	        message: "Request has been canceled."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "sessionTokenRefreshFailed", {
	    get: function () {
	      return new l({
	        code: d.SESSION_TOKEN_REFRESH_FAILED,
	        message: "Failed to refresh the session key."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(l, "sessionTokenRequestFailed", {
	    get: function () {
	      return new l({
	        code: d.SESSION_TOKEN_REQUEST_FAILED,
	        message: "Failed to get the session token."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), l.prototype.throwOutside = function () {
	    throw this.shouldThrowOutside = !0, this;
	  };

	  var T,
	      oy,
	      p = l,
	      uy = [d.CONNECTION_REQUIRED, d.NETWORK_ERROR, d.ACK_TIMEOUT, d.WEBSOCKET_CONNECTION_CLOSED, d.WEBSOCKET_CONNECTION_FAILED, d.FILE_UPLOAD_CANCEL_FAILED, d.REQUEST_CANCELED, d.INTERNAL_SERVER_ERROR, d.RATE_LIMIT_EXCEEDED, d.UNKNOWN_SERVER_ERROR],
	      cy = [d.WEBSOCKET_CONNECTION_CLOSED, d.WEBSOCKET_CONNECTION_FAILED, d.CONNECTION_REQUIRED],
	      c = function (e, t, n) {
	    return !(!(n = void 0 === n ? !1 : n) || null != t) || ("string" != typeof e ? "object" == typeof e ? ly(e, t) : t instanceof e : typeof t === e);
	  },
	      ly = function (e, t, n) {
	    return !(!(n = void 0 === n ? !1 : n) || null != t) || Object.values(e).includes(t);
	  },
	      hy = function (t, e, n) {
	    return !(!(n = void 0 === n ? !1 : n) || null != e) || Array.isArray(e) && e.every(function (e) {
	      return c(t, e);
	    });
	  },
	      dy = (Object.defineProperty(Sy.prototype, "useMemberInfoInMessage", {
	    get: function () {
	      return this._useMemberInfoInMessage;
	    },
	    set: function (e) {
	      c("boolean", e) && (this._useMemberInfoInMessage = e);
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(Sy.prototype, "typingIndicatorInvalidateTime", {
	    get: function () {
	      return this._typingIndicatorInvalidateTime;
	    },
	    set: function (e) {
	      c("number", e) && (this._typingIndicatorInvalidateTime = e);
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(Sy.prototype, "typingIndicatorThrottle", {
	    get: function () {
	      return this._typingIndicatorThrottle;
	    },
	    set: function (e) {
	      c("number", e) && 1e3 <= e && e <= 9e3 && (this._typingIndicatorThrottle = e);
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(Sy.prototype, "websocketResponseTimeout", {
	    get: function () {
	      return this._websocketResponseTimeout;
	    },
	    set: function (e) {
	      c("number", e) && 5e3 <= e && e <= 3e4 && (this._websocketResponseTimeout = e);
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Sy),
	      fy = {
	    key: "__ev",
	    value: {
	      k: "__ev",
	      v: "scs"
	    },
	    generation: 1
	  },
	      py = {
	    encrypt: function (e) {
	      return e;
	    },
	    decrypt: function (e) {
	      return e;
	    }
	  },
	      vy = (Ty.prototype._savePreferenceKeys = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._store.set({
	              key: this._keysAddress,
	              value: J_([], X_(this._preference.keys()), !1),
	              generation: 1
	            })];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, Ty.prototype.init = function (u) {
	    var c;
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._keysAddress = u, [4, this._store.get(u)];

	          case 1:
	            t = null != (c = e.sent()) ? c : [], e.label = 2;

	          case 2:
	            e.trys.push([2, 7, 8, 9]), n = se(t), r = n.next(), e.label = 3;

	          case 3:
	            return r.done ? [3, 6] : (i = r.value, [4, this._store.get(i)]);

	          case 4:
	            (s = e.sent()) && this._preference.set(i, s), e.label = 5;

	          case 5:
	            return r = n.next(), [3, 3];

	          case 6:
	            return [3, 9];

	          case 7:
	            return s = e.sent(), a = {
	              error: s
	            }, [3, 9];

	          case 8:
	            try {
	              r && !r.done && (o = n.return) && o.call(n);
	            } finally {
	              if (a) throw a.error;
	            }

	            return [7];

	          case 9:
	            return [2];
	        }
	      });
	    });
	  }, Ty.prototype.get = function (t) {
	    var n;
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, null != (n = this._preference.get(t)) ? n : null];
	      });
	    });
	  }, Ty.prototype.set = function (n, r) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = !this._preference.has(n), [4, this._store.set({
	              key: n,
	              value: r,
	              generation: 1
	            })];

	          case 1:
	            return e.sent(), this._preference.set(n, r), t ? [4, this._savePreferenceKeys()] : [3, 3];

	          case 2:
	            e.sent(), e.label = 3;

	          case 3:
	            return [2];
	        }
	      });
	    });
	  }, Ty.prototype.remove = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._store.remove(t)];

	          case 1:
	            return e.sent(), this._preference.delete(t), [4, this._savePreferenceKeys()];

	          case 2:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, Ty.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._store.removeMany(J_([], X_(this._preference.keys()), !1))];

	          case 1:
	            return e.sent(), this._preference.clear(), [4, this._savePreferenceKeys()];

	          case 2:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, Ty),
	      _y = (Object.defineProperty(wy.prototype, "hasSession", {
	    get: function () {
	      return !!this.sessionKey;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), wy.prototype.clear = function () {
	    this.authToken = null, this.sessionKey = null;
	  }, wy),
	      yy = (Iy.prototype._register = function (e, t, n) {
	    return e in this._container || (this._container[e] = new Map()), this._container[e].set(this.key, {
	      occurence: t,
	      handler: n
	    }), this;
	  }, Iy.prototype.on = function (e, t) {
	    return this._register(e, -1, t);
	  }, Iy.prototype.once = function (e, t) {
	    return this._register(e, 1, t);
	  }, Iy.prototype.close = function () {
	    for (var e in this._container) this._container[e].delete(this.key);
	  }, Iy),
	      my = (by.prototype.on = function (e, t) {
	    return new yy({
	      container: this._container
	    }).on(e, t);
	  }, by.prototype.once = function (e, t) {
	    return new yy({
	      container: this._container
	    }).once(e, t);
	  }, by.prototype.dispatch = function (e, t) {
	    var n,
	        r,
	        i = this._container[e];

	    if (i) {
	      var s = [];

	      try {
	        for (var a = se(i.keys()), o = a.next(); !o.done; o = a.next()) {
	          var u = o.value,
	              c = i.get(u);
	          c.handler(t), 0 < c.occurence && (c.occurence--, 0 === c.occurence && s.push(u));
	        }
	      } catch (e) {
	        n = {
	          error: e
	        };
	      } finally {
	        try {
	          o && !o.done && (r = a.return) && r.call(a);
	        } finally {
	          if (n) throw n.error;
	        }
	      }

	      s.forEach(function (e) {
	        return i.delete(e);
	      });
	    }
	  }, by),
	      gy = (Ey.prototype.on = function (e) {
	    return this._dispatcher.on("event", e);
	  }, Ey.prototype.once = function (e) {
	    return this._dispatcher.once("event", e);
	  }, Ey.prototype.dispatch = function (e) {
	    this._dispatcher.dispatch("event", e);
	  }, Ey);

	  function Ey() {
	    this._dispatcher = new my();
	  }

	  function by() {
	    this._container = {};
	  }

	  function Iy(e) {
	    e = e.container;
	    this._container = {}, this._container = e, this.key = sy();
	  }

	  function wy() {
	    this.sessionKey = null, this.authToken = null;
	  }

	  function Ty(e) {
	    e = e.store;
	    this._preference = new Map(), this._store = e;
	  }

	  function Sy(e) {
	    var e = void 0 === e ? {} : e,
	        t = e.useMemberInfoInMessage,
	        t = void 0 !== t && t,
	        n = e.typingIndicatorInvalidateTime,
	        n = void 0 === n ? 1e4 : n,
	        r = e.typingIndicatorThrottle,
	        r = void 0 === r ? 1e3 : r,
	        e = e.websocketResponseTimeout,
	        e = void 0 === e ? 1e4 : e;
	    this._useMemberInfoInMessage = !1, this._typingIndicatorInvalidateTime = 1e4, this._typingIndicatorThrottle = 1e3, this._websocketResponseTimeout = 1e4, this._useMemberInfoInMessage = t, this._typingIndicatorInvalidateTime = n, this._typingIndicatorThrottle = r, this._websocketResponseTimeout = e;
	  }

	  function l(e) {
	    var t = e.code,
	        t = void 0 === t ? 0 : t,
	        e = e.message,
	        e = oy.call(this, e) || this;
	    return e.shouldThrowOutside = !1, e.name = "SendbirdError", e.code = t, Object.setPrototypeOf(e, l.prototype), e;
	  }

	  (It = T = T || {}).GET = "GET", It.POST = "POST", It.PUT = "PUT", It.DELETE = "DELETE";
	  o(Fy, Ry = ay), Fy.prototype.stringifyParams = function (e) {
	    return "object" != typeof e || Array.isArray(e) ? String(e) : e ? JSON.stringify(e) : "";
	  }, Object.defineProperty(Fy.prototype, "query", {
	    get: function () {
	      var t = this,
	          n = w(this.params);
	      return "?".concat(Object.keys(n).map(function (e) {
	        return "".concat(encodeURIComponent(e), "=").concat(encodeURIComponent(t.stringifyParams(n[e])));
	      }).join("&"));
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(Fy.prototype, "payload", {
	    get: function () {
	      var r,
	          i = this,
	          s = w(this.params);
	      return Object.keys(s).some(function (e) {
	        return ry(s[e]);
	      }) ? (r = new FormData(), Object.keys(s).forEach(function (e) {
	        var t,
	            n = s[e];
	        ry(n) ? r.append(e, n, null != (t = n.name) ? t : "filename") : r.append(e, i.stringifyParams(n));
	      }), r) : JSON.stringify(s);
	    },
	    enumerable: !1,
	    configurable: !0
	  });
	  var Cy,
	      ky,
	      Ny,
	      Ay,
	      Oy,
	      Ry,
	      h = Fy,
	      S = (o(qy, Oy = ay), Object.defineProperty(qy.prototype, "payload", {
	    get: function () {
	      return f({}, this._payload);
	    },
	    enumerable: !1,
	    configurable: !0
	  }), qy.prototype.as = function (e) {
	    return new e(this._iid, this.payload);
	  }, qy),
	      Dy = (o(Uy, Ay = ay), Uy),
	      My = (o(Py, Ny = ay), Py),
	      xy = (o(Ly, ky = ay), Ly);

	  function Ly(e) {
	    var t = ky.call(this) || this;
	    return t.statLog = e, t;
	  }

	  function Py() {
	    return null !== Ny && Ny.apply(this, arguments) || this;
	  }

	  function Uy(e) {
	    var t = Ay.call(this) || this;
	    return t.requestId = e, t;
	  }

	  function qy(e, t) {
	    var n = Oy.call(this) || this;
	    return n._iid = e, n._payload = t, n;
	  }

	  function Fy() {
	    var e = null !== Ry && Ry.apply(this, arguments) || this;
	    return e.params = {}, e.requireAuth = !0, e.headers = {}, e.requestId = sy(), e;
	  }

	  (B = Cy = Cy || {}).WEBSOCKET_CONNECT = "ws:connect", B.API_RESULT = "api:result";

	  function jy() {}

	  nm.payloadify = function (e) {
	    return w({
	      stat_type: e.type,
	      ts: e.createdAt,
	      data: w(e.data)
	    });
	  };

	  var Hy,
	      Gy,
	      Vy,
	      By,
	      Ky = nm,
	      Qy = (Object.defineProperty(tm.prototype, "_userAgentWithExtension", {
	    get: function () {
	      var e = this._sdkState.extensions,
	          t = "undefined" == typeof document && "undefined" != typeof navigator && "ReactNative" == navigator.product ? "reactnative" : "JS",
	          n = e.sb_syncmanager ? "s".concat(e.sb_syncmanager) : "",
	          r = e.sb_uikit ? "u".concat(e.sb_uikit) : "",
	          e = e["device-os-platform"] ? "o".concat(e["device-os-platform"]) : "";
	      return "".concat(t, "/c").concat(Z_.SDK_VERSION, "/").concat(n, "/").concat(r, "/").concat(e);
	    },
	    enumerable: !1,
	    configurable: !0
	  }), tm.prototype._createHeader = function (e, t) {
	    void 0 === t && (t = null);
	    var n = this._sdkState,
	        r = n.appId,
	        n = n.appVersion,
	        n = f(f({}, e.headers), {
	      SendBird: "JS,".concat(Z_.OS_VERSION, ",").concat(Z_.SDK_VERSION, ",").concat(r).concat(n ? ",".concat(n) : ""),
	      "SB-User-Agent": encodeURIComponent(this._userAgentWithExtension),
	      "Request-Sent-Timestamp": Date.now().toString()
	    });
	    return t || (n["Content-Type"] = "application/json; charset=utf-8"), e.requireAuth && this._auth.hasSession && (n["Session-Key"] = this._auth.sessionKey), this._auth && this._auth.authToken && (n["App-Id"] = r, n["Access-Token"] = this._auth.authToken), n;
	  }, tm.prototype._statLogApiResult = function (e, t, n) {
	    this._dispatcher.dispatch(new xy(new Ky({
	      type: Cy.API_RESULT,
	      data: {
	        endpoint: e.path,
	        method: e.method,
	        success: !n,
	        latency: Date.now() - t,
	        error_code: null == n ? void 0 : n.code,
	        error_description: null == n ? void 0 : n.message
	      }
	    })));
	  }, tm.prototype.send = function (h) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o, u, c, l;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            r = h.path, t = h.method, i = ![T.GET, T.DELETE].includes(t), n = this._sdkState.api, n = "".concat(n.host).concat(r).concat(i ? "" : h.query), r = i ? h.payload : null, i = this._createHeader(h, r instanceof FormData ? r : null), a = new AbortController(), s = a.signal, this._abortControl.set(h.requestId, a), a = Date.now(), e.label = 1;

	          case 1:
	            return e.trys.push([1, 4,, 5]), [4, fetch(n, {
	              method: t,
	              body: r,
	              headers: i,
	              signal: s
	            })];

	          case 2:
	            return [4, (o = e.sent()).json()];

	          case 3:
	            if (c = e.sent(), o.ok || o.redirected) return this._logger.debug("receive api response", h.requestId), this._statLogApiResult(h, a, null), [2, new S(this._iid, c)];
	            throw c ? (u = new p(c)).isSessionKeyExpiredError && this._dispatcher.dispatch(new My()) : u = p.requestFailed, this._statLogApiResult(h, a, u), u;

	          case 4:
	            throw c = e.sent(), this._statLogApiResult(h, a, c), c instanceof p ? (this._logger.debug("fail api request", c), c) : "AbortError" === c.name ? p.requestCanceled : (l = p.networkError, this._logger.debug("fail api request", l), l);

	          case 5:
	            return [2];
	        }
	      });
	    });
	  }, tm.prototype.cancel = function (e) {
	    this._abortControl.has(e) && (this._abortControl.get(e).abort(), this._abortControl.delete(e));
	  }, tm.prototype.cancelAll = function () {
	    var e, t;

	    try {
	      for (var n = se(this._abortControl.values()), r = n.next(); !r.done; r = n.next()) r.value.abort();
	    } catch (t) {
	      e = {
	        error: t
	      };
	    } finally {
	      try {
	        r && !r.done && (t = n.return) && t.call(n);
	      } finally {
	        if (e) throw e.error;
	      }
	    }

	    this._abortControl.clear();
	  }, tm),
	      zy = (o(em, By = ay), em.createFromRawMessage = function (e, t) {
	    var n = t.substring(0, 4),
	        r = null;

	    try {
	      r = JSON.parse(t.substring(4));
	    } catch (e) {
	      n = "NOOP";
	    } finally {
	      return new em(e, n, r);
	    }
	  }, em.prototype.convertToMessage = function () {
	    return "".concat(this.code).concat(JSON.stringify(this.payload), "\n");
	  }, em.prototype.as = function (e) {
	    return new e(this._iid, this.code, this.payload);
	  }, em),
	      Wy = (o($y, Vy = ay), $y.prototype.convertToMessage = function () {
	    return "".concat(this.code).concat(JSON.stringify(this.payload), "\n");
	  }, $y),
	      Yy = (o(Zy, Gy = Wy), Zy),
	      Xy = (Object.defineProperty(Jy.prototype, "isWaiting", {
	    get: function () {
	      return !!this._pingTimeoutTimer;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Jy.prototype.ping = function () {
	    var e,
	        t = this,
	        n = new Yy();

	    try {
	      var r = null != (e = this.sdkState.websocket.pongTimeout) ? e : 5e3;
	      this._pingTimeoutTimer = setTimeout(function () {
	        t._logger.debug("pinger.ping() timeout"), t.pingDelegate.error(null);
	      }, r), this.pingDelegate.send(n), this._logger.debug("pinger.ping()");
	    } catch (e) {
	      this._logger.debug("pinger.ping() error", e), this._pingTimeoutTimer && (clearTimeout(this._pingTimeoutTimer), this._pingTimeoutTimer = null), this.pingDelegate.error(null);
	    }

	    return n;
	  }, Jy.prototype.pong = function () {
	    this._logger.debug("pinger.pong()"), this._pingTimeoutTimer && (clearTimeout(this._pingTimeoutTimer), this._pingTimeoutTimer = null);
	  }, Jy.prototype.refreshTimer = function () {
	    var e = this,
	        t = (this._logger.debug("pinger.refreshTimer()"), null != (t = this.sdkState.websocket.pingInterval) ? t : 15e3);
	    this.stop(), this._pingTimer = setInterval(function () {
	      e.ping();
	    }, t);
	  }, Jy.prototype.start = function () {
	    this._logger.debug("pinger.start()"), this.refreshTimer(), this.ping();
	  }, Jy.prototype.stop = function () {
	    this._logger.debug("pinger.stop()"), this._pingTimer && (clearInterval(this._pingTimer), this._pingTimer = null), this._pingTimeoutTimer && (clearTimeout(this._pingTimeoutTimer), this._pingTimeoutTimer = null);
	  }, Jy);

	  function Jy(e) {
	    var t = e.pingDelegate,
	        n = e.sdkState,
	        e = e.logger;
	    this._pingTimer = null, this._pingTimeoutTimer = null, this.pingDelegate = t, this.sdkState = n, this._logger = e;
	  }

	  function Zy() {
	    return Gy.call(this, {
	      code: "PING",
	      payload: {
	        id: Date.now(),
	        active: 1
	      },
	      ackRequired: !1
	    }) || this;
	  }

	  function $y(e) {
	    var t = e.code,
	        n = e.ackRequired,
	        e = e.payload,
	        e = void 0 === e ? null : e,
	        r = this;
	    return (r = Vy.call(this) || this).code = t, r.payload = e, r.requestId = null != (t = r.payload.req_id) ? t : sy(), r.ackRequired = n, r.payload.req_id = r.requestId, r;
	  }

	  function em(e, t, n, r) {
	    void 0 === r && (r = "");
	    var i = this;
	    return (i = By.call(this) || this)._iid = e, i.code = t, i.payload = n, i.requestId = n ? null != (e = n.req_id) ? e : r : "", i;
	  }

	  function tm(e, t) {
	    var n = t.auth,
	        r = t.sdkState,
	        i = t.dispatcher,
	        t = t.logger,
	        s = this;
	    this._abortControl = new Map(), this._iid = e, this._auth = n, this._sdkState = r, this._dispatcher = i, this._dispatcher.on(function (e) {
	      e instanceof Dy && s.cancel(e.requestId);
	    }), this._logger = t;
	  }

	  function nm(e) {
	    var t = e.type,
	        n = e.data,
	        e = e.ts,
	        e = void 0 === e ? Date.now() : e;
	    this.type = t, this.createdAt = e, this.data = n;
	  }

	  (Fn = Hy = Hy || {}).CONNECTING = "CONNECTING", Fn.OPEN = "OPEN", Fn.CLOSED = "CLOSED";

	  function rm() {
	    var n = this;
	    this.promise = new Promise(function (e, t) {
	      n.resolve = e, n.reject = t;
	    });
	  }

	  o(dm, am = my), Object.defineProperty(dm.prototype, "connectionState", {
	    get: function () {
	      if (this._ws) switch (this._ws.readyState) {
	        case 0:
	          return Hy.CONNECTING;

	        case 1:
	          return Hy.OPEN;
	      }
	      return Hy.CLOSED;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), dm.prototype.connect = function (e) {
	    var t = this;
	    this._ws = new WebSocket(e), this._ws.onopen = function () {
	      t._logger.debug("websocket open"), t.dispatch("open");
	    }, this._ws.onmessage = function (e) {
	      e.data.split("\n").forEach(function (e) {
	        e && c("string", e) && (e = zy.createFromRawMessage(t._iid, e), t._logger.debug("receive websocket event", e), "LOGI" === e.code ? (e.payload && !e.payload.error && t._pinger && t._pinger.start(), t.dispatch("message", e)) : "PONG" === e.code ? t._pinger && t._pinger.pong() : "EXPR" === e.code ? e.payload && 0 < e.payload.expires_in && t._dispatcher.dispatch(new My()) : "NOOP" !== e.code && t.dispatch("message", e));
	      });
	    }, this._ws.onerror = function () {
	      t._logger.debug("websocket error"), t._pinger && t._pinger.stop(), t.dispatch("error", p.networkError);
	    }, this._ws.onclose = function () {
	      t._logger.debug("websocket close"), t._pinger && t._pinger.stop(), t.dispatch("close");
	    }, this.lastActive = Date.now();
	  }, dm.prototype.disconnect = function () {
	    var e = this;
	    this._logger.debug("websocket disconnect"), this._pinger && this._pinger.stop(), this._ws && (this._ws.onopen = jy, this._ws.onmessage = jy, this._ws.onerror = jy, this._ws.onclose = function () {
	      e.dispatch("close");
	    }, this._ws.close(), this._ws = null);
	  }, dm.prototype.send = function (e) {
	    if (!this._ws) throw p.connectionClosed;
	    "PING" !== e.code ? this._pinger && this._pinger.refreshTimer() : this._logger.debug("send ping", e), this._ws.send(e.convertToMessage());
	  }, dm.prototype.error = function (e) {
	    this._logger.debug("websocket error", e), this._pinger && this._pinger.stop(), this.dispatch("error", e);
	  };
	  var im,
	      sm,
	      am,
	      om = dm,
	      um = (o(hm, sm = ay), hm),
	      cm = (lm.prototype._sendApiRequest = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this.apiClient.send(t)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, lm.prototype._sendWebsocketRequest = function (s) {
	    return re(this, void 0, void 0, function () {
	      var n,
	          r,
	          t,
	          i = this;
	      return ie(this, function (e) {
	        if (n = new rm(), s.ackRequired) {
	          r = null, t = function (e, t) {
	            void 0 === e && (e = null), void 0 === t && (t = null), i._ackStateMap.has(s.requestId) && (i._ackStateMap.delete(s.requestId), r && (clearTimeout(r), r = null), e ? (i._logger.debug("fail websocket request", e), n.reject(e)) : (i._logger.debug("receive websocket ack", s.requestId), n.resolve(t)));
	          };

	          try {
	            r = setTimeout(function () {
	              return t(p.noAckTimeout);
	            }, this._sdkState.websocket.responseTimeout), this._ackStateMap.set(s.requestId, {
	              resolve: function (e) {
	                return t(null, e);
	              },
	              reject: function (e) {
	                return t(e);
	              }
	            }), this.websocketClient.send(s);
	          } catch (e) {
	            t(e);
	          }
	        } else try {
	          this.websocketClient.send(s), n.resolve(null);
	        } catch (e) {
	          n.reject(e);
	        }

	        return [2, n.promise];
	      });
	    });
	  }, lm.prototype.send = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t instanceof h ? [4, this._sendApiRequest(t)] : [3, 2];

	          case 1:
	          case 3:
	            return [2, e.sent()];

	          case 2:
	            return t instanceof Wy ? [4, this._sendWebsocketRequest(t)] : [3, 4];

	          case 4:
	            throw p.invalidParameters;
	        }
	      });
	    });
	  }, lm.prototype.cancel = function (e) {
	    this.apiClient.cancel(e);
	  }, lm.prototype.cancelAll = function () {
	    this.apiClient.cancelAll();
	  }, lm);

	  function lm(e, t) {
	    var n = t.auth,
	        r = t.sdkState,
	        i = t.dispatcher,
	        t = t.logger,
	        s = this;
	    this._ackStateMap = new Map(), this._sdkState = r, this._dispatcher = i, this._logger = t, this.apiClient = new Qy(e, {
	      auth: n,
	      sdkState: r,
	      dispatcher: i,
	      logger: t
	    }), this.websocketClient = new om(e, {
	      sdkState: r,
	      dispatcher: i,
	      logger: t
	    }), this.websocketClient.on("message", function (e) {
	      var t;
	      e.payload.unread_cnt && s._dispatcher.dispatch(new um(e.payload.unread_cnt)), e.requestId ? s._ackStateMap.has(e.requestId) && (t = s._ackStateMap.get(e.requestId), "EROR" !== e.code ? t.resolve(e) : t.reject(new p({
	        code: e.payload.code,
	        message: e.payload.message
	      }))) : s._dispatcher.dispatch(e);
	    }).on("close", function () {
	      s._ackStateMap.forEach(function (e) {
	        e.reject(p.connectionClosed);
	      }), s._ackStateMap.clear();
	    });
	  }

	  function hm(e) {
	    var t = e.all,
	        n = e.custom_types,
	        e = e.ts,
	        r = sm.call(this) || this;
	    return r.all = t, r.customTypes = n, r.ts = e, r;
	  }

	  function dm(e, t) {
	    var n = t.sdkState,
	        r = t.dispatcher,
	        t = t.logger,
	        i = am.call(this) || this;
	    return i._pinger = null, i.lastActive = 0, i._iid = e, i._sdkState = n, i._dispatcher = r, i._logger = t, i._sdkState.websocket.pingerDisabled || (i._pinger = new Xy({
	      pingDelegate: {
	        send: function (e) {
	          return i.send(e);
	        },
	        error: function (e) {
	          return i.error(e);
	        }
	      },
	      sdkState: i._sdkState,
	      logger: t
	    })), i;
	  }

	  (e = im = im || {})[e.NONE = 0] = "NONE", e[e.INITIALIZED = 1] = "INITIALIZED", e[e.CONNECTING = 2] = "CONNECTING", e[e.CONNECTED = 3] = "CONNECTED", e[e.RECONNECTING = 4] = "RECONNECTING", e[e.DISCONNECTED = 5] = "DISCONNECTED", e[e.LOGOUT = 6] = "LOGOUT";

	  function fm(t) {
	    return re(void 0, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, new Promise(function (e) {
	          return setTimeout(e, t);
	        })];
	      });
	    });
	  }

	  function pm(a, o, u) {
	    return void 0 === u && (u = new zm()), re(void 0, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            t = 0, n = null, r = function (e) {
	              return n = null != (e = void 0 === e ? null : e) ? e : new Error("Halted");
	            }, i = function () {
	              t = 0;
	            }, e.label = 1;

	          case 1:
	            if (!(-1 === o || t < o)) return [3, 9];
	            e.label = 2;

	          case 2:
	            return e.trys.push([2, 4,, 8]), [4, a(r, i)];

	          case 3:
	            if (s = e.sent(), n) throw n;
	            return [2, s];

	          case 4:
	            if (s = e.sent(), n) return [3, 6];
	            if (++t === o) throw s;
	            return [4, fm(u.calcTimeout(t))];

	          case 5:
	            return e.sent(), [3, 7];

	          case 6:
	            throw n;

	          case 7:
	            return [3, 8];

	          case 8:
	            return [3, 1];

	          case 9:
	            return [2];
	        }
	      });
	    });
	  }

	  function ae(n) {
	    re(void 0, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return e.trys.push([0, 2,, 3]), [4, n()];

	          case 1:
	            return e.sent(), [3, 3];

	          case 2:
	            if ((t = e.sent()) instanceof p) return t.throwOutside(), [3, 3];
	            throw t;

	          case 3:
	            return [2];
	        }
	      });
	    });
	  }

	  function vm(e, t) {
	    return null !== (t = void 0 === t ? null : t) && tg.set(e, t), null != (t = tg.get(e)) ? t : "";
	  }

	  function _m(e) {
	    this.emojiHash = (e = void 0 === e ? {} : e).emoji_hash || "", this.uploadSizeLimit = e.file_upload_size_limit ? 1048576 * e.file_upload_size_limit : Number.MAX_VALUE, this.useReaction = !!e.use_reaction, this.applicationAttributes = e.application_attributes || [], this.premiumFeatureList = e.premium_feature_list || [];
	  }

	  o(Og, qm = ay);
	  var ym,
	      mm,
	      gm,
	      Em,
	      bm,
	      Im,
	      wm,
	      Tm,
	      Sm,
	      Cm,
	      km,
	      Nm,
	      Am,
	      Om,
	      Rm,
	      Dm,
	      Mm,
	      xm,
	      Lm,
	      Pm,
	      Um,
	      qm,
	      Fm,
	      jm = Og,
	      Hm = (Object.defineProperty(Ag.prototype, "isReady", {
	    get: function () {
	      return this._currentConnectionStateType === im.CONNECTED;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(Ag.prototype, "isLazyCallActivated", {
	    get: function () {
	      return this._currentConnectionStateType === im.CONNECTING || this._currentConnectionStateType === im.RECONNECTING;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Ag.prototype.send = function (i) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return i instanceof Wy ? this.isReady ? (this._logger.debug("send websocket request", i), [4, this.commandRouter.send(i)]) : [3, 2] : [3, 4];

	          case 1:
	          case 5:
	            return [2, e.sent()];

	          case 2:
	            if (this.isLazyCallActivated) return this._logger.debug("wait websocket request", i), t = new rm(), this._lazyCallQueue.push({
	              command: i,
	              deferred: t,
	              timeout: setTimeout(function () {
	                return r.timeout(i.requestId);
	              }, 1e4)
	            }), [2, t.promise];
	            throw this._logger.debug("fail websocket request"), p.connectionRequired;

	          case 3:
	            return [3, 7];

	          case 4:
	            return i instanceof h ? this._auth.hasSession ? (this._logger.debug("send api request", i), [4, this.commandRouter.send(i)]) : [3, 6] : [3, 7];

	          case 6:
	            if (this.isLazyCallActivated) return this._logger.debug("wait api request", i), t = new rm(), this._lazyCallQueue.push({
	              command: i,
	              deferred: t,
	              timeout: setTimeout(function () {
	                return r.timeout(i.requestId);
	              }, 1e4)
	            }), [2, t.promise];
	            throw n = p.connectionRequired, this._logger.debug("fail api request", n), n;

	          case 7:
	            return [2];
	        }
	      });
	    });
	  }, Ag.prototype.forceSend = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._logger.debug("send websocket request (forced)", t), [4, this.commandRouter.send(t)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, Ag.prototype.timeout = function (t) {
	    this._logger.debug("timeout request", t);

	    var e = this._lazyCallQueue.findIndex(function (e) {
	      return e.command.requestId === t;
	    });

	    -1 < e && (this._lazyCallQueue[e].deferred.reject(p.connectionRequired), this._lazyCallQueue.splice(e, 1));
	  }, Ag.prototype.cancel = function (e) {
	    this._logger.debug("cancel api request", e), this.commandRouter.cancel(e);
	  }, Ag.prototype.cancelAll = function () {
	    this._logger.debug("cancel all api requests"), this.commandRouter.cancelAll();
	  }, Ag),
	      Gm = (o(Ng, Um = h), Ng),
	      Vm = (o(kg, Pm = Wy), kg),
	      Bm = (o(Cg, Lm = S), Cg),
	      Km = (o(Sg, xm = zy), Sg),
	      Qm = (o(Tg, Mm = ay), Tg),
	      zm = (wg.prototype.calcTimeout = function () {
	    return 0;
	  }, wg),
	      Wm = (Ig.prototype.createRefreshWebsocketCommand = function (e) {
	    return new Vm({
	      authToken: e,
	      expiringSession: !0
	    });
	  }, Ig.prototype._refreshSessionKey = function (a, o) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r,
	          i,
	          s = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (this._currentConnectionStateType !== im.CONNECTED) return [3, 4];
	            e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), t = this.createRefreshWebsocketCommand(a), [4, this._requestQueue.forceSend(t)];

	          case 2:
	            if (t = e.sent(), r = t.as(Km), n = r.newKey, r = r.error) throw r;
	            return this.auth.sessionKey = null != n ? n : this.auth.sessionKey, this._logger.debug("session refreshed"), ae(function () {
	              return re(s, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this.handler.onSessionRefreshed(), [2];
	                });
	              });
	            }), o && o.resolve(), [2];

	          case 3:
	            if (r = e.sent(), ey(r)) throw r;
	            return r.isSessionTokenExpiredError ? (this._handleError(o), [2]) : [3, 4];

	          case 4:
	            return e.trys.push([4, 6,, 7]), i = new Gm({
	              userId: this._sdkState.userId,
	              authToken: a,
	              expiringSession: !0
	            }), [4, pm(function (n) {
	              return re(s, void 0, void 0, function () {
	                var t;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      return e.trys.push([0, 2,, 3]), [4, this._requestQueue.forceSend(i)];

	                    case 1:
	                      return t = e.sent(), t = t.as(Bm).key, this.auth.sessionKey = t, [3, 3];

	                    case 2:
	                      throw (t = e.sent()).isSessionTokenExpiredError && n(p.sessionTokenRefreshFailed), t;

	                    case 3:
	                      return [2];
	                  }
	                });
	              });
	            }, 3)];

	          case 5:
	            return e.sent(), this._logger.debug("session refreshed"), [3, 7];

	          case 6:
	            return e.sent(), this._handleError(o), [2];

	          case 7:
	            return ae(function () {
	              return re(s, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this.handler.onSessionRefreshed(), [2];
	                });
	              });
	            }), o && o.resolve(), [2];
	        }
	      });
	    });
	  }, Ig.prototype._handleError = function (e) {
	    var t = this,
	        n = p.sessionTokenRefreshFailed;
	    ae(function () {
	      return re(t, void 0, void 0, function () {
	        return ie(this, function (e) {
	          return this.handler.onSessionError(n), [2];
	        });
	      });
	    }), e && e.reject(n);
	  }, Ig.prototype.refresh = function () {
	    return re(this, void 0, void 0, function () {
	      var n,
	          t,
	          r,
	          i = this;
	      return ie(this, function (e) {
	        return this.handler ? (n = new rm(), t = function (e) {
	          e ? (i._logger.debug("session refreshing.."), i.auth.authToken = e, i._refreshSessionKey(e, n)) : (i._logger.debug("session closed"), ae(function () {
	            return re(i, void 0, void 0, function () {
	              return ie(this, function (e) {
	                return this.handler.onSessionClosed(), [2];
	              });
	            });
	          }), n.resolve());
	        }, r = function () {
	          i._dispatcher.dispatch(new Qm());

	          var t = p.sessionTokenRequestFailed;
	          i.handler && (ae(function () {
	            return re(i, void 0, void 0, function () {
	              return ie(this, function (e) {
	                return this.handler.onSessionError(t), [2];
	              });
	            });
	          }), n.reject(t));
	        }, this._logger.debug("session expired"), this.handler.onSessionExpired(), this.auth.authToken ? this._refreshSessionKey(this.auth.authToken, n) : ae(function () {
	          return re(i, void 0, void 0, function () {
	            return ie(this, function (e) {
	              return this.handler.onSessionTokenRequired(t, r), [2];
	            });
	          });
	        }), [2, n.promise]) : [2];
	      });
	    });
	  }, Ig),
	      Yt = (bg.prototype.run = function (e) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2];
	      });
	    });
	  }, bg.prototype.onConnect = function (e, t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2];
	      });
	    });
	  }, bg.prototype.onReconnect = function (e, t) {
	    return t.resetReconnectCount, re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2];
	      });
	    });
	  }, bg.prototype.onDisconnect = function (e, t) {
	    return t.error, t.autoReconnect, re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2];
	      });
	    });
	  }, bg.prototype.onLogout = function (e) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2];
	      });
	    });
	  }, bg),
	      Ym = (o(Eg, Dm = Yt), Eg.prototype.run = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = r.sdkState.userId, r.logout(), ae(function () {
	              return re(n, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return r.connectionHandlers.forEach(function (e) {
	                    e.onDisconnected(t);
	                  }), [2];
	                });
	              });
	            }), [4, r.changeState(new eg())];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, Eg),
	      Xm = (o(gg, Rm = Yt), gg.prototype.run = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t.disconnect(), this._autoReconnect ? [4, t.changeState(new Jm())] : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, gg.prototype.onConnect = function (t, n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t.disconnect(), [4, t.changeState(new $m({
	              authToken: n
	            }))];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, gg.prototype.onReconnect = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, t.changeState(new Jm())];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, gg.prototype.onLogout = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, t.changeState(new Ym())];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, gg),
	      Jm = (o(mg, Om = Yt), mg.prototype.flushCallbacks = function (t) {
	    void 0 === t && (t = null), this._callbacks.forEach(function (e) {
	      return e(t);
	    });
	  }, mg.prototype.run = function (a) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r,
	          i,
	          s = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            t = new rm(), this._callbacks.push(function (e) {
	              return e ? t.reject(e) : t.resolve();
	            }), ae(function () {
	              return re(s, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return a.connectionHandlers.forEach(function (e) {
	                    e.onReconnectStarted();
	                  }), [2];
	                });
	              });
	            }), e.label = 1;

	          case 1:
	            return e.trys.push([1, 4,, 9]), r = a.sdkState.websocket, n = r.reconnectMaxRetry, r = r.reconnectRetryStrategy, [4, pm(function (n, r) {
	              return re(s, void 0, void 0, function () {
	                var t;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      this._haltConnect = n, this._resetConnect = r, e.label = 1;

	                    case 1:
	                      return e.trys.push([1, 3,, 4]), [4, a.connect()];

	                    case 2:
	                      return e.sent(), [3, 4];

	                    case 3:
	                      if ((t = e.sent()) instanceof p && t.code === d.CONNECTION_CANCELED) return n(t), [2];
	                      throw t;

	                    case 4:
	                      return [2];
	                  }
	                });
	              });
	            }, n, r)];

	          case 2:
	            return e.sent(), [4, a.changeState(new Zm())];

	          case 3:
	            return e.sent(), ae(function () {
	              return re(s, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return a.connectionHandlers.forEach(function (e) {
	                    e.onReconnectSucceeded();
	                  }), this.flushCallbacks(null), [2];
	                });
	              });
	            }), [3, 9];

	          case 4:
	            return i = e.sent(), ey(i) ? [3, 7] : !(i instanceof p) || i.code === d.CONNECTION_CANCELED ? [3, 6] : [4, a.changeState(new Xm({
	              autoReconnect: !1
	            }))];

	          case 5:
	            e.sent(), e.label = 6;

	          case 6:
	            return ae(function () {
	              return re(s, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return a.connectionHandlers.forEach(function (e) {
	                    e.onReconnectFailed();
	                  }), this.flushCallbacks(i), [2];
	                });
	              });
	            }), [3, 8];

	          case 7:
	            throw i;

	          case 8:
	            return [3, 9];

	          case 9:
	            return [2, t.promise];
	        }
	      });
	    });
	  }, mg.prototype.onConnect = function (n, e) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        return t = new rm(), this._resetConnect && this._resetConnect(), n.cancelConnectForRetry(), this._callbacks.push(function (e) {
	          return e ? t.reject(e) : t.resolve();
	        }), [2, t.promise];
	      });
	    });
	  }, mg.prototype.onReconnect = function (n, e) {
	    var e = e.resetReconnectCount,
	        r = void 0 !== e && e;
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        return t = new rm(), this._resetConnect && r && this._resetConnect(), n.cancelConnectForRetry(), this._callbacks.push(function (e) {
	          return e ? t.reject(e) : t.resolve();
	        }), [2, t.promise];
	      });
	    });
	  }, mg.prototype.onDisconnect = function (t, e) {
	    var n = e.error,
	        r = void 0 === n ? null : n,
	        n = e.autoReconnect,
	        i = void 0 === n || n;
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._haltConnect && this._haltConnect(null != r ? r : p.connectionCanceled), [4, t.changeState(new Xm({
	              autoReconnect: i
	            }))];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, mg.prototype.onLogout = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._haltConnect && this._haltConnect(p.connectionCanceled), [4, t.changeState(new Ym())];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, mg),
	      Zm = (o(yg, Am = Yt), yg.prototype.onReconnect = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t.disconnect(), [4, t.changeState(new Jm())];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, yg.prototype.onDisconnect = function (t, e) {
	    var n = e.autoReconnect;
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, t.changeState(new Xm({
	              autoReconnect: n
	            }))];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, yg.prototype.onLogout = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, t.changeState(new Ym())];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, yg),
	      $m = (o(_g, Nm = Yt), _g.prototype.flushCallbacks = function (t) {
	    void 0 === t && (t = null), this._callbacks.forEach(function (e) {
	      return e(t);
	    });
	  }, _g.prototype.run = function (i) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            t = new rm(), this._callbacks.push(function (e) {
	              return e ? t.reject(e) : t.resolve();
	            }), e.label = 1;

	          case 1:
	            return e.trys.push([1, 4,, 9]), [4, pm(function (n) {
	              return re(r, void 0, void 0, function () {
	                var t;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      this._haltConnect = n, e.label = 1;

	                    case 1:
	                      return e.trys.push([1, 3,, 4]), [4, i.connect(this._authToken)];

	                    case 2:
	                      return e.sent(), [3, 4];

	                    case 3:
	                      if ((t = e.sent()) instanceof p && t.code === d.CONNECTION_CANCELED) return n(t), [2];
	                      throw t;

	                    case 4:
	                      return [2];
	                  }
	                });
	              });
	            }, i.sdkState.websocket.connectMaxRetry)];

	          case 2:
	            return e.sent(), [4, i.changeState(new Zm())];

	          case 3:
	            return e.sent(), ae(function () {
	              return re(r, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return i.connectionHandlers.forEach(function (e) {
	                    e.onConnected(i.sdkState.userId);
	                  }), this.flushCallbacks(null), [2];
	                });
	              });
	            }), [3, 9];

	          case 4:
	            return n = e.sent(), ey(n) ? [3, 7] : (i.disconnect(), !(n instanceof p) || n.code === d.CONNECTION_CANCELED ? [3, 6] : [4, i.changeState(new eg())]);

	          case 5:
	            e.sent(), e.label = 6;

	          case 6:
	            return ae(function () {
	              return re(r, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this.flushCallbacks(n), [2];
	                });
	              });
	            }), [3, 8];

	          case 7:
	            throw n;

	          case 8:
	            return [3, 9];

	          case 9:
	            return [2, t.promise];
	        }
	      });
	    });
	  }, _g.prototype.onConnect = function (e) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        return t = new rm(), this._callbacks.push(function (e) {
	          return e ? t.reject(e) : t.resolve();
	        }), [2, t.promise];
	      });
	    });
	  }, _g.prototype.onDisconnect = function (t, e) {
	    var e = e.error,
	        n = void 0 === e ? null : e;
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._haltConnect && this._haltConnect(null != n ? n : p.connectionCanceled), [4, t.changeState(new Ym())];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, _g.prototype.onLogout = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._haltConnect && this._haltConnect(p.connectionCanceled), [4, t.changeState(new Ym())];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, _g),
	      eg = (o(vg, km = Yt), vg.prototype.onConnect = function (t, n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, t.changeState(new $m({
	              authToken: n
	            }))];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, vg),
	      tg = new Map(),
	      jn = (pg.payloadify = function (e) {
	    return e ? {} : null;
	  }, pg),
	      ng = "/".concat("v3", "/users"),
	      rg = "/".concat("v3", "/storage/file"),
	      ig = "/".concat("v3", "/group_channels"),
	      sg = "/".concat("v3", "/open_channels"),
	      ag = "/".concat("v3", "/sdk/open_channels"),
	      og = "/".concat("v3", "/search"),
	      ug = "/".concat("v3", "/report"),
	      cg = "/".concat("v3", "/emojis"),
	      lg = "/".concat("v3", "/emoji_categories"),
	      hg = "/".concat("v3", "/sdk/statistics"),
	      dg = (o(fg, Cm = h), fg);

	  function fg(e) {
	    var t = e.userId,
	        e = e.metadata,
	        n = Cm.call(this) || this;
	    return n.method = T.POST, n.path = "".concat(ng, "/").concat(t, "/metadata"), n.params = {
	      metadata: e
	    }, n;
	  }

	  function pg(e) {
	    this._iid = "", this._iid = e;
	  }

	  function vg() {
	    var e = null !== km && km.apply(this, arguments) || this;
	    return e.type = im.INITIALIZED, e.name = "initialized", e;
	  }

	  function _g(e) {
	    var e = e.authToken,
	        t = Nm.call(this) || this;
	    return t.type = im.CONNECTING, t.name = "connecting", t._authToken = "", t._haltConnect = null, t._callbacks = [], t._authToken = e, t;
	  }

	  function yg() {
	    var e = null !== Am && Am.apply(this, arguments) || this;
	    return e.type = im.CONNECTED, e.name = "connected", e;
	  }

	  function mg() {
	    var e = null !== Om && Om.apply(this, arguments) || this;
	    return e.type = im.RECONNECTING, e.name = "reconnecting", e._haltConnect = null, e._resetConnect = null, e._callbacks = [], e;
	  }

	  function gg(e) {
	    var e = e.autoReconnect,
	        t = Rm.call(this) || this;
	    return t.type = im.DISCONNECTED, t.name = "disconnected", t._autoReconnect = !1, t._autoReconnect = e, t;
	  }

	  function Eg() {
	    var e = null !== Dm && Dm.apply(this, arguments) || this;
	    return e.type = im.LOGOUT, e.name = "logout", e;
	  }

	  function bg() {
	    this.type = im.NONE, this.name = "none";
	  }

	  function Ig(e) {
	    var t = e.auth,
	        n = e.sdkState,
	        r = e.dispatcher,
	        i = e.requestQueue,
	        e = e.logger,
	        s = this;
	    this._currentConnectionStateType = im.INITIALIZED, this.auth = t, this._sdkState = n, this._dispatcher = r, this._requestQueue = i, this._logger = e, this._dispatcher.on(function (e) {
	      var t;
	      e instanceof jm ? (t = e.stateType, s._currentConnectionStateType = t) : e instanceof My && s.refresh();
	    });
	  }

	  function wg() {}

	  function Tg() {
	    return null !== Mm && Mm.apply(this, arguments) || this;
	  }

	  function Sg(e, t, n) {
	    e = xm.call(this, e, "LOGI", n) || this;
	    return e.error = null, e.newKey = n.new_key, e.error = n.error ? new p(n.error) : null, e;
	  }

	  function Cg(e, t) {
	    e = Lm.call(this, e, t) || this, t = t.key;
	    return e.key = t, e;
	  }

	  function kg(e) {
	    var t = e.authToken,
	        e = e.expiringSession;
	    return Pm.call(this, {
	      code: "LOGI",
	      payload: {
	        token: t,
	        expiring_session: void 0 === e || e ? 1 : 0
	      },
	      ackRequired: !0
	    }) || this;
	  }

	  function Ng(e) {
	    var t = e.userId,
	        n = e.authToken,
	        e = e.expiringSession,
	        e = void 0 === e || e,
	        r = Um.call(this) || this;
	    return r.path = "/users/".concat(t, "/session_key"), r.method = T.POST, r.params = {
	      token: n,
	      expiring_session: !!e
	    }, r.requireAuth = !1, r;
	  }

	  function Ag(e, t) {
	    var n = t.auth,
	        r = t.sdkState,
	        i = t.dispatcher,
	        t = t.logger,
	        a = this;
	    this._currentConnectionStateType = im.INITIALIZED, this._lazyCallQueue = [], this.commandRouter = new cm(e, {
	      auth: n,
	      sdkState: r,
	      dispatcher: i,
	      logger: t
	    }), this._auth = n, this._logger = t, this._dispatcher = i, this._dispatcher.on(function (e) {
	      if (e instanceof jm) {
	        e = e.stateType;

	        switch (a._currentConnectionStateType = e) {
	          case im.CONNECTED:
	            var t = a._lazyCallQueue;
	            a._lazyCallQueue = [], t.forEach(function (s) {
	              return re(a, void 0, void 0, function () {
	                var t, n, r, i;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      t = s.command, n = s.deferred, r = s.timeout, clearTimeout(r), e.label = 1;

	                    case 1:
	                      return e.trys.push([1, 3,, 4]), [4, this.send(t)];

	                    case 2:
	                      return r = e.sent(), n.resolve(r), [3, 4];

	                    case 3:
	                      return i = e.sent(), n.reject(i), [3, 4];

	                    case 4:
	                      return [2];
	                  }
	                });
	              });
	            });
	            break;

	          case im.INITIALIZED:
	          case im.DISCONNECTED:
	          case im.LOGOUT:
	            t = a._lazyCallQueue, a._lazyCallQueue = [], t.forEach(function (r) {
	              return re(a, void 0, void 0, function () {
	                var t, n;
	                return ie(this, function (e) {
	                  return t = r.deferred, n = r.timeout, clearTimeout(n), this._auth && this._auth.hasSession ? t.reject(p.connectionClosed) : t.reject(p.connectionRequired), [2];
	                });
	              });
	            });
	        }
	      }
	    });
	  }

	  function Og(e) {
	    var e = e.stateType,
	        t = qm.call(this) || this;
	    return t.stateType = e, t;
	  }

	  o(function (e, t) {
	    return (e = Fm.call(this, e, t) || this).metadata = t, e;
	  }, Fm = S), (Gn = ym = ym || {}).BASE = "base", Gn.GROUP = "group", Gn.OPEN = "open", (nt = mm = mm || {}).OPERATOR = "operator", nt.NONE = "none", (mt = gm = gm || {}).BASE = "base", mt.USER = "user", mt.FILE = "file", mt.ADMIN = "admin", (ua = Em = Em || {}).ALL = "", ua.USER = "MESG", ua.FILE = "FILE", ua.ADMIN = "ADMM", (t = bm = bm || {}).USER = "MESG", t.FILE = "FILE", t.ADMIN = "ADMM", (sa = Im = Im || {}).USERS = "users", sa.CHANNEL = "channel", (n = wm = wm || {}).ALL = "all", n.NONE = "none", n.ONLY_REPLY_TO_CHANNEL = "only_reply_to_channel", (Jn = Tm = Tm || {}).DEFAULT = "default", Jn.SUPPRESS = "suppress", (Jt = Sm = Sm || {}).PENDING = "pending", Jt.SCHEDULED = "scheduled", Jt.SUCCEEDED = "succeeded", Jt.FAILED = "failed", Jt.CANCELED = "canceled";

	  function Rg(e) {
	    switch (e) {
	      case ym.GROUP:
	        return ig;

	      case ym.OPEN:
	        return sg;

	      default:
	        return null;
	    }
	  }

	  function Dg(e) {
	    switch (e) {
	      case ym.GROUP:
	        return "".concat(ug, "/group_channels");

	      case ym.OPEN:
	        return "".concat(ug, "/open_channels");

	      default:
	        return null;
	    }
	  }

	  function Mg(e, t, n) {
	    return e = jg(e.mentionType, e.mentionedUserIds, n), t = jg(t.mentionType, t.mentionedUserIds, n), !e && t ? 1 : e && !t ? -1 : 0;
	  }

	  var xg,
	      Lg,
	      Pg,
	      Ug,
	      qg,
	      Fg,
	      jg = function (e, t, n) {
	    var r, i;

	    switch (e) {
	      case Im.CHANNEL:
	        return !0;

	      case Im.USERS:
	        if (t) try {
	          for (var s = se(t), a = s.next(); !a.done; a = s.next()) if (a.value === n) return !0;
	        } catch (e) {
	          r = {
	            error: e
	          };
	        } finally {
	          try {
	            a && !a.done && (i = s.return) && i.call(s);
	          } finally {
	            if (r) throw r.error;
	          }
	        }
	    }

	    return !1;
	  },
	      Hg = (o(Xg, qg = h), Xg),
	      Gg = (o(Yg, Ug = S), Yg),
	      Vg = (o(Wg, Pg = h), Wg),
	      Bg = (o(zg, Lg = S), zg),
	      Kg = (o(Qg, xg = h), Qg);

	  function Qg(e) {
	    var t = e.userId,
	        e = e.metadataKey,
	        n = xg.call(this) || this;
	    return n.method = T.DELETE, n.path = "".concat(ng, "/").concat(t, "/metadata/").concat(e), n;
	  }

	  function zg(e, t) {
	    e = Lg.call(this, e, t) || this;
	    return e.metadata = t, e;
	  }

	  function Wg(e) {
	    var t = e.userId,
	        n = e.metadata,
	        e = e.upsert,
	        r = Pg.call(this) || this;
	    return r.method = T.PUT, r.path = "".concat(ng, "/").concat(t, "/metadata"), r.params = {
	      metadata: n,
	      upsert: e
	    }, r;
	  }

	  function Yg(e, t) {
	    e = Ug.call(this, e, t) || this;
	    return e.metaData = null != t ? t : {}, e;
	  }

	  function Xg(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.metadata;
	    return (t = qg.call(this) || this).method = T.POST, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/metadata"), t.params = {
	      metadata: e,
	      include_ts: !0
	    }, t;
	  }

	  o(function () {
	    return null !== Fg && Fg.apply(this, arguments) || this;
	  }, Fg = S);
	  o(eE, Jg = h);
	  var Jg,
	      Zg,
	      $g = eE;

	  function eE(e) {
	    var e = e.userId,
	        t = Jg.call(this) || this;
	    return t.method = T.DELETE, t.path = "".concat(ng, "/").concat(e, "/metadata"), t;
	  }

	  o(function () {
	    return null !== Zg && Zg.apply(this, arguments) || this;
	  }, Zg = S);

	  function tE(e, t) {
	    return void 0 === t && (t = null), (e = JSON.parse(JSON.stringify(e)))._iid && delete e._iid, t && t(e), e;
	  }

	  function nE(e, t) {
	    return void 0 === t && (t = null), e = JSON.parse(JSON.stringify(e)), t && t(e), e;
	  }

	  function C(t) {
	    return {
	      do: function (e) {
	        t || e();
	      },
	      throw: function (e) {
	        if (!t) throw e;
	      }
	    };
	  }

	  var rE;
	  (rt = rE = rE || {}).ONLINE = "online", rt.OFFLINE = "offline", rt.NON_AVAILABLE = "nonavailable";
	  o(SE, lE = jn), SE.payloadify = function (e) {
	    return e ? w(f(f({}, lE.payloadify.call(this, e)), {
	      user_id: e.userId,
	      nickname: e.nickname,
	      profile_url: e.plainProfileUrl,
	      require_auth_for_profile_image: e.requireAuth,
	      metadata: e.metaData,
	      is_online: e.connectionStatus,
	      is_active: e.isActive,
	      last_seen_at: e.lastSeenAt,
	      preferred_languages: e.preferredLanguages,
	      friend_discovery_key: e.friendDiscoveryKey,
	      friend_name: e.friendName
	    })) : null;
	  }, Object.defineProperty(SE.prototype, "profileUrl", {
	    get: function () {
	      return this.requireAuth ? "".concat(this.plainProfileUrl, "?auth=").concat(vm(this._iid)) : this.plainProfileUrl;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), SE.prototype.serialize = function () {
	    return tE(this);
	  }, SE.prototype._isValidMetaData = function (t) {
	    return !Array.isArray(t) && 0 < Object.keys(t).length && Object.keys(t).map(function (e) {
	      return t[e];
	    }).every(function (e) {
	      return c("string", e);
	    });
	  }, SE.prototype._applyMetaData = function (t, n) {
	    var r = this;
	    void 0 === n && (n = !1), Object.keys(t).forEach(function (e) {
	      n ? delete r.metaData[e] : r.metaData[e] = t[e];
	    });
	  }, SE.prototype.createMetaData = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(this._isValidMetaData(r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new dg({
	              userId: n.userId,
	              metadata: r
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(Gg).metaData, this._applyMetaData(n), [2, this.metaData];
	        }
	      });
	    });
	  }, SE.prototype.updateMetaData = function (r, i) {
	    return void 0 === i && (i = !1), re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(this._isValidMetaData(r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new Vg({
	              userId: n.userId,
	              metadata: r,
	              upsert: i
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(Bg).metadata, this._applyMetaData(n), [2, this.metaData];
	        }
	      });
	    });
	  }, SE.prototype.deleteMetaData = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("string", r)).throw(p.invalidParameters), n = N.of(this._iid), t = n.sdkState, n = n.requestQueue, t = new Kg({
	              userId: t.userId,
	              metadataKey: r
	            }), [4, n.send(t)];

	          case 1:
	            return e.sent(), this._applyMetaData(((n = {})[r] = !0, n), !0), [2, this.metaData];
	        }
	      });
	    });
	  }, SE.prototype.deleteAllMetaData = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new $g({
	              userId: n.userId
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), this.metaData = {}, [2];
	        }
	      });
	    });
	  };

	  var iE,
	      sE,
	      aE,
	      oE,
	      uE,
	      cE,
	      lE,
	      k = SE,
	      hE = (o(TE, cE = ay), TE),
	      dE = (wE.payloadify = function (e) {
	    return f(f({}, k.payloadify(e.user)), {
	      emoji_hash: e.appInfo.emojiHash,
	      file_upload_size_limit: e.appInfo.uploadSizeLimit,
	      application_attributes: e.appInfo.applicationAttributes,
	      premium_feature_list: e.appInfo.premiumFeatureList,
	      login_ts: e.connectedAt / 1e3,
	      ping_interval: e.pingInterval,
	      pong_timeout: e.pongTimeout,
	      reconnect: {
	        interval: e.reconnectInterval,
	        max_interval: e.reconnectMaxInterval,
	        retry_cnt: e.reconnectRetryCount,
	        mul: e.reconnectIntervalMultiple
	      },
	      max_unread_cnt_on_super_group: e.maxUnreadCountOnSuperGroup,
	      profile_image_encryption: e.profileImageEncryption,
	      concurrent_call_limit: e.concurrentCallLimit,
	      back_off_delay: e.backOffDelay
	    });
	  }, wE.prototype.apply = function () {
	    var t = this.reconnectInterval,
	        n = this.reconnectMaxInterval,
	        r = this.reconnectIntervalMultiple,
	        e = N.of(this._iid);
	    e.sdkState.websocket.pingInterval = 1e3 * this.pingInterval, e.sdkState.websocket.pongTimeout = 1e3 * this.pongTimeout, e.sdkState.websocket.reconnectMaxRetry = this.reconnectRetryCount, e.sdkState.websocket.reconnectRetryStrategy = {
	      calcTimeout: function (e) {
	        return 0 < e ? 1e3 * Math.min(t * Math.pow(r, e - 1), n) : 10;
	      }
	    }, e.appInfo = this.appInfo, e.sessionManager.currentUser = this.user, e.connectedAt = this.connectedAt, this.firstConnectedAt || (e.firstConnectedAt = this.connectedAt), e.maxSuperGroupChannelUnreadCount = this.maxUnreadCountOnSuperGroup, e.concurrentCallLimit = this.concurrentCallLimit, e.backOffDelay = this.backOffDelay, e.dispatcher.dispatch(new hE({
	      userProfile: this
	    }));
	  }, wE),
	      fE = (o(IE, uE = zy), IE.asError = function (e) {
	    return new IE(null, "LOGI", f({
	      user_id: null,
	      error: !0
	    }, e));
	  }, IE.prototype.applyTo = function (e) {
	    if (this.error) throw this.error;
	    var t = N.of(e);
	    if (!t) throw p.lostInstance;
	    t.sessionManager.auth.sessionKey = this.key, vm(e, this.ekey), this.userProfile.apply();
	  }, IE),
	      pE = (o(bE, oE = ay), bE),
	      vE = (o(EE, aE = my), Object.defineProperty(EE.prototype, "currentState", {
	    get: function () {
	      return this._currentState;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), EE.prototype.changeState = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._currentState = t, this._dispatcher.dispatch(new jm({
	              stateType: t.type
	            })), this._logger.debug("connection state changes to ".concat(t.name)), [4, this._currentState.run(this)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, EE.prototype._url = function (e) {
	    void 0 === e && (e = "");
	    var t = this.sdkState,
	        n = t.appId,
	        r = t.appVersion,
	        i = t.userId,
	        t = t.extensions,
	        s = this._sessionManager.auth,
	        a = t.sb_syncmanager ? "s".concat(t.sb_syncmanager) : "",
	        t = t.sb_uikit ? "u".concat(t.sb_uikit) : "",
	        a = "JS/c".concat(Z_.SDK_VERSION, "/").concat(a, "/").concat(t);
	    return "".concat(this.sdkState.websocket.host, "/?p=JS&pv=").concat(encodeURIComponent(Z_.OS_VERSION), "&sv=").concat(encodeURIComponent(Z_.SDK_VERSION), "&ai=").concat(n).concat(r ? "&av=".concat(r) : "").concat(s.hasSession ? "&key=".concat(encodeURIComponent(s.sessionKey)) : "&user_id=".concat(encodeURIComponent(i), "&access_token=").concat(encodeURIComponent(e)), "&active=1&SB-User-Agent=").concat(a, "&Request-Sent-Timestamp=").concat(Date.now().toString(), "&include_extra_data=").concat(encodeURIComponent(String(["premium_feature_list", "file_upload_size_limit", "application_attributes", "emoji_hash"]))).concat(this._sessionManager.handler ? "&expiring_session=1" : "", "&use_local_cache=1");
	  }, EE.prototype._enableStatLog = function (e) {
	    this._dispatcher.dispatch(new pE(e));
	  }, EE.prototype._statLogConnection = function (e) {
	    this._dispatcher.dispatch(new xy(new Ky({
	      type: Cy.WEBSOCKET_CONNECT,
	      data: {
	        host_url: this.sdkState.websocket.host,
	        success: !e,
	        latency: Date.now() - this._connectingAt,
	        error_code: null == e ? void 0 : e.code,
	        error_description: null == e ? void 0 : e.message
	      }
	    })));
	  }, EE.prototype.connect = function (i) {
	    return void 0 === i && (i = ""), re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r = this;
	      return ie(this, function (e) {
	        return t = this._url(i), n = new rm(), this._connectionRequestQueue.push(n), 1 === this._connectionRequestQueue.length && (this._connectingAt = Date.now(), this._loginTimer = setTimeout(function () {
	          r._loginTimer = null, r._dispatcher.dispatch(fE.asError(p.loginTimeout));
	        }, this.sdkState.websocket.responseTimeout), this._websocketClient.connect(t)), [2, n.promise];
	      });
	    });
	  }, EE.prototype.cancelConnectForRetry = function () {
	    this._dispatcher.dispatch(fE.asError(p.connectionRenew));
	  }, EE.prototype.disconnect = function () {
	    this._websocketClient.disconnect();
	  }, EE.prototype.logout = function () {
	    this.sdkState.userId = null, this._sessionManager.currentUser = null, this._sessionManager.auth.clear(), this.disconnect();
	  }, EE),
	      _E = (Object.defineProperty(gE.prototype, "isConnected", {
	    get: function () {
	      return this._context.currentState.type === im.CONNECTED;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(gE.prototype, "isConnecting", {
	    get: function () {
	      var e = this._context.currentState;
	      return e.type === im.CONNECTING || e.type === im.RECONNECTING;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), gE.prototype.connect = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._context.currentState.onConnect(this._context, t)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, gE.prototype.reconnect = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._context.currentState.onReconnect(this._context, {})];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, gE.prototype.resetAndReconnect = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._context.currentState.onReconnect(this._context, {
	              resetReconnectCount: !0
	            })];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, gE.prototype.background = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._context.currentState.onDisconnect(this._context, {
	              autoReconnect: !1
	            })];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, gE.prototype.disconnect = function (t) {
	    return void 0 === t && (t = null), re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._context.currentState.onDisconnect(this._context, {
	              error: t,
	              autoReconnect: !0
	            })];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, gE.prototype.logout = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._context.currentState.onLogout(this._context)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, gE),
	      yE = (o(mE, sE = h), mE);

	  function mE(e) {
	    var t = e.deviceId,
	        e = e.statLogs,
	        n = sE.call(this) || this;
	    return n.method = T.POST, n.path = "".concat(hg), n.params = {
	      device_id: t,
	      log_entries: e.map(function (e) {
	        return Ky.payloadify(e);
	      })
	    }, n;
	  }

	  function gE(e, t) {
	    var n = t.sdkState,
	        r = t.connectionHandlers,
	        i = t.sessionManager,
	        s = t.websocketClient,
	        a = t.dispatcher,
	        o = t.logger,
	        t = t.disableAutoReconnect,
	        t = void 0 !== t && t,
	        u = this;
	    this._context = null, this._logger = o, this._context = new vE(e, {
	      sdkState: n,
	      connectionHandlers: r,
	      sessionManager: i,
	      websocketClient: s,
	      dispatcher: a,
	      logger: o
	    }), t || s.on("close", function () {
	      "foreground" === n.appState && setTimeout(function () {
	        u._logger.debug("try reconnect by websocket connection closed"), u.reconnect();
	      }, 100);
	    });
	  }

	  function EE(e, t) {
	    var n = t.sdkState,
	        r = t.connectionHandlers,
	        i = t.sessionManager,
	        s = t.websocketClient,
	        a = t.dispatcher,
	        o = t.logger,
	        t = t.entryState,
	        t = void 0 === t ? new eg() : t,
	        u = aE.call(this) || this;
	    return u._currentState = null, u._loginTimer = null, u._connectingAt = 0, u._connectionRequestQueue = [], u._iid = e, u.sdkState = n, u.connectionHandlers = r, u._sessionManager = i, u._websocketClient = s, u._dispatcher = a, u._logger = o, u._currentState = t, u._websocketClient.on("message", function (e) {
	      var t;
	      "LOGI" === e.code && (u._loginTimer && (clearTimeout(u._loginTimer), u._loginTimer = null), (t = e.as(fE)).error ? (t.error.isSessionKeyExpiredError && u._dispatcher.dispatch(new My()), u._connectionRequestQueue.forEach(function (e) {
	        return e.reject(t.error);
	      }), u._statLogConnection(t.error)) : (t.applyTo(u._iid), u._connectionRequestQueue.forEach(function (e) {
	        return e.resolve();
	      }), e = t.userProfile, u._enableStatLog(e.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish")), u._statLogConnection(null)), u._connectionRequestQueue = []);
	    }).on("close", function () {
	      0 < u._connectionRequestQueue.length && (u._connectionRequestQueue.forEach(function (e) {
	        return e.reject(p.networkError);
	      }), u._connectionRequestQueue = [], u._statLogConnection(p.networkError));
	    }), u;
	  }

	  function bE(e) {
	    var t = oE.call(this) || this;
	    return t.enabled = e, t;
	  }

	  function IE(e, t, n) {
	    var r = this;
	    return (r = uE.call(this, e, t, n) || this).error = null, r.userProfile = new dE(e, n), r.key = n.key, r.ekey = null != (t = n.ekey) ? t : "", r.error = n.error ? new p(n) : null, r;
	  }

	  function wE(e, t) {
	    this._iid = e, this.appInfo = new _m(t), this.user = new k(e, t), this.connectedAt = 1e3 * (null != (e = t.login_ts) ? e : 0), this.firstConnectedAt = 0, this.pingInterval = null != (e = t.ping_interval) ? e : 15e3, this.pongTimeout = null != (e = t.pong_timeout) ? e : 5e3, this.reconnectInterval = null != (e = null == (e = t.reconnect) ? void 0 : e.interval) ? e : 3e3, this.reconnectMaxInterval = null != (e = null == (e = t.reconnect) ? void 0 : e.max_interval) ? e : 6e4, this.reconnectRetryCount = null != (e = null == (e = t.reconnect) ? void 0 : e.retry_cnt) ? e : 5, this.reconnectIntervalMultiple = null != (e = null == (e = t.reconnect) ? void 0 : e.mul) ? e : 2, this.maxUnreadCountOnSuperGroup = null != (e = t.max_unread_cnt_on_super_group) ? e : 100, this.profileImageEncryption = !!t.profile_image_encryption, this.concurrentCallLimit = null != (e = t.concurrent_call_limit) ? e : 5, this.backOffDelay = null != (e = t.back_off_delay) ? e : 100;
	  }

	  function TE(e) {
	    var e = e.userProfile,
	        t = cE.call(this) || this;
	    return t.userProfile = e, t;
	  }

	  function SE(e, t) {
	    var n = this;
	    return (n = lE.call(this, e) || this).userId = null != (e = null != (e = t.guest_id) ? e : t.user_id) ? e : "", n.nickname = null != (e = null != (e = t.nickname) ? e : t.name) ? e : "", n.plainProfileUrl = null != (e = null != (e = t.profile_url) ? e : t.image) ? e : "", n.requireAuth = null != (e = t.require_auth_for_profile_image) && e, n.metaData = null != (e = t.metadata) ? e : {}, n.connectionStatus = rE.NON_AVAILABLE, ly(rE, t.is_online) ? n.connectionStatus = t.is_online : c("boolean", t.is_online) && (n.connectionStatus = t.is_online ? rE.ONLINE : rE.OFFLINE), n.isActive = null == (e = t.is_active) || e, n.lastSeenAt = null != (e = t.last_seen_at) ? e : null, n.preferredLanguages = t.preferred_languages ? J_([], X_(t.preferred_languages), !1) : null, n.friendDiscoveryKey = null != (e = t.friend_discovery_key) ? e : null, n.friendName = null != (e = t.friend_name) ? e : null, n;
	  }

	  (gt = iE = iE || {})[gt.PENDING = 0] = "PENDING", gt[gt.ENABLED = 1] = "ENABLED", gt[gt.DISABLED = 2] = "DISABLED";
	  Object.defineProperty(NE.prototype, "isEnabled", {
	    get: function () {
	      return this.enabledstate === iE.ENABLED;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), NE.prototype._save = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.cacheContext.localCacheEnabled ? [4, this.cacheContext.preference.set(this.key, {
	              deviceId: this.deviceId,
	              statLogs: this.queue.map(function (e) {
	                return Ky.payloadify(e);
	              }),
	              generation: this.generation++,
	              lastFlushedAt: this.lastFlushedAt
	            })] : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, NE.prototype._flush = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (!this.isEnabled) return [3, 7];
	            if (this.isFlushing) return [3, 7];
	            this.isFlushing = !0, e.label = 1;

	          case 1:
	            return e.trys.push([1, 5, 6, 7]), 0 < (t = this.queue.slice(0, Math.min(this.limit, this.maxLimit))).length ? (n = new yE({
	              deviceId: this.deviceId,
	              statLogs: t
	            }), [4, this.requestQueue.send(n)]) : [3, 4];

	          case 2:
	            return e.sent(), this.queue = this.queue.slice(t.length), [4, this._save()];

	          case 3:
	            e.sent(), e.label = 4;

	          case 4:
	            return this.limit = this.baseLimit, this.lastFlushedAt = Date.now(), [3, 7];

	          case 5:
	            return e.sent(), this.limit = this.limit + 20, [3, 7];

	          case 6:
	            return this.isFlushing = !1, [7];

	          case 7:
	            return [2];
	        }
	      });
	    });
	  }, NE.prototype.init = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.key = r, this.cacheContext.localCacheEnabled ? [4, this.cacheContext.preference.get(this.key)] : [3, 4];

	          case 1:
	            return (t = e.sent()) ? (this.deviceId = t.deviceId, this.queue = t.statLogs.map(function (e) {
	              return new Ky({
	                type: e.stat_type,
	                ts: e.ts,
	                data: e.data
	              });
	            }), this.generation = t.generation, this.lastFlushedAt = t.lastFlushedAt, 108e5 <= Date.now() - this.lastFlushedAt && this.queue.length >= this.minLimit ? (t = Math.min(Math.floor(18e4 * Math.random()), 100), [4, fm(t)]) : [3, 4]) : [3, 4];

	          case 2:
	            return e.sent(), [4, this._flush()];

	          case 3:
	            e.sent(), e.label = 4;

	          case 4:
	            return this.dispatcher.on(function (e) {
	              var t;
	              e instanceof xy ? (t = e.statLog, n.put(t)) : e instanceof pE && (n.enabledstate = e.enabled ? iE.ENABLED : iE.DISABLED, n.isEnabled ? n.queue.length >= n.limit && n._flush() : n.clear());
	            }), [2];
	        }
	      });
	    });
	  }, NE.prototype.put = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.enabledstate === iE.DISABLED ? [3, 3] : (this.queue.push(t), [4, this._save()]);

	          case 1:
	            return e.sent(), this.queue.length >= this.limit ? [4, this._flush()] : [3, 3];

	          case 2:
	            e.sent(), e.label = 3;

	          case 3:
	            return [2];
	        }
	      });
	    });
	  }, NE.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.queue = [], this.generation = 1, [4, this._save()];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  };
	  var CE,
	      kE = NE;

	  function NE(e) {
	    var t = e.cacheContext,
	        n = e.requestQueue,
	        r = e.dispatcher,
	        i = e.baseLimit,
	        i = void 0 === i ? 100 : i,
	        s = e.maxLimit,
	        s = void 0 === s ? 1e3 : s,
	        e = e.minLimit,
	        e = void 0 === e ? 10 : e;
	    this.queue = [], this.enabledstate = iE.PENDING, this.isFlushing = !1, this.generation = 1, this.lastFlushedAt = 0, this.deviceId = sy(), this.cacheContext = t, this.requestQueue = n, this.dispatcher = r, this.baseLimit = i, this.limit = i, this.maxLimit = s, this.minLimit = e;
	  }

	  (ds = CE = CE || {})[ds.NONE = 0] = "NONE", ds[ds.VERBOSE = 1] = "VERBOSE", ds[ds.DEBUG = 2] = "DEBUG", ds[ds.INFO = 3] = "INFO", ds[ds.WARN = 4] = "WARN", ds[ds.ERROR = 5] = "ERROR";
	  VE.prototype.verbose = function () {
	    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

	    this.level <= CE.VERBOSE && console.log.apply(console, J_(["[verbose]"], X_(e), !1));
	  }, VE.prototype.debug = function () {
	    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

	    this.level <= CE.DEBUG && console.log.apply(console, J_(["[debug]"], X_(e), !1));
	  }, VE.prototype.info = function () {
	    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

	    this.level <= CE.INFO && console.log.apply(console, J_(["[info]"], X_(e), !1));
	  }, VE.prototype.warn = function () {
	    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

	    this.level <= CE.WARN && console.warn.apply(console, J_(["[warn]"], X_(e), !1));
	  }, VE.prototype.error = function () {
	    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

	    this.level <= CE.ERROR && console.error.apply(console, J_(["[error]"], X_(e), !1));
	  };
	  var AE,
	      OE,
	      RE,
	      DE,
	      ME = VE,
	      xE = {},
	      N = (GE.of = function (e) {
	    if (xE[e]) return xE[e];
	    throw p.lostInstance;
	  }, GE),
	      ci = (HE.prototype.init = function (e, t) {
	    var n = t.sdkState,
	        r = t.dispatcher,
	        i = t.sessionManager,
	        s = t.requestQueue,
	        a = t.logger,
	        t = (t.onlineDetector, t.cacheContext),
	        t = void 0 === t ? null : t;
	    this._iid = e, this._cacheContext = t, this._sdkState = n, this._dispatcher = r, this._sessionManager = i, this._requestQueue = s, this._logger = a;
	  }, HE),
	      LE = (o(jE, DE = h), jE),
	      PE = (o(FE, RE = S), FE),
	      UE = (o(qE, OE = jn), qE.payloadify = function (e) {
	    return e ? w(f(f({}, OE.payloadify.call(this, e)), {
	      reply_count: e.replyCount,
	      most_replies: Array.isArray(e.mostRepliedUsers) ? e.mostRepliedUsers.map(function (e) {
	        return k.payloadify(e);
	      }) : [],
	      last_replied_at: e.lastRepliedAt,
	      updated_at: e.updatedAt
	    })) : null;
	  }, qE);

	  function qE(e, t) {
	    var n = this;
	    return (n = OE.call(this, e) || this).replyCount = 0, n.mostRepliedUsers = null, n.lastRepliedAt = 0, n.updatedAt = 0, n.replyCount = null != (e = t.reply_count) ? e : 0, n.mostRepliedUsers = t.hasOwnProperty("most_replies") && hy("object", t.most_replies) ? t.most_replies.map(function (e) {
	      return new k(n._iid, e);
	    }) : [], n.lastRepliedAt = null != (e = t.last_replied_at) ? e : 0, n.updatedAt = null != (e = t.updated_at) ? e : 0, n;
	  }

	  function FE(e, t) {
	    var n = this;
	    return (n = RE.call(this, e, t) || this).url = t.url, n.fileSize = null != (e = t.file_size) ? e : 0, n.thumbnailSizes = null != (e = t.thumbnails) ? e : [], n.requireAuth = null != (e = t.require_auth) && e, n;
	  }

	  function jE(e) {
	    var t = DE.call(this) || this;
	    if (t.method = T.POST, t.path = "".concat(rg), t.params = w({
	      file: e.file,
	      channel_url: e.channelUrl
	    }), e.thumbnailSizes) for (var n = 0; n < e.thumbnailSizes.length; n++) {
	      var r = e.thumbnailSizes[n],
	          i = r.maxWidth,
	          r = r.maxHeight;
	      t.params["thumbnail".concat(n + 1)] = "".concat(i, ",").concat(r);
	    }
	    return t.requestId = e.requestId, t;
	  }

	  function HE() {}

	  function GE(e, t) {
	    var n, r, i, s;
	    return this.connectedAt = 0, this.firstConnectedAt = 0, this.connectionHandlers = new Map(), this.userEventHandlers = new Map(), xE[e] || (xE[e] = this, n = null != (n = t.options) ? n : new dy(), r = this.sdkState = {
	      appId: t.appId,
	      appVersion: null != (r = t.appVersion) ? r : "",
	      appState: "foreground",
	      userId: null,
	      extensions: {},
	      api: {
	        host: null != (r = t.apiHost) ? r : "https://api-".concat(t.appId, ".sendbird.com")
	      },
	      websocket: {
	        host: null != (r = t.websocketHost) ? r : "wss://ws-".concat(t.appId, ".sendbird.com"),
	        pingerDisabled: !!t.noPingpong,
	        pingInterval: null,
	        pongTimeout: null,
	        connectMaxRetry: 2,
	        reconnectMaxRetry: -1,
	        reconnectRetryStrategy: new zm(),
	        responseTimeout: n.websocketResponseTimeout
	      }
	    }, this.appInfo = null, this.subscribedUnreadMessageCount = {
	      all: 0,
	      customTypes: {},
	      ts: 0
	    }, i = this.logger = new ME(), this.logger.level = null != (s = t.logLevel) ? s : CE.WARN, this.connectedAt = 0, this.firstConnectedAt = 0, this.connectionHandlers = new Map(), this.userEventHandlers = new Map(), this.cacheContext = new iy({
	      encryption: t.encryption,
	      store: t.store,
	      localCacheEnabled: null != (s = t.localCacheEnabled) && s
	    }), this.debugMode = null != (s = t.debugMode) && s, this.maxSuperGroupChannelUnreadCount = Z_.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL, this.useMemberInfoInMessage = n.useMemberInfoInMessage, this.typingIndicatorInvalidateTime = n.typingIndicatorInvalidateTime, this.typingIndicatorThrottle = n.typingIndicatorThrottle, this.concurrentCallLimit = null, this.backOffDelay = null, t = this.dispatcher = new gy(), s = new _y(), this.requestQueue = new Hm(e, {
	      auth: s,
	      sdkState: r,
	      dispatcher: t,
	      logger: i
	    }), this.sessionManager = new Wm({
	      auth: s,
	      sdkState: r,
	      dispatcher: t,
	      requestQueue: this.requestQueue,
	      logger: i
	    }), this.connectionManager = new _E(e, {
	      sdkState: r,
	      connectionHandlers: this.connectionHandlers,
	      dispatcher: t,
	      sessionManager: this.sessionManager,
	      websocketClient: this.requestQueue.commandRouter.websocketClient,
	      logger: i
	    }), this.statLogCollector = new kE({
	      cacheContext: this.cacheContext,
	      requestQueue: this.requestQueue,
	      dispatcher: t
	    })), xE[e];
	  }

	  function VE() {
	    this.level = CE.WARN;
	  }

	  (ri = AE = AE || {}).ADD = "add", ri.DELETE = "delete";

	  function BE(e) {
	    this.messageId = 0, this.userId = null, this.key = null, this.operation = null, this.updatedAt = 0;
	    var t = c("string", e.msg_id) ? parseInt(e.msg_id) : e.msg_id,
	        n = e.user_id,
	        r = e.operation ? e.operation.toLowerCase() : null,
	        i = e.reaction,
	        e = e.updated_at;
	    t && c("string", n) && c("string", r) && ly(AE, r) && c("string", i) && i && c("number", e) && (this.messageId = t, this.userId = n, this.key = i, this.operation = r, this.updatedAt = e);
	  }

	  Object.defineProperty(t0.prototype, "isEmpty", {
	    get: function () {
	      return 0 === this.userIds.length;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), t0.payloadify = function (e) {
	    return e ? w({
	      key: e.key,
	      user_ids: e.userIds,
	      updated_at: e.updatedAt
	    }) : null;
	  }, t0.prototype.applyEvent = function (e) {
	    if (e.key === this.key && this.updatedAt <= e.updatedAt) {
	      if (!this._version[e.userId] || this._version[e.userId] <= e.updatedAt) {
	        var t = this.userIds.indexOf(e.userId);

	        switch (e.operation) {
	          case AE.ADD:
	            t < 0 && this.userIds.push(e.userId);
	            break;

	          case AE.DELETE:
	            0 <= t && this.userIds.splice(t, 1);
	        }

	        this._version[e.userId] = e.updatedAt;
	      }

	      this.updatedAt = Math.max(this.updatedAt, e.updatedAt);
	    }
	  };
	  var KE,
	      QE = t0,
	      zE = (e0.payloadify = function (e) {
	    return e ? w({
	      key: e.key,
	      value: null != (e = e.value) ? e : []
	    }) : null;
	  }, e0),
	      WE = ($E.payloadify = function (e) {
	    var t;
	    return e ? w({
	      url: e.url,
	      secure_url: e.secureUrl,
	      type: e.type,
	      width: null != (t = e.width) ? t : 0,
	      height: null != (t = e.height) ? t : 0,
	      alt: e.alt
	    }) : null;
	  }, $E),
	      YE = (ZE.payloadify = function (e) {
	    return e ? w({
	      "og:title": e.title,
	      "og:url": e.url,
	      "og:description": e.description,
	      "og:image": e.defaultImage ? WE.payloadify(e.defaultImage) : null
	    }) : null;
	  }, ZE),
	      XE = (JE.payloadify = function (e) {
	    return e ? w({
	      name: e.name,
	      volume: e.volume
	    }) : null;
	  }, JE);

	  function JE(e) {
	    var t;
	    this.name = null, this.volume = 0, this.name = null != (t = e.name) ? t : "default", this.volume = null != (t = e.volume) ? t : 1;
	  }

	  function ZE(e) {
	    this.title = null, this.url = null, this.description = null, this.defaultImage = null, e.hasOwnProperty("og:title") && (this.title = e["og:title"]), e.hasOwnProperty("og:url") && (this.url = e["og:url"]), e.hasOwnProperty("og:description") && (this.description = e["og:description"]), e.hasOwnProperty("og:image") && (this.defaultImage = new WE(e["og:image"]));
	  }

	  function $E(e) {
	    this.url = null, this.secureUrl = null, this.type = null, this.width = 0, this.height = 0, this.alt = null, this.url = e.url, e.hasOwnProperty("secure_url") && (this.secureUrl = e.secure_url), e.hasOwnProperty("type") && (this.type = e.type), e.hasOwnProperty("width") && (this.width = e.width), e.hasOwnProperty("height") && (this.height = e.height), e.hasOwnProperty("alt") && (this.alt = e.alt);
	  }

	  function e0(e) {
	    this.key = e.key, this.value = hy("string", e.value) ? J_([], X_(e.value), !1) : [];
	  }

	  function t0(e) {
	    var t,
	        n,
	        r = e.key,
	        i = null != (i = J_([], X_(e.user_ids), !1)) ? i : [],
	        s = e.updated_at,
	        a = (c("string", r) && r && hy("string", i) && 0 < i.length && c("number", s) && (this.key = r, this.userIds = i, this.updatedAt = s), {});

	    try {
	      for (var o = se(this.userIds), u = o.next(); !u.done; u = o.next()) a[u.value] = this.updatedAt;
	    } catch (e) {
	      t = {
	        error: e
	      };
	    } finally {
	      try {
	        u && !u.done && (n = o.return) && n.call(o);
	      } finally {
	        if (t) throw t.error;
	      }
	    }

	    this._version = a;
	  }

	  (i = KE = KE || {}).PENDING = "pending", i.IN_QUEUE = "in_queue", i.SENT = "sent", i.FAILED = "failed", i.CANCELED = "canceled", i.REMOVED = "removed";

	  function n0(e) {
	    return c("number", e.prevResultSize) && c("number", e.nextResultSize) && c("boolean", e.isInclusive) && c("boolean", e.reverse) && c("string", e.messageTypeFilter) && ly(Em, e.messageTypeFilter) && hy("string", e.customTypesFilter, !0) && hy("string", e.senderUserIdsFilter, !0) && c("boolean", e.includeMetaArray) && c("boolean", e.includeReactions) && c("boolean", e.includeParentMessageInfo);
	  }

	  o(j0, f0 = jn), j0.payloadify = function (e) {
	    var t;
	    return e ? w(f(f({}, f0.payloadify.call(this, e)), {
	      channel_url: e.channelUrl,
	      channel_type: e.channelType,
	      message_id: e.messageId,
	      type: function (e) {
	        switch (e) {
	          case gm.BASE:
	            return "";

	          case gm.USER:
	            return "MESG";

	          case gm.FILE:
	            return "FILE";

	          case gm.ADMIN:
	            return "ADMM";
	        }
	      }(e.messageType),
	      parent_message_id: e.parentMessageId,
	      data: e.data,
	      custom_type: e.customType,
	      mention_type: e.mentionType,
	      mentioned_user_ids: e.mentionedUserIds,
	      mentioned_users: null == (t = e.mentionedUsers) ? void 0 : t.map(function (e) {
	        return k.payloadify(e);
	      }),
	      mentioned_message_template: e.mentionedMessageTemplate,
	      thread_info: e.threadInfo ? UE.payloadify(e.threadInfo) : null,
	      reactions: e.reactions.map(function (e) {
	        return QE.payloadify(e);
	      }),
	      sorted_metaarray: null == (t = e.metaArrays) ? void 0 : t.map(function (e) {
	        return zE.payloadify(e);
	      }),
	      og_tag: YE.payloadify(e.ogMetaData),
	      silent: e.silent,
	      is_op_msg: e.isOperatorMessage,
	      apple_critical_alert_options: XE.payloadify(e.appleCriticalAlertOptions),
	      created_at: e.createdAt,
	      updated_at: e.updatedAt,
	      scheduled_message_id: null == (t = e.scheduledInfo) ? void 0 : t.scheduledMessageId,
	      scheduled_at: null == (t = e.scheduledInfo) ? void 0 : t.scheduledAt,
	      scheduled_status: e._scheduledStatus
	    })) : null;
	  }, j0.prototype.isIdentical = function (e) {
	    return this.messageId === e.messageId;
	  }, j0.prototype.isEqual = function (e) {
	    return ty(this, e);
	  }, j0.prototype.isUserMessage = function () {
	    return this.messageType === gm.USER;
	  }, j0.prototype.isFileMessage = function () {
	    return this.messageType === gm.FILE;
	  }, j0.prototype.isAdminMessage = function () {
	    return this.messageType === gm.ADMIN;
	  }, j0.prototype.serialize = function () {
	    return tE(this);
	  }, j0.prototype.getMetaArraysByKeys = function (t) {
	    return this.metaArrays.filter(function (e) {
	      return t.includes(e.key);
	    });
	  }, j0.prototype.applyThreadInfoUpdateEvent = function (e) {
	    return this.parentMessageId === e.targetMessageId && (this.threadInfo = e.threadInfo), !1;
	  }, j0.prototype.applyReactionEvent = function (e) {
	    if (this.messageId === e.messageId) {
	      for (var t = !1, n = 0; n < this.reactions.length; n++) if (this.reactions[n].key === e.key) {
	        this.reactions[n].applyEvent(e), this.reactions[n].isEmpty && this.reactions.splice(n, 1), t = !0;
	        break;
	      }

	      t || "add" !== e.operation || this.reactions.push(new QE(QE.payloadify({
	        key: e.key,
	        userIds: [e.userId],
	        updatedAt: e.updatedAt
	      })));
	    }
	  }, j0.prototype.applyParentMessage = function (e) {
	    if (this.parentMessageId === e.messageId) {
	      var t = this.parentMessage.updatedAt;
	      if (e.updatedAt >= t) return this.parentMessage = e, !0;
	    }

	    return !1;
	  };

	  var r0,
	      i0,
	      s0,
	      a0,
	      o0,
	      u0,
	      c0,
	      l0,
	      h0,
	      d0,
	      f0,
	      p0 = j0,
	      v0 = (o(F0, d0 = k), F0.payloadify = function (e) {
	    return e ? w(f(f({}, d0.payloadify.call(this, e)), {
	      role: e.role,
	      is_blocked_by_me: e.isBlockedByMe
	    })) : null;
	  }, F0),
	      _0 = (o(q0, h0 = p0), q0.payloadify = function (e) {
	    return e ? w(f(f({}, h0.payloadify.call(this, e)), {
	      user: v0.payloadify(e.sender),
	      req_id: e.reqId,
	      is_reply_to_channel: e.replyToChannel,
	      request_state: e.sendingStatus,
	      error_code: e.errorCode
	    })) : null;
	  }, Object.defineProperty(q0.prototype, "isResendable", {
	    get: function () {
	      return this.sendingStatus === Sm.FAILED && 0 < (e = this.errorCode) && 0 <= uy.indexOf(e);
	      var e;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), q0.prototype.isIdentical = function (e) {
	    return 0 < this.messageId && 0 < e.messageId ? this.messageId === e.messageId : this.reqId === e.reqId;
	  }, q0),
	      y0 = (U0.payloadify = function (e) {
	    return e ? w({
	      url: "",
	      width: e.maxWidth,
	      height: e.maxHeight,
	      real_width: 0,
	      real_height: 0
	    }) : null;
	  }, Object.defineProperty(U0.prototype, "plainUrl", {
	    get: function () {
	      return this.url.split("?auth=")[0];
	    },
	    enumerable: !1,
	    configurable: !0
	  }), U0),
	      m0 = {
	    prevResultSize: 0,
	    nextResultSize: 0,
	    isInclusive: !1,
	    reverse: !1,
	    messageTypeFilter: Em.ALL,
	    customTypesFilter: null,
	    senderUserIdsFilter: null,
	    includeReactions: !1,
	    includeMetaArray: !1,
	    includeParentMessageInfo: !1
	  },
	      g0 = (o(P0, l0 = p0), P0.payloadify = function (e) {
	    return e ? w(f(f({}, l0.payloadify.call(this, e)), {
	      message: e.message,
	      translations: e.translations,
	      parent_message_info: I0(e.parentMessage)
	    })) : null;
	  }, P0.prototype.getThreadedMessagesByTimestamp = function (t, n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return n = f(f({}, m0), n), C(0 < this.messageId && c("number", t) && n0(n)).throw(p.invalidParameters), [4, Ib.of(this._iid).getThreadedMessagesByTimestamp(this, t, n)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, P0),
	      E0 = (L0.payloadify = function (e) {
	    return e ? w({
	      type: e.type,
	      vendor: e.vendor,
	      detail: e.detail
	    }) : null;
	  }, L0),
	      b0 = (o(x0, c0 = _0), x0.payloadify = function (e) {
	    return e ? w(f(f({}, c0.payloadify.call(this, e)), {
	      message: e.message,
	      translations: e.translations,
	      message_survival_seconds: e.messageSurvivalSeconds,
	      plugins: e.plugins.map(function (e) {
	        return E0.payloadify(e);
	      }),
	      parent_message_info: I0(e.parentMessage)
	    })) : null;
	  }, x0.prototype.getThreadedMessagesByTimestamp = function (t, n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return n = f(f({}, m0), n), C(0 < this.messageId && c("number", t) && n0(n)).throw(p.invalidParameters), [4, Ib.of(this._iid).getThreadedMessagesByTimestamp(this, t, n)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, x0),
	      I0 = function (e) {
	    if (e) switch (e.messageType) {
	      case gm.USER:
	        return b0.payloadify(e);

	      case gm.FILE:
	        return T0.payloadify(e);

	      case gm.ADMIN:
	        return g0.payloadify(e);
	    }
	    return null;
	  },
	      w0 = function (e, t) {
	    switch (t.type) {
	      case "MESG":
	        return new b0(e, t);

	      case "FILE":
	        return new T0(e, t);

	      case "ADMM":
	      case "BRDM":
	        return new g0(e, t);
	    }

	    return null;
	  },
	      T0 = (o(M0, u0 = _0), M0.payloadify = function (e) {
	    return e ? w(f(f({}, u0.payloadify.call(this, e)), {
	      url: e.plainUrl,
	      require_auth: e.requireAuth,
	      file: {
	        name: e.name,
	        size: e.size,
	        type: e.type,
	        data: e.data
	      },
	      thumbnails: e.thumbnails.map(function (e) {
	        return {
	          url: e.url,
	          width: e.width,
	          height: e.height,
	          real_width: e.realWidth,
	          real_height: e.realHeight
	        };
	      }),
	      message_survival_seconds: e.messageSurvivalSeconds,
	      parent_message_info: I0(e.parentMessage)
	    })) : null;
	  }, Object.defineProperty(M0.prototype, "url", {
	    get: function () {
	      return this.requireAuth ? "".concat(this.plainUrl, "?auth=").concat(vm(this._iid)) : this.plainUrl;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), M0.prototype.getThreadedMessagesByTimestamp = function (t, n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return n = f(f({}, m0), n), C(0 < this.messageId && c("number", t) && n0(n)).throw(p.invalidParameters), [4, Ib.of(this._iid).getThreadedMessagesByTimestamp(this, t, n)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, M0),
	      S0 = (o(D0, o0 = Wy), D0),
	      C0 = (o(R0, a0 = h), R0),
	      k0 = (o(O0, s0 = zy), O0),
	      N0 = (o(A0, i0 = S), A0);

	  function A0(e, t) {
	    var n,
	        r = this,
	        e = ((r = i0.call(this, e, t) || this).message = new T0(e, t), N.of(e).sdkState);
	    return r.isMentioned = jg(r.message.mentionType, null != (n = r.message.mentionedUserIds) ? n : r.message.mentionedUsers.map(function (e) {
	      return e.userId;
	    }), e.userId), r.forceUpdateLastMessage = null != (n = t.force_update_last_message) && n, r;
	  }

	  function O0(e, t, n) {
	    var r,
	        i = this,
	        e = ((i = s0.call(this, e, "FILE", n) || this).message = new T0(e, n), N.of(e).sdkState);
	    return i.isMentioned = jg(i.message.mentionType, null != (r = i.message.mentionedUserIds) ? r : null == (r = i.message.mentionedUsers) ? void 0 : r.map(function (e) {
	      return e.userId;
	    }), e.userId), i.forceUpdateLastMessage = null != (r = n.force_update_last_message) && r, i;
	  }

	  function R0(e) {
	    var t = this,
	        t = a0.call(this) || this,
	        n = [];
	    return e.mentionType === Im.USERS && (e.mentionedUserIds ? n = e.mentionedUserIds : e.mentionedUsers && (n = e.mentionedUsers.map(function (e) {
	      return e.userId;
	    }))), t.method = T.POST, t.path = "".concat(Rg(e.channelType), "/").concat(encodeURIComponent(e.channelUrl), "/messages"), t.params = w({
	      message_type: gm.FILE,
	      user_id: e.userId,
	      url: e.fileUrl,
	      mention_type: e.mentionType,
	      mentioned_user_ids: n,
	      file_name: e.fileName,
	      file_size: e.fileSize,
	      file_type: e.mimeType,
	      data: e.data,
	      custom_type: e.customType,
	      thumbnails: e.thumbnailSizes.map(function (e) {
	        return y0.payloadify(e);
	      }),
	      require_auth: e.requireAuth,
	      sorted_metaarray: null == (n = e.metaArrays) ? void 0 : n.map(function (e) {
	        return zE.payloadify(e);
	      }),
	      push_option: e.pushNotificationDeliveryOption,
	      parent_message_id: 0 < e.parentMessageId ? e.parentMessageId : null,
	      apple_critical_alert_options: XE.payloadify(e.appleCriticalAlertOptions),
	      reply_to_channel: e.isReplyToChannel,
	      req_id: e.reqId
	    }), t;
	  }

	  function D0(e) {
	    var t,
	        n = [];
	    return e.mentionType === Im.USERS && (e.mentionedUserIds ? n = e.mentionedUserIds : e.mentionedUsers && (n = e.mentionedUsers.map(function (e) {
	      return e.userId;
	    }))), o0.call(this, {
	      code: "FILE",
	      ackRequired: !0,
	      payload: w({
	        channel_url: e.channelUrl,
	        url: e.url,
	        name: null != (t = e.fileName) ? t : "",
	        type: null != (t = e.mimeType) ? t : "",
	        size: null != (t = e.fileSize) ? t : 0,
	        custom: e.data,
	        custom_type: e.customType,
	        thumbnails: e.thumbnailSizes,
	        require_auth: e.requireAuth,
	        metaarray: e.metaArrays,
	        mention_type: e.mentionType,
	        mentioned_user_ids: n,
	        push_option: e.pushNotificationDeliveryOption && e.pushNotificationDeliveryOption !== Tm.DEFAULT ? e.pushNotificationDeliveryOption : void 0,
	        apple_critical_alert_options: e.appleCriticalAlertOptions,
	        silent: e.silent,
	        reply_to_channel: e.isReplyToChannel,
	        parent_message_id: 0 < e.parentMessageId ? e.parentMessageId : null,
	        req_id: e.reqId
	      })
	    }) || this;
	  }

	  function M0(e, t) {
	    var n,
	        r = this,
	        i = ((r = u0.call(this, e, t) || this).messageParams = null, r.plainUrl = "", r.requireAuth = !1, r.name = null, r.size = 0, r.type = null, r.thumbnails = [], r.messageSurvivalSeconds = -1, r.messageType = gm.FILE, null != (i = t.file) ? i : null);
	    return r.plainUrl = (null != (n = null != (n = null == i ? void 0 : i.url) ? n : t.url) ? n : "").split("?auth=")[0], r.name = null != (n = null != (n = null == i ? void 0 : i.name) ? n : t.name) ? n : "File", r.size = null != (n = null != (n = null == i ? void 0 : i.size) ? n : t.size) ? n : 0, r.data = null != (n = null != (n = null == i ? void 0 : i.data) ? n : t.custom) ? n : "", r.type = i ? null != (n = i.type) ? n : "" : null != (i = t.type) ? i : "", r.requireAuth = null != (n = t.require_auth) && n, r.thumbnails = t.thumbnails ? t.thumbnails.map(function (e) {
	      return new y0(f(f({}, e), {
	        url: "".concat(e.url.split("?auth=")[0]).concat(r.requireAuth ? "?auth=".concat(vm(r._iid)) : "")
	      }));
	    }) : [], r.messageSurvivalSeconds = null != (i = t.message_survival_seconds) ? i : -1, t.parent_message_info && (n = t.parent_message_info, i = f(f({}, n), {
	      message_id: r.parentMessageId,
	      channel_url: r.channelUrl,
	      channel_type: r.channelType,
	      file: n.file,
	      url: null == (i = n.file) ? void 0 : i.url,
	      require_auth: null == (t = n.file) ? void 0 : t.require_auth
	    }), r.parentMessage = w0(e, i)), r;
	  }

	  function x0(e, t) {
	    var n,
	        r,
	        i,
	        s = this;
	    if ((s = c0.call(this, e, t) || this).message = "", s.messageParams = null, s.translations = {}, s.translationTargetLanguages = [], s.messageSurvivalSeconds = -1, s.plugins = [], s.message = t.message, s.messageType = gm.USER, s.translations = null != (r = t.translations) ? r : {}, s.translationTargetLanguages = null != (r = t.target_langs) ? r : [], s.translations === {} && 0 < s.translationTargetLanguages.length) try {
	      for (var a = se(s.translationTargetLanguages), o = a.next(); !o.done; o = a.next()) {
	        var u = o.value;
	        s.translations[u] = "";
	      }
	    } catch (e) {
	      n = {
	        error: e
	      };
	    } finally {
	      try {
	        o && !o.done && (i = a.return) && i.call(a);
	      } finally {
	        if (n) throw n.error;
	      }
	    }
	    return s.messageSurvivalSeconds = null != (r = t.message_survival_seconds) ? r : -1, s.plugins = t.plugins ? t.plugins.map(function (e) {
	      return new E0(e);
	    }) : [], t.parent_message_info && (i = t.parent_message_info, t = f(f({}, i), {
	      created_at: i.ts,
	      message_id: s.parentMessageId,
	      channel_url: s.channelUrl,
	      channel_type: s.channelType,
	      file: i.file,
	      url: null == (n = i.file) ? void 0 : n.url,
	      require_auth: null == (r = i.file) ? void 0 : r.require_auth
	    }), s.parentMessage = w0(e, w(t))), s;
	  }

	  function L0(e) {
	    var t;
	    this.type = null, this.vendor = null, this.detail = {}, this.type = null != (t = e.type) ? t : "", this.vendor = null != (t = e.vendor) ? t : "", e.hasOwnProperty("detail") && c("object", e.detail) && !Array.isArray(e.detail) && (this.detail = e.detail);
	  }

	  function P0(e, t) {
	    var n,
	        r = this;
	    return (r = l0.call(this, e, t) || this).message = null, r.translations = {}, r.message = null != (n = t.message) ? n : "", r.messageType = gm.ADMIN, r.translations = null != (n = t.translations) ? n : {}, t.parent_message_info && (n = t.parent_message_info, n = f(f({}, n), {
	      message_id: r.parentMessageId,
	      channel_url: r.channelUrl,
	      channel_type: r.channelType,
	      file: n.file,
	      url: null == (t = n.file) ? void 0 : t.url,
	      require_auth: null == (t = n.file) ? void 0 : t.require_auth
	    }), r.parentMessage = w0(e, n)), r;
	  }

	  function U0(e) {
	    var t;
	    this.url = null, this.width = 0, this.height = 0, this.realWidth = 0, this.realHeight = 0, this.url = e.url, this.width = e.width, this.height = e.height, this.realWidth = null != (t = e.real_width) ? t : e.width, this.realHeight = null != (t = e.real_height) ? t : e.height;
	  }

	  function q0(e, t) {
	    var n = this;
	    if ((n = h0.call(this, e, t) || this).sender = null, n.reqId = "", n.replyToChannel = !1, n.sendingStatus = null, n.errorCode = 0, n.sender = t.user ? new v0(n._iid, t.user) : t.sender_id, n.reqId = null != (e = null != (e = t.req_id) ? e : t.request_id) ? e : "", n.replyToChannel = null != (e = t.is_reply_to_channel) && e, t.request_state && ly(Sm, t.request_state) && (n.sendingStatus = t.request_state), !n.sendingStatus) if (0 < n.messageId) n.sendingStatus = Sm.SUCCEEDED;else if (n.scheduledInfo) switch (n._scheduledStatus = t.scheduled_status, t.scheduled_status) {
	      case KE.SENT:
	      case KE.IN_QUEUE:
	        n.sendingStatus = Sm.SUCCEEDED;
	        break;

	      case KE.PENDING:
	        n.sendingStatus = Sm.SCHEDULED;
	        break;

	      case KE.FAILED:
	      case KE.REMOVED:
	        n.sendingStatus = Sm.FAILED;
	        break;

	      case KE.CANCELED:
	        n.sendingStatus = Sm.CANCELED;
	    } else n.sendingStatus = Sm.PENDING;
	    return n.errorCode = null != (e = t.error_code) ? e : 0, n;
	  }

	  function F0(e, t) {
	    e = d0.call(this, e, t) || this;
	    return e.role = null, e.isBlockedByMe = !1, e.role = ly(mm, t.role) ? t.role : mm.NONE, t.hasOwnProperty("is_blocked_by_me") && (e.isBlockedByMe = t.is_blocked_by_me), e;
	  }

	  function j0(e, t) {
	    var n = this,
	        e = ((n = f0.call(this, e) || this).channelUrl = null, n.channelType = ym.BASE, n.messageId = 0, n.parentMessageId = null, n.parentMessage = null, n.silent = !1, n.isOperatorMessage = !1, n.messageType = gm.BASE, n.data = null, n.customType = null, n.mentionType = null, n.mentionedUsers = [], n.mentionedUserIds = [], n.mentionedMessageTemplate = null, n.threadInfo = null, n.reactions = [], n.metaArrays = [], n.ogMetaData = null, n.appleCriticalAlertOptions = null, n.createdAt = 0, n.updatedAt = 0, n.scheduledInfo = null, n._scheduledStatus = null, n.messageId = null != (e = null != (e = t.msg_id) ? e : t.message_id) ? e : 0, n.channelUrl = t.channel_url, n.channelType = ly(ym, t.channel_type) ? t.channel_type : ym.GROUP, t.channel && (t.channel.channel_url && (n.channelUrl = t.channel.channel_url), t.channel.channel_type && (n.channelType = t.channel.channel_type)), n.parentMessageId = null != (e = "string" == typeof t.parent_message_id ? parseInt(t.parent_message_id) : t.parent_message_id) ? e : 0, n.data = null != (e = t.data) ? e : "", n.customType = null != (e = t.custom_type) ? e : "", n.mentionType = ly(Im, t.mention_type) ? t.mention_type : null, t.mentioned_users),
	        e = (n.mentionedUsers = e ? e.map(function (e) {
	      return new k(n._iid, e);
	    }) : null, t.mentioned_user_ids);
	    n.mentionedUserIds = null != e ? e : null, n.mentionedMessageTemplate = null != (e = t.mentioned_message_template) ? e : "", n.threadInfo = t.thread_info ? new UE(n._iid, t.thread_info) : null, n.reactions = t.reactions ? t.reactions.map(function (e) {
	      return new QE(e);
	    }) : [];

	    for (var r = null != (e = t.metaarray) ? e : {}, i = null != (e = t.metaarray_key_order) ? e : Object.keys(r).sort(function (e, t) {
	      return e.localeCompare(t);
	    }), s = 0; s < i.length; s++) {
	      var a = i[s];
	      n.metaArrays.push(new zE({
	        key: a,
	        value: r[a] || []
	      }));
	    }

	    return t.sorted_metaarray && (n.metaArrays = t.sorted_metaarray.map(function (e) {
	      return new zE(e);
	    })), n.ogMetaData = t.og_tag ? new YE(t.og_tag) : null, n.silent = null != (e = t.silent) && e, n.isOperatorMessage = null != (e = t.is_op_msg) && e, n.appleCriticalAlertOptions = t.apple_critical_alert_options ? new XE(t.apple_critical_alert_options) : null, n.createdAt = null != (e = null != (e = t.created_at) ? e : t.ts) ? e : 0, n.updatedAt = null != (e = t.updated_at) ? e : 0, "number" == typeof t.scheduled_message_id && "number" == typeof t.scheduled_at && t.scheduled_status && (n.scheduledInfo = {
	      scheduledMessageId: t.scheduled_message_id,
	      scheduledAt: t.scheduled_at
	    }, n._scheduledStatus = t.scheduled_status), n;
	  }

	  (li = r0 = r0 || {})[li.PENDING = 0] = "PENDING", li[li.UPLOADING = 1] = "UPLOADING", li[li.UPLOADED = 2] = "UPLOADED", li[li.SENDING = 3] = "SENDING", li[li.FAILED = 4] = "FAILED";

	  function H0(e) {
	    return ly(wm, e.replyType) && c("boolean", e.includeReactions) && c("boolean", e.includeMetaArray) && c("boolean", e.includeParentMessageInfo) && c("boolean", e.includeThreadInfo) && c("boolean", e.includePollDetails);
	  }

	  Object.defineProperty(Q0.prototype, "_shouldSendThroughWebSocket", {
	    get: function () {
	      return this._connectionState === im.CONNECTED || this._connectionState === im.CONNECTING || this._connectionState === im.RECONNECTING;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Q0.prototype._sendFileMessage = function (n, r) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._shouldSendThroughWebSocket ? (t = new S0(f(f({
	              channelUrl: n.url,
	              channelType: n.channelType,
	              url: r.params.fileUrl,
	              requireAuth: r.requireAuth
	            }, r.params), {
	              reqId: r.requestId
	            })), [4, this._requestQueue.send(t)]) : [3, 2];

	          case 1:
	            return [2, e.sent().as(k0).message];

	          case 2:
	            return t = new C0(f(f({
	              channelUrl: n.url,
	              channelType: n.channelType,
	              url: r.params.fileUrl,
	              userId: this._sdkState.userId,
	              requireAuth: r.requireAuth
	            }, r.params), {
	              reqId: r.requestId
	            })), [4, this._requestQueue.send(t)];

	          case 3:
	            return [2, e.sent().as(N0).message];
	        }
	      });
	    });
	  }, Q0.prototype._resolveMessageQueue = function (h) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o, u, c, l;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (!(t = this._queueMap.get(h.url))) return [3, 21];
	            if (t.isResolving) return [3, 20];
	            t.isResolving = !0, n = [], r = !0, e.label = 1;

	          case 1:
	            e.trys.push([1, 15, 16, 17]), i = se(t.messageQueue), s = i.next(), e.label = 2;

	          case 2:
	            if (s.done) return [3, 14];

	            switch ((a = s.value).state) {
	              case r0.PENDING:
	              case r0.UPLOADING:
	                return [3, 3];

	              case r0.UPLOADED:
	                return [3, 4];

	              case r0.FAILED:
	                return [3, 12];
	            }

	            return [3, 13];

	          case 3:
	            return r = !1, n.push(a), [3, 13];

	          case 4:
	            if (!r) return [3, 10];
	            e.label = 5;

	          case 5:
	            return e.trys.push([5, 8,, 9]), a.state = r0.SENDING, [4, this._sendFileMessage(h, a)];

	          case 6:
	            return o = e.sent(), a.deferred.resolve(o), [4, fm(100)];

	          case 7:
	            return e.sent(), [3, 9];

	          case 8:
	            return o = e.sent(), a.deferred.reject(o), [3, 9];

	          case 9:
	            return [3, 11];

	          case 10:
	            n.push(a), e.label = 11;

	          case 11:
	            return [3, 13];

	          case 12:
	            return a.deferred.reject(a.error.code === d.REQUEST_CANCELED ? p.fileUploadCanceled : a.error), [3, 13];

	          case 13:
	            return s = i.next(), [3, 2];

	          case 14:
	            return [3, 17];

	          case 15:
	            return c = e.sent(), c = {
	              error: c
	            }, [3, 17];

	          case 16:
	            try {
	              s && !s.done && (l = i.return) && l.call(i);
	            } finally {
	              if (c) throw c.error;
	            }

	            return [7];

	          case 17:
	            return u = t.isResolveRequestPending, t.messageQueue = n, t.isResolving = !1, t.isResolveRequestPending = !1, u ? [4, this._resolveMessageQueue(h)] : [3, 19];

	          case 18:
	            e.sent(), e.label = 19;

	          case 19:
	            return [3, 21];

	          case 20:
	            t.isResolveRequestPending = !0, e.label = 21;

	          case 21:
	            return [2];
	        }
	      });
	    });
	  }, Q0.prototype._uploadNextPendingItem = function (c) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o, u;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = this._queueMap.get(c.url), (n = t.messageQueue.find(function (e) {
	              return e.state === r0.PENDING;
	            })) ? ry(n.params.file) ? t.uploadQueue.length < 6 ? (n.state = r0.UPLOADING, t.uploadQueue.push(n), [4, this._onlineDetector.isOnline()]) : [3, 10] : [3, 11] : [3, 13];

	          case 1:
	            if (!e.sent()) return [3, 8];
	            e.label = 2;

	          case 2:
	            return e.trys.push([2, 4, 5, 7]), r = new LE({
	              file: n.params.file,
	              channelUrl: c.url,
	              thumbnailSizes: n.params.thumbnailSizes,
	              requestId: n.requestId
	            }), [4, this._requestQueue.send(r)];

	          case 3:
	            return r = e.sent(), a = r.as(PE), o = a.url, i = a.fileSize, i = void 0 === i ? n.params.fileSize : i, s = a.thumbnailSizes, s = void 0 === s ? n.params.thumbnailSizes : s, a = a.requireAuth, a = void 0 !== a && a, n.params.fileUrl = o, n.params.fileSize = i, n.params.thumbnailSizes = s, n.params.requireAuth = a, n.requireAuth = a, n.state = r0.UPLOADED, [3, 7];

	          case 4:
	            return o = e.sent(), n.state = r0.FAILED, n.error = o, [3, 7];

	          case 5:
	            return 0 <= (u = t.uploadQueue.findIndex(function (e) {
	              return e.requestId === n.requestId;
	            })) && (t.uploadQueue.splice(u, 1), this._uploadNextPendingItem(c)), [4, this._resolveMessageQueue(c)];

	          case 6:
	            return e.sent(), [7];

	          case 7:
	            return [3, 10];

	          case 8:
	            return n.state = r0.FAILED, n.error = p.connectionRequired, 0 <= (u = t.uploadQueue.findIndex(function (e) {
	              return e.requestId === n.requestId;
	            })) && (t.uploadQueue.splice(u, 1), this._uploadNextPendingItem(c)), [4, this._resolveMessageQueue(c)];

	          case 9:
	            e.sent(), e.label = 10;

	          case 10:
	            return [3, 13];

	          case 11:
	            return n.params.thumbnailSizes = [], n.state = r0.UPLOADED, [4, this._resolveMessageQueue(c)];

	          case 12:
	            e.sent(), e.label = 13;

	          case 13:
	            return [2];
	        }
	      });
	    });
	  }, Q0.prototype.request = function (n, r, i) {
	    var s;
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        return t = new rm(), ry(i.file) && (i.fileName = null != (s = i.fileName) ? s : i.file.name, i.mimeType = null != (s = i.mimeType) ? s : i.file.type, i.fileSize = null != (s = i.fileSize) ? s : i.file.size), this._queueMap.has(n.url) || this._queueMap.set(n.url, {
	          messageQueue: [],
	          uploadQueue: [],
	          isResolving: !1,
	          isResolveRequestPending: !1
	        }), this._queueMap.get(n.url).messageQueue.push({
	          requestId: r,
	          params: i,
	          state: r0.PENDING,
	          deferred: t,
	          requireAuth: i.requireAuth
	        }), this._uploadNextPendingItem(n), [2, t.promise];
	      });
	    });
	  }, Q0.prototype.cancel = function (e, t) {
	    void 0 === t && (t = null);

	    var n,
	        r,
	        i = this._queueMap.get(e.url);

	    if (i) {
	      i = t ? [i.messageQueue.find(function (e) {
	        return e.requestId === t;
	      })] : J_([], X_(i.messageQueue), !1);

	      try {
	        for (var s = se(i), a = s.next(); !a.done; a = s.next()) {
	          var o = a.value;
	          if (o) switch (o.state) {
	            case r0.PENDING:
	              o.state = r0.FAILED, o.error = p.requestCanceled, this._resolveMessageQueue(e);
	              break;

	            case r0.UPLOADING:
	              this._requestQueue.cancel(o.requestId);

	          }
	        }
	      } catch (e) {
	        n = {
	          error: e
	        };
	      } finally {
	        try {
	          a && !a.done && (r = s.return) && r.call(s);
	        } finally {
	          if (n) throw n.error;
	        }
	      }
	    }
	  };
	  var G0,
	      V0 = Q0,
	      B0 = {
	    prevResultSize: 0,
	    nextResultSize: 0,
	    isInclusive: !1,
	    reverse: !1,
	    messageTypeFilter: Em.ALL,
	    customTypesFilter: null,
	    senderUserIdsFilter: null,
	    replyType: wm.NONE,
	    includeReactions: !1,
	    includeMetaArray: !1,
	    includeParentMessageInfo: !1,
	    includeThreadInfo: !1,
	    showSubchannelMessagesOnly: !1
	  },
	      K0 = {
	    replyType: wm.NONE,
	    includeReactions: !1,
	    includeThreadInfo: !1,
	    includeMetaArray: !1,
	    includeParentMessageInfo: !1,
	    includePollDetails: !1
	  };

	  function Q0(e, t) {
	    var n = t.sdkState,
	        r = t.dispatcher,
	        i = t.requestQueue,
	        s = t.onlineDetector,
	        t = t.cacheContext,
	        a = this;
	    this._queueMap = new Map(), this._connectionState = null, this._onlineDetector = null, this._iid = e, this._sdkState = n, this._requestQueue = i, this._cacheContext = t, this._dispatcher = r, this._dispatcher.on(function (e) {
	      e instanceof jm && (a._connectionState = e.stateType);
	    }), this._onlineDetector = s;
	  }

	  (a = G0 = G0 || {}).UNKNOWN = "UNKNOWN", a.EVENT_MESSAGE_SENT_SUCCESS = "EVENT_MESSAGE_SENT_SUCCESS", a.EVENT_MESSAGE_SENT_FAILED = "EVENT_MESSAGE_SENT_FAILED", a.EVENT_MESSAGE_SENT_PENDING = "EVENT_MESSAGE_SENT_PENDING", a.EVENT_MESSAGE_RECEIVED = "EVENT_MESSAGE_RECEIVED", a.EVENT_MESSAGE_UPDATED = "EVENT_MESSAGE_UPDATED", a.EVENT_MESSAGE_DELETED = "EVENT_MESSAGE_DELETED", a.EVENT_MESSAGE_READ = "EVENT_MESSAGE_READ", a.EVENT_MESSAGE_DELIVERED = "EVENT_MESSAGE_DELIVERED", a.EVENT_MESSAGE_REACTION_UPDATED = "EVENT_MESSAGE_REACTION_UPDATED", a.EVENT_MESSAGE_THREADINFO_UPDATED = "EVENT_MESSAGE_THREADINFO_UPDATED", a.EVENT_MESSAGE_OFFSET_UPDATED = "EVENT_MESSAGE_OFFSET_UPDATED", a.REQUEST_MESSAGE = "REQUEST_MESSAGE", a.REQUEST_RESEND_MESSAGE = "REQUEST_RESEND_MESSAGE", a.REQUEST_THREADED_MESSAGE = "REQUEST_THREADED_MESSAGE", a.REQUEST_MESSAGE_CHANGELOGS = "REQUEST_MESSAGE_CHANGELOGS", a.SYNC_MESSAGE_FILL = "SYNC_MESSAGE_FILL", a.SYNC_MESSAGE_BACKGROUND = "SYNC_MESSAGE_BACKGROUND", a.SYNC_MESSAGE_CHANGELOGS = "SYNC_MESSAGE_CHANGELOGS", a.LOCAL_MESSAGE_PENDING_CREATED = "LOCAL_MESSAGE_PENDING_CREATED", a.LOCAL_MESSAGE_FAILED = "LOCAL_MESSAGE_FAILED", a.LOCAL_MESSAGE_CANCELED = "LOCAL_MESSAGE_CANCELED", a.LOCAL_MESSAGE_RESEND_STARTED = "LOCAL_MESSAGE_RESEND_STARTED";
	  o(eb, Y0 = ay);
	  var z0,
	      W0,
	      Y0,
	      X0,
	      J0 = eb,
	      Z0 = (o($0, W0 = ay), $0);

	  function $0(e) {
	    var t = e.messageIds,
	        e = e.source,
	        n = W0.call(this) || this;
	    return n.messageIds = t, n.source = e, n;
	  }

	  function eb(e) {
	    var t = e.messages,
	        e = e.source,
	        n = Y0.call(this) || this;
	    return n.messages = t, n.source = e, n;
	  }

	  function tb(e) {
	    var t = e.reqId,
	        e = e.source,
	        n = X0.call(this) || this;
	    return n.reqId = t, n.source = e, n;
	  }

	  o(tb, X0 = ay);
	  o(Hb, db = h);

	  var nb,
	      rb,
	      ib,
	      sb,
	      ab,
	      ob,
	      ub,
	      cb,
	      lb,
	      hb,
	      db,
	      fb = Hb,
	      pb = (o(jb, hb = S), jb),
	      vb = (o(Fb, lb = h), Fb),
	      _b = (o(qb, cb = S), qb),
	      yb = (o(Ub, ub = h), Ub),
	      mb = (o(Pb, ob = S), Pb),
	      gb = (o(Lb, ab = h), Lb),
	      Eb = (o(xb, sb = S), xb),
	      bb = {},
	      Ib = (Mb.of = function (e) {
	    return bb[e];
	  }, Mb.prototype.buildMessageFromSerializedData = function (e) {
	    var t = nE(e);

	    switch (t.messageType) {
	      case gm.USER:
	        return new b0(this._iid, b0.payloadify(t));

	      case gm.FILE:
	        return new T0(this._iid, T0.payloadify(t));

	      case gm.ADMIN:
	        return new g0(this._iid, g0.payloadify(t));
	    }

	    return null;
	  }, Mb.prototype.buildUserMessageCreateParamsFromSerializedData = function (e, t) {
	    return w({
	      data: t.data,
	      customType: t.customType,
	      mentionType: t.mentionType,
	      mentionedUserIds: t.mentionedUserIds,
	      mentionedUsers: t.mentionedUsers,
	      mentionedMessageTemplate: t.mentionedMessageTemplate,
	      metaArrays: t.metaArrays,
	      parentMessageId: t.parentMessageId,
	      isReplyToChannel: e.isReplyToChannel,
	      pushNotificationDeliveryOption: e.pushNotificationDeliveryOption,
	      appleCriticalAlertOptions: t.appleCriticalAlertOptions,
	      reqId: t.reqId,
	      message: t.message,
	      translationTargetLanguages: Object.keys(t.translations)
	    });
	  }, Mb.prototype.buildFileMessageCreateParamsFromSerializedData = function (e, t) {
	    return w({
	      data: t.data,
	      customType: t.customType,
	      mentionType: t.mentionType,
	      mentionedUserIds: t.mentionedUserIds,
	      mentionedUsers: t.mentionedUsers,
	      mentionedMessageTemplate: t.mentionedMessageTemplate,
	      metaArrays: t.metaArrays,
	      parentMessageId: t.parentMessageId,
	      isReplyToChannel: e.isReplyToChannel,
	      pushNotificationDeliveryOption: e.pushNotificationDeliveryOption,
	      appleCriticalAlertOptions: t.appleCriticalAlertOptions,
	      reqId: t.reqId,
	      file: e.file,
	      fileKey: e.fileKey,
	      fileUrl: t.url,
	      fileName: t.name,
	      fileSize: t.size,
	      mimeType: t.type,
	      thumbnailSizes: t.thumbnails.map(function (e) {
	        return {
	          maxWidth: e.width,
	          maxHeight: e.height
	        };
	      }),
	      fileType: e.fileType,
	      requireAuth: t.requireAuth
	    });
	  }, Mb.prototype.buildScheduledUserMessageCreateParamsFromSerializedData = function (e, t) {
	    return f(f({}, this.buildUserMessageCreateParamsFromSerializedData(e, t)), {
	      scheduledAt: e.scheduledAt
	    });
	  }, Mb.prototype.buildScheduledFileMessageCreateParamsFromSerializedData = function (e, t) {
	    return f(f({}, this.buildFileMessageCreateParamsFromSerializedData(e, t)), {
	      scheduledAt: e.scheduledAt
	    });
	  }, Mb.prototype.buildSenderFromSerializedData = function (e) {
	    e = nE(e);
	    return new v0(this._iid, v0.payloadify(e));
	  }, Mb.prototype.getMessage = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = new fb(n), [4, this._requestQueue.send(t)];

	          case 1:
	            return [2, e.sent().as(pb).message];
	        }
	      });
	    });
	  }, Mb.prototype.getScheduledMessage = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = new gb(n), [4, this._requestQueue.send(t)];

	          case 1:
	            return [2, e.sent().as(Eb).message];
	        }
	      });
	    });
	  }, Mb.prototype.getMessagesByTimestamp = function (r, i, s, a, o) {
	    return void 0 === o && (o = G0.REQUEST_MESSAGE), re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = new vb(f(f({
	              channelType: i,
	              channelUrl: r,
	              timestamp: s
	            }, B0), a)), [4, this._requestQueue.send(t)];

	          case 1:
	            return t = e.sent(), n = t.as(_b).messages, this._dispatcher.dispatch(new J0({
	              messages: n,
	              source: o
	            })), [2, n];
	        }
	      });
	    });
	  }, Mb.prototype.getThreadedMessagesByTimestamp = function (i, s, a, o) {
	    return void 0 === o && (o = G0.REQUEST_THREADED_MESSAGE), re(this, void 0, void 0, function () {
	      var t, n, r;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = new vb(f(f(f({
	              channelUrl: i.channelUrl,
	              channelType: i.channelType,
	              timestamp: s
	            }, m0), a), {
	              replyType: wm.ALL,
	              parentMessageId: i.messageId,
	              includeThreadInfo: !0
	            })), [4, this._requestQueue.send(t)];

	          case 1:
	            return t = e.sent(), n = t.as(_b).messages, (r = n.slice(1)).forEach(function (e) {
	              e.parentMessage = i;
	            }), this._dispatcher.dispatch(new J0({
	              messages: r,
	              source: o
	            })), [2, {
	              parentMessage: n[0],
	              threadedMessages: r
	            }];
	        }
	      });
	    });
	  }, Mb.prototype.getMessageChangelogs = function (a, o, u, c, l) {
	    return void 0 === l && (l = G0.REQUEST_MESSAGE_CHANGELOGS), re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = new yb(w(f(f({
	              channelType: o,
	              channelUrl: a,
	              timestamp: "number" == typeof u ? u : null,
	              token: "string" == typeof u ? u : null
	            }, K0), c))), [4, this._requestQueue.send(t)];

	          case 1:
	            return t = e.sent(), i = t.as(mb), n = i.updatedMessages, s = i.deletedMessagesInfo, r = i.hasMore, i = i.nextToken, s = s.map(function (e) {
	              return e.messageId;
	            }), 0 < n.length && this._dispatcher.dispatch(new J0({
	              messages: n,
	              source: l
	            })), 0 < s.length && this._dispatcher.dispatch(new Z0({
	              messageIds: s,
	              source: l
	            })), [2, {
	              updatedMessages: n,
	              deletedMessageIds: s,
	              hasMore: r,
	              token: i
	            }];
	        }
	      });
	    });
	  }, Mb),
	      wb = (Db.prototype._trigger = function (e, t) {
	    switch (t.sendingStatus) {
	      case Sm.PENDING:
	        this._onPending(t);

	        break;

	      case Sm.FAILED:
	      case Sm.CANCELED:
	        this._onFailed(e, t.scheduledInfo ? null : t);

	        break;

	      case Sm.SCHEDULED:
	      case Sm.SUCCEEDED:
	        this._onSucceeded(t);

	    }
	  }, Db.prototype.onPending = function (e) {
	    return this._onPending = e, this;
	  }, Db.prototype.onFailed = function (e) {
	    return this._onFailed = e, this;
	  }, Db.prototype.onSucceeded = function (e) {
	    return this._onSucceeded = e, this;
	  }, Db),
	      Tb = (o(Rb, ib = jn), Rb),
	      Sb = {
	    channelUrl: null,
	    channelType: null,
	    messageId: 0,
	    includeReactions: !1,
	    includeMetaArray: !1,
	    includeParentMessageInfo: !1,
	    includeThreadInfo: !1,
	    includePollDetails: !1
	  },
	      s = (Object.defineProperty(Ob.prototype, "hasNext", {
	    get: function () {
	      return this._hasNext;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(Ob.prototype, "isLoading", {
	    get: function () {
	      return this._isLoading;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Ob.prototype._validate = function () {
	    return c("number", this.limit) && 0 < this.limit;
	  }, Ob),
	      Cb = (o(Ab, rb = h), Ab),
	      kb = (o(Nb, nb = S), Nb);

	  function Nb(t, e) {
	    var n = nb.call(this, t, e) || this;
	    return n.messages = e.results.map(function (e) {
	      return w0(t, e);
	    }), n.hasNext = e.has_next, n.nextToken = e.end_cursor, n;
	  }

	  function Ab(e) {
	    var t = e.channelCustomType,
	        n = e.keyword,
	        r = e.limit,
	        i = e.reverse,
	        s = e.exactMatch,
	        a = e.channelUrl,
	        o = e.order,
	        u = e.messageTimestampFrom,
	        c = e.messageTimestampTo,
	        l = e.advancedQuery,
	        h = e.targetFields,
	        e = e.nextToken,
	        d = rb.call(this) || this;
	    return d.method = T.GET, d.path = "".concat(og, "/messages"), d.params = {
	      custom_type: t,
	      query: n,
	      limit: r,
	      reverse: i,
	      exact_match: s,
	      channel_url: a,
	      message_ts_from: u,
	      message_ts_to: c,
	      sort_field: o,
	      advanced_query: l,
	      target_fields: h,
	      after: e
	    }, d;
	  }

	  function Ob(e, t) {
	    this._iid = null, this.limit = 20, this._isLoading = !1, this._hasNext = !0, this._token = "", this._iid = e, this.limit = null != (e = t.limit) ? e : 20;
	  }

	  function Rb(e, t) {
	    var n = ib.call(this, e) || this,
	        r = (n.threadInfo = null, n.targetMessageId = 0, n.channelUrl = null, n.channelType = null, t.thread_info),
	        i = t.root_message_id,
	        s = t.channel_url,
	        t = t.channel_type;
	    return r && c("object", r) && c("number", i) && c("string", s) && c("string", t) && (n.threadInfo = new UE(e, r), n.targetMessageId = i, n.channelUrl = s, n.channelType = t), n;
	  }

	  function Db() {
	    this._onPending = jy, this._onFailed = jy, this._onSucceeded = jy;
	  }

	  function Mb(e, t) {
	    var n = t.sdkState,
	        r = t.dispatcher,
	        i = t.requestQueue,
	        s = t.onlineDetector,
	        t = t.cacheContext;
	    this._iid = e, this._sdkState = n, this._requestQueue = i, this._dispatcher = r, this._onlineDetector = s, this._cacheContext = t, this.fileMessageQueue = new V0(e, {
	      sdkState: n,
	      dispatcher: r,
	      requestQueue: i,
	      onlineDetector: s,
	      cacheContext: t
	    }), bb[e] = this;
	  }

	  function xb(e, t) {
	    var n = sb.call(this, e, t) || this;
	    return n.message = t ? w0(e, f({}, t)) : null, n;
	  }

	  function Lb(e) {
	    var t = e.channelUrl,
	        e = e.scheduledMessageId,
	        n = ab.call(this) || this;
	    return n.method = T.GET, n.path = "".concat(ig, "/").concat(encodeURIComponent(t), "/scheduled_messages/").concat(encodeURIComponent(e)), n.params = {}, n;
	  }

	  function Pb(t, e) {
	    var n = ob.call(this, t, e) || this;
	    return n.updatedMessages = e.updated.map(function (e) {
	      return w0(t, e);
	    }), n.deletedMessagesInfo = e.deleted.map(function (e) {
	      return {
	        messageId: e.message_id,
	        deletedAt: e.deleted_at
	      };
	    }), n.hasMore = e.has_more, n.nextToken = e.next, n;
	  }

	  function Ub(e) {
	    var t = e.channelType,
	        n = e.channelUrl,
	        r = e.timestamp,
	        i = e.token,
	        s = e.replyType,
	        a = e.includeMetaArray,
	        o = e.includeReactions,
	        u = e.includeThreadInfo,
	        c = e.includeParentMessageInfo,
	        e = e.includePollDetails,
	        l = ub.call(this) || this;
	    return l.method = T.GET, l.path = "".concat(Rg(t), "/").concat(encodeURIComponent(n), "/messages/changelogs"), l.params = {
	      change_ts: r,
	      token: i,
	      with_sorted_meta_array: a,
	      include_reactions: o,
	      include_thread_info: u,
	      include_reply_type: s,
	      include_parent_message_info: c,
	      include_poll_details: e
	    }, l;
	  }

	  function qb(t, e) {
	    var n = cb.call(this, t, e) || this;
	    return n.messages = e.messages.map(function (e) {
	      return w0(t, e);
	    }), n;
	  }

	  function Fb(e) {
	    var t = e.channelType,
	        n = e.channelUrl,
	        r = e.timestamp,
	        r = void 0 === r ? null : r,
	        i = e.token,
	        i = void 0 === i ? null : i,
	        s = e.prevResultSize,
	        a = e.nextResultSize,
	        o = e.isInclusive,
	        u = e.reverse,
	        c = e.messageTypeFilter,
	        l = e.customTypesFilter,
	        h = e.senderUserIdsFilter,
	        d = e.replyType,
	        f = e.includeMetaArray,
	        p = e.includeReactions,
	        v = e.parentMessageId,
	        _ = e.includeThreadInfo,
	        y = e.includeParentMessageInfo,
	        m = e.showSubchannelMessagesOnly,
	        e = e.includePollDetails,
	        g = lb.call(this) || this;
	    return g.method = T.GET, g.path = "".concat(Rg(t), "/").concat(encodeURIComponent(n), "/messages"), g.params = w({
	      is_sdk: !0,
	      prev_limit: s,
	      next_limit: a,
	      include: o,
	      reverse: u,
	      message_ts: r,
	      message_id: i,
	      message_type: null != c ? c : null,
	      custom_types: l,
	      sender_ids: h,
	      include_reply_type: d,
	      with_sorted_meta_array: f,
	      include_reactions: p,
	      parent_message_id: v,
	      include_thread_info: _,
	      include_parent_message_info: y,
	      show_subchannel_message_only: m,
	      include_poll_details: e
	    }), g;
	  }

	  function jb(e, t) {
	    var n = hb.call(this, e, t) || this;
	    return n.message = t ? w0(e, f({}, t)) : null, n;
	  }

	  function Hb(e) {
	    var t = e.channelType,
	        n = e.channelUrl,
	        r = e.messageId,
	        i = e.includeMetaArray,
	        s = e.includeReactions,
	        a = e.includeThreadInfo,
	        o = e.includeParentMessageInfo,
	        e = e.includePollDetails,
	        u = db.call(this) || this;
	    return u.method = T.GET, u.path = "".concat(Rg(t), "/").concat(encodeURIComponent(n), "/messages/").concat(encodeURIComponent(r)), u.params = {
	      is_sdk: !0,
	      with_sorted_meta_array: i,
	      include_reactions: s,
	      include_thread_info: a,
	      include_parent_message_info: o,
	      include_poll_details: e
	    }, u;
	  }

	  (kt = z0 = z0 || {}).SCORE = "score", kt.TIMESTAMP = "ts";
	  o($b, Kb = s), $b.prototype._validate = function () {
	    return Kb.prototype._validate.call(this) && c("string", this.keyword) && 0 < this.keyword.length && c("boolean", this.reverse) && c("boolean", this.exactMatch) && c("string", this.channelUrl) && c("string", this.channelCustomType) && (c("number", this.messageTimestampFrom) || null === this.messageTimestampFrom) && (c("number", this.messageTimestampTo) || null === this.messageTimestampTo) && ly(z0, this.order) && c("boolean", this.advancedQuery) && hy("string", this.targetFields, !0);
	  }, $b.prototype.next = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, t = N.of(this._iid).requestQueue, n = new Cb(f(f({}, this), {
	              nextToken: this._nextToken || null
	            })), [4, t.send(n)]) : [3, 2] : [3, 5];

	          case 1:
	            return t = e.sent(), n = t.as(kb), r = n.messages, i = n.hasNext, s = n.nextToken, this._nextToken = s, this._hasNext = i, this._isLoading = !1, [2, r];

	          case 2:
	            return [2, []];

	          case 3:
	            throw p.queryInProgress;

	          case 4:
	            return [3, 6];

	          case 5:
	            throw p.invalidParameters;

	          case 6:
	            return [2];
	        }
	      });
	    });
	  };
	  var Gb,
	      Vb,
	      Bb,
	      Kb,
	      Qb = $b,
	      hs = (o(Zb, Bb = s), Zb.prototype._validate = function () {
	    return Bb.prototype._validate.call(this) && c("string", this.channelUrl) && ly(ym, this.channelType);
	  }, Zb),
	      zb = (o(Jb, Vb = hs), Jb.prototype._validate = function () {
	    return Vb.prototype._validate.call(this) && c("boolean", this.reverse) && ly(Em, this.messageTypeFilter) && ly(wm, this.replyType) && hy("string", this.customTypesFilter, !0) && hy("string", this.senderUserIdsFilter, !0) && c("boolean", this.includeMetaArray) && c("boolean", this.includeReactions) && c("boolean", this.includeParentMessageInfo) && c("boolean", this.includeThreadInfo) && c("boolean", this.showSubchannelMessagesOnly);
	  }, Jb.prototype.load = function () {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, [4, Ib.of(this._iid).getMessagesByTimestamp(this.channelUrl, this.channelType, this._edge, {
	              prevResultSize: this.limit,
	              nextResultSize: 0,
	              isInclusive: !1,
	              reverse: this.reverse,
	              messageTypeFilter: this.messageTypeFilter,
	              customTypesFilter: this.customTypesFilter,
	              replyType: this.replyType,
	              senderUserIdsFilter: this.senderUserIdsFilter,
	              includeReactions: this.includeReactions,
	              includeMetaArray: this.includeMetaArray,
	              includeParentMessageInfo: this.includeParentMessageInfo,
	              includeThreadInfo: this.includeThreadInfo,
	              showSubchannelMessagesOnly: this.showSubchannelMessagesOnly
	            })]) : [3, 2] : [3, 5];

	          case 1:
	            return t = e.sent(), this._edge = Math.min.apply(Math, J_([Number.MAX_SAFE_INTEGER], X_(t.map(function (e) {
	              return e.createdAt;
	            })), !1)), this._hasNext = t.length >= this.limit, this._isLoading = !1, [2, t];

	          case 2:
	            return [2, []];

	          case 3:
	            throw p.queryInProgress;

	          case 4:
	            return [3, 6];

	          case 5:
	            throw p.invalidParameters;

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, Jb),
	      Wb = {
	    channelUrl: null,
	    scheduledMessageId: 0
	  },
	      Yb = (o(Xb, Gb = ci), Xb.prototype.init = function (e, t) {
	    var n = t.sdkState,
	        r = t.dispatcher,
	        i = t.sessionManager,
	        s = t.requestQueue,
	        a = t.logger,
	        o = t.onlineDetector,
	        t = t.cacheContext;
	    Gb.prototype.init.call(this, e, {
	      sdkState: n,
	      dispatcher: r,
	      sessionManager: i,
	      requestQueue: s,
	      logger: a,
	      onlineDetector: o,
	      cacheContext: t
	    }), this._manager = new Ib(e, {
	      sdkState: n,
	      dispatcher: r,
	      requestQueue: s,
	      onlineDetector: o,
	      cacheContext: t
	    });
	  }, Xb.prototype.buildMessageFromSerializedData = function (e) {
	    return this._manager.buildMessageFromSerializedData(e);
	  }, Xb.prototype.buildSenderFromSerializedData = function (e) {
	    return this._manager.buildSenderFromSerializedData(e);
	  }, Xb.prototype.getMessage = function (n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return n = f(f({}, Sb), n), C(c("string", (t = n).channelUrl) && c("string", t.channelType) && ly(ym, t.channelType) && c("number", t.messageId) && c("boolean", t.includeMetaArray) && c("boolean", t.includeParentMessageInfo) && c("boolean", t.includeThreadInfo) && c("boolean", t.includePollDetails)).throw(p.invalidParameters), [2, this._manager.getMessage(n)];
	        var t;
	      });
	    });
	  }, Xb.prototype.getScheduledMessage = function (n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return n = f(f({}, Wb), n), C(c("string", (t = n).channelUrl) && c("number", t.scheduledMessageId)).throw(p.invalidParameters), [2, this._manager.getScheduledMessage(n)];
	        var t;
	      });
	    });
	  }, Xb);

	  function Xb() {
	    var e = null !== Gb && Gb.apply(this, arguments) || this;
	    return e.name = "message", e;
	  }

	  function Jb(e, t, n, r) {
	    var i = this;
	    return (i = Vb.call(this, e, t, n, r) || this).reverse = !1, i.messageTypeFilter = Em.ALL, i.customTypesFilter = null, i.senderUserIdsFilter = null, i.replyType = wm.NONE, i.includeMetaArray = !1, i.includeReactions = !1, i.includeParentMessageInfo = !1, i.includeThreadInfo = !1, i.showSubchannelMessagesOnly = !1, i._edge = Number.MAX_SAFE_INTEGER, i.reverse = null != (e = r.reverse) && e, i.messageTypeFilter = null != (t = r.messageTypeFilter) ? t : Em.ALL, i.customTypesFilter = null != (n = r.customTypesFilter) ? n : null, i.senderUserIdsFilter = null != (e = r.senderUserIdsFilter) ? e : null, i.replyType = null != (t = r.replyType) ? t : wm.NONE, i.includeMetaArray = null != (n = r.includeMetaArray) && n, i.includeReactions = null != (e = r.includeReactions) && e, i.includeParentMessageInfo = null != (t = r.includeParentMessageInfo) && t, i.includeThreadInfo = null != (n = r.includeThreadInfo) && n, i.showSubchannelMessagesOnly = null != (e = r.showSubchannelMessagesOnly) && e, i;
	  }

	  function Zb(e, t, n, r) {
	    e = Bb.call(this, e, r) || this;
	    return e.channelUrl = t, e.channelType = n, e;
	  }

	  function $b(e, t) {
	    var n = this;
	    return (n = Kb.call(this, e, t) || this).keyword = "", n.reverse = !1, n.exactMatch = !1, n.channelUrl = "", n.channelCustomType = "", n.messageTimestampFrom = null, n.messageTimestampTo = null, n.order = z0.SCORE, n.advancedQuery = !1, n.targetFields = null, n._nextToken = "", n.keyword = t.keyword, n.reverse = null != (e = t.reverse) && e, n.exactMatch = null != (e = t.exactMatch) && e, n.channelUrl = null != (e = t.channelUrl) ? e : "", n.channelCustomType = null != (e = t.channelCustomType) ? e : "", n.messageTimestampFrom = null != (e = t.messageTimestampFrom) ? e : null, n.messageTimestampTo = null != (e = t.messageTimestampTo) ? e : null, n.order = null != (e = t.order) ? e : z0.SCORE, n.advancedQuery = null != (e = t.advancedQuery) && e, n.targetFields = null != (e = t.targetFields) ? e : null, n;
	  }

	  function eI(e) {
	    return c("string", e.data, !0) && c("string", e.customType, !0) && ly(Im, e.mentionType) && hy("string", e.mentionedUserIds, !0) && hy(k, e.mentionedUsers, !0) && c("string", e.mentionedMessageTemplate, !0) && hy(zE, e.metaArrays, !0) && c("number", e.parentMessageId, !0) && c("boolean", e.isReplyToChannel) && ly(Tm, e.pushNotificationDeliveryOption, !0) && c(XE, e.appleCriticalAlertOptions, !0);
	  }

	  function tI(e) {
	    return e ? {
	      isReplyToChannel: e.isReplyToChannel,
	      pushNotificationDeliveryOption: e.pushNotificationDeliveryOption
	    } : null;
	  }

	  var nI,
	      Ze = {
	    data: null,
	    customType: null,
	    mentionType: Im.USERS,
	    mentionedUserIds: null,
	    mentionedUsers: null,
	    mentionedMessageTemplate: null,
	    metaArrays: null,
	    parentMessageId: null,
	    isReplyToChannel: !1,
	    pushNotificationDeliveryOption: null,
	    appleCriticalAlertOptions: null
	  },
	      rI = f(f({}, Ze), {
	    message: null,
	    translationTargetLanguages: null
	  });
	  (aa = nI = nI || {}).FILE = "file", aa.BLOB = "blob", aa.BLOB_LIKE_OBJECT = "blobLikeObject", aa.URL = "url";

	  function iI(e) {
	    return "undefined" != typeof window && "Blob" in window && "undefined" != typeof Blob && e instanceof Blob;
	  }

	  function sI(e) {
	    return e === nI.BLOB || e === nI.FILE;
	  }

	  function aI(e) {
	    return e ? {
	      file: e.file,
	      fileKey: e.fileKey,
	      fileType: e.fileType,
	      isReplyToChannel: e.isReplyToChannel,
	      pushNotificationDeliveryOption: e.pushNotificationDeliveryOption
	    } : null;
	  }

	  function oI(e) {
	    return eI(e) && (ry(e.file) || c("string", e.fileUrl)) && c("string", e.fileName, !0) && c("string", e.mimeType, !0) && c("number", e.fileSize, !0) && (null === e.thumbnailSizes || Array.isArray(e.thumbnailSizes) && e.thumbnailSizes.every(function (e) {
	      return c("object", e) && 0 < e.maxWidth && 0 < e.maxHeight;
	    }));
	  }

	  var uI,
	      cI = f(f({}, Ze), {
	    file: null,
	    fileKey: null,
	    fileUrl: null,
	    fileName: null,
	    fileType: null,
	    fileSize: null,
	    mimeType: null,
	    thumbnailSizes: null,
	    requireAuth: !1
	  });
	  (Wn = uI = uI || {}).MUTED = "muted", Wn.BANNED = "banned";

	  function lI(e) {
	    return c("string", e.data, !0) && c("string", e.customType, !0) && ly(Im, e.mentionType) && hy("string", e.mentionedUserIds, !0) && hy(k, e.mentionedUsers, !0) && c("string", e.mentionedMessageTemplate, !0) && hy(zE, e.metaArrays, !0) && ly(Tm, e.pushNotificationDeliveryOption, !0) && c(XE, e.appleCriticalAlertOptions, !0);
	  }

	  KI.payloadify = function (e) {
	    return e ? w({
	      restriction_type: e.restrictionType,
	      description: e.description,
	      end_at: e.endAt
	    }) : null;
	  };

	  var hI,
	      dI,
	      fI,
	      pI,
	      vI,
	      _I,
	      yI,
	      mI,
	      gI,
	      EI,
	      bI,
	      II = KI,
	      wI = (o(BI, bI = k), BI.payloadify = function (e) {
	    return e ? w(f(f({}, bI.payloadify.call(this, e)), II.payloadify(e.restrictionInfo))) : null;
	  }, BI),
	      K = {
	    data: null,
	    customType: null,
	    mentionType: Im.USERS,
	    mentionedUserIds: null,
	    mentionedUsers: null,
	    mentionedMessageTemplate: null,
	    metaArrays: null,
	    pushNotificationDeliveryOption: null,
	    appleCriticalAlertOptions: null
	  },
	      TI = f(f({}, K), {
	    message: null,
	    translationTargetLanguages: null
	  }),
	      SI = f({}, K),
	      CI = (o(VI, EI = h), VI),
	      kI = (o(GI, gI = S), GI),
	      NI = (o(HI, mI = hs), HI.prototype._validate = function () {
	    return mI.prototype._validate.call(this);
	  }, HI.prototype.next = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._validate() ? this._isLoading ? [3, 3] : (t = [], this._hasNext ? (this._isLoading = !0, n = N.of(this._iid).requestQueue, r = new CI(f(f({}, this), {
	              channelUrl: this.channelUrl,
	              token: this._token
	            })), [4, n.send(r)]) : [3, 2]) : [3, 5];

	          case 1:
	            return n = e.sent(), r = n.as(kI), i = r.operators, s = r.token, this._token = s, this._hasNext = !!s, this._isLoading = !1, [2, i];

	          case 2:
	            return [2, t];

	          case 3:
	            throw p.queryInProgress;

	          case 4:
	            return [3, 6];

	          case 5:
	            throw p.invalidParameters;

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, HI),
	      AI = (o(jI, yI = h), jI),
	      OI = (o(FI, _I = S), FI),
	      RI = (o(qI, vI = hs), qI.prototype.next = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, t = N.of(this._iid).requestQueue, n = new AI(f(f({}, this), {
	              token: this._token
	            })), [4, t.send(n)]) : [3, 2] : [3, 5];

	          case 1:
	            return t = e.sent(), n = t.as(OI), r = n.mutedUsers, i = n.token, this._token = i, this._hasNext = !!i, this._isLoading = !1, [2, r];

	          case 2:
	            return [2, []];

	          case 3:
	            throw p.queryInProgress;

	          case 4:
	            return [3, 6];

	          case 5:
	            throw p.invalidParameters;

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, qI),
	      DI = (o(UI, pI = h), UI),
	      MI = (o(PI, fI = S), PI),
	      xI = (o(LI, dI = hs), LI.prototype._validate = function () {
	    return dI.prototype._validate.call(this);
	  }, LI.prototype.next = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, t = N.of(this._iid).requestQueue, n = new DI(f(f({}, this), {
	              token: this._token
	            })), [4, t.send(n)]) : [3, 2] : [3, 5];

	          case 1:
	            return t = e.sent(), n = t.as(MI), r = n.bannedUsers, i = n.token, this._token = i, this._hasNext = !!i, this._isLoading = !1, [2, r];

	          case 2:
	            return [2, []];

	          case 3:
	            throw p.queryInProgress;

	          case 4:
	            return [3, 6];

	          case 5:
	            throw p.invalidParameters;

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, LI);

	  function LI(e, t, n, r) {
	    return dI.call(this, e, t, n, r) || this;
	  }

	  function PI(t, e) {
	    var n = fI.call(this, t, e) || this,
	        r = (n.token = null, n.bannedUsers = [], e.next),
	        e = e.banned_list;
	    return n.token = r, e && 0 < e.length && (n.bannedUsers = e.map(function (e) {
	      return new wI(t, e.user);
	    })), n;
	  }

	  function UI(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        i = e.limit,
	        e = e.token;
	    return (t = pI.call(this) || this).method = T.GET, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/ban"), t.params = w({
	      limit: i,
	      token: e
	    }), t;
	  }

	  function qI(e, t, n, r) {
	    return vI.call(this, e, t, n, r) || this;
	  }

	  function FI(t, e) {
	    var n = _I.call(this, t, e) || this,
	        r = (n.token = null, n.mutedUsers = [], e.next),
	        e = e.muted_list;
	    return n.token = r, e && 0 < e.length && (n.mutedUsers = e.map(function (e) {
	      return new wI(t, e);
	    })), n;
	  }

	  function jI(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        i = e.limit,
	        e = e.token;
	    return (t = yI.call(this) || this).method = T.GET, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/mute"), t.params = {
	      limit: i,
	      token: e
	    }, t;
	  }

	  function HI(e, t, n, r) {
	    return mI.call(this, e, t, n, r) || this;
	  }

	  function GI(t, e) {
	    var n = gI.call(this, t, e) || this;
	    return n.operators = e.operators.map(function (e) {
	      return new k(t, e);
	    }), n.token = e.next, n;
	  }

	  function VI(e) {
	    var t = e.channelUrl,
	        n = e.channelType,
	        r = e.token,
	        e = e.limit,
	        i = EI.call(this) || this;
	    return i.method = T.GET, i.path = "".concat(Rg(n), "/").concat(encodeURIComponent(t), "/operators"), i.params = {
	      token: r,
	      limit: e
	    }, i;
	  }

	  function BI(e, t) {
	    e = bI.call(this, e, t) || this;
	    return e.restrictionInfo = null, e.restrictionInfo = new II(t), e;
	  }

	  function KI(e) {
	    var t;
	    this.restrictionType = null, this.description = null, this.endAt = -1, ly(uI, e.restriction_type) && (this.restrictionType = e.restriction_type), this.description = null != (t = e.description) ? t : null, this.endAt = null != (t = null != (t = e.end_at) ? t : e.muted_end_at) ? t : -1;
	  }

	  (Et = hI = hI || {}).SPAM = "spam", Et.HARASSING = "harassing", Et.SUSPICIOUS = "suspicious", Et.INAPPROPRIATE = "inappropriate";
	  o(YI, QI = h);
	  var QI,
	      zI,
	      WI = YI;

	  function YI(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.operatorUserIds;
	    return (t = QI.call(this) || this).method = T.POST, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/operators"), t.params = {
	      operator_ids: e
	    }, t;
	  }

	  o(function () {
	    return null !== zI && zI.apply(this, arguments) || this;
	  }, zI = S);
	  o($I, XI = h);
	  var XI,
	      JI,
	      ZI = $I;

	  function $I(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.operatorUserIds;
	    return (t = XI.call(this) || this).method = T.DELETE, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/operators"), t.params = {
	      operator_ids: e
	    }, t;
	  }

	  o(function (e, t) {
	    return JI.call(this, e, t) || this;
	  }, JI = S);
	  o(rT, mw = h);

	  var ew,
	      tw,
	      nw,
	      rw,
	      iw,
	      sw,
	      aw,
	      ow,
	      uw,
	      cw,
	      lw,
	      hw,
	      dw,
	      fw,
	      pw,
	      vw,
	      _w,
	      yw,
	      mw,
	      gw,
	      Ew = rT,
	      bw = (o(nT, yw = S), nT),
	      Iw = (o(tT, _w = h), tT),
	      ww = (o(eT, vw = S), eT),
	      Tw = (o($w, pw = h), $w),
	      Sw = (o(Zw, fw = S), Zw),
	      Cw = (o(Jw, dw = zy), Jw),
	      kw = (o(Xw, hw = h), Xw),
	      Nw = (o(Yw, lw = S), Yw),
	      Aw = (o(Ww, cw = h), Ww),
	      Ow = (o(zw, uw = S), zw),
	      Rw = (o(Qw, ow = h), Qw),
	      Dw = (o(Kw, aw = S), Kw),
	      Mw = (o(Bw, sw = h), Bw),
	      xw = (o(Vw, iw = S), Vw),
	      Lw = (o(Gw, rw = h), Gw),
	      Pw = (o(Hw, nw = S), Hw),
	      Uw = (o(jw, tw = zy), jw),
	      qw = (o(Fw, ew = h), Fw);

	  function Fw(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.key;
	    return (t = ew.call(this) || this).method = T.DELETE, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/metacounter/").concat(e), t.params = null, t;
	  }

	  function jw(e, t, n) {
	    e = tw.call(this, e, "SYEV", n) || this;
	    return e.created = null, e.updated = null, e.deleted = null, n.data && (e.created = n.data.created, e.updated = n.data.updated, e.deleted = n.data.deleted), e;
	  }

	  function Hw(e, t) {
	    e = nw.call(this, e, t) || this;
	    return e.metaCounter = t, e;
	  }

	  function Gw(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        i = e.metaCounter,
	        s = e.upsert,
	        s = void 0 !== s && s,
	        e = e.mode,
	        e = void 0 === e ? "set" : e;
	    return (t = rw.call(this) || this).method = T.PUT, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/metacounter"), t.params = {
	      metacounter: i,
	      upsert: s,
	      mode: e
	    }, t;
	  }

	  function Vw(e, t) {
	    e = iw.call(this, e, t) || this;
	    return e.metaCounter = t, e;
	  }

	  function Bw(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.metaCounter;
	    return (t = sw.call(this) || this).method = T.POST, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/metacounter"), t.params = {
	      metacounter: e
	    }, t;
	  }

	  function Kw(e, t) {
	    e = aw.call(this, e, t) || this;
	    return e.metaCounter = t, e;
	  }

	  function Qw(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.keys;
	    return (t = ow.call(this) || this).method = T.GET, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/metacounter"), t.params = {
	      keys: e
	    }, t;
	  }

	  function zw(e, t) {
	    e = uw.call(this, e, t) || this, e.ts = null, t = t.ts;
	    return e.ts = null != t ? t : null, e;
	  }

	  function Ww(e) {
	    var t = this,
	        n = e.channelUrl,
	        e = e.channelType;
	    return (t = cw.call(this) || this).method = T.PUT, t.path = "".concat(Rg(e), "/").concat(encodeURIComponent(n), "/metadata"), t.params = {
	      include_ts: !0
	    }, t;
	  }

	  function Yw(e, t) {
	    e = lw.call(this, e, t) || this, e.ts = null, t = t.ts;
	    return e.ts = null != t ? t : null, e;
	  }

	  function Xw(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.key;
	    return (t = hw.call(this) || this).method = T.DELETE, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/metadata/").concat(e), t.params = {
	      include_ts: !0
	    }, t;
	  }

	  function Jw(e, t, n) {
	    e = dw.call(this, e, "SYEV", n) || this;
	    return e.created = null, e.updated = null, e.deleted = null, n.data && (e.created = n.data.created, e.updated = n.data.updated, e.deleted = n.data.deleted), e;
	  }

	  function Zw(e, t) {
	    var e = fw.call(this, e, t) || this,
	        n = (e.ts = null, t.metadata),
	        t = t.ts;
	    return e.metadata = n, e.ts = null != t ? t : null, e;
	  }

	  function $w(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        i = e.metadata,
	        e = e.upsert;
	    return (t = pw.call(this) || this).method = T.PUT, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/metadata"), t.params = {
	      metadata: i,
	      include_ts: !0,
	      upsert: null != e && e
	    }, t;
	  }

	  function eT(e, t) {
	    var e = vw.call(this, e, t) || this,
	        n = (e.ts = null, t.metadata),
	        t = t.ts;
	    return e.metadata = n, e.ts = null != t ? t : null, e;
	  }

	  function tT(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.keys;
	    return (t = _w.call(this) || this).method = T.GET, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/metadata"), t.params = {
	      keys: e,
	      include_ts: !0
	    }, t;
	  }

	  function nT(e, t) {
	    var e = yw.call(this, e, t) || this,
	        n = (e.isMuted = !1, e.startAt = null, e.endAt = null, e.remainingDuration = null, e.description = null, t.is_muted),
	        r = t.start_at,
	        i = t.end_at,
	        s = t.remaining_duration,
	        t = t.description;
	    return e.isMuted = n, e.startAt = r, e.endAt = i, e.remainingDuration = s, e.description = t, e;
	  }

	  function rT(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.userId;
	    return (t = mw.call(this) || this).method = T.GET, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/mute/").concat(e), t;
	  }

	  o(function (e, t) {
	    return gw.call(this, e, t) || this;
	  }, gw = S);
	  o(oT, iT = h);
	  var iT,
	      sT,
	      aT = oT;

	  function oT(e) {
	    var t = this,
	        n = e.channelUrl,
	        e = e.channelType;
	    return (t = iT.call(this) || this).method = T.DELETE, t.path = "".concat(Rg(e), "/").concat(encodeURIComponent(n), "/metacounter"), t.params = null, t;
	  }

	  o(function () {
	    return null !== sT && sT.apply(this, arguments) || this;
	  }, sT = S);
	  o(hT, uT = h);
	  var uT,
	      cT,
	      lT = hT;

	  function hT(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        i = e.userId,
	        s = e.seconds,
	        e = e.description;
	    return (t = uT.call(this) || this).method = T.POST, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/mute"), t.params = {
	      user_id: i,
	      seconds: s,
	      description: e
	    }, t;
	  }

	  o(function (e, t) {
	    return cT.call(this, e, t) || this;
	  }, cT = S);
	  o(mT, fT = zy);

	  var dT,
	      fT,
	      pT,
	      vT = mT,
	      _T = (o(yT, dT = h), yT);

	  function yT(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.userId;
	    return (t = dT.call(this) || this).method = T.DELETE, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/mute/").concat(encodeURIComponent(e)), t;
	  }

	  function mT(e, t, n) {
	    var r = fT.call(this, e, "SYEV", n) || this;
	    return r.user = new wI(e, n.data), r;
	  }

	  o(function () {
	    return null !== pT && pT.apply(this, arguments) || this;
	  }, pT = S);
	  o(ST, ET = zy);
	  var gT,
	      ET,
	      bT,
	      IT = ST,
	      wT = (o(TT, gT = h), TT);

	  function TT(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        i = e.userId,
	        s = e.seconds,
	        e = e.description;
	    return (t = gT.call(this) || this).method = T.POST, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/ban"), t.params = w({
	      user_id: i,
	      seconds: s,
	      description: e
	    }), t;
	  }

	  function ST(e, t, n) {
	    var r = ET.call(this, e, "SYEV", n) || this;
	    return r.user = new wI(e, n.data), r;
	  }

	  o(function () {
	    return null !== bT && bT.apply(this, arguments) || this;
	  }, bT = S);
	  o(DT, kT = zy);
	  var CT,
	      kT,
	      NT,
	      AT = DT,
	      OT = (o(RT, CT = h), RT);

	  function RT(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.userId;
	    return (t = CT.call(this) || this).method = T.DELETE, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/ban/").concat(encodeURIComponent(e)), t;
	  }

	  function DT(e, t, n) {
	    var r = kT.call(this, e, "SYEV", n) || this;
	    return r.memberCount = null, r.joinedMemberCount = null, r.user = new wI(e, n.data), n.data.member_count && (r.memberCount = n.data.member_count), n.data.joined_member_count && (r.joinedMemberCount = n.data.joined_member_count), r;
	  }

	  o(function () {
	    return null !== NT && NT.apply(this, arguments) || this;
	  }, NT = S);
	  o(FT, xT = zy);
	  var MT,
	      xT,
	      LT,
	      PT = FT,
	      UT = (o(qT, MT = h), qT);

	  function qT(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        e = e.freezing;
	    return (t = MT.call(this) || this).method = T.PUT, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(n), "/freeze"), t.params = {
	      freeze: e
	    }, t;
	  }

	  function FT(e, t, n) {
	    var r = xT.call(this, e, "SYEV", n) || this;
	    return r.user = new wI(e, n.data), r;
	  }

	  o(function () {
	    return null !== LT && LT.apply(this, arguments) || this;
	  }, LT = S);
	  o(gS, XT = zy);
	  var jT,
	      HT,
	      GT,
	      VT,
	      BT,
	      KT,
	      QT,
	      zT,
	      WT,
	      YT,
	      XT,
	      JT,
	      ZT = gS,
	      $T = (o(mS, YT = h), mS),
	      eS = (o(yS, WT = h), yS),
	      tS = (o(_S, zT = h), _S),
	      nS = (o(vS, QT = Wy), vS),
	      rS = (o(pS, KT = zy), pS),
	      iS = (o(fS, BT = Wy), fS),
	      sS = (o(dS, VT = zy), dS),
	      aS = (o(hS, GT = Wy), hS),
	      oS = (o(lS, HT = zy), lS),
	      uS = (o(cS, jT = h), cS);

	  function cS(e) {
	    var t = jT.call(this) || this;
	    return t.method = T.DELETE, t.path = "".concat(Rg(e.channelType), "/").concat(e.channelUrl, "/messages/").concat(e.messageId), t;
	  }

	  function lS(e, t, n) {
	    var r,
	        i = this,
	        e = ((i = HT.call(this, e, "FEDI", n) || this).message = new T0(e, n), N.of(e).sdkState);
	    return i.mentionCountChange = Mg({
	      mentionType: null != (r = null == (r = n.old_values) ? void 0 : r.mention_type) ? r : null,
	      mentionedUserIds: null != (n = null == (r = n.old_values) ? void 0 : r.mentioned_user_ids) ? n : []
	    }, {
	      mentionType: i.message.mentionType,
	      mentionedUserIds: null != (r = i.message.mentionedUserIds) ? r : null == (n = i.message.mentionedUsers) ? void 0 : n.map(function (e) {
	        return e.userId;
	      })
	    }, e.userId), i;
	  }

	  function hS(e) {
	    var t = [];
	    return e.mentionType === Im.USERS && (e.mentionedUserIds ? t = e.mentionedUserIds : e.mentionedUsers && (t = e.mentionedUsers.map(function (e) {
	      return e.userId;
	    }))), GT.call(this, {
	      code: "FEDI",
	      ackRequired: !0,
	      payload: w({
	        channel_url: e.channelUrl,
	        msg_id: e.messageId,
	        data: e.data,
	        custom_type: e.customType,
	        metaarray: e.metaArrayParams,
	        mention_type: e.mentionType,
	        mentioned_user_ids: t,
	        apple_critical_alert_options: e.appleCriticalAlertOptions
	      })
	    }) || this;
	  }

	  function dS(e, t, n) {
	    var r,
	        i = this,
	        e = ((i = VT.call(this, e, "MEDI", n) || this).message = new b0(e, n), N.of(e).sdkState);
	    return i.mentionCountChange = Mg({
	      mentionType: null != (r = null == (r = n.old_values) ? void 0 : r.mention_type) ? r : null,
	      mentionedUserIds: null != (n = null == (r = n.old_values) ? void 0 : r.mentioned_user_ids) ? n : []
	    }, {
	      mentionType: i.message.mentionType,
	      mentionedUserIds: null != (r = i.message.mentionedUserIds) ? r : null == (n = i.message.mentionedUsers) ? void 0 : n.map(function (e) {
	        return e.userId;
	      })
	    }, e.userId), i;
	  }

	  function fS(e) {
	    var t = [];
	    return e.mentionType === Im.USERS && (e.mentionedUserIds ? t = e.mentionedUserIds : e.mentionedUsers && (t = e.mentionedUsers.map(function (e) {
	      return e.userId;
	    }))), BT.call(this, {
	      code: "MEDI",
	      ackRequired: !0,
	      payload: w({
	        channel_url: e.channelUrl,
	        msg_id: e.messageId,
	        message: e.message,
	        data: e.data,
	        custom_type: e.customType,
	        metaarray: e.metaArrayParams,
	        mention_type: e.mentionType,
	        mentioned_user_ids: t,
	        mentioned_message_template: e.mentionedMessageTemplate,
	        apple_critical_alert_options: e.appleCriticalAlertOptions
	      })
	    }) || this;
	  }

	  function pS(e, t, n) {
	    var r,
	        i = this,
	        e = ((i = KT.call(this, e, "MESG", n) || this).message = new b0(e, n), N.of(e).sdkState);
	    return i.isMentioned = jg(i.message.mentionType, null != (r = i.message.mentionedUserIds) ? r : null == (r = i.message.mentionedUsers) ? void 0 : r.map(function (e) {
	      return e.userId;
	    }), e.userId), i.forceUpdateLastMessage = null != (r = n.force_update_last_message) && r, i;
	  }

	  function vS(e) {
	    var t = [];
	    return e.mentionType === Im.USERS && (e.mentionedUserIds ? t = e.mentionedUserIds : e.mentionedUsers && (t = e.mentionedUsers.map(function (e) {
	      return e.userId;
	    }))), QT.call(this, {
	      code: "MESG",
	      ackRequired: !0,
	      payload: w({
	        channel_url: e.channelUrl,
	        message: e.message,
	        data: e.data,
	        custom_type: e.customType,
	        metaarray: e.metaArrays,
	        mention_type: e.mentionType,
	        mentioned_user_ids: t,
	        mentioned_message_template: e.mentionedMessageTemplate,
	        target_langs: e.translationTargetLanguages,
	        push_option: e.pushNotificationDeliveryOption && e.pushNotificationDeliveryOption !== Tm.DEFAULT ? e.pushNotificationDeliveryOption : void 0,
	        apple_critical_alert_options: e.appleCriticalAlertOptions,
	        silent: e.silent,
	        reply_to_channel: e.isReplyToChannel,
	        parent_message_id: 0 < e.parentMessageId ? e.parentMessageId : null,
	        req_id: e.reqId
	      })
	    }) || this;
	  }

	  function _S(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        i = e.category,
	        s = e.userId,
	        a = e.offendingUserId,
	        o = e.messageId,
	        e = e.description;
	    return (t = zT.call(this) || this).method = T.POST, t.path = "".concat(Dg(r), "/").concat(encodeURIComponent(n), "/messages/").concat(o), t.params = {
	      report_category: i,
	      reporting_user_id: s,
	      report_description: e,
	      offending_user_id: a
	    }, t;
	  }

	  function yS(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        i = e.category,
	        s = e.userId,
	        a = e.offendingUserId,
	        e = e.description;
	    return (t = WT.call(this) || this).method = T.POST, t.path = "/report/users/".concat(a), t.params = {
	      channel_url: n,
	      channel_type: r === ym.OPEN ? "open_channels" : "group_channels",
	      report_category: i,
	      reporting_user_id: s,
	      report_description: e
	    }, t;
	  }

	  function mS(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.channelType,
	        i = e.category,
	        s = e.userId,
	        e = e.description;
	    return (t = YT.call(this) || this).method = T.POST, t.path = "".concat(Dg(r), "/").concat(encodeURIComponent(n)), t.params = {
	      report_category: i,
	      reporting_user_id: s,
	      report_description: e
	    }, t;
	  }

	  function gS(e, t, n) {
	    e = XT.call(this, e, "SYEV", n) || this;
	    return e.freeze = n.data.freeze, e;
	  }

	  o(function () {
	    return null !== JT && JT.apply(this, arguments) || this;
	  }, JT = S);
	  o(iC, RS = zy);
	  var ES,
	      bS,
	      IS,
	      wS,
	      TS,
	      SS,
	      CS,
	      kS,
	      NS,
	      AS,
	      OS,
	      RS,
	      DS,
	      MS,
	      xS,
	      LS,
	      PS = iC,
	      US = (o(rC, OS = h), rC),
	      qS = (o(nC, AS = S), nC),
	      FS = (o(tC, NS = h), tC),
	      jS = (o(eC, kS = S), eC),
	      HS = (o($S, CS = h), $S),
	      GS = (o(ZS, SS = S), ZS),
	      VS = (o(JS, TS = h), JS),
	      BS = (o(XS, wS = S), XS),
	      KS = (o(YS, IS = h), YS),
	      QS = (o(WS, bS = S), WS),
	      zS = (o(A, ES = jn), A.payloadify = function (e) {
	    return w(f(f({}, ES.payloadify.call(this, e)), {
	      channel_url: e.url,
	      name: e.name,
	      cover_url: e.coverUrl,
	      custom_type: e.customType,
	      data: e.data,
	      freeze: e.isFrozen,
	      is_ephemeral: e.isEphemeral,
	      created_by: k.payloadify(e.creator),
	      created_at: e.createdAt / 1e3
	    }));
	  }, A.prototype.isGroupChannel = function () {
	    return this.channelType === ym.GROUP;
	  }, A.prototype.isOpenChannel = function () {
	    return this.channelType === ym.OPEN;
	  }, Object.defineProperty(A.prototype, "cachedMetaData", {
	    get: function () {
	      var n = {};
	      return this._cachedMetaData.forEach(function (e, t) {
	        e.isRemoved || (n[t] = e.value);
	      }), n;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), A.prototype._upsertCachedMetaData = function (n, r) {
	    var i = this;
	    Object.keys(n).forEach(function (e) {
	      var t = i._cachedMetaData.get(e);

	      (!t || t.updatedAt <= r) && i._cachedMetaData.set(e, {
	        value: n[e],
	        isRemoved: !1,
	        updatedAt: r
	      });
	    });
	  }, A.prototype._removeFromCachedMetaData = function (e, t) {
	    var n = this;
	    e.forEach(function (e) {
	      e = n._cachedMetaData.get(e);
	      e && e.updatedAt < t && (e.isRemoved = !1, e.updatedAt = t);
	    });
	  }, A.prototype._generateRequestId = function () {
	    return "rq-".concat(sy());
	  }, A.prototype.isIdentical = function (e) {
	    return e && this.url === e.url;
	  }, A.prototype.isEqual = function (e) {
	    return ty(this, e);
	  }, A.prototype.createOperatorListQuery = function (e) {
	    return new NI(this._iid, this.url, this.channelType, e = void 0 === e ? {} : e);
	  }, A.prototype.createMutedUserListQuery = function (e) {
	    return new RI(this._iid, this.url, this.channelType, e = void 0 === e ? {} : e);
	  }, A.prototype.createBannedUserListQuery = function (e) {
	    return new xI(this._iid, this.url, this.channelType, e = void 0 === e ? {} : e);
	  }, A.prototype.createPreviousMessageListQuery = function (e) {
	    return new zb(this._iid, this.url, this.channelType, e = void 0 === e ? {} : e);
	  }, A.prototype.addOperators = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(hy("string", r)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new WI({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              operatorUserIds: r
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A.prototype.removeOperators = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(hy("string", r)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new ZI({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              operatorUserIds: r
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A.prototype.getMyMutedInfo = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new Ew({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              userId: n.userId
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(bw), r = n.isMuted, i = n.startAt, s = n.endAt, a = n.remainingDuration, o = n.description, [2, {
	              isMuted: r,
	              startAt: i,
	              endAt: s,
	              remainingDuration: a,
	              description: o
	            }];
	        }
	      });
	    });
	  }, A.prototype.getMetaData = function (s) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(hy("string", s)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new Iw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              keys: s
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(ww), r = n.metadata, i = n.ts, this._upsertCachedMetaData(r, i), [2, r];
	        }
	      });
	    });
	  }, A.prototype.getAllMetaData = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new Iw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              keys: []
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(ww), r = n.metadata, i = n.ts, this._upsertCachedMetaData(r, i), [2, r];
	        }
	      });
	    });
	  }, A.prototype.createMetaData = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new Hg({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              metadata: r
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(Gg).metaData, this._upsertCachedMetaData(n, 0), [2, n];
	        }
	      });
	    });
	  }, A.prototype.updateMetaData = function (s, a) {
	    return void 0 === a && (a = !1), re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new Tw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              metadata: s,
	              upsert: a
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(Sw), r = n.metadata, i = n.ts, this._upsertCachedMetaData(r, i), [2, r];
	        }
	      });
	    });
	  }, A.prototype.deleteMetaData = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("string", r)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new kw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              key: r
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(Nw).ts, this._removeFromCachedMetaData([r], n), [2];
	        }
	      });
	    });
	  }, A.prototype.deleteAllMetaData = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new Aw({
	              channelUrl: this.url,
	              channelType: this.channelType
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(Ow).ts, this._removeFromCachedMetaData(J_([], X_(this._cachedMetaData.keys()), !1), n), [2];
	        }
	      });
	    });
	  }, A.prototype.getMetaCounters = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(hy("string", r)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new Rw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              keys: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(Dw).metaCounter];
	        }
	      });
	    });
	  }, A.prototype.getAllMetaCounters = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new Rw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              keys: []
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(Dw).metaCounter];
	        }
	      });
	    });
	  }, A.prototype.createMetaCounters = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new Mw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              metaCounter: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(xw).metaCounter];
	        }
	      });
	    });
	  }, A.prototype.updateMetaCounters = function (r, i) {
	    return void 0 === i && (i = !1), re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new Lw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              metaCounter: r,
	              upsert: i
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(Pw).metaCounter];
	        }
	      });
	    });
	  }, A.prototype.increaseMetaCounters = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new Lw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              metaCounter: r,
	              upsert: !1,
	              mode: "increase"
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(Pw).metaCounter];
	        }
	      });
	    });
	  }, A.prototype.decreaseMetaCounters = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new Lw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              metaCounter: r,
	              upsert: !1,
	              mode: "decrease"
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(Pw).metaCounter];
	        }
	      });
	    });
	  }, A.prototype.deleteMetaCounter = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("string", r)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new qw({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              key: r
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A.prototype.deleteAllMetaCounters = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new aT({
	              channelUrl: this.url,
	              channelType: this.channelType
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A.prototype.muteUser = function (t, n, r) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this.muteUserWithUserId(t.userId, n, r)];
	      });
	    });
	  }, A.prototype.muteUserWithUserId = function (r, i, s) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("string", r) && c("number", i, !0) && c("string", s, !0)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new lT({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              userId: r,
	              seconds: i,
	              description: s
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A.prototype.unmuteUser = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this.unmuteUserWithUserId(t.userId)];
	      });
	    });
	  }, A.prototype.unmuteUserWithUserId = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("string", r)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new _T({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              userId: r
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A.prototype.banUser = function (t, n, r) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this.banUserWithUserId(t.userId, n, r)];
	      });
	    });
	  }, A.prototype.banUserWithUserId = function (r, i, s) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("string", r) && c("number", i, !0) && c("string", s, !0)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new wT({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              userId: r,
	              seconds: i,
	              description: s
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A.prototype.unbanUser = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this.unbanUserWithUserId(t.userId)];
	      });
	    });
	  }, A.prototype.unbanUserWithUserId = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("string", r)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new OT({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              userId: r
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A.prototype.freeze = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new UT({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              freezing: !0
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), this.isFrozen = !0, [2];
	        }
	      });
	    });
	  }, A.prototype.unfreeze = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new UT({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              freezing: !1
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), this.isFrozen = !1, [2];
	        }
	      });
	    });
	  }, A.prototype.getMessagesByTimestamp = function (n, r) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return r = f(f({}, B0), r), C(c("number", n) && c("number", (t = r).prevResultSize) && c("number", t.nextResultSize) && c("boolean", t.isInclusive) && c("boolean", t.reverse) && c("string", t.messageTypeFilter) && ly(Em, t.messageTypeFilter) && hy("string", t.customTypesFilter, !0) && hy("string", t.senderUserIdsFilter, !0) && ly(wm, t.replyType) && c("boolean", t.includeMetaArray) && c("boolean", t.includeReactions) && c("boolean", t.includeParentMessageInfo) && c("boolean", t.includeThreadInfo) && c("boolean", t.showSubchannelMessagesOnly)).throw(p.invalidParameters), [4, Ib.of(this._iid).getMessagesByTimestamp(this.url, this.channelType, n, r)];

	          case 1:
	            return [2, e.sent()];
	        }

	        var t;
	      });
	    });
	  }, A.prototype.getMessageChangeLogsSinceTimestamp = function (t, n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return n = f(f({}, K0), n), C(c("number", t) && H0(n)).throw(p.invalidParameters), [4, Ib.of(this._iid).getMessageChangelogs(this.url, this.channelType, t, n)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, A.prototype.getMessageChangeLogsSinceToken = function (t, n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return n = f(f({}, K0), n), C(c("string", t) && H0(n)).throw(p.invalidParameters), [4, Ib.of(this._iid).getMessageChangelogs(this.url, this.channelType, t, n)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, A.prototype._createPendingSendableMessagePayload = function (e, t, n) {
	    var r = N.of(this._iid).sessionManager;
	    return w({
	      channel_url: this.url,
	      channel_type: this.channelType,
	      msg_id: 0,
	      parent_message_id: e.parentMessageId,
	      data: e.data,
	      custom_type: e.customType,
	      mention_type: e.mentionType,
	      sorted_metaarray: e.metaArrays ? e.metaArrays.map(function (e) {
	        return zE.payloadify(e);
	      }) : null,
	      apple_critical_alert_options: e.appleCriticalAlertOptions ? XE.payloadify(e.appleCriticalAlertOptions) : null,
	      created_at: n,
	      user: v0.payloadify(r.currentUser),
	      req_id: t,
	      request_state: Sm.PENDING,
	      mentioned_user_ids: e.mentionedUserIds,
	      mentioned_users: e.mentionedUsers
	    });
	  }, A.prototype._createPendingUserMessage = function (e, t, n) {
	    var r = {};
	    if (e.translationTargetLanguages) try {
	      for (var i = se(e.translationTargetLanguages), s = i.next(); !s.done; s = i.next()) r[s.value] = "";
	    } catch (e) {
	      o = {
	        error: e
	      };
	    } finally {
	      try {
	        s && !s.done && (a = i.return) && a.call(i);
	      } finally {
	        if (o) throw o.error;
	      }
	    }
	    var a = w(f(f({}, this._createPendingSendableMessagePayload(e, t, n)), {
	      type: gm.USER,
	      message: e.message,
	      translations: r
	    })),
	        o = new b0(this._iid, a);
	    return o.messageParams = e, o;
	  }, A.prototype._createPendingScheduledUserMessage = function (e, t, n) {
	    t = this._createPendingUserMessage(e, t, n);
	    return t.scheduledInfo = {
	      scheduledMessageId: 0,
	      scheduledAt: e.scheduledAt,
	      scheduledMessageParams: e
	    }, t;
	  }, A.prototype._createPendingFileMessage = function (e, t, n) {
	    t = w(f(f({}, this._createPendingSendableMessagePayload(e, t, n)), {
	      type: gm.FILE,
	      url: e.fileUrl,
	      file: {
	        name: e.fileName,
	        size: e.fileSize,
	        type: e.mimeType,
	        data: e.data
	      },
	      thumbnails: e.thumbnailSizes ? e.thumbnailSizes.map(function (e) {
	        return {
	          url: "",
	          width: e.maxWidth,
	          height: e.maxHeight
	        };
	      }) : []
	    })), n = new T0(this._iid, t);
	    return n.messageParams = e, n;
	  }, A.prototype._createPendingScheduledFileMessage = function (e, t, n) {
	    t = this._createPendingFileMessage(e, t, n);
	    return t.scheduledInfo = {
	      scheduledMessageId: 0,
	      scheduledAt: e.scheduledAt,
	      scheduledMessageParams: e
	    }, t;
	  }, A.prototype._markMessageAsFailed = function (e, t, n) {
	    void 0 === n && (n = !1), e.errorCode = t.code, t.code === d.REQUEST_CANCELED ? e.sendingStatus = Sm.CANCELED : n || (e.sendingStatus = Sm.FAILED);
	  }, A.prototype.sendUserMessage = function (e) {
	    return e = f(f({}, rI), e), C(eI(t = e) && c("string", t.message) && hy("string", t.translationTargetLanguages, !0)).throw(p.invalidParameters), this._sendUserMessage(e);
	    var t;
	  }, A.prototype._sendUserMessage = function (r, i, e) {
	    var n,
	        s = this,
	        t = (void 0 === i && (i = Date.now()), void 0 === e && (e = null), N.of(this._iid)),
	        a = t.dispatcher,
	        t = t.requestQueue,
	        o = e,
	        u = new wb(),
	        e = (o || (o = this._generateRequestId(), n = N.of(this._iid).dispatcher, fm(2).then(function () {
	      var t = s._createPendingUserMessage(r, o, i);

	      n.dispatch(new J0({
	        messages: [t],
	        source: G0.EVENT_MESSAGE_SENT_PENDING
	      })), ae(function () {
	        return re(s, void 0, void 0, function () {
	          return ie(this, function (e) {
	            return [2, u._trigger(null, t)];
	          });
	        });
	      });
	    })), new nS(f({
	      channelUrl: this.url,
	      channelType: this.channelType,
	      reqId: o
	    }, r)));
	    return t.send(e).then(function (e) {
	      var t = e.as(rS).message;
	      a.dispatch(new J0({
	        messages: [t],
	        source: G0.EVENT_MESSAGE_SENT_SUCCESS
	      })), ae(function () {
	        return re(s, void 0, void 0, function () {
	          return ie(this, function (e) {
	            return [2, u._trigger(null, t)];
	          });
	        });
	      });
	    }).catch(function (n) {
	      if (ey(n)) throw n;
	      fm(2).then(function () {
	        var t = s._createPendingUserMessage(r, o, i),
	            e = N.of(s._iid).cacheContext.localCacheEnabled && ny(n.code);

	        s._markMessageAsFailed(t, n, e), a.dispatch(new J0({
	          messages: [t],
	          source: t.sendingStatus === Sm.PENDING ? G0.REQUEST_RESEND_MESSAGE : G0.EVENT_MESSAGE_SENT_FAILED
	        })), ae(function () {
	          return re(s, void 0, void 0, function () {
	            return ie(this, function (e) {
	              return [2, u._trigger(n, t)];
	            });
	          });
	        });
	      });
	    }), u;
	  }, A.prototype._autoResendUserMessage = function (e) {
	    return C(e instanceof b0).throw(p.invalidParameters), this._sendUserMessage(e.messageParams, e.createdAt, e.reqId);
	  }, A.prototype.resendUserMessage = function (r) {
	    var i;
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        return C(r instanceof b0 && !r.scheduledInfo).throw(p.invalidParameters), t = new rm(), n = null != (i = r.messageParams) ? i : w({
	          data: r.data,
	          customType: r.customType,
	          mentionType: r.mentionType,
	          mentionedUsers: r.mentionedUsers,
	          mentionedUserIds: r.mentionedUserIds,
	          mentionedMessageTemplate: r.mentionedMessageTemplate,
	          metaArrays: r.metaArrays,
	          parentMessageId: r.parentMessageId,
	          appleCriticalAlertOptions: r.appleCriticalAlertOptions,
	          message: r.message,
	          translationTargetLanguages: Object.keys(r.translations)
	        }), this._sendUserMessage(n).onFailed(function (e) {
	          return t.reject(e);
	        }).onSucceeded(function (e) {
	          return t.resolve(e);
	        }), [2, t.promise];
	      });
	    });
	  }, A.prototype.updateUserMessage = function (s, a) {
	    return re(this, void 0, void 0, function () {
	      var n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return a = f(f({}, TI), a), C(c("number", s) && lI(t = a) && c("string", t.message, !0) && hy("string", t.translationTargetLanguages, !0)).throw(p.invalidParameters), r = N.of(this._iid), n = r.dispatcher, r = r.requestQueue, i = new iS(f({
	              channelType: this.channelType,
	              channelUrl: this.url,
	              messageId: s
	            }, a)), [4, r.send(i)];

	          case 1:
	            return r = e.sent(), i = r.as(sS).message, n.dispatch(new J0({
	              messages: [i],
	              source: G0.EVENT_MESSAGE_UPDATED
	            })), [2, i];
	        }

	        var t;
	      });
	    });
	  }, A.prototype.copyUserMessage = function (r, i) {
	    var s;
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        return C(r instanceof A && i instanceof b0 && i.sendingStatus === Sm.SUCCEEDED && r.url === i.channelUrl && !i.scheduledInfo).throw(p.invalidParameters), t = new rm(), n = null != (s = i.messageParams) ? s : f(f({}, i), {
	          mentionType: i.mentionType,
	          mentionedUserIds: null != (s = i.mentionedUserIds) ? s : null == (s = i.mentionedUsers) ? void 0 : s.map(function (e) {
	            return e.userId;
	          }),
	          translationTargetLanguages: Object.keys(i.translations),
	          pushNotificationDeliveryOption: Tm.DEFAULT,
	          parentMessageId: null,
	          isReplyToChannel: !1
	        }), r._sendUserMessage(n).onSucceeded(function (e) {
	          return t.resolve(e);
	        }).onFailed(function (e) {
	          return t.reject(e);
	        }), [2, t.promise];
	      });
	    });
	  }, A.prototype.translateUserMessage = function (r, i) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(r instanceof b0 && 0 < r.messageId && hy("string", i)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new HS({
	              channelType: this.channelType,
	              channelUrl: this.url,
	              messageId: r.messageId,
	              translationTargetLanguages: i
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(GS).message];
	        }
	      });
	    });
	  }, A.prototype._createScheduledUserMessage = function (e, r) {
	    var i = this,
	        t = N.of(this._iid).requestQueue,
	        s = Date.now(),
	        a = this._generateRequestId(),
	        n = (fm(2).then(function () {
	      var t = i._createPendingScheduledUserMessage(e, a, s);

	      ae(function () {
	        return re(i, void 0, void 0, function () {
	          return ie(this, function (e) {
	            return [2, r._trigger(null, t)];
	          });
	        });
	      });
	    }), new VS(f({
	      reqId: a,
	      channelType: this.channelType,
	      channelUrl: this.url
	    }, e)));

	    t.send(n).then(function (e) {
	      var t = e.as(BS).message;
	      ae(function () {
	        return re(i, void 0, void 0, function () {
	          return ie(this, function (e) {
	            return [2, r._trigger(null, t)];
	          });
	        });
	      });
	    }).catch(function (n) {
	      if (ey(n)) throw n;
	      fm(2).then(function () {
	        var t = i._createPendingScheduledUserMessage(e, a, s);

	        i._markMessageAsFailed(t, n), ae(function () {
	          return re(i, void 0, void 0, function () {
	            return ie(this, function (e) {
	              return [2, r._trigger(n, t)];
	            });
	          });
	        });
	      });
	    });
	  }, A.prototype.sendFileMessage = function (e) {
	    return e = f(f({}, cI), e), C(oI(e)).throw(p.invalidParameters), this._sendFileMessage(e);
	  }, A.prototype._sendFileMessage = function (r, i, e) {
	    var s = this,
	        a = (void 0 === i && (i = Date.now()), void 0 === e && (e = null), N.of(this._iid).dispatcher),
	        t = Ib.of(this._iid).fileMessageQueue,
	        o = e,
	        u = new wb();
	    return o || (o = this._generateRequestId(), fm(2).then(function () {
	      var t = s._createPendingFileMessage(r, o, i);

	      a.dispatch(new J0({
	        messages: [t],
	        source: G0.EVENT_MESSAGE_SENT_PENDING
	      })), ae(function () {
	        return re(s, void 0, void 0, function () {
	          return ie(this, function (e) {
	            return [2, u._trigger(null, t)];
	          });
	        });
	      });
	    })), t.request(this, o, r).then(function (t) {
	      a.dispatch(new J0({
	        messages: [t],
	        source: G0.EVENT_MESSAGE_SENT_SUCCESS
	      })), ae(function () {
	        return re(s, void 0, void 0, function () {
	          return ie(this, function (e) {
	            return [2, u._trigger(null, t)];
	          });
	        });
	      });
	    }).catch(function (n) {
	      if (ey(n)) throw n;
	      fm(2).then(function () {
	        var t = s._createPendingFileMessage(r, o, i),
	            e = N.of(s._iid).cacheContext.localCacheEnabled && ny(n.code);

	        s._markMessageAsFailed(t, n, e), a.dispatch(new J0({
	          messages: [t],
	          source: t.sendingStatus === Sm.PENDING ? G0.REQUEST_RESEND_MESSAGE : G0.EVENT_MESSAGE_SENT_FAILED
	        })), ae(function () {
	          return re(s, void 0, void 0, function () {
	            return ie(this, function (e) {
	              return [2, u._trigger(n, t)];
	            });
	          });
	        });
	      });
	    }), u;
	  }, A.prototype._autoResendFileMessage = function (e) {
	    C(e instanceof T0).throw(p.invalidParameters);
	    var t = N.of(this._iid).logger;
	    return t.debug("autoResendFileMessage pending", e), this._sendFileMessage(e.messageParams, e.createdAt, e.reqId).onFailed(function (e) {
	      t.debug("autoResendFileMessage failed", e);
	    }).onSucceeded(function (e) {
	      t.debug("autoResendFileMessage success", e);
	    });
	  }, A.prototype._createScheduledFileMessage = function (e, r, i, s) {
	    var a = this,
	        t = N.of(this._iid).requestQueue,
	        n = new KS(f(f({
	      reqId: i,
	      channelType: this.channelType,
	      channelUrl: this.url
	    }, e), {
	      fileUrl: e.fileUrl,
	      requireAuth: e.requireAuth
	    }));
	    t.send(n).then(function (e) {
	      var t = e.as(QS).message;
	      ae(function () {
	        return re(a, void 0, void 0, function () {
	          return ie(this, function (e) {
	            return [2, r._trigger(null, t)];
	          });
	        });
	      });
	    }).catch(function (n) {
	      if (ey(n)) throw n;
	      fm(2).then(function () {
	        var t = a._createPendingScheduledFileMessage(e, i, s);

	        a._markMessageAsFailed(t, n), ae(function () {
	          return re(a, void 0, void 0, function () {
	            return ie(this, function (e) {
	              return [2, r._trigger(n, t)];
	            });
	          });
	        });
	      });
	    });
	  }, A.prototype.sendFileMessages = function (e) {
	    C(e.every(function (e) {
	      return oI(f(f({}, cI), e));
	    })).throw(p.invalidParameters);
	    var t,
	        n,
	        r = new wb();

	    try {
	      for (var i = se(e), s = i.next(); !s.done; s = i.next()) {
	        var a = s.value;
	        this.sendFileMessage(a).onPending(function (e) {
	          return r._trigger(null, e);
	        }).onFailed(function (e, t) {
	          return r._trigger(e, t);
	        }).onSucceeded(function (e) {
	          return r._trigger(null, e);
	        });
	      }
	    } catch (e) {
	      t = {
	        error: e
	      };
	    } finally {
	      try {
	        s && !s.done && (n = i.return) && n.call(i);
	      } finally {
	        if (t) throw t.error;
	      }
	    }

	    return r;
	  }, A.prototype.resendFileMessage = function (i, s) {
	    var a;
	    return re(this, void 0, void 0, function () {
	      var n, r;
	      return ie(this, function (e) {
	        return C(i instanceof T0 && s instanceof Blob && !i.scheduledInfo).throw(p.invalidParameters), n = new rm(), r = null != (a = i.messageParams) ? a : (t = s, w({
	          data: i.data,
	          customType: i.customType,
	          mentionType: i.mentionType,
	          mentionedUsers: i.mentionedUsers,
	          mentionedUserIds: i.mentionedUserIds,
	          metaArrays: i.metaArrays,
	          parentMessageId: i.parentMessageId,
	          appleCriticalAlertOptions: i.appleCriticalAlertOptions,
	          file: t = void 0 === s ? null : t,
	          fileUrl: i.url,
	          fileName: i.name,
	          fileSize: i.size,
	          mimeType: i.type,
	          thumbnailSizes: i.thumbnails.map(function (e) {
	            return {
	              maxWidth: e.width,
	              maxHeight: e.height
	            };
	          })
	        })), this._sendFileMessage(r).onFailed(function (e) {
	          return n.reject(e);
	        }).onSucceeded(function (e) {
	          return n.resolve(e);
	        }), [2, n.promise];
	        var t;
	      });
	    });
	  }, A.prototype.updateFileMessage = function (i, s) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return s = f(f({}, SI), s), C(c("number", i) && lI(s)).throw(p.invalidParameters), n = N.of(this._iid), t = n.dispatcher, n = n.requestQueue, r = new aS(f({
	              channelType: this.channelType,
	              channelUrl: this.url,
	              messageId: i
	            }, s)), [4, n.send(r)];

	          case 1:
	            return n = e.sent(), r = n.as(oS).message, t.dispatch(new J0({
	              messages: [r],
	              source: G0.EVENT_MESSAGE_UPDATED
	            })), [2, r];
	        }
	      });
	    });
	  }, A.prototype.cancelUploadingFileMessage = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return C(c("string", t)).throw(p.invalidParameters), Ib.of(this._iid).fileMessageQueue.cancel(this, t), [2, !0];
	      });
	    });
	  }, A.prototype.copyFileMessage = function (r, i) {
	    var s;
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        return C(r instanceof A && i instanceof T0 && i.sendingStatus === Sm.SUCCEEDED && r.url === i.channelUrl && !i.scheduledInfo).throw(p.invalidParameters), t = new rm(), n = f(f({}, i), {
	          fileUrl: i.url,
	          fileName: i.name,
	          fileSize: i.size,
	          mimeType: i.type,
	          mentionType: i.mentionType,
	          mentionedUserIds: null != (s = i.mentionedUserIds) ? s : null == (s = i.mentionedUsers) ? void 0 : s.map(function (e) {
	            return e.userId;
	          }),
	          pushNotificationDeliveryOption: Tm.DEFAULT,
	          parentMessageId: null,
	          isReplyToChannel: !1,
	          thumbnailSizes: i.thumbnails.map(function (e) {
	            return {
	              maxWidth: e.width,
	              maxHeight: e.height
	            };
	          }),
	          requireAuth: i.requireAuth
	        }), r._sendFileMessage(n).onSucceeded(function (e) {
	          return t.resolve(e);
	        }).onFailed(function (e) {
	          return t.reject(e);
	        }), [2, t.promise];
	      });
	    });
	  }, A.prototype.deleteMessage = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(r instanceof _0).throw(p.invalidParameters), 0 < r.messageId ? (t = N.of(this._iid).requestQueue, n = new uS({
	              channelType: this.channelType,
	              channelUrl: this.url,
	              messageId: r.messageId
	            }), [4, t.send(n)]) : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, A.prototype.addReaction = function (r, i) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(r instanceof p0 && 0 < r.messageId && c("string", i)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new US({
	              channelType: this.channelType,
	              channelUrl: this.url,
	              messageId: r.messageId,
	              reactionKey: i
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(qS).reactionEvent];
	        }
	      });
	    });
	  }, A.prototype.deleteReaction = function (r, i) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(r instanceof p0 && 0 < r.messageId && c("string", i)).throw(p.invalidParameters), t = N.of(this._iid).requestQueue, n = new FS({
	              channelType: this.channelType,
	              channelUrl: this.url,
	              messageId: r.messageId,
	              reactionKey: i
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(jS).reactionEvent];
	        }
	      });
	    });
	  }, A.prototype._updateMessageMetaArray = function (i, s, a, o) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return n = N.of(this._iid), t = n.dispatcher, n = n.requestQueue, r = new iS({
	              channelType: this.channelType,
	              channelUrl: this.url,
	              messageId: i,
	              metaArrayParams: {
	                array: s,
	                mode: a,
	                upsert: o
	              }
	            }), [4, n.send(r)];

	          case 1:
	            return n = e.sent(), r = n.as(sS).message, t.dispatch(new J0({
	              messages: [r],
	              source: G0.EVENT_MESSAGE_UPDATED
	            })), [2, r];
	        }
	      });
	    });
	  }, A.prototype.createMessageMetaArrayKeys = function (n, r) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        return C(n instanceof _0 && 0 < n.messageId && hy("string", r)).throw(p.invalidParameters), t = r.map(function (e) {
	          return new zE({
	            key: e
	          });
	        }), [2, this._updateMessageMetaArray(n.messageId, t, "add", !0)];
	      });
	    });
	  }, A.prototype.deleteMessageMetaArrayKeys = function (n, r) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        return C(n instanceof _0 && 0 < n.messageId && hy("string", r)).throw(p.invalidParameters), t = r.map(function (e) {
	          return new zE({
	            key: e
	          });
	        }), [2, this._updateMessageMetaArray(n.messageId, t, "remove", !0)];
	      });
	    });
	  }, A.prototype.addMessageMetaArrayValues = function (t, n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return C(t instanceof _0 && 0 < t.messageId && n.every(function (e) {
	          return e instanceof zE;
	        })).throw(p.invalidParameters), [2, this._updateMessageMetaArray(t.messageId, n, "add", !0)];
	      });
	    });
	  }, A.prototype.removeMessageMetaArrayValues = function (t, n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return C(t instanceof _0 && 0 < t.messageId && n.every(function (e) {
	          return e instanceof zE;
	        })).throw(p.invalidParameters), [2, this._updateMessageMetaArray(t.messageId, n, "remove", !0)];
	      });
	    });
	  }, A.prototype.report = function (r, i) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(ly(hI, r) && c("string", i)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new $T({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              userId: n.userId,
	              category: r,
	              description: i
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A.prototype.reportUser = function (r, i, s) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(r instanceof k && ly(hI, i) && c("string", s)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new eS({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              userId: n.userId,
	              offendingUserId: r.userId,
	              category: i,
	              description: s
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A.prototype.reportMessage = function (r, i, s) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(r instanceof _0 && ly(hI, i) && c("string", s)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new tS({
	              channelUrl: this.url,
	              channelType: this.channelType,
	              userId: n.userId,
	              offendingUserId: r.sender.userId,
	              messageId: r.messageId,
	              category: i,
	              description: s
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, A);

	  function A(e, t) {
	    var n = this;
	    return (n = ES.call(this, e) || this).url = "", n.channelType = ym.BASE, n.name = "", n.coverUrl = "", n.customType = "", n.data = "", n.isFrozen = !1, n.isEphemeral = !1, n.creator = null, n.createdAt = 0, n.url = t.channel_url, n.name = null != (e = t.name) ? e : "", n.coverUrl = null != (e = t.cover_url) ? e : "", n.customType = null != (e = t.custom_type) ? e : "", n.data = null != (e = t.data) ? e : "", n.isFrozen = !!c("boolean", t.freeze) && t.freeze, n.isEphemeral = !!c("boolean", t.is_ephemeral) && t.is_ephemeral, n.creator = t.created_by ? new k(n._iid, t.created_by) : null, n.createdAt = 1e3 * t.created_at, n._cachedMetaData = new Map(), t.metadata && t.ts && Object.keys(t.metadata).forEach(function (e) {
	      n._cachedMetaData.set(e, {
	        value: t.metadata[e],
	        isRemoved: !1,
	        updatedAt: t.ts
	      });
	    }), n;
	  }

	  function WS(e, t) {
	    var n = bS.call(this, e, t) || this;
	    return n.message = new T0(e, t), n;
	  }

	  function YS(e) {
	    var t = this,
	        t = IS.call(this) || this,
	        n = [],
	        r = (e.mentionType === Im.USERS && (e.mentionedUserIds ? n = e.mentionedUserIds : e.mentionedUsers && (n = e.mentionedUsers.map(function (e) {
	      return e.userId;
	    }))), e.channelType),
	        i = e.channelUrl;
	    return t.method = T.POST, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(i), "/scheduled_messages"), t.params = {
	      req_id: e.reqId,
	      scheduled_at: e.scheduledAt,
	      message_type: bm.FILE,
	      url: e.fileUrl,
	      file_name: e.fileName,
	      file_size: e.fileSize,
	      file_type: e.mimeType,
	      thumbnails: e.thumbnailSizes ? e.thumbnailSizes.map(function (e) {
	        return y0.payloadify(e);
	      }) : [],
	      custom_type: e.customType,
	      data: e.data,
	      require_auth: e.requireAuth,
	      mention_type: e.mentionType,
	      mentioned_user_ids: n,
	      sorted_metaarray: null == (r = e.metaArrays) ? void 0 : r.map(function (e) {
	        return zE.payloadify(e);
	      }),
	      apple_critical_alert_options: XE.payloadify(e.appleCriticalAlertOptions),
	      push_option: e.pushNotificationDeliveryOption
	    }, t;
	  }

	  function XS(e, t) {
	    var n = wS.call(this, e, t) || this;
	    return n.message = new b0(e, t), n;
	  }

	  function JS(e) {
	    var t = this,
	        t = TS.call(this) || this,
	        n = [],
	        r = (e.mentionType === Im.USERS && (e.mentionedUserIds ? n = e.mentionedUserIds : e.mentionedUsers && (n = e.mentionedUsers.map(function (e) {
	      return e.userId;
	    }))), e.channelType),
	        i = e.channelUrl;
	    return t.method = T.POST, t.path = "".concat(Rg(r), "/").concat(encodeURIComponent(i), "/scheduled_messages"), t.params = {
	      req_id: e.reqId,
	      scheduled_at: e.scheduledAt,
	      message_type: bm.USER,
	      message: e.message,
	      custom_type: e.customType,
	      data: e.data,
	      mention_type: e.mentionType,
	      mentioned_user_ids: n,
	      sorted_metaarray: null == (r = e.metaArrays) ? void 0 : r.map(function (e) {
	        return zE.payloadify(e);
	      }),
	      apple_critical_alert_options: XE.payloadify(e.appleCriticalAlertOptions),
	      target_langs: e.translationTargetLanguages,
	      push_option: e.pushNotificationDeliveryOption
	    }, t;
	  }

	  function ZS(e, t) {
	    var n = SS.call(this, e, t) || this;
	    return n.message = new b0(e, t), n;
	  }

	  function $S(e) {
	    var t = e.channelType,
	        n = e.channelUrl,
	        r = e.messageId,
	        e = e.translationTargetLanguages,
	        i = CS.call(this) || this;
	    return i.method = T.POST, i.path = "".concat(Rg(t), "/").concat(encodeURIComponent(n), "/messages/").concat(encodeURIComponent(r), "/translation"), i.params = {
	      target_langs: e
	    }, i;
	  }

	  function eC(e, t) {
	    e = kS.call(this, e, t) || this;
	    return e.reactionEvent = new BE(f({}, t)), e;
	  }

	  function tC(e) {
	    var t = e.channelType,
	        n = e.channelUrl,
	        r = e.messageId,
	        e = e.reactionKey,
	        i = NS.call(this) || this;
	    return i.method = T.DELETE, i.path = "".concat(Rg(t), "/").concat(encodeURIComponent(n), "/messages/").concat(r, "/reactions"), i.params = {
	      reaction: e
	    }, i;
	  }

	  function nC(e, t) {
	    e = AS.call(this, e, t) || this;
	    return e.reactionEvent = new BE(t), e;
	  }

	  function rC(e) {
	    var t = e.channelType,
	        n = e.channelUrl,
	        r = e.messageId,
	        e = e.reactionKey,
	        i = OS.call(this) || this;
	    return i.method = T.POST, i.path = "".concat(Rg(t), "/").concat(encodeURIComponent(n), "/messages/").concat(r, "/reactions"), i.params = {
	      reaction: e
	    }, i;
	  }

	  function iC(e, t, n) {
	    e = RS.call(this, e, "DELM", n) || this;
	    return e.channelUrl = n.channel_url, e.channelType = n.channel_type, e.messageId = Number(n.msg_id), e;
	  }

	  (Kt = DS = DS || {}).SUCCESS = "success", Kt.PENDING = "pending", Kt.ERROR = "error", ($e = MS = MS || {}).DEFAULT = "default", $e.ALL = "all", $e.MENTION_ONLY = "mention_only", $e.OFF = "off", (Xe = xS = xS || {}).FCM = "gcm", Xe.APNS = "apns", Xe.UNKNOWN = "unknown", (Ft = LS = LS || {}).ALTERNATIVE = "alternative", Ft.DEFAULT = "default";
	  var sC;
	  (r = sC = sC || {}).LATEST_LAST_MESSAGE = "latest_last_message", r.CHRONOLOGICAL = "chronological", r.CHANNEL_NAME_ALPHABETICAL = "channel_name_alphabetical", r.METADATA_VALUE_ALPHABETICAL = "metadata_value_alphabetical";

	  function aC(e) {
	    switch (e) {
	      case sC.LATEST_LAST_MESSAGE:
	        return ["-lastMessageUpdatedAt", "-createdAt", "syncIndex"];

	      case sC.CHRONOLOGICAL:
	        return ["-createdAt", "syncIndex"];

	      case sC.CHANNEL_NAME_ALPHABETICAL:
	        return ["name"];
	    }
	  }

	  cC.prototype.clone = function () {
	    var t = new cC(),
	        n = JSON.parse(JSON.stringify(this));
	    return Object.keys(n).forEach(function (e) {
	      t[e] = n[e];
	    }), t;
	  }, cC.prototype.match = function (e) {
	    switch (this.messageTypeFilter) {
	      case Em.USER:
	        if (e.messageType !== gm.USER) return !1;
	        break;

	      case Em.FILE:
	        if (e.messageType !== gm.FILE) return !1;
	        break;

	      case Em.ADMIN:
	        if (e.messageType !== gm.ADMIN) return !1;
	    }

	    if (this.customTypesFilter && 0 < this.customTypesFilter.length && !this.customTypesFilter.includes(e.customType)) return !1;

	    if (this.senderUserIdsFilter && 0 < this.senderUserIdsFilter.length) {
	      if (!(e instanceof _0)) return !1;
	      if (!this.senderUserIdsFilter.includes(e.sender.userId)) return !1;
	    }

	    switch (this.replyType) {
	      case wm.NONE:
	        if (0 < e.parentMessageId) return !1;
	        break;

	      case wm.ONLY_REPLY_TO_CHANNEL:
	        if (e instanceof _0 && 0 < e.parentMessageId && !e.replyToChannel) return !1;
	    }

	    return !0;
	  };
	  var oC,
	      uC = cC;

	  function cC() {
	    this.messageTypeFilter = Em.ALL, this.customTypesFilter = null, this.senderUserIdsFilter = null, this.replyType = wm.NONE;
	  }

	  (B = oC = oC || {}).CHANNEL_LATEST = "channel_latest", B.NEWEST_CHILD_MESSAGE = "newest_child_message";

	  function lC(e) {
	    switch (e) {
	      case oC.CHANNEL_LATEST:
	        return ["channelUrl", "-createdAt", "-messageId"];

	      case oC.NEWEST_CHILD_MESSAGE:
	        return ["channelUrl", "-parentMessageId", "-createdAt", "-messageId"];
	    }
	  }

	  f(f({}, rI), {
	    scheduledAt: null
	  }), f(f({}, Ze), {
	    scheduledAt: null,
	    file: null,
	    fileUrl: null,
	    fileName: null,
	    mimeType: null,
	    fileSize: null,
	    thumbnailSizes: null,
	    requireAuth: !1
	  });

	  var hC,
	      dC,
	      fC,
	      pC,
	      vC = {},
	      _C = (o(SC, pC = jn), SC.of = function (e) {
	    return vC[e];
	  }, Object.defineProperty(SC.prototype, "collection", {
	    get: function () {
	      var e = this._cacheContext.nestdb;
	      return e && e.collection("UnsentMessage");
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(SC.prototype, "localCacheEnabled", {
	    get: function () {
	      return this._cacheContext.localCacheEnabled && !!this.collection;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), SC.prototype._serialize = function (e) {
	    if (0 < e.messageId) throw p.invalidParameters;
	    var t,
	        n = f({}, e.serialize());
	    return e instanceof b0 ? (e.messageParams && (n.messageParams = tI(e.messageParams)), e.scheduledInfo && e.scheduledInfo.scheduledMessageParams && (n.scheduledInfo.scheduledMessageParams = (t = e.scheduledInfo.scheduledMessageParams, f(f({}, tI(t)), {
	      scheduledAt: t.scheduledAt
	    })))) : e instanceof T0 && (e.messageParams && (n.messageParams = aI(e.messageParams)), e.scheduledInfo && e.scheduledInfo.scheduledMessageParams && (n.scheduledInfo.scheduledMessageParams = (t = e.scheduledInfo.scheduledMessageParams, f(f({}, aI(t)), {
	      scheduledAt: t.scheduledAt
	    })))), n;
	  }, SC.prototype._deserialize = function (e) {
	    return e ? (e = f(f({}, e), {
	      messageId: parseInt(e.messageId)
	    }), Ib.of(this._iid).buildMessageFromSerializedData(e)) : null;
	  }, SC.prototype.get = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, this.collection.getByKey("".concat(n))] : [3, 2];

	          case 1:
	            if (t = e.sent()) return [2, this._deserialize(t)];
	            e.label = 2;

	          case 2:
	            return [2, null];
	        }
	      });
	    });
	  }, SC.prototype.fetch = function (e) {
	    var t = e.channelUrl,
	        i = void 0 === t ? null : t,
	        t = e.filter,
	        s = void 0 === t ? new uC() : t,
	        t = e.order,
	        a = void 0 === t ? oC.CHANNEL_LATEST : t,
	        t = e.sendingStatus,
	        o = void 0 === t ? null : t,
	        t = e.backward,
	        u = void 0 !== t && t,
	        t = e.parentMessageId,
	        c = void 0 === t ? null : t;
	    return re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? (n = lC(a), t = {
	              "/where": function (e) {
	                return !!(a !== oC.NEWEST_CHILD_MESSAGE || c && 0 !== e.parentMessageId && e.parentMessageId === c) && s.match(r._deserialize(e));
	              }
	            }, i && (t.channelUrl = i), o && (t.sendingStatus = o), t = {
	              where: t,
	              index: n,
	              backward: u
	            }, [4, this.collection.query(t)]) : [3, 3];

	          case 1:
	            return [4, e.sent().fetch({})];

	          case 2:
	            return n = e.sent(), [2, Promise.all(n.map(function (o) {
	              return re(r, void 0, void 0, function () {
	                var t, n, r, i, s, a;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      return t = Ib.of(this._iid), n = this._deserialize(o), (r = o.messageParams) ? n instanceof b0 ? (n.messageParams = t.buildUserMessageCreateParamsFromSerializedData(r, n), [3, 4]) : [3, 1] : [3, 4];

	                    case 1:
	                      return n instanceof T0 ? r.fileKey && "string" == typeof r.fileKey && sI(r.fileType) ? (i = r, [4, this.collection.getBlob(r.fileKey)]) : [3, 3] : [3, 4];

	                    case 2:
	                      i.file = e.sent(), e.label = 3;

	                    case 3:
	                      n.messageParams = t.buildFileMessageCreateParamsFromSerializedData(r, n), e.label = 4;

	                    case 4:
	                      return n.scheduledInfo && o.scheduledInfo && o.scheduledInfo.scheduledMessageParams ? n instanceof b0 ? (s = o.scheduledInfo.scheduledMessageParams, n.scheduledInfo.scheduledMessageParams = t.buildScheduledUserMessageCreateParamsFromSerializedData(s, n), [3, 8]) : [3, 5] : [3, 8];

	                    case 5:
	                      return n instanceof T0 ? (s = o.scheduledInfo.scheduledMessageParams).fileKey && "string" == typeof s.fileKey && sI(s.fileType) ? (a = s, [4, this.collection.getBlob(s.fileKey)]) : [3, 7] : [3, 8];

	                    case 6:
	                      a.file = e.sent(), e.label = 7;

	                    case 7:
	                      n.scheduledInfo.scheduledMessageParams = t.buildScheduledFileMessageCreateParamsFromSerializedData(s, n), e.label = 8;

	                    case 8:
	                      return [2, n];
	                  }
	                });
	              });
	            }))];

	          case 3:
	            return [2, []];
	        }
	      });
	    });
	  }, SC.prototype.getAllChildMessages = function (t, n) {
	    return void 0 === n && (n = new uC()), re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this.fetch({
	              filter: n,
	              order: oC.NEWEST_CHILD_MESSAGE,
	              channelUrl: t.channelUrl,
	              backward: !1,
	              parentMessageId: t.messageId
	            })];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, SC.prototype.upsert = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, this.saveBlobs(r)] : [3, 3];

	          case 1:
	            return e.sent(), t = r.map(function (e) {
	              return n._serialize(e);
	            }), [4, this.collection.upsertMany(t)];

	          case 2:
	            e.sent(), e.label = 3;

	          case 3:
	            return [2];
	        }
	      });
	    });
	  }, SC.prototype.upsertChildMessages = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, Promise.all(n.map(function (r) {
	              return re(t, void 0, void 0, function () {
	                var t, n;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      return t = [], 0 < (null == (n = r.threadInfo) ? void 0 : n.replyCount) ? [4, this.getAllChildMessages(r)] : [3, 2];

	                    case 1:
	                      t = e.sent(), e.label = 2;

	                    case 2:
	                      return 0 < t.length ? (t.forEach(function (e) {
	                        return e.applyParentMessage(r);
	                      }), [4, this.upsert(t)]) : [3, 4];

	                    case 3:
	                      e.sent(), e.label = 4;

	                    case 4:
	                      return [2];
	                  }
	                });
	              });
	            }))] : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, SC.prototype.remove = function (a) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (!this.localCacheEnabled) return [3, 8];
	            e.label = 1;

	          case 1:
	            e.trys.push([1, 6, 7, 8]), t = se(a), n = t.next(), e.label = 2;

	          case 2:
	            return n.done ? [3, 5] : (r = n.value, [4, this.collection.remove(r)]);

	          case 3:
	            e.sent(), e.label = 4;

	          case 4:
	            return n = t.next(), [3, 2];

	          case 5:
	            return [3, 8];

	          case 6:
	            return r = e.sent(), i = {
	              error: r
	            }, [3, 8];

	          case 7:
	            try {
	              n && !n.done && (s = t.return) && s.call(t);
	            } finally {
	              if (i) throw i.error;
	            }

	            return [7];

	          case 8:
	            return [2];
	        }
	      });
	    });
	  }, SC.prototype.removeMessagesOfChannel = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, this.collection.removeIf({
	              where: {
	                channelUrl: t
	              }
	            })] : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, SC.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, SC.prototype.saveBlobs = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, Promise.all(n.map(function (i) {
	              return re(t, void 0, void 0, function () {
	                var t, n, r;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      return i instanceof T0 ? i.messageParams && (t = i.messageParams).file && iI(t.file) ? [4, this.collection.saveBlob(t.file, i.reqId)] : [3, 2] : [3, 4];

	                    case 1:
	                      r = e.sent(), t.fileKey = r, t.fileType = nI.BLOB, e.label = 2;

	                    case 2:
	                      return i.scheduledInfo && i.scheduledInfo.scheduledMessageParams && (n = i.scheduledInfo.scheduledMessageParams).file && iI(n.file) ? [4, this.collection.saveBlob(n.file, i.reqId)] : [3, 4];

	                    case 3:
	                      r = e.sent(), n.fileKey = r, n.fileType = nI.BLOB, e.label = 4;

	                    case 4:
	                      return [2];
	                  }
	                });
	              });
	            }))];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, SC),
	      yC = {},
	      mC = (o(TC, fC = jn), TC.of = function (e) {
	    return yC[e];
	  }, Object.defineProperty(TC.prototype, "collection", {
	    get: function () {
	      var e = this._cacheContext.nestdb;
	      return e ? e.collection("Message") : null;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(TC.prototype, "localCacheEnabled", {
	    get: function () {
	      return this._cacheContext.localCacheEnabled && !!this.collection;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), TC.prototype._serialize = function (e) {
	    return f(f({}, e.serialize()), {
	      messageId: "".concat(e.messageId)
	    });
	  }, TC.prototype._deserialize = function (e) {
	    return e = f(f({}, e), {
	      messageId: parseInt(e.messageId)
	    }), Ib.of(this._iid).buildMessageFromSerializedData(e);
	  }, TC.prototype.get = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, this.collection.getByKey("".concat(n))] : [3, 2];

	          case 1:
	            if (t = e.sent()) return [2, this._deserialize(t)];
	            e.label = 2;

	          case 2:
	            return [2, null];
	        }
	      });
	    });
	  }, TC.prototype.fetch = function (e) {
	    var r = e.channelUrl,
	        i = e.token,
	        t = e.limit,
	        s = void 0 === t ? 100 : t,
	        t = e.filter,
	        a = void 0 === t ? new uC() : t,
	        t = e.order,
	        o = void 0 === t ? oC.CHANNEL_LATEST : t,
	        t = e.backward,
	        u = void 0 !== t && t,
	        t = e.parentMessageId,
	        c = void 0 === t ? null : t;
	    return re(this, void 0, void 0, function () {
	      var t,
	          n = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? (t = lC(o), t = {
	              where: {
	                channelUrl: r,
	                "/where": function (e) {
	                  if (i) switch (o) {
	                    case oC.CHANNEL_LATEST:
	                      if (!u && e.createdAt > i || u && e.createdAt < i) return !1;
	                      break;

	                    case oC.NEWEST_CHILD_MESSAGE:
	                      if (!c || 0 === e.parentMessageId || e.parentMessageId !== c) return !1;
	                  }
	                  return a.match(n._deserialize(e));
	                }
	              },
	              index: t,
	              backward: u
	            }, [4, this.collection.query(t)]) : [3, 3];

	          case 1:
	            return [4, e.sent().fetch({
	              limit: s
	            })];

	          case 2:
	            return t = e.sent(), [2, Promise.all(t.map(function (i) {
	              return re(n, void 0, void 0, function () {
	                var t, n, r;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      return t = this._deserialize(i), (n = i.messageParams) ? t instanceof b0 ? (t.messageParams = n, [3, 4]) : [3, 1] : [3, 4];

	                    case 1:
	                      return t instanceof T0 ? n.fileKey && "string" == typeof n.fileKey && sI(n.fileType) ? (r = n, [4, this.collection.getBlob(n.fileKey)]) : [3, 3] : [3, 4];

	                    case 2:
	                      r.file = e.sent(), e.label = 3;

	                    case 3:
	                      t.messageParams = n, e.label = 4;

	                    case 4:
	                      return [2, t];
	                  }
	                });
	              });
	            }))];

	          case 3:
	            return [2, []];
	        }
	      });
	    });
	  }, TC.prototype.getAllChildMessages = function (t, n) {
	    return void 0 === n && (n = new uC()), re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this.fetch({
	              channelUrl: t.channelUrl,
	              token: Date.now(),
	              limit: null,
	              backward: !1,
	              filter: n,
	              order: oC.NEWEST_CHILD_MESSAGE,
	              parentMessageId: t.messageId
	            })];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, TC.prototype.upsert = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, this.saveBlobs(r)] : [3, 5];

	          case 1:
	            return e.sent(), t = r.map(function (e) {
	              return n._serialize(e);
	            }), [4, this.collection.upsertMany(t)];

	          case 2:
	            return e.sent(), [4, this.upsertChildMessages(r)];

	          case 3:
	            return e.sent(), [4, this._unsentMessageCache.upsertChildMessages(r)];

	          case 4:
	            e.sent(), e.label = 5;

	          case 5:
	            return [2];
	        }
	      });
	    });
	  }, TC.prototype.upsertChildMessages = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, Promise.all(n.map(function (r) {
	              return re(t, void 0, void 0, function () {
	                var t, n;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      return t = [], 0 < (null == (n = r.threadInfo) ? void 0 : n.replyCount) ? [4, this.getAllChildMessages(r)] : [3, 2];

	                    case 1:
	                      t = e.sent(), e.label = 2;

	                    case 2:
	                      return 0 < t.length ? (t.forEach(function (e) {
	                        return e.applyParentMessage(r);
	                      }), [4, this.upsert(t)]) : [3, 4];

	                    case 3:
	                      e.sent(), e.label = 4;

	                    case 4:
	                      return [2];
	                  }
	                });
	              });
	            }))] : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, TC.prototype.remove = function (a) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (!this.localCacheEnabled) return [3, 8];
	            e.label = 1;

	          case 1:
	            e.trys.push([1, 6, 7, 8]), t = se(a), n = t.next(), e.label = 2;

	          case 2:
	            return n.done ? [3, 5] : (r = n.value, [4, this.collection.remove("".concat(r))]);

	          case 3:
	            e.sent(), e.label = 4;

	          case 4:
	            return n = t.next(), [3, 2];

	          case 5:
	            return [3, 8];

	          case 6:
	            return r = e.sent(), i = {
	              error: r
	            }, [3, 8];

	          case 7:
	            try {
	              n && !n.done && (s = t.return) && s.call(t);
	            } finally {
	              if (i) throw i.error;
	            }

	            return [7];

	          case 8:
	            return [2];
	        }
	      });
	    });
	  }, TC.prototype.removeMessagesOfChannel = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, this.collection.removeIf({
	              where: {
	                channelUrl: n
	              },
	              index: lC(oC.CHANNEL_LATEST)
	            })] : [3, 6];

	          case 1:
	            return e.sent(), [4, (t = this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(n, "/message/sync"))];

	          case 2:
	            return e.sent(), [4, t.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(n, "/message/sync.meta"))];

	          case 3:
	            return e.sent(), [4, t.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(n, "/message/changelogs"))];

	          case 4:
	            return e.sent(), [4, t.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(n, "/message/changelogs.meta"))];

	          case 5:
	            e.sent(), e.label = 6;

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, TC.prototype.removeUnderOffset = function (t, n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, this.collection.removeIf({
	              where: {
	                channelUrl: t,
	                createdAt: {
	                  "<": n
	                }
	              },
	              index: lC(oC.CHANNEL_LATEST)
	            })] : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, TC.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, TC.prototype.countBetween = function (r, i, s) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.localCacheEnabled ? (t = lC(oC.CHANNEL_LATEST), [4, this.collection.query({
	              where: {
	                channelUrl: r,
	                "/where": function (e) {
	                  e = n._deserialize(e);
	                  return s.includes(e.createdAt) && i.match(e);
	                }
	              },
	              index: t
	            }).count()]) : [3, 2];

	          case 1:
	            return [2, e.sent()];

	          case 2:
	            return [2, 0];
	        }
	      });
	    });
	  }, TC.prototype.saveBlobs = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, Promise.all(n.map(function (r) {
	              return re(t, void 0, void 0, function () {
	                var t, n;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      return r instanceof T0 && r.messageParams && (t = r.messageParams).file && iI(t.file) ? [4, this.collection.saveBlob(t.file, r.reqId)] : [3, 2];

	                    case 1:
	                      n = e.sent(), t.fileKey = n, e.label = 2;

	                    case 2:
	                      return [2];
	                  }
	                });
	              });
	            }))];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, TC),
	      gC = (o(wC, dC = ay), wC),
	      EC = {},
	      bC = (IC.of = function (e) {
	    return EC[e];
	  }, IC.prototype.processNonAutoResendRegisteredPendingMessages = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._fetchAllCachedPendingMessages()];

	          case 1:
	            t = e.sent();

	            try {
	              for (n = se(t), r = n.next(); !r.done; r = n.next()) 0 === (i = r.value).errorCode && (this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ", i.reqId), i.sendingStatus = Sm.FAILED, i.errorCode = d.ACK_TIMEOUT, this._dispatcher.dispatch(new J0({
	                messages: [i],
	                source: G0.LOCAL_MESSAGE_FAILED
	              })));
	            } catch (e) {
	              s = {
	                error: e
	              };
	            } finally {
	              try {
	                r && !r.done && (a = n.return) && a.call(n);
	              } finally {
	                if (s) throw s.error;
	              }
	            }

	            return [2];
	        }
	      });
	    });
	  }, IC.prototype.processAutoResendRegisteredPendingMessages = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o, u;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._fetchAllCachedPendingMessages()];

	          case 1:
	            t = e.sent();

	            try {
	              for (n = se(t), r = n.next(); !r.done; r = n.next()) (i = r.value).errorCode && ny(i.errorCode) && (s = new Date().getTime(), a = i.createdAt + 2592e5, s <= a ? this._autoResendQueue.map(function (e) {
	                return e.reqId;
	              }).indexOf(i.reqId) < 0 && this._autoResendQueue.push(i) : (this._logger.debug("auto-resend registered pending messaged expired. expiration date: ", new Date(a).toLocaleString()), i.sendingStatus = Sm.FAILED, this._dispatcher.dispatch(new J0({
	                messages: [i],
	                source: G0.LOCAL_MESSAGE_FAILED
	              }))));
	            } catch (e) {
	              o = {
	                error: e
	              };
	            } finally {
	              try {
	                r && !r.done && (u = n.return) && u.call(n);
	              } finally {
	                if (o) throw o.error;
	              }
	            }

	            return [2];
	        }
	      });
	    });
	  }, IC.prototype.completeCurrentAndProcessNextAutoResend = function (e) {
	    this._localCacheEnabled && (e.sendingStatus === Sm.SUCCEEDED || e.sendingStatus === Sm.FAILED && !ny(e.errorCode)) && (0 <= (e = this.indexOf(e)) && this._autoResendQueue.splice(e, 1), 0 === e && this._processNextAutoResend());
	  }, IC.prototype._fetchAllCachedPendingMessages = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return (t = _C.of(this._iid)) ? [4, t.fetch({
	              sendingStatus: Sm.PENDING,
	              backward: !0
	            })] : [3, 2];

	          case 1:
	            return n = e.sent(), [3, 3];

	          case 2:
	            n = [], e.label = 3;

	          case 3:
	            return [2, n];
	        }
	      });
	    });
	  }, IC.prototype.indexOf = function (e) {
	    return 0 < this._autoResendQueue.length ? this._autoResendQueue.map(function (e) {
	      return e.reqId;
	    }).indexOf(e.reqId) : -1;
	  }, IC.prototype._isNotInQueue = function (e) {
	    return -1 === this._autoResendQueue.map(function (e) {
	      return e.reqId;
	    }).indexOf(e.reqId);
	  }, IC.prototype._processNextAutoResend = function () {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        if (this._localCacheEnabled && "foreground" === this._sdkState.appState) try {
	          0 < this._autoResendQueue.length ? (this._isProcessingAutoResend || (this._logger.debug("auto-resend queue started."), this._isProcessingAutoResend = !0), t = this._autoResendQueue[0], this._dispatcher.dispatch(new gC({
	            message: t
	          })), this._logger.debug("processing auto-resend for message request id: ", t.reqId)) : (this._logger.debug("auto-resend queue finished."), this._isProcessingAutoResend = !1);
	        } catch (e) {
	          this._logger.warn("process auto-resend error: ", e), this._isProcessingAutoResend = !1;
	        }
	        return [2];
	      });
	    });
	  }, IC);

	  function IC(e, t) {
	    var n = t.localCacheEnabled,
	        r = t.dispatcher,
	        i = t.sdkState,
	        t = t.logger,
	        s = this;
	    (EC[e] = this)._iid = e, (EC[e] = this)._localCacheEnabled = n, this._isProcessingAutoResend = !1, this._autoResendQueue = [], this._dispatcher = r, this._logger = t, this._sdkState = i, this._localCacheEnabled && r.on(function (e) {
	      if (e instanceof jm) switch (e.stateType) {
	        case im.CONNECTED:
	          s._isProcessingAutoResend || s.processAutoResendRegisteredPendingMessages().then(function () {
	            return s._processNextAutoResend();
	          });
	          break;

	        case im.DISCONNECTED:
	          s._isProcessingAutoResend = !1;
	      }
	    });
	  }

	  function wC(e) {
	    var e = e.message,
	        t = dC.call(this) || this;
	    return t.message = e, t;
	  }

	  function TC(e, t) {
	    var n = t.sdkState,
	        r = t.cacheContext,
	        t = t.unsentMessageCache,
	        i = fC.call(this, e) || this;
	    return i._sdkState = n, i._cacheContext = r, i._unsentMessageCache = t, yC[e] = i;
	  }

	  function SC(e, t) {
	    var n = t.sdkState,
	        t = t.cacheContext,
	        r = pC.call(this, e) || this;
	    return r._sdkState = n, r._cacheContext = t, vC[e] = r;
	  }

	  (Fn = hC = hC || {})[Fn.USER_BLOCK = 20001] = "USER_BLOCK", Fn[Fn.USER_UNBLOCK = 2e4] = "USER_UNBLOCK", Fn[Fn.FRIEND_DISCOVERED = 20900] = "FRIEND_DISCOVERED";
	  KC.getDataAsUserBlockEvent = function (e, t) {
	    var t = t.data,
	        n = t.blocker,
	        t = t.blockee;
	    return {
	      blocker: new k(e, n),
	      blockee: new k(e, t)
	    };
	  }, KC.getDataAsFriendDiscoveredEvent = function (t, e) {
	    e = e.data.friend_discoveries;
	    return {
	      friendDiscoveries: Array.isArray(e) ? e.map(function (e) {
	        return new k(t, e);
	      }) : []
	    };
	  };
	  var CC,
	      kC,
	      NC,
	      AC,
	      OC,
	      RC,
	      DC = KC,
	      MC = (o(BC, RC = ay), BC),
	      xC = (o(VC, OC = zy), VC),
	      LC = (o(GC, AC = h), GC),
	      PC = (o(HC, NC = S), HC),
	      UC = (o(jC, kC = h), jC),
	      qC = (o(FC, CC = S), FC);

	  function FC(e, t) {
	    e = CC.call(this, e, t) || this;
	    return e.pushTriggerOption = t.push_trigger_option, e;
	  }

	  function jC(e) {
	    var t = e.userId,
	        e = e.pushTriggerOption,
	        n = kC.call(this) || this;
	    return n.method = T.PUT, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/push_preference"), n.params = {
	      push_trigger_option: e
	    }, n;
	  }

	  function HC(e, t) {
	    e = NC.call(this, e, t) || this;
	    return e.pushTriggerOption = t.push_trigger_option, e;
	  }

	  function GC(e) {
	    var e = e.userId,
	        t = AC.call(this) || this;
	    return t.method = T.GET, t.path = "".concat(ng, "/").concat(encodeURIComponent(e), "/push_preference"), t;
	  }

	  function VC(e, t, n) {
	    e = OC.call(this, e, "USEV", n) || this;
	    return e.event = new DC(n), e;
	  }

	  function BC(e, t) {
	    var t = t.userId,
	        n = RC.call(this) || this;
	    return n._iid = e, n.userId = t, n;
	  }

	  function KC(e) {
	    this.category = e.cat, this.data = e.data;
	  }

	  var QC,
	      zC,
	      WC,
	      YC,
	      XC,
	      JC,
	      ZC = {
	    profileImage: null,
	    profileUrl: null,
	    nickname: null
	  },
	      $C = (o(function () {
	    return null !== QC && QC.apply(this, arguments) || this;
	  }, QC = jn), o(uk, XC = my), Object.defineProperty(uk.prototype, "isAvailable", {
	    get: function () {
	      return "undefined" != typeof window && !!window.addEventListener && !!window.removeEventListener;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), uk.prototype._toggleState = function () {
	    var e = this;
	    "hidden" !== document.visibilityState ? "hidden" === this._currentState && (this._pauseDelayTimer && (clearTimeout(this._pauseDelayTimer), this._pauseDelayTimer = null), this.dispatch("resume")) : "hidden" !== this._currentState && (this._pauseDelayTimer = setTimeout(function () {
	      e._pauseDelayTimer = null, e.dispatch("pause");
	    }, 3e4)), this._currentState = document.visibilityState;
	  }, uk.prototype.start = function () {
	    this.isAvailable && window.addEventListener("visibilitychange", this._toggleState, {
	      capture: !0
	    });
	  }, uk.prototype.stop = function () {
	    this.isAvailable && window.removeEventListener("visibilitychange", this._toggleState, {
	      capture: !0
	    });
	  }, uk),
	      ek = (Object.defineProperty(ok.prototype, "isAvailable", {
	    get: function () {
	      return "undefined" != typeof window && window.addEventListener && "ononline" in window && "onoffline" in window && "undefined" != typeof navigator && void 0 !== navigator.onLine;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), ok.prototype._onlineWorker = function () {
	    this.connectionDelegate.reconnect();
	  }, ok.prototype._offlineWorker = function () {
	    this.connectionDelegate.disconnect();
	  }, ok.prototype.start = function () {
	    this.isAvailable && (window.addEventListener("online", this._onlineWorker), window.addEventListener("offline", this._offlineWorker));
	  }, ok.prototype.stop = function () {
	    this.isAvailable && (window.removeEventListener("online", this._onlineWorker, !1), window.removeEventListener("offline", this._offlineWorker, !1));
	  }, ok.prototype.isOnline = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return this.isAvailable ? [2, navigator.onLine] : [2, new Promise(function (e, t) {
	          fetch("https://www.google.com", {
	            method: T.GET
	          }).then(function () {
	            return e(!0);
	          }).catch(function () {
	            return e(!1);
	          });
	        })];
	      });
	    });
	  }, ok),
	      tk = (o(ak, YC = h), ak),
	      nk = (o(sk, WC = S), sk),
	      rk = (o(ik, zC = h), ik);

	  function ik(e) {
	    var t = e.userId,
	        e = e.token,
	        n = zC.call(this) || this;
	    return n.method = T.POST, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/push/apns"), n.params = {
	      apns_device_token: e,
	      always_push: !0
	    }, n;
	  }

	  function sk(e, t) {
	    var n = WC.call(this, e, t) || this;
	    return n.user = null, n.user = new k(e, f({}, t)), n;
	  }

	  function ak(e) {
	    var t = e.userId,
	        n = e.nickname,
	        n = void 0 === n ? null : n,
	        r = e.profileUrl,
	        r = void 0 === r ? null : r,
	        i = e.profileImage,
	        i = void 0 === i ? null : i,
	        e = e.preferredLanguages,
	        e = void 0 === e ? null : e,
	        s = YC.call(this) || this;
	    return s.method = T.PUT, s.path = "".concat(ng, "/").concat(encodeURIComponent(t)), s.params = w({
	      nickname: n,
	      profile_url: r,
	      profile_file: i,
	      preferred_languages: e
	    }), s;
	  }

	  function ok(e) {
	    var t = e.logger,
	        e = e.connectionDelegate,
	        e = void 0 === e ? null : e;
	    this.logger = t, e && (this.connectionDelegate = e), this._onlineWorker = this._onlineWorker.bind(this), this._offlineWorker = this._offlineWorker.bind(this);
	  }

	  function uk() {
	    var e = XC.call(this) || this;
	    return e._pauseDelayTimer = null, e._currentState = "visible", e._toggleState = e._toggleState.bind(e), e;
	  }

	  o(function (e, t) {
	    var n = JC.call(this, e, t) || this;
	    return n.token = t.token, n.type = t.type ? xS[t.type.toLowerCase()] : xS.UNKNOWN, n.user = new k(e, t.user), n;
	  }, JC = S);
	  o(dk, ck = h);
	  var ck,
	      lk,
	      hk = dk;

	  function dk(e) {
	    var t = e.userId,
	        e = e.token,
	        n = ck.call(this) || this;
	    return n.method = T.POST, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/push/gcm"), n.params = {
	      gcm_reg_token: e,
	      always_push: !0
	    }, n;
	  }

	  o(function (e, t) {
	    var n = lk.call(this, e, t) || this;
	    return n.token = t.token, n.type = t.type ? xS[t.type.toLowerCase()] : xS.UNKNOWN, n.user = new k(e, t.user), n;
	  }, lk = S);
	  o(_k, fk = h);
	  var fk,
	      pk,
	      vk = _k;

	  function _k(e) {
	    var t = e.userId,
	        e = e.token,
	        n = fk.call(this) || this;
	    return n.method = T.DELETE, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/push/apns/").concat(encodeURIComponent(e)), n;
	  }

	  o(function (e, t) {
	    var n = pk.call(this, e, t) || this;
	    return n.token = t.token, n.user = new k(e, t.user), n;
	  }, pk = S);
	  o(Ek, yk = h);
	  var yk,
	      mk,
	      gk = Ek;

	  function Ek(e) {
	    var t = e.userId,
	        e = e.token,
	        n = yk.call(this) || this;
	    return n.method = T.DELETE, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/push/gcm/").concat(encodeURIComponent(e)), n;
	  }

	  o(function (e, t) {
	    var n = mk.call(this, e, t) || this;
	    return n.token = t.token, n.user = new k(e, t.user), n;
	  }, mk = S);
	  o(Tk, bk = h);
	  var bk,
	      Ik,
	      wk = Tk;

	  function Tk(e) {
	    var e = e.userId,
	        t = bk.call(this) || this;
	    return t.method = T.DELETE, t.path = "".concat(ng, "/").concat(encodeURIComponent(e), "/push/apns"), t;
	  }

	  o(function (e, t) {
	    var n = Ik.call(this, e, t) || this;
	    return n.type = t.type ? xS[t.type.toLowerCase()] : xS.UNKNOWN, n.user = new k(e, t.user), n;
	  }, Ik = S);
	  o(Nk, Sk = h);
	  var Sk,
	      Ck,
	      kk = Nk;

	  function Nk(e) {
	    var e = e.userId,
	        t = Sk.call(this) || this;
	    return t.method = T.DELETE, t.path = "".concat(ng, "/").concat(encodeURIComponent(e), "/push/gcm"), t;
	  }

	  o(function (e, t) {
	    var n = Ck.call(this, e, t) || this;
	    return n.type = t.type ? xS[t.type.toLowerCase()] : xS.UNKNOWN, n.user = new k(e, t.user), n;
	  }, Ck = S);
	  o(EN, Vk = h);
	  var Ak,
	      Ok,
	      Rk,
	      Dk,
	      Mk,
	      xk,
	      Lk,
	      Pk,
	      Uk,
	      qk,
	      Fk,
	      jk,
	      Hk,
	      Gk,
	      Vk,
	      Bk,
	      Kk = EN,
	      Qk = (o(gN, Gk = S), gN),
	      zk = (o(mN, Hk = h), mN),
	      Wk = (o(yN, jk = S), yN),
	      Yk = (o(_N, Fk = h), _N),
	      Xk = (o(vN, qk = S), vN),
	      Jk = (o(pN, Uk = h), pN),
	      Zk = (o(fN, Pk = S), fN),
	      $k = (o(dN, Lk = h), dN),
	      eN = (o(hN, xk = S), hN),
	      tN = (o(lN, Mk = h), lN),
	      nN = (o(cN, Dk = S), cN),
	      rN = (o(uN, Rk = h), uN),
	      iN = (o(oN, Ok = S), oN),
	      sN = (o(aN, Ak = h), aN);

	  function aN(e) {
	    var t = e.userId,
	        e = e.blockedUserId,
	        n = Ak.call(this) || this;
	    return n.method = T.POST, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/block"), n.params = {
	      target_id: e
	    }, n;
	  }

	  function oN(e, t) {
	    e = Ok.call(this, e, t) || this;
	    return e.snoozePeriod = {
	      isSnoozeOn: t.snooze_enabled
	    }, "number" == typeof t.snooze_start_ts && (e.snoozePeriod.startTs = t.snooze_start_ts), "number" == typeof t.snooze_end_ts && (e.snoozePeriod.endTs = t.snooze_end_ts), e;
	  }

	  function uN(e) {
	    var t = e.userId,
	        n = e.snoozeOn,
	        r = e.startTs,
	        e = e.endTs,
	        i = Rk.call(this) || this;
	    return i.method = T.PUT, i.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/push_preference"), i.params = {
	      snooze_enabled: n,
	      snooze_start_ts: r,
	      snooze_end_ts: e
	    }, i;
	  }

	  function cN(e, t) {
	    e = Dk.call(this, e, t) || this;
	    return e.snoozePeriod = {
	      isSnoozeOn: t.snooze_enabled
	    }, "number" == typeof t.snooze_start_ts && (e.snoozePeriod.startTs = t.snooze_start_ts), "number" == typeof t.snooze_end_ts && (e.snoozePeriod.endTs = t.snooze_end_ts), e;
	  }

	  function lN(e) {
	    var e = e.userId,
	        t = Mk.call(this) || this;
	    return t.method = T.GET, t.path = "".concat(ng, "/").concat(encodeURIComponent(e), "/push_preference"), t;
	  }

	  function hN(e, t) {
	    e = xk.call(this, e, t) || this;
	    return e.preference = {
	      doNotDisturbOn: t.do_not_disturb,
	      startHour: t.start_hour,
	      startMin: t.start_min,
	      endHour: t.end_hour,
	      endMin: t.end_min,
	      timezone: t.timezone
	    }, e;
	  }

	  function dN(e) {
	    var t = e.userId,
	        n = e.doNotDisturbOn,
	        r = e.startHour,
	        i = e.startMin,
	        s = e.endHour,
	        a = e.endMin,
	        e = e.timezone,
	        o = Lk.call(this) || this;
	    return o.method = T.PUT, o.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/push_preference"), o.params = {
	      do_not_disturb: n,
	      start_hour: r,
	      start_min: i,
	      end_hour: s,
	      end_min: a,
	      timezone: e
	    }, o;
	  }

	  function fN(e, t) {
	    e = Pk.call(this, e, t) || this;
	    return e.preference = {
	      doNotDisturbOn: t.do_not_disturb,
	      startHour: t.start_hour,
	      startMin: t.start_min,
	      endHour: t.end_hour,
	      endMin: t.end_min,
	      timezone: t.timezone
	    }, e;
	  }

	  function pN(e) {
	    var e = e.userId,
	        t = Uk.call(this) || this;
	    return t.method = T.GET, t.path = "".concat(ng, "/").concat(encodeURIComponent(e), "/push_preference"), t;
	  }

	  function vN(e, t) {
	    e = qk.call(this, e, t) || this;
	    return e.autoAccept = t.auto_accept, e;
	  }

	  function _N(e) {
	    var t = e.userId,
	        e = e.willAutoAccept,
	        n = Fk.call(this) || this;
	    return n.method = T.PUT, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/channel_invitation_preference"), n.params = {
	      auto_accept: e
	    }, n;
	  }

	  function yN(e, t) {
	    e = jk.call(this, e, t) || this;
	    return e.autoAccept = t.auto_accept, e;
	  }

	  function mN(e) {
	    var e = e.userId,
	        t = Hk.call(this) || this;
	    return t.method = T.GET, t.path = "".concat(ng, "/").concat(encodeURIComponent(e), "/channel_invitation_preference"), t;
	  }

	  function gN(e, t) {
	    e = Gk.call(this, e, t) || this;
	    return e.pushTokens = {
	      type: t.type ? xS[t.type.toLowerCase()] : xS.UNKNOWN,
	      deviceTokens: t.device_tokens,
	      hasMore: t.has_more,
	      token: t.token
	    }, e;
	  }

	  function EN(e) {
	    var t = e.userId,
	        n = e.type,
	        r = e.token,
	        e = e.ts,
	        i = Vk.call(this) || this;
	    return i.method = T.GET, i.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/push/").concat(encodeURIComponent(n), "/device_tokens"), i.params = {
	      created_ts: e,
	      token: r
	    }, i;
	  }

	  o(function (e, t) {
	    var n = Bk.call(this, e, t) || this;
	    return n.user = new k(e, t), n;
	  }, Bk = S);
	  o(TN, bN = h);
	  var bN,
	      IN,
	      wN = TN;

	  function TN(e) {
	    var t = e.userId,
	        e = e.unblockedUserId,
	        n = bN.call(this) || this;
	    return n.method = T.DELETE, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/block/").concat(encodeURIComponent(e)), n;
	  }

	  o(function () {
	    return null !== IN && IN.apply(this, arguments) || this;
	  }, IN = S);
	  o(ZN, MN = h);
	  var SN,
	      CN,
	      kN,
	      NN,
	      AN,
	      ON,
	      RN,
	      DN,
	      MN,
	      xN,
	      LN = ZN,
	      PN = (o(JN, DN = S), JN),
	      UN = (o(XN, RN = h), XN),
	      qN = (o(YN, ON = S), YN),
	      FN = (o(WN, AN = h), WN),
	      jN = (o(zN, NN = S), zN),
	      HN = (o(QN, kN = h), QN),
	      GN = (o(KN, CN = S), KN),
	      VN = (o(BN, SN = h), BN);

	  function BN(e) {
	    var t = e.userId,
	        e = e.discoveryKeys,
	        n = SN.call(this) || this;
	    return n.method = T.DELETE, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/friend_discoveries"), n.params = {
	      friend_discovery_keys: e
	    }, n;
	  }

	  function KN(e, t) {
	    e = CN.call(this, e, t) || this;
	    return e.friendDiscoveryRequestId = t.friend_discovery_request_id, e;
	  }

	  function QN(e) {
	    var t = e.userId,
	        e = e.discoveries,
	        n = kN.call(this) || this;
	    return n.method = T.PUT, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/friend_discoveries"), n.params = {
	      friend_discoveries: e.map(function (e) {
	        return {
	          friend_discovery_key: e.friendDiscoveryKey,
	          friend_name: e.friendName
	        };
	      })
	    }, n;
	  }

	  function zN(t, e) {
	    var n = NN.call(this, t, e) || this;
	    return n.changelogs = {
	      addedUsers: e.added.map(function (e) {
	        return new k(t, e);
	      }),
	      updatedUsers: e.updated.map(function (e) {
	        return new k(t, e);
	      }),
	      deletedUserIds: e.deleted,
	      hasMore: e.has_more,
	      token: e.next
	    }, n;
	  }

	  function WN(e) {
	    var t = e.userId,
	        e = e.token,
	        n = AN.call(this) || this;
	    return n.method = T.GET, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/friends/changelogs"), n.params = {
	      token: e
	    }, n;
	  }

	  function YN(e, t) {
	    e = ON.call(this, e, t) || this;
	    return e.name = t.name, e;
	  }

	  function XN(e) {
	    var t = e.userId,
	        e = e.templateName,
	        n = RN.call(this) || this;
	    return n.method = T.PUT, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/push/template"), n.params = {
	      name: e
	    }, n;
	  }

	  function JN(e, t) {
	    e = DN.call(this, e, t) || this;
	    return e.name = t.name, e;
	  }

	  function ZN(e) {
	    var e = e.userId,
	        t = MN.call(this) || this;
	    return t.method = T.GET, t.path = "".concat(ng, "/").concat(encodeURIComponent(e), "/push/template"), t;
	  }

	  o(function () {
	    return null !== xN && xN.apply(this, arguments) || this;
	  }, xN = S);
	  o(u1, t1 = h);
	  var $N,
	      e1,
	      t1,
	      n1,
	      r1 = u1,
	      i1 = (o(o1, e1 = S), o1),
	      s1 = (o(a1, $N = h), a1);

	  function a1(e) {
	    var t = e.userId,
	        e = e.userIds,
	        n = $N.call(this) || this;
	    return n.method = T.DELETE, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/friends"), n.params = {
	      user_ids: e
	    }, n;
	  }

	  function o1(t, e) {
	    var n = e1.call(this, t, e) || this;
	    return n.users = e.users.map(function (e) {
	      return new k(t, e);
	    }), n;
	  }

	  function u1(e) {
	    var t = e.userId,
	        e = e.userIds,
	        n = t1.call(this) || this;
	    return n.method = T.POST, n.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/friends"), n.params = {
	      user_ids: e
	    }, n;
	  }

	  o(function () {
	    return null !== n1 && n1.apply(this, arguments) || this;
	  }, n1 = S);
	  o(m1, h1 = h);
	  var c1,
	      l1,
	      h1,
	      d1,
	      f1 = m1,
	      p1 = (o(y1, l1 = S), y1),
	      v1 = (o(_1, c1 = h), _1);

	  function _1(e) {
	    var t = e.userId,
	        e = e.allowFriendDiscovery,
	        n = c1.call(this) || this;
	    return n.method = T.PUT, n.path = "".concat(ng, "/").concat(t, "/allow_friend_discovery"), n.params = {
	      allow_friend_discovery: e
	    }, n;
	  }

	  function y1(e, t) {
	    e = l1.call(this, e, t) || this;
	    return e.allowFriendDiscovery = t.allow_friend_discovery, e;
	  }

	  function m1(e) {
	    var e = e.userId,
	        t = h1.call(this) || this;
	    return t.method = T.GET, t.path = "".concat(ng, "/").concat(e, "/allow_friend_discovery"), t.params = {}, t;
	  }

	  o(function () {
	    return null !== d1 && d1.apply(this, arguments) || this;
	  }, d1 = S);

	  function g1(e) {
	    this.emojiHash = null, this.emojiCategories = [], this.emojiHash = e.emoji_hash || "", this.emojiCategories = e.emoji_categories ? e.emoji_categories.map(function (e) {
	      return new U1(e);
	    }) : [];
	  }

	  var E1,
	      b1,
	      I1,
	      w1,
	      T1,
	      S1,
	      C1,
	      k1,
	      N1,
	      A1,
	      O1,
	      R1,
	      D1,
	      M1,
	      x1,
	      L1,
	      P1 = function (e) {
	    this.key = null, this.url = null, this.key = e.key, this.url = e.url;
	  },
	      U1 = function (e) {
	    var t;
	    this.id = 0, this.name = null, this.url = null, this.emojis = [], this.id = null != (t = e.id) ? t : 0, this.name = null != (t = e.name) ? t : "", this.url = null != (t = e.url) ? t : "", this.emojis = e.emojis ? e.emojis.map(function (e) {
	      return new P1(e);
	    }) : [];
	  },
	      q1 = (o(_A, L1 = h), _A),
	      F1 = (o(vA, x1 = S), vA),
	      j1 = (o(pA, M1 = h), pA),
	      H1 = (o(fA, D1 = S), fA),
	      G1 = (o(dA, R1 = h), dA),
	      V1 = (o(hA, O1 = S), hA),
	      B1 = (o(lA, A1 = h), lA),
	      K1 = (o(cA, N1 = S), cA),
	      Q1 = (o(uA, k1 = s), uA.prototype._validate = function () {
	    return k1.prototype._validate.call(this) && hy("string", this.userIdsFilter, !0) && c("string", this.metaDataKeyFilter, !0) && hy("string", this.metaDataValuesFilter, !0) && c("string", this.metaDataKeyFilter, !0);
	  }, uA.prototype.next = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, t = N.of(this._iid).requestQueue, n = new B1(f(f({}, this), {
	              token: this._token
	            })), [4, t.send(n)]) : [3, 2] : [3, 5];

	          case 1:
	            return t = e.sent(), n = t.as(K1), r = n.users, i = n.next, this._token = i, this._hasNext = !!i, this._isLoading = !1, [2, r];

	          case 2:
	            return [2, []];

	          case 3:
	            throw p.queryInProgress;

	          case 4:
	            return [3, 6];

	          case 5:
	            throw p.invalidParameters;

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, uA),
	      z1 = (o(oA, C1 = h), oA),
	      W1 = (o(aA, S1 = S), aA),
	      Y1 = (o(sA, T1 = s), sA.prototype._validate = function () {
	    return T1.prototype._validate.call(this) && hy("string", this.userIdsFilter, !0);
	  }, sA.prototype.next = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new z1(f(f({}, this), {
	              userId: n.userId,
	              token: this._token
	            })), [4, t.send(n)]) : [3, 2] : [3, 5];

	          case 1:
	            return t = e.sent(), n = t.as(W1), r = n.users, i = n.next, this._token = i, this._hasNext = !!i, this._isLoading = !1, [2, r];

	          case 2:
	            return [2, []];

	          case 3:
	            throw p.queryInProgress;

	          case 4:
	            return [3, 6];

	          case 5:
	            throw p.invalidParameters;

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, sA),
	      X1 = (o(iA, w1 = h), iA),
	      J1 = (o(rA, I1 = S), rA),
	      Z1 = (o(nA, b1 = s), nA.prototype._validate = function () {
	    return b1.prototype._validate.call(this);
	  }, nA.prototype.next = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new X1(f(f({}, this), {
	              userId: n.userId,
	              token: this._token
	            })), [4, t.send(n)]) : [3, 2] : [3, 5];

	          case 1:
	            return t = e.sent(), n = t.as(J1), r = n.users, i = n.hasMore, s = n.next, this._token = s, this._hasNext = i, this._isLoading = !1, [2, r];

	          case 2:
	            return [2, []];

	          case 3:
	            throw p.queryInProgress;

	          case 4:
	            return [3, 6];

	          case 5:
	            throw p.invalidParameters;

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, nA),
	      $1 = {},
	      eA = (tA.get = function (e) {
	    return $1[e];
	  }, tA);

	  function tA(e) {
	    var t = e.dbname,
	        n = e.itemSizeLimit,
	        r = e.cacheLimit,
	        r = void 0 === r ? 256 : r,
	        i = e.blockHashBase,
	        i = void 0 === i ? 2 : i,
	        s = e.blockHashMultiplier,
	        s = void 0 === s ? 10 : s,
	        a = e.blockHashConstant,
	        a = void 0 === a ? 11 : a,
	        o = e.transactionApplyDelay,
	        o = void 0 === o ? 200 : o,
	        e = e.disableLogger,
	        e = void 0 !== e && e;
	    return $1[t] || (this.itemSizeLimit = void 0 === n ? 1048576 : n, this.cacheLimit = r, this.blockHashBase = i, this.blockHashMultiplier = s, this.blockHashConstant = a, this.transactionApplyDelay = o, this.disableLogger = e, $1[t] = this), $1[t];
	  }

	  function nA() {
	    return null !== b1 && b1.apply(this, arguments) || this;
	  }

	  function rA(t, e) {
	    var n = I1.call(this, t, e) || this;
	    return n.hasMore = e.has_more, n.users = e.users.map(function (e) {
	      return new k(t, e);
	    }), n.next = e.next, n;
	  }

	  function iA(e) {
	    var t = e.userId,
	        n = e.limit,
	        e = e.token,
	        r = w1.call(this) || this;
	    return r.method = T.GET, r.path = "".concat(ng, "/").concat(encodeURIComponent(t), "/friends"), r.params = {
	      limit: n,
	      token: e
	    }, r;
	  }

	  function sA(e, t) {
	    var n = this;
	    return (n = T1.call(this, e, t) || this).userIdsFilter = null, n.userIdsFilter = null != (e = t.userIdsFilter) ? e : null, n;
	  }

	  function aA(t, e) {
	    var n = S1.call(this, t, e) || this;
	    return n.users = e.users.map(function (e) {
	      return new k(t, e);
	    }), n.next = e.next, n;
	  }

	  function oA(e) {
	    var t = e.userId,
	        n = e.limit,
	        r = e.token,
	        e = e.userIdsFilter,
	        i = C1.call(this) || this;
	    return i.method = T.GET, i.path = "".concat(ng, "/").concat(t, "/block"), i.params = w({
	      limit: n,
	      token: r,
	      user_ids: e
	    }), i;
	  }

	  function uA(e, t) {
	    var n = this;
	    return (n = k1.call(this, e, t) || this).userIdsFilter = null, n.metaDataKeyFilter = null, n.metaDataValuesFilter = null, n.nicknameStartsWithFilter = null, n.userIdsFilter = null != (e = t.userIdsFilter) ? e : null, n.metaDataKeyFilter = null != (e = t.metaDataKeyFilter) ? e : null, n.metaDataValuesFilter = null != (e = t.metaDataValuesFilter) ? e : null, n.nicknameStartsWithFilter = t.nicknameStartsWithFilter || null, n;
	  }

	  function cA(t, e) {
	    var n = N1.call(this, t, e) || this;
	    return n.users = e.users.map(function (e) {
	      return new k(t, e);
	    }), n.next = e.next, n;
	  }

	  function lA(e) {
	    var t = e.limit,
	        n = e.token,
	        r = e.userIdsFilter,
	        i = e.metaDataKeyFilter,
	        s = e.metaDataValuesFilter,
	        e = e.nicknameStartsWithFilter,
	        a = A1.call(this) || this;
	    return a.method = T.GET, a.path = ng, a.params = w({
	      limit: t,
	      token: n,
	      user_ids: r,
	      metadatakey: i,
	      metadatavalues_in: s,
	      nickname_startswith: e
	    }), a;
	  }

	  function hA(e, t) {
	    e = O1.call(this, e, t) || this;
	    return e.emoji = new P1(t), e;
	  }

	  function dA(e) {
	    var e = e.key,
	        t = R1.call(this) || this;
	    return t.method = T.GET, t.path = "".concat(cg, "/").concat(e), t;
	  }

	  function fA(e, t) {
	    e = D1.call(this, e, t) || this;
	    return e.emojiCategory = new U1(t), e;
	  }

	  function pA(e) {
	    var e = e.categoryId,
	        t = M1.call(this) || this;
	    return t.method = T.GET, t.path = "".concat(lg, "/").concat(e), t;
	  }

	  function vA(e, t) {
	    e = x1.call(this, e, t) || this;
	    return e.emojiContainer = new g1(t), e;
	  }

	  function _A() {
	    var e = L1.call(this) || this;
	    return e.method = T.GET, e.path = lg, e;
	  }

	  (e = E1 = E1 || {})[e.UNKNOWN_ERROR = 6e7] = "UNKNOWN_ERROR", e[e.STORE_NOT_DEFINED = 61001e3] = "STORE_NOT_DEFINED", e[e.STORE_NOT_AVAILABLE = 61001001] = "STORE_NOT_AVAILABLE", e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING = 61001002] = "STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING", e[e.STORE_IS_FULL = 61001003] = "STORE_IS_FULL", e[e.STORE_INVALID_KEY_TYPE = 61002e3] = "STORE_INVALID_KEY_TYPE", e[e.STORE_BROKEN_INTEGRITY = 61002001] = "STORE_BROKEN_INTEGRITY", e[e.STORE_BROKEN_BLOB = 61002002] = "STORE_BROKEN_BLOB", e[e.STORE_ENCRYPTION_INVALID = 61002003] = "STORE_ENCRYPTION_INVALID", e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED = 61017e3] = "STORE_ITEM_SIZE_LIMIT_EXCEEDED", e[e.STORE_READ_FAILED = 61017001] = "STORE_READ_FAILED", e[e.STORE_WRITE_FAILED = 61017002] = "STORE_WRITE_FAILED", e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE = 62002e3] = "DATABASE_SCHEMA_NOT_ON_UPGRADE", e[e.COLLECTION_NOT_READY = 63001e3] = "COLLECTION_NOT_READY", e[e.COLLECTION_KEY_NOT_MATCH = 63002e3] = "COLLECTION_KEY_NOT_MATCH", e[e.COLLECTION_QUERY_NOT_VALID = 63002001] = "COLLECTION_QUERY_NOT_VALID", e[e.COLLECTION_KEY_NOT_FOUND = 63004e3] = "COLLECTION_KEY_NOT_FOUND", e[e.COLLECTION_KEY_NOT_GIVEN = 63004001] = "COLLECTION_KEY_NOT_GIVEN", e[e.COLLECTION_INSERT_DUPLICATE = 63009e3] = "COLLECTION_INSERT_DUPLICATE", e[e.COLLECTION_WRITE_FAILED = 63017e3] = "COLLECTION_WRITE_FAILED", e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED = 63017001] = "COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED", e[e.INDEX_TABLE_IS_REQUIRED = 65001e3] = "INDEX_TABLE_IS_REQUIRED", e[e.INDEX_TYPE_NOT_MATCH = 65002e3] = "INDEX_TYPE_NOT_MATCH", e[e.COMPARE_TYPE_NOT_MATCH = 69002001] = "COMPARE_TYPE_NOT_MATCH", e[e.CIRCULAR_REFERENCE_FOUND = 69002002] = "CIRCULAR_REFERENCE_FOUND";
	  o(O, mA = Error), Object.defineProperty(O, "storeNotDefined", {
	    get: function () {
	      return new O({
	        code: E1.STORE_NOT_DEFINED,
	        message: "Store is not defined. Specify the store on NestDB()"
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "storeNotAvailable", {
	    get: function () {
	      return new O({
	        code: E1.STORE_NOT_AVAILABLE,
	        message: "Store is not available. Check your environment settings."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "storeNotAvailableInPrivateBrowsing", {
	    get: function () {
	      return new O({
	        code: E1.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,
	        message: "Store is not available because it is in private browsing."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "storeIsFull", {
	    get: function () {
	      return new O({
	        code: E1.STORE_IS_FULL,
	        message: "Store is full."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "storeKeyTypeIsInvalid", {
	    get: function () {
	      return new O({
	        code: E1.STORE_INVALID_KEY_TYPE,
	        message: "Store key should be string type."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "storeBrokenIntegrity", {
	    get: function () {
	      return new O({
	        code: E1.STORE_BROKEN_INTEGRITY,
	        message: "Data should be in a store but it does not. Integrity is broken."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "storeBrokenBlob", {
	    get: function () {
	      return new O({
	        code: E1.STORE_BROKEN_BLOB,
	        message: "Data should be in a store but it does not. Blob data is broken."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "storeEncryptionInvalid", {
	    get: function () {
	      return new O({
	        code: E1.STORE_ENCRYPTION_INVALID,
	        message: "Encryption algorithm has changed. All the store should reset."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "storeItemSizeExceeded", {
	    get: function () {
	      return new O({
	        code: E1.STORE_ITEM_SIZE_LIMIT_EXCEEDED,
	        message: "The size of the item exceeds the limit that the store allows."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "storeReadFailed", {
	    get: function () {
	      return new O({
	        code: E1.STORE_READ_FAILED,
	        message: "Failed to read from store."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "storeWriteFailed", {
	    get: function () {
	      return new O({
	        code: E1.STORE_WRITE_FAILED,
	        message: "Failed to write to store."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "databaseSchemaNotOnUpgrade", {
	    get: function () {
	      return new O({
	        code: E1.DATABASE_SCHEMA_NOT_ON_UPGRADE,
	        message: "Committing schema is not allowed when upgrade is not running."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "collectionNotReady", {
	    get: function () {
	      return new O({
	        code: E1.COLLECTION_NOT_READY,
	        message: "Collection is not ready due to an error during initialization."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "collectionKeyNotMatch", {
	    get: function () {
	      return new O({
	        code: E1.COLLECTION_KEY_NOT_MATCH,
	        message: "keyName of collection could not change."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "collectionQueryNotValid", {
	    get: function () {
	      return new O({
	        code: E1.COLLECTION_QUERY_NOT_VALID,
	        message: "Query parameter is not a valid format."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "collectionInsertDuplicate", {
	    get: function () {
	      return new O({
	        code: E1.COLLECTION_INSERT_DUPLICATE,
	        message: "The key already exists."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "collectionKeyNotFound", {
	    get: function () {
	      return new O({
	        code: E1.COLLECTION_KEY_NOT_FOUND,
	        message: "The key is not found."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "collectionKeyNotGiven", {
	    get: function () {
	      return new O({
	        code: E1.COLLECTION_KEY_NOT_GIVEN,
	        message: "The item should contain [keyName] property."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "collectionWriteFailed", {
	    get: function () {
	      return new O({
	        code: E1.COLLECTION_WRITE_FAILED,
	        message: "Failed to write an item."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "collectionItemSizeExceeded", {
	    get: function () {
	      return new O({
	        code: E1.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,
	        message: "The size of the item exceeds the limit that a collection allows."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "indexTableIsRequired", {
	    get: function () {
	      return new O({
	        code: E1.INDEX_TABLE_IS_REQUIRED,
	        message: "Index table is required."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "indexTypesNotMatch", {
	    get: function () {
	      return new O({
	        code: E1.INDEX_TYPE_NOT_MATCH,
	        message: "Indexed column should have primitive type."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "compareTypesNotMatch", {
	    get: function () {
	      return new O({
	        code: E1.COMPARE_TYPE_NOT_MATCH,
	        message: "Values to compare have different types."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(O, "circularReferenceFound", {
	    get: function () {
	      return new O({
	        code: E1.CIRCULAR_REFERENCE_FOUND,
	        message: "Cannot handle circular referenced object."
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  });
	  var yA,
	      mA,
	      gA = O;

	  function O(e) {
	    var t = e.code,
	        t = void 0 === t ? E1.UNKNOWN_ERROR : t,
	        e = e.message,
	        e = mA.call(this, void 0 === e ? "Unknown error occurred." : e) || this;
	    return e.code = t, Object.setPrototypeOf(e, O.prototype), e;
	  }

	  (Yt = yA = yA || {}).INIT = "init", Yt.READY = "ready", Yt.CLOSED = "closed";

	  function EA(e, t) {
	    if (void 0 === t && (t = new WeakMap()), "object" != typeof e || null === e) return e;
	    if (t.has(e)) throw gA.circularReferenceFound;
	    t.set(e, !0);
	    var n = null;
	    if (Array.isArray(e)) n = e.map(function (e) {
	      return EA(e, t);
	    });else if (e instanceof RegExp) n = e;else if (e instanceof Date) n = e;else for (var r in n = {}, e) n[r] = EA(e[r], t);
	    return t.delete(e), n;
	  }

	  function bA(e, t) {
	    if (null == t) return 1;
	    if (null == e) return -1;
	    if (typeof e != typeof t) throw gA.compareTypesNotMatch;
	    var n = 0;

	    switch (typeof e) {
	      case "boolean":
	      case "number":
	        n = e - t;
	        break;

	      case "string":
	        n = e.localeCompare(t);
	    }

	    return n;
	  }

	  function IA(t) {
	    return new Promise(function (e) {
	      setTimeout(function () {
	        return e();
	      }, t);
	    });
	  }

	  function wA(e, t) {
	    if (t) {
	      if ("function" == typeof e) return e(t);

	      for (var n in e) if (["/and", "&&"].includes(n)) {
	        if (e[n].some(function (e) {
	          return !wA(e, t);
	        })) return;
	      } else if (["/or", "||"].includes(n)) {
	        if (e[n].every(function (e) {
	          return !wA(e, t);
	        })) return;
	      } else if ("/where" === n) {
	        if (!(0, e[n])(t)) return;
	      } else {
	        var r = n;

	        if ("object" == typeof e[r]) {
	          var i,
	              s = e[r];

	          for (i in s) switch (i) {
	            case "/eq":
	            case "=":
	              if ((a = t[r]) !== (o = s[i])) return;
	              break;

	            case "/neq":
	            case "!=":
	              if ((a = t[r]) === (o = s[i])) return;
	              break;

	            case "/gt":
	            case ">":
	              var a = t[r],
	                  o = s[i];
	              if (0 < bA(a, o)) break;
	              return;

	            case "/gte":
	            case ">=":
	              if (a = t[r], o = s[i], 0 <= bA(a, o)) break;
	              return;

	            case "/lt":
	            case "<":
	              if (a = t[r], o = s[i], bA(a, o) < 0) break;
	              return;

	            case "/lte":
	            case "<=":
	              if (a = t[r], o = s[i], bA(a, o) <= 0) break;
	              return;

	            case "/in":
	              if (a = t[r], (o = s[i]).includes(a)) break;
	              return;

	            case "/nin":
	              if (a = t[r], (o = s[i]).includes(a)) return;
	              break;

	            case "/contain":
	              if (a = t[r], o = s[i], a.includes(o)) break;
	              return;

	            case "/regex":
	              if (a = t[r], (o = s[i]).test(a)) break;
	              return;

	            case "/where":
	              if (a = t[r], !(0, s[i])(a)) return;
	          }
	        } else if ("function" == typeof e[r]) {
	          if (!e[r](t[r])) return;
	        } else if (e[r] !== t[r]) return;
	      }

	      return 1;
	    }
	  }

	  function TA() {}

	  function SA() {
	    return Promise.resolve();
	  }

	  function CA(e) {
	    return e;
	  }

	  function kA(e, t) {
	    t(null);
	  }

	  var NA = function (e, t) {
	    for (var n = 0, r = 0; r < e.length; r++) n = e.charCodeAt(r) + (n << 6) + (n << 16) - n;

	    return (n >>> 0) % t;
	  };

	  function AA(e, t) {
	    return "".concat(jA(e, t), ".metadata");
	  }

	  function OA(e, t) {
	    return "".concat(jA(e, t), "/block.");
	  }

	  function RA(e, t) {
	    return "".concat(jA(e, t), "/blob.");
	  }

	  function DA(e, t, n, r) {
	    return void 0 === r && (r = 0), "".concat(RA(e, t)).concat(n, ".").concat(r);
	  }

	  Object.defineProperty(KA.prototype, "prevValue", {
	    get: function () {
	      return this._map(this._prevValue);
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(KA.prototype, "nextValue", {
	    get: function () {
	      return this._map(this._nextValue);
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(KA.prototype, "error", {
	    get: function () {
	      return this._error;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(KA.prototype, "hasPrevious", {
	    get: function () {
	      return !!this._prevValue;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(KA.prototype, "hasNext", {
	    get: function () {
	      return !!this._nextValue;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), KA.prototype.prev = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (!this.hasPrevious) return [3, 6];
	            e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), t = this._prevValue, [4, (n = this)._backward()];

	          case 2:
	            return n._prevValue = e.sent() || null, this._nextValue = t, [3, 4];

	          case 3:
	            return r = e.sent(), this._error = r, [3, 4];

	          case 4:
	            return [4, this._iterator(this)];

	          case 5:
	            return [2, e.sent()];

	          case 6:
	            this._complete(), e.label = 7;

	          case 7:
	            return [2];
	        }
	      });
	    });
	  }, KA.prototype.next = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (!this.hasNext) return [3, 6];
	            e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), t = this._nextValue, [4, (n = this)._forward()];

	          case 2:
	            return n._nextValue = e.sent() || null, this._prevValue = t, [3, 4];

	          case 3:
	            return r = e.sent(), this._error = r, [3, 4];

	          case 4:
	            return [4, this._iterator(this)];

	          case 5:
	            return [2, e.sent()];

	          case 6:
	            this._complete(), e.label = 7;

	          case 7:
	            return [2];
	        }
	      });
	    });
	  }, KA.prototype.stop = function () {
	    this._prevValue = null, this._nextValue = null, this._complete();
	  };

	  var MA,
	      xA,
	      LA,
	      PA = KA,
	      UA = (BA.prototype.findOptimizedStartPosition = function () {
	    var s = this,
	        a = ["=", "/eq", ">", ">=", "/gt", "/gte"],
	        o = ["=", "/eq", "<", "<=", "/lt", "/lte"];

	    if (this.backward) {
	      var e = this._indexer.origin.length - 1;
	      if ("function" != typeof this.condition) for (var t in this._indexer.fields) {
	        var n = this._indexer.fields[t],
	            r = 1;
	        if ("-" === n[0] && (n = n.slice(1), r = -1), this.condition[n]) if ("object" == typeof this.condition[n]) {
	          var i,
	              u = 0 < r ? o : a;

	          for (i in this.condition[n]) if (u.includes(i)) for (var c = e; 0 <= c; c--) if (r * bA(this._indexer.origin[c].columnValues[t], this.condition[n][i]) <= 0) {
	            e = c;
	            break;
	          }
	        } else for (c = e; 0 <= c; c--) if (r * bA(this._indexer.origin[c].columnValues[t], this.condition[n]) <= 0) {
	          e = c;
	          break;
	        }
	      }
	      return Math.min(e + 1, this._indexer.origin.length - 1);
	    }

	    var l = 0;
	    if ("function" != typeof this.condition) for (var h = this, t = 0; t < this._indexer.fields.length; t++) !function (n) {
	      var r = h._indexer.fields[n],
	          i = 1;
	      if ("-" === r[0] && (r = r.slice(1), i = -1), h.condition[r]) if ("object" == typeof h.condition[r]) Object.keys(h.condition[r]).forEach(function (e) {
	        if ((0 < i ? a : o).includes(e)) for (var t = l; t < s._indexer.origin.length; t++) if (0 <= i * bA(s._indexer.origin[t].columnValues[n], s.condition[r][e])) {
	          l = t;
	          break;
	        }
	      });else for (var e = l; e < h._indexer.origin.length; e++) if (0 <= i * bA(h._indexer.origin[e].columnValues[n], h.condition[r])) {
	        l = e;
	        break;
	      }
	    }(t);
	    return Math.max(l - 1, 0);
	  }, BA.prototype.each = function (c) {
	    return re(this, void 0, void 0, function () {
	      var r,
	          i,
	          s,
	          a,
	          t,
	          n,
	          o,
	          u = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (r = this.findOptimizedStartPosition(), i = 0, this.backward && this._indexer.origin[r] && (i = this._indexer.origin[r].keys.length - 1), s = function () {
	              if (u._indexer.origin[r]) {
	                if (!u._indexer.origin[r].keys[++i]) {
	                  if (!u._indexer.origin[++r]) return !1;
	                  i = 0;
	                }

	                return !0;
	              }

	              return !1;
	            }, a = function () {
	              if (u._indexer.origin[r]) {
	                if (!u._indexer.origin[r].keys[--i]) {
	                  if (!u._indexer.origin[--r]) return !1;
	                  i = u._indexer.origin[r].keys.length - 1;
	                }

	                return !0;
	              }

	              return !1;
	            }, t = null, !this._indexer.origin[r]) return [3, 4];
	            n = this.backward ? a : s, e.label = 1;

	          case 1:
	            return [4, this._blockManager.getFromBlock(this._indexer.origin[r].keys[i])];

	          case 2:
	            if (o = e.sent(), wA(this.condition, o)) return t = o, [3, 4];
	            e.label = 3;

	          case 3:
	            if (n()) return [3, 1];
	            e.label = 4;

	          case 4:
	            return [4, new Promise(function (e) {
	              e = new PA({
	                initialNextValue: EA(t),
	                iterator: c,
	                forward: function () {
	                  return re(u, void 0, void 0, function () {
	                    var t, n;
	                    return ie(this, function (e) {
	                      switch (e.label) {
	                        case 0:
	                          t = this.backward ? a : s, e.label = 1;

	                        case 1:
	                          return t() ? [4, this._blockManager.getFromBlock(this._indexer.origin[r].keys[i])] : [3, 3];

	                        case 2:
	                          return n = e.sent(), wA(this.condition, n) ? [2, EA(n)] : [3, 1];

	                        case 3:
	                          return [2, null];
	                      }
	                    });
	                  });
	                },
	                backward: function () {
	                  return re(u, void 0, void 0, function () {
	                    var t, n;
	                    return ie(this, function (e) {
	                      switch (e.label) {
	                        case 0:
	                          t = this.backward ? s : a, e.label = 1;

	                        case 1:
	                          return t() ? [4, this._blockManager.getFromBlock(this._indexer.origin[r].keys[i])] : [3, 3];

	                        case 2:
	                          return n = e.sent(), wA(this.condition, n) ? [2, EA(n)] : [3, 1];

	                        case 3:
	                          return [2, null];
	                      }
	                    });
	                  });
	                },
	                complete: e
	              });
	              c(e);
	            })];

	          case 5:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, BA),
	      qA = (VA.prototype.fetch = function (a) {
	    return void 0 === a && (a = {}), re(this, void 0, void 0, function () {
	      var n,
	          r,
	          i,
	          t,
	          s = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (n = Math.max(a.offset || 0, 0), 0 === (r = "number" == typeof a.limit ? a.limit : Number.MAX_SAFE_INTEGER)) return [2, []];
	            if (r < 0) throw gA.collectionQueryNotValid;
	            e.label = 1;

	          case 1:
	            return e.trys.push([1, 4,, 5]), i = [], [4, this._mutex.lock()];

	          case 2:
	            return e.sent(), [4, this._iterator.each(function (t) {
	              return re(s, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return !t.error && t.hasNext ? 0 === n ? (i.push(t.nextValue), 0 < r && r <= i.length ? t.stop() : t.next()) : (n--, t.next()) : t.stop(), [2];
	                });
	              });
	            })];

	          case 3:
	            return e.sent(), this._mutex.unlock(), [2, i];

	          case 4:
	            throw t = e.sent(), this._mutex.unlock(), t;

	          case 5:
	            return [2];
	        }
	      });
	    });
	  }, VA.prototype.count = function () {
	    return re(this, void 0, void 0, function () {
	      var n,
	          t,
	          r = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return e.trys.push([0, 3,, 4]), n = 0, [4, this._mutex.lock()];

	          case 1:
	            return e.sent(), [4, this._iterator.each(function (t) {
	              return re(r, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return !t.error && t.hasNext ? (n++, t.next()) : t.stop(), [2];
	                });
	              });
	            })];

	          case 2:
	            return e.sent(), this._mutex.unlock(), [2, n];

	          case 3:
	            throw t = e.sent(), this._mutex.unlock(), t;

	          case 4:
	            return [2];
	        }
	      });
	    });
	  }, VA),
	      FA = function (e) {
	    return "".concat("nest", "@").concat(e);
	  },
	      jA = function (e, t) {
	    return "".concat(FA(e), "/").concat(t);
	  },
	      HA = (GA.prototype._makeShards = function (e, t) {
	    var n = Math.max(this._store.itemSizeLimit - 1024, 0);

	    if (0 < n) {
	      for (var r = Math.ceil(e.data.length / n), r = "".concat(r, ".").concat(e.type, ".").concat(t), i = [], s = 0; s < e.data.length; s += n) {
	        var a = e.data.slice(s, s + n);
	        i.push(a);
	      }

	      return {
	        blobId: r,
	        shards: i
	      };
	    }

	    return {
	      blobId: null,
	      shards: null
	    };
	  }, GA.prototype._encode = function (n) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, new Promise(function (e) {
	              var t = new FileReader();
	              t.onload = function () {
	                e({
	                  data: t.result,
	                  type: n.type
	                });
	              }, t.readAsDataURL(n);
	            })];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, GA.prototype._decode = function (o) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return "undefined" == typeof fetch ? [3, 3] : [4, fetch(o.data)];

	          case 1:
	            return [4, e.sent().blob()];

	          case 2:
	            return [2, e.sent()];

	          case 3:
	            for (t = [], n = atob(o.data.split(",")[1]), r = 0; r < n.length; r += 512) {
	              for (i = n.slice(r, r + 512), s = new Array(i.length), a = 0; a < i.length; a++) s[a] = i.charCodeAt(a);

	              t.push(new Uint8Array(s));
	            }

	            return [2, new Blob(t, {
	              type: o.type
	            })];
	        }
	      });
	    });
	  }, GA.prototype.get = function (a) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (t = [], n = X_(a.split("."), 2), r = n[0], n = n[1], !(0 < (r = parseInt(r)))) return [3, 6];
	            i = 0, e.label = 1;

	          case 1:
	            return i < r ? (s = DA(this.dbname, this.collectionName, a, i), [4, this._store.get(s)]) : [3, 4];

	          case 2:
	            if (!(s = e.sent()) || !s.d) throw gA.storeBrokenBlob;
	            t.push(s.d), e.label = 3;

	          case 3:
	            return i++, [3, 1];

	          case 4:
	            return [4, this._decode({
	              data: t.join(""),
	              type: n
	            })];

	          case 5:
	            return [2, e.sent()];

	          case 6:
	            return [2, null];
	        }
	      });
	    });
	  }, GA.prototype.save = function (o, u) {
	    return void 0 === u && (u = "".concat(Date.now())), re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = [], [4, this._encode(o)];

	          case 1:
	            if (n = e.sent(), n = this._makeShards(n, u), r = n.blobId, i = n.shards, !r) return [3, 3];

	            for (s = 0; s < i.length; s++) a = DA(this.dbname, this.collectionName, r, s), t.push({
	              key: a,
	              value: {
	                d: i[s]
	              },
	              generation: 1
	            });

	            return [4, this._store.setMany(t)];

	          case 2:
	            if (e.sent().some(function (e) {
	              return e instanceof Error;
	            })) throw gA.storeWriteFailed;
	            return [2, r];

	          case 3:
	            return [2, null];
	        }
	      });
	    });
	  }, GA.prototype.remove = function (s) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (t = [], n = X_(s.split("."), 1), n = n[0], !(0 < (r = parseInt(n)))) return [3, 2];

	            for (i = 0; i < r; i++) t.push(DA(this.dbname, this.collectionName, s, i));

	            return [4, this._store.removeMany(t)];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, GA.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o, u;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = RA(this.dbname, this.collectionName), n = [], [4, this._store.getAllKeys()];

	          case 1:
	            r = e.sent();

	            try {
	              for (i = se(r), s = i.next(); !s.done; s = i.next()) (a = s.value).startsWith(t) && n.push(a);
	            } catch (e) {
	              o = {
	                error: e
	              };
	            } finally {
	              try {
	                s && !s.done && (u = i.return) && u.call(i);
	              } finally {
	                if (o) throw o.error;
	              }
	            }

	            return [4, this._store.removeMany(r)];

	          case 2:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, GA);

	  function GA(e) {
	    var t = e.dbname,
	        n = e.collectionName,
	        e = e.store;
	    this.dbname = t, this.collectionName = n, this._store = e;
	  }

	  function VA(e) {
	    var t = e.condition,
	        t = void 0 === t ? {} : t,
	        n = e.backward,
	        n = void 0 !== n && n,
	        r = e.mutex,
	        i = e.blockManager,
	        e = e.indexer;
	    this._mutex = r, this._iterator = new UA({
	      condition: t,
	      backward: n,
	      blockManager: i,
	      indexer: e
	    });
	  }

	  function BA(e) {
	    var t = e.condition,
	        n = e.backward,
	        n = void 0 !== n && n,
	        r = e.blockManager,
	        e = e.indexer;
	    this.condition = void 0 === t ? {} : t, this.backward = n, this._blockManager = r, this._indexer = e;
	  }

	  function KA(e) {
	    var t = e.initialPrevValue,
	        n = e.initialNextValue,
	        n = void 0 === n ? null : n,
	        r = e.iterator,
	        i = e.map,
	        i = void 0 === i ? CA : i,
	        s = e.backward,
	        s = void 0 === s ? SA : s,
	        a = e.forward,
	        a = void 0 === a ? SA : a,
	        e = e.complete,
	        e = void 0 === e ? TA : e;
	    this._prevValue = void 0 === t ? null : t, this._nextValue = n, this._error = null, this._map = i, this._backward = s, this._forward = a, this._iterator = r, this._complete = e;
	  }

	  (Gn = MA = MA || {})[Gn.COMMIT = 0] = "COMMIT", Gn[Gn.WRITE = 1] = "WRITE", Gn[Gn.ERROR = 2] = "ERROR", (nt = xA = xA || {}).PENDING = "pending", nt.PERSISTENT = "persistent", nt.VOLATILE = "volatile", (mt = LA = LA || {})[mt.NO_CACHE = 0] = "NO_CACHE", mt[mt.DEFAULT = 1] = "DEFAULT", mt[mt.PERSISTENT = 2] = "PERSISTENT";
	  var QA = [xA.PENDING, xA.VOLATILE],
	      zA = {},
	      WA = (iO.get = function (e) {
	    return zA[e];
	  }, Object.defineProperty(iO.prototype, "items", {
	    get: function () {
	      return this._items;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), iO.prototype.find = function (r, i, s) {
	    return void 0 === s && (s = LA.DEFAULT), re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return (t = this.get(i)) ? [3, 2] : [4, r.get(i)];

	          case 1:
	            return (n = e.sent()) && (t = {
	              key: i,
	              value: n,
	              generation: 1,
	              state: s === LA.PERSISTENT ? xA.PERSISTENT : xA.VOLATILE
	            }, this.put(t)), [3, 3];

	          case 2:
	            s === LA.PERSISTENT && (t.state = xA.PERSISTENT), e.label = 3;

	          case 3:
	            return [2, t];
	        }
	      });
	    });
	  }, iO.prototype.get = function (e, t) {
	    void 0 === t && (t = LA.DEFAULT);

	    var e = this._items.map(function (e) {
	      return e.key;
	    }).indexOf(e);

	    return -1 < e ? (e = this._items[e], t === LA.PERSISTENT && (e.state = xA.PERSISTENT), t !== LA.NO_CACHE && this.put(e), e) : null;
	  }, iO.prototype.put = function (e) {
	    var t, n;

	    if (0 < this._limit) {
	      var r = this._items.map(function (e) {
	        return e.key;
	      }).indexOf(e.key);

	      if (-1 < r) QA.includes(this._items[r].state) && QA.includes(e.state) ? (this._items.splice(r, 1), this._items.push(e)) : (this._items[r].state = e.state, this._items[r].generation = e.generation, this._items[r].value = e.value);else {
	        this._items.push(e);

	        var i = this._items.filter(function (e) {
	          return e.state === xA.VOLATILE;
	        }).length - this._limit;

	        if (0 < i) {
	          var s = [];

	          try {
	            for (var a = se(this._items), o = a.next(); !o.done; o = a.next()) {
	              var u = o.value;
	              u.state === xA.VOLATILE && 0 < i ? i-- : s.push(u);
	            }
	          } catch (e) {
	            t = {
	              error: e
	            };
	          } finally {
	            try {
	              o && !o.done && (n = a.return) && n.call(a);
	            } finally {
	              if (t) throw t.error;
	            }
	          }

	          this._items = s;
	        }
	      }
	    }
	  }, iO.prototype.remove = function (e) {
	    e = this._items.map(function (e) {
	      return e.key;
	    }).indexOf(e);
	    -1 < e && this._items.splice(e, 1);
	  }, iO.prototype.clearByCondition = function (t) {
	    this._items = this._items.filter(function (e) {
	      return !t(e);
	    });
	  }, iO.prototype.clear = function (e) {
	    this._items = (e = void 0 === e ? !1 : e) ? [] : this._items.filter(function (e) {
	      return e.state !== xA.VOLATILE;
	    });
	  }, iO),
	      YA = (Object.defineProperty(rO.prototype, "generation", {
	    get: function () {
	      return this._metadata ? this._metadata.generation : 0;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(rO.prototype, "requestCount", {
	    get: function () {
	      return this._requests.length;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), rO.prototype._getReducedRecordset = function (n) {
	    return void 0 === n && (n = []), re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._store.get(this.recordsetKey)];

	          case 1:
	            return (t = e.sent() || []).push.apply(t, J_([], X_(n), !1)), [2, this._reduceRecordSet(t)];
	        }
	      });
	    });
	  }, rO.prototype._reduceRecordSet = function (e) {
	    for (var t = [], n = {}, r = e.length - 1; 0 <= r; r--) {
	      for (var i = e[r], s = [], a = i.requests.length - 1; 0 <= a; a--) {
	        var o = i.requests[a],
	            u = o.data;
	        n[u.key] || (s.unshift(o), n[u.key] = !0);
	      }

	      0 < s.length && (i.requests = s, t.unshift(i));
	    }

	    return t;
	  }, rO.prototype._applyRecord = function (c, l) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o, u;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            t = WA.get(this.dbname), n = l.generation, r = l.requests, i = null, e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), [4, this._store.setMany(r.map(function (e) {
	              return f(f({}, e.data), {
	                generation: n
	              });
	            }))];

	          case 2:
	            for (s = e.sent(), a = 0; a < r.length; a++) s[a] instanceof Error && (i = i || s[a], o = r[a].data, t.put(f(f({}, o), {
	              generation: n,
	              state: xA.PERSISTENT
	            })));

	            return [3, 4];

	          case 3:
	            return u = e.sent(), i = u, [3, 4];

	          case 4:
	            return i ? [3, 6] : (u = c.filter(function (e) {
	              return e.generation !== n;
	            }), [4, this._store.set({
	              key: this.recordsetKey,
	              value: u,
	              generation: n
	            })]);

	          case 5:
	            return e.sent(), this._onWrite.forEach(function (e) {
	              e(r.map(function (e) {
	                return e.data;
	              }));
	            }), [3, 7];

	          case 6:
	            this._onError.forEach(function (e) {
	              return e(i);
	            }), e.label = 7;

	          case 7:
	            return [2];
	        }
	      });
	    });
	  }, rO.prototype.init = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, (t = this)._store.get(this.metadataKey)];

	          case 1:
	            return t._metadata = e.sent() || {
	              generation: 1
	            }, [4, this._getReducedRecordset()];

	          case 2:
	            n = e.sent(), e.label = 3;

	          case 3:
	            e.trys.push([3, 8, 9, 10]), r = se(n), i = r.next(), e.label = 4;

	          case 4:
	            return i.done ? [3, 7] : (s = i.value, [4, this._applyRecord(n, s)]);

	          case 5:
	            e.sent(), e.label = 6;

	          case 6:
	            return i = r.next(), [3, 4];

	          case 7:
	            return [3, 10];

	          case 8:
	            return s = e.sent(), a = {
	              error: s
	            }, [3, 10];

	          case 9:
	            try {
	              i && !i.done && (o = r.return) && o.call(r);
	            } finally {
	              if (a) throw a.error;
	            }

	            return [7];

	          case 10:
	            return [2];
	        }
	      });
	    });
	  }, rO.prototype.on = function (e, t, n) {
	    switch (e) {
	      case MA.COMMIT:
	        this._onCommit.set(t, n);

	        break;

	      case MA.WRITE:
	        this._onWrite.set(t, n);

	        break;

	      case MA.ERROR:
	        this._onError.set(t, n);

	    }
	  }, rO.prototype.requestWrite = function (e, t) {
	    this._requests.push({
	      data: e,
	      options: t = void 0 === t ? null : t
	    }), WA.get(this.dbname).put(f({
	      state: xA.PENDING,
	      generation: this.generation
	    }, e));
	  }, rO.prototype.requestMultipleWrite = function (e, t) {
	    void 0 === t && (t = null);
	    var n,
	        r,
	        i = WA.get(this.dbname);

	    try {
	      for (var s = se(e), a = s.next(); !a.done; a = s.next()) {
	        var o = a.value;
	        this._requests.push({
	          data: o,
	          options: t
	        }), i.put(f({
	          state: xA.PENDING,
	          generation: this.generation
	        }, o));
	      }
	    } catch (e) {
	      n = {
	        error: e
	      };
	    } finally {
	      try {
	        a && !a.done && (r = s.return) && r.call(s);
	      } finally {
	        if (n) throw n.error;
	      }
	    }
	  }, rO.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return WA.get(this.dbname).clearByCondition(function (e) {
	          return e.state === xA.PENDING;
	        }), this._requests = [], [2];
	      });
	    });
	  }, rO.prototype.commit = function () {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r,
	          i,
	          s,
	          a,
	          o,
	          u,
	          c,
	          l,
	          h,
	          d = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (!(0 < (t = this._requests).length)) return [3, 4];

	            for (n = [], r = {}, u = t.length - 1; 0 <= u; u--) i = t[u], c = i.data, r[c.key] || (r[c.key] = !0, n.unshift(i));

	            return s = {
	              generation: this.generation,
	              requests: n
	            }, [4, this._getReducedRecordset([s])];

	          case 1:
	            return a = e.sent(), [4, this._store.set({
	              key: this.recordsetKey,
	              value: a,
	              generation: this.generation
	            })];

	          case 2:
	            return e.sent(), this._metadata.generation++, [4, this._store.set({
	              key: this.metadataKey,
	              value: this._metadata,
	              generation: 1
	            })];

	          case 3:
	            for (e.sent(), o = WA.get(this.dbname), u = 0; u < n.length; u++) l = n[u], c = l.data, l = l.options, o.put(f(f({}, c), {
	              generation: s.generation,
	              state: l && l.persistent ? xA.PERSISTENT : xA.VOLATILE
	            }));

	            this._requests = [], this._onCommit.forEach(function (e) {
	              e(t.map(function (e) {
	                return e.data;
	              }));
	            }), h = eA.get(this.dbname), setTimeout(function () {
	              try {
	                d._applyRecord(a, s);
	              } catch (t) {
	                d._onError.forEach(function (e) {
	                  return e(t);
	                });
	              }
	            }, h.transactionApplyDelay), e.label = 4;

	          case 4:
	            return [2];
	        }
	      });
	    });
	  }, rO),
	      XA = (nO.createFromCacheItem = function (e) {
	    return e ? new nO(e.value) : null;
	  }, Object.defineProperty(nO.prototype, "isEmpty", {
	    get: function () {
	      return 0 === this._items.length;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(nO.prototype, "items", {
	    get: function () {
	      return this._items;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), nO.prototype.serialize = function () {
	    return {
	      blockId: this.blockId,
	      keyName: this.keyName,
	      limit: this.limit,
	      items: this._items
	    };
	  }, nO.prototype.getItemByKey = function (t) {
	    var n = this;
	    return this._items.find(function (e) {
	      e = e[n.keyName];
	      return t === e;
	    });
	  }, nO.prototype.has = function (e) {
	    var t = this;
	    return this._items.map(function (e) {
	      return e[t.keyName];
	    }).includes(e);
	  }, nO.prototype.add = function (e) {
	    var t = this,
	        n = this._items.map(function (e) {
	      return e[t.keyName];
	    }).indexOf(e[this.keyName]);

	    return n < 0 ? this._items.length < this.limit && (this._items.push(e), !0) : (this._items[n] = e, !0);
	  }, nO.prototype.remove = function (e) {
	    for (var t in this._items) if (this._items[t][this.keyName] === e) return this._items.splice(parseInt(t), 1), !0;

	    return !1;
	  }, nO.prototype.clear = function () {
	    this._items = [];
	  }, nO),
	      JA = (Object.defineProperty(tO.prototype, "keyName", {
	    get: function () {
	      return this.metadata.keyName;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), tO.prototype.createBlockId = function (e, t) {
	    return void 0 === t && (t = this.metadata.blockLevel), n = this.dbname, r = this.collectionName, i = t, e = "".concat(function (e, t, n) {
	      t = n.base * Math.pow(n.multiplier, t) + n.constant;
	      return (n.hashFunction || NA)(e, t);
	    }(e, t, {
	      hashFunction: this.hashFunction,
	      base: this.metadata.blockHashBase,
	      multiplier: this.metadata.blockHashMultiplier,
	      constant: this.metadata.blockHashConstant
	    })), "".concat(OA(n, r)).concat(i, ".").concat(e);
	    var n, r, i;
	  }, tO.prototype._findBlock = function (s) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            t = WA.get(this.dbname), n = this.metadata.blockLevel, e.label = 1;

	          case 1:
	            return 0 < n ? (r = this.createBlockId(s, n), [4, t.find(this._store, r)]) : [3, 4];

	          case 2:
	            if ((r = e.sent()) && (i = XA.createFromCacheItem(r)).getItemByKey(s)) return [2, i];
	            e.label = 3;

	          case 3:
	            return n--, [3, 1];

	          case 4:
	            return [2, null];
	        }
	      });
	    });
	  }, tO.prototype.getFromBlock = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._findBlock(n)];

	          case 1:
	            return [2, (t = e.sent()) ? t.getItemByKey(n) : null];
	        }
	      });
	    });
	  }, tO.prototype.putToBlock = function (i, s) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return n = eA.get(this.dbname), t = this.createBlockId(i), n = Math.floor(this._store.itemSizeLimit / n.itemSizeLimit), [4, WA.get(this.dbname).find(this._store, t)];

	          case 1:
	            return r = e.sent(), (r = r ? XA.createFromCacheItem(r) : new XA({
	              blockId: t,
	              keyName: this.keyName,
	              items: [],
	              limit: n
	            })).add(s) ? (this._transaction.requestWrite({
	              key: r.blockId,
	              value: r.serialize()
	            }), [2, !0]) : [2, !1];
	        }
	      });
	    });
	  }, tO.prototype.removeFromBlock = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._findBlock(n)];

	          case 1:
	            return (t = e.sent()) && t.remove(n) ? (this._transaction.requestWrite({
	              key: t.blockId,
	              value: t.serialize()
	            }), [2, !0]) : [2, !1];
	        }
	      });
	    });
	  }, tO.prototype.clearAllBlocks = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o, u;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = OA(this.dbname, this.collectionName), [4, this._store.getAllKeys()];

	          case 1:
	            return n = e.sent(), n = n.filter(function (e) {
	              return e.startsWith(t);
	            }), [4, this._store.removeMany(n)];

	          case 2:
	            e.sent(), r = WA.get(this.dbname);

	            try {
	              for (i = se(n), s = i.next(); !s.done; s = i.next()) a = s.value, r.remove(a);
	            } catch (e) {
	              o = {
	                error: e
	              };
	            } finally {
	              try {
	                s && !s.done && (u = i.return) && u.call(i);
	              } finally {
	                if (o) throw o.error;
	              }
	            }

	            return [2];
	        }
	      });
	    });
	  }, tO),
	      ZA = (eO.createKey = function (e) {
	    return e.join(">");
	  }, eO.parseKey = function (e) {
	    return e.split(">");
	  }, eO.prototype._addItem = function (e) {
	    var t = e[this.keyName],
	        e = this.getColumnValues(e),
	        n = X_(this.indexOf(e), 2),
	        r = n[0];
	    return n[1] ? !this._table[r].keys.includes(t) && (this._table[r].keys.push(t), !0) : (this._table.splice(r, 0, {
	      columnValues: e,
	      keys: [t]
	    }), !0);
	  }, eO.prototype._removeItem = function (e) {
	    var t = e[this.keyName],
	        e = this.getColumnValues(e),
	        e = X_(this.indexOf(e), 2),
	        n = e[0];

	    if (e[1]) {
	      e = this._table[n].keys.indexOf(t);
	      if (-1 < e) return this._table[n].keys.splice(e, 1), 0 === this._table[n].keys.length && this._table.splice(n, 1), !0;
	    }

	    return !1;
	  }, Object.defineProperty(eO.prototype, "origin", {
	    get: function () {
	      return this._origin;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(eO.prototype, "table", {
	    get: function () {
	      return this._table;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), eO.prototype.getColumnValues = function (e) {
	    var t,
	        n,
	        r = [];

	    try {
	      for (var i = se(this.fields), s = i.next(); !s.done; s = i.next()) {
	        var a,
	            o = s.value,
	            u = e[o = "-" === o[0] ? o.slice(1) : o];
	        if (a = typeof u, null !== u && "undefined" != a && "boolean" != a && "number" != a && "string" != a) throw gA.indexTypesNotMatch;
	        r.push(e[o]);
	      }
	    } catch (e) {
	      t = {
	        error: e
	      };
	    } finally {
	      try {
	        s && !s.done && (n = i.return) && n.call(i);
	      } finally {
	        if (t) throw t.error;
	      }
	    }

	    return r;
	  }, eO.prototype.diff = function (e, t) {
	    for (var n in this.fields) {
	      var r = "-" === this.fields[n][0] ? -1 : 1,
	          n = bA(e[n], t[n]);
	      if (0 !== n) return r * n;
	    }

	    return 0;
	  }, eO.prototype.indexOf = function (e) {
	    if (0 < this._table.length) {
	      for (var t = 0, n = this._table.length - 1; t <= n;) {
	        var r = Math.floor((t + n) / 2),
	            i = this.diff(e, this._table[r].columnValues);
	        if (0 < i) t = r + 1;else {
	          if (!(i < 0)) return [r, !0];
	          n = r - 1;
	        }
	      }

	      return [t, !1];
	    }

	    return [0, !1];
	  }, eO.prototype.ensure = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o, u, c, l, h, d, f, p, v;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, (t = WA.get(this.dbname)).find(this._store, this.indexerKey, LA.PERSISTENT)];

	          case 1:
	            return (n = e.sent()) ? [3, 11] : (r = OA(this.dbname, this.collectionName), [4, this._store.getAllKeys()]);

	          case 2:
	            i = e.sent(), e.label = 3;

	          case 3:
	            e.trys.push([3, 8, 9, 10]), s = se(i), a = s.next(), e.label = 4;

	          case 4:
	            return a.done ? [3, 7] : (o = a.value).startsWith(r) ? [4, t.find(this._store, o, LA.NO_CACHE)] : [3, 6];

	          case 5:
	            o = e.sent(), h = XA.createFromCacheItem(o);

	            try {
	              for (p = void 0, u = se(h.items), c = u.next(); !c.done; c = u.next()) l = c.value, this._addItem(l);
	            } catch (e) {
	              p = {
	                error: e
	              };
	            } finally {
	              try {
	                c && !c.done && (v = u.return) && v.call(u);
	              } finally {
	                if (p) throw p.error;
	              }
	            }

	            e.label = 6;

	          case 6:
	            return a = s.next(), [3, 4];

	          case 7:
	            return [3, 10];

	          case 8:
	            return h = e.sent(), d = {
	              error: h
	            }, [3, 10];

	          case 9:
	            try {
	              a && !a.done && (f = s.return) && f.call(s);
	            } finally {
	              if (d) throw d.error;
	            }

	            return [7];

	          case 10:
	            return this._transaction.requestWrite({
	              key: this.indexerKey,
	              value: this._table
	            }, {
	              persistent: !0
	            }), [3, 12];

	          case 11:
	            this._origin = n.value, this._table = EA(this._origin), e.label = 12;

	          case 12:
	            return [2];
	        }
	      });
	    });
	  }, eO.prototype.drop = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return WA.get(this.dbname).remove(this.indexerKey), [4, this._store.remove(this.indexerKey)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, eO.prototype.addItem = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return this._addItem(t) && this._transaction.requestWrite({
	          key: this.indexerKey,
	          value: this._table
	        }, {
	          persistent: !0
	        }), [2];
	      });
	    });
	  }, eO.prototype.removeItem = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return this._removeItem(t) && this._transaction.requestWrite({
	          key: this.indexerKey,
	          value: this._table
	        }, {
	          persistent: !0
	        }), [2];
	      });
	    });
	  }, eO.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return this._table = [], this._transaction.requestWrite({
	          key: this.indexerKey,
	          value: this._table
	        }, {
	          persistent: !0
	        }), [2];
	      });
	    });
	  }, eO.prototype.commit = function () {
	    this._origin = this._table, this._table = EA(this._origin);
	  }, eO.prototype.abort = function () {
	    this._table = EA(this._origin);
	  }, eO),
	      $A = "undefined" != typeof document && "undefined" != typeof navigator;

	  function eO(e) {
	    var t = e.dbname,
	        n = e.collectionName,
	        r = e.keyName,
	        i = e.fields,
	        s = e.transaction,
	        e = e.store,
	        a = this;
	    this._origin = [], this._table = [], this.dbname = t, this.collectionName = n, this.keyName = r, this.fields = i, this.indexerKey = (t = this.dbname, n = this.collectionName, r = this.fields.join(">"), "".concat(jA(t, n), "/index.").concat(r)), this._transaction = s, this._store = e, this._transaction.on(MA.COMMIT, this.indexerKey, function () {
	      return a.commit();
	    }), this._transaction.on(MA.ERROR, this.indexerKey, function () {
	      return a.abort();
	    });
	  }

	  function tO(e) {
	    var t = e.dbname,
	        n = e.collectionName,
	        r = e.metadata,
	        i = e.hashFunction,
	        i = void 0 === i ? NA : i,
	        s = e.transaction,
	        e = e.store;
	    this.dbname = t, this.collectionName = n, this.hashFunction = i, this.metadata = r, this._transaction = s, this._store = e;
	  }

	  function nO(e) {
	    var t = e.blockId,
	        n = e.keyName,
	        r = e.items,
	        r = void 0 === r ? [] : r,
	        e = e.limit;
	    this.blockId = t, this.keyName = n, this.limit = e, this._items = J_([], X_(r), !1);
	  }

	  function rO(e) {
	    var t = e.dbname,
	        n = e.collectionName,
	        e = e.store;
	    this._metadata = null, this._requests = [], this._onCommit = new Map(), this._onWrite = new Map(), this._onError = new Map(), this.dbname = t, this.collectionName = n, this.metadataKey = "".concat(jA(t, n), "/trans.metadata"), this.recordsetKey = "".concat(jA(t, n), "/trans.recordset"), this._store = e;
	  }

	  function iO(e) {
	    var t = e.dbname,
	        e = e.limit,
	        e = void 0 === e ? 256 : e;
	    return zA[t] || (this.dbname = t, this._items = [], this._limit = e, zA[t] = this), zA[t];
	  }

	  $A && navigator.userAgent && navigator.userAgent.includes("Chrome/") && navigator.userAgent.includes("Chromium/");
	  var sO = $A && navigator.userAgent && navigator.userAgent.includes("Firefox/") && !navigator.userAgent.includes("Seamonkey/");
	  $A && navigator.userAgent && navigator.userAgent.includes("Safari/") && !navigator.userAgent.includes("Chrome/") && navigator.userAgent.includes("Chromium/"), $A && navigator.userAgent && (navigator.userAgent.includes("OPR/") || navigator.userAgent.includes("Opera/")), $A && navigator.userAgent && navigator.userAgent.includes("Trident/7.0");

	  function aO() {
	    var n = new Date().getTime();
	    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) {
	      var t = (n + 16 * Math.random()) % 16 | 0;
	      return n = Math.floor(n / 16), ("x" === e ? t : 3 & t | 8).toString(16);
	    });
	  }

	  var oO,
	      uO,
	      cO = $A && navigator.userAgent && navigator.userAgent.includes("Edge/");
	  (ua = oO = oO || {})[ua.PROCESSING = 0] = "PROCESSING", ua[ua.DONE = 1] = "DONE", (t = uO = uO || {}).NEWNODE = "newnode", t.REMOVENODE = "removenode", t.CLAIM_HOST = "claimhost", t.SYNC_HOST = "synchost", t.REQUEST_LOCK = "requestlock", t.ACQUIRE_LOCK = "acquirelock", t.RELEASE_LOCK = "releaselock";

	  var lO,
	      hO = {},
	      dO = (Object.defineProperty(SO.prototype, "locked", {
	    get: function () {
	      return !!this._currentItem;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(SO.prototype, "isHost", {
	    get: function () {
	      return this._hostId === this.nodeId;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(SO.prototype, "isInSync", {
	    get: function () {
	      return this._state == oO.DONE;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), SO.prototype._send = function (e, t) {
	    var n,
	        e = {
	      nodeId: this.nodeId,
	      requestId: null != (n = null == (t = void 0 === t ? {} : t) ? void 0 : t.requestId) ? n : aO(),
	      key: this.key,
	      op: e,
	      data: null != (n = t.data) ? n : null,
	      ts: Date.now()
	    };
	    return $A && window.postMessage(e, "*"), e;
	  }, SO.prototype._acquire = function (e) {
	    (e = void 0 === e ? null : e) ? (this._currentItem = e, this._currentItem.onAcquired(e.requestId)) : this._currentItem = null;
	  }, SO.prototype._release = function (t) {
	    var e, n;
	    this._currentItem && this._currentItem.requestId === t && (e = this._currentItem, this._currentItem = null, e.nodeId === this.nodeId && this._send(uO.RELEASE_LOCK, {
	      requestId: e.requestId
	    }), -1 < (n = this._queue.findIndex(function (e) {
	      return e.requestId === t;
	    })) && this._queue.splice(n, 1), e.onReleased(t));
	  }, SO.prototype._requestLock = function (i) {
	    var s = this;
	    return new Promise(function (t) {
	      var e,
	          n = {
	        nodeId: i.nodeId,
	        requestId: i.requestId,
	        ts: i.ts,
	        onAcquired: function (e) {
	          s.isHost && s._send(uO.ACQUIRE_LOCK, {
	            requestId: e
	          }), t();
	        },
	        onReleased: function () {
	          s._acquire(s._queue[0]);
	        }
	      },
	          r = !1;

	      for (e in s._queue) if (s._queue[e].ts > n.ts) {
	        s._queue.splice(parseInt(e), 0, n), r = !0;
	        break;
	      }

	      r || s._queue.push(n), s._currentItem || s._acquire(s._queue[0]);
	    });
	  }, SO.prototype._sendSync = function () {
	    var e;
	    this.isHost && this._send(uO.SYNC_HOST, {
	      data: {
	        currentItemRequestId: null == (e = this._currentItem) ? void 0 : e.requestId,
	        queue: this._queue.map(function (e) {
	          return {
	            nodeId: e.nodeId,
	            requestId: e.requestId,
	            ts: e.ts
	          };
	        })
	      }
	    });
	  }, SO.prototype._waitUntilSyncCompleted = function () {
	    return re(this, void 0, void 0, function () {
	      var t = this;
	      return ie(this, function (e) {
	        return this.isHost && !this.isInSync ? [2, new Promise(function (e) {
	          t._activationQueue.push(e);
	        })] : [2];
	      });
	    });
	  }, SO.prototype._waitSync = function () {
	    var e = this;
	    this.isInSync || (this._activationTimeout = setTimeout(function () {
	      e._completeSync();
	    }, 8));
	  }, SO.prototype._completeSync = function () {
	    this.isInSync || (this._state = oO.DONE, this._activationQueue.forEach(function (e) {
	      return e();
	    }), this._activationQueue = []);
	  }, SO.prototype.registerNode = function () {
	    this._send(uO.NEWNODE), this._waitSync();
	  }, SO.prototype.claimHost = function () {
	    this._hostId = this.nodeId, this._send(uO.CLAIM_HOST), this._waitSync();
	  }, SO.prototype.lock = function () {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._waitUntilSyncCompleted()];

	          case 1:
	            return e.sent(), t = this._send(uO.REQUEST_LOCK), [4, this._requestLock(t)];

	          case 2:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, SO.prototype.unlock = function () {
	    var e;

	    this._release(null == (e = this._currentItem) ? void 0 : e.requestId);
	  }, SO),
	      fO = (TO.metadataOf = function (n, r, i) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = AA(n, r), [4, i.get(t)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, Object.defineProperty(TO.prototype, "state", {
	    get: function () {
	      return this._state;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(TO.prototype, "isReady", {
	    get: function () {
	      return this._state === yA.READY;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), TO.prototype.init = function () {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r,
	          i,
	          s,
	          a,
	          o,
	          u,
	          c,
	          l,
	          h,
	          d,
	          f,
	          p = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._mutex.lock()];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return e.trys.push([2, 9,, 10]), t = eA.get(this.dbname), [4, TO.metadataOf(this.dbname, this.name, this._store)];

	          case 3:
	            return n = e.sent(), this._metadata = n || {
	              keyName: this.keyName,
	              blockLevel: 1,
	              blockHashBase: t.blockHashBase,
	              blockHashMultiplier: t.blockHashMultiplier,
	              blockHashConstant: t.blockHashConstant,
	              indexes: this.indexes
	            }, [4, this._transaction.init()];

	          case 4:
	            e.sent(), this._blockManager = new JA({
	              dbname: this.dbname,
	              collectionName: this.name,
	              hashFunction: this._keyHash,
	              metadata: this._metadata,
	              transaction: this._transaction,
	              store: this._store
	            }), r = J_([], X_(this.indexes), !1), i = [], s = r.map(function (e) {
	              return ZA.createKey(e);
	            }), a = n ? n.indexes.map(function (e) {
	              return ZA.createKey(e);
	            }) : [];

	            try {
	              for (o = se(a), u = o.next(); !u.done; u = o.next()) c = u.value, s.includes(c) || i.push(ZA.parseKey(c));
	            } catch (e) {
	              d = {
	                error: e
	              };
	            } finally {
	              try {
	                u && !u.done && (f = o.return) && f.call(o);
	              } finally {
	                if (d) throw d.error;
	              }
	            }

	            return (l = []).push.apply(l, J_([], X_(r.map(function (e) {
	              e = new ZA({
	                dbname: p.dbname,
	                collectionName: p.name,
	                keyName: p.keyName,
	                fields: e,
	                transaction: p._transaction,
	                store: p._store
	              });
	              return p._indexers.push(e), e.ensure();
	            })), !1)), l.push.apply(l, J_([], X_(i.map(function (e) {
	              return new ZA({
	                dbname: p.dbname,
	                collectionName: p.name,
	                keyName: p.keyName,
	                fields: e,
	                transaction: p._transaction,
	                store: p._store
	              }).drop();
	            })), !1)), [4, Promise.all(l)];

	          case 5:
	            return e.sent(), [4, this._transaction.commit()];

	          case 6:
	            return e.sent(), s.sort().join(",") === a.sort().join(",") ? [3, 8] : (l = AA(this.dbname, this.name), this._metadata.indexes = r, [4, this._store.set({
	              key: l,
	              value: this._metadata,
	              generation: 1
	            })]);

	          case 7:
	            e.sent(), e.label = 8;

	          case 8:
	            return this._state = yA.READY, this._mutex.unlock(), [3, 10];

	          case 9:
	            throw h = e.sent(), this._mutex.unlock(), h;

	          case 10:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.close = function () {
	    this._state = yA.CLOSED;
	  }, TO.prototype._hasPropertyOfKeyName = function (e) {
	    e = e[this.keyName];
	    return "string" == typeof e && !!e;
	  }, TO.prototype._getIndexerBy = function (e) {
	    e = (e = void 0 === e ? null : e) || [this.keyName];
	    var t,
	        n,
	        r = ZA.createKey(e);

	    try {
	      for (var i = se(this._indexers), s = i.next(); !s.done; s = i.next()) {
	        var a = s.value;
	        if (r === ZA.createKey(a.fields)) return a;
	      }
	    } catch (e) {
	      t = {
	        error: e
	      };
	    } finally {
	      try {
	        s && !s.done && (n = i.return) && n.call(i);
	      } finally {
	        if (t) throw t.error;
	      }
	    }

	    return null;
	  }, TO.prototype._upgradeBlockLevel = function () {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = AA(this.dbname, this.name), this._metadata.blockLevel++, [4, this._store.set({
	              key: t,
	              value: this._metadata,
	              generation: 1
	            })];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, TO.prototype._requestInsert = function (a) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = a[this.keyName], [4, this._blockManager.getFromBlock(t)];

	          case 1:
	            return e.sent() ? [3, 13] : [4, this._blockManager.putToBlock(t, a)];

	          case 2:
	            return e.sent() ? [3, 5] : [4, this._upgradeBlockLevel()];

	          case 3:
	            return e.sent(), [4, this._blockManager.putToBlock(t, a)];

	          case 4:
	            e.sent(), e.label = 5;

	          case 5:
	            e.trys.push([5, 10, 11, 12]), n = se(this._indexers), r = n.next(), e.label = 6;

	          case 6:
	            return r.done ? [3, 9] : [4, r.value.addItem(a)];

	          case 7:
	            e.sent(), e.label = 8;

	          case 8:
	            return r = n.next(), [3, 6];

	          case 9:
	            return [3, 12];

	          case 10:
	            return i = e.sent(), i = {
	              error: i
	            }, [3, 12];

	          case 11:
	            try {
	              r && !r.done && (s = n.return) && s.call(n);
	            } finally {
	              if (i) throw i.error;
	            }

	            return [7];

	          case 12:
	            return [3, 14];

	          case 13:
	            throw gA.collectionInsertDuplicate;

	          case 14:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype._requestUpsert = function (d) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o, u, c, l, h;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = d[this.keyName], [4, this._blockManager.getFromBlock(t)];

	          case 1:
	            return (n = e.sent()) ? [3, 13] : [4, this._blockManager.putToBlock(t, d)];

	          case 2:
	            return e.sent() ? [3, 5] : [4, this._upgradeBlockLevel()];

	          case 3:
	            return e.sent(), [4, this._blockManager.putToBlock(t, d)];

	          case 4:
	            e.sent(), e.label = 5;

	          case 5:
	            e.trys.push([5, 10, 11, 12]), r = se(this._indexers), i = r.next(), e.label = 6;

	          case 6:
	            return i.done ? [3, 9] : [4, (o = i.value).addItem(d)];

	          case 7:
	            e.sent(), e.label = 8;

	          case 8:
	            return i = r.next(), [3, 6];

	          case 9:
	            return [3, 12];

	          case 10:
	            return u = e.sent(), u = {
	              error: u
	            }, [3, 12];

	          case 11:
	            try {
	              i && !i.done && (c = r.return) && c.call(r);
	            } finally {
	              if (u) throw u.error;
	            }

	            return [7];

	          case 12:
	            return [3, 23];

	          case 13:
	            return [4, this._blockManager.putToBlock(t, d)];

	          case 14:
	            e.sent(), e.label = 15;

	          case 15:
	            e.trys.push([15, 21, 22, 23]), s = se(this._indexers), a = s.next(), e.label = 16;

	          case 16:
	            return a.done ? [3, 20] : 0 === (o = a.value).diff(o.getColumnValues(n), o.getColumnValues(d)) ? [3, 19] : [4, o.removeItem(n)];

	          case 17:
	            return e.sent(), [4, o.addItem(d)];

	          case 18:
	            e.sent(), e.label = 19;

	          case 19:
	            return a = s.next(), [3, 16];

	          case 20:
	            return [3, 23];

	          case 21:
	            return l = e.sent(), l = {
	              error: l
	            }, [3, 23];

	          case 22:
	            try {
	              a && !a.done && (h = s.return) && h.call(s);
	            } finally {
	              if (l) throw l.error;
	            }

	            return [7];

	          case 23:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype._requestUpdate = function (u) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = u[this.keyName], [4, this._blockManager.getFromBlock(t)];

	          case 1:
	            return (n = e.sent()) ? [4, this._blockManager.putToBlock(t, u)] : [3, 11];

	          case 2:
	            e.sent(), e.label = 3;

	          case 3:
	            e.trys.push([3, 9, 10, 11]), r = se(this._indexers), i = r.next(), e.label = 4;

	          case 4:
	            return i.done ? [3, 8] : 0 === (s = i.value).diff(s.getColumnValues(n), s.getColumnValues(u)) ? [3, 7] : [4, s.removeItem(n)];

	          case 5:
	            return e.sent(), [4, s.addItem(u)];

	          case 6:
	            e.sent(), e.label = 7;

	          case 7:
	            return i = r.next(), [3, 4];

	          case 8:
	            return [3, 11];

	          case 9:
	            return a = e.sent(), a = {
	              error: a
	            }, [3, 11];

	          case 10:
	            try {
	              i && !i.done && (o = r.return) && o.call(r);
	            } finally {
	              if (a) throw a.error;
	            }

	            return [7];

	          case 11:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype._requestRemove = function (a) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._blockManager.getFromBlock(a)];

	          case 1:
	            return (t = e.sent()) ? [4, this._blockManager.removeFromBlock(a)] : [3, 10];

	          case 2:
	            e.sent(), e.label = 3;

	          case 3:
	            e.trys.push([3, 8, 9, 10]), n = se(this._indexers), r = n.next(), e.label = 4;

	          case 4:
	            return r.done ? [3, 7] : [4, r.value.removeItem(t)];

	          case 5:
	            e.sent(), e.label = 6;

	          case 6:
	            return r = n.next(), [3, 4];

	          case 7:
	            return [3, 10];

	          case 8:
	            return i = e.sent(), i = {
	              error: i
	            }, [3, 10];

	          case 9:
	            try {
	              r && !r.done && (s = n.return) && s.call(n);
	            } finally {
	              if (i) throw i.error;
	            }

	            return [7];

	          case 10:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype._requestClear = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._blockManager.clearAllBlocks()];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            e.trys.push([2, 7, 8, 9]), t = se(this._indexers), n = t.next(), e.label = 3;

	          case 3:
	            return n.done ? [3, 6] : [4, n.value.clear()];

	          case 4:
	            e.sent(), e.label = 5;

	          case 5:
	            return n = t.next(), [3, 3];

	          case 6:
	            return [3, 9];

	          case 7:
	            return r = e.sent(), r = {
	              error: r
	            }, [3, 9];

	          case 8:
	            try {
	              n && !n.done && (i = t.return) && i.call(t);
	            } finally {
	              if (r) throw r.error;
	            }

	            return [7];

	          case 9:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.getByKey = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.isReady ? [4, this._mutex.lock()] : [3, 6];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return e.trys.push([2, 4,, 5]), [4, this._blockManager.getFromBlock(n)];

	          case 3:
	            return t = e.sent(), this._mutex.unlock(), [2, EA(t)];

	          case 4:
	            throw t = e.sent(), this._mutex.unlock(), t;

	          case 5:
	            return [3, 7];

	          case 6:
	            throw gA.collectionNotReady;

	          case 7:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.query = function (e) {
	    return void 0 === e && (e = {}), this.isReady ? new qA({
	      condition: e.where,
	      mutex: this._mutex,
	      blockManager: this._blockManager,
	      indexer: this._getIndexerBy(e.index),
	      backward: !!e.backward
	    }) : null;
	  }, TO.prototype.insertOne = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.isReady ? [4, this._mutex.lock()] : [3, 8];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            if (e.trys.push([2, 5,, 7]), this._hasPropertyOfKeyName(n)) return [4, this._requestInsert(EA(n))];
	            throw gA.collectionKeyNotGiven;

	          case 3:
	            return e.sent(), [4, this._transaction.commit()];

	          case 4:
	            return e.sent(), this._mutex.unlock(), [2, n];

	          case 5:
	            return t = e.sent(), [4, this._transaction.clear()];

	          case 6:
	            throw e.sent(), this._mutex.unlock(), t;

	          case 7:
	            return [3, 9];

	          case 8:
	            throw gA.collectionNotReady;

	          case 9:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.insertMany = function (u) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r,
	          i,
	          s,
	          a,
	          o = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.isReady ? [4, this._mutex.lock()] : [3, 15];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            if (e.trys.push([2, 12,, 14]), u.some(function (e) {
	              return !o._hasPropertyOfKeyName(e);
	            })) throw gA.collectionKeyNotGiven;
	            e.label = 3;

	          case 3:
	            e.trys.push([3, 8, 9, 10]), t = se(u), n = t.next(), e.label = 4;

	          case 4:
	            return n.done ? [3, 7] : (r = n.value, [4, this._requestInsert(EA(r))]);

	          case 5:
	            e.sent(), e.label = 6;

	          case 6:
	            return n = t.next(), [3, 4];

	          case 7:
	            return [3, 10];

	          case 8:
	            return r = e.sent(), s = {
	              error: r
	            }, [3, 10];

	          case 9:
	            try {
	              n && !n.done && (a = t.return) && a.call(t);
	            } finally {
	              if (s) throw s.error;
	            }

	            return [7];

	          case 10:
	            return [4, this._transaction.commit()];

	          case 11:
	            return e.sent(), this._mutex.unlock(), [2, u];

	          case 12:
	            return i = e.sent(), [4, this._transaction.clear()];

	          case 13:
	            throw e.sent(), this._mutex.unlock(), i;

	          case 14:
	            return [3, 16];

	          case 15:
	            throw gA.collectionNotReady;

	          case 16:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.upsertOne = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.isReady ? [4, this._mutex.lock()] : [3, 8];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            if (e.trys.push([2, 5,, 7]), this._hasPropertyOfKeyName(n)) return [4, this._requestUpsert(EA(n))];
	            throw gA.collectionKeyNotGiven;

	          case 3:
	            return e.sent(), [4, this._transaction.commit()];

	          case 4:
	            return e.sent(), this._mutex.unlock(), [2, n];

	          case 5:
	            return t = e.sent(), [4, this._transaction.clear()];

	          case 6:
	            throw e.sent(), this._mutex.unlock(), t;

	          case 7:
	            return [3, 9];

	          case 8:
	            throw gA.collectionNotReady;

	          case 9:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.upsertMany = function (u) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r,
	          i,
	          s,
	          a,
	          o = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.isReady ? [4, this._mutex.lock()] : [3, 15];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            if (e.trys.push([2, 12,, 14]), u.some(function (e) {
	              return !o._hasPropertyOfKeyName(e);
	            })) throw gA.collectionKeyNotGiven;
	            e.label = 3;

	          case 3:
	            e.trys.push([3, 8, 9, 10]), t = se(u), n = t.next(), e.label = 4;

	          case 4:
	            return n.done ? [3, 7] : (r = n.value, [4, this._requestUpsert(EA(r))]);

	          case 5:
	            e.sent(), e.label = 6;

	          case 6:
	            return n = t.next(), [3, 4];

	          case 7:
	            return [3, 10];

	          case 8:
	            return r = e.sent(), s = {
	              error: r
	            }, [3, 10];

	          case 9:
	            try {
	              n && !n.done && (a = t.return) && a.call(t);
	            } finally {
	              if (s) throw s.error;
	            }

	            return [7];

	          case 10:
	            return [4, this._transaction.commit()];

	          case 11:
	            return e.sent(), this._mutex.unlock(), [2, u];

	          case 12:
	            return i = e.sent(), [4, this._transaction.clear()];

	          case 13:
	            throw e.sent(), this._mutex.unlock(), i;

	          case 14:
	            return [3, 16];

	          case 15:
	            throw gA.collectionNotReady;

	          case 16:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.update = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.isReady ? [4, this._mutex.lock()] : [3, 8];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            if (e.trys.push([2, 5,, 7]), this._hasPropertyOfKeyName(n)) return [4, this._requestUpdate(EA(n))];
	            throw gA.collectionKeyNotGiven;

	          case 3:
	            return e.sent(), [4, this._transaction.commit()];

	          case 4:
	            return e.sent(), this._mutex.unlock(), [2, n];

	          case 5:
	            return t = e.sent(), [4, this._transaction.clear()];

	          case 6:
	            throw e.sent(), this._mutex.unlock(), t;

	          case 7:
	            return [3, 9];

	          case 8:
	            throw gA.collectionNotReady;

	          case 9:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.updateIf = function (h, d) {
	    return re(this, void 0, void 0, function () {
	      var i,
	          s,
	          t,
	          n,
	          r,
	          a,
	          o,
	          u,
	          c,
	          l = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.isReady ? [4, this._mutex.lock()] : [3, 16];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return e.trys.push([2, 13,, 15]), a = h.where, i = void 0 === a ? {} : a, a = h.index, a = void 0 === a ? null : a, r = h.backward, r = void 0 !== r && r, s = [], [4, new UA({
	              condition: i,
	              blockManager: this._blockManager,
	              backward: r,
	              indexer: this._getIndexerBy(a)
	            }).each(function (r) {
	              return re(l, void 0, void 0, function () {
	                var t, n;
	                return ie(this, function (e) {
	                  if (r.error) throw r.stop(), r.error;

	                  if (r.hasNext) {
	                    if (t = r.nextValue, wA(i, t) && d.set) {
	                      if ("function" != typeof d.set) for (n in d.set) t[n] = d.set[n];else d.set(t);
	                      s.push(t);
	                    }

	                    r.next();
	                  } else r.stop();

	                  return [2];
	                });
	              });
	            })];

	          case 3:
	            e.sent(), e.label = 4;

	          case 4:
	            e.trys.push([4, 9, 10, 11]), t = se(s), n = t.next(), e.label = 5;

	          case 5:
	            return n.done ? [3, 8] : (r = n.value, [4, this._requestUpdate(EA(r))]);

	          case 6:
	            e.sent(), e.label = 7;

	          case 7:
	            return n = t.next(), [3, 5];

	          case 8:
	            return [3, 11];

	          case 9:
	            return a = e.sent(), u = {
	              error: a
	            }, [3, 11];

	          case 10:
	            try {
	              n && !n.done && (c = t.return) && c.call(t);
	            } finally {
	              if (u) throw u.error;
	            }

	            return [7];

	          case 11:
	            return [4, this._transaction.commit()];

	          case 12:
	            return e.sent(), this._mutex.unlock(), [2, s];

	          case 13:
	            return o = e.sent(), [4, this._transaction.clear()];

	          case 14:
	            throw e.sent(), this._mutex.unlock(), o;

	          case 15:
	            return [3, 17];

	          case 16:
	            throw this._transaction.clear(), gA.collectionNotReady;

	          case 17:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.remove = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.isReady ? [4, this._mutex.lock()] : [3, 8];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return e.trys.push([2, 5,, 7]), [4, this._requestRemove(n)];

	          case 3:
	            return e.sent(), [4, this._transaction.commit()];

	          case 4:
	            return e.sent(), this._mutex.unlock(), [3, 7];

	          case 5:
	            return t = e.sent(), [4, this._transaction.clear()];

	          case 6:
	            throw e.sent(), this._mutex.unlock(), t;

	          case 7:
	            return [3, 9];

	          case 8:
	            throw gA.collectionNotReady;

	          case 9:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.removeIf = function (h) {
	    return re(this, void 0, void 0, function () {
	      var r,
	          i,
	          t,
	          n,
	          s,
	          a,
	          o,
	          u,
	          c,
	          l = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.isReady ? [4, this._mutex.lock()] : [3, 15];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return e.trys.push([2, 13,, 14]), a = h.where, r = void 0 === a ? {} : a, a = h.index, a = void 0 === a ? null : a, s = h.backward, s = void 0 !== s && s, i = [], [4, new UA({
	              condition: r,
	              blockManager: this._blockManager,
	              backward: s,
	              indexer: this._getIndexerBy(a)
	            }).each(function (n) {
	              return re(l, void 0, void 0, function () {
	                var t;
	                return ie(this, function (e) {
	                  if (n.error) throw n.stop(), n.error;
	                  return n.hasNext ? (t = n.nextValue, wA(r, t) && (t = t[this.keyName], i.push(t)), n.next()) : n.stop(), [2];
	                });
	              });
	            })];

	          case 3:
	            e.sent(), e.label = 4;

	          case 4:
	            e.trys.push([4, 9, 10, 11]), t = se(i), n = t.next(), e.label = 5;

	          case 5:
	            return n.done ? [3, 8] : (s = n.value, [4, this._requestRemove(s)]);

	          case 6:
	            e.sent(), e.label = 7;

	          case 7:
	            return n = t.next(), [3, 5];

	          case 8:
	            return [3, 11];

	          case 9:
	            return a = e.sent(), u = {
	              error: a
	            }, [3, 11];

	          case 10:
	            try {
	              n && !n.done && (c = t.return) && c.call(t);
	            } finally {
	              if (u) throw u.error;
	            }

	            return [7];

	          case 11:
	            return [4, this._transaction.commit()];

	          case 12:
	            return e.sent(), this._mutex.unlock(), [2, i];

	          case 13:
	            throw o = e.sent(), this._mutex.unlock(), o;

	          case 14:
	            return [3, 16];

	          case 15:
	            throw this._transaction.clear(), gA.collectionNotReady;

	          case 16:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.isReady ? [4, this._mutex.lock()] : [3, 8];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return e.trys.push([2, 5,, 7]), [4, this._requestClear()];

	          case 3:
	            return e.sent(), [4, this._transaction.commit()];

	          case 4:
	            return e.sent(), this._mutex.unlock(), [3, 7];

	          case 5:
	            return t = e.sent(), [4, this._transaction.clear()];

	          case 6:
	            throw e.sent(), this._mutex.unlock(), t;

	          case 7:
	            return [3, 9];

	          case 8:
	            throw gA.collectionNotReady;

	          case 9:
	            return [2];
	        }
	      });
	    });
	  }, TO.prototype.getBlob = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._blobContainer.get(t)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, TO.prototype.saveBlob = function (t, n) {
	    return void 0 === n && (n = null), re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._blobContainer.save(t, n)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, TO.prototype.removeBlob = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._blobContainer.remove(t)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, TO.prototype.removeAllBlobs = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._blobContainer.clear()];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, TO),
	      pO = {},
	      vO = (Object.defineProperty(wO.prototype, "rawData", {
	    get: function () {
	      return pO[this.dbname];
	    },
	    set: function (e) {
	      pO[this.dbname] = e;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), wO.prototype.observe = function (t, e, n) {
	    var r = this;
	    this.observer[t] = {}, e.forEach(function (e) {
	      return r.observer[t][e] = n;
	    });
	  }, wO.prototype.init = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            this.dbname = n, pO[this.dbname] = {}, e.label = 1;

	          case 1:
	            return e.trys.push([1,, 3, 5]), [4, this.get(fy.key)];

	          case 2:
	            if ((t = e.sent()) && JSON.stringify(t) !== JSON.stringify(fy.value)) throw gA.storeEncryptionInvalid;
	            return [3, 5];

	          case 3:
	            return [4, this.set(fy)];

	          case 4:
	            return e.sent(), [7];

	          case 5:
	            return [2];
	        }
	      });
	    });
	  }, wO.prototype.getAllKeys = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, Object.keys(pO[this.dbname]).filter(function (e) {
	          return e !== fy.key;
	        })];
	      });
	    });
	  }, wO.prototype.get = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, IA(this.delay)];

	          case 1:
	            if (e.sent(), t = this.observer[n], t = t && t.get ? t.get(n) : null) throw t;
	            return [2, pO[this.dbname][n] ? this._encryption.decrypt(pO[this.dbname][n]) : null];
	        }
	      });
	    });
	  }, wO.prototype.set = function (i) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, IA(this.delay)];

	          case 1:
	            if (e.sent(), t = i.key, r = i.value, n = this.observer[t], n = n && n.set ? n.set(t) : null) throw n;
	            if (n = this._encryption.encrypt(r), r = JSON.stringify(n), t === fy.key || r.length < this.itemSizeLimit) return pO[this.dbname][t] = n, [2, pO[this.dbname][t]];
	            throw gA.storeItemSizeExceeded;
	        }
	      });
	    });
	  }, wO.prototype.setMany = function (t) {
	    return re(this, void 0, void 0, function () {
	      var i,
	          s = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, IA(this.delay)];

	          case 1:
	            return e.sent(), i = [], t.forEach(function (e) {
	              var t,
	                  n = e.key,
	                  e = e.value,
	                  r = s.observer[n];
	              r && r.set && r.set(n) ? i.push(gA.collectionWriteFailed) : (r = s._encryption.encrypt(e), t = JSON.stringify(r), n === fy.key || t.length < s.itemSizeLimit ? (pO[s.dbname][n] = r, i.push(e)) : i.push(gA.storeItemSizeExceeded));
	            }), [2, i];
	        }
	      });
	    });
	  }, wO.prototype.remove = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, IA(this.delay)];

	          case 1:
	            if (e.sent(), t = this.observer[n], t = t && t.remove ? t.remove(n) : null) throw t;
	            return pO[this.dbname][n] && delete pO[this.dbname][n], [2, n];
	        }
	      });
	    });
	  }, wO.prototype.removeMany = function (u) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, IA(this.delay)];

	          case 1:
	            e.sent();

	            try {
	              for (t = se(u), n = t.next(); !n.done; n = t.next()) {
	                if (r = n.value, i = this.observer[r], s = i && i.remove ? i.remove(r) : null) throw s;
	                pO[this.dbname][r] && delete pO[this.dbname][r];
	              }
	            } catch (e) {
	              a = {
	                error: e
	              };
	            } finally {
	              try {
	                n && !n.done && (o = t.return) && o.call(t);
	              } finally {
	                if (a) throw a.error;
	              }
	            }

	            return [2, u];
	        }
	      });
	    });
	  }, wO.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, IA(this.delay)];

	          case 1:
	            return e.sent(), pO[this.dbname] = {}, [2];
	        }
	      });
	    });
	  }, wO),
	      _O = (IO.prototype.init = function (i) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n,
	          r = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.dbname = i, [4, new Promise(function (e, t) {
	              var n;
	              r._window && $A ? sO ? ((n = r._indexedDB.open("_testMozilla")).onerror = function () {
	                return t(gA.storeNotAvailableInPrivateBrowsing);
	              }, n.onsuccess = function () {
	                return e();
	              }) : cO ? r._window.indexedDB || !r._window.PointerEvent && !r._window.MSPointerEvent || t(gA.storeNotAvailableInPrivateBrowsing) : e() : t(gA.storeNotAvailable);
	            })];

	          case 1:
	            return e.sent(), t = this, [4, new Promise(function (t, n) {
	              var e = r._indexedDB.open(i);

	              e.addEventListener("upgradeneeded", function (e) {
	                e.target.result.createObjectStore("NestDBStore", {
	                  keyPath: "key"
	                });
	              }), e.addEventListener("success", function (e) {
	                return t(e.target.result);
	              }), e.addEventListener("error", function (e) {
	                return n(e.target.error);
	              });
	            })];

	          case 2:
	            t._database = e.sent(), e.label = 3;

	          case 3:
	            return e.trys.push([3,, 5, 7]), [4, this.get(fy.key)];

	          case 4:
	            if ((n = e.sent()) && JSON.stringify(n) !== JSON.stringify(fy.value)) throw gA.storeEncryptionInvalid;
	            return [3, 7];

	          case 5:
	            return [4, this.set(fy)];

	          case 6:
	            return e.sent(), [7];

	          case 7:
	            return [2];
	        }
	      });
	    });
	  }, IO.prototype.getAllKeys = function () {
	    return re(this, void 0, void 0, function () {
	      var r = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, new Promise(function (t, n) {
	              var e = r._database.transaction("NestDBStore", "readonly").objectStore("NestDBStore").getAllKeys();

	              e.addEventListener("success", function (e) {
	                t(e.target.result.filter(function (e) {
	                  return e !== fy.key;
	                }));
	              }), e.addEventListener("error", function (e) {
	                return n(e.target.error);
	              });
	            })];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, IO.prototype.get = function (i) {
	    return re(this, void 0, void 0, function () {
	      var r = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, new Promise(function (t, n) {
	              var e = r._database.transaction("NestDBStore", "readonly").objectStore("NestDBStore").get(i);

	              e.addEventListener("success", function (e) {
	                return t(e.target.result ? r._encryption.decrypt(e.target.result.value) : null);
	              }), e.addEventListener("error", function (e) {
	                return n(e.target.error);
	              });
	            })];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, IO.prototype.set = function (t) {
	    return re(this, void 0, void 0, function () {
	      var r,
	          i,
	          s = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return r = t.key, i = t.value, [4, new Promise(function (t, n) {
	              var e = s._database.transaction("NestDBStore", "readwrite").objectStore("NestDBStore").put({
	                key: r,
	                value: s._encryption.encrypt(i)
	              });

	              e.addEventListener("success", function (e) {
	                t(e.target.result);
	              }), e.addEventListener("error", function (e) {
	                return n(e.target.error);
	              });
	            })];

	          case 1:
	            return e.sent(), [2, i];
	        }
	      });
	    });
	  }, IO.prototype.setMany = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t,
	          i,
	          s = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = [], i = this._database.transaction("NestDBStore", "readwrite").objectStore("NestDBStore"), n.forEach(function (e) {
	              var n = e.key,
	                  r = e.value;
	              t.push(new Promise(function (t) {
	                var e = i.put({
	                  key: n,
	                  value: s._encryption.encrypt(r)
	                });
	                e.addEventListener("success", function (e) {
	                  t(e.target.result);
	                }), e.addEventListener("error", function () {
	                  t(gA.collectionWriteFailed);
	                });
	              }));
	            }), [4, Promise.all(t)];

	          case 1:
	            return e.sent(), [2, n.map(function (e) {
	              return e.value;
	            })];
	        }
	      });
	    });
	  }, IO.prototype.remove = function (i) {
	    return re(this, void 0, void 0, function () {
	      var r = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, new Promise(function (e, t) {
	              var n = r._database.transaction("NestDBStore", "readwrite").objectStore("NestDBStore").delete(i);

	              n.addEventListener("success", function () {
	                return e(i);
	              }), n.addEventListener("error", function (e) {
	                return t(e.target.error);
	              });
	            })];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, IO.prototype.removeMany = function (t) {
	    return re(this, void 0, void 0, function () {
	      var i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return i = this._database.transaction("NestDBStore", "readwrite").objectStore("NestDBStore"), [4, Promise.all(t.map(function (r) {
	              return new Promise(function (e, t) {
	                var n = i.delete(r);
	                n.addEventListener("success", function () {
	                  return e(r);
	                }), n.addEventListener("error", function (e) {
	                  return t(e.target.error);
	                });
	              });
	            }))];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, IO.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      var r = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, new Promise(function (e, t) {
	              var n = r._database.transaction("NestDBStore", "readwrite").objectStore("NestDBStore").clear();

	              n.addEventListener("success", function () {
	                return e();
	              }), n.addEventListener("error", function (e) {
	                return t(e.target.error);
	              });
	            })];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, IO),
	      yO = (bO.prototype._isBelonging = function (e) {
	    return e.startsWith("".concat(this.dbname, "/"));
	  }, bO.prototype._getActualKey = function (e) {
	    return "".concat(this.dbname, "/").concat(e);
	  }, bO.prototype.init = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            this.dbname = n, e.label = 1;

	          case 1:
	            return e.trys.push([1,, 3, 5]), [4, this.get(fy.key)];

	          case 2:
	            if ((t = e.sent()) && JSON.stringify(t) !== JSON.stringify(fy.value)) throw gA.storeEncryptionInvalid;
	            return [3, 5];

	          case 3:
	            return [4, this.set(fy)];

	          case 4:
	            return e.sent(), [7];

	          case 5:
	            return [2];
	        }
	      });
	    });
	  }, bO.prototype.getAllKeys = function () {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = this._getActualKey(fy.key), [4, this._asyncStorage.getAllKeys()];

	          case 1:
	            return [2, e.sent().filter(function (e) {
	              return n._isBelonging(e) && e !== t;
	            }).map(function (e) {
	              return e.substring("".concat(n.dbname, "/").length);
	            })];
	        }
	      });
	    });
	  }, bO.prototype.get = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._asyncStorage.getItem(this._getActualKey(n))];

	          case 1:
	            return [2, (t = e.sent()) ? this._encryption.decrypt(JSON.parse(t)) : null];
	        }
	      });
	    });
	  }, bO.prototype.set = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = r.key, n = r.value, n = JSON.stringify(this._encryption.encrypt(n)), t === fy.key || n.length < this.itemSizeLimit ? [4, this._asyncStorage.setItem(this._getActualKey(t), n)] : [3, 2];

	          case 1:
	            return e.sent(), [2, JSON.parse(n)];

	          case 2:
	            throw gA.storeItemSizeExceeded;
	        }
	      });
	    });
	  }, bO.prototype.setMany = function (h) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s, a, o, u, c, l;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            t = [], n = [];

	            try {
	              for (r = se(h), i = r.next(); !i.done; i = r.next()) {
	                s = i.value;

	                try {
	                  a = s.key, o = s.value, u = JSON.stringify(this._encryption.encrypt(o)), a === fy.key || u.length < this.itemSizeLimit ? (n.push([this._getActualKey(a), u]), t.push(o)) : t.push(gA.storeItemSizeExceeded);
	                } catch (e) {
	                  t.push(gA.collectionWriteFailed);
	                }
	              }
	            } catch (e) {
	              c = {
	                error: e
	              };
	            } finally {
	              try {
	                i && !i.done && (l = r.return) && l.call(r);
	              } finally {
	                if (c) throw c.error;
	              }
	            }

	            e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), [4, this._asyncStorage.multiSet(n)];

	          case 2:
	            return e.sent(), [3, 4];

	          case 3:
	            return e.sent(), [2, new Array(t.length).fill(gA.collectionWriteFailed)];

	          case 4:
	            return [2, t];
	        }
	      });
	    });
	  }, bO.prototype.remove = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._asyncStorage.removeItem(this._getActualKey(t))];

	          case 1:
	            return e.sent(), [2, t];
	        }
	      });
	    });
	  }, bO.prototype.removeMany = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._asyncStorage.multiRemove(n.map(function (e) {
	              return t._getActualKey(e);
	            }))];

	          case 1:
	            return e.sent(), [2, n];
	        }
	      });
	    });
	  }, bO.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this.getAllKeys()];

	          case 1:
	            return t = e.sent(), [4, this.removeMany(t)];

	          case 2:
	            return e.sent(), [4, this.remove(fy.key)];

	          case 3:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, bO),
	      mO = !0,
	      gO = (EO.off = function () {
	    mO = !1;
	  }, EO.log = function () {
	    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

	    mO && console.log.apply(console, J_(["".concat("[NESTDB]", "[LOG]")], X_(e), !1));
	  }, EO.warning = function () {
	    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

	    mO && console.warn.apply(console, J_(["".concat("[NESTDB]", "[WARNING]")], X_(e), !1));
	  }, EO.error = function () {
	    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

	    mO && console.error.apply(console, J_(["".concat("[NESTDB]", "[ERROR]")], X_(e), !1));
	  }, EO);

	  function EO() {}

	  function bO(e) {
	    var t = e.AsyncStorage,
	        e = e.encryption,
	        e = void 0 === e ? py : e;
	    this.itemSizeLimit = 6291456, this._asyncStorage = t, this._encryption = e;
	  }

	  function IO(e) {
	    void 0 === e && (e = {}), this.itemSizeLimit = 104857600;
	    e = e.encryption, e = void 0 === e ? py : e;
	    this._window = "undefined" != typeof window ? window : null, this._indexedDB = this._window ? this._window.indexedDB || this._window.mozIndexedDB || this._window.webkitIndexedDB || this._window.msIndexedDB : null, this._encryption = e;
	  }

	  function wO(e) {
	    var t = (e = void 0 === e ? {} : e).itemSizeLimit,
	        t = void 0 === t ? 4194304 : t,
	        n = e.delay,
	        n = void 0 === n ? 1 : n,
	        e = e.encryption,
	        e = void 0 === e ? py : e;
	    this._encryption = e, this.itemSizeLimit = t, this.delay = n, this.observer = {};
	  }

	  function TO(e) {
	    var t = e.dbname,
	        n = e.collectionName,
	        r = e.keyName,
	        i = e.keyHash,
	        s = e.indexes,
	        e = e.store,
	        a = this;
	    this._state = yA.INIT, this._metadata = null, this._indexers = [], this.dbname = t, this.name = n, this.keyName = r, this.indexes = J_([[r]], X_(s.filter(function (e) {
	      return ZA.createKey(e) !== a.keyName;
	    })), !1), this._keyHash = i, this._store = e, this._mutex = new dO("".concat(jA(t, n), ".lock")), this._blobContainer = new HA({
	      dbname: t,
	      collectionName: n,
	      store: e
	    }), this._transaction = new YA({
	      dbname: t,
	      collectionName: n,
	      store: e
	    });
	  }

	  function SO(e, t) {
	    void 0 === t && (t = {});
	    var f = this;
	    return this._state = oO.PROCESSING, this._hostId = null, this._queue = [], this._currentItem = null, this._activationTimeout = null, this._activationQueue = [], hO[e] && !t.forceCreate || (this.nodeId = aO(), this.key = e, $A && (!t.startAsInvisible && "visible" === document.visibilityState ? this.claimHost() : this.registerNode(), document.addEventListener("visibilitychange", function () {
	      "visible" === document.visibilityState && f.claimHost();
	    }), window.addEventListener("message", function (e) {
	      var t,
	          n,
	          r = e.data,
	          i = r.nodeId,
	          s = r.requestId,
	          a = r.key,
	          o = r.op,
	          u = r.data;
	      if (i !== f.nodeId && a === f.key) switch (o) {
	        case uO.NEWNODE:
	          f._sendSync();

	          break;

	        case uO.CLAIM_HOST:
	          f._sendSync(), f._hostId = i;
	          break;

	        case uO.SYNC_HOST:
	          if (!f.isInSync) {
	            f._activationTimeout && clearTimeout(f._activationTimeout);
	            var c = u.currentItemRequestId,
	                l = u.queue;

	            try {
	              for (var h = se(l), d = h.next(); !d.done; d = h.next()) !function (t) {
	                f._queue.findIndex(function (e) {
	                  return e.requestId === t.requestId;
	                }) < 0 && f._requestLock({
	                  nodeId: t.nodeId,
	                  requestId: t.requestId,
	                  key: f.key,
	                  op: uO.REQUEST_LOCK,
	                  ts: t.ts
	                });
	              }(d.value);
	            } catch (e) {
	              t = {
	                error: e
	              };
	            } finally {
	              try {
	                d && !d.done && (n = h.return) && n.call(h);
	              } finally {
	                if (t) throw t.error;
	              }
	            }

	            f._currentItem = f._queue.find(function (e) {
	              return e.requestId === c;
	            }), f._completeSync();
	          }

	          break;

	        case uO.REMOVENODE:
	          f._queue = f._queue.filter(function (e) {
	            return e.nodeId !== r.nodeId;
	          }), f._currentItem && f._currentItem.nodeId === r.nodeId && (f._currentItem = null, f._acquire(f._queue[0]));
	          break;

	        case uO.REQUEST_LOCK:
	          f._requestLock(r);

	          break;

	        case uO.ACQUIRE_LOCK:
	          l = f._queue.find(function (e) {
	            return e.requestId === s;
	          });

	          f._acquire(l);

	          break;

	        case uO.RELEASE_LOCK:
	          f._release(s);

	      }
	    }), window.addEventListener("beforeunload", function () {
	      f._send(uO.REMOVENODE);
	    })), hO[e] = this), hO[e];
	  }

	  (sa = lO = lO || {}).INIT = "INIT", sa.OPENING = "OPENING", sa.OPENED = "OPENED", sa.CLOSED = "CLOSED";
	  Object.defineProperty(OO.prototype, "version", {
	    get: function () {
	      return this._version;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(OO.prototype, "state", {
	    get: function () {
	      return this._state;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), OO.prototype.commitSchema = function (n) {
	    return re(this, void 0, void 0, function () {
	      var t = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._state !== lO.OPENING ? [3, 2] : [4, Promise.all(n.map(function (i) {
	              return re(t, void 0, void 0, function () {
	                var t, n, r;
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      return t = i.collectionName, n = i.keyName, r = i.index, r = void 0 === r ? [] : r, this._collections.has(t) || this._collections.set(t, new fO({
	                        dbname: this.name,
	                        collectionName: t,
	                        keyName: n,
	                        keyHash: i.keyHash || null,
	                        indexes: r,
	                        store: this._store
	                      })), [4, this._collections.get(t).init()];

	                    case 1:
	                      return e.sent(), [2];
	                  }
	                });
	              });
	            }))];

	          case 1:
	            return e.sent(), [3, 3];

	          case 2:
	            throw gA.databaseSchemaNotOnUpgrade;

	          case 3:
	            return [2];
	        }
	      });
	    });
	  }, OO.prototype.open = function () {
	    var i;
	    return re(this, void 0, void 0, function () {
	      var o,
	          n,
	          u,
	          r,
	          c = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._globalMutex.lock()];

	          case 1:
	            if (e.sent(), this._state === lO.OPENED) return [3, 15];
	            this._state = lO.OPENING, e.label = 2;

	          case 2:
	            return e.trys.push([2, 5,, 15]), [4, this._store.init(this.name)];

	          case 3:
	            return e.sent(), t = this.name, o = "".concat(FA(t), ".metadata"), n = {
	              version: 0,
	              collectionNames: []
	            }, [4, this._store.get(o)];

	          case 4:
	            return u = null != (i = e.sent()) ? i : n, [2, new Promise(function (r, i) {
	              function s(r) {
	                u.version < c._version ? c._event.upgrade(u.version, function (n) {
	                  return re(c, void 0, void 0, function () {
	                    var t;
	                    return ie(this, function (e) {
	                      switch (e.label) {
	                        case 0:
	                          if (n) return [3, 5];
	                          u.version++, u.collectionNames = Array.from(this._collections.keys()), e.label = 1;

	                        case 1:
	                          return e.trys.push([1, 3,, 4]), [4, this._store.set({
	                            key: o,
	                            value: u,
	                            generation: this._version
	                          })];

	                        case 2:
	                          return e.sent(), r({
	                            continued: !0
	                          }), [3, 4];

	                        case 3:
	                          return t = e.sent(), r({
	                            continued: !1,
	                            err: t
	                          }), [3, 4];

	                        case 4:
	                          return [3, 6];

	                        case 5:
	                          r({
	                            continued: !1,
	                            err: n
	                          }), e.label = 6;

	                        case 6:
	                          return [2];
	                      }
	                    });
	                  });
	                }) : r({
	                  continued: !1
	                });
	              }

	              function a(e) {
	                var t,
	                    n = e.continued,
	                    e = void 0 === (e = e.err) ? null : e;
	                void 0 !== n && n ? setTimeout(function () {
	                  return s(a);
	                }, 10) : e ? (gO.error(e.message), c._globalMutex.unlock(), c._event.error(e), i(e)) : (t = [], u.collectionNames.forEach(function (n) {
	                  c._collections.has(n) || t.push(re(c, void 0, void 0, function () {
	                    var t;
	                    return ie(this, function (e) {
	                      switch (e.label) {
	                        case 0:
	                          return [4, fO.metadataOf(this.name, n, this._store)];

	                        case 1:
	                          return (t = e.sent()) ? (t = new fO({
	                            dbname: this.name,
	                            collectionName: n,
	                            keyName: t.keyName,
	                            indexes: t.indexes,
	                            store: this._store
	                          }), this._collections.set(n, t), [4, t.init()]) : [3, 3];

	                        case 2:
	                          e.sent(), e.label = 3;

	                        case 3:
	                          return [2];
	                      }
	                    });
	                  }));
	                }), Promise.all(t).then(function () {
	                  c._state = lO.OPENED, c._globalMutex.unlock(), c._event.success(), r();
	                }).catch(function (e) {
	                  gO.error(e.message), c._globalMutex.unlock(), c._event.error(e), i(e);
	                }));
	              }

	              s(a);
	            })];

	          case 5:
	            switch ((r = e.sent()).code) {
	              case E1.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:
	                return [3, 6];

	              case E1.STORE_NOT_AVAILABLE:
	                return [3, 8];

	              case E1.STORE_ENCRYPTION_INVALID:
	                return [3, 10];
	            }

	            return [3, 13];

	          case 6:
	            return gO.warning("Access to the local storage is not allowed in private browsing. Switched to MemoryStore automatically."), this._store = new vO({}), this._globalMutex.unlock(), this._event.error(r), [4, this.open()];

	          case 7:
	            return e.sent(), [3, 14];

	          case 8:
	            return gO.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."), this._store = new vO({}), this._globalMutex.unlock(), this._event.error(r), [4, this.open()];

	          case 9:
	            return e.sent(), [3, 14];

	          case 10:
	            return gO.warning("Encryption algorithm has changed. Stored data would be cleared."), [4, this._store.clear()];

	          case 11:
	            return e.sent(), this._globalMutex.unlock(), this._event.error(r), [4, this.open()];

	          case 12:
	            return e.sent(), [3, 14];

	          case 13:
	            throw gO.error(r.message), this._globalMutex.unlock(), this._event.error(r), r;

	          case 14:
	            return [3, 15];

	          case 15:
	            return [2];
	        }

	        var t;
	      });
	    });
	  }, OO.prototype.close = function () {
	    this._collections.forEach(function (e) {
	      return e.close();
	    }), this._state = lO.CLOSED;
	  }, OO.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, Promise.all(Array.from(this._collections.values()).map(function (e) {
	              return e.clear();
	            }))];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, OO.prototype.reset = function () {
	    return re(this, void 0, void 0, function () {
	      var t,
	          n = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.close(), (t = WA.get(this.name)) && t.clearByCondition(function (e) {
	              return e.key.startsWith(FA(n.name));
	            }), [4, this._store.clear()];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, OO.prototype.on = function (e, t) {
	    this._event[e] = t;
	  }, OO.prototype.off = function (e) {
	    "function" == typeof this._event[e] && (this._event[e] = "upgrade" === e ? kA : TA);
	  }, OO.prototype.collection = function (e) {
	    return this._collections.get(e) || null;
	  };
	  var CO,
	      kO = OO,
	      NO = null,
	      AO = (R.init = function (e) {
	    var t,
	        n = e.appId,
	        r = e.appVersion,
	        r = void 0 === r ? null : r,
	        i = e.modules,
	        i = void 0 === i ? [] : i,
	        s = e.options,
	        s = void 0 === s ? new dy() : s,
	        a = e.debugMode,
	        a = void 0 !== a && a,
	        o = e.customApiHost,
	        u = e.customWebSocketHost,
	        c = e.newInstance,
	        l = e.logLevel,
	        h = e.localCacheEnabled,
	        h = void 0 !== h && h,
	        d = e.localCacheEncryption,
	        e = e.useAsyncStorageStore,
	        e = void 0 === e ? null : e;
	    return !NO || void 0 !== c && c ? (c = "su-".concat(sy()), t = new vO({
	      encryption: d = null != d ? d : {
	        encrypt: function (e) {
	          return e;
	        },
	        decrypt: function (e) {
	          return e;
	        }
	      }
	    }), a || (t = e ? new yO({
	      AsyncStorage: e,
	      encryption: d
	    }) : new _O({
	      encryption: d
	    })), new N(c, {
	      appId: n,
	      appVersion: r,
	      options: s,
	      apiHost: null != o ? o : "https://api-".concat(n, ".sendbird.com"),
	      websocketHost: null != u ? u : "wss://ws-".concat(n, ".sendbird.com"),
	      store: t,
	      encryption: d,
	      logLevel: l,
	      localCacheEnabled: h,
	      debugMode: a
	    }), e = new R(c, s, J_(J_([], X_(i), !1), [new Yb()], !1)), NO = NO || e, e) : NO;
	  }, Object.defineProperty(R, "instance", {
	    get: function () {
	      return NO;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R, "version", {
	    get: function () {
	      return "4.0.6";
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "appId", {
	    get: function () {
	      return N.of(this._iid).sdkState.appId;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "appInfo", {
	    get: function () {
	      return N.of(this._iid).appInfo;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "appVersion", {
	    get: function () {
	      var e;
	      return null != (e = N.of(this._iid).sdkState.appVersion) ? e : "";
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "debugMode", {
	    get: function () {
	      return N.of(this._iid).debugMode;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "logLevel", {
	    get: function () {
	      return N.of(this._iid).logger.level;
	    },
	    set: function (e) {
	      N.of(this._iid).logger.level = e;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "isCacheEnabled", {
	    get: function () {
	      return N.of(this._iid).cacheContext.localCacheEnabled;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "ekey", {
	    get: function () {
	      return vm(this._iid);
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "currentUser", {
	    get: function () {
	      var e;
	      return null != (e = N.of(this._iid).sessionManager.currentUser) ? e : null;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "connectionState", {
	    get: function () {
	      var e = N.of(this._iid).connectionManager;
	      return e.isConnected ? Hy.OPEN : e.isConnecting ? Hy.CONNECTING : Hy.CLOSED;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "lastConnectedAt", {
	    get: function () {
	      var e = N.of(this._iid),
	          t = e.connectedAt;
	      return e.connectionManager.isConnected ? t : 0;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "fcmPushToken", {
	    get: function () {
	      return this._fcmPushToken;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty(R.prototype, "apnsPushToken", {
	    get: function () {
	      return this._apnsPushToken;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), R.prototype._getPreferenceCacheKey = function (e) {
	    return "sendbird@".concat(this.appId, "/").concat(e, ".pref");
	  }, R.prototype._getUserProfileCacheKey = function (e) {
	    return "sendbird@".concat(this.appId, "/").concat(e, ".profile");
	  }, R.prototype.getMemoryStoreForDebugging = function () {
	    var e = N.of(this._iid),
	        t = e.debugMode,
	        e = e.cacheContext;
	    if (t) return e.store instanceof vO ? e.store : null;
	    throw p.debugModeRequired;
	  }, R.prototype.addExtension = function (e, t) {
	    var n = N.of(this._iid).sdkState;
	    -1 < ["sb_uikit", "sb_syncmanager"].indexOf(e) && (n.extensions[e] = t);
	  }, R.prototype.initializeCache = function (o) {
	    return re(this, void 0, void 0, function () {
	      var t, r, i, s, a;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return i = N.of(this._iid), t = i.sdkState, r = i.cacheContext, s = i.connectionManager, i = i.dispatcher, t.userId && t.userId === o ? [3, 6] : [4, s.logout()];

	          case 1:
	            return e.sent(), t.userId = o, r.localCacheEnabled ? (s = "sendbird@".concat(t.appId, "/").concat(o, ".db"), r.nestdb && r.nestdb.state !== lO.CLOSED && r.nestdb.name === s ? [3, 3] : ((a = r.nestdb = new kO({
	              name: "sendbird@".concat(t.appId, "/").concat(o, ".db"),
	              version: 1,
	              store: r.store
	            })).on("upgrade", (n = a, function (e, t) {
	              0 === e ? n.commitSchema([{
	                collectionName: "GroupChannel",
	                keyName: "url",
	                index: [aC(sC.LATEST_LAST_MESSAGE), aC(sC.CHRONOLOGICAL), aC(sC.CHANNEL_NAME_ALPHABETICAL)]
	              }, {
	                collectionName: "Message",
	                keyName: "messageId",
	                index: [lC(oC.CHANNEL_LATEST), lC(oC.NEWEST_CHILD_MESSAGE)]
	              }, {
	                collectionName: "UnsentMessage",
	                keyName: "reqId",
	                index: [lC(oC.CHANNEL_LATEST), lC(oC.NEWEST_CHILD_MESSAGE)]
	              }, {
	                collectionName: "Poll",
	                keyName: "pollId"
	              }]).then(function () {
	                return t();
	              }).catch(function (e) {
	                return t(e);
	              }) : t();
	            })), [4, a.open()])) : [3, 6];

	          case 2:
	            e.sent(), i.dispatch(new MC(this._iid, {
	              userId: o
	            })), e.label = 3;

	          case 3:
	            return [4, r.preference.init(this._getPreferenceCacheKey(o))];

	          case 4:
	            return e.sent(), [4, r.preference.get(this._getUserProfileCacheKey(o))];

	          case 5:
	            (a = e.sent()) && new dE(this._iid, a).apply(), e.label = 6;

	          case 6:
	            return [2];
	        }

	        var n;
	      });
	    });
	  }, R.prototype.clearCachedData = function () {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return (t = N.of(this._iid).cacheContext).localCacheEnabled ? (t.nestdb && t.nestdb.clear(), [4, t.preference.clear()]) : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, R.prototype.clearCachedMessages = function (t) {
	    return re(this, void 0, void 0, function () {
	      var n,
	          r,
	          i = this;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(hy("string", t)).throw(p.invalidParameters), n = mC.of(this._iid), r = _C.of(this._iid), n && r ? [4, Promise.all(t.map(function (t) {
	              return re(i, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  switch (e.label) {
	                    case 0:
	                      return [4, n.removeMessagesOfChannel(t)];

	                    case 1:
	                      return e.sent(), [4, r.removeMessagesOfChannel(t)];

	                    case 2:
	                      return e.sent(), [2];
	                  }
	                });
	              });
	            }))] : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, R.prototype.connect = function (a, o) {
	    return void 0 === o && (o = null), re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            i = N.of(this._iid), t = i.sdkState, n = i.cacheContext, r = i.connectionManager, i = i.statLogCollector, e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), [4, this.initializeCache(a)];

	          case 2:
	            return e.sent(), [3, 4];

	          case 3:
	            return e.sent(), s = N.of(this._iid).logger, n.localCacheEnabled = !1, s.warn("Cache initialization failed - cache is not available."), [3, 4];

	          case 4:
	            return [4, i.init("sendbird@".concat(t.appId, "/").concat(a, ".statlog"))];

	          case 5:
	            return e.sent(), [4, r.connect(o)];

	          case 6:
	            return e.sent(), this._appStateChangeDetector.start(), t.appState = "foreground", [4, null == (s = bC.of(this._iid)) ? void 0 : s.processNonAutoResendRegisteredPendingMessages()];

	          case 7:
	            return e.sent(), this._onlineDetector.start(), [2, this.currentUser];
	        }
	      });
	    });
	  }, R.prototype.reconnect = function () {
	    var e = N.of(this._iid),
	        t = e.connectionManager,
	        n = e.sdkState,
	        e = e.sessionManager.auth.hasSession;
	    return e && t.resetAndReconnect().then(function () {
	      n.appState = "foreground";
	    }).catch(function () {}), e;
	  }, R.prototype.disconnect = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return r = N.of(this._iid), t = r.connectionManager, n = r.cacheContext, r = r.requestQueue, this._appStateChangeDetector.stop(), this._onlineDetector.stop(), r.cancelAll(), [4, t.logout()];

	          case 1:
	            return e.sent(), n.localCacheEnabled ? [4, this.clearCachedData()] : [3, 3];

	          case 2:
	            e.sent(), e.label = 3;

	          case 3:
	            return [2];
	        }
	      });
	    });
	  }, R.prototype.setBackgroundState = function () {
	    var e = N.of(this._iid),
	        t = e.connectionManager,
	        n = e.sdkState,
	        e = e.logger;
	    "foreground" === n.appState && (n.appState = "background", e.debug("going background state"), t.background());
	  }, R.prototype.setForegroundState = function () {
	    var e = N.of(this._iid),
	        t = e.connectionManager,
	        n = e.sdkState,
	        e = e.logger;
	    "background" === n.appState && (n.appState = "foreground", e.debug("going foreground state"), t.resetAndReconnect());
	  }, R.prototype.setSessionHandler = function (e) {
	    C(!1).throw(p.invalidParameters), N.of(this._iid).sessionManager.handler = e;
	  }, R.prototype.addUserEventHandler = function (e, t) {
	    C(c("string", e) && !1).throw(p.invalidParameters), N.of(this._iid).userEventHandlers.set(e, t);
	  }, R.prototype.removeUserEventHandler = function (e) {
	    N.of(this._iid).userEventHandlers.delete(e);
	  }, R.prototype.removeAllUserEventHandler = function () {
	    N.of(this._iid).userEventHandlers.clear();
	  }, R.prototype.addConnectionHandler = function (e, t) {
	    C(c("string", e) && !1).throw(p.invalidParameters), N.of(this._iid).connectionHandlers.set(e, t);
	  }, R.prototype.removeConnectionHandler = function (e) {
	    N.of(this._iid).connectionHandlers.delete(e);
	  }, R.prototype.removeAllConnectionHandler = function () {
	    N.of(this._iid).connectionHandlers.clear();
	  }, R.prototype.createApplicationUserListQuery = function (e) {
	    return new Q1(this._iid, e = void 0 === e ? {} : e);
	  }, R.prototype.createBlockedUserListQuery = function (e) {
	    return new Y1(this._iid, e = void 0 === e ? {} : e);
	  }, R.prototype.createFriendListQuery = function (e) {
	    return new Z1(this._iid, e = void 0 === e ? {} : e);
	  }, R.prototype.createMessageSearchQuery = function (e) {
	    return new Qb(this._iid, e);
	  }, R.prototype.buildUserFromSerializedData = function (e) {
	    e = nE(e);
	    return new k(this._iid, k.payloadify(e));
	  }, R.prototype.updateCurrentUserInfo = function (i) {
	    return void 0 === i && (i = {}), re(this, void 0, void 0, function () {
	      var n, r;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return i = f(f({}, ZC), i), C(ry((t = i).profileImage, !0) && c("string", t.profileUrl, !0) && c("string", t.nickname, !0)).throw(p.invalidParameters), this.currentUser ? (n = N.of(this._iid), r = n.sdkState, n = n.requestQueue, r = new tk(f({
	              userId: r.userId
	            }, i)), [4, n.send(r)]) : [3, 2];

	          case 1:
	            return n = e.sent(), r = n.as(nk).user, this.currentUser && (i.nickname && (this.currentUser.nickname = r.nickname), (i.profileUrl || i.profileImage) && (this.currentUser.plainProfileUrl = r.profileUrl)), [2, r];

	          case 2:
	            throw p.connectionRequired;
	        }

	        var t;
	      });
	    });
	  }, R.prototype.updateCurrentUserInfoWithPreferredLanguages = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(hy("string", r)).throw(p.invalidParameters), this.currentUser ? (t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new tk({
	              userId: n.userId,
	              preferredLanguages: r
	            }), [4, t.send(n)]) : [3, 2];

	          case 1:
	            return t = e.sent(), n = t.as(nk).user, this.currentUser && (this.currentUser.preferredLanguages = n.preferredLanguages), [2, n];

	          case 2:
	            throw p.connectionRequired;
	        }
	      });
	    });
	  }, R.prototype.registerFCMPushTokenForCurrentUser = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (C(c("string", r)).throw(p.invalidParameters), !this.currentUser) return [3, 5];
	            e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new hk({
	              userId: n.userId,
	              token: r
	            }), [4, t.send(n)];

	          case 2:
	            return e.sent(), this._fcmPushToken = "", [2, DS.SUCCESS];

	          case 3:
	            return e.sent(), [2, DS.ERROR];

	          case 4:
	            return [3, 6];

	          case 5:
	            return this._fcmPushToken = r, [2, DS.PENDING];

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, R.prototype.unregisterFCMPushTokenForCurrentUser = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (C(c("string", r)).throw(p.invalidParameters), !this.currentUser) return [3, 5];
	            e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new gk({
	              userId: n.userId,
	              token: r
	            }), [4, t.send(n)];

	          case 2:
	            return e.sent(), this._fcmPushToken = "", [2, DS.SUCCESS];

	          case 3:
	            return e.sent(), [2, DS.ERROR];

	          case 4:
	            return [3, 6];

	          case 5:
	            return this._fcmPushToken = r, [2, DS.PENDING];

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, R.prototype.unregisterFCMPushTokenAllForCurrentUser = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.currentUser ? (t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new kk({
	              userId: n.userId
	            }), [4, t.send(n)]) : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, R.prototype.registerAPNSPushTokenForCurrentUser = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (C(c("string", r)).throw(p.invalidParameters), !this.currentUser) return [3, 5];
	            e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new rk({
	              userId: n.userId,
	              token: r
	            }), [4, t.send(n)];

	          case 2:
	            return e.sent(), this._fcmPushToken = "", [2, DS.SUCCESS];

	          case 3:
	            return e.sent(), [2, DS.ERROR];

	          case 4:
	            return [3, 6];

	          case 5:
	            return this._fcmPushToken = r, [2, DS.PENDING];

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, R.prototype.unregisterAPNSPushTokenForCurrentUser = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            if (C(c("string", r)).throw(p.invalidParameters), !this.currentUser) return [3, 5];
	            e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new vk({
	              userId: n.userId,
	              token: r
	            }), [4, t.send(n)];

	          case 2:
	            return e.sent(), this._fcmPushToken = "", [2, DS.SUCCESS];

	          case 3:
	            return e.sent(), [2, DS.ERROR];

	          case 4:
	            return [3, 6];

	          case 5:
	            return this._fcmPushToken = r, [2, DS.PENDING];

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, R.prototype.unregisterAPNSPushTokenAllForCurrentUser = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this.currentUser ? (t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new wk({
	              userId: n.userId
	            }), [4, t.send(n)]) : [3, 2];

	          case 1:
	            e.sent(), e.label = 2;

	          case 2:
	            return [2];
	        }
	      });
	    });
	  }, R.prototype.getChannelInvitationPreference = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new zk({
	              userId: n.userId
	            }), [4, t.send(n)];

	          case 1:
	            return [2, {
	              autoAccept: e.sent().as(Wk).autoAccept
	            }];
	        }
	      });
	    });
	  }, R.prototype.setChannelInvitationPreference = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("boolean", r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new Yk({
	              userId: n.userId,
	              willAutoAccept: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, {
	              autoAccept: e.sent().as(Xk).autoAccept
	            }];
	        }
	      });
	    });
	  }, R.prototype.getDoNotDisturb = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new Jk({
	              userId: n.userId
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(Zk).preference];
	        }
	      });
	    });
	  }, R.prototype.setDoNotDisturb = function (r, i, s, a, o, u) {
	    return void 0 === i && (i = 0), void 0 === s && (s = 0), void 0 === a && (a = 0), void 0 === o && (o = 0), void 0 === u && (u = ""), re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("boolean", r) && c("number", i) && c("number", s) && c("number", a) && c("number", o) && c("string", u)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new $k({
	              userId: n.userId,
	              doNotDisturbOn: r,
	              startHour: i,
	              startMin: s,
	              endHour: a,
	              endMin: o,
	              timezone: u
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(eN).preference];
	        }
	      });
	    });
	  }, R.prototype.getSnoozePeriod = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new tN({
	              userId: n.userId
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(nN).snoozePeriod];
	        }
	      });
	    });
	  }, R.prototype.setSnoozePeriod = function (r, i, s) {
	    return void 0 === i && (i = 0), void 0 === s && (s = 0), re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("boolean", r) && c("number", i) && c("number", s)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new rN({
	              userId: n.userId,
	              snoozeOn: r,
	              startTs: i,
	              endTs: s
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(iN).snoozePeriod];
	        }
	      });
	    });
	  }, R.prototype.getMyPushTokensByToken = function (r, i) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("string", r) && ly(xS, i)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new Kk({
	              userId: n.userId,
	              type: i,
	              token: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(Qk).pushTokens];
	        }
	      });
	    });
	  }, R.prototype.getPushTriggerOption = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new LC({
	              userId: n.userId
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(PC).pushTriggerOption];
	        }
	      });
	    });
	  }, R.prototype.setPushTriggerOption = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(ly(MS, r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new UC({
	              userId: n.userId,
	              pushTriggerOption: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(qC).pushTriggerOption];
	        }
	      });
	    });
	  }, R.prototype.getPushTemplate = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new LN({
	              userId: n.userId
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(PN).name];
	        }
	      });
	    });
	  }, R.prototype.setPushTemplate = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(ly(LS, r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new UN({
	              userId: n.userId,
	              templateName: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(qN).name];
	        }
	      });
	    });
	  }, R.prototype.blockUser = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(r instanceof k || c("string", r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new sN({
	              userId: n.userId,
	              blockedUserId: r instanceof k ? r.userId : r
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, R.prototype.blockUserWithUserId = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this.blockUser(t)];
	      });
	    });
	  }, R.prototype.unblockUser = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(r instanceof k || c("string", r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new wN({
	              userId: n.userId,
	              unblockedUserId: r instanceof k ? r.userId : r
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, R.prototype.unblockUserWithUserId = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this.unblockUser(t)];
	      });
	    });
	  }, R.prototype.getFriendChangeLogsByToken = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("string", r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new FN({
	              userId: n.userId,
	              token: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(jN).changelogs];
	        }
	      });
	    });
	  }, R.prototype.getAllowFriendDiscovery = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new f1({
	              userId: n.userId
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(p1).allowFriendDiscovery];
	        }
	      });
	    });
	  }, R.prototype.setAllowFriendDiscovery = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("boolean", r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new v1({
	              userId: n.userId,
	              allowFriendDiscovery: r
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2, r];
	        }
	      });
	    });
	  }, R.prototype.uploadFriendDiscoveries = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new HN({
	              userId: n.userId,
	              discoveries: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(GN).friendDiscoveryRequestId];
	        }
	      });
	    });
	  }, R.prototype.deleteFriendDiscovery = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this.deleteFriendDiscoveries([t])];
	      });
	    });
	  }, R.prototype.deleteFriendDiscoveries = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(hy("string", r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new VN({
	              userId: n.userId,
	              discoveryKeys: r
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, R.prototype.addFriends = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(hy("string", r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new r1({
	              userId: n.userId,
	              userIds: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(i1).users];
	        }
	      });
	    });
	  }, R.prototype.deleteFriend = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this.deleteFriends([t])];
	      });
	    });
	  }, R.prototype.deleteFriends = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(hy("string", r)).throw(p.invalidParameters), t = N.of(this._iid), n = t.sdkState, t = t.requestQueue, n = new s1({
	              userId: n.userId,
	              userIds: r
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, R.prototype.getAllEmoji = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new q1(), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(F1).emojiContainer];
	        }
	      });
	    });
	  }, R.prototype.getEmojiCategory = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new j1({
	              categoryId: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(H1).emojiCategory];
	        }
	      });
	    });
	  }, R.prototype.getEmoji = function (r) {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new G1({
	              key: r
	            }), [4, t.send(n)];

	          case 1:
	            return [2, e.sent().as(V1).emoji];
	        }
	      });
	    });
	  }, R);

	  function R(a, e, t) {
	    var o = this,
	        e = (this._fcmPushToken = null, this._apnsPushToken = null, this._iid = a, this.options = e, N.of(a)),
	        u = e.sdkState,
	        c = e.cacheContext,
	        n = e.dispatcher,
	        r = e.sessionManager,
	        i = e.requestQueue,
	        s = e.logger,
	        l = e.userEventHandlers;
	    this._onlineDetector = new ek({
	      logger: s,
	      connectionDelegate: {
	        reconnect: function () {
	          var e = N.of(a),
	              t = e.sdkState,
	              e = e.connectionManager;
	          "foreground" === t.appState && e.resetAndReconnect();
	        },
	        disconnect: function () {
	          N.of(a).connectionManager.disconnect();
	        }
	      }
	    }), new bC(a, {
	      localCacheEnabled: c.localCacheEnabled,
	      dispatcher: n,
	      sdkState: u,
	      logger: s
	    }), t.forEach(function (e) {
	      e.init(a, {
	        sdkState: u,
	        cacheContext: c,
	        dispatcher: n,
	        sessionManager: r,
	        requestQueue: i,
	        logger: s,
	        onlineDetector: o._onlineDetector
	      }), o[e.name] = e;
	    }), this._appStateChangeDetector = new $C(), this._appStateChangeDetector.on("resume", function () {
	      s.debug("the page resumes from freeze"), o.setForegroundState();
	    }).on("pause", function () {
	      s.debug("the page freezes"), o.setBackgroundState();
	    }), n.on(function (e) {
	      var t;
	      if (e instanceof zy) "USEV" === e.code && (i = e.as(xC).event).category === hC.FRIEND_DISCOVERED && (t = DC.getDataAsFriendDiscoveredEvent(a, i).friendDiscoveries, ae(function () {
	        return re(o, void 0, void 0, function () {
	          return ie(this, function (e) {
	            return [2, l.forEach(function (e) {
	              e.onFriendsDiscovered(t);
	            })];
	          });
	        });
	      }));else if (e instanceof um) {
	        var n = N.of(o._iid).subscribedUnreadMessageCount,
	            r = !1,
	            i = e.ts;

	        if ("number" == typeof i && i > n.ts) {
	          if (n.all !== e.all && (r = !0), n.all = 0 <= e.all ? e.all : 0, e.customTypes) for (var s in e.customTypes) n.customTypes[s] !== e.customTypes[s] && (r = !0), n.customTypes[s] = e.customTypes[s];
	          r = r && 0 < n.ts, n.ts = i;
	        }

	        r && ae(function () {
	          return re(o, void 0, void 0, function () {
	            return ie(this, function (e) {
	              return [2, l.forEach(function (e) {
	                e.onTotalUnreadMessageCountUpdated(n.all, n.customTypes);
	              })];
	            });
	          });
	        });
	      } else e instanceof hE && c.localCacheEnabled && c.preference.set(o._getUserProfileCacheKey(u.userId), dE.payloadify(e.userProfile));
	    });
	  }

	  function OO(e) {
	    var t = e.name,
	        n = e.version,
	        r = e.store,
	        e = e.config;
	    this.name = t, this._version = n, this._state = lO.INIT, this._config = e || new eA({
	      dbname: t
	    }), this._store = r, this._event = {
	      success: TA,
	      error: TA,
	      upgrade: kA
	    }, this._collections = new Map(), this._globalMutex = new dO("".concat(this.name, ".lock")), this._config.disableLogger && gO.off(), new WA({
	      dbname: t,
	      limit: this._config.cacheLimit
	    });
	  }

	  (n = CO = CO || {})[n.NONE = 0] = "NONE", n[n.CHANNEL_ENTER = 10102] = "CHANNEL_ENTER", n[n.CHANNEL_EXIT = 10103] = "CHANNEL_EXIT", n[n.USER_CHANNEL_MUTE = 10201] = "USER_CHANNEL_MUTE", n[n.USER_CHANNEL_UNMUTE = 10200] = "USER_CHANNEL_UNMUTE", n[n.USER_CHANNEL_BAN = 10601] = "USER_CHANNEL_BAN", n[n.USER_CHANNEL_UNBAN = 10600] = "USER_CHANNEL_UNBAN", n[n.CHANNEL_FREEZE = 10701] = "CHANNEL_FREEZE", n[n.CHANNEL_UNFREEZE = 10700] = "CHANNEL_UNFREEZE", n[n.TYPING_START = 10900] = "TYPING_START", n[n.TYPING_END = 10901] = "TYPING_END", n[n.CHANNEL_JOIN = 1e4] = "CHANNEL_JOIN", n[n.CHANNEL_LEAVE = 10001] = "CHANNEL_LEAVE", n[n.CHANNEL_OPERATOR_UPDATE = 10002] = "CHANNEL_OPERATOR_UPDATE", n[n.CHANNEL_INVITE = 10020] = "CHANNEL_INVITE", n[n.CHANNEL_ACCEPT_INVITE = 10021] = "CHANNEL_ACCEPT_INVITE", n[n.CHANNEL_DECLINE_INVITE = 10022] = "CHANNEL_DECLINE_INVITE", n[n.CHANNEL_PROP_CHANGED = 11e3] = "CHANNEL_PROP_CHANGED", n[n.CHANNEL_DELETED = 12e3] = "CHANNEL_DELETED", n[n.CHANNEL_META_DATA_CHANGED = 11100] = "CHANNEL_META_DATA_CHANGED", n[n.CHANNEL_META_COUNTERS_CHANGED = 11200] = "CHANNEL_META_COUNTERS_CHANGED", n[n.CHANNEL_HIDE = 13e3] = "CHANNEL_HIDE", n[n.CHANNEL_UNHIDE = 13001] = "CHANNEL_UNHIDE";
	  Object.defineProperty($O.prototype, "isGroupChannelEvent", {
	    get: function () {
	      return this.channelType === ym.GROUP;
	    },
	    enumerable: !1,
	    configurable: !0
	  }), Object.defineProperty($O.prototype, "isOpenChannelEvent", {
	    get: function () {
	      return this.channelType === ym.OPEN;
	    },
	    enumerable: !1,
	    configurable: !0
	  });
	  var RO,
	      DO,
	      MO,
	      xO,
	      LO,
	      PO,
	      UO,
	      qO = $O,
	      FO = (o(ZO, UO = zy), ZO),
	      jO = (o(JO, PO = FO), JO),
	      HO = (o(XO, LO = zy), XO),
	      GO = (o(YO, xO = zy), YO),
	      VO = (o(WO, MO = zy), WO),
	      BO = (o(zO, DO = zy), zO),
	      KO = (o(QO, RO = zy), QO);

	  function QO(e, t, n) {
	    var r = RO.call(this, e, "MTHD", n) || this;
	    return r.event = new Tb(e, n), r;
	  }

	  function zO(e, t, n) {
	    e = DO.call(this, e, "MRCT", n) || this;
	    return e.channelUrl = n.channel_url, e.channelType = n.channel_type, e.event = new BE(n), e;
	  }

	  function WO(e, t, n) {
	    var r,
	        i = this,
	        e = ((i = MO.call(this, e, "AEDI", n) || this).message = new g0(e, n), N.of(e).sdkState);
	    return i.mentionCountChange = Mg({
	      mentionType: null != (r = null == (r = n.old_values) ? void 0 : r.mention_type) ? r : null,
	      mentionedUserIds: null != (n = null == (r = n.old_values) ? void 0 : r.mentioned_user_ids) ? n : []
	    }, {
	      mentionType: i.message.mentionType,
	      mentionedUserIds: null != (r = i.message.mentionedUserIds) ? r : null == (n = i.message.mentionedUsers) ? void 0 : n.map(function (e) {
	        return e.userId;
	      })
	    }, e.userId), i;
	  }

	  function YO(e, t, n) {
	    var r,
	        i = this,
	        e = ((i = xO.call(this, e, "ADMM", n) || this).message = new g0(e, n), N.of(e).sdkState);
	    return i.isMentioned = jg(i.message.mentionType, null != (r = i.message.mentionedUserIds) ? r : null == (r = i.message.mentionedUsers) ? void 0 : r.map(function (e) {
	      return e.userId;
	    }), e.userId), i.forceUpdateLastMessage = null != (r = n.force_update_last_message) && r, i;
	  }

	  function XO(e, t, n) {
	    e = LO.call(this, e, "MCNT", n) || this;
	    return e.groupChannelMemberCounts = n.group_channels.map(function (e) {
	      return {
	        channelUrl: e.channel_url,
	        memberCount: e.member_count,
	        joinedMemberCount: e.joined_member_count,
	        updatedAt: e.ts
	      };
	    }), e.openChannelMemberCounts = n.open_channels.map(function (e) {
	      return {
	        channelUrl: e.channel_url,
	        participantCount: e.participant_count,
	        updatedAt: e.ts
	      };
	    }), e;
	  }

	  function JO(e, t, n) {
	    var r = PO.call(this, e, t, n) || this,
	        e = n.data.operators,
	        t = void 0 === e ? [] : e;
	    return r.operators = t.map(function (e) {
	      return new k(r._iid, e);
	    }), r;
	  }

	  function ZO(e, t, n) {
	    e = UO.call(this, e, "SYEV", n) || this;
	    return e.event = new qO(n), e;
	  }

	  function $O(e) {
	    this.channelUrl = e.channel_url, this.channelType = e.channel_type, this.category = e.cat, this.data = e.data, this.ts = e.ts;
	  }

	  o(fR, rR = jn), Object.defineProperty(fR.prototype, "enteredChannels", {
	    get: function () {
	      var t = this;
	      return this._enteredChannelUrls.map(function (e) {
	        return t._channels.get(e);
	      }).filter(function (e) {
	        return null !== e;
	      });
	    },
	    enumerable: !1,
	    configurable: !0
	  }), fR.prototype.isEnteredChannel = function (e) {
	    return this._enteredChannelUrls.includes(e);
	  }, fR.prototype.enter = function (e) {
	    this._enteredChannelUrls.indexOf(e) < 0 && this._enteredChannelUrls.push(e);
	  }, fR.prototype.exit = function (e) {
	    e = this._enteredChannelUrls.indexOf(e);
	    0 <= e && this._enteredChannelUrls.splice(e, 1);
	  }, fR.prototype.exitAll = function () {
	    this._enteredChannelUrls = [];
	  }, fR.prototype.get = function (t) {
	    var n;
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, null != (n = this._channels.get(t)) ? n : null];
	      });
	    });
	  }, fR.prototype.upsert = function (t) {
	    return re(this, void 0, void 0, function () {
	      var n = this;
	      return ie(this, function (e) {
	        return t.forEach(function (e) {
	          var t;
	          n._channels.has(e.url) ? (t = n._channels.get(e.url), Object.assign(t, e)) : n._channels.set(e.url, e);
	        }), [2];
	      });
	    });
	  }, fR.prototype.remove = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return this._channels.delete(t), this.exit(t), [2];
	      });
	    });
	  }, fR.prototype.clear = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return this._channels.clear(), this._enteredChannelUrls = [], [2];
	      });
	    });
	  };
	  var eR,
	      tR,
	      nR,
	      rR,
	      iR,
	      sR = fR,
	      aR = {
	    channelUrl: null,
	    name: null,
	    coverUrlOrImage: null,
	    data: null,
	    customType: null,
	    operatorUserIds: null
	  },
	      oR = (o(dR, nR = h), dR),
	      uR = (o(hR, tR = S), hR),
	      cR = (o(lR, eR = h), lR);

	  function lR(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.coverUrlOrImage,
	        i = e.name,
	        s = e.data,
	        a = e.customType,
	        e = e.operatorUserIds;
	    return (t = eR.call(this) || this).method = T.POST, t.path = sg, t.params = w({
	      channel_url: n,
	      cover_url: c("string", r) ? r : null,
	      cover_file: ry(r) ? r : null,
	      name: i,
	      data: s,
	      custom_type: a,
	      operators: e
	    }), t;
	  }

	  function hR(e, t) {
	    var n = tR.call(this, e, t) || this;
	    return n.channel = null, n.channel = new ZR(e, t), n;
	  }

	  function dR(e) {
	    var t = e.channelUrl,
	        e = e.isInternalCall,
	        n = nR.call(this) || this;
	    return n.method = T.GET, n.path = "".concat(e ? ag : sg, "/").concat(encodeURIComponent(t)), n;
	  }

	  function fR() {
	    var e = null !== rR && rR.apply(this, arguments) || this;
	    return e._channels = new Map(), e._enteredChannelUrls = [], e;
	  }

	  o(function (e, t) {
	    var n = iR.call(this, e, t) || this;
	    return n.channel = new ZR(e, t), n;
	  }, iR = S);
	  o(WR, wR = Wy);

	  var pR,
	      vR,
	      _R,
	      yR,
	      mR,
	      gR,
	      ER,
	      bR,
	      IR,
	      wR,
	      TR,
	      SR = WR,
	      CR = (o(zR, IR = zy), zR),
	      kR = (o(QR, bR = Wy), QR),
	      NR = (o(KR, ER = zy), KR),
	      AR = {},
	      OR = (BR.of = function (e) {
	    return AR[e];
	  }, BR.prototype.buildOpenChannelFromSerializedData = function (e) {
	    e = nE(e);
	    return new ZR(e._iid, ZR.payloadify(e));
	  }, BR.prototype.getChannelFromCache = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._openChannelCache.get(t)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, BR.prototype.upsertChannelsToCache = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, this._openChannelCache.upsert(t)];

	          case 1:
	            return e.sent(), [2];
	        }
	      });
	    });
	  }, BR.prototype.removeChannelsFromCache = function (a) {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i, s;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            e.trys.push([0, 5, 6, 7]), t = se(a), n = t.next(), e.label = 1;

	          case 1:
	            return n.done ? [3, 4] : (r = n.value, [4, this._openChannelCache.remove(r)]);

	          case 2:
	            e.sent(), e.label = 3;

	          case 3:
	            return n = t.next(), [3, 1];

	          case 4:
	            return [3, 7];

	          case 5:
	            return r = e.sent(), i = {
	              error: r
	            }, [3, 7];

	          case 6:
	            try {
	              n && !n.done && (s = t.return) && s.call(t);
	            } finally {
	              if (i) throw i.error;
	            }

	            return [7];

	          case 7:
	            return [2];
	        }
	      });
	    });
	  }, BR.prototype.setEnteredToCache = function (e) {
	    this._openChannelCache.enter(e.url);
	  }, BR.prototype.setExitedToCache = function (e) {
	    this._openChannelCache.exit(e.url);
	  }, BR.prototype._handleEvent = function (ne) {
	    return re(this, void 0, void 0, function () {
	      var a,
	          U,
	          o,
	          t,
	          u,
	          c,
	          q,
	          l,
	          n,
	          r,
	          F,
	          j,
	          s,
	          H,
	          G,
	          h,
	          i,
	          d,
	          f,
	          p,
	          v,
	          _,
	          y,
	          V,
	          B,
	          m,
	          g,
	          E,
	          K,
	          Q,
	          b,
	          I,
	          w,
	          T,
	          S,
	          C,
	          k,
	          z,
	          N,
	          W,
	          A,
	          Y,
	          O,
	          R,
	          D,
	          M,
	          x,
	          L,
	          X,
	          J,
	          Z,
	          $,
	          ee,
	          te,
	          P = this;

	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            switch (e.trys.push([0, 51,, 52]), ne.code) {
	              case "MESG":
	              case "FILE":
	              case "ADMM":
	              case "BRDM":
	                return [3, 1];

	              case "MEDI":
	              case "FEDI":
	              case "AEDI":
	                return [3, 4];

	              case "DELM":
	                return [3, 7];

	              case "MRCT":
	                return [3, 10];

	              case "MTHD":
	                return [3, 13];

	              case "MCNT":
	                return [3, 16];

	              case "SYEV":
	                return [3, 27];
	            }

	            return [3, 50];

	          case 1:
	            return t = null, "MESG" === ne.code ? t = ne.as(rS) : "FILE" === ne.code ? t = ne.as(k0) : "ADMM" !== ne.code && "BRDM" != ne.code || (t = ne.as(GO)), t ? (a = t.message, U = t.isMentioned, a.channelType !== ym.OPEN ? [3, 3] : [4, this.getChannel(a.channelUrl, !0)]) : [3, 3];

	          case 2:
	            o = e.sent(), ae(function () {
	              return re(P, void 0, void 0, function () {
	                var t, n, r, i, s;
	                return ie(this, function (e) {
	                  try {
	                    for (t = se(this._openChannelHandlers.values()), n = t.next(); !n.done; n = t.next()) r = n.value, this._openChannelCache.isEnteredChannel(o.url) && r.onMessageReceived(o, a), U && r.onMentionReceived(o, a);
	                  } catch (e) {
	                    i = {
	                      error: e
	                    };
	                  } finally {
	                    try {
	                      n && !n.done && (s = t.return) && s.call(t);
	                    } finally {
	                      if (i) throw i.error;
	                    }
	                  }

	                  return [2];
	                });
	              });
	            }), e.label = 3;

	          case 3:
	            return [3, 50];

	          case 4:
	            return t = null, "MEDI" === ne.code ? t = ne.as(sS) : "FEDI" === ne.code ? t = ne.as(oS) : "AEDI" === ne.code && (t = ne.as(VO)), !t || (u = t.message).channelType !== ym.OPEN ? [3, 6] : [4, this.getChannel(u.channelUrl, !0)];

	          case 5:
	            c = e.sent(), ae(function () {
	              return re(P, void 0, void 0, function () {
	                var t, n, r, i, s;
	                return ie(this, function (e) {
	                  try {
	                    for (t = se(this._openChannelHandlers.values()), n = t.next(); !n.done; n = t.next()) r = n.value, this._openChannelCache.isEnteredChannel(c.url) && r.onMessageUpdated(c, u);
	                  } catch (e) {
	                    i = {
	                      error: e
	                    };
	                  } finally {
	                    try {
	                      n && !n.done && (s = t.return) && s.call(t);
	                    } finally {
	                      if (i) throw i.error;
	                    }
	                  }

	                  return [2];
	                });
	              });
	            }), e.label = 6;

	          case 6:
	            return [3, 50];

	          case 7:
	            return n = ne.as(PS), f = n.channelUrl, r = n.channelType, q = n.messageId, r !== ym.OPEN ? [3, 9] : [4, this.getChannel(f, !0)];

	          case 8:
	            l = e.sent(), ae(function () {
	              return re(P, void 0, void 0, function () {
	                var t, n, r, i, s;
	                return ie(this, function (e) {
	                  try {
	                    for (t = se(this._openChannelHandlers.values()), n = t.next(); !n.done; n = t.next()) r = n.value, this._openChannelCache.isEnteredChannel(l.url) && r.onMessageDeleted(l, q);
	                  } catch (e) {
	                    i = {
	                      error: e
	                    };
	                  } finally {
	                    try {
	                      n && !n.done && (s = t.return) && s.call(t);
	                    } finally {
	                      if (i) throw i.error;
	                    }
	                  }

	                  return [2];
	                });
	              });
	            }), e.label = 9;

	          case 9:
	            return [3, 50];

	          case 10:
	            return n = ne.as(BO), f = n.channelUrl, r = n.channelType, F = n.event, r !== ym.OPEN ? [3, 12] : [4, this.getChannel(f, !0)];

	          case 11:
	            j = e.sent(), ae(function () {
	              return re(P, void 0, void 0, function () {
	                var t, n, r, i;
	                return ie(this, function (e) {
	                  try {
	                    for (t = se(this._openChannelHandlers.values()), n = t.next(); !n.done; n = t.next()) n.value.onReactionUpdated(j, F);
	                  } catch (e) {
	                    r = {
	                      error: e
	                    };
	                  } finally {
	                    try {
	                      n && !n.done && (i = t.return) && i.call(t);
	                    } finally {
	                      if (r) throw r.error;
	                    }
	                  }

	                  return [2];
	                });
	              });
	            }), e.label = 12;

	          case 12:
	            return [3, 50];

	          case 13:
	            return (s = ne.as(KO).event).channelType !== ym.OPEN ? [3, 15] : [4, this.getChannel(s.channelUrl, !0)];

	          case 14:
	            H = e.sent(), ae(function () {
	              return re(P, void 0, void 0, function () {
	                var t, n, r, i;
	                return ie(this, function (e) {
	                  try {
	                    for (t = se(this._openChannelHandlers.values()), n = t.next(); !n.done; n = t.next()) n.value.onThreadInfoUpdated(H, s);
	                  } catch (e) {
	                    r = {
	                      error: e
	                    };
	                  } finally {
	                    try {
	                      n && !n.done && (i = t.return) && i.call(t);
	                    } finally {
	                      if (r) throw r.error;
	                    }
	                  }

	                  return [2];
	                });
	              });
	            }), e.label = 15;

	          case 15:
	            return [3, 50];

	          case 16:
	            G = ne.as(HO).openChannelMemberCounts, h = [], e.label = 17;

	          case 17:
	            e.trys.push([17, 22, 23, 24]), i = se(G), d = i.next(), e.label = 18;

	          case 18:
	            return d.done ? [3, 21] : (p = d.value, f = p.channelUrl, E = p.participantCount, p = p.updatedAt, [4, this.getChannelFromCache(f)]);

	          case 19:
	            (v = e.sent()) && v._updateParticipantCount(E, p) && h.push(v), e.label = 20;

	          case 20:
	            return d = i.next(), [3, 18];

	          case 21:
	            return [3, 24];

	          case 22:
	            return v = e.sent(), ee = {
	              error: v
	            }, [3, 24];

	          case 23:
	            try {
	              d && !d.done && (te = i.return) && te.call(i);
	            } finally {
	              if (ee) throw ee.error;
	            }

	            return [7];

	          case 24:
	            return 0 < h.length ? [4, this.upsertChannelsToCache(h)] : [3, 26];

	          case 25:
	            e.sent(), ae(function () {
	              return re(P, void 0, void 0, function () {
	                var t, n, r, i;
	                return ie(this, function (e) {
	                  try {
	                    for (t = se(this._openChannelHandlers.values()), n = t.next(); !n.done; n = t.next()) n.value.onChannelMemberCountChanged(h);
	                  } catch (e) {
	                    r = {
	                      error: e
	                    };
	                  } finally {
	                    try {
	                      n && !n.done && (i = t.return) && i.call(t);
	                    } finally {
	                      if (r) throw r.error;
	                    }
	                  }

	                  return [2];
	                });
	              });
	            }), e.label = 26;

	          case 26:
	            return [3, 50];

	          case 27:
	            if ((_ = ne.as(FO).event).isOpenChannelEvent) switch (_.category) {
	              case CO.CHANNEL_ENTER:
	                return [3, 28];

	              case CO.CHANNEL_EXIT:
	                return [3, 30];

	              case CO.CHANNEL_OPERATOR_UPDATE:
	                return [3, 32];

	              case CO.USER_CHANNEL_MUTE:
	              case CO.USER_CHANNEL_UNMUTE:
	                return [3, 34];

	              case CO.USER_CHANNEL_BAN:
	              case CO.USER_CHANNEL_UNBAN:
	                return [3, 36];

	              case CO.CHANNEL_FREEZE:
	              case CO.CHANNEL_UNFREEZE:
	                return [3, 38];

	              case CO.CHANNEL_DELETED:
	                return [3, 40];

	              case CO.CHANNEL_PROP_CHANGED:
	                return [3, 43];

	              case CO.CHANNEL_META_DATA_CHANGED:
	                return [3, 45];

	              case CO.CHANNEL_META_COUNTERS_CHANGED:
	                return [3, 47];
	            }
	            return [3, 49];

	          case 28:
	            return [4, this.getChannel(_.channelUrl, !0)];

	          case 29:
	            return y = e.sent(), g = ne.as(CR), E = g.participantCount, V = g.user, B = y._updateParticipantCount(E, _.ts), ae(function () {
	              return re(P, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this._openChannelHandlers.forEach(function (e) {
	                    e.onUserEntered(y, V), B && e.onChannelParticipantCountChanged(y);
	                  }), [2];
	                });
	              });
	            }), [3, 49];

	          case 30:
	            return [4, this.getChannel(_.channelUrl, !0)];

	          case 31:
	            return m = e.sent(), g = ne.as(NR), E = g.participantCount, K = g.user, Q = m._updateParticipantCount(E, _.ts), ae(function () {
	              return re(P, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this._openChannelHandlers.forEach(function (e) {
	                    e.onUserExited(m, K), Q && e.onChannelParticipantCountChanged(m);
	                  }), [2];
	                });
	              });
	            }), [3, 49];

	          case 32:
	            return [4, this.getChannel(_.channelUrl, !0)];

	          case 33:
	            return b = e.sent(), I = ne.as(jO).operators, b.operators = I, this.upsertChannelsToCache([b]), ae(function () {
	              return re(P, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this._openChannelHandlers.forEach(function (e) {
	                    e.onOperatorUpdated(b, I);
	                  }), [2];
	                });
	              });
	            }), [3, 49];

	          case 34:
	            return [4, this.getChannel(_.channelUrl, !0)];

	          case 35:
	            return w = e.sent(), T = _.category === CO.USER_CHANNEL_MUTE, S = ne.as(T ? vT : IT).user, ae(function () {
	              return re(P, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this._openChannelHandlers.forEach(function (e) {
	                    T ? e.onUserMuted(w, S) : e.onUserUnmuted(w, S);
	                  }), [2];
	                });
	              });
	            }), [3, 49];

	          case 36:
	            return [4, this.getChannel(_.channelUrl, !0)];

	          case 37:
	            return C = e.sent(), k = _.category === CO.USER_CHANNEL_BAN, z = ne.as(k ? AT : PT).user, ae(function () {
	              return re(P, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this._openChannelHandlers.forEach(function (e) {
	                    k ? e.onUserBanned(C, z) : e.onUserUnbanned(C, z);
	                  }), [2];
	                });
	              });
	            }), [3, 49];

	          case 38:
	            return [4, this.getChannel(_.channelUrl, !0)];

	          case 39:
	            return N = e.sent(), W = ne.as(ZT).freeze, N.isFrozen = W, this.upsertChannelsToCache([N]), ae(function () {
	              return re(P, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this._openChannelHandlers.forEach(function (e) {
	                    W ? e.onChannelFrozen(N) : e.onChannelUnfrozen(N);
	                  }), [2];
	                });
	              });
	            }), [3, 49];

	          case 40:
	            return [4, this.getChannel(_.channelUrl, !0)];

	          case 41:
	            return A = e.sent(), [4, this.removeChannelsFromCache([A.url])];

	          case 42:
	            return e.sent(), ae(function () {
	              return re(P, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this._openChannelHandlers.forEach(function (e) {
	                    e.onChannelDeleted(A.url, A.channelType);
	                  }), [2];
	                });
	              });
	            }), [3, 49];

	          case 43:
	            return [4, this.getChannelWithoutCache(_.channelUrl, !0)];

	          case 44:
	            return Y = e.sent(), ae(function () {
	              return re(P, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this._openChannelHandlers.forEach(function (e) {
	                    e.onChannelChanged(Y);
	                  }), [2];
	                });
	              });
	            }), [3, 49];

	          case 45:
	            return [4, this.getChannel(_.channelUrl, !0)];

	          case 46:
	            return O = e.sent(), L = ne.as(Cw), R = L.created, D = L.updated, M = L.deleted, R && O._upsertCachedMetaData(R, _.ts), D && O._upsertCachedMetaData(D, _.ts), M && O._removeFromCachedMetaData(M, _.ts), ae(function () {
	              return re(P, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this._openChannelHandlers.forEach(function (e) {
	                    R && e.onMetaDataCreated(O, R), D && e.onMetaDataUpdated(O, D), M && e.onMetaDataDeleted(O, M);
	                  }), [2];
	                });
	              });
	            }), [3, 49];

	          case 47:
	            return [4, this.getChannel(_.channelUrl, !0)];

	          case 48:
	            return x = e.sent(), L = ne.as(Uw), X = L.created, J = L.updated, Z = L.deleted, ae(function () {
	              return re(P, void 0, void 0, function () {
	                return ie(this, function (e) {
	                  return this._openChannelHandlers.forEach(function (e) {
	                    X && e.onMetaCounterCreated(x, X), J && e.onMetaCounterUpdated(x, J), Z && e.onMetaCounterDeleted(x, Z);
	                  }), [2];
	                });
	              });
	            }), [3, 49];

	          case 49:
	            return [3, 50];

	          case 50:
	            return [3, 52];

	          case 51:
	            if ($ = e.sent(), ey($)) throw $;
	            return [3, 52];

	          case 52:
	            return [2];
	        }
	      });
	    });
	  }, BR.prototype.addHandler = function (e, t) {
	    this._openChannelHandlers.set(e, t);
	  }, BR.prototype.removeHandler = function (e) {
	    this._openChannelHandlers.delete(e);
	  }, BR.prototype.clearHandler = function () {
	    this._openChannelHandlers.clear();
	  }, BR.prototype.getChannel = function (n, e) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            C(c("string", n)).throw(p.invalidParameters), e.label = 1;

	          case 1:
	            return e.trys.push([1, 3,, 4]), [4, this.getChannelFromCache(n)];

	          case 2:
	            return (t = e.sent()) ? [2, t] : [3, 4];

	          case 3:
	            return e.sent(), [3, 4];

	          case 4:
	            return [4, this.getChannelWithoutCache(n)];

	          case 5:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, BR.prototype.getChannelWithoutCache = function (r, i) {
	    return void 0 === i && (i = !1), re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return C(c("string", r)).throw(p.invalidParameters), t = new oR({
	              channelUrl: r,
	              isInternalCall: i
	            }), [4, this._requestQueue.send(t)];

	          case 1:
	            return t = e.sent(), n = t.as(uR).channel, [4, this.upsertChannelsToCache([n])];

	          case 2:
	            return e.sent(), [2, n];
	        }
	      });
	    });
	  }, BR.prototype.createChannel = function (i) {
	    return re(this, void 0, void 0, function () {
	      var n, r;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return i = f(f({}, aR), i), C(hy("string", (t = i).operatorUserIds, !0) && (c("string", t.coverUrlOrImage) || ry(t.coverUrlOrImage) || null === t.coverUrlOrImage) && c("string", t.name, !0) && c("string", t.data, !0) && c("string", t.customType, !0) && (c("string", t.channelUrl) && /^\w+$/.test(t.channelUrl) || null === t.channelUrl)).throw(p.invalidParameters), n = new cR(i), [4, this._requestQueue.send(n)];

	          case 1:
	            return n = e.sent(), r = n.as(uR).channel, this.upsertChannelsToCache([r]), [2, r];
	        }

	        var t;
	      });
	    });
	  }, BR),
	      RR = {
	    name: null,
	    coverUrlOrImage: null,
	    data: null,
	    customType: null,
	    operatorUserIds: null
	  },
	      DR = (o(VR, gR = h), VR),
	      MR = (o(GR, mR = S), GR),
	      xR = (o(HR, yR = hs), HR.prototype._validate = function () {
	    return yR.prototype._validate.call(this);
	  }, HR.prototype.next = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, t = N.of(this._iid).requestQueue, n = new DR(f(f({}, this), {
	              token: this._token
	            })), [4, t.send(n)]) : [3, 2] : [3, 5];

	          case 1:
	            return t = e.sent(), n = t.as(MR), r = n.participants, i = n.token, this._token = i, this._hasNext = !!i, this._isLoading = !1, [2, r];

	          case 2:
	            return [2, []];

	          case 3:
	            throw p.queryInProgress;

	          case 4:
	            return [3, 6];

	          case 5:
	            throw p.invalidParameters;

	          case 6:
	            return [2];
	        }
	      });
	    });
	  }, HR),
	      LR = (o(jR, _R = h), jR),
	      PR = (o(FR, vR = S), FR),
	      UR = (o(qR, pR = h), qR);

	  function qR(e) {
	    var t = this,
	        e = e.channelUrl;
	    return (t = pR.call(this) || this).method = T.DELETE, t.path = "".concat(sg, "/").concat(encodeURIComponent(e)), t;
	  }

	  function FR(e, t) {
	    var n = vR.call(this, e, t) || this;
	    return n.channel = new ZR(e, t), n;
	  }

	  function jR(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.coverUrlOrImage,
	        i = e.name,
	        s = e.data,
	        a = e.customType,
	        e = e.operatorUserIds;
	    return (t = _R.call(this) || this).method = T.PUT, t.path = "".concat(sg, "/").concat(encodeURIComponent(n)), t.params = w({
	      cover_url: c("string", r) ? r : null,
	      cover_file: ry(r) ? r : null,
	      name: i,
	      data: s,
	      custom_type: a,
	      operators: e
	    }), t;
	  }

	  function HR(e, t, n) {
	    return yR.call(this, e, t, ym.OPEN, n) || this;
	  }

	  function GR(t, e) {
	    var n = mR.call(this, t, e) || this,
	        r = (n.token = null, n.participants = [], e.next),
	        e = e.participants;
	    return n.token = r, n.participants = e.map(function (e) {
	      return new k(t, e);
	    }), n;
	  }

	  function VR(e) {
	    var t = this,
	        n = e.channelUrl,
	        r = e.token,
	        e = e.limit;
	    return (t = gR.call(this) || this).method = T.GET, t.path = "".concat(sg, "/").concat(encodeURIComponent(n), "/participants"), t.params = {
	      token: r,
	      limit: e
	    }, t;
	  }

	  function BR(e, t) {
	    var n = t.sdkState,
	        r = t.dispatcher,
	        t = t.requestQueue,
	        a = this;
	    this._sdkState = n, this._requestQueue = t, this._dispatcher = r, this._openChannelCache = new sR(e), this._openChannelHandlers = new Map(), this._dispatcher.on(function (e) {
	      var t, n;
	      if (e instanceof zy) a._handleEvent(e);else if (e instanceof jm && e.stateType === im.CONNECTED) {
	        var r = a._openChannelCache.enteredChannels;

	        try {
	          for (var i = se(r), s = i.next(); !s.done; s = i.next()) s.value.enter();
	        } catch (e) {
	          t = {
	            error: e
	          };
	        } finally {
	          try {
	            s && !s.done && (n = i.return) && n.call(i);
	          } finally {
	            if (t) throw t.error;
	          }
	        }
	      }
	    }), AR[e] = this;
	  }

	  function KR(e, t, n) {
	    var r,
	        i = this,
	        i = ER.call(this, e, "EXIT", n) || this;
	    return n.data && (i.participantCount = null != (r = n.data.participant_count) ? r : 0, i.user = new k(e, n.data), i.ts = null != (r = n.data.edge_ts) ? r : 0), i;
	  }

	  function QR(e) {
	    e = e.channelUrl;
	    return bR.call(this, {
	      code: "EXIT",
	      payload: {
	        channel_url: e
	      },
	      ackRequired: !0
	    }) || this;
	  }

	  function zR(e, t, n) {
	    var r,
	        i = this,
	        i = IR.call(this, e, "ENTR", n) || this;
	    return n.data && (i.participantCount = null != (r = n.data.participant_count) ? r : 0, i.user = new k(e, n.data), i.ts = null != (r = n.data.edge_ts) ? r : 0), i;
	  }

	  function WR(e) {
	    e = e.channelUrl;
	    return wR.call(this, {
	      code: "ENTR",
	      payload: {
	        channel_url: e
	      },
	      ackRequired: !0
	    }) || this;
	  }

	  o(function (e, t) {
	    return TR.call(this, e, t) || this;
	  }, TR = S);
	  o($R, YR = zS), $R.payloadify = function (e) {
	    return e ? w(f(f({}, zS.payloadify(e)), {
	      participant_count: e.participantCount,
	      operators: e.operators.map(function (e) {
	        return k.payloadify(e);
	      })
	    })) : null;
	  }, $R.prototype.serialize = function () {
	    return tE(this);
	  }, $R.prototype.isOperator = function (t) {
	    return t instanceof k ? this.isOperator(t.userId) : this.operators.some(function (e) {
	      return e.userId === t;
	    });
	  }, $R.prototype._updateParticipantCount = function (e, t) {
	    return t > this._lastParticipantCountUpdated && (this.participantCount = e, this._lastParticipantCountUpdated = t, !0);
	  }, $R.prototype.createParticipantListQuery = function (e) {
	    return new xR(this._iid, this.url, e);
	  }, $R.prototype.refresh = function () {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return [4, OR.of(this._iid).getChannelWithoutCache(this.url)];

	          case 1:
	            return [2, e.sent()];
	        }
	      });
	    });
	  }, $R.prototype.enter = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new SR({
	              channelUrl: this.url
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(CR), r = n.participantCount, i = n.ts, this._updateParticipantCount(r, i), OR.of(this._iid).setEnteredToCache(this), [2];
	        }
	      });
	    });
	  }, $R.prototype.exit = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new kR({
	              channelUrl: this.url
	            }), [4, t.send(n)];

	          case 1:
	            return t = e.sent(), n = t.as(NR), r = n.participantCount, i = n.ts, this._updateParticipantCount(r, i), OR.of(this._iid).setExitedToCache(this), Ib.of(this._iid).fileMessageQueue.cancel(this), [2];
	        }
	      });
	    });
	  }, $R.prototype.updateChannel = function (s) {
	    return re(this, void 0, void 0, function () {
	      var n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return s = f(f({}, RR), s), C(hy("string", (t = s).operatorUserIds, !0) && (c("string", t.coverUrlOrImage) || ry(t.coverUrlOrImage) || null === t.coverUrlOrImage) && c("string", t.name, !0) && c("string", t.data, !0) && c("string", t.customType, !0)).throw(p.invalidParameters), r = N.of(this._iid).requestQueue, n = new LR(f({
	              channelUrl: this.url
	            }, s)), [4, r.send(n)];

	          case 1:
	            return r = e.sent(), i = r.as(PR).channel, [4, OR.of(this._iid).upsertChannelsToCache([i])];

	          case 2:
	            return e.sent(), [2, i];
	        }

	        var t;
	      });
	    });
	  }, $R.prototype.updateChannelWithOperatorUserIds = function (n, r, i, s, a) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        return t = f(f({}, RR), {
	          name: n,
	          coverUrlOrImage: r,
	          data: i,
	          operatorUserIds: s,
	          customType: a
	        }), [2, this.updateChannel(t)];
	      });
	    });
	  }, $R.prototype.delete = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return t = N.of(this._iid).requestQueue, n = new UR({
	              channelUrl: this.url
	            }), [4, t.send(n)];

	          case 1:
	            return e.sent(), [4, OR.of(this._iid).removeChannelsFromCache([this.url])];

	          case 2:
	            return e.sent(), [2];
	        }
	      });
	    });
	  };
	  var YR,
	      XR,
	      JR,
	      ZR = $R;

	  function $R(t, e) {
	    var n,
	        r = this;
	    return (r = YR.call(this, t, e) || this)._lastParticipantCountUpdated = 0, r.participantCount = 0, r.operators = [], r.channelType = ym.OPEN, r.participantCount = null != (n = e.participant_count) ? n : 0, r.operators = Array.isArray(e.operators) ? e.operators.map(function (e) {
	      return new k(t, e);
	    }) : [], r;
	  }

	  function eD(t) {
	    void 0 === t && (t = {});
	    var n = XR.call(this) || this;
	    return Object.keys(t).forEach(function (e) {
	      n.hasOwnProperty(e) && (n[e] = t[e]);
	    }), n;
	  }

	  function tD() {
	    var e = null !== JR && JR.apply(this, arguments) || this;
	    return e.onUserEntered = jy, e.onUserExited = jy, e.onChannelParticipantCountChanged = jy, e;
	  }

	  o(tD, JR = function () {
	    this.onUserMuted = jy, this.onUserUnmuted = jy, this.onUserBanned = jy, this.onUserUnbanned = jy, this.onChannelChanged = jy, this.onChannelDeleted = jy, this.onChannelFrozen = jy, this.onChannelUnfrozen = jy, this.onOperatorUpdated = jy, this.onChannelMemberCountChanged = jy, this.onMetaDataCreated = jy, this.onMetaDataUpdated = jy, this.onMetaDataDeleted = jy, this.onMetaCounterCreated = jy, this.onMetaCounterUpdated = jy, this.onMetaCounterDeleted = jy, this.onMessageReceived = jy, this.onMessageUpdated = jy, this.onMessageDeleted = jy, this.onMentionReceived = jy, this.onReactionUpdated = jy, this.onThreadInfoUpdated = jy;
	  }), o(eD, XR = tD);
	  o(fD, sD = h);
	  var nD,
	      rD,
	      iD,
	      sD,
	      aD = fD,
	      oD = (o(dD, iD = S), dD),
	      uD = (o(hD, rD = s), hD.prototype._validate = function () {
	    return rD.prototype._validate.call(this) && c("boolean", this.includeFrozen) && c("boolean", this.includeMetaData) && c("string", this.nameKeyword, !0) && c("string", this.urlKeyword, !0) && hy("string", this.customTypes, !0);
	  }, hD.prototype.next = function () {
	    return re(this, void 0, void 0, function () {
	      var t, n, r, i;
	      return ie(this, function (e) {
	        switch (e.label) {
	          case 0:
	            return this._validate() ? this._isLoading ? [3, 4] : this._hasNext ? (this._isLoading = !0, t = N.of(this._iid).requestQueue, n = new aD(f(f({}, this), {
	              token: this._token
	            })), [4, t.send(n)]) : [3, 3] : [3, 6];

	          case 1:
	            return t = e.sent(), n = t.as(oD), r = n.channels, i = n.token, this._token = i, this._hasNext = !!i, [4, OR.of(this._iid).upsertChannelsToCache(r)];

	          case 2:
	            return e.sent(), this._isLoading = !1, [2, r];

	          case 3:
	            return [2, []];

	          case 4:
	            throw p.queryInProgress;

	          case 5:
	            return [3, 7];

	          case 6:
	            throw p.invalidParameters;

	          case 7:
	            return [2];
	        }
	      });
	    });
	  }, hD),
	      cD = (o(lD, nD = ci), lD.prototype.init = function (e, t) {
	    var n = t.sdkState,
	        r = t.dispatcher,
	        i = t.sessionManager,
	        s = t.requestQueue,
	        a = t.logger,
	        o = t.onlineDetector,
	        t = t.cacheContext;
	    nD.prototype.init.call(this, e, {
	      sdkState: n,
	      dispatcher: r,
	      sessionManager: i,
	      requestQueue: s,
	      logger: a,
	      onlineDetector: o,
	      cacheContext: t
	    }), this._manager = new OR(e, {
	      sdkState: n,
	      dispatcher: r,
	      requestQueue: s
	    });
	  }, lD.prototype.createOpenChannelListQuery = function (e) {
	    return new uD(this._iid, e = void 0 === e ? {} : e);
	  }, lD.prototype.addOpenChannelHandler = function (e, t) {
	    this._manager.addHandler(e, t);
	  }, lD.prototype.removeOpenChannelHandler = function (e) {
	    this._manager.removeHandler(e);
	  }, lD.prototype.removeAllOpenChannelHandlers = function () {
	    this._manager.clearHandler();
	  }, lD.prototype.buildOpenChannelFromSerializedData = function (e) {
	    return this._manager.buildOpenChannelFromSerializedData(e);
	  }, lD.prototype.getChannel = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this._manager.getChannel(t)];
	      });
	    });
	  }, lD.prototype.getChannelWithoutCache = function (t) {
	    return re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this._manager.getChannelWithoutCache(t)];
	      });
	    });
	  }, lD.prototype.createChannel = function (t) {
	    return void 0 === t && (t = {}), re(this, void 0, void 0, function () {
	      return ie(this, function (e) {
	        return [2, this._manager.createChannel(t)];
	      });
	    });
	  }, lD.prototype.createChannelWithOperatorUserIds = function (n, r, i, s, a) {
	    return re(this, void 0, void 0, function () {
	      var t;
	      return ie(this, function (e) {
	        return (t = f({}, aR)).name = n, t.coverUrlOrImage = r, t.data = i, t.operatorUserIds = s, t.customType = a, [2, this._manager.createChannel(t)];
	      });
	    });
	  }, lD);

	  function lD() {
	    var e = null !== nD && nD.apply(this, arguments) || this;
	    return e.name = "openChannel", e;
	  }

	  function hD(e, t) {
	    var n = this;
	    return (n = rD.call(this, e, t) || this).includeFrozen = !0, n.includeMetaData = !0, n.nameKeyword = null, n.urlKeyword = null, n.customTypes = null, n.includeFrozen = null == (e = t.includeFrozen) || e, n.includeMetaData = null == (e = t.includeMetaData) || e, n.nameKeyword = null != (e = t.nameKeyword) ? e : null, n.urlKeyword = null != (e = t.urlKeyword) ? e : null, n.customTypes = null != (e = t.customTypes) ? e : null, n;
	  }

	  function dD(t, e) {
	    var n = iD.call(this, t, e) || this,
	        r = (n.token = null, n.channels = [], n.ts = null, e.next),
	        i = e.channels,
	        e = e.ts;
	    return n.token = r, i && 0 < i.length && (n.channels = i.map(function (e) {
	      return new ZR(t, e);
	    })), n.ts = "number" == typeof e ? e : null, n;
	  }

	  function fD(e) {
	    var t = this,
	        n = e.token,
	        r = e.limit,
	        i = e.nameKeyword,
	        s = e.urlKeyword,
	        a = e.customTypes,
	        o = e.includeFrozen,
	        e = e.includeMetaData;
	    return (t = sD.call(this) || this).method = T.GET, t.path = sg, t.params = w({
	      token: n,
	      limit: r,
	      name_contains: i,
	      url_contains: s,
	      custom_types: a,
	      show_frozen: o,
	      show_metadata: e
	    }), t;
	  }

	  function pD(i) {
	    return function (e, t, n) {
	      var e = bD(ID(e)),
	          t = ED(t),
	          r = e.length,
	          n = void 0 === n ? " " : bD(n);
	      return t <= r || "" == n ? e : ((r = wD(n, SD((t = t - r) / n.length))).length > t && (r = TD(r, 0, t)), i ? e + r : r + e);
	    };
	  }

	  var vD = function () {
	    g(s, Eh);
	    var t,
	        n,
	        r,
	        i = b(s);

	    function s(e) {
	      var t;
	      return _(this, s), (t = i.call(this))._ctx = e, t.wsClient = new z_(x(x({}, e), {}, {
	        parse: function (e) {
	          return Vl.parse(e);
	        }
	      })), t.apiClient = new W_(x(x({}, e), {}, {
	        parseResponse: function (e, t) {
	          return Vl.parseResponse(e, t);
	        }
	      })), t._unsubscriber = t.wsClient.on("command", function (e) {
	        t._dispatchEvent("command", e);
	      }), t;
	    }

	    return y(s, [{
	      key: "connectWs",
	      value: function () {
	        return this.wsClient.connect();
	      }
	    }, {
	      key: "sendAPI",
	      value: function (e) {
	        return this.apiClient.send(e);
	      }
	    }, {
	      key: "send",
	      value: (r = v(regeneratorRuntime.mark(function e(t) {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.abrupt("return", this.sendAPI(t));

	            case 1:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return r.apply(this, arguments);
	      })
	    }, {
	      key: "sendWithRetry",
	      value: (n = v(regeneratorRuntime.mark(function e(t) {
	        var n,
	            r,
	            i,
	            s,
	            a,
	            o = this,
	            u = arguments;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return n = 1 < u.length && void 0 !== u[1] ? u[1] : new Pv(), s = 2 < u.length && void 0 !== u[2] ? u[2] : {
	                count: 0,
	                deferred: new xv()
	              }, r = s.deferred, i = s.count, e.prev = 3, e.next = 6, this.send(t);

	            case 6:
	              s = e.sent, r.resolve(s), e.next = 14;
	              break;

	            case 10:
	              e.prev = 10, e.t0 = e.catch(3), 0 < (a = n.calcTimeout(i)) ? setTimeout(function () {
	                o.sendWithRetry(t, n, {
	                  count: i + 1,
	                  deferred: r
	                });
	              }, a) : r.reject(e.t0);

	            case 14:
	              return e.abrupt("return", r.promise);

	            case 15:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[3, 10]]);
	      })), function (e) {
	        return n.apply(this, arguments);
	      })
	    }, {
	      key: "_setSessionKey",
	      value: function (e) {
	        this.apiClient.setSessionKey(e), this.wsClient.setSessionKey(e);
	      }
	    }, {
	      key: "authenticate",
	      value: (t = v(regeneratorRuntime.mark(function e(t) {
	        var n, r, i;
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return n = t.userId, r = t.accessToken, this._ctx.sb || (this._ctx.sb = AO.init({
	                appId: this._ctx.appId,
	                modules: [new cD()]
	              })), e.prev = 2, e.next = 5, this._ctx.sb.connect(n, r);

	            case 5:
	              return i = Vl.createAuth(this._ctx.appId, n, r), e.next = 8, this.send(i);

	            case 8:
	              i = e.sent, this._setSessionKey(i.sbcall_session_token), this._ctx.liveEventManager.userId = i.user.user_id, e.next = 17;
	              break;

	            case 13:
	              throw e.prev = 13, e.t0 = e.catch(2), I.error("failed to authenticate user ".concat(n)), e.t0;

	            case 17:
	            case "end":
	              return e.stop();
	          }
	        }, e, this, [[2, 13]]);
	      })), function (e) {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "deauthenticate",
	      value: function () {
	        this.apiClient.clearSessionKey(), this.wsClient.clearSessionKey();
	      }
	    }]), s;
	  }(),
	      _D = Ce,
	      yD = zi,
	      mD = ue,
	      gD = RangeError,
	      Jn = et,
	      ED = Ne,
	      bD = zi,
	      ID = ue,
	      wD = Jn(function (e) {
	    var t = yD(mD(this)),
	        n = "",
	        r = _D(e);

	    if (r < 0 || r == 1 / 0) throw gD("Wrong number of repetitions");

	    for (; 0 < r; (r >>>= 1) && (t += t)) 1 & r && (n += t);

	    return n;
	  }),
	      TD = Jn("".slice),
	      SD = Math.ceil,
	      Jt = {
	    start: pD(!1),
	    end: pD(!0)
	  },
	      rt = /Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(yt),
	      gt = Me,
	      CD = Jt.start,
	      kD = (gt({
	    target: "String",
	    proto: !0,
	    forced: rt
	  }, {
	    padStart: function (e) {
	      return CD(this, e, 1 < arguments.length ? arguments[1] : void 0);
	    }
	  }), {
	    VERBOSE: {
	      level: -1,
	      name: uh.VERBOSE,
	      public: !1
	    },
	    DEBUG: {
	      level: 1,
	      name: uh.DEBUG,
	      public: !1
	    },
	    INFO: {
	      level: 2,
	      name: uh.INFO,
	      public: !0
	    },
	    WARNING: {
	      level: 3,
	      name: uh.WARNING,
	      public: !0
	    },
	    ERROR: {
	      level: 4,
	      name: uh.ERROR,
	      public: !0
	    },
	    NONE: {
	      level: 100,
	      name: uh.NONE,
	      public: !0
	    }
	  }),
	      ND = function () {
	    function t(e) {
	      _(this, t), this.level = e || uh.NONE;
	    }

	    return y(t, [{
	      key: "setLoggerLevel",
	      value: function (e) {
	        var t;
	        return null != (t = kD[e]) && t.public && (this.level = e), this.level;
	      }
	    }, {
	      key: "_enabledFor",
	      value: function (e) {
	        try {
	          return kD[this.level].level <= kD[e].level;
	        } catch (e) {
	          return !1;
	        }
	      }
	    }]), t;
	  }(),
	      AD = function () {
	    g(n, ND);
	    var t = b(n);

	    function n(e) {
	      return _(this, n), t.call(this, e);
	    }

	    return y(n, [{
	      key: "_getLogType",
	      value: function (e) {
	        switch (e) {
	          case uh.ERROR:
	            return "error";

	          case uh.WARNING:
	            return "warn";

	          default:
	            return "log";
	        }
	      }
	    }, {
	      key: "_getTimeString",
	      value: function (e) {
	        var t = e.getFullYear().toString().padStart(2, "0"),
	            n = (e.getMonth() + 1).toString().padStart(2, "0"),
	            r = e.getDate().toString().padStart(2, "0"),
	            i = e.getHours().toString().padStart(2, "0"),
	            s = e.getMinutes().toString().padStart(2, "0"),
	            a = e.getSeconds().toString().padStart(2, "0"),
	            e = e.getMilliseconds().toString().padStart(2, "0");
	        return "[".concat(t, ".").concat(n, ".").concat(r, " ").concat(i, ":").concat(s, ":").concat(a, ":").concat(e, "]");
	      }
	    }, {
	      key: "_permit",
	      value: function (e) {
	        var t = this._getLogType(e),
	            n = new Date();

	        if (this._enabledFor(e) && console && console[t]) {
	          for (var n = "".concat(this._getTimeString(n), " [").concat(e, "]"), r = arguments.length, i = new Array(1 < r ? r - 1 : 0), s = 1; s < r; s++) i[s - 1] = arguments[s];

	          (e = console)[t].apply(e, [n].concat(i));
	        }
	      }
	    }]), n;
	  }(),
	      ds = function () {
	    function e() {
	      _(this, e), m(this, "_ctx", {});
	    }

	    var t, n, r, i;
	    return y(e, [{
	      key: "init",
	      value: function (e) {
	        var t = e.appId,
	            e = e.chatInstance;
	        e && (this._ctx.sb = e), this._consoleLogListener = new AD(uh.NONE), I.addListener(this._consoleLogListener), this._ctx.appId = t, this._ctx.clientId = $(), this._ctx.commandRouter = new vD(this._ctx), this._ctx.deviceManager = new B_(), this._ctx.liveEventManager = new a_(this._ctx);
	      }
	    }, {
	      key: "setLoggerLevel",
	      value: function (e) {
	        return this._consoleLogListener.setLoggerLevel(e);
	      }
	    }, {
	      key: "authenticate",
	      value: (i = v(regeneratorRuntime.mark(function e(t, n) {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, this._ctx.commandRouter.authenticate({
	                userId: t,
	                accessToken: n
	              });

	            case 2:
	              return e.next = 4, this._ctx.commandRouter.connectWs();

	            case 4:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e, t) {
	        return i.apply(this, arguments);
	      })
	    }, {
	      key: "deauthenticate",
	      value: (r = v(regeneratorRuntime.mark(function e() {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.next = 2, this._ctx.sb.disconnect();

	            case 2:
	              this._ctx.commandRouter.deauthenticate(), this._ctx.liveEventManager.clear(), I.removeAllListener();

	            case 5:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function () {
	        return r.apply(this, arguments);
	      })
	    }, {
	      key: "createLiveEvent",
	      value: (n = v(regeneratorRuntime.mark(function e(t) {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.abrupt("return", this._ctx.liveEventManager.createLiveEvent(t));

	            case 1:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return n.apply(this, arguments);
	      })
	    }, {
	      key: "getLiveEvent",
	      value: (t = v(regeneratorRuntime.mark(function e(t) {
	        return regeneratorRuntime.wrap(function (e) {
	          for (;;) switch (e.prev = e.next) {
	            case 0:
	              return e.abrupt("return", this._ctx.liveEventManager.getLiveEvent(t));

	            case 1:
	            case "end":
	              return e.stop();
	          }
	        }, e, this);
	      })), function (e) {
	        return t.apply(this, arguments);
	      })
	    }, {
	      key: "createLiveEventListQuery",
	      value: function (e) {
	        return new As(e, this._ctx.commandRouter);
	      }
	    }, {
	      key: "getAvailableAudioInputDevices",
	      value: function () {
	        return this._ctx.deviceManager.getAvailableAudioInputDevices();
	      }
	    }, {
	      key: "getAvailableVideoInputDevices",
	      value: function () {
	        return this._ctx.deviceManager.getAvailableVideoInputDevices();
	      }
	    }]), e;
	  }(),
	      i = (D.ErrorCode = void 0, (ri = D.ErrorCode || (D.ErrorCode = {}))[ri.LIVE_EVENT_ID_NOT_FOUND = 2800100] = "LIVE_EVENT_ID_NOT_FOUND", ri[ri.ACTION_NOT_ALLOWED_IN_CURRENT_STATE = 2800101] = "ACTION_NOT_ALLOWED_IN_CURRENT_STATE", ri[ri.ACTION_NOT_ALLOWED_FOR_PARTICIPANT = 2800102] = "ACTION_NOT_ALLOWED_FOR_PARTICIPANT", ri[ri.USER_NOT_ENTERED_LIVE_EVENT = 2800103] = "USER_NOT_ENTERED_LIVE_EVENT", ri[ri.STREAM_NOT_STARTED = 2800104] = "STREAM_NOT_STARTED", ri[ri.CONNECTION_TO_MEDIA_STREAM_FAILED = 2800105] = "CONNECTION_TO_MEDIA_STREAM_FAILED", ri[ri.UNKNOWN_NETWORK_ERROR = 2800400] = "UNKNOWN_NETWORK_ERROR", ri[ri.QUERY_IN_PROGRESS = 2800900] = "QUERY_IN_PROGRESS", ri[ri.OPEN_CHANNEL_NOT_FETCHED = 2800901] = "OPEN_CHANNEL_NOT_FETCHED", new ds());

	  D.LiveEvent = s_, D.SendbirdLive = i, Object.defineProperty(D, "__esModule", {
	    value: !0
	  });
	});
} (sendbirdLive_min, sendbirdLive_min.exports));

var MODAL_ROOT$1 = 'sendbird-modal-root';

function styleInject(css, ref) {
  if (ref === void 0) ref = {};
  var insertAt = ref.insertAt;

  if (!css || typeof document === 'undefined') {
    return;
  }

  var head = document.head || document.getElementsByTagName('head')[0];
  var style = document.createElement('style');
  style.type = 'text/css';

  if (insertAt === 'top') {
    if (head.firstChild) {
      head.insertBefore(style, head.firstChild);
    } else {
      head.appendChild(style);
    }
  } else {
    head.appendChild(style);
  }

  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }
}

var css_248z$e = "@import url(\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap\");\nbody {\n  font-family: \"Roboto\", \"Verdana\", sans-serif;\n  font-size: 14px;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n:root {\n  --sendbird-light-primary-500: #491389;\n  --sendbird-light-primary-400: #6211c8;\n  --sendbird-light-primary-300: #742ddd;\n  --sendbird-light-primary-200: #c2a9fa;\n  --sendbird-light-primary-100: #dbd1ff;\n  --sendbird-light-secondary-500: #066858;\n  --sendbird-light-secondary-400: #027d69;\n  --sendbird-light-secondary-300: #259c72;\n  --sendbird-light-secondary-200: #69c085;\n  --sendbird-light-secondary-100: #a8e2ab;\n  --sendbird-light-information-100: #adc9ff;\n  --sendbird-light-error-500: #9d091e;\n  --sendbird-light-error-400: #bf0711;\n  --sendbird-light-error-300: #de360b;\n  --sendbird-light-error-200: #f66161;\n  --sendbird-light-error-100: #fdaaaa;\n  --sendbird-light-background-700: #000000;\n  --sendbird-light-background-600: #161616;\n  --sendbird-light-background-500: #2C2C2C;\n  --sendbird-light-background-400: #393939;\n  --sendbird-light-background-300: #bdbdbd;\n  --sendbird-light-background-200: #e0e0e0;\n  --sendbird-light-background-100: #eeeeee;\n  --sendbird-light-background-50: #FFFFFF;\n  --sendbird-light-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-light-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-light-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-light-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-light-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-light-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-light-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-light-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-light-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-light-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-light-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n:root {\n  --sendbird-dark-primary-500: #491389;\n  --sendbird-dark-primary-400: #6211c8;\n  --sendbird-dark-primary-300: #742ddd;\n  --sendbird-dark-primary-200: #c2a9fa;\n  --sendbird-dark-primary-100: #dbd1ff;\n  --sendbird-dark-secondary-500: #066858;\n  --sendbird-dark-secondary-400: #027d69;\n  --sendbird-dark-secondary-300: #259c72;\n  --sendbird-dark-secondary-200: #69c085;\n  --sendbird-dark-secondary-100: #a8e2ab;\n  --sendbird-dark-information-100: #adc9ff;\n  --sendbird-dark-error-500: #9d091e;\n  --sendbird-dark-error-400: #bf0711;\n  --sendbird-dark-error-300: #de360b;\n  --sendbird-dark-error-200: #f66161;\n  --sendbird-dark-error-100: #fdaaaa;\n  --sendbird-dark-background-700: #000000;\n  --sendbird-dark-background-600: #161616;\n  --sendbird-dark-background-500: #2C2C2C;\n  --sendbird-dark-background-400: #393939;\n  --sendbird-dark-background-300: #bdbdbd;\n  --sendbird-dark-background-200: #e0e0e0;\n  --sendbird-dark-background-100: #eeeeee;\n  --sendbird-dark-background-50: #FFFFFF;\n  --sendbird-dark-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-dark-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-dark-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-dark-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-dark-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-dark-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-dark-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-dark-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-dark-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-dark-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-dark-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n.sendbird-modal__mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 100000;\n}\n.sendbird-theme--light .sendbird-modal__mask {\n  background-color: var(--sendbird-light-overlay-02);\n}\n.sendbird-theme--dark .sendbird-modal__mask {\n  background-color: var(--sendbird-dark-overlay-02);\n}\n\n.sendbird-modal__container {\n  position: relative;\n  z-index: 100001;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 16px 24px 24px 24px;\n  border-radius: 4px;\n}\n.sendbird-theme--light .sendbird-modal__container {\n  background-color: var(--sendbird-light-background-50);\n  box-shadow: var(--sendbird-light-shadow-04);\n}\n.sendbird-theme--dark .sendbird-modal__container {\n  background-color: var(--sendbird-dark-background-500);\n  box-shadow: var(--sendbird-dark-shadow-04);\n}\n\n.sendbird-modal__wrapper {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  top: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.sendbird-modal--header {\n  position: relative;\n  margin-bottom: 16px;\n}\n.sendbird-modal--header .sendbird-modal--close {\n  display: inline-block;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.sendbird-modal--footer {\n  margin-top: 32px;\n  text-align: right;\n}\n.sendbird-modal--footer .sendbird-button:last-child {\n  margin-left: 8px;\n}";
styleInject(css_248z$e);

// idea from https://github.com/shibe97/react-hooks-use-modal
var Modal$1 = function (_a) {
    var children = _a.children, _b = _a.isOpen, isOpen = _b === void 0 ? false : _b; _a.close; var _c = _a.modalRoot, modalRoot = _c === void 0 ? MODAL_ROOT$1 : _c, _d = _a.className, className = _d === void 0 ? '' : _d, _e = _a.modalClassName, modalClassName = _e === void 0 ? '' : _e;
    if (!isOpen) {
        return null;
    }
    var root = document.getElementById(modalRoot);
    return reactDom.createPortal(React__default__default["default"].createElement("div", { className: "sendbird-modal__wrapper ".concat(className) },
        React__default__default["default"].createElement("div", { className: "sendbird-modal__mask" }),
        React__default__default["default"].createElement("div", { className: "sendbird-modal__container ".concat(modalClassName) }, children)), root);
};
var useModal = function (className, modalClassName) {
    var _a = React__default.useState(false), isOpen = _a[0], setOpen = _a[1];
    var open = React__default.useCallback(function () { return setOpen(true); }, [setOpen]);
    var close = React__default.useCallback(function () { return setOpen(false); }, [setOpen]);
    var ModalWrapper = function (_a) {
        var children = _a.children;
        return (React__default__default["default"].createElement(Modal$1, { isOpen: isOpen, close: close, className: className, modalClassName: modalClassName }, children));
    };
    return [ModalWrapper, open, close];
};

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);

    if (enumerableOnly) {
      symbols = symbols.filter(function (sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }

    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _iterableToArrayLimit(arr, i) {
  var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"];

  if (_i == null) return;
  var _arr = [];
  var _n = true;
  var _d = false;

  var _s, _e;

  try {
    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];

  return arr2;
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

var propTypes = {exports: {}};

var reactIs = {exports: {}};

var reactIs_production_min = {};

/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var hasRequiredReactIs_production_min;

function requireReactIs_production_min () {
	if (hasRequiredReactIs_production_min) return reactIs_production_min;
	hasRequiredReactIs_production_min = 1;

	var b = "function" === typeof Symbol && Symbol.for,
	    c = b ? Symbol.for("react.element") : 60103,
	    d = b ? Symbol.for("react.portal") : 60106,
	    e = b ? Symbol.for("react.fragment") : 60107,
	    f = b ? Symbol.for("react.strict_mode") : 60108,
	    g = b ? Symbol.for("react.profiler") : 60114,
	    h = b ? Symbol.for("react.provider") : 60109,
	    k = b ? Symbol.for("react.context") : 60110,
	    l = b ? Symbol.for("react.async_mode") : 60111,
	    m = b ? Symbol.for("react.concurrent_mode") : 60111,
	    n = b ? Symbol.for("react.forward_ref") : 60112,
	    p = b ? Symbol.for("react.suspense") : 60113,
	    q = b ? Symbol.for("react.suspense_list") : 60120,
	    r = b ? Symbol.for("react.memo") : 60115,
	    t = b ? Symbol.for("react.lazy") : 60116,
	    v = b ? Symbol.for("react.block") : 60121,
	    w = b ? Symbol.for("react.fundamental") : 60117,
	    x = b ? Symbol.for("react.responder") : 60118,
	    y = b ? Symbol.for("react.scope") : 60119;

	function z(a) {
	  if ("object" === typeof a && null !== a) {
	    var u = a.$$typeof;

	    switch (u) {
	      case c:
	        switch (a = a.type, a) {
	          case l:
	          case m:
	          case e:
	          case g:
	          case f:
	          case p:
	            return a;

	          default:
	            switch (a = a && a.$$typeof, a) {
	              case k:
	              case n:
	              case t:
	              case r:
	              case h:
	                return a;

	              default:
	                return u;
	            }

	        }

	      case d:
	        return u;
	    }
	  }
	}

	function A(a) {
	  return z(a) === m;
	}

	reactIs_production_min.AsyncMode = l;
	reactIs_production_min.ConcurrentMode = m;
	reactIs_production_min.ContextConsumer = k;
	reactIs_production_min.ContextProvider = h;
	reactIs_production_min.Element = c;
	reactIs_production_min.ForwardRef = n;
	reactIs_production_min.Fragment = e;
	reactIs_production_min.Lazy = t;
	reactIs_production_min.Memo = r;
	reactIs_production_min.Portal = d;
	reactIs_production_min.Profiler = g;
	reactIs_production_min.StrictMode = f;
	reactIs_production_min.Suspense = p;

	reactIs_production_min.isAsyncMode = function (a) {
	  return A(a) || z(a) === l;
	};

	reactIs_production_min.isConcurrentMode = A;

	reactIs_production_min.isContextConsumer = function (a) {
	  return z(a) === k;
	};

	reactIs_production_min.isContextProvider = function (a) {
	  return z(a) === h;
	};

	reactIs_production_min.isElement = function (a) {
	  return "object" === typeof a && null !== a && a.$$typeof === c;
	};

	reactIs_production_min.isForwardRef = function (a) {
	  return z(a) === n;
	};

	reactIs_production_min.isFragment = function (a) {
	  return z(a) === e;
	};

	reactIs_production_min.isLazy = function (a) {
	  return z(a) === t;
	};

	reactIs_production_min.isMemo = function (a) {
	  return z(a) === r;
	};

	reactIs_production_min.isPortal = function (a) {
	  return z(a) === d;
	};

	reactIs_production_min.isProfiler = function (a) {
	  return z(a) === g;
	};

	reactIs_production_min.isStrictMode = function (a) {
	  return z(a) === f;
	};

	reactIs_production_min.isSuspense = function (a) {
	  return z(a) === p;
	};

	reactIs_production_min.isValidElementType = function (a) {
	  return "string" === typeof a || "function" === typeof a || a === e || a === m || a === g || a === f || a === p || a === q || "object" === typeof a && null !== a && (a.$$typeof === t || a.$$typeof === r || a.$$typeof === h || a.$$typeof === k || a.$$typeof === n || a.$$typeof === w || a.$$typeof === x || a.$$typeof === y || a.$$typeof === v);
	};

	reactIs_production_min.typeOf = z;
	return reactIs_production_min;
}

var reactIs_development = {};

/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var hasRequiredReactIs_development;

function requireReactIs_development () {
	if (hasRequiredReactIs_development) return reactIs_development;
	hasRequiredReactIs_development = 1;

	if (process.env.NODE_ENV !== "production") {
	  (function () {
	    // nor polyfill, then a plain number is used for performance.

	    var hasSymbol = typeof Symbol === 'function' && Symbol.for;
	    var REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;
	    var REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;
	    var REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;
	    var REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;
	    var REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;
	    var REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;
	    var REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary
	    // (unstable) APIs that have been removed. Can we remove the symbols?

	    var REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;
	    var REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;
	    var REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;
	    var REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;
	    var REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;
	    var REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;
	    var REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;
	    var REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;
	    var REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;
	    var REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;
	    var REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;

	    function isValidElementType(type) {
	      return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.
	      type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);
	    }

	    function typeOf(object) {
	      if (typeof object === 'object' && object !== null) {
	        var $$typeof = object.$$typeof;

	        switch ($$typeof) {
	          case REACT_ELEMENT_TYPE:
	            var type = object.type;

	            switch (type) {
	              case REACT_ASYNC_MODE_TYPE:
	              case REACT_CONCURRENT_MODE_TYPE:
	              case REACT_FRAGMENT_TYPE:
	              case REACT_PROFILER_TYPE:
	              case REACT_STRICT_MODE_TYPE:
	              case REACT_SUSPENSE_TYPE:
	                return type;

	              default:
	                var $$typeofType = type && type.$$typeof;

	                switch ($$typeofType) {
	                  case REACT_CONTEXT_TYPE:
	                  case REACT_FORWARD_REF_TYPE:
	                  case REACT_LAZY_TYPE:
	                  case REACT_MEMO_TYPE:
	                  case REACT_PROVIDER_TYPE:
	                    return $$typeofType;

	                  default:
	                    return $$typeof;
	                }

	            }

	          case REACT_PORTAL_TYPE:
	            return $$typeof;
	        }
	      }

	      return undefined;
	    } // AsyncMode is deprecated along with isAsyncMode


	    var AsyncMode = REACT_ASYNC_MODE_TYPE;
	    var ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;
	    var ContextConsumer = REACT_CONTEXT_TYPE;
	    var ContextProvider = REACT_PROVIDER_TYPE;
	    var Element = REACT_ELEMENT_TYPE;
	    var ForwardRef = REACT_FORWARD_REF_TYPE;
	    var Fragment = REACT_FRAGMENT_TYPE;
	    var Lazy = REACT_LAZY_TYPE;
	    var Memo = REACT_MEMO_TYPE;
	    var Portal = REACT_PORTAL_TYPE;
	    var Profiler = REACT_PROFILER_TYPE;
	    var StrictMode = REACT_STRICT_MODE_TYPE;
	    var Suspense = REACT_SUSPENSE_TYPE;
	    var hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated

	    function isAsyncMode(object) {
	      {
	        if (!hasWarnedAboutDeprecatedIsAsyncMode) {
	          hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint

	          console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');
	        }
	      }
	      return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;
	    }

	    function isConcurrentMode(object) {
	      return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;
	    }

	    function isContextConsumer(object) {
	      return typeOf(object) === REACT_CONTEXT_TYPE;
	    }

	    function isContextProvider(object) {
	      return typeOf(object) === REACT_PROVIDER_TYPE;
	    }

	    function isElement(object) {
	      return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;
	    }

	    function isForwardRef(object) {
	      return typeOf(object) === REACT_FORWARD_REF_TYPE;
	    }

	    function isFragment(object) {
	      return typeOf(object) === REACT_FRAGMENT_TYPE;
	    }

	    function isLazy(object) {
	      return typeOf(object) === REACT_LAZY_TYPE;
	    }

	    function isMemo(object) {
	      return typeOf(object) === REACT_MEMO_TYPE;
	    }

	    function isPortal(object) {
	      return typeOf(object) === REACT_PORTAL_TYPE;
	    }

	    function isProfiler(object) {
	      return typeOf(object) === REACT_PROFILER_TYPE;
	    }

	    function isStrictMode(object) {
	      return typeOf(object) === REACT_STRICT_MODE_TYPE;
	    }

	    function isSuspense(object) {
	      return typeOf(object) === REACT_SUSPENSE_TYPE;
	    }

	    reactIs_development.AsyncMode = AsyncMode;
	    reactIs_development.ConcurrentMode = ConcurrentMode;
	    reactIs_development.ContextConsumer = ContextConsumer;
	    reactIs_development.ContextProvider = ContextProvider;
	    reactIs_development.Element = Element;
	    reactIs_development.ForwardRef = ForwardRef;
	    reactIs_development.Fragment = Fragment;
	    reactIs_development.Lazy = Lazy;
	    reactIs_development.Memo = Memo;
	    reactIs_development.Portal = Portal;
	    reactIs_development.Profiler = Profiler;
	    reactIs_development.StrictMode = StrictMode;
	    reactIs_development.Suspense = Suspense;
	    reactIs_development.isAsyncMode = isAsyncMode;
	    reactIs_development.isConcurrentMode = isConcurrentMode;
	    reactIs_development.isContextConsumer = isContextConsumer;
	    reactIs_development.isContextProvider = isContextProvider;
	    reactIs_development.isElement = isElement;
	    reactIs_development.isForwardRef = isForwardRef;
	    reactIs_development.isFragment = isFragment;
	    reactIs_development.isLazy = isLazy;
	    reactIs_development.isMemo = isMemo;
	    reactIs_development.isPortal = isPortal;
	    reactIs_development.isProfiler = isProfiler;
	    reactIs_development.isStrictMode = isStrictMode;
	    reactIs_development.isSuspense = isSuspense;
	    reactIs_development.isValidElementType = isValidElementType;
	    reactIs_development.typeOf = typeOf;
	  })();
	}
	return reactIs_development;
}

var hasRequiredReactIs;

function requireReactIs () {
	if (hasRequiredReactIs) return reactIs.exports;
	hasRequiredReactIs = 1;
	(function (module) {

		if (process.env.NODE_ENV === 'production') {
		  module.exports = requireReactIs_production_min();
		} else {
		  module.exports = requireReactIs_development();
		}
} (reactIs));
	return reactIs.exports;
}

/*
object-assign
(c) Sindre Sorhus
@license MIT
*/

var objectAssign$1;
var hasRequiredObjectAssign;

function requireObjectAssign () {
	if (hasRequiredObjectAssign) return objectAssign$1;
	hasRequiredObjectAssign = 1;
	/* eslint-disable no-unused-vars */

	var getOwnPropertySymbols = Object.getOwnPropertySymbols;
	var hasOwnProperty = Object.prototype.hasOwnProperty;
	var propIsEnumerable = Object.prototype.propertyIsEnumerable;

	function toObject(val) {
	  if (val === null || val === undefined) {
	    throw new TypeError('Object.assign cannot be called with null or undefined');
	  }

	  return Object(val);
	}

	function shouldUseNative() {
	  try {
	    if (!Object.assign) {
	      return false;
	    } // Detect buggy property enumeration order in older V8 versions.
	    // https://bugs.chromium.org/p/v8/issues/detail?id=4118


	    var test1 = new String('abc'); // eslint-disable-line no-new-wrappers

	    test1[5] = 'de';

	    if (Object.getOwnPropertyNames(test1)[0] === '5') {
	      return false;
	    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056


	    var test2 = {};

	    for (var i = 0; i < 10; i++) {
	      test2['_' + String.fromCharCode(i)] = i;
	    }

	    var order2 = Object.getOwnPropertyNames(test2).map(function (n) {
	      return test2[n];
	    });

	    if (order2.join('') !== '0123456789') {
	      return false;
	    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056


	    var test3 = {};
	    'abcdefghijklmnopqrst'.split('').forEach(function (letter) {
	      test3[letter] = letter;
	    });

	    if (Object.keys(Object.assign({}, test3)).join('') !== 'abcdefghijklmnopqrst') {
	      return false;
	    }

	    return true;
	  } catch (err) {
	    // We don't expect any of the above to throw, but better to be safe.
	    return false;
	  }
	}

	objectAssign$1 = shouldUseNative() ? Object.assign : function (target, source) {
	  var from;
	  var to = toObject(target);
	  var symbols;

	  for (var s = 1; s < arguments.length; s++) {
	    from = Object(arguments[s]);

	    for (var key in from) {
	      if (hasOwnProperty.call(from, key)) {
	        to[key] = from[key];
	      }
	    }

	    if (getOwnPropertySymbols) {
	      symbols = getOwnPropertySymbols(from);

	      for (var i = 0; i < symbols.length; i++) {
	        if (propIsEnumerable.call(from, symbols[i])) {
	          to[symbols[i]] = from[symbols[i]];
	        }
	      }
	    }
	  }

	  return to;
	};
	return objectAssign$1;
}

/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var ReactPropTypesSecret_1;
var hasRequiredReactPropTypesSecret;

function requireReactPropTypesSecret () {
	if (hasRequiredReactPropTypesSecret) return ReactPropTypesSecret_1;
	hasRequiredReactPropTypesSecret = 1;

	var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';
	ReactPropTypesSecret_1 = ReactPropTypesSecret;
	return ReactPropTypesSecret_1;
}

var has;
var hasRequiredHas;

function requireHas () {
	if (hasRequiredHas) return has;
	hasRequiredHas = 1;
	has = Function.call.bind(Object.prototype.hasOwnProperty);
	return has;
}

/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var checkPropTypes_1;
var hasRequiredCheckPropTypes;

function requireCheckPropTypes () {
	if (hasRequiredCheckPropTypes) return checkPropTypes_1;
	hasRequiredCheckPropTypes = 1;

	var printWarning = function () {};

	if (process.env.NODE_ENV !== 'production') {
	  var ReactPropTypesSecret = requireReactPropTypesSecret();

	  var loggedTypeFailures = {};

	  var has = requireHas();

	  printWarning = function (text) {
	    var message = 'Warning: ' + text;

	    if (typeof console !== 'undefined') {
	      console.error(message);
	    }

	    try {
	      // --- Welcome to debugging React ---
	      // This error was thrown as a convenience so that you can use this stack
	      // to find the callsite that caused this warning to fire.
	      throw new Error(message);
	    } catch (x) {
	      /**/
	    }
	  };
	}
	/**
	 * Assert that the values match with the type specs.
	 * Error messages are memorized and will only be shown once.
	 *
	 * @param {object} typeSpecs Map of name to a ReactPropType
	 * @param {object} values Runtime values that need to be type-checked
	 * @param {string} location e.g. "prop", "context", "child context"
	 * @param {string} componentName Name of the component for error messages.
	 * @param {?Function} getStack Returns the component stack.
	 * @private
	 */


	function checkPropTypes(typeSpecs, values, location, componentName, getStack) {
	  if (process.env.NODE_ENV !== 'production') {
	    for (var typeSpecName in typeSpecs) {
	      if (has(typeSpecs, typeSpecName)) {
	        var error; // Prop type validation may throw. In case they do, we don't want to
	        // fail the render phase where it didn't fail before. So we log it.
	        // After these have been cleaned up, we'll let them throw.

	        try {
	          // This is intentionally an invariant that gets caught. It's the same
	          // behavior as without this statement except with a better message.
	          if (typeof typeSpecs[typeSpecName] !== 'function') {
	            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');
	            err.name = 'Invariant Violation';
	            throw err;
	          }

	          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);
	        } catch (ex) {
	          error = ex;
	        }

	        if (error && !(error instanceof Error)) {
	          printWarning((componentName || 'React class') + ': type specification of ' + location + ' `' + typeSpecName + '` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a ' + typeof error + '. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).');
	        }

	        if (error instanceof Error && !(error.message in loggedTypeFailures)) {
	          // Only monitor this failure once because there tends to be a lot of the
	          // same error.
	          loggedTypeFailures[error.message] = true;
	          var stack = getStack ? getStack() : '';
	          printWarning('Failed ' + location + ' type: ' + error.message + (stack != null ? stack : ''));
	        }
	      }
	    }
	  }
	}
	/**
	 * Resets warning cache when testing.
	 *
	 * @private
	 */


	checkPropTypes.resetWarningCache = function () {
	  if (process.env.NODE_ENV !== 'production') {
	    loggedTypeFailures = {};
	  }
	};

	checkPropTypes_1 = checkPropTypes;
	return checkPropTypes_1;
}

/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var factoryWithTypeCheckers;
var hasRequiredFactoryWithTypeCheckers;

function requireFactoryWithTypeCheckers () {
	if (hasRequiredFactoryWithTypeCheckers) return factoryWithTypeCheckers;
	hasRequiredFactoryWithTypeCheckers = 1;

	var ReactIs = requireReactIs();

	var assign = requireObjectAssign();

	var ReactPropTypesSecret = requireReactPropTypesSecret();

	var has = requireHas();

	var checkPropTypes = requireCheckPropTypes();

	var printWarning = function () {};

	if (process.env.NODE_ENV !== 'production') {
	  printWarning = function (text) {
	    var message = 'Warning: ' + text;

	    if (typeof console !== 'undefined') {
	      console.error(message);
	    }

	    try {
	      // --- Welcome to debugging React ---
	      // This error was thrown as a convenience so that you can use this stack
	      // to find the callsite that caused this warning to fire.
	      throw new Error(message);
	    } catch (x) {}
	  };
	}

	function emptyFunctionThatReturnsNull() {
	  return null;
	}

	factoryWithTypeCheckers = function (isValidElement, throwOnDirectAccess) {
	  /* global Symbol */
	  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;
	  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.

	  /**
	   * Returns the iterator method function contained on the iterable object.
	   *
	   * Be sure to invoke the function with the iterable as context:
	   *
	   *     var iteratorFn = getIteratorFn(myIterable);
	   *     if (iteratorFn) {
	   *       var iterator = iteratorFn.call(myIterable);
	   *       ...
	   *     }
	   *
	   * @param {?object} maybeIterable
	   * @return {?function}
	   */

	  function getIteratorFn(maybeIterable) {
	    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);

	    if (typeof iteratorFn === 'function') {
	      return iteratorFn;
	    }
	  }
	  /**
	   * Collection of methods that allow declaration and validation of props that are
	   * supplied to React components. Example usage:
	   *
	   *   var Props = require('ReactPropTypes');
	   *   var MyArticle = React.createClass({
	   *     propTypes: {
	   *       // An optional string prop named "description".
	   *       description: Props.string,
	   *
	   *       // A required enum prop named "category".
	   *       category: Props.oneOf(['News','Photos']).isRequired,
	   *
	   *       // A prop named "dialog" that requires an instance of Dialog.
	   *       dialog: Props.instanceOf(Dialog).isRequired
	   *     },
	   *     render: function() { ... }
	   *   });
	   *
	   * A more formal specification of how these methods are used:
	   *
	   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)
	   *   decl := ReactPropTypes.{type}(.isRequired)?
	   *
	   * Each and every declaration produces a function with the same signature. This
	   * allows the creation of custom validation functions. For example:
	   *
	   *  var MyLink = React.createClass({
	   *    propTypes: {
	   *      // An optional string or URI prop named "href".
	   *      href: function(props, propName, componentName) {
	   *        var propValue = props[propName];
	   *        if (propValue != null && typeof propValue !== 'string' &&
	   *            !(propValue instanceof URI)) {
	   *          return new Error(
	   *            'Expected a string or an URI for ' + propName + ' in ' +
	   *            componentName
	   *          );
	   *        }
	   *      }
	   *    },
	   *    render: function() {...}
	   *  });
	   *
	   * @internal
	   */


	  var ANONYMOUS = '<<anonymous>>'; // Important!
	  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.

	  var ReactPropTypes = {
	    array: createPrimitiveTypeChecker('array'),
	    bigint: createPrimitiveTypeChecker('bigint'),
	    bool: createPrimitiveTypeChecker('boolean'),
	    func: createPrimitiveTypeChecker('function'),
	    number: createPrimitiveTypeChecker('number'),
	    object: createPrimitiveTypeChecker('object'),
	    string: createPrimitiveTypeChecker('string'),
	    symbol: createPrimitiveTypeChecker('symbol'),
	    any: createAnyTypeChecker(),
	    arrayOf: createArrayOfTypeChecker,
	    element: createElementTypeChecker(),
	    elementType: createElementTypeTypeChecker(),
	    instanceOf: createInstanceTypeChecker,
	    node: createNodeChecker(),
	    objectOf: createObjectOfTypeChecker,
	    oneOf: createEnumTypeChecker,
	    oneOfType: createUnionTypeChecker,
	    shape: createShapeTypeChecker,
	    exact: createStrictShapeTypeChecker
	  };
	  /**
	   * inlined Object.is polyfill to avoid requiring consumers ship their own
	   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is
	   */

	  /*eslint-disable no-self-compare*/

	  function is(x, y) {
	    // SameValue algorithm
	    if (x === y) {
	      // Steps 1-5, 7-10
	      // Steps 6.b-6.e: +0 != -0
	      return x !== 0 || 1 / x === 1 / y;
	    } else {
	      // Step 6.a: NaN == NaN
	      return x !== x && y !== y;
	    }
	  }
	  /*eslint-enable no-self-compare*/

	  /**
	   * We use an Error-like object for backward compatibility as people may call
	   * PropTypes directly and inspect their output. However, we don't use real
	   * Errors anymore. We don't inspect their stack anyway, and creating them
	   * is prohibitively expensive if they are created too often, such as what
	   * happens in oneOfType() for any type before the one that matched.
	   */


	  function PropTypeError(message, data) {
	    this.message = message;
	    this.data = data && typeof data === 'object' ? data : {};
	    this.stack = '';
	  } // Make `instanceof Error` still work for returned errors.


	  PropTypeError.prototype = Error.prototype;

	  function createChainableTypeChecker(validate) {
	    if (process.env.NODE_ENV !== 'production') {
	      var manualPropTypeCallCache = {};
	      var manualPropTypeWarningCount = 0;
	    }

	    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {
	      componentName = componentName || ANONYMOUS;
	      propFullName = propFullName || propName;

	      if (secret !== ReactPropTypesSecret) {
	        if (throwOnDirectAccess) {
	          // New behavior only for users of `prop-types` package
	          var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use `PropTypes.checkPropTypes()` to call them. ' + 'Read more at http://fb.me/use-check-prop-types');
	          err.name = 'Invariant Violation';
	          throw err;
	        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {
	          // Old behavior for people using React.PropTypes
	          var cacheKey = componentName + ':' + propName;

	          if (!manualPropTypeCallCache[cacheKey] && // Avoid spamming the console because they are often not actionable except for lib authors
	          manualPropTypeWarningCount < 3) {
	            printWarning('You are manually calling a React.PropTypes validation ' + 'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' + 'and will throw in the standalone `prop-types` package. ' + 'You may be seeing this warning due to a third-party PropTypes ' + 'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.');
	            manualPropTypeCallCache[cacheKey] = true;
	            manualPropTypeWarningCount++;
	          }
	        }
	      }

	      if (props[propName] == null) {
	        if (isRequired) {
	          if (props[propName] === null) {
	            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));
	          }

	          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));
	        }

	        return null;
	      } else {
	        return validate(props, propName, componentName, location, propFullName);
	      }
	    }

	    var chainedCheckType = checkType.bind(null, false);
	    chainedCheckType.isRequired = checkType.bind(null, true);
	    return chainedCheckType;
	  }

	  function createPrimitiveTypeChecker(expectedType) {
	    function validate(props, propName, componentName, location, propFullName, secret) {
	      var propValue = props[propName];
	      var propType = getPropType(propValue);

	      if (propType !== expectedType) {
	        // `propValue` being instance of, say, date/regexp, pass the 'object'
	        // check, but we can offer a more precise error message here rather than
	        // 'of type `object`'.
	        var preciseType = getPreciseType(propValue);
	        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'), {
	          expectedType: expectedType
	        });
	      }

	      return null;
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function createAnyTypeChecker() {
	    return createChainableTypeChecker(emptyFunctionThatReturnsNull);
	  }

	  function createArrayOfTypeChecker(typeChecker) {
	    function validate(props, propName, componentName, location, propFullName) {
	      if (typeof typeChecker !== 'function') {
	        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');
	      }

	      var propValue = props[propName];

	      if (!Array.isArray(propValue)) {
	        var propType = getPropType(propValue);
	        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));
	      }

	      for (var i = 0; i < propValue.length; i++) {
	        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);

	        if (error instanceof Error) {
	          return error;
	        }
	      }

	      return null;
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function createElementTypeChecker() {
	    function validate(props, propName, componentName, location, propFullName) {
	      var propValue = props[propName];

	      if (!isValidElement(propValue)) {
	        var propType = getPropType(propValue);
	        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));
	      }

	      return null;
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function createElementTypeTypeChecker() {
	    function validate(props, propName, componentName, location, propFullName) {
	      var propValue = props[propName];

	      if (!ReactIs.isValidElementType(propValue)) {
	        var propType = getPropType(propValue);
	        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));
	      }

	      return null;
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function createInstanceTypeChecker(expectedClass) {
	    function validate(props, propName, componentName, location, propFullName) {
	      if (!(props[propName] instanceof expectedClass)) {
	        var expectedClassName = expectedClass.name || ANONYMOUS;
	        var actualClassName = getClassName(props[propName]);
	        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));
	      }

	      return null;
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function createEnumTypeChecker(expectedValues) {
	    if (!Array.isArray(expectedValues)) {
	      if (process.env.NODE_ENV !== 'production') {
	        if (arguments.length > 1) {
	          printWarning('Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' + 'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).');
	        } else {
	          printWarning('Invalid argument supplied to oneOf, expected an array.');
	        }
	      }

	      return emptyFunctionThatReturnsNull;
	    }

	    function validate(props, propName, componentName, location, propFullName) {
	      var propValue = props[propName];

	      for (var i = 0; i < expectedValues.length; i++) {
	        if (is(propValue, expectedValues[i])) {
	          return null;
	        }
	      }

	      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {
	        var type = getPreciseType(value);

	        if (type === 'symbol') {
	          return String(value);
	        }

	        return value;
	      });
	      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function createObjectOfTypeChecker(typeChecker) {
	    function validate(props, propName, componentName, location, propFullName) {
	      if (typeof typeChecker !== 'function') {
	        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');
	      }

	      var propValue = props[propName];
	      var propType = getPropType(propValue);

	      if (propType !== 'object') {
	        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));
	      }

	      for (var key in propValue) {
	        if (has(propValue, key)) {
	          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);

	          if (error instanceof Error) {
	            return error;
	          }
	        }
	      }

	      return null;
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function createUnionTypeChecker(arrayOfTypeCheckers) {
	    if (!Array.isArray(arrayOfTypeCheckers)) {
	      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;
	      return emptyFunctionThatReturnsNull;
	    }

	    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {
	      var checker = arrayOfTypeCheckers[i];

	      if (typeof checker !== 'function') {
	        printWarning('Invalid argument supplied to oneOfType. Expected an array of check functions, but ' + 'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.');
	        return emptyFunctionThatReturnsNull;
	      }
	    }

	    function validate(props, propName, componentName, location, propFullName) {
	      var expectedTypes = [];

	      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {
	        var checker = arrayOfTypeCheckers[i];
	        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret);

	        if (checkerResult == null) {
	          return null;
	        }

	        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {
	          expectedTypes.push(checkerResult.data.expectedType);
	        }
	      }

	      var expectedTypesMessage = expectedTypes.length > 0 ? ', expected one of type [' + expectedTypes.join(', ') + ']' : '';
	      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function createNodeChecker() {
	    function validate(props, propName, componentName, location, propFullName) {
	      if (!isNode(props[propName])) {
	        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));
	      }

	      return null;
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function invalidValidatorError(componentName, location, propFullName, key, type) {
	    return new PropTypeError((componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + type + '`.');
	  }

	  function createShapeTypeChecker(shapeTypes) {
	    function validate(props, propName, componentName, location, propFullName) {
	      var propValue = props[propName];
	      var propType = getPropType(propValue);

	      if (propType !== 'object') {
	        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));
	      }

	      for (var key in shapeTypes) {
	        var checker = shapeTypes[key];

	        if (typeof checker !== 'function') {
	          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));
	        }

	        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);

	        if (error) {
	          return error;
	        }
	      }

	      return null;
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function createStrictShapeTypeChecker(shapeTypes) {
	    function validate(props, propName, componentName, location, propFullName) {
	      var propValue = props[propName];
	      var propType = getPropType(propValue);

	      if (propType !== 'object') {
	        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));
	      } // We need to check all keys in case some are required but missing from props.


	      var allKeys = assign({}, props[propName], shapeTypes);

	      for (var key in allKeys) {
	        var checker = shapeTypes[key];

	        if (has(shapeTypes, key) && typeof checker !== 'function') {
	          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));
	        }

	        if (!checker) {
	          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' + '\nBad object: ' + JSON.stringify(props[propName], null, '  ') + '\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  '));
	        }

	        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);

	        if (error) {
	          return error;
	        }
	      }

	      return null;
	    }

	    return createChainableTypeChecker(validate);
	  }

	  function isNode(propValue) {
	    switch (typeof propValue) {
	      case 'number':
	      case 'string':
	      case 'undefined':
	        return true;

	      case 'boolean':
	        return !propValue;

	      case 'object':
	        if (Array.isArray(propValue)) {
	          return propValue.every(isNode);
	        }

	        if (propValue === null || isValidElement(propValue)) {
	          return true;
	        }

	        var iteratorFn = getIteratorFn(propValue);

	        if (iteratorFn) {
	          var iterator = iteratorFn.call(propValue);
	          var step;

	          if (iteratorFn !== propValue.entries) {
	            while (!(step = iterator.next()).done) {
	              if (!isNode(step.value)) {
	                return false;
	              }
	            }
	          } else {
	            // Iterator will provide entry [k,v] tuples rather than values.
	            while (!(step = iterator.next()).done) {
	              var entry = step.value;

	              if (entry) {
	                if (!isNode(entry[1])) {
	                  return false;
	                }
	              }
	            }
	          }
	        } else {
	          return false;
	        }

	        return true;

	      default:
	        return false;
	    }
	  }

	  function isSymbol(propType, propValue) {
	    // Native Symbol.
	    if (propType === 'symbol') {
	      return true;
	    } // falsy value can't be a Symbol


	    if (!propValue) {
	      return false;
	    } // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'


	    if (propValue['@@toStringTag'] === 'Symbol') {
	      return true;
	    } // Fallback for non-spec compliant Symbols which are polyfilled.


	    if (typeof Symbol === 'function' && propValue instanceof Symbol) {
	      return true;
	    }

	    return false;
	  } // Equivalent of `typeof` but with special handling for array and regexp.


	  function getPropType(propValue) {
	    var propType = typeof propValue;

	    if (Array.isArray(propValue)) {
	      return 'array';
	    }

	    if (propValue instanceof RegExp) {
	      // Old webkits (at least until Android 4.0) return 'function' rather than
	      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/
	      // passes PropTypes.object.
	      return 'object';
	    }

	    if (isSymbol(propType, propValue)) {
	      return 'symbol';
	    }

	    return propType;
	  } // This handles more types than `getPropType`. Only used for error messages.
	  // See `createPrimitiveTypeChecker`.


	  function getPreciseType(propValue) {
	    if (typeof propValue === 'undefined' || propValue === null) {
	      return '' + propValue;
	    }

	    var propType = getPropType(propValue);

	    if (propType === 'object') {
	      if (propValue instanceof Date) {
	        return 'date';
	      } else if (propValue instanceof RegExp) {
	        return 'regexp';
	      }
	    }

	    return propType;
	  } // Returns a string that is postfixed to a warning about an invalid type.
	  // For example, "undefined" or "of type array"


	  function getPostfixForTypeWarning(value) {
	    var type = getPreciseType(value);

	    switch (type) {
	      case 'array':
	      case 'object':
	        return 'an ' + type;

	      case 'boolean':
	      case 'date':
	      case 'regexp':
	        return 'a ' + type;

	      default:
	        return type;
	    }
	  } // Returns class name of the object, if any.


	  function getClassName(propValue) {
	    if (!propValue.constructor || !propValue.constructor.name) {
	      return ANONYMOUS;
	    }

	    return propValue.constructor.name;
	  }

	  ReactPropTypes.checkPropTypes = checkPropTypes;
	  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;
	  ReactPropTypes.PropTypes = ReactPropTypes;
	  return ReactPropTypes;
	};
	return factoryWithTypeCheckers;
}

/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var factoryWithThrowingShims;
var hasRequiredFactoryWithThrowingShims;

function requireFactoryWithThrowingShims () {
	if (hasRequiredFactoryWithThrowingShims) return factoryWithThrowingShims;
	hasRequiredFactoryWithThrowingShims = 1;

	var ReactPropTypesSecret = requireReactPropTypesSecret();

	function emptyFunction() {}

	function emptyFunctionWithReset() {}

	emptyFunctionWithReset.resetWarningCache = emptyFunction;

	factoryWithThrowingShims = function () {
	  function shim(props, propName, componentName, location, propFullName, secret) {
	    if (secret === ReactPropTypesSecret) {
	      // It is still safe when called from React.
	      return;
	    }

	    var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');
	    err.name = 'Invariant Violation';
	    throw err;
	  }
	  shim.isRequired = shim;

	  function getShim() {
	    return shim;
	  }
	  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.

	  var ReactPropTypes = {
	    array: shim,
	    bigint: shim,
	    bool: shim,
	    func: shim,
	    number: shim,
	    object: shim,
	    string: shim,
	    symbol: shim,
	    any: shim,
	    arrayOf: getShim,
	    element: shim,
	    elementType: shim,
	    instanceOf: getShim,
	    node: shim,
	    objectOf: getShim,
	    oneOf: getShim,
	    oneOfType: getShim,
	    shape: getShim,
	    exact: getShim,
	    checkPropTypes: emptyFunctionWithReset,
	    resetWarningCache: emptyFunction
	  };
	  ReactPropTypes.PropTypes = ReactPropTypes;
	  return ReactPropTypes;
	};
	return factoryWithThrowingShims;
}

/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

if (process.env.NODE_ENV !== 'production') {
  var ReactIs = requireReactIs(); // By explicitly using `prop-types` you are opting into new development behavior.
  // http://fb.me/prop-types-in-prod


  var throwOnDirectAccess = true;
  propTypes.exports = requireFactoryWithTypeCheckers()(ReactIs.isElement, throwOnDirectAccess);
} else {
  // By explicitly using `prop-types` you are opting into new production behavior.
  // http://fb.me/prop-types-in-prod
  propTypes.exports = requireFactoryWithThrowingShims()();
}

var SendbirdSdkContext = /*#__PURE__*/React__default__default["default"].createContext();

var withSendbirdContext = function withSendbirdContext(OriginalComponent, mapStoreToProps) {
  var ContextAwareComponent = function ContextAwareComponent(props) {
    return /*#__PURE__*/React__default__default["default"].createElement(SendbirdSdkContext.Consumer, null, function (context) {
      if (mapStoreToProps && typeof mapStoreToProps !== 'function') {
        // eslint-disable-next-line no-console
        console.warn('Second parameter to withSendbirdContext must be a pure function');
      }

      var mergedProps = mapStoreToProps && typeof mapStoreToProps === 'function' ? _objectSpread2(_objectSpread2({}, mapStoreToProps(context)), props) : _objectSpread2(_objectSpread2({}, context), props); // eslint-disable-next-line react/jsx-props-no-spreading

      return /*#__PURE__*/React__default__default["default"].createElement(OriginalComponent, mergedProps);
    });
  };

  var componentName = OriginalComponent.displayName || OriginalComponent.name || 'Component';
  ContextAwareComponent.displayName = "SendbirdAware".concat(componentName);
  return ContextAwareComponent;
};

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var e = function (t, n) {
  return e = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (e, t) {
    e.__proto__ = t;
  } || function (e, t) {
    for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
  }, e(t, n);
};

function t(t, n) {
  if ("function" != typeof n && null !== n) throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");

  function r() {
    this.constructor = t;
  }

  e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
}

var n$1 = function () {
  return n$1 = Object.assign || function (e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);

    return e;
  }, n$1.apply(this, arguments);
};

function r$1(e, t, n, r) {
  return new (n || (n = Promise))(function (i, s) {
    function o(e) {
      try {
        u(r.next(e));
      } catch (e) {
        s(e);
      }
    }

    function a(e) {
      try {
        u(r.throw(e));
      } catch (e) {
        s(e);
      }
    }

    function u(e) {
      var t;
      e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {
        e(t);
      })).then(o, a);
    }

    u((r = r.apply(e, t || [])).next());
  });
}

function i$1(e, t) {
  var n,
      r,
      i,
      s,
      o = {
    label: 0,
    sent: function () {
      if (1 & i[0]) throw i[1];
      return i[1];
    },
    trys: [],
    ops: []
  };
  return s = {
    next: a(0),
    throw: a(1),
    return: a(2)
  }, "function" == typeof Symbol && (s[Symbol.iterator] = function () {
    return this;
  }), s;

  function a(s) {
    return function (a) {
      return function (s) {
        if (n) throw new TypeError("Generator is already executing.");

        for (; o;) try {
          if (n = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i;

          switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) {
            case 0:
            case 1:
              i = s;
              break;

            case 4:
              return o.label++, {
                value: s[1],
                done: !1
              };

            case 5:
              o.label++, r = s[1], s = [0];
              continue;

            case 7:
              s = o.ops.pop(), o.trys.pop();
              continue;

            default:
              if (!(i = o.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                o = 0;
                continue;
              }

              if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                o.label = s[1];
                break;
              }

              if (6 === s[0] && o.label < i[1]) {
                o.label = i[1], i = s;
                break;
              }

              if (i && o.label < i[2]) {
                o.label = i[2], o.ops.push(s);
                break;
              }

              i[2] && o.ops.pop(), o.trys.pop();
              continue;
          }

          s = t.call(e, o);
        } catch (e) {
          s = [6, e], r = 0;
        } finally {
          n = i = 0;
        }

        if (5 & s[0]) throw s[1];
        return {
          value: s[0] ? s[1] : void 0,
          done: !0
        };
      }([s, a]);
    };
  }
}

function s(e) {
  var t = "function" == typeof Symbol && Symbol.iterator,
      n = t && e[t],
      r = 0;
  if (n) return n.call(e);
  if (e && "number" == typeof e.length) return {
    next: function () {
      return e && r >= e.length && (e = void 0), {
        value: e && e[r++],
        done: !e
      };
    }
  };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}

function o(e, t) {
  var n = "function" == typeof Symbol && e[Symbol.iterator];
  if (!n) return e;
  var r,
      i,
      s = n.call(e),
      o = [];

  try {
    for (; (void 0 === t || t-- > 0) && !(r = s.next()).done;) o.push(r.value);
  } catch (e) {
    i = {
      error: e
    };
  } finally {
    try {
      r && !r.done && (n = s.return) && n.call(s);
    } finally {
      if (i) throw i.error;
    }
  }

  return o;
}

function a(e, t, n) {
  if (n || 2 === arguments.length) for (var r, i = 0, s = t.length; i < s; i++) !r && i in t || (r || (r = Array.prototype.slice.call(t, 0, i)), r[i] = t[i]);
  return e.concat(r || Array.prototype.slice.call(t));
}

var u$1,
    c$1 = "4.0.4",
    l$2 = function () {
  function e() {}

  return Object.defineProperty(e, "OS_VERSION", {
    get: function () {
      return "undefined" != typeof navigator && navigator.userAgent ? navigator.userAgent.replace(/,/g, ".") : "noAgent";
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e, "SDK_VERSION", {
    get: function () {
      return "4.0.4";
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e, "SDK_MAJOR_VERSION", {
    get: function () {
      return e.SDK_VERSION.split(".")[0];
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e, "DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL", {
    get: function () {
      return 100;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e, "INTERNAL_CALL", {
    get: function () {
      return "ic";
    },
    enumerable: !1,
    configurable: !0
  }), e;
}();

!function (e) {
  e[e.INVALID_TOKEN = 400111] = "INVALID_TOKEN", e[e.SESSION_KEY_EXPIRED = 400302] = "SESSION_KEY_EXPIRED", e[e.SESSION_TOKEN_EXPIRED = 400309] = "SESSION_TOKEN_EXPIRED", e[e.INTERNAL_SERVER_ERROR = 500901] = "INTERNAL_SERVER_ERROR", e[e.RATE_LIMIT_EXCEEDED = 500910] = "RATE_LIMIT_EXCEEDED", e[e.UNKNOWN_SERVER_ERROR = 900200] = "UNKNOWN_SERVER_ERROR", e[e.DEBUG_MODE_REQUIRED = 7e5] = "DEBUG_MODE_REQUIRED", e[e.LOST_INSTANCE = 700100] = "LOST_INSTANCE", e[e.CONNECTION_RENEW = 700102] = "CONNECTION_RENEW", e[e.INVALID_CONNECTION_STATE_TRANSITION = 700200] = "INVALID_CONNECTION_STATE_TRANSITION", e[e.INVALID_INITIALIZATION = 800100] = "INVALID_INITIALIZATION", e[e.CONNECTION_REQUIRED = 800101] = "CONNECTION_REQUIRED", e[e.CONNECTION_CANCELED = 800102] = "CONNECTION_CANCELED", e[e.INVALID_PARAMETER = 800110] = "INVALID_PARAMETER", e[e.NETWORK_ERROR = 800120] = "NETWORK_ERROR", e[e.NETWORK_ROUTING_ERROR = 800121] = "NETWORK_ROUTING_ERROR", e[e.MALFORMED_DATA = 800130] = "MALFORMED_DATA", e[e.MALFORMED_ERROR_DATA = 800140] = "MALFORMED_ERROR_DATA", e[e.WRONG_CHANNEL_TYPE = 800150] = "WRONG_CHANNEL_TYPE", e[e.MARK_AS_READ_RATE_LIMIT_EXCEEDED = 800160] = "MARK_AS_READ_RATE_LIMIT_EXCEEDED", e[e.QUERY_IN_PROGRESS = 800170] = "QUERY_IN_PROGRESS", e[e.ACK_TIMEOUT = 800180] = "ACK_TIMEOUT", e[e.LOGIN_TIMEOUT = 800190] = "LOGIN_TIMEOUT", e[e.WEBSOCKET_CONNECTION_CLOSED = 800200] = "WEBSOCKET_CONNECTION_CLOSED", e[e.WEBSOCKET_CONNECTION_FAILED = 800210] = "WEBSOCKET_CONNECTION_FAILED", e[e.REQUEST_FAILED = 800220] = "REQUEST_FAILED", e[e.FILE_UPLOAD_CANCEL_FAILED = 800230] = "FILE_UPLOAD_CANCEL_FAILED", e[e.REQUEST_CANCELED = 800240] = "REQUEST_CANCELED", e[e.REQUEST_DUPLICATED = 800250] = "REQUEST_DUPLICATED", e[e.FILE_SIZE_LIMIT_EXCEEDED = 800260] = "FILE_SIZE_LIMIT_EXCEEDED", e[e.SESSION_TOKEN_REQUEST_FAILED = 800500] = "SESSION_TOKEN_REQUEST_FAILED", e[e.SESSION_TOKEN_REFRESHED = 800501] = "SESSION_TOKEN_REFRESHED", e[e.SESSION_TOKEN_REFRESH_FAILED = 800502] = "SESSION_TOKEN_REFRESH_FAILED";
}(u$1 || (u$1 = {}));

var d$1,
    h$1 = function (e) {
  return !(e instanceof p$1 && !e.shouldThrowOutside);
},
    p$1 = function (e) {
  function n(t) {
    var r = t.code,
        i = void 0 === r ? 0 : r,
        s = t.message,
        o = e.call(this, s) || this;
    return o.shouldThrowOutside = !1, o.name = "SendbirdError", o.code = i, Object.setPrototypeOf(o, n.prototype), o;
  }

  return t(n, e), Object.defineProperty(n.prototype, "isInvalidTokenError", {
    get: function () {
      return this.code === u$1.INVALID_TOKEN;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n.prototype, "isSessionTokenExpiredError", {
    get: function () {
      return this.code === u$1.SESSION_TOKEN_EXPIRED;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n.prototype, "isSessionKeyExpiredError", {
    get: function () {
      return this.code === u$1.SESSION_KEY_EXPIRED;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "debugModeRequired", {
    get: function () {
      return new n({
        code: u$1.DEBUG_MODE_REQUIRED,
        message: "Cannot run this operation in production mode."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "lostInstance", {
    get: function () {
      return new n({
        code: u$1.LOST_INSTANCE,
        message: "Instance ID is missing. It should belong to an instance."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "connectionRenew", {
    get: function () {
      return new n({
        code: u$1.CONNECTION_RENEW,
        message: "Connection restarts."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "invalidConnectionStateTransition", {
    get: function () {
      return new n({
        code: u$1.INVALID_CONNECTION_STATE_TRANSITION,
        message: "Invalid connection state transition."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "connectionRequired", {
    get: function () {
      return new n({
        code: u$1.CONNECTION_REQUIRED,
        message: "Connection is required."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "connectionCanceled", {
    get: function () {
      return new n({
        code: u$1.CONNECTION_CANCELED,
        message: "Connection is canceled."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "invalidParameters", {
    get: function () {
      return new n({
        code: u$1.INVALID_PARAMETER,
        message: "Invalid parameters."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "networkError", {
    get: function () {
      return new n({
        code: u$1.NETWORK_ERROR,
        message: "There was a network error."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "markAsReadAllRateLimitExceeded", {
    get: function () {
      return new n({
        code: u$1.MARK_AS_READ_RATE_LIMIT_EXCEEDED,
        message: "markAsRead rate limit exceeded."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "queryInProgress", {
    get: function () {
      return new n({
        code: u$1.QUERY_IN_PROGRESS,
        message: "Query in progress."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "noAckTimeout", {
    get: function () {
      return new n({
        code: u$1.ACK_TIMEOUT,
        message: "Command received no ack."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "loginTimeout", {
    get: function () {
      return new n({
        code: u$1.LOGIN_TIMEOUT,
        message: "Connection timeout."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "connectionClosed", {
    get: function () {
      return new n({
        code: u$1.WEBSOCKET_CONNECTION_CLOSED,
        message: "Connection is closed. Please reconnect."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "requestFailed", {
    get: function () {
      return new n({
        code: u$1.REQUEST_FAILED,
        message: "Request failed."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "fileUploadCanceled", {
    get: function () {
      return new n({
        code: u$1.FILE_UPLOAD_CANCEL_FAILED,
        message: "File upload has been canceled."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "requestCanceled", {
    get: function () {
      return new n({
        code: u$1.REQUEST_CANCELED,
        message: "Request has been canceled."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "sessionTokenRefreshFailed", {
    get: function () {
      return new n({
        code: u$1.SESSION_TOKEN_REFRESH_FAILED,
        message: "Failed to refresh the session key."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n, "sessionTokenRequestFailed", {
    get: function () {
      return new n({
        code: u$1.SESSION_TOKEN_REQUEST_FAILED,
        message: "Failed to get the session token."
      });
    },
    enumerable: !1,
    configurable: !0
  }), n.prototype.throwOutside = function () {
    throw this.shouldThrowOutside = !0, this;
  }, n;
}(Error),
    f = [u$1.CONNECTION_REQUIRED, u$1.NETWORK_ERROR, u$1.ACK_TIMEOUT, u$1.WEBSOCKET_CONNECTION_CLOSED, u$1.WEBSOCKET_CONNECTION_FAILED, u$1.FILE_UPLOAD_CANCEL_FAILED, u$1.REQUEST_CANCELED, u$1.INTERNAL_SERVER_ERROR, u$1.RATE_LIMIT_EXCEEDED, u$1.UNKNOWN_SERVER_ERROR],
    _$1 = [u$1.WEBSOCKET_CONNECTION_CLOSED, u$1.WEBSOCKET_CONNECTION_FAILED, u$1.CONNECTION_REQUIRED],
    g = function (e, t) {
  if (e !== t) {
    var r = n$1({}, e),
        i = n$1({}, t);
    return (!r.hasOwnProperty("messageId") || !i.hasOwnProperty("messageId") || r.messageId === i.messageId) && (!r.hasOwnProperty("reqId") || !i.hasOwnProperty("reqId") || r.reqId === i.reqId) && (r.hasOwnProperty("messageId") && delete r.messageId, r.hasOwnProperty("reqId") && delete r.reqId, i.hasOwnProperty("messageId") && delete i.messageId, i.hasOwnProperty("reqId") && delete i.reqId, JSON.stringify(r) === JSON.stringify(i));
  }

  return !0;
},
    y = function (e, t, n) {
  return void 0 === n && (n = !1), !(!n || null != t) || ("string" != typeof e ? "object" == typeof e ? m(e, t) : v$1(e, t) : typeof t === e);
},
    m = function (e, t, n) {
  return void 0 === n && (n = !1), !(!n || null != t) || Object.values(e).includes(t);
},
    v$1 = function (e, t) {
  return t instanceof e;
},
    E$1 = function (e, t, n) {
  return void 0 === n && (n = !1), !(!n || null != t) || Array.isArray(t) && t.every(function (t) {
    return y(e, t);
  });
},
    I$1 = function (e) {
  return e > 0 && _$1.indexOf(e) >= 0;
},
    S$1 = function (e, t) {
  if (void 0 === t && (t = !1), t && null === e) return !0;
  var n = y("object", e) && null !== e && e.hasOwnProperty("name") && "string" == typeof e.name && e.hasOwnProperty("uri") && "string" == typeof e.uri && e.hasOwnProperty("type") && "string" == typeof e.type;

  if (!n) {
    if ("undefined" != typeof Blob) return e instanceof Blob;
    if ("undefined" != typeof File) return e instanceof File;
  }

  return n;
},
    T$2 = function (e, t) {
  if (e === t) return !0;
  if (null == e || null == t) return !1;
  if (e.length !== t.length) return !1;

  for (var n = a([], o(e), !1).sort(), r = a([], o(t), !1).sort(), i = 0; i < n.length; ++i) if (n[i] !== r[i]) return !1;

  return !0;
},
    b = function () {
  function e(e) {
    var t = void 0 === e ? {} : e,
        n = t.useMemberInfoInMessage,
        r = void 0 !== n && n,
        i = t.typingIndicatorInvalidateTime,
        s = void 0 === i ? 1e4 : i,
        o = t.typingIndicatorThrottle,
        a = void 0 === o ? 1e3 : o,
        u = t.websocketResponseTimeout,
        c = void 0 === u ? 1e4 : u;
    this._useMemberInfoInMessage = !1, this._typingIndicatorInvalidateTime = 1e4, this._typingIndicatorThrottle = 1e3, this._websocketResponseTimeout = 1e4, this._useMemberInfoInMessage = r, this._typingIndicatorInvalidateTime = s, this._typingIndicatorThrottle = a, this._websocketResponseTimeout = c;
  }

  return Object.defineProperty(e.prototype, "useMemberInfoInMessage", {
    get: function () {
      return this._useMemberInfoInMessage;
    },
    set: function (e) {
      y("boolean", e) && (this._useMemberInfoInMessage = e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "typingIndicatorInvalidateTime", {
    get: function () {
      return this._typingIndicatorInvalidateTime;
    },
    set: function (e) {
      y("number", e) && (this._typingIndicatorInvalidateTime = e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "typingIndicatorThrottle", {
    get: function () {
      return this._typingIndicatorThrottle;
    },
    set: function (e) {
      y("number", e) && e >= 1e3 && e <= 9e3 && (this._typingIndicatorThrottle = e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "websocketResponseTimeout", {
    get: function () {
      return this._websocketResponseTimeout;
    },
    set: function (e) {
      y("number", e) && e >= 5e3 && e <= 3e4 && (this._websocketResponseTimeout = e);
    },
    enumerable: !1,
    configurable: !0
  }), e;
}(),
    N$1 = {
  key: "__ev",
  value: {
    k: "__ev",
    v: "scs"
  },
  generation: 1
},
    A$1 = {
  encrypt: function (e) {
    return e;
  },
  decrypt: function (e) {
    return e;
  }
},
    C$1 = function () {
  function e(e) {
    var t = e.store;
    this._preference = new Map(), this._store = t;
  }

  return e.prototype._savePreferenceKeys = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, this._store.set({
              key: this._keysAddress,
              value: a([], o(this._preference.keys()), !1),
              generation: 1
            })];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, e.prototype.init = function (e) {
    var t;
    return r$1(this, void 0, void 0, function () {
      var n, r, o, a, u, c, l, d;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return this._keysAddress = e, [4, this._store.get(e)];

          case 1:
            n = null !== (t = i.sent()) && void 0 !== t ? t : [], i.label = 2;

          case 2:
            i.trys.push([2, 7, 8, 9]), r = s(n), o = r.next(), i.label = 3;

          case 3:
            return o.done ? [3, 6] : (a = o.value, [4, this._store.get(a)]);

          case 4:
            (u = i.sent()) && this._preference.set(a, u), i.label = 5;

          case 5:
            return o = r.next(), [3, 3];

          case 6:
            return [3, 9];

          case 7:
            return c = i.sent(), l = {
              error: c
            }, [3, 9];

          case 8:
            try {
              o && !o.done && (d = r.return) && d.call(r);
            } finally {
              if (l) throw l.error;
            }

            return [7];

          case 9:
            return [2];
        }
      });
    });
  }, e.prototype.get = function (e) {
    var t;
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        return [2, null !== (t = this._preference.get(e)) && void 0 !== t ? t : null];
      });
    });
  }, e.prototype.set = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return n = !this._preference.has(e), [4, this._store.set({
              key: e,
              value: t,
              generation: 1
            })];

          case 1:
            return r.sent(), this._preference.set(e, t), n ? [4, this._savePreferenceKeys()] : [3, 3];

          case 2:
            r.sent(), r.label = 3;

          case 3:
            return [2];
        }
      });
    });
  }, e.prototype.remove = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._store.remove(e)];

          case 1:
            return t.sent(), this._preference.delete(e), [4, this._savePreferenceKeys()];

          case 2:
            return t.sent(), [2];
        }
      });
    });
  }, e.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, this._store.removeMany(a([], o(this._preference.keys()), !1))];

          case 1:
            return e.sent(), this._preference.clear(), [4, this._savePreferenceKeys()];

          case 2:
            return e.sent(), [2];
        }
      });
    });
  }, e;
}(),
    O$1 = function (e) {
  var t = e.encryption,
      n = void 0 === t ? null : t,
      r = e.store,
      i = void 0 === r ? null : r,
      s = e.localCacheEnabled,
      o = void 0 === s || s;
  this.nestdb = null, this.store = i, this.preference = new C$1({
    store: i
  }), this.encryption = null != n ? n : A$1, this.localCacheEnabled = o;
},
    w = function () {
  function e() {
    this.sessionKey = null, this.authToken = null;
  }

  return Object.defineProperty(e.prototype, "hasSession", {
    get: function () {
      return !!this.sessionKey;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.clear = function () {
    this.authToken = null, this.sessionKey = null;
  }, e;
}(),
    R$2 = function () {
  var e = new Date().getTime();
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (t) {
    var n = (e + 16 * Math.random()) % 16 | 0;
    return e = Math.floor(e / 16), ("x" === t ? n : 3 & n | 8).toString(16);
  });
},
    D$1 = function () {
  function e(e) {
    var t = e.container;
    this._container = {}, this._container = t, this.key = R$2();
  }

  return e.prototype._register = function (e, t, n) {
    return e in this._container || (this._container[e] = new Map()), this._container[e].set(this.key, {
      occurence: t,
      handler: n
    }), this;
  }, e.prototype.on = function (e, t) {
    return this._register(e, -1, t);
  }, e.prototype.once = function (e, t) {
    return this._register(e, 1, t);
  }, e.prototype.close = function () {
    for (var e in this._container) this._container[e].delete(this.key);
  }, e;
}(),
    M$1 = function () {
  function e() {
    this._container = {};
  }

  return e.prototype.on = function (e, t) {
    return new D$1({
      container: this._container
    }).on(e, t);
  }, e.prototype.once = function (e, t) {
    return new D$1({
      container: this._container
    }).once(e, t);
  }, e.prototype.dispatch = function (e, t) {
    var n,
        r,
        i = this._container[e];

    if (i) {
      var o = [];

      try {
        for (var a = s(i.keys()), u = a.next(); !u.done; u = a.next()) {
          var c = u.value,
              l = i.get(c);
          l.handler(t), l.occurence > 0 && (l.occurence--, 0 === l.occurence && o.push(c));
        }
      } catch (e) {
        n = {
          error: e
        };
      } finally {
        try {
          u && !u.done && (r = a.return) && r.call(a);
        } finally {
          if (n) throw n.error;
        }
      }

      o.forEach(function (e) {
        return i.delete(e);
      });
    }
  }, e;
}(),
    k = function () {
  function e() {
    this._dispatcher = new M$1();
  }

  return e.prototype.on = function (e) {
    return this._dispatcher.on("event", e);
  }, e.prototype.once = function (e) {
    return this._dispatcher.once("event", e);
  }, e.prototype.dispatch = function (e) {
    this._dispatcher.dispatch("event", e);
  }, e;
}(),
    L = function () {},
    U$2 = function (e) {
  var t = {};
  return e && Object.keys(e).forEach(function (n) {
    void 0 !== e[n] && NaN !== e[n] && null !== e[n] && (t[n] = e[n]);
  }), t;
};

!function (e) {
  e.GET = "GET", e.POST = "POST", e.PUT = "PUT", e.DELETE = "DELETE";
}(d$1 || (d$1 = {}));

var P$1,
    q$2 = function (e) {
  function n() {
    var t = null !== e && e.apply(this, arguments) || this;
    return t.params = {}, t.requireAuth = !0, t.headers = {}, t.requestId = R$2(), t;
  }

  return t(n, e), n.prototype.stringifyParams = function (e) {
    return "object" != typeof e || Array.isArray(e) ? String(e) : e ? JSON.stringify(e) : "";
  }, Object.defineProperty(n.prototype, "query", {
    get: function () {
      var e = this,
          t = U$2(this.params);
      return "?".concat(Object.keys(t).map(function (n) {
        return "".concat(encodeURIComponent(n), "=").concat(encodeURIComponent(e.stringifyParams(t[n])));
      }).join("&"));
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n.prototype, "payload", {
    get: function () {
      var e = this,
          t = U$2(this.params);

      if (Object.keys(t).some(function (e) {
        return S$1(t[e]);
      })) {
        var n = new FormData();
        return Object.keys(t).forEach(function (r) {
          var i,
              s = t[r];

          if (S$1(s)) {
            var o = s;
            n.append(r, o, null !== (i = o.name) && void 0 !== i ? i : "filename");
          } else n.append(r, e.stringifyParams(s));
        }), n;
      }

      return JSON.stringify(t);
    },
    enumerable: !1,
    configurable: !0
  }), n;
}(L),
    F$1 = function (e) {
  function r(t, n) {
    var r = e.call(this) || this;
    return r._iid = t, r._payload = n, r;
  }

  return t(r, e), Object.defineProperty(r.prototype, "payload", {
    get: function () {
      return n$1({}, this._payload);
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.as = function (e) {
    return new e(this._iid, this.payload);
  }, r;
}(L),
    x = function (e) {
  function n(t) {
    var n = e.call(this) || this;
    return n.requestId = t, n;
  }

  return t(n, e), n;
}(L),
    G$1 = function (e) {
  function n() {
    return null !== e && e.apply(this, arguments) || this;
  }

  return t(n, e), n;
}(L),
    Q$2 = function (e) {
  function n(t) {
    var n = e.call(this) || this;
    return n.statLog = t, n;
  }

  return t(n, e), n;
}(L);

!function (e) {
  e.WEBSOCKET_CONNECT = "ws:connect", e.API_RESULT = "api:result";
}(P$1 || (P$1 = {}));

var j$1,
    K$2 = function () {
  function e(e) {
    var t = e.type,
        n = e.data,
        r = e.ts,
        i = void 0 === r ? Date.now() : r;
    this.type = t, this.createdAt = i, this.data = n;
  }

  return e.payloadify = function (e) {
    return U$2({
      stat_type: e.type,
      ts: e.createdAt,
      data: U$2(e.data)
    });
  }, e;
}(),
    z$2 = function () {
  return "undefined" == typeof document && "undefined" != typeof navigator && "ReactNative" == navigator.product;
},
    V$2 = function () {
  function e(e, t) {
    var n = t.auth,
        r = t.sdkState,
        i = t.dispatcher,
        s = t.logger,
        o = this;
    this._abortControl = new Map(), this._iid = e, this._auth = n, this._sdkState = r, this._dispatcher = i, this._dispatcher.on(function (e) {
      e instanceof x && o.cancel(e.requestId);
    }), this._logger = s;
  }

  return Object.defineProperty(e.prototype, "_userAgentWithExtension", {
    get: function () {
      var e = this._sdkState.extensions,
          t = z$2() ? "reactnative" : "JS",
          n = e.sb_syncmanager ? "s".concat(e.sb_syncmanager) : "",
          r = e.sb_uikit ? "u".concat(e.sb_uikit) : "",
          i = e["device-os-platform"] ? "o".concat(e["device-os-platform"]) : "";
      return "".concat(t, "/c").concat(l$2.SDK_VERSION, "/").concat(n, "/").concat(r, "/").concat(i);
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype._createHeader = function (e, t) {
    void 0 === t && (t = null);
    var r = this._sdkState,
        i = r.appId,
        s = r.appVersion,
        o = n$1(n$1({}, e.headers), {
      SendBird: "JS,".concat(l$2.OS_VERSION, ",").concat(l$2.SDK_VERSION, ",").concat(i).concat(s ? ",".concat(s) : ""),
      "SB-User-Agent": encodeURIComponent(this._userAgentWithExtension),
      "Request-Sent-Timestamp": Date.now().toString()
    });
    return t || (o["Content-Type"] = "application/json; charset=utf-8"), e.requireAuth && this._auth.hasSession && (o["Session-Key"] = this._auth.sessionKey), this._auth && this._auth.authToken && (o["App-Id"] = i, o["Access-Token"] = this._auth.authToken), o;
  }, e.prototype._statLogApiResult = function (e, t, n) {
    this._dispatcher.dispatch(new Q$2(new K$2({
      type: P$1.API_RESULT,
      data: {
        endpoint: e.path,
        method: e.method,
        success: !n,
        latency: Date.now() - t,
        error_code: null == n ? void 0 : n.code,
        error_description: null == n ? void 0 : n.message
      }
    })));
  }, e.prototype.send = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, s, o, a, u, c, l, h, f, _, g, y, m;

      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            t = e.path, n = e.method, r = ![d$1.GET, d$1.DELETE].includes(n), s = this._sdkState.api, o = "".concat(s.host).concat(t).concat(r ? "" : e.query), a = r ? e.payload : null, u = this._createHeader(e, a instanceof FormData ? a : null), c = new AbortController(), l = c.signal, this._abortControl.set(e.requestId, c), h = Date.now(), i.label = 1;

          case 1:
            return i.trys.push([1, 4,, 5]), [4, fetch(o, {
              method: n,
              body: a,
              headers: u,
              signal: l
            })];

          case 2:
            return [4, (f = i.sent()).json()];

          case 3:
            if (_ = i.sent(), f.ok || f.redirected) return this._logger.debug("receive api response", e.requestId), this._statLogApiResult(e, h, null), [2, new F$1(this._iid, _)];
            throw _ ? ((g = new p$1(_)).isSessionKeyExpiredError && this._dispatcher.dispatch(new G$1()), this._statLogApiResult(e, h, g), g) : (g = p$1.requestFailed, this._statLogApiResult(e, h, g), g);

          case 4:
            throw y = i.sent(), this._statLogApiResult(e, h, y), y instanceof p$1 ? (this._logger.debug("fail api request", y), y) : "AbortError" === y.name ? p$1.requestCanceled : (m = p$1.networkError, this._logger.debug("fail api request", m), m);

          case 5:
            return [2];
        }
      });
    });
  }, e.prototype.cancel = function (e) {
    this._abortControl.has(e) && (this._abortControl.get(e).abort(), this._abortControl.delete(e));
  }, e.prototype.cancelAll = function () {
    var e, t;

    try {
      for (var n = s(this._abortControl.values()), r = n.next(); !r.done; r = n.next()) {
        r.value.abort();
      }
    } catch (t) {
      e = {
        error: t
      };
    } finally {
      try {
        r && !r.done && (t = n.return) && t.call(n);
      } finally {
        if (e) throw e.error;
      }
    }

    this._abortControl.clear();
  }, e;
}(),
    B$2 = function (e) {
  function n(t, n, r, i) {
    void 0 === i && (i = "");
    var s,
        o = this;
    return (o = e.call(this) || this)._iid = t, o.code = n, o.payload = r, o.requestId = r ? null !== (s = r.req_id) && void 0 !== s ? s : i : "", o;
  }

  return t(n, e), n.createFromRawMessage = function (e, t) {
    var r = t.substring(0, 4),
        i = null;

    try {
      i = JSON.parse(t.substring(4));
    } catch (e) {
      r = "NOOP";
    } finally {
      return new n(e, r, i);
    }
  }, n.prototype.convertToMessage = function () {
    return "".concat(this.code).concat(JSON.stringify(this.payload), "\n");
  }, n.prototype.as = function (e) {
    return new e(this._iid, this.code, this.payload);
  }, n;
}(L),
    H$2 = function (e) {
  function n(t) {
    var n,
        r = t.code,
        i = t.ackRequired,
        s = t.payload,
        o = void 0 === s ? null : s,
        a = this;
    return (a = e.call(this) || this).code = r, a.payload = o, a.requestId = null !== (n = a.payload.req_id) && void 0 !== n ? n : R$2(), a.ackRequired = i, a.payload.req_id = a.requestId, a;
  }

  return t(n, e), n.prototype.convertToMessage = function () {
    return "".concat(this.code).concat(JSON.stringify(this.payload), "\n");
  }, n;
}(L),
    W$2 = function (e) {
  function n() {
    return e.call(this, {
      code: "PING",
      payload: {
        id: Date.now(),
        active: 1
      },
      ackRequired: !1
    }) || this;
  }

  return t(n, e), n;
}(H$2),
    X$2 = function () {
  function e(e) {
    var t = e.pingDelegate,
        n = e.sdkState,
        r = e.logger;
    this._pingTimer = null, this._pingTimeoutTimer = null, this.pingDelegate = t, this.sdkState = n, this._logger = r;
  }

  return Object.defineProperty(e.prototype, "isWaiting", {
    get: function () {
      return !!this._pingTimeoutTimer;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.ping = function () {
    var e,
        t = this,
        n = new W$2();

    try {
      var r = null !== (e = this.sdkState.websocket.pongTimeout) && void 0 !== e ? e : 5e3;
      this._pingTimeoutTimer = setTimeout(function () {
        t._logger.debug("pinger.ping() timeout"), t.pingDelegate.error(null);
      }, r), this.pingDelegate.send(n), this._logger.debug("pinger.ping()");
    } catch (e) {
      this._logger.debug("pinger.ping() error", e), this._pingTimeoutTimer && (clearTimeout(this._pingTimeoutTimer), this._pingTimeoutTimer = null), this.pingDelegate.error(null);
    }

    return n;
  }, e.prototype.pong = function () {
    this._logger.debug("pinger.pong()"), this._pingTimeoutTimer && (clearTimeout(this._pingTimeoutTimer), this._pingTimeoutTimer = null);
  }, e.prototype.refreshTimer = function () {
    var e,
        t = this;

    this._logger.debug("pinger.refreshTimer()");

    var n = null !== (e = this.sdkState.websocket.pingInterval) && void 0 !== e ? e : 15e3;
    this.stop(), this._pingTimer = setInterval(function () {
      t.ping();
    }, n);
  }, e.prototype.start = function () {
    this._logger.debug("pinger.start()"), this.refreshTimer(), this.ping();
  }, e.prototype.stop = function () {
    this._logger.debug("pinger.stop()"), this._pingTimer && (clearInterval(this._pingTimer), this._pingTimer = null), this._pingTimeoutTimer && (clearTimeout(this._pingTimeoutTimer), this._pingTimeoutTimer = null);
  }, e;
}(),
    Y$2 = function () {};

!function (e) {
  e.CONNECTING = "CONNECTING", e.OPEN = "OPEN", e.CLOSED = "CLOSED";
}(j$1 || (j$1 = {}));

var J$2,
    Z$2 = function (e) {
  function n(t, n) {
    var r = n.sdkState,
        i = n.dispatcher,
        s = n.logger,
        o = e.call(this) || this;
    return o._pinger = null, o.lastActive = 0, o._iid = t, o._sdkState = r, o._dispatcher = i, o._logger = s, o._sdkState.websocket.pingerDisabled || (o._pinger = new X$2({
      pingDelegate: {
        send: function (e) {
          return o.send(e);
        },
        error: function (e) {
          return o.error(e);
        }
      },
      sdkState: o._sdkState,
      logger: s
    })), o;
  }

  return t(n, e), Object.defineProperty(n.prototype, "connectionState", {
    get: function () {
      if (this._ws) switch (this._ws.readyState) {
        case 0:
          return j$1.CONNECTING;

        case 1:
          return j$1.OPEN;
      }
      return j$1.CLOSED;
    },
    enumerable: !1,
    configurable: !0
  }), n.prototype.connect = function (e) {
    var t = this;
    this._ws = new WebSocket(e), this._ws.onopen = function () {
      t._logger.debug("websocket open"), t.dispatch("open");
    }, this._ws.onmessage = function (e) {
      e.data.split("\n").forEach(function (e) {
        if (e && y("string", e)) {
          var n = B$2.createFromRawMessage(t._iid, e);
          t._logger.debug("receive websocket event", n), "LOGI" === n.code ? (n.payload && !n.payload.error && t._pinger && t._pinger.start(), t.dispatch("message", n)) : "PONG" === n.code ? t._pinger && t._pinger.pong() : "EXPR" === n.code ? n.payload && n.payload.expires_in > 0 && t._dispatcher.dispatch(new G$1()) : "NOOP" === n.code || t.dispatch("message", n);
        }
      });
    }, this._ws.onerror = function () {
      t._logger.debug("websocket error"), t._pinger && t._pinger.stop(), t.dispatch("error", p$1.networkError);
    }, this._ws.onclose = function () {
      t._logger.debug("websocket close"), t._pinger && t._pinger.stop(), t.dispatch("close");
    }, this.lastActive = Date.now();
  }, n.prototype.disconnect = function () {
    var e = this;
    this._logger.debug("websocket disconnect"), this._pinger && this._pinger.stop(), this._ws && (this._ws.onopen = Y$2, this._ws.onmessage = Y$2, this._ws.onerror = Y$2, this._ws.onclose = function () {
      e.dispatch("close");
    }, this._ws.close(), this._ws = null);
  }, n.prototype.send = function (e) {
    if (!this._ws) throw p$1.connectionClosed;
    "PING" !== e.code ? this._pinger && this._pinger.refreshTimer() : this._logger.debug("send ping", e), this._ws.send(e.convertToMessage());
  }, n.prototype.error = function (e) {
    this._logger.debug("websocket error", e), this._pinger && this._pinger.stop(), this.dispatch("error", e);
  }, n;
}(M$1),
    $$1 = function (e) {
  function n(t) {
    var n = t.all,
        r = t.custom_types,
        i = t.ts,
        s = e.call(this) || this;
    return s.all = n, s.customTypes = r, s.ts = i, s;
  }

  return t(n, e), n;
}(L),
    ee$1 = function () {
  var e = this;
  this.promise = new Promise(function (t, n) {
    e.resolve = t, e.reject = n;
  });
},
    te$1 = function () {
  function e(e, t) {
    var n = t.auth,
        r = t.sdkState,
        i = t.dispatcher,
        s = t.logger,
        o = this;
    this._ackStateMap = new Map(), this._sdkState = r, this._dispatcher = i, this._logger = s, this.apiClient = new V$2(e, {
      auth: n,
      sdkState: r,
      dispatcher: i,
      logger: s
    }), this.websocketClient = new Z$2(e, {
      sdkState: r,
      dispatcher: i,
      logger: s
    }), this.websocketClient.on("message", function (e) {
      if (e.payload.unread_cnt && o._dispatcher.dispatch(new $$1(e.payload.unread_cnt)), e.requestId) {
        if (o._ackStateMap.has(e.requestId)) {
          var t = o._ackStateMap.get(e.requestId);

          "EROR" !== e.code ? t.resolve(e) : t.reject(new p$1({
            code: e.payload.code,
            message: e.payload.message
          }));
        }
      } else o._dispatcher.dispatch(e);
    }).on("close", function () {
      o._ackStateMap.forEach(function (e) {
        e.reject(p$1.connectionClosed);
      }), o._ackStateMap.clear();
    });
  }

  return e.prototype._sendApiRequest = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this.apiClient.send(e)];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, e.prototype._sendWebsocketRequest = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r,
          s = this;
      return i$1(this, function (i) {
        if (t = new ee$1(), e.ackRequired) {
          n = null, r = function (r, i) {
            void 0 === r && (r = null), void 0 === i && (i = null), s._ackStateMap.has(e.requestId) && (s._ackStateMap.delete(e.requestId), n && (clearTimeout(n), n = null), r ? (s._logger.debug("fail websocket request", r), t.reject(r)) : (s._logger.debug("receive websocket ack", e.requestId), t.resolve(i)));
          };

          try {
            n = setTimeout(function () {
              return r(p$1.noAckTimeout);
            }, this._sdkState.websocket.responseTimeout), this._ackStateMap.set(e.requestId, {
              resolve: function (e) {
                return r(null, e);
              },
              reject: function (e) {
                return r(e);
              }
            }), this.websocketClient.send(e);
          } catch (e) {
            r(e);
          }
        } else try {
          this.websocketClient.send(e), t.resolve(null);
        } catch (e) {
          t.reject(e);
        }

        return [2, t.promise];
      });
    });
  }, e.prototype.send = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return e instanceof q$2 ? [4, this._sendApiRequest(e)] : [3, 2];

          case 1:
          case 3:
            return [2, t.sent()];

          case 2:
            return e instanceof H$2 ? [4, this._sendWebsocketRequest(e)] : [3, 4];

          case 4:
            throw p$1.invalidParameters;
        }
      });
    });
  }, e.prototype.cancel = function (e) {
    this.apiClient.cancel(e);
  }, e.prototype.cancelAll = function () {
    this.apiClient.cancelAll();
  }, e;
}();

!function (e) {
  e[e.NONE = 0] = "NONE", e[e.INITIALIZED = 1] = "INITIALIZED", e[e.CONNECTING = 2] = "CONNECTING", e[e.CONNECTED = 3] = "CONNECTED", e[e.RECONNECTING = 4] = "RECONNECTING", e[e.DISCONNECTED = 5] = "DISCONNECTED", e[e.LOGOUT = 6] = "LOGOUT";
}(J$2 || (J$2 = {}));

var ne$1,
    re$1,
    ie$1,
    se$1,
    oe$1,
    ae$1,
    ue$1,
    ce$1,
    le$1,
    de$1 = function (e) {
  function n(t) {
    var n = t.stateType,
        r = e.call(this) || this;
    return r.stateType = n, r;
  }

  return t(n, e), n;
}(L),
    he$1 = function () {
  function e(e, t) {
    var n = t.auth,
        s = t.sdkState,
        o = t.dispatcher,
        a = t.logger,
        u = this;
    this._currentConnectionStateType = J$2.INITIALIZED, this._lazyCallQueue = [], this.commandRouter = new te$1(e, {
      auth: n,
      sdkState: s,
      dispatcher: o,
      logger: a
    }), this._auth = n, this._logger = a, this._dispatcher = o, this._dispatcher.on(function (e) {
      if (e instanceof de$1) {
        var t = e.stateType;

        switch (u._currentConnectionStateType = t, t) {
          case J$2.CONNECTED:
            var n = u._lazyCallQueue;
            u._lazyCallQueue = [], n.forEach(function (e) {
              return r$1(u, void 0, void 0, function () {
                var t, n, r, s, o;
                return i$1(this, function (i) {
                  switch (i.label) {
                    case 0:
                      t = e.command, n = e.deferred, r = e.timeout, clearTimeout(r), i.label = 1;

                    case 1:
                      return i.trys.push([1, 3,, 4]), [4, this.send(t)];

                    case 2:
                      return s = i.sent(), n.resolve(s), [3, 4];

                    case 3:
                      return o = i.sent(), n.reject(o), [3, 4];

                    case 4:
                      return [2];
                  }
                });
              });
            });
            break;

          case J$2.INITIALIZED:
          case J$2.DISCONNECTED:
          case J$2.LOGOUT:
            n = u._lazyCallQueue;
            u._lazyCallQueue = [], n.forEach(function (e) {
              return r$1(u, void 0, void 0, function () {
                var t, n;
                return i$1(this, function (r) {
                  return t = e.deferred, n = e.timeout, clearTimeout(n), this._auth && this._auth.hasSession ? t.reject(p$1.connectionClosed) : t.reject(p$1.connectionRequired), [2];
                });
              });
            });
        }
      }
    });
  }

  return Object.defineProperty(e.prototype, "isReady", {
    get: function () {
      return this._currentConnectionStateType === J$2.CONNECTED;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "isLazyCallActivated", {
    get: function () {
      return this._currentConnectionStateType === J$2.CONNECTING || this._currentConnectionStateType === J$2.RECONNECTING;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.send = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r = this;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return e instanceof H$2 ? this.isReady ? (this._logger.debug("send websocket request", e), [4, this.commandRouter.send(e)]) : [3, 2] : [3, 4];

          case 1:
          case 5:
            return [2, i.sent()];

          case 2:
            if (this.isLazyCallActivated) return this._logger.debug("wait websocket request", e), t = new ee$1(), this._lazyCallQueue.push({
              command: e,
              deferred: t,
              timeout: setTimeout(function () {
                return r.timeout(e.requestId);
              }, 1e4)
            }), [2, t.promise];
            throw this._logger.debug("fail websocket request"), p$1.connectionRequired;

          case 3:
            return [3, 7];

          case 4:
            return e instanceof q$2 ? this._auth.hasSession ? (this._logger.debug("send api request", e), [4, this.commandRouter.send(e)]) : [3, 6] : [3, 7];

          case 6:
            if (this.isLazyCallActivated) return this._logger.debug("wait api request", e), t = new ee$1(), this._lazyCallQueue.push({
              command: e,
              deferred: t,
              timeout: setTimeout(function () {
                return r.timeout(e.requestId);
              }, 1e4)
            }), [2, t.promise];
            throw n = p$1.connectionRequired, this._logger.debug("fail api request", n), n;

          case 7:
            return [2];
        }
      });
    });
  }, e.prototype.forceSend = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._logger.debug("send websocket request (forced)", e), [4, this.commandRouter.send(e)];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, e.prototype.timeout = function (e) {
    this._logger.debug("timeout request", e);

    var t = this._lazyCallQueue.findIndex(function (t) {
      return t.command.requestId === e;
    });

    t > -1 && (this._lazyCallQueue[t].deferred.reject(p$1.connectionRequired), this._lazyCallQueue.splice(t, 1));
  }, e.prototype.cancel = function (e) {
    this._logger.debug("cancel api request", e), this.commandRouter.cancel(e);
  }, e.prototype.cancelAll = function () {
    this._logger.debug("cancel all api requests"), this.commandRouter.cancelAll();
  }, e;
}(),
    pe$1 = function (e) {
  function n(t) {
    var n = t.userId,
        r = t.authToken,
        i = t.expiringSession,
        s = void 0 === i || i,
        o = e.call(this) || this;
    return o.path = "/users/".concat(n, "/session_key"), o.method = d$1.POST, o.params = {
      token: r,
      expiring_session: !!s
    }, o.requireAuth = !1, o;
  }

  return t(n, e), n;
}(q$2),
    fe$1 = function (e) {
  function n(t) {
    var n = t.authToken,
        r = t.expiringSession,
        i = void 0 === r || r;
    return e.call(this, {
      code: "LOGI",
      payload: {
        token: n,
        expiring_session: i ? 1 : 0
      },
      ackRequired: !0
    }) || this;
  }

  return t(n, e), n;
}(H$2),
    _e$1 = function (e) {
  function n(t, n) {
    var r = e.call(this, t, n) || this,
        i = n.key;
    return r.key = i, r;
  }

  return t(n, e), n;
}(F$1),
    ge$1 = function (e) {
  function n(t, n, r) {
    var i = e.call(this, t, "LOGI", r) || this;
    return i.error = null, i.newKey = r.new_key, i.error = r.error ? new p$1(r.error) : null, i;
  }

  return t(n, e), n;
}(B$2),
    ye$1 = function (e) {
  function n() {
    return null !== e && e.apply(this, arguments) || this;
  }

  return t(n, e), n;
}(L),
    me$1 = function (e) {
  return r$1(void 0, void 0, void 0, function () {
    return i$1(this, function (t) {
      return [2, new Promise(function (t) {
        return setTimeout(t, e);
      })];
    });
  });
},
    ve$1 = function () {
  function e() {}

  return e.prototype.calcTimeout = function () {
    return 0;
  }, e;
}(),
    Ee$1 = function (e, t, n) {
  return void 0 === n && (n = new ve$1()), r$1(void 0, void 0, void 0, function () {
    var r, s, o, a, u, c;
    return i$1(this, function (i) {
      switch (i.label) {
        case 0:
          r = 0, s = null, o = function (e) {
            return void 0 === e && (e = null), s = null != e ? e : new Error("Halted");
          }, a = function () {
            r = 0;
          }, i.label = 1;

        case 1:
          if (!(-1 === t || r < t)) return [3, 9];
          i.label = 2;

        case 2:
          return i.trys.push([2, 4,, 8]), [4, e(o, a)];

        case 3:
          if (u = i.sent(), s) throw s;
          return [2, u];

        case 4:
          if (c = i.sent(), s) return [3, 6];
          if (++r === t) throw c;
          return [4, me$1(n.calcTimeout(r))];

        case 5:
          return i.sent(), [3, 7];

        case 6:
          throw s;

        case 7:
          return [3, 8];

        case 8:
          return [3, 1];

        case 9:
          return [2];
      }
    });
  });
},
    Ie$1 = function (e) {
  return r$1(void 0, void 0, void 0, function () {
    var t;
    return i$1(this, function (n) {
      switch (n.label) {
        case 0:
          return n.trys.push([0, 2,, 3]), [4, e()];

        case 1:
          return n.sent(), [3, 3];

        case 2:
          if (!((t = n.sent()) instanceof p$1)) throw t;
          return t.throwOutside(), [3, 3];

        case 3:
          return [2];
      }
    });
  });
},
    Se$1 = function (e) {
  return r$1(void 0, void 0, void 0, function () {
    return i$1(this, function (t) {
      switch (t.label) {
        case 0:
          return t.trys.push([0, 2,, 3]), [4, e()];

        case 1:
        case 2:
          return t.sent(), [3, 3];

        case 3:
          return [2];
      }
    });
  });
},
    Te$1 = function () {
  function e(e) {
    var t = e.auth,
        n = e.sdkState,
        r = e.dispatcher,
        i = e.requestQueue,
        s = e.logger,
        o = this;
    this._currentConnectionStateType = J$2.INITIALIZED, this.auth = t, this._sdkState = n, this._dispatcher = r, this._requestQueue = i, this._logger = s, this._dispatcher.on(function (e) {
      if (e instanceof de$1) {
        var t = e.stateType;
        o._currentConnectionStateType = t;
      } else e instanceof G$1 && o.refresh();
    });
  }

  return e.prototype.createRefreshWebsocketCommand = function (e) {
    return new fe$1({
      authToken: e,
      expiringSession: !0
    });
  }, e.prototype._refreshSessionKey = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var n,
          s,
          o,
          a,
          u,
          c,
          l,
          d = this;
      return i$1(this, function (f) {
        switch (f.label) {
          case 0:
            if (this._currentConnectionStateType !== J$2.CONNECTED) return [3, 4];
            f.label = 1;

          case 1:
            return f.trys.push([1, 3,, 4]), n = this.createRefreshWebsocketCommand(e), [4, this._requestQueue.forceSend(n)];

          case 2:
            if (s = f.sent(), o = s.as(ge$1), a = o.newKey, u = o.error) throw u;
            return this.auth.sessionKey = null != a ? a : this.auth.sessionKey, this._logger.debug("session refreshed"), Ie$1(function () {
              return r$1(d, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this.handler.onSessionRefreshed(), [2];
                });
              });
            }), t && t.resolve(), [2];

          case 3:
            if (c = f.sent(), h$1(c)) throw c;
            return c.isSessionTokenExpiredError ? (this._handleError(t), [2]) : [3, 4];

          case 4:
            return f.trys.push([4, 6,, 7]), l = new pe$1({
              userId: this._sdkState.userId,
              authToken: e,
              expiringSession: !0
            }), [4, Ee$1(function (e) {
              return r$1(d, void 0, void 0, function () {
                var t, n, r;
                return i$1(this, function (i) {
                  switch (i.label) {
                    case 0:
                      return i.trys.push([0, 2,, 3]), [4, this._requestQueue.forceSend(l)];

                    case 1:
                      return t = i.sent(), n = t.as(_e$1).key, this.auth.sessionKey = n, [3, 3];

                    case 2:
                      throw (r = i.sent()).isSessionTokenExpiredError && e(p$1.sessionTokenRefreshFailed), r;

                    case 3:
                      return [2];
                  }
                });
              });
            }, 3)];

          case 5:
            return f.sent(), this._logger.debug("session refreshed"), [3, 7];

          case 6:
            return f.sent(), this._handleError(t), [2];

          case 7:
            return Ie$1(function () {
              return r$1(d, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this.handler.onSessionRefreshed(), [2];
                });
              });
            }), t && t.resolve(), [2];
        }
      });
    });
  }, e.prototype._handleError = function (e) {
    var t = this,
        n = p$1.sessionTokenRefreshFailed;
    Ie$1(function () {
      return r$1(t, void 0, void 0, function () {
        return i$1(this, function (e) {
          return this.handler.onSessionError(n), [2];
        });
      });
    }), e && e.reject(n);
  }, e.prototype.refresh = function () {
    return r$1(this, void 0, void 0, function () {
      var e,
          t,
          n,
          s = this;
      return i$1(this, function (o) {
        return this.handler ? (e = new ee$1(), t = function (t) {
          t ? (s._logger.debug("session refreshing.."), s.auth.authToken = t, s._refreshSessionKey(t, e)) : (s._logger.debug("session closed"), Ie$1(function () {
            return r$1(s, void 0, void 0, function () {
              return i$1(this, function (e) {
                return this.handler.onSessionClosed(), [2];
              });
            });
          }), e.resolve());
        }, n = function () {
          s._dispatcher.dispatch(new ye$1());

          var t = p$1.sessionTokenRequestFailed;
          s.handler && (Ie$1(function () {
            return r$1(s, void 0, void 0, function () {
              return i$1(this, function (e) {
                return this.handler.onSessionError(t), [2];
              });
            });
          }), e.reject(t));
        }, this._logger.debug("session expired"), this.handler.onSessionExpired(), this.auth.authToken ? this._refreshSessionKey(this.auth.authToken, e) : Ie$1(function () {
          return r$1(s, void 0, void 0, function () {
            return i$1(this, function (e) {
              return this.handler.onSessionTokenRequired(t, n), [2];
            });
          });
        }), [2, e.promise]) : [2];
      });
    });
  }, e;
}(),
    be$1 = function () {
  function e() {
    this.type = J$2.NONE, this.name = "none";
  }

  return e.prototype.run = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return [2];
      });
    });
  }, e.prototype.onConnect = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return [2];
      });
    });
  }, e.prototype.onReconnect = function (e, t) {
    return t.resetReconnectCount, r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return [2];
      });
    });
  }, e.prototype.onDisconnect = function (e, t) {
    return t.error, t.autoReconnect, r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return [2];
      });
    });
  }, e.prototype.onLogout = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return [2];
      });
    });
  }, e;
}(),
    Ne$1 = function (e) {
  function n() {
    var t = null !== e && e.apply(this, arguments) || this;
    return t.type = J$2.LOGOUT, t.name = "logout", t;
  }

  return t(n, e), n.prototype.run = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n = this;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return t = e.sdkState.userId, e.logout(), Ie$1(function () {
              return r$1(n, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return e.connectionHandlers.forEach(function (e) {
                    e.onDisconnected(t);
                  }), [2];
                });
              });
            }), [4, e.changeState(new Re$1())];

          case 1:
            return s.sent(), [2];
        }
      });
    });
  }, n;
}(be$1),
    Ae$1$1 = function (e) {
  function n(t) {
    var n = t.autoReconnect,
        r = e.call(this) || this;
    return r.type = J$2.DISCONNECTED, r.name = "disconnected", r._autoReconnect = !1, r._autoReconnect = n, r;
  }

  return t(n, e), n.prototype.run = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return e.disconnect(), this._autoReconnect ? [4, e.changeState(new Ce$1())] : [3, 2];

          case 1:
            t.sent(), t.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, n.prototype.onConnect = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return e.disconnect(), [4, e.changeState(new we$1({
              authToken: t
            }))];

          case 1:
            return n.sent(), [2];
        }
      });
    });
  }, n.prototype.onReconnect = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, e.changeState(new Ce$1())];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, n.prototype.onLogout = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, e.changeState(new Ne$1())];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, n;
}(be$1),
    Ce$1 = function (e) {
  function n() {
    var t = null !== e && e.apply(this, arguments) || this;
    return t.type = J$2.RECONNECTING, t.name = "reconnecting", t._haltConnect = null, t._resetConnect = null, t._callbacks = [], t;
  }

  return t(n, e), n.prototype.flushCallbacks = function (e) {
    void 0 === e && (e = null), this._callbacks.forEach(function (t) {
      return t(e);
    });
  }, n.prototype.run = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          s,
          o,
          a,
          c = this;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            t = new ee$1(), this._callbacks.push(function (e) {
              return e ? t.reject(e) : t.resolve();
            }), Ie$1(function () {
              return r$1(c, void 0, void 0, function () {
                return i$1(this, function (t) {
                  return e.connectionHandlers.forEach(function (e) {
                    e.onReconnectStarted();
                  }), [2];
                });
              });
            }), l.label = 1;

          case 1:
            return l.trys.push([1, 4,, 9]), n = e.sdkState.websocket, s = n.reconnectMaxRetry, o = n.reconnectRetryStrategy, [4, Ee$1(function (t, n) {
              return r$1(c, void 0, void 0, function () {
                var r;
                return i$1(this, function (i) {
                  switch (i.label) {
                    case 0:
                      this._haltConnect = t, this._resetConnect = n, i.label = 1;

                    case 1:
                      return i.trys.push([1, 3,, 4]), [4, e.connect()];

                    case 2:
                      return i.sent(), [3, 4];

                    case 3:
                      if ((r = i.sent()) instanceof p$1 && r.code === u$1.CONNECTION_CANCELED) return t(r), [2];
                      throw r;

                    case 4:
                      return [2];
                  }
                });
              });
            }, s, o)];

          case 2:
            return l.sent(), [4, e.changeState(new Oe$1())];

          case 3:
            return l.sent(), Ie$1(function () {
              return r$1(c, void 0, void 0, function () {
                return i$1(this, function (t) {
                  return e.connectionHandlers.forEach(function (e) {
                    e.onReconnectSucceeded();
                  }), this.flushCallbacks(null), [2];
                });
              });
            }), [3, 9];

          case 4:
            return a = l.sent(), h$1(a) ? [3, 7] : a instanceof p$1 ? a.code === u$1.CONNECTION_CANCELED ? [3, 6] : [4, e.changeState(new Ae$1$1({
              autoReconnect: !1
            }))] : [3, 6];

          case 5:
            l.sent(), l.label = 6;

          case 6:
            return Ie$1(function () {
              return r$1(c, void 0, void 0, function () {
                return i$1(this, function (t) {
                  return e.connectionHandlers.forEach(function (e) {
                    e.onReconnectFailed();
                  }), this.flushCallbacks(a), [2];
                });
              });
            }), [3, 8];

          case 7:
            throw a;

          case 8:
            return [3, 9];

          case 9:
            return [2, t.promise];
        }
      });
    });
  }, n.prototype.onConnect = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        return t = new ee$1(), this._resetConnect && this._resetConnect(), e.cancelConnectForRetry(), this._callbacks.push(function (e) {
          return e ? t.reject(e) : t.resolve();
        }), [2, t.promise];
      });
    });
  }, n.prototype.onReconnect = function (e, t) {
    var n = t.resetReconnectCount,
        s = void 0 !== n && n;
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        return t = new ee$1(), this._resetConnect && s && this._resetConnect(), e.cancelConnectForRetry(), this._callbacks.push(function (e) {
          return e ? t.reject(e) : t.resolve();
        }), [2, t.promise];
      });
    });
  }, n.prototype.onDisconnect = function (e, t) {
    var n = t.error,
        s = void 0 === n ? null : n,
        o = t.autoReconnect,
        a = void 0 === o || o;
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._haltConnect && this._haltConnect(null != s ? s : p$1.connectionCanceled), [4, e.changeState(new Ae$1$1({
              autoReconnect: a
            }))];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, n.prototype.onLogout = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._haltConnect && this._haltConnect(p$1.connectionCanceled), [4, e.changeState(new Ne$1())];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, n;
}(be$1),
    Oe$1 = function (e) {
  function n() {
    var t = null !== e && e.apply(this, arguments) || this;
    return t.type = J$2.CONNECTED, t.name = "connected", t;
  }

  return t(n, e), n.prototype.onReconnect = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return e.disconnect(), [4, e.changeState(new Ce$1())];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, n.prototype.onDisconnect = function (e, t) {
    var n = t.autoReconnect;
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, e.changeState(new Ae$1$1({
              autoReconnect: n
            }))];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, n.prototype.onLogout = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, e.changeState(new Ne$1())];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, n;
}(be$1),
    we$1 = function (e) {
  function n(t) {
    var n = t.authToken,
        r = e.call(this) || this;
    return r.type = J$2.CONNECTING, r.name = "connecting", r._authToken = "", r._haltConnect = null, r._callbacks = [], r._authToken = n, r;
  }

  return t(n, e), n.prototype.flushCallbacks = function (e) {
    void 0 === e && (e = null), this._callbacks.forEach(function (t) {
      return t(e);
    });
  }, n.prototype.run = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          s = this;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            t = new ee$1(), this._callbacks.push(function (e) {
              return e ? t.reject(e) : t.resolve();
            }), o.label = 1;

          case 1:
            return o.trys.push([1, 4,, 9]), [4, Ee$1(function (t) {
              return r$1(s, void 0, void 0, function () {
                var n;
                return i$1(this, function (r) {
                  switch (r.label) {
                    case 0:
                      this._haltConnect = t, r.label = 1;

                    case 1:
                      return r.trys.push([1, 3,, 4]), [4, e.connect(this._authToken)];

                    case 2:
                      return r.sent(), [3, 4];

                    case 3:
                      if ((n = r.sent()) instanceof p$1 && n.code === u$1.CONNECTION_CANCELED) return t(n), [2];
                      throw n;

                    case 4:
                      return [2];
                  }
                });
              });
            }, e.sdkState.websocket.connectMaxRetry)];

          case 2:
            return o.sent(), [4, e.changeState(new Oe$1())];

          case 3:
            return o.sent(), Ie$1(function () {
              return r$1(s, void 0, void 0, function () {
                return i$1(this, function (t) {
                  return e.connectionHandlers.forEach(function (t) {
                    t.onConnected(e.sdkState.userId);
                  }), this.flushCallbacks(null), [2];
                });
              });
            }), [3, 9];

          case 4:
            return n = o.sent(), h$1(n) ? [3, 7] : (e.disconnect(), n instanceof p$1 ? n.code === u$1.CONNECTION_CANCELED ? [3, 6] : [4, e.changeState(new Re$1())] : [3, 6]);

          case 5:
            o.sent(), o.label = 6;

          case 6:
            return Ie$1(function () {
              return r$1(s, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this.flushCallbacks(n), [2];
                });
              });
            }), [3, 8];

          case 7:
            throw n;

          case 8:
            return [3, 9];

          case 9:
            return [2, t.promise];
        }
      });
    });
  }, n.prototype.onConnect = function (e) {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        return e = new ee$1(), this._callbacks.push(function (t) {
          return t ? e.reject(t) : e.resolve();
        }), [2, e.promise];
      });
    });
  }, n.prototype.onDisconnect = function (e, t) {
    var n = t.error,
        s = void 0 === n ? null : n;
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._haltConnect && this._haltConnect(null != s ? s : p$1.connectionCanceled), [4, e.changeState(new Ne$1())];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, n.prototype.onLogout = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._haltConnect && this._haltConnect(p$1.connectionCanceled), [4, e.changeState(new Ne$1())];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, n;
}(be$1),
    Re$1 = function (e) {
  function n() {
    var t = null !== e && e.apply(this, arguments) || this;
    return t.type = J$2.INITIALIZED, t.name = "initialized", t;
  }

  return t(n, e), n.prototype.onConnect = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, e.changeState(new we$1({
              authToken: t
            }))];

          case 1:
            return n.sent(), [2];
        }
      });
    });
  }, n;
}(be$1),
    De$1 = new Map(),
    Me$1 = function (e, t) {
  var n;
  return void 0 === t && (t = null), null !== t && De$1.set(e, t), null !== (n = De$1.get(e)) && void 0 !== n ? n : "";
},
    ke$1 = function (e) {
  void 0 === e && (e = {}), this.emojiHash = e.emoji_hash || "", this.uploadSizeLimit = e.file_upload_size_limit ? 1048576 * e.file_upload_size_limit : Number.MAX_VALUE, this.useReaction = !!e.use_reaction, this.applicationAttributes = e.application_attributes || [], this.premiumFeatureList = e.premium_feature_list || [];
},
    Le$1 = function () {
  function e(e) {
    this._iid = "", this._iid = e;
  }

  return e.payloadify = function (e) {
    return e ? {} : null;
  }, e;
}(),
    Ue$1 = "/".concat("v3", "/users"),
    Pe$1 = "/".concat("v3", "/storage/file"),
    qe$1 = "/".concat("v3", "/group_channels"),
    Fe$1 = "/".concat("v3", "/sdk/group_channels"),
    xe$1 = "/".concat("v3", "/open_channels"),
    Ge$1 = "/".concat("v3", "/sdk/open_channels"),
    Qe$1 = "/".concat("v3", "/search"),
    je$1 = "/".concat("v3", "/report"),
    Ke$1 = "/".concat("v3", "/emojis"),
    ze$1 = "/".concat("v3", "/emoji_categories"),
    Ve$1 = "/".concat("v3", "/scheduled_messages"),
    Be$1 = "/".concat("v3", "/sdk/statistics"),
    He$1 = function (e) {
  function n(t) {
    var n = t.userId,
        r = t.metadata,
        i = e.call(this) || this;
    return i.method = d$1.POST, i.path = "".concat(Ue$1, "/").concat(n, "/metadata"), i.params = {
      metadata: r
    }, i;
  }

  return t(n, e), n;
}(q$2);

!function (e) {
  function n(t, n) {
    var r = e.call(this, t, n) || this;
    return r.metadata = n, r;
  }

  t(n, e);
}(F$1), function (e) {
  e.BASE = "base", e.GROUP = "group", e.OPEN = "open";
}(ne$1 || (ne$1 = {})), function (e) {
  e.OPERATOR = "operator", e.NONE = "none";
}(re$1 || (re$1 = {})), function (e) {
  e.BASE = "base", e.USER = "user", e.FILE = "file", e.ADMIN = "admin";
}(ie$1 || (ie$1 = {})), function (e) {
  e.ALL = "", e.USER = "MESG", e.FILE = "FILE", e.ADMIN = "ADMM";
}(se$1 || (se$1 = {})), function (e) {
  e.USER = "MESG", e.FILE = "FILE", e.ADMIN = "ADMM";
}(oe$1 || (oe$1 = {})), function (e) {
  e.USERS = "users", e.CHANNEL = "channel";
}(ae$1 || (ae$1 = {})), function (e) {
  e.ALL = "all", e.NONE = "none", e.ONLY_REPLY_TO_CHANNEL = "only_reply_to_channel";
}(ue$1 || (ue$1 = {})), function (e) {
  e.DEFAULT = "default", e.SUPPRESS = "suppress";
}(ce$1 || (ce$1 = {})), function (e) {
  e.PENDING = "pending", e.SCHEDULED = "scheduled", e.SUCCEEDED = "succeeded", e.FAILED = "failed", e.CANCELED = "canceled";
}(le$1 || (le$1 = {}));

var We$1 = function (e) {
  switch (e) {
    case ne$1.GROUP:
      return qe$1;

    case ne$1.OPEN:
      return xe$1;

    default:
      return null;
  }
},
    Xe$1 = function (e) {
  switch (e) {
    case ne$1.GROUP:
      return "".concat(je$1, "/group_channels");

    case ne$1.OPEN:
      return "".concat(je$1, "/open_channels");

    default:
      return null;
  }
},
    Ye$1 = function (e, t, n) {
  var r, i;

  switch (e) {
    case ae$1.CHANNEL:
      return !0;

    case ae$1.USERS:
      if (t) try {
        for (var o = s(t), a = o.next(); !a.done; a = o.next()) {
          if (a.value === n) return !0;
        }
      } catch (e) {
        r = {
          error: e
        };
      } finally {
        try {
          a && !a.done && (i = o.return) && i.call(o);
        } finally {
          if (r) throw r.error;
        }
      }
  }

  return !1;
},
    Je$1 = function (e, t, n) {
  var r = Ye$1(e.mentionType, e.mentionedUserIds, n),
      i = Ye$1(t.mentionType, t.mentionedUserIds, n);
  return !r && i ? 1 : r && !i ? -1 : 0;
},
    Ze$1 = function (e) {
  function n(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        s = t.metadata;
    return (n = e.call(this) || this).method = d$1.POST, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/metadata"), n.params = {
      metadata: s,
      include_ts: !0
    }, n;
  }

  return t(n, e), n;
}(q$2),
    $e$1 = function (e) {
  function n(t, n) {
    var r = e.call(this, t, n) || this;
    return r.metaData = null != n ? n : {}, r;
  }

  return t(n, e), n;
}(F$1),
    et$1 = function (e) {
  function n(t) {
    var n = t.userId,
        r = t.metadata,
        i = t.upsert,
        s = e.call(this) || this;
    return s.method = d$1.PUT, s.path = "".concat(Ue$1, "/").concat(n, "/metadata"), s.params = {
      metadata: r,
      upsert: i
    }, s;
  }

  return t(n, e), n;
}(q$2),
    tt$1 = function (e) {
  function n(t, n) {
    var r = e.call(this, t, n) || this;
    return r.metadata = n, r;
  }

  return t(n, e), n;
}(F$1),
    nt$1 = function (e) {
  function n(t) {
    var n = t.userId,
        r = t.metadataKey,
        i = e.call(this) || this;
    return i.method = d$1.DELETE, i.path = "".concat(Ue$1, "/").concat(n, "/metadata/").concat(r), i;
  }

  return t(n, e), n;
}(q$2);

!function (e) {
  function n() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(n, e);
}(F$1);

var rt$1 = function (e) {
  function n(t) {
    var n = t.userId,
        r = e.call(this) || this;
    return r.method = d$1.DELETE, r.path = "".concat(Ue$1, "/").concat(n, "/metadata"), r;
  }

  return t(n, e), n;
}(q$2);

!function (e) {
  function n() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(n, e);
}(F$1);

var it$1,
    st$1 = function (e, t) {
  void 0 === t && (t = null);
  var n = JSON.parse(JSON.stringify(e));
  return n._iid && delete n._iid, t && t(n), n;
},
    ot$1 = function (e, t) {
  void 0 === t && (t = null);
  var n = JSON.parse(JSON.stringify(e));
  return t && t(n), n;
},
    at$1 = function (e) {
  return {
    do: function (t) {
      e || t();
    },
    throw: function (t) {
      if (!e) throw t;
    }
  };
};

!function (e) {
  e.ONLINE = "online", e.OFFLINE = "offline", e.NON_AVAILABLE = "nonavailable";
}(it$1 || (it$1 = {}));

var ut$1,
    ct$1 = function (e) {
  function s(t, n) {
    var r,
        i,
        s,
        u,
        c,
        l,
        d,
        h,
        p,
        f,
        _,
        g,
        v = this;

    return (v = e.call(this, t) || this).userId = null !== (i = null !== (r = n.guest_id) && void 0 !== r ? r : n.user_id) && void 0 !== i ? i : "", v.nickname = null !== (u = null !== (s = n.nickname) && void 0 !== s ? s : n.name) && void 0 !== u ? u : "", v.plainProfileUrl = null !== (l = null !== (c = n.profile_url) && void 0 !== c ? c : n.image) && void 0 !== l ? l : "", v.requireAuth = null !== (d = n.require_auth_for_profile_image) && void 0 !== d && d, v.metaData = null !== (h = n.metadata) && void 0 !== h ? h : {}, v.connectionStatus = it$1.NON_AVAILABLE, m(it$1, n.is_online) ? v.connectionStatus = n.is_online : y("boolean", n.is_online) && (v.connectionStatus = n.is_online ? it$1.ONLINE : it$1.OFFLINE), v.isActive = null === (p = n.is_active) || void 0 === p || p, v.lastSeenAt = null !== (f = n.last_seen_at) && void 0 !== f ? f : null, v.preferredLanguages = n.preferred_languages ? a([], o(n.preferred_languages), !1) : null, v.friendDiscoveryKey = null !== (_ = n.friend_discovery_key) && void 0 !== _ ? _ : null, v.friendName = null !== (g = n.friend_name) && void 0 !== g ? g : null, v;
  }

  return t(s, e), s.payloadify = function (t) {
    return t ? U$2(n$1(n$1({}, e.payloadify.call(this, t)), {
      user_id: t.userId,
      nickname: t.nickname,
      profile_url: t.plainProfileUrl,
      require_auth_for_profile_image: t.requireAuth,
      metadata: t.metaData,
      is_online: t.connectionStatus,
      is_active: t.isActive,
      last_seen_at: t.lastSeenAt,
      preferred_languages: t.preferredLanguages,
      friend_discovery_key: t.friendDiscoveryKey,
      friend_name: t.friendName
    })) : null;
  }, Object.defineProperty(s.prototype, "profileUrl", {
    get: function () {
      return this.requireAuth ? "".concat(this.plainProfileUrl, "?auth=").concat(Me$1(this._iid)) : this.plainProfileUrl;
    },
    enumerable: !1,
    configurable: !0
  }), s.prototype.serialize = function () {
    return st$1(this);
  }, s.prototype._isValidMetaData = function (e) {
    return !Array.isArray(e) && Object.keys(e).length > 0 && Object.keys(e).map(function (t) {
      return e[t];
    }).every(function (e) {
      return y("string", e);
    });
  }, s.prototype._applyMetaData = function (e, t) {
    var n = this;
    void 0 === t && (t = !1), Object.keys(e).forEach(function (r) {
      t ? delete n.metaData[r] : n.metaData[r] = e[r];
    });
  }, s.prototype.createMetaData = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, s, o, a;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return at$1(this._isValidMetaData(e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n = t.sdkState, r = t.requestQueue, s = new He$1({
              userId: n.userId,
              metadata: e
            }), [4, r.send(s)];

          case 1:
            return o = i.sent(), a = o.as($e$1).metaData, this._applyMetaData(a), [2, this.metaData];
        }
      });
    });
  }, s.prototype.updateMetaData = function (e, t) {
    return void 0 === t && (t = !1), r$1(this, void 0, void 0, function () {
      var n, r, s, o, a, u;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return at$1(this._isValidMetaData(e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid), r = n.sdkState, s = n.requestQueue, o = new et$1({
              userId: r.userId,
              metadata: e,
              upsert: t
            }), [4, s.send(o)];

          case 1:
            return a = i.sent(), u = a.as(tt$1).metadata, this._applyMetaData(u), [2, this.metaData];
        }
      });
    });
  }, s.prototype.deleteMetaData = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, s, o;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return at$1(y("string", e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n = t.sdkState, r = t.requestQueue, s = new nt$1({
              userId: n.userId,
              metadataKey: e
            }), [4, r.send(s)];

          case 1:
            return i.sent(), this._applyMetaData(((o = {})[e] = !0, o), !0), [2, this.metaData];
        }
      });
    });
  }, s.prototype.deleteAllMetaData = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new rt$1({
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return i.sent(), this.metaData = {}, [2];
        }
      });
    });
  }, s;
}(Le$1),
    lt$1 = function (e) {
  function n(t) {
    var n = t.userProfile,
        r = e.call(this) || this;
    return r.userProfile = n, r;
  }

  return t(n, e), n;
}(L),
    dt$1 = function () {
  function e(e, t) {
    var n, r, i, s, o, a, u, c, l, d, h, p, f, _;

    this._iid = e, this.appInfo = new ke$1(t), this.user = new ct$1(e, t), this.connectedAt = 1e3 * (null !== (n = t.login_ts) && void 0 !== n ? n : 0), this.firstConnectedAt = 0, this.pingInterval = null !== (r = t.ping_interval) && void 0 !== r ? r : 15e3, this.pongTimeout = null !== (i = t.pong_timeout) && void 0 !== i ? i : 5e3, this.reconnectInterval = null !== (o = null === (s = t.reconnect) || void 0 === s ? void 0 : s.interval) && void 0 !== o ? o : 3e3, this.reconnectMaxInterval = null !== (u = null === (a = t.reconnect) || void 0 === a ? void 0 : a.max_interval) && void 0 !== u ? u : 6e4, this.reconnectRetryCount = null !== (l = null === (c = t.reconnect) || void 0 === c ? void 0 : c.retry_cnt) && void 0 !== l ? l : 5, this.reconnectIntervalMultiple = null !== (h = null === (d = t.reconnect) || void 0 === d ? void 0 : d.mul) && void 0 !== h ? h : 2, this.maxUnreadCountOnSuperGroup = null !== (p = t.max_unread_cnt_on_super_group) && void 0 !== p ? p : 100, this.profileImageEncryption = !!t.profile_image_encryption, this.concurrentCallLimit = null !== (f = t.concurrent_call_limit) && void 0 !== f ? f : 5, this.backOffDelay = null !== (_ = t.back_off_delay) && void 0 !== _ ? _ : 100;
  }

  return e.payloadify = function (e) {
    return n$1(n$1({}, ct$1.payloadify(e.user)), {
      emoji_hash: e.appInfo.emojiHash,
      file_upload_size_limit: e.appInfo.uploadSizeLimit,
      application_attributes: e.appInfo.applicationAttributes,
      premium_feature_list: e.appInfo.premiumFeatureList,
      login_ts: e.connectedAt / 1e3,
      ping_interval: e.pingInterval,
      pong_timeout: e.pongTimeout,
      reconnect: {
        interval: e.reconnectInterval,
        max_interval: e.reconnectMaxInterval,
        retry_cnt: e.reconnectRetryCount,
        mul: e.reconnectIntervalMultiple
      },
      max_unread_cnt_on_super_group: e.maxUnreadCountOnSuperGroup,
      profile_image_encryption: e.profileImageEncryption,
      concurrent_call_limit: e.concurrentCallLimit,
      back_off_delay: e.backOffDelay
    });
  }, e.prototype.apply = function () {
    var e = this.reconnectInterval,
        t = this.reconnectMaxInterval,
        n = this.reconnectIntervalMultiple,
        r = St$1$1.of(this._iid);
    r.sdkState.websocket.pingInterval = 1e3 * this.pingInterval, r.sdkState.websocket.pongTimeout = 1e3 * this.pongTimeout, r.sdkState.websocket.reconnectMaxRetry = this.reconnectRetryCount, r.sdkState.websocket.reconnectRetryStrategy = {
      calcTimeout: function (r) {
        return r > 0 ? 1e3 * Math.min(e * Math.pow(n, r - 1), t) : 10;
      }
    }, r.appInfo = this.appInfo, r.sessionManager.currentUser = this.user, r.connectedAt = this.connectedAt, this.firstConnectedAt || (r.firstConnectedAt = this.connectedAt), r.maxSuperGroupChannelUnreadCount = this.maxUnreadCountOnSuperGroup, r.concurrentCallLimit = this.concurrentCallLimit, r.backOffDelay = this.backOffDelay, r.dispatcher.dispatch(new lt$1({
      userProfile: this
    }));
  }, e;
}(),
    ht$1 = function (e) {
  function r(t, n, r) {
    var i,
        s = this;
    return (s = e.call(this, t, n, r) || this).error = null, s.userProfile = new dt$1(t, r), s.key = r.key, s.ekey = null !== (i = r.ekey) && void 0 !== i ? i : "", s.error = r.error ? new p$1(r) : null, s;
  }

  return t(r, e), r.asError = function (e) {
    return new r(null, "LOGI", n$1({
      user_id: null,
      error: !0
    }, e));
  }, r.prototype.applyTo = function (e) {
    if (this.error) throw this.error;
    var t = St$1$1.of(e);
    if (!t) throw p$1.lostInstance;
    t.sessionManager.auth.sessionKey = this.key, Me$1(e, this.ekey), this.userProfile.apply();
  }, r;
}(B$2),
    pt$1 = function (e) {
  function n(t) {
    var n = e.call(this) || this;
    return n.enabled = t, n;
  }

  return t(n, e), n;
}(L),
    ft$1 = function (e) {
  function n(t, n) {
    var r = n.sdkState,
        i = n.connectionHandlers,
        s = n.sessionManager,
        o = n.websocketClient,
        a = n.dispatcher,
        u = n.logger,
        c = n.entryState,
        l = void 0 === c ? new Re$1() : c,
        d = e.call(this) || this;
    return d._currentState = null, d._loginTimer = null, d._connectingAt = 0, d._connectionRequestQueue = [], d._iid = t, d.sdkState = r, d.connectionHandlers = i, d._sessionManager = s, d._websocketClient = o, d._dispatcher = a, d._logger = u, d._currentState = l, d._websocketClient.on("message", function (e) {
      if ("LOGI" === e.code) {
        d._loginTimer && (clearTimeout(d._loginTimer), d._loginTimer = null);
        var t = e.as(ht$1);
        if (t.error) t.error.isSessionKeyExpiredError && d._dispatcher.dispatch(new G$1()), d._connectionRequestQueue.forEach(function (e) {
          return e.reject(t.error);
        }), d._statLogConnection(t.error);else {
          t.applyTo(d._iid), d._connectionRequestQueue.forEach(function (e) {
            return e.resolve();
          });
          var n = t.userProfile;
          d._enableStatLog(n.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish")), d._statLogConnection(null);
        }
        d._connectionRequestQueue = [];
      }
    }).on("close", function () {
      d._connectionRequestQueue.length > 0 && (d._connectionRequestQueue.forEach(function (e) {
        return e.reject(p$1.networkError);
      }), d._connectionRequestQueue = [], d._statLogConnection(p$1.networkError));
    }), d;
  }

  return t(n, e), Object.defineProperty(n.prototype, "currentState", {
    get: function () {
      return this._currentState;
    },
    enumerable: !1,
    configurable: !0
  }), n.prototype.changeState = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._currentState = e, this._dispatcher.dispatch(new de$1({
              stateType: e.type
            })), this._logger.debug("connection state changes to ".concat(e.name)), [4, this._currentState.run(this)];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, n.prototype._url = function (e) {
    void 0 === e && (e = "");
    var t = this.sdkState,
        n = t.appId,
        r = t.appVersion,
        i = t.userId,
        s = t.extensions,
        o = this._sessionManager.auth,
        a = s.sb_syncmanager ? "s".concat(s.sb_syncmanager) : "",
        u = s.sb_uikit ? "u".concat(s.sb_uikit) : "",
        c = "JS/c".concat(l$2.SDK_VERSION, "/").concat(a, "/").concat(u);
    return "".concat(this.sdkState.websocket.host, "/?p=JS&pv=").concat(encodeURIComponent(l$2.OS_VERSION), "&sv=").concat(encodeURIComponent(l$2.SDK_VERSION), "&ai=").concat(n).concat(r ? "&av=".concat(r) : "").concat(o.hasSession ? "&key=".concat(encodeURIComponent(o.sessionKey)) : "&user_id=".concat(encodeURIComponent(i), "&access_token=").concat(encodeURIComponent(e)), "&active=1&SB-User-Agent=").concat(c, "&Request-Sent-Timestamp=").concat(Date.now().toString(), "&include_extra_data=").concat(encodeURIComponent(String(["premium_feature_list", "file_upload_size_limit", "application_attributes", "emoji_hash"]))).concat(this._sessionManager.handler ? "&expiring_session=1" : "", "&use_local_cache=1");
  }, n.prototype._enableStatLog = function (e) {
    this._dispatcher.dispatch(new pt$1(e));
  }, n.prototype._statLogConnection = function (e) {
    this._dispatcher.dispatch(new Q$2(new K$2({
      type: P$1.WEBSOCKET_CONNECT,
      data: {
        host_url: this.sdkState.websocket.host,
        success: !e,
        latency: Date.now() - this._connectingAt,
        error_code: null == e ? void 0 : e.code,
        error_description: null == e ? void 0 : e.message
      }
    })));
  }, n.prototype.connect = function (e) {
    return void 0 === e && (e = ""), r$1(this, void 0, void 0, function () {
      var t,
          n,
          r = this;
      return i$1(this, function (i) {
        return t = this._url(e), n = new ee$1(), this._connectionRequestQueue.push(n), 1 === this._connectionRequestQueue.length && (this._connectingAt = Date.now(), this._loginTimer = setTimeout(function () {
          r._loginTimer = null, r._dispatcher.dispatch(ht$1.asError(p$1.loginTimeout));
        }, this.sdkState.websocket.responseTimeout), this._websocketClient.connect(t)), [2, n.promise];
      });
    });
  }, n.prototype.cancelConnectForRetry = function () {
    this._dispatcher.dispatch(ht$1.asError(p$1.connectionRenew));
  }, n.prototype.disconnect = function () {
    this._websocketClient.disconnect();
  }, n.prototype.logout = function () {
    this.sdkState.userId = null, this._sessionManager.currentUser = null, this._sessionManager.auth.clear(), this.disconnect();
  }, n;
}(M$1),
    _t$1 = function () {
  function e(e, t) {
    var n = t.sdkState,
        r = t.connectionHandlers,
        i = t.sessionManager,
        s = t.websocketClient,
        o = t.dispatcher,
        a = t.logger,
        u = t.disableAutoReconnect,
        c = void 0 !== u && u,
        l = this;
    this._context = null, this._logger = a, this._context = new ft$1(e, {
      sdkState: n,
      connectionHandlers: r,
      sessionManager: i,
      websocketClient: s,
      dispatcher: o,
      logger: a
    }), c || s.on("close", function () {
      "foreground" === n.appState && setTimeout(function () {
        l._logger.debug("try reconnect by websocket connection closed"), l.reconnect();
      }, 100);
    });
  }

  return Object.defineProperty(e.prototype, "isConnected", {
    get: function () {
      return this._context.currentState.type === J$2.CONNECTED;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "isConnecting", {
    get: function () {
      var e = this._context.currentState;
      return e.type === J$2.CONNECTING || e.type === J$2.RECONNECTING;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.connect = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._context.currentState.onConnect(this._context, e)];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, e.prototype.reconnect = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, this._context.currentState.onReconnect(this._context, {})];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, e.prototype.resetAndReconnect = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, this._context.currentState.onReconnect(this._context, {
              resetReconnectCount: !0
            })];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, e.prototype.background = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, this._context.currentState.onDisconnect(this._context, {
              autoReconnect: !1
            })];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, e.prototype.disconnect = function (e) {
    return void 0 === e && (e = null), r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._context.currentState.onDisconnect(this._context, {
              error: e,
              autoReconnect: !0
            })];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, e.prototype.logout = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, this._context.currentState.onLogout(this._context)];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, e;
}(),
    gt$1 = function (e) {
  function n(t) {
    var n = t.deviceId,
        r = t.statLogs,
        i = e.call(this) || this;
    return i.method = d$1.POST, i.path = "".concat(Be$1), i.params = {
      device_id: n,
      log_entries: r.map(function (e) {
        return K$2.payloadify(e);
      })
    }, i;
  }

  return t(n, e), n;
}(q$2);

!function (e) {
  e[e.PENDING = 0] = "PENDING", e[e.ENABLED = 1] = "ENABLED", e[e.DISABLED = 2] = "DISABLED";
}(ut$1 || (ut$1 = {}));

var yt$1$1,
    mt$1 = function () {
  function e(e) {
    var t = e.cacheContext,
        n = e.requestQueue,
        r = e.dispatcher,
        i = e.baseLimit,
        s = void 0 === i ? 100 : i,
        o = e.maxLimit,
        a = void 0 === o ? 1e3 : o,
        u = e.minLimit,
        c = void 0 === u ? 10 : u;
    this.queue = [], this.enabledstate = ut$1.PENDING, this.isFlushing = !1, this.generation = 1, this.lastFlushedAt = 0, this.deviceId = R$2(), this.cacheContext = t, this.requestQueue = n, this.dispatcher = r, this.baseLimit = s, this.limit = s, this.maxLimit = a, this.minLimit = c;
  }

  return Object.defineProperty(e.prototype, "isEnabled", {
    get: function () {
      return this.enabledstate === ut$1.ENABLED;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype._save = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return this.cacheContext.localCacheEnabled ? [4, this.cacheContext.preference.set(this.key, {
              deviceId: this.deviceId,
              statLogs: this.queue.map(function (e) {
                return K$2.payloadify(e);
              }),
              generation: this.generation++,
              lastFlushedAt: this.lastFlushedAt
            })] : [3, 2];

          case 1:
            e.sent(), e.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, e.prototype._flush = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            if (!this.isEnabled) return [3, 7];
            if (this.isFlushing) return [3, 7];
            this.isFlushing = !0, n.label = 1;

          case 1:
            return n.trys.push([1, 5, 6, 7]), (e = this.queue.slice(0, Math.min(this.limit, this.maxLimit))).length > 0 ? (t = new gt$1({
              deviceId: this.deviceId,
              statLogs: e
            }), [4, this.requestQueue.send(t)]) : [3, 4];

          case 2:
            return n.sent(), this.queue = this.queue.slice(e.length), [4, this._save()];

          case 3:
            n.sent(), n.label = 4;

          case 4:
            return this.limit = this.baseLimit, this.lastFlushedAt = Date.now(), [3, 7];

          case 5:
            return n.sent(), this.limit = this.limit + 20, [3, 7];

          case 6:
            return this.isFlushing = !1, [7];

          case 7:
            return [2];
        }
      });
    });
  }, e.prototype.init = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r = this;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return this.key = e, this.cacheContext.localCacheEnabled ? [4, this.cacheContext.preference.get(this.key)] : [3, 4];

          case 1:
            return (t = i.sent()) ? (this.deviceId = t.deviceId, this.queue = t.statLogs.map(function (e) {
              return new K$2({
                type: e.stat_type,
                ts: e.ts,
                data: e.data
              });
            }), this.generation = t.generation, this.lastFlushedAt = t.lastFlushedAt, Date.now() - this.lastFlushedAt >= 108e5 && this.queue.length >= this.minLimit ? (n = Math.min(Math.floor(18e4 * Math.random()), 100), [4, me$1(n)]) : [3, 4]) : [3, 4];

          case 2:
            return i.sent(), [4, this._flush()];

          case 3:
            i.sent(), i.label = 4;

          case 4:
            return this.dispatcher.on(function (e) {
              if (e instanceof Q$2) {
                var t = e.statLog;
                r.put(t);
              } else e instanceof pt$1 && (r.enabledstate = e.enabled ? ut$1.ENABLED : ut$1.DISABLED, r.isEnabled ? r.queue.length >= r.limit && r._flush() : r.clear());
            }), [2];
        }
      });
    });
  }, e.prototype.put = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this.enabledstate === ut$1.DISABLED ? [3, 3] : (this.queue.push(e), [4, this._save()]);

          case 1:
            return t.sent(), this.queue.length >= this.limit ? [4, this._flush()] : [3, 3];

          case 2:
            t.sent(), t.label = 3;

          case 3:
            return [2];
        }
      });
    });
  }, e.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return this.queue = [], this.generation = 1, [4, this._save()];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, e;
}();

!function (e) {
  e[e.NONE = 0] = "NONE", e[e.VERBOSE = 1] = "VERBOSE", e[e.DEBUG = 2] = "DEBUG", e[e.INFO = 3] = "INFO", e[e.WARN = 4] = "WARN", e[e.ERROR = 5] = "ERROR";
}(yt$1$1 || (yt$1$1 = {}));

var vt$1,
    Et$1 = function () {
  function e() {
    this.level = yt$1$1.WARN;
  }

  return e.prototype.verbose = function () {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

    this.level <= yt$1$1.VERBOSE && console.log.apply(console, a(["[verbose]"], o(e), !1));
  }, e.prototype.debug = function () {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

    this.level <= yt$1$1.DEBUG && console.log.apply(console, a(["[debug]"], o(e), !1));
  }, e.prototype.info = function () {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

    this.level <= yt$1$1.INFO && console.log.apply(console, a(["[info]"], o(e), !1));
  }, e.prototype.warn = function () {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

    this.level <= yt$1$1.WARN && console.warn.apply(console, a(["[warn]"], o(e), !1));
  }, e.prototype.error = function () {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

    this.level <= yt$1$1.ERROR && console.error.apply(console, a(["[error]"], o(e), !1));
  }, e;
}(),
    It$1$1 = {},
    St$1$1 = function () {
  function e(e, t) {
    var n, r, i, s, o, a, u;

    if (this.connectedAt = 0, this.firstConnectedAt = 0, this.connectionHandlers = new Map(), this.userEventHandlers = new Map(), !It$1$1[e]) {
      It$1$1[e] = this;
      var c = null !== (n = t.options) && void 0 !== n ? n : new b(),
          d = this.sdkState = {
        appId: t.appId,
        appVersion: null !== (r = t.appVersion) && void 0 !== r ? r : "",
        appState: "foreground",
        userId: null,
        extensions: {},
        api: {
          host: null !== (i = t.apiHost) && void 0 !== i ? i : "https://api-".concat(t.appId, ".sendbird.com")
        },
        websocket: {
          host: null !== (s = t.websocketHost) && void 0 !== s ? s : "wss://ws-".concat(t.appId, ".sendbird.com"),
          pingerDisabled: !!t.noPingpong,
          pingInterval: null,
          pongTimeout: null,
          connectMaxRetry: 2,
          reconnectMaxRetry: -1,
          reconnectRetryStrategy: new ve$1(),
          responseTimeout: c.websocketResponseTimeout
        }
      };
      this.appInfo = null, this.subscribedUnreadMessageCount = {
        all: 0,
        customTypes: {},
        ts: 0
      };
      var h = this.logger = new Et$1();
      this.logger.level = null !== (o = t.logLevel) && void 0 !== o ? o : yt$1$1.WARN, this.connectedAt = 0, this.firstConnectedAt = 0, this.connectionHandlers = new Map(), this.userEventHandlers = new Map(), this.cacheContext = new O$1({
        encryption: t.encryption,
        store: t.store,
        localCacheEnabled: null !== (a = t.localCacheEnabled) && void 0 !== a && a
      }), this.debugMode = null !== (u = t.debugMode) && void 0 !== u && u, this.maxSuperGroupChannelUnreadCount = l$2.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL, this.useMemberInfoInMessage = c.useMemberInfoInMessage, this.typingIndicatorInvalidateTime = c.typingIndicatorInvalidateTime, this.typingIndicatorThrottle = c.typingIndicatorThrottle, this.concurrentCallLimit = null, this.backOffDelay = null;
      var p = this.dispatcher = new k(),
          f = new w();
      this.requestQueue = new he$1(e, {
        auth: f,
        sdkState: d,
        dispatcher: p,
        logger: h
      }), this.sessionManager = new Te$1({
        auth: f,
        sdkState: d,
        dispatcher: p,
        requestQueue: this.requestQueue,
        logger: h
      }), this.connectionManager = new _t$1(e, {
        sdkState: d,
        connectionHandlers: this.connectionHandlers,
        dispatcher: p,
        sessionManager: this.sessionManager,
        websocketClient: this.requestQueue.commandRouter.websocketClient,
        logger: h
      }), this.statLogCollector = new mt$1({
        cacheContext: this.cacheContext,
        requestQueue: this.requestQueue,
        dispatcher: p
      });
    }

    return It$1$1[e];
  }

  return e.of = function (e) {
    if (It$1$1[e]) return It$1$1[e];
    throw p$1.lostInstance;
  }, e;
}(),
    Tt$1$1 = function () {
  function e() {}

  return e.prototype.init = function (e, t) {
    var n = t.sdkState,
        r = t.dispatcher,
        i = t.sessionManager,
        s = t.requestQueue,
        o = t.logger;
    t.onlineDetector;
    var a = t.cacheContext,
        u = void 0 === a ? null : a;
    this._iid = e, this._cacheContext = u, this._sdkState = n, this._dispatcher = r, this._sessionManager = i, this._requestQueue = s, this._logger = o;
  }, e;
}(),
    bt$1$1 = function (e) {
  function n(t) {
    var n = e.call(this) || this;
    if (n.method = d$1.POST, n.path = "".concat(Pe$1), n.params = U$2({
      file: t.file,
      channel_url: t.channelUrl
    }), t.thumbnailSizes) for (var r = 0; r < t.thumbnailSizes.length; r++) {
      var i = t.thumbnailSizes[r],
          s = i.maxWidth,
          o = i.maxHeight;
      n.params["thumbnail".concat(r + 1)] = "".concat(s, ",").concat(o);
    }
    return n.requestId = t.requestId, n;
  }

  return t(n, e), n;
}(q$2),
    Nt$1$1 = function (e) {
  function n(t, n) {
    var r,
        i,
        s,
        o = this;
    return (o = e.call(this, t, n) || this).url = n.url, o.fileSize = null !== (r = n.file_size) && void 0 !== r ? r : 0, o.thumbnailSizes = null !== (i = n.thumbnails) && void 0 !== i ? i : [], o.requireAuth = null !== (s = n.require_auth) && void 0 !== s && s, o;
  }

  return t(n, e), n;
}(F$1),
    At$1$1 = function (e) {
  function r(t, n) {
    var r,
        i,
        s,
        o = this;
    return (o = e.call(this, t) || this).replyCount = 0, o.mostRepliedUsers = null, o.lastRepliedAt = 0, o.updatedAt = 0, o.replyCount = null !== (r = n.reply_count) && void 0 !== r ? r : 0, o.mostRepliedUsers = n.hasOwnProperty("most_replies") && E$1("object", n.most_replies) ? n.most_replies.map(function (e) {
      return new ct$1(o._iid, e);
    }) : [], o.lastRepliedAt = null !== (i = n.last_replied_at) && void 0 !== i ? i : 0, o.updatedAt = null !== (s = n.updated_at) && void 0 !== s ? s : 0, o;
  }

  return t(r, e), r.payloadify = function (t) {
    return t ? U$2(n$1(n$1({}, e.payloadify.call(this, t)), {
      reply_count: t.replyCount,
      most_replies: Array.isArray(t.mostRepliedUsers) ? t.mostRepliedUsers.map(function (e) {
        return ct$1.payloadify(e);
      }) : [],
      last_replied_at: t.lastRepliedAt,
      updated_at: t.updatedAt
    })) : null;
  }, r;
}(Le$1);

!function (e) {
  e.ADD = "add", e.DELETE = "delete";
}(vt$1 || (vt$1 = {}));

var Ct$1$1,
    Ot$1$1,
    wt$1$1 = function (e) {
  this.messageId = 0, this.userId = null, this.key = null, this.operation = null, this.updatedAt = 0;
  var t = y("string", e.msg_id) ? parseInt(e.msg_id) : e.msg_id,
      n = e.user_id,
      r = e.operation ? e.operation.toLowerCase() : null,
      i = e.reaction,
      s = e.updated_at;
  t && y("string", n) && y("string", r) && m(vt$1, r) && y("string", i) && i && y("number", s) && (this.messageId = t, this.userId = n, this.key = i, this.operation = r, this.updatedAt = s);
},
    Rt$1$1 = function () {
  function e(e) {
    var t,
        n,
        r,
        i = e.key,
        u = null !== (r = a([], o(e.user_ids), !1)) && void 0 !== r ? r : [],
        c = e.updated_at;
    y("string", i) && i && E$1("string", u) && u.length > 0 && y("number", c) && (this.key = i, this.userIds = u, this.updatedAt = c);
    var l = {};

    try {
      for (var d = s(this.userIds), h = d.next(); !h.done; h = d.next()) {
        l[h.value] = this.updatedAt;
      }
    } catch (e) {
      t = {
        error: e
      };
    } finally {
      try {
        h && !h.done && (n = d.return) && n.call(d);
      } finally {
        if (t) throw t.error;
      }
    }

    this._version = l;
  }

  return Object.defineProperty(e.prototype, "isEmpty", {
    get: function () {
      return 0 === this.userIds.length;
    },
    enumerable: !1,
    configurable: !0
  }), e.payloadify = function (e) {
    return e ? U$2({
      key: e.key,
      user_ids: e.userIds,
      updated_at: e.updatedAt
    }) : null;
  }, e.prototype.applyEvent = function (e) {
    if (e.key === this.key && this.updatedAt <= e.updatedAt) {
      if (!this._version[e.userId] || this._version[e.userId] <= e.updatedAt) {
        var t = this.userIds.indexOf(e.userId);

        switch (e.operation) {
          case vt$1.ADD:
            t < 0 && this.userIds.push(e.userId);
            break;

          case vt$1.DELETE:
            t >= 0 && this.userIds.splice(t, 1);
        }

        this._version[e.userId] = e.updatedAt;
      }

      this.updatedAt = Math.max(this.updatedAt, e.updatedAt);
    }
  }, e;
}(),
    Dt$1$1 = function () {
  function e(e) {
    this.key = e.key, this.value = E$1("string", e.value) ? a([], o(e.value), !1) : [];
  }

  return e.payloadify = function (e) {
    var t;
    return e ? U$2({
      key: e.key,
      value: null !== (t = e.value) && void 0 !== t ? t : []
    }) : null;
  }, e;
}(),
    Mt$1$1 = function () {
  function e(e) {
    this.url = null, this.secureUrl = null, this.type = null, this.width = 0, this.height = 0, this.alt = null, this.url = e.url, e.hasOwnProperty("secure_url") && (this.secureUrl = e.secure_url), e.hasOwnProperty("type") && (this.type = e.type), e.hasOwnProperty("width") && (this.width = e.width), e.hasOwnProperty("height") && (this.height = e.height), e.hasOwnProperty("alt") && (this.alt = e.alt);
  }

  return e.payloadify = function (e) {
    var t, n;
    return e ? U$2({
      url: e.url,
      secure_url: e.secureUrl,
      type: e.type,
      width: null !== (t = e.width) && void 0 !== t ? t : 0,
      height: null !== (n = e.height) && void 0 !== n ? n : 0,
      alt: e.alt
    }) : null;
  }, e;
}(),
    kt$1$1 = function () {
  function e(e) {
    this.title = null, this.url = null, this.description = null, this.defaultImage = null, e.hasOwnProperty("og:title") && (this.title = e["og:title"]), e.hasOwnProperty("og:url") && (this.url = e["og:url"]), e.hasOwnProperty("og:description") && (this.description = e["og:description"]), e.hasOwnProperty("og:image") && (this.defaultImage = new Mt$1$1(e["og:image"]));
  }

  return e.payloadify = function (e) {
    return e ? U$2({
      "og:title": e.title,
      "og:url": e.url,
      "og:description": e.description,
      "og:image": e.defaultImage ? Mt$1$1.payloadify(e.defaultImage) : null
    }) : null;
  }, e;
}(),
    Lt$2 = function () {
  function e(e) {
    var t, n;
    this.name = null, this.volume = 0, this.name = null !== (t = e.name) && void 0 !== t ? t : "default", this.volume = null !== (n = e.volume) && void 0 !== n ? n : 1;
  }

  return e.payloadify = function (e) {
    return e ? U$2({
      name: e.name,
      volume: e.volume
    }) : null;
  }, e;
}();

!function (e) {
  e.PENDING = "pending", e.SENT = "sent", e.FAILED = "failed", e.CANCELED = "canceled";
}(Ct$1$1 || (Ct$1$1 = {})), function (e) {
  e.PENDING = "pending", e.IN_QUEUE = "in_queue", e.SENT = "sent", e.FAILED = "failed", e.CANCELED = "canceled", e.REMOVED = "removed";
}(Ot$1$1 || (Ot$1$1 = {}));

var Ut$1$1,
    Pt$1$1 = function (e) {
  switch (e) {
    case ie$1.BASE:
      return "";

    case ie$1.USER:
      return "MESG";

    case ie$1.FILE:
      return "FILE";

    case ie$1.ADMIN:
      return "ADMM";
  }
},
    qt$1$1 = function (e) {
  function r(t, n) {
    var r,
        i,
        s,
        o,
        a,
        u,
        c,
        l,
        d,
        h,
        p,
        f,
        _,
        g = this;

    (g = e.call(this, t) || this).channelUrl = null, g.channelType = ne$1.BASE, g.messageId = 0, g.parentMessageId = null, g.parentMessage = null, g.silent = !1, g.isOperatorMessage = !1, g.messageType = ie$1.BASE, g.data = null, g.customType = null, g.mentionType = null, g.mentionedUsers = [], g.mentionedUserIds = [], g.mentionedMessageTemplate = null, g.threadInfo = null, g.reactions = [], g.metaArrays = [], g.ogMetaData = null, g.appleCriticalAlertOptions = null, g.createdAt = 0, g.updatedAt = 0, g.scheduledInfo = null, g._scheduledStatus = Ot$1$1.PENDING, g.messageId = null !== (i = null !== (r = n.msg_id) && void 0 !== r ? r : n.message_id) && void 0 !== i ? i : 0, g.channelUrl = n.channel_url, g.channelType = m(ne$1, n.channel_type) ? n.channel_type : ne$1.GROUP, n.channel && (n.channel.channel_url && (g.channelUrl = n.channel.channel_url), n.channel.channel_type && (g.channelType = n.channel.channel_type)), g.parentMessageId = null !== (s = "string" == typeof n.parent_message_id ? parseInt(n.parent_message_id) : n.parent_message_id) && void 0 !== s ? s : 0, g.data = null !== (o = n.data) && void 0 !== o ? o : "", g.customType = null !== (a = n.custom_type) && void 0 !== a ? a : "", g.mentionType = m(ae$1, n.mention_type) ? n.mention_type : null;
    var y = n.mentioned_users;
    g.mentionedUsers = y ? y.map(function (e) {
      return new ct$1(g._iid, e);
    }) : null;
    var v = n.mentioned_user_ids;
    g.mentionedUserIds = null != v ? v : null, g.mentionedMessageTemplate = null !== (u = n.mentioned_message_template) && void 0 !== u ? u : "", g.threadInfo = n.thread_info ? new At$1$1(g._iid, n.thread_info) : null, g.reactions = n.reactions ? n.reactions.map(function (e) {
      return new Rt$1$1(e);
    }) : [];

    for (var E = null !== (c = n.metaarray) && void 0 !== c ? c : {}, I = null !== (l = n.metaarray_key_order) && void 0 !== l ? l : Object.keys(E).sort(function (e, t) {
      return e.localeCompare(t);
    }), S = 0; S < I.length; S++) {
      var T = I[S];
      g.metaArrays.push(new Dt$1$1({
        key: T,
        value: E[T] || []
      }));
    }

    return n.sorted_metaarray && (g.metaArrays = n.sorted_metaarray.map(function (e) {
      return new Dt$1$1(e);
    })), g.ogMetaData = n.og_tag ? new kt$1$1(n.og_tag) : null, g.silent = null !== (d = n.silent) && void 0 !== d && d, g.isOperatorMessage = null !== (h = n.is_op_msg) && void 0 !== h && h, g.appleCriticalAlertOptions = n.apple_critical_alert_options ? new Lt$2(n.apple_critical_alert_options) : null, g.createdAt = null !== (f = null !== (p = n.created_at) && void 0 !== p ? p : n.ts) && void 0 !== f ? f : 0, g.updatedAt = null !== (_ = n.updated_at) && void 0 !== _ ? _ : 0, "number" == typeof n.scheduled_message_id && n.scheduled_at && n.scheduled_status && (g.scheduledInfo = {
      scheduledMessageId: n.scheduled_message_id,
      scheduledAt: n.scheduled_at
    }, g._scheduledStatus = n.scheduled_status), g;
  }

  return t(r, e), r.payloadify = function (t) {
    var r, i, s, o;
    return t ? U$2(n$1(n$1({}, e.payloadify.call(this, t)), {
      channel_url: t.channelUrl,
      channel_type: t.channelType,
      message_id: t.messageId,
      type: Pt$1$1(t.messageType),
      parent_message_id: t.parentMessageId,
      data: t.data,
      custom_type: t.customType,
      mention_type: t.mentionType,
      mentioned_user_ids: t.mentionedUserIds,
      mentioned_users: null === (r = t.mentionedUsers) || void 0 === r ? void 0 : r.map(function (e) {
        return ct$1.payloadify(e);
      }),
      mentioned_message_template: t.mentionedMessageTemplate,
      thread_info: t.threadInfo ? At$1$1.payloadify(t.threadInfo) : null,
      reactions: t.reactions.map(function (e) {
        return Rt$1$1.payloadify(e);
      }),
      sorted_metaarray: null === (i = t.metaArrays) || void 0 === i ? void 0 : i.map(function (e) {
        return Dt$1$1.payloadify(e);
      }),
      og_tag: kt$1$1.payloadify(t.ogMetaData),
      silent: t.silent,
      is_op_msg: t.isOperatorMessage,
      apple_critical_alert_options: Lt$2.payloadify(t.appleCriticalAlertOptions),
      created_at: t.createdAt,
      updated_at: t.updatedAt,
      scheduled_message_id: null === (s = t.scheduledInfo) || void 0 === s ? void 0 : s.scheduledMessageId,
      scheduled_at: null === (o = t.scheduledInfo) || void 0 === o ? void 0 : o.scheduledAt,
      scheduled_status: t._scheduledStatus
    })) : null;
  }, r.prototype.isIdentical = function (e) {
    return this.messageId === e.messageId;
  }, r.prototype.isEqual = function (e) {
    return g(this, e);
  }, r.prototype.isUserMessage = function () {
    return this.messageType === ie$1.USER;
  }, r.prototype.isFileMessage = function () {
    return this.messageType === ie$1.FILE;
  }, r.prototype.isAdminMessage = function () {
    return this.messageType === ie$1.ADMIN;
  }, r.prototype.serialize = function () {
    return st$1(this);
  }, r.prototype.getMetaArraysByKeys = function (e) {
    return this.metaArrays.filter(function (t) {
      return e.includes(t.key);
    });
  }, r.prototype.applyThreadInfoUpdateEvent = function (e) {
    return this.parentMessageId === e.targetMessageId && (this.threadInfo = e.threadInfo), !1;
  }, r.prototype.applyReactionEvent = function (e) {
    if (this.messageId === e.messageId) {
      for (var t = !1, n = 0; n < this.reactions.length; n++) if (this.reactions[n].key === e.key) {
        this.reactions[n].applyEvent(e), this.reactions[n].isEmpty && this.reactions.splice(n, 1), t = !0;
        break;
      }

      t || "add" !== e.operation || this.reactions.push(new Rt$1$1(Rt$1$1.payloadify({
        key: e.key,
        userIds: [e.userId],
        updatedAt: e.updatedAt
      })));
    }
  }, r.prototype.applyParentMessage = function (e) {
    if (this.parentMessageId === e.messageId) {
      var t = this.parentMessage.updatedAt;
      if (e.updatedAt >= t) return this.parentMessage = e, !0;
    }

    return !1;
  }, r;
}(Le$1),
    Ft$2 = function (e) {
  function r(t, n) {
    var r = e.call(this, t, n) || this;
    return r.role = null, r.isBlockedByMe = !1, r.role = m(re$1, n.role) ? n.role : re$1.NONE, n.hasOwnProperty("is_blocked_by_me") && (r.isBlockedByMe = n.is_blocked_by_me), r;
  }

  return t(r, e), r.payloadify = function (t) {
    return t ? U$2(n$1(n$1({}, e.payloadify.call(this, t)), {
      role: t.role,
      is_blocked_by_me: t.isBlockedByMe
    })) : null;
  }, r;
}(ct$1),
    xt$2 = function (e) {
  function r(t, n) {
    var r,
        i,
        s,
        o,
        a = this;
    if ((a = e.call(this, t, n) || this).sender = null, a.reqId = "", a.replyToChannel = !1, a.sendingStatus = le$1.PENDING, a.errorCode = 0, a.sender = n.user ? new Ft$2(a._iid, n.user) : n.sender_id, a.reqId = null !== (i = null !== (r = n.req_id) && void 0 !== r ? r : n.request_id) && void 0 !== i ? i : "", a.replyToChannel = null !== (s = n.is_reply_to_channel) && void 0 !== s && s, a.sendingStatus = a.messageId > 0 ? le$1.SUCCEEDED : le$1.FAILED, n.request_state && m(le$1, n.request_state) && (a.sendingStatus = n.request_state), n.scheduled_status) switch (n.scheduled_status) {
      case Ot$1$1.SENT:
      case Ot$1$1.IN_QUEUE:
        a.sendingStatus = le$1.SUCCEEDED;
        break;

      case Ot$1$1.PENDING:
        a.sendingStatus = le$1.SCHEDULED;
        break;

      case Ot$1$1.FAILED:
      case Ot$1$1.REMOVED:
        a.sendingStatus = le$1.FAILED;
        break;

      case Ot$1$1.CANCELED:
        a.sendingStatus = le$1.CANCELED;
    }
    return a.errorCode = null !== (o = n.error_code) && void 0 !== o ? o : 0, a;
  }

  return t(r, e), r.payloadify = function (t) {
    return t ? U$2(n$1(n$1({}, e.payloadify.call(this, t)), {
      user: Ft$2.payloadify(t.sender),
      req_id: t.reqId,
      is_reply_to_channel: t.replyToChannel,
      request_state: t.sendingStatus,
      error_code: t.errorCode
    })) : null;
  }, Object.defineProperty(r.prototype, "isResendable", {
    get: function () {
      return this.sendingStatus === le$1.FAILED && (e = this.errorCode) > 0 && f.indexOf(e) >= 0;
      var e;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.isIdentical = function (e) {
    return this.messageId > 0 && e.messageId > 0 ? this.messageId === e.messageId : this.reqId === e.reqId;
  }, r;
}(qt$1$1),
    Gt$2 = function () {
  function e(e) {
    var t, n;
    this.url = null, this.width = 0, this.height = 0, this.realWidth = 0, this.realHeight = 0, this.url = e.url, this.width = e.width, this.height = e.height, this.realWidth = null !== (t = e.real_width) && void 0 !== t ? t : e.width, this.realHeight = null !== (n = e.real_height) && void 0 !== n ? n : e.height;
  }

  return e.payloadify = function (e) {
    return e ? U$2({
      url: "",
      width: e.maxWidth,
      height: e.maxHeight,
      real_width: 0,
      real_height: 0
    }) : null;
  }, Object.defineProperty(e.prototype, "plainUrl", {
    get: function () {
      return this.url.split("?auth=")[0];
    },
    enumerable: !1,
    configurable: !0
  }), e;
}(),
    Qt$2 = {
  prevResultSize: 0,
  nextResultSize: 0,
  isInclusive: !1,
  reverse: !1,
  messageTypeFilter: se$1.ALL,
  customTypesFilter: null,
  senderUserIdsFilter: null,
  includeReactions: !1,
  includeMetaArray: !1,
  includeParentMessageInfo: !1
},
    jt$2 = function (e) {
  return y("number", e.prevResultSize) && y("number", e.nextResultSize) && y("boolean", e.isInclusive) && y("boolean", e.reverse) && y("string", e.messageTypeFilter) && m(se$1, e.messageTypeFilter) && E$1("string", e.customTypesFilter, !0) && E$1("string", e.senderUserIdsFilter, !0) && y("boolean", e.includeMetaArray) && y("boolean", e.includeReactions) && y("boolean", e.includeParentMessageInfo);
},
    Kt$2 = function (e) {
  function s(t, r) {
    var i,
        s,
        o,
        a,
        u = this;

    if ((u = e.call(this, t, r) || this).message = null, u.translations = {}, u.message = null !== (i = r.message) && void 0 !== i ? i : "", u.messageType = ie$1.ADMIN, u.translations = null !== (s = r.translations) && void 0 !== s ? s : {}, r.parent_message_info) {
      var c = r.parent_message_info,
          l = n$1(n$1({}, c), {
        message_id: u.parentMessageId,
        channel_url: u.channelUrl,
        channel_type: u.channelType,
        file: c.file,
        url: null === (o = c.file) || void 0 === o ? void 0 : o.url,
        require_auth: null === (a = c.file) || void 0 === a ? void 0 : a.require_auth
      });
      u.parentMessage = Ht$2(t, l);
    }

    return u;
  }

  return t(s, e), s.payloadify = function (t) {
    return t ? U$2(n$1(n$1({}, e.payloadify.call(this, t)), {
      message: t.message,
      translations: t.translations,
      parent_message_info: Bt$2(t.parentMessage)
    })) : null;
  }, s.prototype.getThreadedMessagesByTimestamp = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return t = n$1(n$1({}, Qt$2), t), at$1(this.messageId > 0 && y("number", e) && jt$2(t)).throw(p$1.invalidParameters), [4, En$3.of(this._iid).getThreadedMessagesByTimestamp(this, e, t)];

          case 1:
            return [2, r.sent()];
        }
      });
    });
  }, s;
}(qt$1$1),
    zt$2 = function () {
  function e(e) {
    var t, n;
    this.type = null, this.vendor = null, this.detail = {}, this.type = null !== (t = e.type) && void 0 !== t ? t : "", this.vendor = null !== (n = e.vendor) && void 0 !== n ? n : "", e.hasOwnProperty("detail") && y("object", e.detail) && !Array.isArray(e.detail) && (this.detail = e.detail);
  }

  return e.payloadify = function (e) {
    return e ? U$2({
      type: e.type,
      vendor: e.vendor,
      detail: e.detail
    }) : null;
  }, e;
}(),
    Vt$2 = function (e) {
  function o(t, r) {
    var i,
        o,
        a,
        u,
        c,
        l,
        d,
        h = this;
    if ((h = e.call(this, t, r) || this).message = "", h.messageParams = null, h.translations = {}, h.translationTargetLanguages = [], h.messageSurvivalSeconds = -1, h.plugins = [], h.message = r.message, h.messageType = ie$1.USER, h.translations = null !== (a = r.translations) && void 0 !== a ? a : {}, h.translationTargetLanguages = null !== (u = r.target_langs) && void 0 !== u ? u : [], h.translations === {} && h.translationTargetLanguages.length > 0) try {
      for (var p = s(h.translationTargetLanguages), f = p.next(); !f.done; f = p.next()) {
        var _ = f.value;
        h.translations[_] = "";
      }
    } catch (e) {
      i = {
        error: e
      };
    } finally {
      try {
        f && !f.done && (o = p.return) && o.call(p);
      } finally {
        if (i) throw i.error;
      }
    }

    if (h.messageSurvivalSeconds = null !== (c = r.message_survival_seconds) && void 0 !== c ? c : -1, h.plugins = r.plugins ? r.plugins.map(function (e) {
      return new zt$2(e);
    }) : [], r.parent_message_info) {
      var g = r.parent_message_info,
          y = n$1(n$1({}, g), {
        created_at: g.ts,
        message_id: h.parentMessageId,
        channel_url: h.channelUrl,
        channel_type: h.channelType,
        file: g.file,
        url: null === (l = g.file) || void 0 === l ? void 0 : l.url,
        require_auth: null === (d = g.file) || void 0 === d ? void 0 : d.require_auth
      });
      h.parentMessage = Ht$2(t, U$2(y));
    }

    return h;
  }

  return t(o, e), o.payloadify = function (t) {
    return t ? U$2(n$1(n$1({}, e.payloadify.call(this, t)), {
      message: t.message,
      translations: t.translations,
      message_survival_seconds: t.messageSurvivalSeconds,
      plugins: t.plugins.map(function (e) {
        return zt$2.payloadify(e);
      }),
      parent_message_info: Bt$2(t.parentMessage)
    })) : null;
  }, o.prototype.getThreadedMessagesByTimestamp = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return t = n$1(n$1({}, Qt$2), t), at$1(this.messageId > 0 && y("number", e) && jt$2(t)).throw(p$1.invalidParameters), [4, En$3.of(this._iid).getThreadedMessagesByTimestamp(this, e, t)];

          case 1:
            return [2, r.sent()];
        }
      });
    });
  }, o;
}(xt$2),
    Bt$2 = function (e) {
  if (e) switch (e.messageType) {
    case ie$1.USER:
      return Vt$2.payloadify(e);

    case ie$1.FILE:
      return Wt$2.payloadify(e);

    case ie$1.ADMIN:
      return Kt$2.payloadify(e);
  }
  return null;
},
    Ht$2 = function (e, t) {
  switch (t.type) {
    case "MESG":
      return new Vt$2(e, t);

    case "FILE":
      return new Wt$2(e, t);

    case "ADMM":
    case "BRDM":
      return new Kt$2(e, t);
  }

  return null;
},
    Wt$2 = function (e) {
  function s(t, r) {
    var i,
        s,
        o,
        a,
        u,
        c,
        l,
        d,
        h,
        p,
        f,
        _,
        g,
        y,
        m,
        v = this;

    (v = e.call(this, t, r) || this).messageParams = null, v.plainUrl = "", v.requireAuth = !1, v.name = null, v.size = 0, v.type = null, v.thumbnails = [], v.messageSurvivalSeconds = -1, v.messageType = ie$1.FILE;
    var E = null !== (i = r.file) && void 0 !== i ? i : null;

    if (v.plainUrl = (null !== (o = null !== (s = null == E ? void 0 : E.url) && void 0 !== s ? s : r.url) && void 0 !== o ? o : "").split("?auth=")[0], v.name = null !== (u = null !== (a = null == E ? void 0 : E.name) && void 0 !== a ? a : r.name) && void 0 !== u ? u : "File", v.size = null !== (l = null !== (c = null == E ? void 0 : E.size) && void 0 !== c ? c : r.size) && void 0 !== l ? l : 0, v.data = null !== (h = null !== (d = null == E ? void 0 : E.data) && void 0 !== d ? d : r.custom) && void 0 !== h ? h : "", v.type = E ? null !== (p = E.type) && void 0 !== p ? p : "" : null !== (f = r.type) && void 0 !== f ? f : "", v.requireAuth = null !== (_ = r.require_auth) && void 0 !== _ && _, v.thumbnails = r.thumbnails ? r.thumbnails.map(function (e) {
      return new Gt$2(n$1(n$1({}, e), {
        url: "".concat(e.url.split("?auth=")[0]).concat(v.requireAuth ? "?auth=".concat(Me$1(v._iid)) : "")
      }));
    }) : [], v.messageSurvivalSeconds = null !== (g = r.message_survival_seconds) && void 0 !== g ? g : -1, r.parent_message_info) {
      var I = r.parent_message_info,
          S = n$1(n$1({}, I), {
        message_id: v.parentMessageId,
        channel_url: v.channelUrl,
        channel_type: v.channelType,
        file: I.file,
        url: null === (y = I.file) || void 0 === y ? void 0 : y.url,
        require_auth: null === (m = I.file) || void 0 === m ? void 0 : m.require_auth
      });
      v.parentMessage = Ht$2(t, S);
    }

    return v;
  }

  return t(s, e), s.payloadify = function (t) {
    return t ? U$2(n$1(n$1({}, e.payloadify.call(this, t)), {
      url: t.plainUrl,
      require_auth: t.requireAuth,
      file: {
        name: t.name,
        size: t.size,
        type: t.type,
        data: t.data
      },
      thumbnails: t.thumbnails.map(function (e) {
        return {
          url: e.url,
          width: e.width,
          height: e.height,
          real_width: e.realWidth,
          real_height: e.realHeight
        };
      }),
      message_survival_seconds: t.messageSurvivalSeconds,
      parent_message_info: Bt$2(t.parentMessage)
    })) : null;
  }, Object.defineProperty(s.prototype, "url", {
    get: function () {
      return this.requireAuth ? "".concat(this.plainUrl, "?auth=").concat(Me$1(this._iid)) : this.plainUrl;
    },
    enumerable: !1,
    configurable: !0
  }), s.prototype.getThreadedMessagesByTimestamp = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return t = n$1(n$1({}, Qt$2), t), at$1(this.messageId > 0 && y("number", e) && jt$2(t)).throw(p$1.invalidParameters), [4, En$3.of(this._iid).getThreadedMessagesByTimestamp(this, e, t)];

          case 1:
            return [2, r.sent()];
        }
      });
    });
  }, s;
}(xt$2),
    Xt$2 = function (e) {
  function n(t) {
    var n,
        r,
        i,
        s = [];
    return t.mentionType === ae$1.USERS && (t.mentionedUserIds ? s = t.mentionedUserIds : t.mentionedUsers && (s = t.mentionedUsers.map(function (e) {
      return e.userId;
    }))), e.call(this, {
      code: "FILE",
      ackRequired: !0,
      payload: U$2({
        channel_url: t.channelUrl,
        url: t.url,
        name: null !== (n = t.fileName) && void 0 !== n ? n : "",
        type: null !== (r = t.mimeType) && void 0 !== r ? r : "",
        size: null !== (i = t.fileSize) && void 0 !== i ? i : 0,
        custom: t.data,
        custom_type: t.customType,
        thumbnails: t.thumbnailSizes,
        require_auth: t.requireAuth,
        metaarray: t.metaArrays,
        mention_type: t.mentionType,
        mentioned_user_ids: s,
        push_option: t.pushNotificationDeliveryOption && t.pushNotificationDeliveryOption !== ce$1.DEFAULT ? t.pushNotificationDeliveryOption : void 0,
        apple_critical_alert_options: t.appleCriticalAlertOptions,
        silent: t.silent,
        reply_to_channel: t.isReplyToChannel,
        parent_message_id: t.parentMessageId > 0 ? t.parentMessageId : null,
        req_id: t.reqId
      })
    }) || this;
  }

  return t(n, e), n;
}(H$2),
    Yt$2 = function (e) {
  function n(t) {
    var n,
        r = this;
    r = e.call(this) || this;
    var i = [];
    return t.mentionType === ae$1.USERS && (t.mentionedUserIds ? i = t.mentionedUserIds : t.mentionedUsers && (i = t.mentionedUsers.map(function (e) {
      return e.userId;
    }))), r.method = d$1.POST, r.path = "".concat(We$1(t.channelType), "/").concat(encodeURIComponent(t.channelUrl), "/messages"), r.params = U$2({
      message_type: ie$1.FILE,
      user_id: t.userId,
      url: t.fileUrl,
      mention_type: t.mentionType,
      mentioned_user_ids: i,
      file_name: t.fileName,
      file_size: t.fileSize,
      file_type: t.mimeType,
      data: t.data,
      custom_type: t.customType,
      thumbnails: t.thumbnailSizes.map(function (e) {
        return Gt$2.payloadify(e);
      }),
      require_auth: t.requireAuth,
      sorted_metaarray: null === (n = t.metaArrays) || void 0 === n ? void 0 : n.map(function (e) {
        return Dt$1$1.payloadify(e);
      }),
      push_option: t.pushNotificationDeliveryOption,
      parent_message_id: t.parentMessageId > 0 ? t.parentMessageId : null,
      apple_critical_alert_options: Lt$2.payloadify(t.appleCriticalAlertOptions),
      reply_to_channel: t.isReplyToChannel,
      req_id: t.reqId
    }), r;
  }

  return t(n, e), n;
}(q$2),
    Jt$2 = function (e) {
  function n(t, n, r) {
    var i,
        s,
        o,
        a = this;
    (a = e.call(this, t, "FILE", r) || this).message = new Wt$2(t, r);
    var u = St$1$1.of(t).sdkState;
    return a.isMentioned = Ye$1(a.message.mentionType, null !== (i = a.message.mentionedUserIds) && void 0 !== i ? i : null === (s = a.message.mentionedUsers) || void 0 === s ? void 0 : s.map(function (e) {
      return e.userId;
    }), u.userId), a.forceUpdateLastMessage = null !== (o = r.force_update_last_message) && void 0 !== o && o, a;
  }

  return t(n, e), n;
}(B$2),
    Zt$2 = function (e) {
  function n(t, n) {
    var r,
        i,
        s = this;
    (s = e.call(this, t, n) || this).message = new Wt$2(t, n);
    var o = St$1$1.of(t).sdkState;
    return s.isMentioned = Ye$1(s.message.mentionType, null !== (r = s.message.mentionedUserIds) && void 0 !== r ? r : s.message.mentionedUsers.map(function (e) {
      return e.userId;
    }), o.userId), s.forceUpdateLastMessage = null !== (i = n.force_update_last_message) && void 0 !== i && i, s;
  }

  return t(n, e), n;
}(F$1);

!function (e) {
  e[e.PENDING = 0] = "PENDING", e[e.UPLOADING = 1] = "UPLOADING", e[e.UPLOADED = 2] = "UPLOADED", e[e.SENDING = 3] = "SENDING", e[e.FAILED = 4] = "FAILED";
}(Ut$1$1 || (Ut$1$1 = {}));

var $t$2,
    en$3 = function () {
  function e(e, t) {
    var n = t.sdkState,
        r = t.dispatcher,
        i = t.requestQueue,
        s = t.onlineDetector,
        o = t.cacheContext,
        a = this;
    this._queueMap = new Map(), this._connectionState = null, this._onlineDetector = null, this._iid = e, this._sdkState = n, this._requestQueue = i, this._cacheContext = o, this._dispatcher = r, this._dispatcher.on(function (e) {
      e instanceof de$1 && (a._connectionState = e.stateType);
    }), this._onlineDetector = s;
  }

  return Object.defineProperty(e.prototype, "_shouldSendThroughWebSocket", {
    get: function () {
      return this._connectionState === J$2.CONNECTED || this._connectionState === J$2.CONNECTING || this._connectionState === J$2.RECONNECTING;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype._sendFileMessage = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var r, s;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return this._shouldSendThroughWebSocket ? (r = new Xt$2(n$1(n$1({
              channelUrl: e.url,
              channelType: e.channelType,
              url: t.params.fileUrl,
              requireAuth: t.requireAuth
            }, t.params), {
              reqId: t.requestId
            })), [4, this._requestQueue.send(r)]) : [3, 2];

          case 1:
            return s = i.sent(), [2, s.as(Jt$2).message];

          case 2:
            return r = new Yt$2(n$1(n$1({
              channelUrl: e.url,
              channelType: e.channelType,
              url: t.params.fileUrl,
              userId: this._sdkState.userId,
              requireAuth: t.requireAuth
            }, t.params), {
              reqId: t.requestId
            })), [4, this._requestQueue.send(r)];

          case 3:
            return s = i.sent(), [2, s.as(Zt$2).message];
        }
      });
    });
  }, e.prototype._resolveMessageQueue = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, o, a, c, l, d, h, f, _, g;

      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            if (!(t = this._queueMap.get(e.url))) return [3, 21];
            if (t.isResolving) return [3, 20];
            t.isResolving = !0, n = [], r = !0, i.label = 1;

          case 1:
            i.trys.push([1, 15, 16, 17]), o = s(t.messageQueue), a = o.next(), i.label = 2;

          case 2:
            if (a.done) return [3, 14];

            switch (c = a.value, c.state) {
              case Ut$1$1.PENDING:
              case Ut$1$1.UPLOADING:
                return [3, 3];

              case Ut$1$1.UPLOADED:
                return [3, 4];

              case Ut$1$1.FAILED:
                return [3, 12];
            }

            return [3, 13];

          case 3:
            return r = !1, n.push(c), [3, 13];

          case 4:
            if (!r) return [3, 10];
            i.label = 5;

          case 5:
            return i.trys.push([5, 8,, 9]), c.state = Ut$1$1.SENDING, [4, this._sendFileMessage(e, c)];

          case 6:
            return l = i.sent(), c.deferred.resolve(l), [4, me$1(100)];

          case 7:
            return i.sent(), [3, 9];

          case 8:
            return d = i.sent(), c.deferred.reject(d), [3, 9];

          case 9:
            return [3, 11];

          case 10:
            n.push(c), i.label = 11;

          case 11:
            return [3, 13];

          case 12:
            return c.deferred.reject(c.error.code === u$1.REQUEST_CANCELED ? p$1.fileUploadCanceled : c.error), [3, 13];

          case 13:
            return a = o.next(), [3, 2];

          case 14:
            return [3, 17];

          case 15:
            return h = i.sent(), _ = {
              error: h
            }, [3, 17];

          case 16:
            try {
              a && !a.done && (g = o.return) && g.call(o);
            } finally {
              if (_) throw _.error;
            }

            return [7];

          case 17:
            return f = t.isResolveRequestPending, t.messageQueue = n, t.isResolving = !1, t.isResolveRequestPending = !1, f ? [4, this._resolveMessageQueue(e)] : [3, 19];

          case 18:
            i.sent(), i.label = 19;

          case 19:
            return [3, 21];

          case 20:
            t.isResolveRequestPending = !0, i.label = 21;

          case 21:
            return [2];
        }
      });
    });
  }, e.prototype._uploadNextPendingItem = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, s, o, a, u, c, l, d, h, f, _, g;

      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = this._queueMap.get(e.url), (n = t.messageQueue.find(function (e) {
              return e.state === Ut$1$1.PENDING;
            })) ? S$1(n.params.file) ? t.uploadQueue.length < 6 ? (n.state = Ut$1$1.UPLOADING, t.uploadQueue.push(n), [4, this._onlineDetector.isOnline()]) : [3, 10] : [3, 11] : [3, 13];

          case 1:
            if (!i.sent()) return [3, 8];
            i.label = 2;

          case 2:
            return i.trys.push([2, 4, 5, 7]), r = new bt$1$1({
              file: n.params.file,
              channelUrl: e.url,
              thumbnailSizes: n.params.thumbnailSizes,
              requestId: n.requestId
            }), [4, this._requestQueue.send(r)];

          case 3:
            return s = i.sent(), o = s.as(Nt$1$1), a = o.url, u = o.fileSize, c = void 0 === u ? n.params.fileSize : u, l = o.thumbnailSizes, d = void 0 === l ? n.params.thumbnailSizes : l, h = o.requireAuth, f = void 0 !== h && h, n.params.fileUrl = a, n.params.fileSize = c, n.params.thumbnailSizes = d, n.params.requireAuth = f, n.requireAuth = f, n.state = Ut$1$1.UPLOADED, [3, 7];

          case 4:
            return _ = i.sent(), n.state = Ut$1$1.FAILED, n.error = _, [3, 7];

          case 5:
            return (g = t.uploadQueue.findIndex(function (e) {
              return e.requestId === n.requestId;
            })) >= 0 && (t.uploadQueue.splice(g, 1), this._uploadNextPendingItem(e)), [4, this._resolveMessageQueue(e)];

          case 6:
            return i.sent(), [7];

          case 7:
            return [3, 10];

          case 8:
            return n.state = Ut$1$1.FAILED, n.error = p$1.connectionRequired, (g = t.uploadQueue.findIndex(function (e) {
              return e.requestId === n.requestId;
            })) >= 0 && (t.uploadQueue.splice(g, 1), this._uploadNextPendingItem(e)), [4, this._resolveMessageQueue(e)];

          case 9:
            i.sent(), i.label = 10;

          case 10:
            return [3, 13];

          case 11:
            return n.params.thumbnailSizes = [], n.state = Ut$1$1.UPLOADED, [4, this._resolveMessageQueue(e)];

          case 12:
            i.sent(), i.label = 13;

          case 13:
            return [2];
        }
      });
    });
  }, e.prototype.request = function (e, t, n) {
    var s, o, a;
    return r$1(this, void 0, void 0, function () {
      var r;
      return i$1(this, function (i) {
        return r = new ee$1(), S$1(n.file) && (n.fileName = null !== (s = n.fileName) && void 0 !== s ? s : n.file.name, n.mimeType = null !== (o = n.mimeType) && void 0 !== o ? o : n.file.type, n.fileSize = null !== (a = n.fileSize) && void 0 !== a ? a : n.file.size), this._queueMap.has(e.url) || this._queueMap.set(e.url, {
          messageQueue: [],
          uploadQueue: [],
          isResolving: !1,
          isResolveRequestPending: !1
        }), this._queueMap.get(e.url).messageQueue.push({
          requestId: t,
          params: n,
          state: Ut$1$1.PENDING,
          deferred: r,
          requireAuth: n.requireAuth
        }), this._uploadNextPendingItem(e), [2, r.promise];
      });
    });
  }, e.prototype.cancel = function (e, t) {
    var n, r;
    void 0 === t && (t = null);

    var i = this._queueMap.get(e.url);

    if (i) {
      var u = t ? [i.messageQueue.find(function (e) {
        return e.requestId === t;
      })] : a([], o(i.messageQueue), !1);

      try {
        for (var c = s(u), l = c.next(); !l.done; l = c.next()) {
          var d = l.value;
          if (d) switch (d.state) {
            case Ut$1$1.PENDING:
              d.state = Ut$1$1.FAILED, d.error = p$1.requestCanceled, this._resolveMessageQueue(e);
              break;

            case Ut$1$1.UPLOADING:
              this._requestQueue.cancel(d.requestId);

          }
        }
      } catch (e) {
        n = {
          error: e
        };
      } finally {
        try {
          l && !l.done && (r = c.return) && r.call(c);
        } finally {
          if (n) throw n.error;
        }
      }
    }
  }, e;
}(),
    tn$3 = {
  prevResultSize: 0,
  nextResultSize: 0,
  isInclusive: !1,
  reverse: !1,
  messageTypeFilter: se$1.ALL,
  customTypesFilter: null,
  senderUserIdsFilter: null,
  replyType: ue$1.NONE,
  includeReactions: !1,
  includeMetaArray: !1,
  includeParentMessageInfo: !1,
  includeThreadInfo: !1,
  showSubchannelMessagesOnly: !1
},
    nn$2 = function (e) {
  return y("number", e.prevResultSize) && y("number", e.nextResultSize) && y("boolean", e.isInclusive) && y("boolean", e.reverse) && y("string", e.messageTypeFilter) && m(se$1, e.messageTypeFilter) && E$1("string", e.customTypesFilter, !0) && E$1("string", e.senderUserIdsFilter, !0) && m(ue$1, e.replyType) && y("boolean", e.includeMetaArray) && y("boolean", e.includeReactions) && y("boolean", e.includeParentMessageInfo) && y("boolean", e.includeThreadInfo) && y("boolean", e.showSubchannelMessagesOnly);
},
    rn$3 = {
  replyType: ue$1.NONE,
  includeReactions: !1,
  includeThreadInfo: !1,
  includeMetaArray: !1,
  includeParentMessageInfo: !1,
  includePollDetails: !1
},
    sn$3 = function (e) {
  return m(ue$1, e.replyType) && y("boolean", e.includeReactions) && y("boolean", e.includeMetaArray) && y("boolean", e.includeParentMessageInfo) && y("boolean", e.includeThreadInfo) && y("boolean", e.includePollDetails);
};

!function (e) {
  e.UNKNOWN = "UNKNOWN", e.EVENT_MESSAGE_SENT_SUCCESS = "EVENT_MESSAGE_SENT_SUCCESS", e.EVENT_MESSAGE_SENT_FAILED = "EVENT_MESSAGE_SENT_FAILED", e.EVENT_MESSAGE_SENT_PENDING = "EVENT_MESSAGE_SENT_PENDING", e.EVENT_MESSAGE_RECEIVED = "EVENT_MESSAGE_RECEIVED", e.EVENT_MESSAGE_UPDATED = "EVENT_MESSAGE_UPDATED", e.EVENT_MESSAGE_DELETED = "EVENT_MESSAGE_DELETED", e.EVENT_MESSAGE_READ = "EVENT_MESSAGE_READ", e.EVENT_MESSAGE_DELIVERED = "EVENT_MESSAGE_DELIVERED", e.EVENT_MESSAGE_REACTION_UPDATED = "EVENT_MESSAGE_REACTION_UPDATED", e.EVENT_MESSAGE_THREADINFO_UPDATED = "EVENT_MESSAGE_THREADINFO_UPDATED", e.EVENT_MESSAGE_OFFSET_UPDATED = "EVENT_MESSAGE_OFFSET_UPDATED", e.REQUEST_MESSAGE = "REQUEST_MESSAGE", e.REQUEST_RESEND_MESSAGE = "REQUEST_RESEND_MESSAGE", e.REQUEST_THREADED_MESSAGE = "REQUEST_THREADED_MESSAGE", e.REQUEST_MESSAGE_CHANGELOGS = "REQUEST_MESSAGE_CHANGELOGS", e.SYNC_MESSAGE_FILL = "SYNC_MESSAGE_FILL", e.SYNC_MESSAGE_BACKGROUND = "SYNC_MESSAGE_BACKGROUND", e.SYNC_MESSAGE_CHANGELOGS = "SYNC_MESSAGE_CHANGELOGS", e.LOCAL_MESSAGE_PENDING_CREATED = "LOCAL_MESSAGE_PENDING_CREATED", e.LOCAL_MESSAGE_FAILED = "LOCAL_MESSAGE_FAILED", e.LOCAL_MESSAGE_CANCELED = "LOCAL_MESSAGE_CANCELED", e.LOCAL_MESSAGE_RESEND_STARTED = "LOCAL_MESSAGE_RESEND_STARTED";
}($t$2 || ($t$2 = {}));

var on$3,
    an$3 = function (e) {
  return e.startsWith("EVENT_") || e === $t$2.SYNC_MESSAGE_FILL || e === $t$2.SYNC_MESSAGE_CHANGELOGS;
},
    un$3 = function (e) {
  function n(t) {
    var n = t.messages,
        r = t.source,
        i = e.call(this) || this;
    return i.messages = n, i.source = r, i;
  }

  return t(n, e), n;
}(L),
    cn$3 = function (e) {
  function n(t) {
    var n = t.messageIds,
        r = t.source,
        i = e.call(this) || this;
    return i.messageIds = n, i.source = r, i;
  }

  return t(n, e), n;
}(L),
    ln$3 = function (e) {
  function n(t) {
    var n = t.reqId,
        r = t.source,
        i = e.call(this) || this;
    return i.reqId = n, i.source = r, i;
  }

  return t(n, e), n;
}(L),
    dn$3 = function (e) {
  function n(t) {
    var n = t.channelType,
        r = t.channelUrl,
        i = t.messageId,
        s = t.includeMetaArray,
        o = t.includeReactions,
        a = t.includeThreadInfo,
        u = t.includeParentMessageInfo,
        c = t.includePollDetails,
        l = e.call(this) || this;
    return l.method = d$1.GET, l.path = "".concat(We$1(n), "/").concat(encodeURIComponent(r), "/messages/").concat(encodeURIComponent(i)), l.params = {
      is_sdk: !0,
      with_sorted_meta_array: s,
      include_reactions: o,
      include_thread_info: a,
      include_parent_message_info: u,
      include_poll_details: c
    }, l;
  }

  return t(n, e), n;
}(q$2),
    hn$3 = function (e) {
  function r(t, r) {
    var i = e.call(this, t, r) || this;
    return i.message = r ? Ht$2(t, n$1({}, r)) : null, i;
  }

  return t(r, e), r;
}(F$1),
    pn$3 = function (e) {
  function n(t) {
    var n = t.channelType,
        r = t.channelUrl,
        i = t.timestamp,
        s = void 0 === i ? null : i,
        o = t.token,
        a = void 0 === o ? null : o,
        u = t.prevResultSize,
        c = t.nextResultSize,
        l = t.isInclusive,
        h = t.reverse,
        p = t.messageTypeFilter,
        f = t.customTypesFilter,
        _ = t.senderUserIdsFilter,
        g = t.replyType,
        y = t.includeMetaArray,
        m = t.includeReactions,
        v = t.parentMessageId,
        E = t.includeThreadInfo,
        I = t.includeParentMessageInfo,
        S = t.showSubchannelMessagesOnly,
        T = t.includePollDetails,
        b = e.call(this) || this;
    return b.method = d$1.GET, b.path = "".concat(We$1(n), "/").concat(encodeURIComponent(r), "/messages"), b.params = U$2({
      is_sdk: !0,
      prev_limit: u,
      next_limit: c,
      include: l,
      reverse: h,
      message_ts: s,
      message_id: a,
      message_type: null != p ? p : null,
      custom_types: f,
      sender_ids: _,
      include_reply_type: g,
      with_sorted_meta_array: y,
      include_reactions: m,
      parent_message_id: v,
      include_thread_info: E,
      include_parent_message_info: I,
      show_subchannel_message_only: S,
      include_poll_details: T
    }), b;
  }

  return t(n, e), n;
}(q$2),
    fn$3 = function (e) {
  function n(t, n) {
    var r = e.call(this, t, n) || this;
    return r.messages = n.messages.map(function (e) {
      return Ht$2(t, e);
    }), r;
  }

  return t(n, e), n;
}(F$1),
    _n$3 = function (e) {
  function n(t) {
    var n = t.channelType,
        r = t.channelUrl,
        i = t.timestamp,
        s = t.token,
        o = t.replyType,
        a = t.includeMetaArray,
        u = t.includeReactions,
        c = t.includeThreadInfo,
        l = t.includeParentMessageInfo,
        h = t.includePollDetails,
        p = e.call(this) || this;
    return p.method = d$1.GET, p.path = "".concat(We$1(n), "/").concat(encodeURIComponent(r), "/messages/changelogs"), p.params = {
      change_ts: i,
      token: s,
      with_sorted_meta_array: a,
      include_reactions: u,
      include_thread_info: c,
      include_reply_type: o,
      include_parent_message_info: l,
      include_poll_details: h
    }, p;
  }

  return t(n, e), n;
}(q$2),
    gn$3 = function (e) {
  function n(t, n) {
    var r = e.call(this, t, n) || this;
    return r.updatedMessages = n.updated.map(function (e) {
      return Ht$2(t, e);
    }), r.deletedMessagesInfo = n.deleted.map(function (e) {
      return {
        messageId: e.message_id,
        deletedAt: e.deleted_at
      };
    }), r.hasMore = n.has_more, r.nextToken = n.next, r;
  }

  return t(n, e), n;
}(F$1),
    yn$3 = function (e) {
  function n(t) {
    var n = t.channelUrl,
        r = t.scheduledMessageId,
        i = e.call(this) || this;
    return i.method = d$1.GET, i.path = "".concat(qe$1, "/").concat(encodeURIComponent(n), "/scheduled_messages/").concat(encodeURIComponent(r)), i.params = {}, i;
  }

  return t(n, e), n;
}(q$2),
    mn$3 = function (e) {
  function r(t, r) {
    var i = e.call(this, t, r) || this;
    return i.message = r ? Ht$2(t, n$1({}, r)) : null, i;
  }

  return t(r, e), r;
}(F$1),
    vn$3 = {},
    En$3 = function () {
  function e(e, t) {
    var n = t.sdkState,
        r = t.dispatcher,
        i = t.requestQueue,
        s = t.onlineDetector,
        o = t.cacheContext;
    this._iid = e, this._sdkState = n, this._requestQueue = i, this._dispatcher = r, this._onlineDetector = s, this._cacheContext = o, this.fileMessageQueue = new en$3(e, {
      sdkState: n,
      dispatcher: r,
      requestQueue: i,
      onlineDetector: s,
      cacheContext: o
    }), vn$3[e] = this;
  }

  return e.of = function (e) {
    return vn$3[e];
  }, e.prototype.buildMessageFromSerializedData = function (e) {
    var t = ot$1(e);

    switch (t.messageType) {
      case ie$1.USER:
        return new Vt$2(this._iid, Vt$2.payloadify(t));

      case ie$1.FILE:
        return new Wt$2(this._iid, Wt$2.payloadify(t));

      case ie$1.ADMIN:
        return new Kt$2(this._iid, Kt$2.payloadify(t));
    }

    return null;
  }, e.prototype.buildUserMessageCreateParamsFromSerializedData = function (e, t) {
    return U$2({
      data: t.data,
      customType: t.customType,
      mentionType: t.mentionType,
      mentionedUserIds: t.mentionedUserIds,
      mentionedUsers: t.mentionedUsers,
      mentionedMessageTemplate: t.mentionedMessageTemplate,
      metaArrays: t.metaArrays,
      parentMessageId: t.parentMessageId,
      isReplyToChannel: e.isReplyToChannel,
      pushNotificationDeliveryOption: e.pushNotificationDeliveryOption,
      appleCriticalAlertOptions: t.appleCriticalAlertOptions,
      reqId: t.reqId,
      message: t.message,
      translationTargetLanguages: Object.keys(t.translations)
    });
  }, e.prototype.buildFileMessageCreateParamsFromSerializedData = function (e, t) {
    return U$2({
      data: t.data,
      customType: t.customType,
      mentionType: t.mentionType,
      mentionedUserIds: t.mentionedUserIds,
      mentionedUsers: t.mentionedUsers,
      mentionedMessageTemplate: t.mentionedMessageTemplate,
      metaArrays: t.metaArrays,
      parentMessageId: t.parentMessageId,
      isReplyToChannel: e.isReplyToChannel,
      pushNotificationDeliveryOption: e.pushNotificationDeliveryOption,
      appleCriticalAlertOptions: t.appleCriticalAlertOptions,
      reqId: t.reqId,
      file: e.file,
      fileKey: e.fileKey,
      fileUrl: t.url,
      fileName: t.name,
      fileSize: t.size,
      mimeType: t.type,
      thumbnailSizes: t.thumbnails.map(function (e) {
        return {
          maxWidth: e.width,
          maxHeight: e.height
        };
      }),
      fileType: e.fileType,
      requireAuth: t.requireAuth
    });
  }, e.prototype.buildScheduledUserMessageCreateParamsFromSerializedData = function (e, t) {
    return n$1(n$1({}, this.buildUserMessageCreateParamsFromSerializedData(e, t)), {
      scheduledAt: e.scheduledAt
    });
  }, e.prototype.buildScheduledFileMessageCreateParamsFromSerializedData = function (e, t) {
    return n$1(n$1({}, this.buildFileMessageCreateParamsFromSerializedData(e, t)), {
      scheduledAt: e.scheduledAt
    });
  }, e.prototype.buildSenderFromSerializedData = function (e) {
    var t = ot$1(e);
    return new Ft$2(this._iid, Ft$2.payloadify(t));
  }, e.prototype.getMessage = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return t = new dn$3(e), [4, this._requestQueue.send(t)];

          case 1:
            return n = r.sent(), [2, n.as(hn$3).message];
        }
      });
    });
  }, e.prototype.getScheduledMessage = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return t = new yn$3(e), [4, this._requestQueue.send(t)];

          case 1:
            return n = r.sent(), [2, n.as(mn$3).message];
        }
      });
    });
  }, e.prototype.getMessagesByTimestamp = function (e, t, s, o, a) {
    return void 0 === a && (a = $t$2.REQUEST_MESSAGE), r$1(this, void 0, void 0, function () {
      var r, u, c;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return r = new pn$3(n$1(n$1({
              channelType: t,
              channelUrl: e,
              timestamp: s
            }, tn$3), o)), [4, this._requestQueue.send(r)];

          case 1:
            return u = i.sent(), c = u.as(fn$3).messages, this._dispatcher.dispatch(new un$3({
              messages: c,
              source: a
            })), [2, c];
        }
      });
    });
  }, e.prototype.getThreadedMessagesByTimestamp = function (e, t, s, o) {
    return void 0 === o && (o = $t$2.REQUEST_THREADED_MESSAGE), r$1(this, void 0, void 0, function () {
      var r, a, u, c;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return r = new pn$3(n$1(n$1(n$1({
              channelUrl: e.channelUrl,
              channelType: e.channelType,
              timestamp: t
            }, Qt$2), s), {
              replyType: ue$1.ALL,
              parentMessageId: e.messageId,
              includeThreadInfo: !0
            })), [4, this._requestQueue.send(r)];

          case 1:
            return a = i.sent(), u = a.as(fn$3).messages, (c = u.slice(1)).forEach(function (t) {
              t.parentMessage = e;
            }), this._dispatcher.dispatch(new un$3({
              messages: c,
              source: o
            })), [2, {
              parentMessage: u[0],
              threadedMessages: c
            }];
        }
      });
    });
  }, e.prototype.getMessageChangelogs = function (e, t, s, o, a) {
    return void 0 === a && (a = $t$2.REQUEST_MESSAGE_CHANGELOGS), r$1(this, void 0, void 0, function () {
      var r, u, c, l, d, h, p, f;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return r = new _n$3(U$2(n$1(n$1({
              channelType: t,
              channelUrl: e,
              timestamp: "number" == typeof s ? s : null,
              token: "string" == typeof s ? s : null
            }, rn$3), o))), [4, this._requestQueue.send(r)];

          case 1:
            return u = i.sent(), c = u.as(gn$3), l = c.updatedMessages, d = c.deletedMessagesInfo, h = c.hasMore, p = c.nextToken, f = d.map(function (e) {
              return e.messageId;
            }), l.length > 0 && this._dispatcher.dispatch(new un$3({
              messages: l,
              source: a
            })), f.length > 0 && this._dispatcher.dispatch(new cn$3({
              messageIds: f,
              source: a
            })), [2, {
              updatedMessages: l,
              deletedMessageIds: f,
              hasMore: h,
              token: p
            }];
        }
      });
    });
  }, e;
}(),
    In$2 = function () {
  function e() {
    this._onPending = Y$2, this._onFailed = Y$2, this._onSucceeded = Y$2;
  }

  return e.prototype._trigger = function (e, t) {
    switch (t.sendingStatus) {
      case le$1.PENDING:
        this._onPending(t);

        break;

      case le$1.FAILED:
      case le$1.CANCELED:
        this._onFailed(e, t.isResendable ? t : null);

        break;

      case le$1.SCHEDULED:
      case le$1.SUCCEEDED:
        this._onSucceeded(t);

    }
  }, e.prototype.onPending = function (e) {
    return this._onPending = e, this;
  }, e.prototype.onFailed = function (e) {
    return this._onFailed = e, this;
  }, e.prototype.onSucceeded = function (e) {
    return this._onSucceeded = e, this;
  }, e;
}(),
    Sn$2 = function (e) {
  function n(t, n) {
    var r = e.call(this, t) || this;
    r.threadInfo = null, r.targetMessageId = 0, r.channelUrl = null, r.channelType = null;
    var i = n.thread_info,
        s = n.root_message_id,
        o = n.channel_url,
        a = n.channel_type;
    return i && y("object", i) && y("number", s) && y("string", o) && y("string", a) && (r.threadInfo = new At$1$1(t, i), r.targetMessageId = s, r.channelUrl = o, r.channelType = a), r;
  }

  return t(n, e), n;
}(Le$1),
    Tn$3 = {
  channelUrl: null,
  channelType: null,
  messageId: 0,
  includeReactions: !1,
  includeMetaArray: !1,
  includeParentMessageInfo: !1,
  includeThreadInfo: !1,
  includePollDetails: !1
},
    bn$2 = function () {
  function e(e, t) {
    var n;
    this._iid = null, this.limit = 20, this._isLoading = !1, this._hasNext = !0, this._token = "", this._iid = e, this.limit = null !== (n = t.limit) && void 0 !== n ? n : 20;
  }

  return Object.defineProperty(e.prototype, "hasNext", {
    get: function () {
      return this._hasNext;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "isLoading", {
    get: function () {
      return this._isLoading;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype._validate = function () {
    return y("number", this.limit) && this.limit > 0;
  }, e;
}(),
    Nn$3 = function (e) {
  function n(t) {
    var n = t.channelCustomType,
        r = t.keyword,
        i = t.limit,
        s = t.reverse,
        o = t.exactMatch,
        a = t.channelUrl,
        u = t.order,
        c = t.messageTimestampFrom,
        l = t.messageTimestampTo,
        h = t.advancedQuery,
        p = t.targetFields,
        f = t.nextToken,
        _ = e.call(this) || this;

    return _.method = d$1.GET, _.path = "".concat(Qe$1, "/messages"), _.params = {
      custom_type: n,
      query: r,
      limit: i,
      reverse: s,
      exact_match: o,
      channel_url: a,
      message_ts_from: c,
      message_ts_to: l,
      sort_field: u,
      advanced_query: h,
      target_fields: p,
      after: f
    }, _;
  }

  return t(n, e), n;
}(q$2),
    An$2 = function (e) {
  function n(t, n) {
    var r = e.call(this, t, n) || this;
    return r.messages = n.results.map(function (e) {
      return Ht$2(t, e);
    }), r.hasNext = n.has_next, r.nextToken = n.end_cursor, r;
  }

  return t(n, e), n;
}(F$1);

!function (e) {
  e.SCORE = "score", e.TIMESTAMP = "ts";
}(on$3 || (on$3 = {}));

var Cn$3 = function (e) {
  function s(t, n) {
    var r,
        i,
        s,
        o,
        a,
        u,
        c,
        l,
        d,
        h = this;
    return (h = e.call(this, t, n) || this).keyword = "", h.reverse = !1, h.exactMatch = !1, h.channelUrl = "", h.channelCustomType = "", h.messageTimestampFrom = null, h.messageTimestampTo = null, h.order = on$3.SCORE, h.advancedQuery = !1, h.targetFields = null, h._nextToken = "", h.keyword = n.keyword, h.reverse = null !== (r = n.reverse) && void 0 !== r && r, h.exactMatch = null !== (i = n.exactMatch) && void 0 !== i && i, h.channelUrl = null !== (s = n.channelUrl) && void 0 !== s ? s : "", h.channelCustomType = null !== (o = n.channelCustomType) && void 0 !== o ? o : "", h.messageTimestampFrom = null !== (a = n.messageTimestampFrom) && void 0 !== a ? a : null, h.messageTimestampTo = null !== (u = n.messageTimestampTo) && void 0 !== u ? u : null, h.order = null !== (c = n.order) && void 0 !== c ? c : on$3.SCORE, h.advancedQuery = null !== (l = n.advancedQuery) && void 0 !== l && l, h.targetFields = null !== (d = n.targetFields) && void 0 !== d ? d : null, h;
  }

  return t(s, e), s.prototype._validate = function () {
    return e.prototype._validate.call(this) && y("string", this.keyword) && this.keyword.length > 0 && y("boolean", this.reverse) && y("boolean", this.exactMatch) && y("string", this.channelUrl) && y("string", this.channelCustomType) && (y("number", this.messageTimestampFrom) || null === this.messageTimestampFrom) && (y("number", this.messageTimestampTo) || null === this.messageTimestampTo) && m(on$3, this.order) && y("boolean", this.advancedQuery) && E$1("string", this.targetFields, !0);
  }, s.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, r, s, o, a, u;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, e = St$1$1.of(this._iid).requestQueue, t = new Nn$3(n$1(n$1({}, this), {
              nextToken: this._nextToken ? this._nextToken : null
            })), [4, e.send(t)]) : [3, 2] : [3, 5];

          case 1:
            return r = i.sent(), s = r.as(An$2), o = s.messages, a = s.hasNext, u = s.nextToken, this._nextToken = u, this._hasNext = a, this._isLoading = !1, [2, o];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, s;
}(bn$2),
    On$2 = function (e) {
  function n(t, n, r, i) {
    var s = e.call(this, t, i) || this;
    return s.channelUrl = n, s.channelType = r, s;
  }

  return t(n, e), n.prototype._validate = function () {
    return e.prototype._validate.call(this) && y("string", this.channelUrl) && m(ne$1, this.channelType);
  }, n;
}(bn$2),
    wn$3 = function (e) {
  function n(t, n, r, i) {
    var s,
        o,
        a,
        u,
        c,
        l,
        d,
        h,
        p,
        f,
        _ = this;

    return (_ = e.call(this, t, n, r, i) || this).reverse = !1, _.messageTypeFilter = se$1.ALL, _.customTypesFilter = null, _.senderUserIdsFilter = null, _.replyType = ue$1.NONE, _.includeMetaArray = !1, _.includeReactions = !1, _.includeParentMessageInfo = !1, _.includeThreadInfo = !1, _.showSubchannelMessagesOnly = !1, _._edge = Number.MAX_SAFE_INTEGER, _.reverse = null !== (s = i.reverse) && void 0 !== s && s, _.messageTypeFilter = null !== (o = i.messageTypeFilter) && void 0 !== o ? o : se$1.ALL, _.customTypesFilter = null !== (a = i.customTypesFilter) && void 0 !== a ? a : null, _.senderUserIdsFilter = null !== (u = i.senderUserIdsFilter) && void 0 !== u ? u : null, _.replyType = null !== (c = i.replyType) && void 0 !== c ? c : ue$1.NONE, _.includeMetaArray = null !== (l = i.includeMetaArray) && void 0 !== l && l, _.includeReactions = null !== (d = i.includeReactions) && void 0 !== d && d, _.includeParentMessageInfo = null !== (h = i.includeParentMessageInfo) && void 0 !== h && h, _.includeThreadInfo = null !== (p = i.includeThreadInfo) && void 0 !== p && p, _.showSubchannelMessagesOnly = null !== (f = i.showSubchannelMessagesOnly) && void 0 !== f && f, _;
  }

  return t(n, e), n.prototype._validate = function () {
    return e.prototype._validate.call(this) && y("boolean", this.reverse) && m(se$1, this.messageTypeFilter) && m(ue$1, this.replyType) && E$1("string", this.customTypesFilter, !0) && E$1("string", this.senderUserIdsFilter, !0) && y("boolean", this.includeMetaArray) && y("boolean", this.includeReactions) && y("boolean", this.includeParentMessageInfo) && y("boolean", this.includeThreadInfo) && y("boolean", this.showSubchannelMessagesOnly);
  }, n.prototype.load = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, [4, En$3.of(this._iid).getMessagesByTimestamp(this.channelUrl, this.channelType, this._edge, {
              prevResultSize: this.limit,
              nextResultSize: 0,
              isInclusive: !1,
              reverse: this.reverse,
              messageTypeFilter: this.messageTypeFilter,
              customTypesFilter: this.customTypesFilter,
              replyType: this.replyType,
              senderUserIdsFilter: this.senderUserIdsFilter,
              includeReactions: this.includeReactions,
              includeMetaArray: this.includeMetaArray,
              includeParentMessageInfo: this.includeParentMessageInfo,
              includeThreadInfo: this.includeThreadInfo,
              showSubchannelMessagesOnly: this.showSubchannelMessagesOnly
            })]) : [3, 2] : [3, 5];

          case 1:
            return e = t.sent(), this._edge = Math.min.apply(Math, a([Number.MAX_SAFE_INTEGER], o(e.map(function (e) {
              return e.createdAt;
            })), !1)), this._hasNext = e.length >= this.limit, this._isLoading = !1, [2, e];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, n;
}(On$2),
    Rn$2 = {
  channelUrl: null,
  scheduledMessageId: 0
},
    Dn$2 = function (e) {
  function s() {
    var t = null !== e && e.apply(this, arguments) || this;
    return t.name = "message", t;
  }

  return t(s, e), s.prototype.init = function (t, n) {
    var r = n.sdkState,
        i = n.dispatcher,
        s = n.sessionManager,
        o = n.requestQueue,
        a = n.logger,
        u = n.onlineDetector,
        c = n.cacheContext;
    e.prototype.init.call(this, t, {
      sdkState: r,
      dispatcher: i,
      sessionManager: s,
      requestQueue: o,
      logger: a,
      onlineDetector: u,
      cacheContext: c
    }), this._manager = new En$3(t, {
      sdkState: r,
      dispatcher: i,
      requestQueue: o,
      onlineDetector: u,
      cacheContext: c
    });
  }, s.prototype.buildMessageFromSerializedData = function (e) {
    return this._manager.buildMessageFromSerializedData(e);
  }, s.prototype.buildSenderFromSerializedData = function (e) {
    return this._manager.buildSenderFromSerializedData(e);
  }, s.prototype.getMessage = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return e = n$1(n$1({}, Tn$3), e), at$1(function (e) {
          return y("string", e.channelUrl) && y("string", e.channelType) && m(ne$1, e.channelType) && y("number", e.messageId) && y("boolean", e.includeMetaArray) && y("boolean", e.includeParentMessageInfo) && y("boolean", e.includeThreadInfo) && y("boolean", e.includePollDetails);
        }(e)).throw(p$1.invalidParameters), [2, this._manager.getMessage(e)];
      });
    });
  }, s.prototype.getScheduledMessage = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return e = n$1(n$1({}, Rn$2), e), at$1(function (e) {
          return y("string", e.channelUrl) && y("number", e.scheduledMessageId);
        }(e)).throw(p$1.invalidParameters), [2, this._manager.getScheduledMessage(e)];
      });
    });
  }, s;
}(Tt$1$1);

var oe$2,
    ue$2 = {
  data: null,
  customType: null,
  mentionType: ae$1.USERS,
  mentionedUserIds: null,
  mentionedUsers: null,
  mentionedMessageTemplate: null,
  metaArrays: null,
  parentMessageId: null,
  isReplyToChannel: !1,
  pushNotificationDeliveryOption: null,
  appleCriticalAlertOptions: null
},
    ce$2 = function (u) {
  return y("string", u.data, !0) && y("string", u.customType, !0) && m(ae$1, u.mentionType) && E$1("string", u.mentionedUserIds, !0) && E$1(ct$1, u.mentionedUsers, !0) && y("string", u.mentionedMessageTemplate, !0) && E$1(Dt$1$1, u.metaArrays, !0) && y("number", u.parentMessageId, !0) && y("boolean", u.isReplyToChannel) && m(ce$1, u.pushNotificationDeliveryOption, !0) && y(Lt$2, u.appleCriticalAlertOptions, !0);
},
    le$2 = function (e) {
  return e ? {
    isReplyToChannel: e.isReplyToChannel,
    pushNotificationDeliveryOption: e.pushNotificationDeliveryOption
  } : null;
},
    de$2 = n$1(n$1({}, ue$2), {
  message: null,
  translationTargetLanguages: null
}),
    he$2 = function (e) {
  return ce$2(e) && y("string", e.message) && E$1("string", e.translationTargetLanguages, !0);
};

!function (e) {
  e.FILE = "file", e.BLOB = "blob", e.BLOB_LIKE_OBJECT = "blobLikeObject", e.URL = "url";
}(oe$2 || (oe$2 = {}));

var pe$2,
    fe$2 = function (e) {
  return "undefined" != typeof window && "Blob" in window && "undefined" != typeof Blob && e instanceof Blob;
},
    me$2 = function (e) {
  return e === oe$2.BLOB || e === oe$2.FILE;
},
    ve$2 = function (e) {
  return e ? {
    file: e.file,
    fileKey: e.fileKey,
    fileType: e.fileType,
    isReplyToChannel: e.isReplyToChannel,
    pushNotificationDeliveryOption: e.pushNotificationDeliveryOption
  } : null;
},
    ye$2 = n$1(n$1({}, ue$2), {
  file: null,
  fileKey: null,
  fileUrl: null,
  fileName: null,
  fileType: null,
  fileSize: null,
  mimeType: null,
  thumbnailSizes: null,
  requireAuth: !1
}),
    ge$2 = function (e) {
  return ce$2(e) && (S$1(e.file) || y("string", e.fileUrl)) && y("string", e.fileName, !0) && y("string", e.mimeType, !0) && y("number", e.fileSize, !0) && (null === e.thumbnailSizes || Array.isArray(e.thumbnailSizes) && e.thumbnailSizes.every(function (e) {
    return y("object", e) && e.maxWidth > 0 && e.maxHeight > 0;
  }));
};

!function (e) {
  e.MUTED = "muted", e.BANNED = "banned";
}(pe$2 || (pe$2 = {}));

var _e$2,
    Te = function () {
  function e(e) {
    var t, r, i;
    this.restrictionType = null, this.description = null, this.endAt = -1, m(pe$2, e.restriction_type) && (this.restrictionType = e.restriction_type), this.description = null !== (t = e.description) && void 0 !== t ? t : null, this.endAt = null !== (i = null !== (r = e.end_at) && void 0 !== r ? r : e.muted_end_at) && void 0 !== i ? i : -1;
  }

  return e.payloadify = function (e) {
    return e ? U$2({
      restriction_type: e.restrictionType,
      description: e.description,
      end_at: e.endAt
    }) : null;
  }, e;
}(),
    Ue$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.restrictionInfo = null, r.restrictionInfo = new Te(n), r;
  }

  return t(t$1, e), t$1.payloadify = function (t) {
    return t ? U$2(n$1(n$1({}, e.payloadify.call(this, t)), Te.payloadify(t.restrictionInfo))) : null;
  }, t$1;
}(ct$1),
    Ie = {
  data: null,
  customType: null,
  mentionType: ae$1.USERS,
  mentionedUserIds: null,
  mentionedUsers: null,
  mentionedMessageTemplate: null,
  metaArrays: null,
  pushNotificationDeliveryOption: null,
  appleCriticalAlertOptions: null
},
    Ee$2 = function (u) {
  return y("string", u.data, !0) && y("string", u.customType, !0) && m(ae$1, u.mentionType) && E$1("string", u.mentionedUserIds, !0) && E$1(ct$1, u.mentionedUsers, !0) && y("string", u.mentionedMessageTemplate, !0) && E$1(Dt$1$1, u.metaArrays, !0) && m(ce$1, u.pushNotificationDeliveryOption, !0) && y(Lt$2, u.appleCriticalAlertOptions, !0);
},
    we = n$1(n$1({}, Ie), {
  message: null,
  translationTargetLanguages: null
}),
    Me$2 = function (e) {
  return Ee$2(e) && y("string", e.message, !0) && E$1("string", e.translationTargetLanguages, !0);
},
    Se = n$1({}, Ie),
    Ce = function (e) {
  function t$1(t) {
    var n = t.channelUrl,
        r = t.channelType,
        i = t.token,
        a = t.limit,
        s = e.call(this) || this;
    return s.method = d$1.GET, s.path = "".concat(We$1(r), "/").concat(encodeURIComponent(n), "/operators"), s.params = {
      token: i,
      limit: a
    }, s;
  }

  return t(t$1, e), t$1;
}(q$2),
    be$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.operators = n.operators.map(function (e) {
      return new ct$1(t, e);
    }), r.token = n.next, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Ae$2 = function (e) {
  function t$1(t, n, r, i) {
    return e.call(this, t, n, r, i) || this;
  }

  return t(t$1, e), t$1.prototype._validate = function () {
    return e.prototype._validate.call(this);
  }, t$1.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n$1$1, r, i$1$1, a, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : (e = [], this._hasNext ? (this._isLoading = !0, t = St$1$1.of(this._iid).requestQueue, n$1$1 = new Ce(n$1(n$1({}, this), {
              channelUrl: this.channelUrl,
              token: this._token
            })), [4, t.send(n$1$1)]) : [3, 2]) : [3, 5];

          case 1:
            return r = o.sent(), i$1$1 = r.as(be$2), a = i$1$1.operators, s = i$1$1.token, this._token = s, this._hasNext = !!s, this._isLoading = !1, [2, a];

          case 2:
            return [2, e];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, t$1;
}(On$2),
    Pe$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.limit,
        s = t.token;
    return (n = e.call(this) || this).method = d$1.GET, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/mute"), n.params = {
      limit: a,
      token: s
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    De$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    r.token = null, r.mutedUsers = [];
    var i = n.next,
        a = n.muted_list;
    return r.token = i, a && a.length > 0 && (r.mutedUsers = a.map(function (e) {
      return new Ue$2(t, e);
    })), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Re$2 = function (e) {
  function t$1(t, n, r, i) {
    return e.call(this, t, n, r, i) || this;
  }

  return t(t$1, e), t$1.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n$1$1, r, i$1$1, a;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, e = St$1$1.of(this._iid).requestQueue, t = new Pe$2(n$1(n$1({}, this), {
              token: this._token
            })), [4, e.send(t)]) : [3, 2] : [3, 5];

          case 1:
            return n$1$1 = s.sent(), r = n$1$1.as(De$2), i$1$1 = r.mutedUsers, a = r.token, this._token = a, this._hasNext = !!a, this._isLoading = !1, [2, i$1$1];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, t$1;
}(On$2),
    Ne = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.limit,
        s = t.token;
    return (n = e.call(this) || this).method = d$1.GET, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/ban"), n.params = U$2({
      limit: a,
      token: s
    }), n;
  }

  return t(t$1, e), t$1;
}(q$2),
    qe$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    r.token = null, r.bannedUsers = [];
    var i = n.next,
        a = n.banned_list;
    return r.token = i, a && a.length > 0 && (r.bannedUsers = a.map(function (e) {
      return new Ue$2(t, e.user);
    })), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Oe = function (e) {
  function t$1(t, n, r, i) {
    return e.call(this, t, n, r, i) || this;
  }

  return t(t$1, e), t$1.prototype._validate = function () {
    return e.prototype._validate.call(this);
  }, t$1.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n$1$1, r, i$1$1, a;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, e = St$1$1.of(this._iid).requestQueue, t = new Ne(n$1(n$1({}, this), {
              token: this._token
            })), [4, e.send(t)]) : [3, 2] : [3, 5];

          case 1:
            return n$1$1 = s.sent(), r = n$1$1.as(qe$2), i$1$1 = r.bannedUsers, a = r.token, this._token = a, this._hasNext = !!a, this._isLoading = !1, [2, i$1$1];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, t$1;
}(On$2);

!function (e) {
  e.SPAM = "spam", e.HARASSING = "harassing", e.SUSPICIOUS = "suspicious", e.INAPPROPRIATE = "inappropriate";
}(_e$2 || (_e$2 = {}));

var ke = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.operatorUserIds;
    return (n = e.call(this) || this).method = d$1.POST, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/operators"), n.params = {
      operator_ids: a
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var Fe$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.operatorUserIds;
    return (n = e.call(this) || this).method = d$1.DELETE, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/operators"), n.params = {
      operator_ids: a
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(t, n) {
    return e.call(this, t, n) || this;
  }

  t(t$1, e);
}(F$1);

var Le$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.userId;
    return (n = e.call(this) || this).method = d$1.GET, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/mute/").concat(a), n;
  }

  return t(t$1, e), t$1;
}(q$2),
    Qe$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    r.isMuted = !1, r.startAt = null, r.endAt = null, r.remainingDuration = null, r.description = null;
    var i = n.is_muted,
        a = n.start_at,
        s = n.end_at,
        o = n.remaining_duration,
        u = n.description;
    return r.isMuted = i, r.startAt = a, r.endAt = s, r.remainingDuration = o, r.description = u, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    ze$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.keys;
    return (n = e.call(this) || this).method = d$1.GET, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/metadata"), n.params = {
      keys: a,
      include_ts: !0
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    Ge$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    r.ts = null;
    var i = n.metadata,
        a = n.ts;
    return r.metadata = i, r.ts = null != a ? a : null, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    xe = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.metadata,
        s = t.upsert;
    return (n = e.call(this) || this).method = d$1.PUT, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/metadata"), n.params = {
      metadata: a,
      include_ts: !0,
      upsert: null != s && s
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    Ve$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    r.ts = null;
    var i = n.metadata,
        a = n.ts;
    return r.metadata = i, r.ts = null != a ? a : null, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    je$2 = function (e) {
  function t$1(t, n, r) {
    var i = e.call(this, t, "SYEV", r) || this;
    return i.created = null, i.updated = null, i.deleted = null, r.data && (i.created = r.data.created, i.updated = r.data.updated, i.deleted = r.data.deleted), i;
  }

  return t(t$1, e), t$1;
}(B$2),
    Be$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.key;
    return (n = e.call(this) || this).method = d$1.DELETE, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/metadata/").concat(a), n.params = {
      include_ts: !0
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    We$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    r.ts = null;
    var i = n.ts;
    return r.ts = null != i ? i : null, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Ke$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType;
    return (n = e.call(this) || this).method = d$1.PUT, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/metadata"), n.params = {
      include_ts: !0
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    Ye$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    r.ts = null;
    var i = n.ts;
    return r.ts = null != i ? i : null, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    He$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.keys;
    return (n = e.call(this) || this).method = d$1.GET, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/metacounter"), n.params = {
      keys: a
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    Je$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.metaCounter = n, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Xe$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.metaCounter;
    return (n = e.call(this) || this).method = d$1.POST, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/metacounter"), n.params = {
      metacounter: a
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    Ze$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.metaCounter = n, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    $e$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.metaCounter,
        s = t.upsert,
        o = void 0 !== s && s,
        u = t.mode,
        c = void 0 === u ? "set" : u;
    return (n = e.call(this) || this).method = d$1.PUT, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/metacounter"), n.params = {
      metacounter: a,
      upsert: o,
      mode: c
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    et$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.metaCounter = n, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    tt$2 = function (e) {
  function t$1(t, n, r) {
    var i = e.call(this, t, "SYEV", r) || this;
    return i.created = null, i.updated = null, i.deleted = null, r.data && (i.created = r.data.created, i.updated = r.data.updated, i.deleted = r.data.deleted), i;
  }

  return t(t$1, e), t$1;
}(B$2),
    nt$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.key;
    return (n = e.call(this) || this).method = d$1.DELETE, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/metacounter/").concat(a), n.params = null, n;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(t, n) {
    return e.call(this, t, n) || this;
  }

  t(t$1, e);
}(F$1);

var rt$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType;
    return (n = e.call(this) || this).method = d$1.DELETE, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/metacounter"), n.params = null, n;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var it$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.userId,
        s = t.seconds,
        o = t.description;
    return (n = e.call(this) || this).method = d$1.POST, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/mute"), n.params = {
      user_id: a,
      seconds: s,
      description: o
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(t, n) {
    return e.call(this, t, n) || this;
  }

  t(t$1, e);
}(F$1);

var at$2 = function (e) {
  function t$1(t, n, r) {
    var i = e.call(this, t, "SYEV", r) || this;
    return i.user = new Ue$2(t, r.data), i;
  }

  return t(t$1, e), t$1;
}(B$2),
    st$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.userId;
    return (n = e.call(this) || this).method = d$1.DELETE, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/mute/").concat(encodeURIComponent(a)), n;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var ot$2 = function (e) {
  function t$1(t, n, r) {
    var i = e.call(this, t, "SYEV", r) || this;
    return i.user = new Ue$2(t, r.data), i;
  }

  return t(t$1, e), t$1;
}(B$2),
    ut$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.userId,
        s = t.seconds,
        o = t.description;
    return (n = e.call(this) || this).method = d$1.POST, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/ban"), n.params = U$2({
      user_id: a,
      seconds: s,
      description: o
    }), n;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var ct$2 = function (e) {
  function t$1(t, n, r) {
    var i = e.call(this, t, "SYEV", r) || this;
    return i.memberCount = null, i.joinedMemberCount = null, i.user = new Ue$2(t, r.data), r.data.member_count && (i.memberCount = r.data.member_count), r.data.joined_member_count && (i.joinedMemberCount = r.data.joined_member_count), i;
  }

  return t(t$1, e), t$1;
}(B$2),
    lt$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.userId;
    return (n = e.call(this) || this).method = d$1.DELETE, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/ban/").concat(encodeURIComponent(a)), n;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var dt$2 = function (e) {
  function t$1(t, n, r) {
    var i = e.call(this, t, "SYEV", r) || this;
    return i.user = new Ue$2(t, r.data), i;
  }

  return t(t$1, e), t$1;
}(B$2),
    ht$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.freezing;
    return (n = e.call(this) || this).method = d$1.PUT, n.path = "".concat(We$1(i), "/").concat(encodeURIComponent(r), "/freeze"), n.params = {
      freeze: a
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var pt$2 = function (e) {
  function t$1(t, n, r) {
    var i = e.call(this, t, "SYEV", r) || this;
    return i.freeze = r.data.freeze, i;
  }

  return t(t$1, e), t$1;
}(B$2),
    ft$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.category,
        s = t.userId,
        o = t.description;
    return (n = e.call(this) || this).method = d$1.POST, n.path = "".concat(Xe$1(i), "/").concat(encodeURIComponent(r)), n.params = {
      report_category: a,
      reporting_user_id: s,
      report_description: o
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    mt$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.category,
        s = t.userId,
        o = t.offendingUserId,
        u = t.description;
    return (n = e.call(this) || this).method = d$1.POST, n.path = "/report/users/".concat(o), n.params = {
      channel_url: r,
      channel_type: i === ne$1.OPEN ? "open_channels" : "group_channels",
      report_category: a,
      reporting_user_id: s,
      report_description: u
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    vt$2 = function (e) {
  function t$1(t) {
    var n = this,
        r = t.channelUrl,
        i = t.channelType,
        a = t.category,
        s = t.userId,
        o = t.offendingUserId,
        u = t.messageId,
        c = t.description;
    return (n = e.call(this) || this).method = d$1.POST, n.path = "".concat(Xe$1(i), "/").concat(encodeURIComponent(r), "/messages/").concat(u), n.params = {
      report_category: a,
      reporting_user_id: s,
      report_description: c,
      offending_user_id: o
    }, n;
  }

  return t(t$1, e), t$1;
}(q$2),
    yt$2 = function (t$1) {
  function n(n) {
    var r = [];
    return n.mentionType === ae$1.USERS && (n.mentionedUserIds ? r = n.mentionedUserIds : n.mentionedUsers && (r = n.mentionedUsers.map(function (e) {
      return e.userId;
    }))), t$1.call(this, {
      code: "MESG",
      ackRequired: !0,
      payload: U$2({
        channel_url: n.channelUrl,
        message: n.message,
        data: n.data,
        custom_type: n.customType,
        metaarray: n.metaArrays,
        mention_type: n.mentionType,
        mentioned_user_ids: r,
        mentioned_message_template: n.mentionedMessageTemplate,
        target_langs: n.translationTargetLanguages,
        push_option: n.pushNotificationDeliveryOption && n.pushNotificationDeliveryOption !== ce$1.DEFAULT ? n.pushNotificationDeliveryOption : void 0,
        apple_critical_alert_options: n.appleCriticalAlertOptions,
        silent: n.silent,
        reply_to_channel: n.isReplyToChannel,
        parent_message_id: n.parentMessageId > 0 ? n.parentMessageId : null,
        req_id: n.reqId
      })
    }) || this;
  }

  return t(n, t$1), n;
}(H$2),
    gt$2 = function (e) {
  function t$1(t, n, r) {
    var i,
        a,
        s,
        o = this;
    (o = e.call(this, t, "MESG", r) || this).message = new Vt$2(t, r);
    var u = St$1$1.of(t).sdkState;
    return o.isMentioned = Ye$1(o.message.mentionType, null !== (i = o.message.mentionedUserIds) && void 0 !== i ? i : null === (a = o.message.mentionedUsers) || void 0 === a ? void 0 : a.map(function (e) {
      return e.userId;
    }), u.userId), o.forceUpdateLastMessage = null !== (s = r.force_update_last_message) && void 0 !== s && s, o;
  }

  return t(t$1, e), t$1;
}(B$2),
    _t$2 = function (t$1) {
  function n(n) {
    var r = [];
    return n.mentionType === ae$1.USERS && (n.mentionedUserIds ? r = n.mentionedUserIds : n.mentionedUsers && (r = n.mentionedUsers.map(function (e) {
      return e.userId;
    }))), t$1.call(this, {
      code: "MEDI",
      ackRequired: !0,
      payload: U$2({
        channel_url: n.channelUrl,
        msg_id: n.messageId,
        message: n.message,
        data: n.data,
        custom_type: n.customType,
        metaarray: n.metaArrayParams,
        mention_type: n.mentionType,
        mentioned_user_ids: r,
        mentioned_message_template: n.mentionedMessageTemplate,
        apple_critical_alert_options: n.appleCriticalAlertOptions
      })
    }) || this;
  }

  return t(n, t$1), n;
}(H$2),
    Tt$2 = function (e) {
  function t$1(t, n, r) {
    var i,
        a,
        s,
        o,
        u,
        c,
        l = this;
    (l = e.call(this, t, "MEDI", r) || this).message = new Vt$2(t, r);
    var d = St$1$1.of(t).sdkState;
    return l.mentionCountChange = Je$1({
      mentionType: null !== (a = null === (i = r.old_values) || void 0 === i ? void 0 : i.mention_type) && void 0 !== a ? a : null,
      mentionedUserIds: null !== (o = null === (s = r.old_values) || void 0 === s ? void 0 : s.mentioned_user_ids) && void 0 !== o ? o : []
    }, {
      mentionType: l.message.mentionType,
      mentionedUserIds: null !== (u = l.message.mentionedUserIds) && void 0 !== u ? u : null === (c = l.message.mentionedUsers) || void 0 === c ? void 0 : c.map(function (e) {
        return e.userId;
      })
    }, d.userId), l;
  }

  return t(t$1, e), t$1;
}(B$2),
    Ut$2 = function (t$1) {
  function n(n) {
    var r = [];
    return n.mentionType === ae$1.USERS && (n.mentionedUserIds ? r = n.mentionedUserIds : n.mentionedUsers && (r = n.mentionedUsers.map(function (e) {
      return e.userId;
    }))), t$1.call(this, {
      code: "FEDI",
      ackRequired: !0,
      payload: U$2({
        channel_url: n.channelUrl,
        msg_id: n.messageId,
        data: n.data,
        custom_type: n.customType,
        metaarray: n.metaArrayParams,
        mention_type: n.mentionType,
        mentioned_user_ids: r,
        apple_critical_alert_options: n.appleCriticalAlertOptions
      })
    }) || this;
  }

  return t(n, t$1), n;
}(H$2),
    It$2 = function (e) {
  function t$1(t, n, r) {
    var i,
        a,
        s,
        o,
        u,
        c,
        l = this;
    (l = e.call(this, t, "FEDI", r) || this).message = new Wt$2(t, r);
    var d = St$1$1.of(t).sdkState;
    return l.mentionCountChange = Je$1({
      mentionType: null !== (a = null === (i = r.old_values) || void 0 === i ? void 0 : i.mention_type) && void 0 !== a ? a : null,
      mentionedUserIds: null !== (o = null === (s = r.old_values) || void 0 === s ? void 0 : s.mentioned_user_ids) && void 0 !== o ? o : []
    }, {
      mentionType: l.message.mentionType,
      mentionedUserIds: null !== (u = l.message.mentionedUserIds) && void 0 !== u ? u : null === (c = l.message.mentionedUsers) || void 0 === c ? void 0 : c.map(function (e) {
        return e.userId;
      })
    }, d.userId), l;
  }

  return t(t$1, e), t$1;
}(B$2),
    Et$2 = function (e) {
  function t$1(t) {
    var n = e.call(this) || this;
    return n.method = d$1.DELETE, n.path = "".concat(We$1(t.channelType), "/").concat(t.channelUrl, "/messages/").concat(t.messageId), n;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var wt$2 = function (e) {
  function t$1(t, n, r) {
    var i = e.call(this, t, "DELM", r) || this;
    return i.channelUrl = r.channel_url, i.channelType = r.channel_type, i.messageId = Number(r.msg_id), i;
  }

  return t(t$1, e), t$1;
}(B$2),
    Mt$2 = function (e) {
  function t$1(t) {
    var n = t.channelType,
        r = t.channelUrl,
        i = t.messageId,
        a = t.reactionKey,
        s = e.call(this) || this;
    return s.method = d$1.POST, s.path = "".concat(We$1(n), "/").concat(encodeURIComponent(r), "/messages/").concat(i, "/reactions"), s.params = {
      reaction: a
    }, s;
  }

  return t(t$1, e), t$1;
}(q$2),
    St$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.reactionEvent = new wt$1$1(n), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Ct$2 = function (e) {
  function t$1(t) {
    var n = t.channelType,
        r = t.channelUrl,
        i = t.messageId,
        a = t.reactionKey,
        s = e.call(this) || this;
    return s.method = d$1.DELETE, s.path = "".concat(We$1(n), "/").concat(encodeURIComponent(r), "/messages/").concat(i, "/reactions"), s.params = {
      reaction: a
    }, s;
  }

  return t(t$1, e), t$1;
}(q$2),
    bt$2 = function (e) {
  function t$1(t, n$1$1) {
    var r = e.call(this, t, n$1$1) || this;
    return r.reactionEvent = new wt$1$1(n$1({}, n$1$1)), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    At$2 = function (e) {
  function t$1(t) {
    var n = t.channelType,
        r = t.channelUrl,
        i = t.messageId,
        a = t.translationTargetLanguages,
        s = e.call(this) || this;
    return s.method = d$1.POST, s.path = "".concat(We$1(n), "/").concat(encodeURIComponent(r), "/messages/").concat(encodeURIComponent(i), "/translation"), s.params = {
      target_langs: a
    }, s;
  }

  return t(t$1, e), t$1;
}(q$2),
    Pt$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.message = new Vt$2(t, n), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Dt$2 = function (t$1) {
  function n(n) {
    var r,
        i = this;
    i = t$1.call(this) || this;
    var s = [];
    n.mentionType === ae$1.USERS && (n.mentionedUserIds ? s = n.mentionedUserIds : n.mentionedUsers && (s = n.mentionedUsers.map(function (e) {
      return e.userId;
    })));
    var u = n.channelType,
        c = n.channelUrl;
    return i.method = d$1.POST, i.path = "".concat(We$1(u), "/").concat(encodeURIComponent(c), "/scheduled_messages"), i.params = {
      req_id: n.reqId,
      scheduled_at: n.scheduledAt,
      message_type: oe$1.USER,
      message: n.message,
      custom_type: n.customType,
      data: n.data,
      mention_type: n.mentionType,
      mentioned_user_ids: s,
      sorted_metaarray: null === (r = n.metaArrays) || void 0 === r ? void 0 : r.map(function (e) {
        return Dt$1$1.payloadify(e);
      }),
      apple_critical_alert_options: Lt$2.payloadify(n.appleCriticalAlertOptions),
      target_langs: n.translationTargetLanguages,
      push_option: n.pushNotificationDeliveryOption
    }, i;
  }

  return t(n, t$1), n;
}(q$2),
    Rt$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.message = new Vt$2(t, n), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Nt$2 = function (t$1) {
  function n(n) {
    var r,
        i = this;
    i = t$1.call(this) || this;
    var s = [];
    n.mentionType === ae$1.USERS && (n.mentionedUserIds ? s = n.mentionedUserIds : n.mentionedUsers && (s = n.mentionedUsers.map(function (e) {
      return e.userId;
    })));
    var u = n.channelType,
        c = n.channelUrl;
    return i.method = d$1.POST, i.path = "".concat(We$1(u), "/").concat(encodeURIComponent(c), "/scheduled_messages"), i.params = {
      req_id: n.reqId,
      scheduled_at: n.scheduledAt,
      message_type: oe$1.FILE,
      url: n.fileUrl,
      file_name: n.fileName,
      file_size: n.fileSize,
      file_type: n.mimeType,
      thumbnails: n.thumbnailSizes ? n.thumbnailSizes.map(function (e) {
        return Gt$2.payloadify(e);
      }) : [],
      custom_type: n.customType,
      data: n.data,
      require_auth: n.requireAuth,
      mention_type: n.mentionType,
      mentioned_user_ids: s,
      sorted_metaarray: null === (r = n.metaArrays) || void 0 === r ? void 0 : r.map(function (e) {
        return Dt$1$1.payloadify(e);
      }),
      apple_critical_alert_options: Lt$2.payloadify(n.appleCriticalAlertOptions),
      push_option: n.pushNotificationDeliveryOption
    }, i;
  }

  return t(n, t$1), n;
}(q$2),
    qt$2 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.message = new Wt$2(t, n), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Ot$2 = 2,
    kt$2 = function (e) {
  function l(n, r) {
    var a,
        s,
        o,
        u,
        c = this;
    return (c = e.call(this, n) || this).url = "", c.channelType = ne$1.BASE, c.name = "", c.coverUrl = "", c.customType = "", c.data = "", c.isFrozen = !1, c.isEphemeral = !1, c.creator = null, c.createdAt = 0, c.url = r.channel_url, c.name = null !== (a = r.name) && void 0 !== a ? a : "", c.coverUrl = null !== (s = r.cover_url) && void 0 !== s ? s : "", c.customType = null !== (o = r.custom_type) && void 0 !== o ? o : "", c.data = null !== (u = r.data) && void 0 !== u ? u : "", c.isFrozen = !!y("boolean", r.freeze) && r.freeze, c.isEphemeral = !!y("boolean", r.is_ephemeral) && r.is_ephemeral, c.creator = r.created_by ? new ct$1(c._iid, r.created_by) : null, c.createdAt = 1e3 * r.created_at, c._cachedMetaData = new Map(), r.metadata && r.ts && Object.keys(r.metadata).forEach(function (e) {
      c._cachedMetaData.set(e, {
        value: r.metadata[e],
        isRemoved: !1,
        updatedAt: r.ts
      });
    }), c;
  }

  return t(l, e), l.payloadify = function (t) {
    return U$2(n$1(n$1({}, e.payloadify.call(this, t)), {
      channel_url: t.url,
      name: t.name,
      cover_url: t.coverUrl,
      custom_type: t.customType,
      data: t.data,
      freeze: t.isFrozen,
      is_ephemeral: t.isEphemeral,
      created_by: ct$1.payloadify(t.creator),
      created_at: t.createdAt / 1e3
    }));
  }, l.prototype.isGroupChannel = function () {
    return this.channelType === ne$1.GROUP;
  }, l.prototype.isOpenChannel = function () {
    return this.channelType === ne$1.OPEN;
  }, Object.defineProperty(l.prototype, "cachedMetaData", {
    get: function () {
      var e = {};
      return this._cachedMetaData.forEach(function (t, n) {
        t.isRemoved || (e[n] = t.value);
      }), e;
    },
    enumerable: !1,
    configurable: !0
  }), l.prototype._upsertCachedMetaData = function (e, t) {
    var n = this;
    Object.keys(e).forEach(function (r) {
      var i = n._cachedMetaData.get(r);

      (!i || i.updatedAt <= t) && n._cachedMetaData.set(r, {
        value: e[r],
        isRemoved: !1,
        updatedAt: t
      });
    });
  }, l.prototype._removeFromCachedMetaData = function (e, t) {
    var n = this;
    e.forEach(function (e) {
      var r = n._cachedMetaData.get(e);

      r && r.updatedAt < t && (r.isRemoved = !1, r.updatedAt = t);
    });
  }, l.prototype._generateRequestId = function () {
    return "rq-".concat(R$2());
  }, l.prototype.isIdentical = function (e) {
    return e && this.url === e.url;
  }, l.prototype.isEqual = function (e) {
    return g(this, e);
  }, l.prototype.createOperatorListQuery = function (e) {
    return void 0 === e && (e = {}), new Ae$2(this._iid, this.url, this.channelType, e);
  }, l.prototype.createMutedUserListQuery = function (e) {
    return void 0 === e && (e = {}), new Re$2(this._iid, this.url, this.channelType, e);
  }, l.prototype.createBannedUserListQuery = function (e) {
    return void 0 === e && (e = {}), new Oe(this._iid, this.url, this.channelType, e);
  }, l.prototype.createPreviousMessageListQuery = function (e) {
    return void 0 === e && (e = {}), new wn$3(this._iid, this.url, this.channelType, e);
  }, l.prototype.addOperators = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return at$1(E$1("string", e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid).requestQueue, n = new ke({
              channelUrl: this.url,
              channelType: this.channelType,
              operatorUserIds: e
            }), [4, t.send(n)];

          case 1:
            return i.sent(), [2];
        }
      });
    });
  }, l.prototype.removeOperators = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return at$1(E$1("string", e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid).requestQueue, n = new Fe$2({
              channelUrl: this.url,
              channelType: this.channelType,
              operatorUserIds: e
            }), [4, t.send(n)];

          case 1:
            return i.sent(), [2];
        }
      });
    });
  }, l.prototype.getMyMutedInfo = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1, a, s, o, u, c, l;
      return i$1(this, function (d) {
        switch (d.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new Le$2({
              channelUrl: this.url,
              channelType: this.channelType,
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return i$1$1 = d.sent(), a = i$1$1.as(Qe$2), s = a.isMuted, o = a.startAt, u = a.endAt, c = a.remainingDuration, l = a.description, [2, {
              isMuted: s,
              startAt: o,
              endAt: u,
              remainingDuration: c,
              description: l
            }];
        }
      });
    });
  }, l.prototype.getMetaData = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, i$1$1, a, s, o;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return at$1(E$1("string", e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid).requestQueue, n = new ze$2({
              channelUrl: this.url,
              channelType: this.channelType,
              keys: e
            }), [4, t.send(n)];

          case 1:
            return i$1$1 = u.sent(), a = i$1$1.as(Ge$2), s = a.metadata, o = a.ts, this._upsertCachedMetaData(s, o), [2, s];
        }
      });
    });
  }, l.prototype.getAllMetaData = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1, a;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return e = St$1$1.of(this._iid).requestQueue, t = new ze$2({
              channelUrl: this.url,
              channelType: this.channelType,
              keys: []
            }), [4, e.send(t)];

          case 1:
            return n = s.sent(), r = n.as(Ge$2), i$1$1 = r.metadata, a = r.ts, this._upsertCachedMetaData(i$1$1, a), [2, i$1$1];
        }
      });
    });
  }, l.prototype.createMetaData = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return t = St$1$1.of(this._iid).requestQueue, n = new Ze$1({
              channelUrl: this.url,
              channelType: this.channelType,
              metadata: e
            }), [4, t.send(n)];

          case 1:
            return r = a.sent(), i$1$1 = r.as($e$1).metaData, this._upsertCachedMetaData(i$1$1, 0), [2, i$1$1];
        }
      });
    });
  }, l.prototype.updateMetaData = function (e, t) {
    return void 0 === t && (t = !1), r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, a, s, o;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return n = St$1$1.of(this._iid).requestQueue, r = new xe({
              channelUrl: this.url,
              channelType: this.channelType,
              metadata: e,
              upsert: t
            }), [4, n.send(r)];

          case 1:
            return i$1$1 = u.sent(), a = i$1$1.as(Ve$2), s = a.metadata, o = a.ts, this._upsertCachedMetaData(s, o), [2, s];
        }
      });
    });
  }, l.prototype.deleteMetaData = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, a;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return at$1(y("string", e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid).requestQueue, r = new Be$2({
              channelUrl: this.url,
              channelType: this.channelType,
              key: e
            }), [4, n.send(r)];

          case 1:
            return i$1$1 = s.sent(), a = i$1$1.as(We$2).ts, this._removeFromCachedMetaData([e], a), [2];
        }
      });
    });
  }, l.prototype.deleteAllMetaData = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return e = St$1$1.of(this._iid).requestQueue, t = new Ke$2({
              channelUrl: this.url,
              channelType: this.channelType
            }), [4, e.send(t)];

          case 1:
            return n = i.sent(), r = n.as(Ye$2).ts, this._removeFromCachedMetaData(a([], o(this._cachedMetaData.keys()), !1), r), [2];
        }
      });
    });
  }, l.prototype.getMetaCounters = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, i$1$1;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return at$1(E$1("string", e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid).requestQueue, n = new He$2({
              channelUrl: this.url,
              channelType: this.channelType,
              keys: e
            }), [4, t.send(n)];

          case 1:
            return i$1$1 = a.sent(), [2, i$1$1.as(Je$2).metaCounter];
        }
      });
    });
  }, l.prototype.getAllMetaCounters = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return e = St$1$1.of(this._iid).requestQueue, t = new He$2({
              channelUrl: this.url,
              channelType: this.channelType,
              keys: []
            }), [4, e.send(t)];

          case 1:
            return n = r.sent(), [2, n.as(Je$2).metaCounter];
        }
      });
    });
  }, l.prototype.createMetaCounters = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = St$1$1.of(this._iid).requestQueue, n = new Xe$2({
              channelUrl: this.url,
              channelType: this.channelType,
              metaCounter: e
            }), [4, t.send(n)];

          case 1:
            return r = i.sent(), [2, r.as(Ze$2).metaCounter];
        }
      });
    });
  }, l.prototype.updateMetaCounters = function (e, t) {
    return void 0 === t && (t = !1), r$1(this, void 0, void 0, function () {
      var n, r, i$1$1;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return n = St$1$1.of(this._iid).requestQueue, r = new $e$2({
              channelUrl: this.url,
              channelType: this.channelType,
              metaCounter: e,
              upsert: t
            }), [4, n.send(r)];

          case 1:
            return i$1$1 = a.sent(), [2, i$1$1.as(et$2).metaCounter];
        }
      });
    });
  }, l.prototype.increaseMetaCounters = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = St$1$1.of(this._iid).requestQueue, n = new $e$2({
              channelUrl: this.url,
              channelType: this.channelType,
              metaCounter: e,
              upsert: !1,
              mode: "increase"
            }), [4, t.send(n)];

          case 1:
            return r = i.sent(), [2, r.as(et$2).metaCounter];
        }
      });
    });
  }, l.prototype.decreaseMetaCounters = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = St$1$1.of(this._iid).requestQueue, n = new $e$2({
              channelUrl: this.url,
              channelType: this.channelType,
              metaCounter: e,
              upsert: !1,
              mode: "decrease"
            }), [4, t.send(n)];

          case 1:
            return r = i.sent(), [2, r.as(et$2).metaCounter];
        }
      });
    });
  }, l.prototype.deleteMetaCounter = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return at$1(y("string", e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid).requestQueue, r = new nt$2({
              channelUrl: this.url,
              channelType: this.channelType,
              key: e
            }), [4, n.send(r)];

          case 1:
            return i.sent(), [2];
        }
      });
    });
  }, l.prototype.deleteAllMetaCounters = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return e = St$1$1.of(this._iid).requestQueue, t = new rt$2({
              channelUrl: this.url,
              channelType: this.channelType
            }), [4, e.send(t)];

          case 1:
            return n.sent(), [2];
        }
      });
    });
  }, l.prototype.muteUser = function (e, t, n) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (r) {
        return [2, this.muteUserWithUserId(e.userId, t, n)];
      });
    });
  }, l.prototype.muteUserWithUserId = function (e, n, r$1$1) {
    return r$1(this, void 0, void 0, function () {
      var i$1$1, a;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return at$1(y("string", e) && y("number", n, !0) && y("string", r$1$1, !0)).throw(p$1.invalidParameters), i$1$1 = St$1$1.of(this._iid).requestQueue, a = new it$2({
              channelUrl: this.url,
              channelType: this.channelType,
              userId: e,
              seconds: n,
              description: r$1$1
            }), [4, i$1$1.send(a)];

          case 1:
            return s.sent(), [2];
        }
      });
    });
  }, l.prototype.unmuteUser = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return [2, this.unmuteUserWithUserId(e.userId)];
      });
    });
  }, l.prototype.unmuteUserWithUserId = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return at$1(y("string", e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid).requestQueue, r = new st$2({
              channelUrl: this.url,
              channelType: this.channelType,
              userId: e
            }), [4, n.send(r)];

          case 1:
            return i.sent(), [2];
        }
      });
    });
  }, l.prototype.banUser = function (e, t, n) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (r) {
        return [2, this.banUserWithUserId(e.userId, t, n)];
      });
    });
  }, l.prototype.banUserWithUserId = function (e, n, r$1$1) {
    return r$1(this, void 0, void 0, function () {
      var i$1$1, a;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return at$1(y("string", e) && y("number", n, !0) && y("string", r$1$1, !0)).throw(p$1.invalidParameters), i$1$1 = St$1$1.of(this._iid).requestQueue, a = new ut$2({
              channelUrl: this.url,
              channelType: this.channelType,
              userId: e,
              seconds: n,
              description: r$1$1
            }), [4, i$1$1.send(a)];

          case 1:
            return s.sent(), [2];
        }
      });
    });
  }, l.prototype.unbanUser = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return [2, this.unbanUserWithUserId(e.userId)];
      });
    });
  }, l.prototype.unbanUserWithUserId = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return at$1(y("string", e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid).requestQueue, r = new lt$2({
              channelUrl: this.url,
              channelType: this.channelType,
              userId: e
            }), [4, n.send(r)];

          case 1:
            return i.sent(), [2];
        }
      });
    });
  }, l.prototype.freeze = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return e = St$1$1.of(this._iid).requestQueue, t = new ht$2({
              channelUrl: this.url,
              channelType: this.channelType,
              freezing: !0
            }), [4, e.send(t)];

          case 1:
            return n.sent(), this.isFrozen = !0, [2];
        }
      });
    });
  }, l.prototype.unfreeze = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return e = St$1$1.of(this._iid).requestQueue, t = new ht$2({
              channelUrl: this.url,
              channelType: this.channelType,
              freezing: !1
            }), [4, e.send(t)];

          case 1:
            return n.sent(), this.isFrozen = !1, [2];
        }
      });
    });
  }, l.prototype.getMessagesByTimestamp = function (e, n$1$1) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return n$1$1 = n$1(n$1({}, tn$3), n$1$1), at$1(y("number", e) && nn$2(n$1$1)).throw(p$1.invalidParameters), [4, En$3.of(this._iid).getMessagesByTimestamp(this.url, this.channelType, e, n$1$1)];

          case 1:
            return [2, r.sent()];
        }
      });
    });
  }, l.prototype.getMessageChangeLogsSinceTimestamp = function (e, n$1$1) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return n$1$1 = n$1(n$1({}, rn$3), n$1$1), at$1(y("number", e) && sn$3(n$1$1)).throw(p$1.invalidParameters), [4, En$3.of(this._iid).getMessageChangelogs(this.url, this.channelType, e, n$1$1)];

          case 1:
            return [2, r.sent()];
        }
      });
    });
  }, l.prototype.getMessageChangeLogsSinceToken = function (e, n$1$1) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return n$1$1 = n$1(n$1({}, rn$3), n$1$1), at$1(y("string", e) && sn$3(n$1$1)).throw(p$1.invalidParameters), [4, En$3.of(this._iid).getMessageChangelogs(this.url, this.channelType, e, n$1$1)];

          case 1:
            return [2, r.sent()];
        }
      });
    });
  }, l.prototype._createPendingSendableMessagePayload = function (e, t, n) {
    var r = St$1$1.of(this._iid).sessionManager;
    return U$2({
      channel_url: this.url,
      channel_type: this.channelType,
      msg_id: 0,
      parent_message_id: e.parentMessageId,
      data: e.data,
      custom_type: e.customType,
      mention_type: e.mentionType,
      sorted_metaarray: e.metaArrays ? e.metaArrays.map(function (e) {
        return Dt$1$1.payloadify(e);
      }) : null,
      apple_critical_alert_options: e.appleCriticalAlertOptions ? Lt$2.payloadify(e.appleCriticalAlertOptions) : null,
      created_at: n,
      user: Ft$2.payloadify(r.currentUser),
      req_id: t,
      request_state: le$1.PENDING,
      mentioned_user_ids: e.mentionedUserIds,
      mentioned_users: e.mentionedUsers
    });
  }, l.prototype._createPendingUserMessage = function (e, t, n$1$1) {
    var r,
        i,
        a = {};
    if (e.translationTargetLanguages) try {
      for (var s$1 = s(e.translationTargetLanguages), o = s$1.next(); !o.done; o = s$1.next()) {
        a[o.value] = "";
      }
    } catch (e) {
      r = {
        error: e
      };
    } finally {
      try {
        o && !o.done && (i = s$1.return) && i.call(s$1);
      } finally {
        if (r) throw r.error;
      }
    }
    var l = U$2(n$1(n$1({}, this._createPendingSendableMessagePayload(e, t, n$1$1)), {
      type: ie$1.USER,
      message: e.message,
      translations: a
    })),
        d = new Vt$2(this._iid, l);
    return d.messageParams = e, d;
  }, l.prototype._createPendingScheduledUserMessage = function (e, t, n) {
    var r = this._createPendingUserMessage(e, t, n);

    return r.scheduledInfo = {
      scheduledMessageId: 0,
      scheduledAt: e.scheduledAt,
      scheduledMessageParams: e
    }, r;
  }, l.prototype._createPendingFileMessage = function (e, t, n$1$1) {
    var r = U$2(n$1(n$1({}, this._createPendingSendableMessagePayload(e, t, n$1$1)), {
      type: ie$1.FILE,
      url: e.fileUrl,
      file: {
        name: e.fileName,
        size: e.fileSize,
        type: e.mimeType,
        data: e.data
      },
      thumbnails: e.thumbnailSizes ? e.thumbnailSizes.map(function (e) {
        return {
          url: "",
          width: e.maxWidth,
          height: e.maxHeight
        };
      }) : []
    })),
        i = new Wt$2(this._iid, r);
    return i.messageParams = e, i;
  }, l.prototype._createPendingScheduledFileMessage = function (e, t, n) {
    var r = this._createPendingFileMessage(e, t, n);

    return r.scheduledInfo = {
      scheduledMessageId: 0,
      scheduledAt: e.scheduledAt,
      scheduledMessageParams: e
    }, r;
  }, l.prototype._markMessageAsFailed = function (e, t, n) {
    void 0 === n && (n = !1), e.errorCode = t.code, t.code === u$1.REQUEST_CANCELED ? e.sendingStatus = le$1.CANCELED : n || (e.sendingStatus = le$1.FAILED);
  }, l.prototype.sendUserMessage = function (e) {
    return e = n$1(n$1({}, de$2), e), at$1(he$2(e)).throw(p$1.invalidParameters), this._sendUserMessage(e);
  }, l.prototype._sendUserMessage = function (e, t, n$1$1) {
    var r$1$1 = this;
    void 0 === t && (t = Date.now()), void 0 === n$1$1 && (n$1$1 = null);
    var i$1$1 = St$1$1.of(this._iid),
        a = i$1$1.dispatcher,
        s = i$1$1.requestQueue,
        o = n$1$1,
        c = new In$2();

    if (!o) {
      o = this._generateRequestId();
      var l = St$1$1.of(this._iid).dispatcher;
      me$1(2).then(function () {
        var n = r$1$1._createPendingUserMessage(e, o, t);

        l.dispatch(new un$3({
          messages: [n],
          source: $t$2.EVENT_MESSAGE_SENT_PENDING
        })), Ie$1(function () {
          return r$1(r$1$1, void 0, void 0, function () {
            return i$1(this, function (e) {
              return [2, c._trigger(null, n)];
            });
          });
        });
      });
    }

    var d = new yt$2(n$1({
      channelUrl: this.url,
      channelType: this.channelType,
      reqId: o
    }, e));
    return s.send(d).then(function (e) {
      var t = e.as(gt$2).message;
      a.dispatch(new un$3({
        messages: [t],
        source: $t$2.EVENT_MESSAGE_SENT_SUCCESS
      })), Ie$1(function () {
        return r$1(r$1$1, void 0, void 0, function () {
          return i$1(this, function (e) {
            return [2, c._trigger(null, t)];
          });
        });
      });
    }).catch(function (n) {
      if (h$1(n)) throw n;
      me$1(2).then(function () {
        var i$1$1 = r$1$1._createPendingUserMessage(e, o, t),
            s = St$1$1.of(r$1$1._iid).cacheContext.localCacheEnabled && I$1(n.code);

        r$1$1._markMessageAsFailed(i$1$1, n, s), a.dispatch(new un$3({
          messages: [i$1$1],
          source: i$1$1.sendingStatus === le$1.PENDING ? $t$2.REQUEST_RESEND_MESSAGE : $t$2.EVENT_MESSAGE_SENT_FAILED
        })), Ie$1(function () {
          return r$1(r$1$1, void 0, void 0, function () {
            return i$1(this, function (e) {
              return [2, c._trigger(n, i$1$1)];
            });
          });
        });
      });
    }), c;
  }, l.prototype._autoResendUserMessage = function (e) {
    return at$1(e instanceof Vt$2).throw(p$1.invalidParameters), this._sendUserMessage(e.messageParams, e.createdAt, e.reqId);
  }, l.prototype.resendUserMessage = function (e) {
    var t;
    return r$1(this, void 0, void 0, function () {
      var n, r;
      return i$1(this, function (i) {
        var a;
        return at$1(e instanceof Vt$2 && !e.scheduledInfo).throw(p$1.invalidParameters), n = new ee$1(), r = null !== (t = e.messageParams) && void 0 !== t ? t : U$2({
          data: (a = e).data,
          customType: a.customType,
          mentionType: a.mentionType,
          mentionedUsers: a.mentionedUsers,
          mentionedUserIds: a.mentionedUserIds,
          mentionedMessageTemplate: a.mentionedMessageTemplate,
          metaArrays: a.metaArrays,
          parentMessageId: a.parentMessageId,
          appleCriticalAlertOptions: a.appleCriticalAlertOptions,
          message: a.message,
          translationTargetLanguages: Object.keys(a.translations)
        }), this._sendUserMessage(r).onFailed(function (e) {
          return n.reject(e);
        }).onSucceeded(function (e) {
          return n.resolve(e);
        }), [2, n.promise];
      });
    });
  }, l.prototype.updateUserMessage = function (e, n$1$1) {
    return r$1(this, void 0, void 0, function () {
      var r, i$1$1, a, s, o, c;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            return n$1$1 = n$1(n$1({}, we), n$1$1), at$1(y("number", e) && Me$2(n$1$1)).throw(p$1.invalidParameters), r = St$1$1.of(this._iid), i$1$1 = r.dispatcher, a = r.requestQueue, s = new _t$2(n$1({
              channelType: this.channelType,
              channelUrl: this.url,
              messageId: e
            }, n$1$1)), [4, a.send(s)];

          case 1:
            return o = l.sent(), c = o.as(Tt$2).message, i$1$1.dispatch(new un$3({
              messages: [c],
              source: $t$2.EVENT_MESSAGE_UPDATED
            })), [2, c];
        }
      });
    });
  }, l.prototype.copyUserMessage = function (e, t) {
    var n$1$1, r$1$1, i$1$1;
    return r$1(this, void 0, void 0, function () {
      var a, o;
      return i$1(this, function (c) {
        return at$1(e instanceof l && t instanceof Vt$2 && t.sendingStatus === le$1.SUCCEEDED && e.url === t.channelUrl && !t.scheduledInfo).throw(p$1.invalidParameters), a = new ee$1(), o = null !== (n$1$1 = t.messageParams) && void 0 !== n$1$1 ? n$1$1 : n$1(n$1({}, t), {
          mentionType: t.mentionType,
          mentionedUserIds: null !== (r$1$1 = t.mentionedUserIds) && void 0 !== r$1$1 ? r$1$1 : null === (i$1$1 = t.mentionedUsers) || void 0 === i$1$1 ? void 0 : i$1$1.map(function (e) {
            return e.userId;
          }),
          translationTargetLanguages: Object.keys(t.translations),
          pushNotificationDeliveryOption: ce$1.DEFAULT,
          parentMessageId: null,
          isReplyToChannel: !1
        }), e._sendUserMessage(o).onSucceeded(function (e) {
          return a.resolve(e);
        }).onFailed(function (e) {
          return a.reject(e);
        }), [2, a.promise];
      });
    });
  }, l.prototype.translateUserMessage = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var n, i$1$1, a;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return at$1(e instanceof Vt$2 && e.messageId > 0 && E$1("string", t)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid).requestQueue, i$1$1 = new At$2({
              channelType: this.channelType,
              channelUrl: this.url,
              messageId: e.messageId,
              translationTargetLanguages: t
            }), [4, n.send(i$1$1)];

          case 1:
            return a = s.sent(), [2, a.as(Pt$2).message];
        }
      });
    });
  }, l.prototype._createScheduledUserMessage = function (e, t) {
    var n$1$1 = this,
        r$1$1 = St$1$1.of(this._iid),
        i$1$1 = r$1$1.dispatcher,
        a = r$1$1.requestQueue,
        s = Date.now(),
        o = this._generateRequestId();

    me$1(2).then(function () {
      var r$1$1 = n$1$1._createPendingScheduledUserMessage(e, o, s);

      i$1$1.dispatch(new un$3({
        messages: [r$1$1],
        source: $t$2.EVENT_MESSAGE_SENT_PENDING
      })), Ie$1(function () {
        return r$1(n$1$1, void 0, void 0, function () {
          return i$1(this, function (e) {
            return [2, t._trigger(null, r$1$1)];
          });
        });
      });
    });
    var c = new Dt$2(n$1({
      reqId: o,
      channelType: this.channelType,
      channelUrl: this.url
    }, e));
    a.send(c).then(function (e) {
      var r$1$1 = e.as(Rt$2).message;
      i$1$1.dispatch(new un$3({
        messages: [r$1$1],
        source: $t$2.EVENT_MESSAGE_SENT_SUCCESS
      })), Ie$1(function () {
        return r$1(n$1$1, void 0, void 0, function () {
          return i$1(this, function (e) {
            return [2, t._trigger(null, r$1$1)];
          });
        });
      });
    }).catch(function (r$1$1) {
      if (h$1(r$1$1)) throw r$1$1;
      me$1(2).then(function () {
        var a = n$1$1._createPendingScheduledUserMessage(e, o, s);

        n$1$1._markMessageAsFailed(a, r$1$1), i$1$1.dispatch(new un$3({
          messages: [a],
          source: $t$2.EVENT_MESSAGE_SENT_FAILED
        })), Ie$1(function () {
          return r$1(n$1$1, void 0, void 0, function () {
            return i$1(this, function (e) {
              return [2, t._trigger(r$1$1, a)];
            });
          });
        });
      });
    });
  }, l.prototype.sendFileMessage = function (e) {
    return e = n$1(n$1({}, ye$2), e), at$1(ge$2(e)).throw(p$1.invalidParameters), this._sendFileMessage(e);
  }, l.prototype._sendFileMessage = function (e, t, n) {
    var r$1$1 = this;
    void 0 === t && (t = Date.now()), void 0 === n && (n = null);
    var i$1$1 = St$1$1.of(this._iid).dispatcher,
        a = En$3.of(this._iid).fileMessageQueue,
        s = n,
        o = new In$2();
    return s || (s = this._generateRequestId(), me$1(2).then(function () {
      var n = r$1$1._createPendingFileMessage(e, s, t);

      i$1$1.dispatch(new un$3({
        messages: [n],
        source: $t$2.EVENT_MESSAGE_SENT_PENDING
      })), Ie$1(function () {
        return r$1(r$1$1, void 0, void 0, function () {
          return i$1(this, function (e) {
            return [2, o._trigger(null, n)];
          });
        });
      });
    })), a.request(this, s, e).then(function (e) {
      i$1$1.dispatch(new un$3({
        messages: [e],
        source: $t$2.EVENT_MESSAGE_SENT_SUCCESS
      })), Ie$1(function () {
        return r$1(r$1$1, void 0, void 0, function () {
          return i$1(this, function (t) {
            return [2, o._trigger(null, e)];
          });
        });
      });
    }).catch(function (n) {
      if (h$1(n)) throw n;
      me$1(2).then(function () {
        var a = r$1$1._createPendingFileMessage(e, s, t),
            u = St$1$1.of(r$1$1._iid).cacheContext.localCacheEnabled && I$1(n.code);

        r$1$1._markMessageAsFailed(a, n, u), i$1$1.dispatch(new un$3({
          messages: [a],
          source: a.sendingStatus === le$1.PENDING ? $t$2.REQUEST_RESEND_MESSAGE : $t$2.EVENT_MESSAGE_SENT_FAILED
        })), Ie$1(function () {
          return r$1(r$1$1, void 0, void 0, function () {
            return i$1(this, function (e) {
              return [2, o._trigger(n, a)];
            });
          });
        });
      });
    }), o;
  }, l.prototype._autoResendFileMessage = function (e) {
    at$1(e instanceof Wt$2).throw(p$1.invalidParameters);
    var t = St$1$1.of(this._iid).logger;
    return t.debug("autoResendFileMessage pending", e), this._sendFileMessage(e.messageParams, e.createdAt, e.reqId).onFailed(function (e) {
      t.debug("autoResendFileMessage failed", e);
    }).onSucceeded(function (e) {
      t.debug("autoResendFileMessage success", e);
    });
  }, l.prototype._createScheduledFileMessage = function (e, t, n$1$1, r$1$1) {
    var i$1$1 = this,
        a = St$1$1.of(this._iid),
        s = a.dispatcher,
        o = a.requestQueue,
        c = new Nt$2(n$1(n$1({
      reqId: n$1$1,
      channelType: this.channelType,
      channelUrl: this.url
    }, e), {
      fileUrl: e.fileUrl,
      requireAuth: e.requireAuth
    }));
    o.send(c).then(function (e) {
      var n = e.as(qt$2).message;
      s.dispatch(new un$3({
        messages: [n],
        source: $t$2.EVENT_MESSAGE_SENT_SUCCESS
      })), Ie$1(function () {
        return r$1(i$1$1, void 0, void 0, function () {
          return i$1(this, function (e) {
            return [2, t._trigger(null, n)];
          });
        });
      });
    }).catch(function (a) {
      if (h$1(a)) throw a;
      me$1(2).then(function () {
        var o = i$1$1._createPendingScheduledFileMessage(e, n$1$1, r$1$1);

        i$1$1._markMessageAsFailed(o, a), s.dispatch(new un$3({
          messages: [o],
          source: $t$2.EVENT_MESSAGE_SENT_FAILED
        })), Ie$1(function () {
          return r$1(i$1$1, void 0, void 0, function () {
            return i$1(this, function (e) {
              return [2, t._trigger(a, o)];
            });
          });
        });
      });
    });
  }, l.prototype.sendFileMessages = function (e) {
    var t, n$1$1;
    at$1(e.every(function (e) {
      return ge$2(n$1(n$1({}, ye$2), e));
    })).throw(p$1.invalidParameters);
    var r = new In$2();

    try {
      for (var i = s(e), a = i.next(); !a.done; a = i.next()) {
        var s$1 = a.value;
        this.sendFileMessage(s$1).onPending(function (e) {
          return r._trigger(null, e);
        }).onFailed(function (e, t) {
          return r._trigger(e, t);
        }).onSucceeded(function (e) {
          return r._trigger(null, e);
        });
      }
    } catch (e) {
      t = {
        error: e
      };
    } finally {
      try {
        a && !a.done && (n$1$1 = i.return) && n$1$1.call(i);
      } finally {
        if (t) throw t.error;
      }
    }

    return r;
  }, l.prototype.resendFileMessage = function (e, t) {
    var n;
    return r$1(this, void 0, void 0, function () {
      var r, i$1$1;
      return i$1(this, function (a) {
        return at$1(e instanceof Wt$2 && t instanceof Blob && !e.scheduledInfo).throw(p$1.invalidParameters), r = new ee$1(), i$1$1 = null !== (n = e.messageParams) && void 0 !== n ? n : function (e, t) {
          return void 0 === t && (t = null), U$2({
            data: e.data,
            customType: e.customType,
            mentionType: e.mentionType,
            mentionedUsers: e.mentionedUsers,
            mentionedUserIds: e.mentionedUserIds,
            metaArrays: e.metaArrays,
            parentMessageId: e.parentMessageId,
            appleCriticalAlertOptions: e.appleCriticalAlertOptions,
            file: t,
            fileUrl: e.url,
            fileName: e.name,
            fileSize: e.size,
            mimeType: e.type,
            thumbnailSizes: e.thumbnails.map(function (e) {
              return {
                maxWidth: e.width,
                maxHeight: e.height
              };
            })
          });
        }(e, t), this._sendFileMessage(i$1$1).onFailed(function (e) {
          return r.reject(e);
        }).onSucceeded(function (e) {
          return r.resolve(e);
        }), [2, r.promise];
      });
    });
  }, l.prototype.updateFileMessage = function (e, n$1$1) {
    return r$1(this, void 0, void 0, function () {
      var r, i$1$1, a, s, o, c;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            return n$1$1 = n$1(n$1({}, Se), n$1$1), at$1(y("number", e) && function (e) {
              return Ee$2(e);
            }(n$1$1)).throw(p$1.invalidParameters), r = St$1$1.of(this._iid), i$1$1 = r.dispatcher, a = r.requestQueue, s = new Ut$2(n$1({
              channelType: this.channelType,
              channelUrl: this.url,
              messageId: e
            }, n$1$1)), [4, a.send(s)];

          case 1:
            return o = l.sent(), c = o.as(It$2).message, i$1$1.dispatch(new un$3({
              messages: [c],
              source: $t$2.EVENT_MESSAGE_UPDATED
            })), [2, c];
        }
      });
    });
  }, l.prototype.cancelUploadingFileMessage = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        return at$1(y("string", e)).throw(p$1.invalidParameters), En$3.of(this._iid).fileMessageQueue.cancel(this, e), [2, !0];
      });
    });
  }, l.prototype.copyFileMessage = function (e, t) {
    var n$1$1, r$1$1;
    return r$1(this, void 0, void 0, function () {
      var i$1$1, a;
      return i$1(this, function (o) {
        return at$1(e instanceof l && t instanceof Wt$2 && t.sendingStatus === le$1.SUCCEEDED && e.url === t.channelUrl && !t.scheduledInfo).throw(p$1.invalidParameters), i$1$1 = new ee$1(), a = n$1(n$1({}, t), {
          fileUrl: t.url,
          fileName: t.name,
          fileSize: t.size,
          mimeType: t.type,
          mentionType: t.mentionType,
          mentionedUserIds: null !== (n$1$1 = t.mentionedUserIds) && void 0 !== n$1$1 ? n$1$1 : null === (r$1$1 = t.mentionedUsers) || void 0 === r$1$1 ? void 0 : r$1$1.map(function (e) {
            return e.userId;
          }),
          pushNotificationDeliveryOption: ce$1.DEFAULT,
          parentMessageId: null,
          isReplyToChannel: !1,
          thumbnailSizes: t.thumbnails.map(function (e) {
            return {
              maxWidth: e.width,
              maxHeight: e.height
            };
          }),
          requireAuth: t.requireAuth
        }), e._sendFileMessage(a).onSucceeded(function (e) {
          return i$1$1.resolve(e);
        }).onFailed(function (e) {
          return i$1$1.reject(e);
        }), [2, i$1$1.promise];
      });
    });
  }, l.prototype.deleteMessage = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return at$1(e instanceof xt$2).throw(p$1.invalidParameters), e.messageId > 0 ? (t = St$1$1.of(this._iid).requestQueue, n = new Et$2({
              channelType: this.channelType,
              channelUrl: this.url,
              messageId: e.messageId
            }), [4, t.send(n)]) : [3, 2];

          case 1:
            r.sent(), r.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, l.prototype.addReaction = function (e, n) {
    return r$1(this, void 0, void 0, function () {
      var r, i$1$1, a;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return at$1(e instanceof qt$1$1 && e.messageId > 0 && y("string", n)).throw(p$1.invalidParameters), r = St$1$1.of(this._iid).requestQueue, i$1$1 = new Mt$2({
              channelType: this.channelType,
              channelUrl: this.url,
              messageId: e.messageId,
              reactionKey: n
            }), [4, r.send(i$1$1)];

          case 1:
            return a = s.sent(), [2, a.as(St$2).reactionEvent];
        }
      });
    });
  }, l.prototype.deleteReaction = function (e, n) {
    return r$1(this, void 0, void 0, function () {
      var r, i$1$1, a;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return at$1(e instanceof qt$1$1 && e.messageId > 0 && y("string", n)).throw(p$1.invalidParameters), r = St$1$1.of(this._iid).requestQueue, i$1$1 = new Ct$2({
              channelType: this.channelType,
              channelUrl: this.url,
              messageId: e.messageId,
              reactionKey: n
            }), [4, r.send(i$1$1)];

          case 1:
            return a = s.sent(), [2, a.as(bt$2).reactionEvent];
        }
      });
    });
  }, l.prototype._updateMessageMetaArray = function (e, t, n, r$1$1) {
    return r$1(this, void 0, void 0, function () {
      var i$1$1, a, s, o, u, c;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            return i$1$1 = St$1$1.of(this._iid), a = i$1$1.dispatcher, s = i$1$1.requestQueue, o = new _t$2({
              channelType: this.channelType,
              channelUrl: this.url,
              messageId: e,
              metaArrayParams: {
                array: t,
                mode: n,
                upsert: r$1$1
              }
            }), [4, s.send(o)];

          case 1:
            return u = l.sent(), c = u.as(Tt$2).message, a.dispatch(new un$3({
              messages: [c],
              source: $t$2.EVENT_MESSAGE_UPDATED
            })), [2, c];
        }
      });
    });
  }, l.prototype.createMessageMetaArrayKeys = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var n;
      return i$1(this, function (i) {
        return at$1(e instanceof xt$2 && e.messageId > 0 && E$1("string", t)).throw(p$1.invalidParameters), n = t.map(function (e) {
          return new Dt$1$1({
            key: e
          });
        }), [2, this._updateMessageMetaArray(e.messageId, n, "add", !0)];
      });
    });
  }, l.prototype.deleteMessageMetaArrayKeys = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var n;
      return i$1(this, function (i) {
        return at$1(e instanceof xt$2 && e.messageId > 0 && E$1("string", t)).throw(p$1.invalidParameters), n = t.map(function (e) {
          return new Dt$1$1({
            key: e
          });
        }), [2, this._updateMessageMetaArray(e.messageId, n, "remove", !0)];
      });
    });
  }, l.prototype.addMessageMetaArrayValues = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        return at$1(e instanceof xt$2 && e.messageId > 0 && t.every(function (e) {
          return e instanceof Dt$1$1;
        })).throw(p$1.invalidParameters), [2, this._updateMessageMetaArray(e.messageId, t, "add", !0)];
      });
    });
  }, l.prototype.removeMessageMetaArrayValues = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        return at$1(e instanceof xt$2 && e.messageId > 0 && t.every(function (e) {
          return e instanceof Dt$1$1;
        })).throw(p$1.invalidParameters), [2, this._updateMessageMetaArray(e.messageId, t, "remove", !0)];
      });
    });
  }, l.prototype.report = function (e, r$1$1) {
    return r$1(this, void 0, void 0, function () {
      var i$1$1, a, s, o;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return at$1(m(_e$2, e) && y("string", r$1$1)).throw(p$1.invalidParameters), i$1$1 = St$1$1.of(this._iid), a = i$1$1.sdkState, s = i$1$1.requestQueue, o = new ft$2({
              channelUrl: this.url,
              channelType: this.channelType,
              userId: a.userId,
              category: e,
              description: r$1$1
            }), [4, s.send(o)];

          case 1:
            return u.sent(), [2];
        }
      });
    });
  }, l.prototype.reportUser = function (e, r$1$1, a) {
    return r$1(this, void 0, void 0, function () {
      var s, o, u, c;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            return at$1(e instanceof ct$1 && m(_e$2, r$1$1) && y("string", a)).throw(p$1.invalidParameters), s = St$1$1.of(this._iid), o = s.sdkState, u = s.requestQueue, c = new mt$2({
              channelUrl: this.url,
              channelType: this.channelType,
              userId: o.userId,
              offendingUserId: e.userId,
              category: r$1$1,
              description: a
            }), [4, u.send(c)];

          case 1:
            return l.sent(), [2];
        }
      });
    });
  }, l.prototype.reportMessage = function (e, r$1$1, i$1$1) {
    return r$1(this, void 0, void 0, function () {
      var a, s, o, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return at$1(e instanceof xt$2 && m(_e$2, r$1$1) && y("string", i$1$1)).throw(p$1.invalidParameters), a = St$1$1.of(this._iid), s = a.sdkState, o = a.requestQueue, u = new vt$2({
              channelUrl: this.url,
              channelType: this.channelType,
              userId: s.userId,
              offendingUserId: e.sender.userId,
              messageId: e.messageId,
              category: r$1$1,
              description: i$1$1
            }), [4, o.send(u)];

          case 1:
            return c.sent(), [2];
        }
      });
    });
  }, l;
}(Le$1);

var B$1, H$1, z$1, q$1;
!function (e) {
  e.SUCCESS = "success", e.PENDING = "pending", e.ERROR = "error";
}(B$1 || (B$1 = {})), function (e) {
  e.DEFAULT = "default", e.ALL = "all", e.MENTION_ONLY = "mention_only", e.OFF = "off";
}(H$1 || (H$1 = {})), function (e) {
  e.FCM = "gcm", e.APNS = "apns", e.UNKNOWN = "unknown";
}(z$1 || (z$1 = {})), function (e) {
  e.ALTERNATIVE = "alternative", e.DEFAULT = "default";
}(q$1 || (q$1 = {}));
var K$1,
    G,
    Q$1,
    j = 100,
    W$1 = "GroupChannel",
    V$1 = "url",
    Y$1 = 100,
    J$1 = "Message",
    X$1 = "messageId";
!function (e) {
  e.LATEST_LAST_MESSAGE = "latest_last_message", e.CHRONOLOGICAL = "chronological", e.CHANNEL_NAME_ALPHABETICAL = "channel_name_alphabetical", e.METADATA_VALUE_ALPHABETICAL = "metadata_value_alphabetical";
}(K$1 || (K$1 = {})), function (e) {
  e.CHRONOLOGICAL = "chronological", e.CHANNEL_NAME_ALPHABETICAL = "channel_name_alphabetical", e.METADATA_VALUE_ALPHABETICAL = "metadata_value_alphabetical";
}(G || (G = {})), function (e) {
  e.CREATED_AT = "created_at", e.SCHEDULED_AT = "scheduled_at";
}(Q$1 || (Q$1 = {}));

var Z$1,
    $ = function (e) {
  switch (e) {
    case K$1.LATEST_LAST_MESSAGE:
      return ["-lastMessageUpdatedAt", "-createdAt", "syncIndex"];

    case K$1.CHRONOLOGICAL:
      return ["-createdAt", "syncIndex"];

    case K$1.CHANNEL_NAME_ALPHABETICAL:
      return ["name"];
  }
},
    ee = function () {
  function r() {
    this.messageTypeFilter = se$1.ALL, this.customTypesFilter = null, this.senderUserIdsFilter = null, this.replyType = ue$1.NONE;
  }

  return r.prototype.clone = function () {
    var e = new r(),
        t = JSON.parse(JSON.stringify(this));
    return Object.keys(t).forEach(function (s) {
      e[s] = t[s];
    }), e;
  }, r.prototype.match = function (r) {
    switch (this.messageTypeFilter) {
      case se$1.USER:
        if (r.messageType !== ie$1.USER) return !1;
        break;

      case se$1.FILE:
        if (r.messageType !== ie$1.FILE) return !1;
        break;

      case se$1.ADMIN:
        if (r.messageType !== ie$1.ADMIN) return !1;
    }

    if (this.customTypesFilter && this.customTypesFilter.length > 0 && !this.customTypesFilter.includes(r.customType)) return !1;

    if (this.senderUserIdsFilter && this.senderUserIdsFilter.length > 0) {
      if (!(r instanceof xt$2)) return !1;
      if (!this.senderUserIdsFilter.includes(r.sender.userId)) return !1;
    }

    switch (this.replyType) {
      case ue$1.NONE:
        if (r.parentMessageId > 0) return !1;
        break;

      case ue$1.ONLY_REPLY_TO_CHANNEL:
        if (r instanceof xt$2 && r.parentMessageId > 0 && !r.replyToChannel) return !1;
    }

    return !0;
  }, r;
}();

!function (e) {
  e.CHANNEL_LATEST = "channel_latest", e.NEWEST_CHILD_MESSAGE = "newest_child_message";
}(Z$1 || (Z$1 = {}));

var te,
    se = function (e) {
  switch (e) {
    case Z$1.CHANNEL_LATEST:
      return ["channelUrl", "-createdAt", "-messageId"];

    case Z$1.NEWEST_CHILD_MESSAGE:
      return ["channelUrl", "-parentMessageId", "-createdAt", "-messageId"];
  }
},
    ne = n$1(n$1({}, de$2), {
  scheduledAt: null
}),
    re = function (e) {
  return he$2(e) && y("number", e.scheduledAt, !0);
},
    ae = n$1(n$1({}, ue$2), {
  scheduledAt: null,
  file: null,
  fileUrl: null,
  fileName: null,
  mimeType: null,
  fileSize: null,
  thumbnailSizes: null,
  requireAuth: !1
}),
    ie = function (e) {
  return ce$2(e) && y("number", e.scheduledAt) && (S$1(e.file) || y("string", e.fileUrl)) && y("string", e.fileName, !0) && y("string", e.mimeType, !0) && y("number", e.fileSize, !0) && (null === e.thumbnailSizes || e.thumbnailSizes.every(function (e) {
    return y("object", e) && e.maxWidth > 0 && e.maxHeight > 0;
  }));
},
    ce = "UnsentMessage",
    oe = "reqId",
    le = {},
    ue = function (e) {
  function t$1(t, s) {
    var n = s.sdkState,
        r = s.cacheContext,
        a = e.call(this, t) || this;
    return a._sdkState = n, a._cacheContext = r, le[t] = a, a;
  }

  return t(t$1, e), t$1.of = function (e) {
    return le[e];
  }, Object.defineProperty(t$1.prototype, "collection", {
    get: function () {
      var e = this._cacheContext.nestdb;
      return e && e.collection("UnsentMessage");
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1.prototype, "localCacheEnabled", {
    get: function () {
      return this._cacheContext.localCacheEnabled && !!this.collection;
    },
    enumerable: !1,
    configurable: !0
  }), t$1.prototype._serialize = function (e) {
    if (e.messageId > 0) throw p$1.invalidParameters;
    var t,
        s = n$1({}, e.serialize());
    return e instanceof Vt$2 ? (e.messageParams && (s.messageParams = le$2(e.messageParams)), e.scheduledInfo && e.scheduledInfo.scheduledMessageParams && (s.scheduledInfo.scheduledMessageParams = (t = e.scheduledInfo.scheduledMessageParams, n$1(n$1({}, le$2(t)), {
      scheduledAt: t.scheduledAt
    })))) : e instanceof Wt$2 && (e.messageParams && (s.messageParams = ve$2(e.messageParams)), e.scheduledInfo && e.scheduledInfo.scheduledMessageParams && (s.scheduledInfo.scheduledMessageParams = function (e) {
      return n$1(n$1({}, ve$2(e)), {
        scheduledAt: e.scheduledAt
      });
    }(e.scheduledInfo.scheduledMessageParams))), s;
  }, t$1.prototype._deserialize = function (e) {
    return e ? (e = n$1(n$1({}, e), {
      messageId: parseInt(e.messageId)
    }), En$3.of(this._iid).buildMessageFromSerializedData(e)) : null;
  }, t$1.prototype.get = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.getByKey("".concat(e))] : [3, 2];

          case 1:
            if (t = s.sent()) return [2, this._deserialize(t)];
            s.label = 2;

          case 2:
            return [2, null];
        }
      });
    });
  }, t$1.prototype.fetch = function (e) {
    var t = e.channelUrl,
        s = void 0 === t ? null : t,
        n = e.filter,
        r$1$1 = void 0 === n ? new ee() : n,
        a = e.order,
        i$1$1 = void 0 === a ? Z$1.CHANNEL_LATEST : a,
        c = e.sendingStatus,
        o = void 0 === c ? null : c,
        g = e.backward,
        p = void 0 !== g && g,
        m = e.parentMessageId,
        v = void 0 === m ? null : m;
    return r$1(this, void 0, void 0, function () {
      var e,
          t,
          n,
          a,
          c = this;
      return i$1(this, function (g) {
        switch (g.label) {
          case 0:
            return this.localCacheEnabled ? (e = se(i$1$1), t = {
              "/where": function (e) {
                return !!(i$1$1 !== Z$1.NEWEST_CHILD_MESSAGE || v && 0 !== e.parentMessageId && e.parentMessageId === v) && r$1$1.match(c._deserialize(e));
              }
            }, s && (t.channelUrl = s), o && (t.sendingStatus = o), n = {
              where: t,
              index: e,
              backward: p
            }, [4, this.collection.query(n)]) : [3, 3];

          case 1:
            return [4, g.sent().fetch({})];

          case 2:
            return a = g.sent(), [2, Promise.all(a.map(function (e) {
              return r$1(c, void 0, void 0, function () {
                var t, s, n, r, a, i$1$1;
                return i$1(this, function (c) {
                  switch (c.label) {
                    case 0:
                      return t = En$3.of(this._iid), s = this._deserialize(e), (n = e.messageParams) ? s instanceof Vt$2 ? (s.messageParams = t.buildUserMessageCreateParamsFromSerializedData(n, s), [3, 4]) : [3, 1] : [3, 4];

                    case 1:
                      return s instanceof Wt$2 ? n.fileKey && "string" == typeof n.fileKey && me$2(n.fileType) ? (r = n, [4, this.collection.getBlob(n.fileKey)]) : [3, 3] : [3, 4];

                    case 2:
                      r.file = c.sent(), c.label = 3;

                    case 3:
                      s.messageParams = t.buildFileMessageCreateParamsFromSerializedData(n, s), c.label = 4;

                    case 4:
                      return s.scheduledInfo && e.scheduledInfo && e.scheduledInfo.scheduledMessageParams ? s instanceof Vt$2 ? (a = e.scheduledInfo.scheduledMessageParams, s.scheduledInfo.scheduledMessageParams = t.buildScheduledUserMessageCreateParamsFromSerializedData(a, s), [3, 8]) : [3, 5] : [3, 8];

                    case 5:
                      return s instanceof Wt$2 ? (a = e.scheduledInfo.scheduledMessageParams).fileKey && "string" == typeof a.fileKey && me$2(a.fileType) ? (i$1$1 = a, [4, this.collection.getBlob(a.fileKey)]) : [3, 7] : [3, 8];

                    case 6:
                      i$1$1.file = c.sent(), c.label = 7;

                    case 7:
                      s.scheduledInfo.scheduledMessageParams = t.buildScheduledFileMessageCreateParamsFromSerializedData(a, s), c.label = 8;

                    case 8:
                      return [2, s];
                  }
                });
              });
            }))];

          case 3:
            return [2, []];
        }
      });
    });
  }, t$1.prototype.getAllChildMessages = function (e, t) {
    return void 0 === t && (t = new ee()), r$1(this, void 0, void 0, function () {
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return [4, this.fetch({
              filter: t,
              order: Z$1.NEWEST_CHILD_MESSAGE,
              channelUrl: e.channelUrl,
              backward: !1,
              parentMessageId: e.messageId
            })];

          case 1:
            return [2, s.sent()];
        }
      });
    });
  }, t$1.prototype.upsert = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          s = this;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.saveBlobs(e)] : [3, 3];

          case 1:
            return n.sent(), t = e.map(function (e) {
              return s._serialize(e);
            }), [4, this.collection.upsertMany(t)];

          case 2:
            n.sent(), n.label = 3;

          case 3:
            return [2];
        }
      });
    });
  }, t$1.prototype.upsertChildMessages = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t = this;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return this.localCacheEnabled ? [4, Promise.all(e.map(function (e) {
              return r$1(t, void 0, void 0, function () {
                var t, s;
                return i$1(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return t = [], (null === (s = e.threadInfo) || void 0 === s ? void 0 : s.replyCount) > 0 ? [4, this.getAllChildMessages(e)] : [3, 2];

                    case 1:
                      t = n.sent(), n.label = 2;

                    case 2:
                      return t.length > 0 ? (t.forEach(function (t) {
                        return t.applyParentMessage(e);
                      }), [4, this.upsert(t)]) : [3, 4];

                    case 3:
                      n.sent(), n.label = 4;

                    case 4:
                      return [2];
                  }
                });
              });
            }))] : [3, 2];

          case 1:
            s.sent(), s.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, t$1.prototype.remove = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, s$1, n, r, a, i$1$1;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            if (!this.localCacheEnabled) return [3, 8];
            c.label = 1;

          case 1:
            c.trys.push([1, 6, 7, 8]), t = s(e), s$1 = t.next(), c.label = 2;

          case 2:
            return s$1.done ? [3, 5] : (n = s$1.value, [4, this.collection.remove(n)]);

          case 3:
            c.sent(), c.label = 4;

          case 4:
            return s$1 = t.next(), [3, 2];

          case 5:
            return [3, 8];

          case 6:
            return r = c.sent(), a = {
              error: r
            }, [3, 8];

          case 7:
            try {
              s$1 && !s$1.done && (i$1$1 = t.return) && i$1$1.call(t);
            } finally {
              if (a) throw a.error;
            }

            return [7];

          case 8:
            return [2];
        }
      });
    });
  }, t$1.prototype.removeMessagesOfChannel = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.removeIf({
              where: {
                channelUrl: e
              }
            })] : [3, 2];

          case 1:
            t.sent(), t.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, t$1.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];

          case 1:
            e.sent(), e.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, t$1.prototype.saveBlobs = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t = this;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return [4, Promise.all(e.map(function (e) {
              return r$1(t, void 0, void 0, function () {
                var t, s, n;
                return i$1(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return e instanceof Wt$2 ? e.messageParams && (t = e.messageParams).file && fe$2(t.file) ? [4, this.collection.saveBlob(t.file, e.reqId)] : [3, 2] : [3, 4];

                    case 1:
                      n = r.sent(), t.fileKey = n, t.fileType = oe$2.BLOB, r.label = 2;

                    case 2:
                      return e.scheduledInfo && e.scheduledInfo.scheduledMessageParams && (s = e.scheduledInfo.scheduledMessageParams).file && fe$2(s.file) ? [4, this.collection.saveBlob(s.file, e.reqId)] : [3, 4];

                    case 3:
                      n = r.sent(), s.fileKey = n, s.fileType = oe$2.BLOB, r.label = 4;

                    case 4:
                      return [2];
                  }
                });
              });
            }))];

          case 1:
            return s.sent(), [2];
        }
      });
    });
  }, t$1;
}(Le$1),
    de = {},
    he = function (e) {
  function t$1(t, s) {
    var n = s.sdkState,
        r = s.cacheContext,
        a = s.unsentMessageCache,
        i = e.call(this, t) || this;
    return i._sdkState = n, i._cacheContext = r, i._unsentMessageCache = a, de[t] = i, i;
  }

  return t(t$1, e), t$1.of = function (e) {
    return de[e];
  }, Object.defineProperty(t$1.prototype, "collection", {
    get: function () {
      var e = this._cacheContext.nestdb;
      return e ? e.collection("Message") : null;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1.prototype, "localCacheEnabled", {
    get: function () {
      return this._cacheContext.localCacheEnabled && !!this.collection;
    },
    enumerable: !1,
    configurable: !0
  }), t$1.prototype._serialize = function (e) {
    return n$1(n$1({}, e.serialize()), {
      messageId: "".concat(e.messageId)
    });
  }, t$1.prototype._deserialize = function (e) {
    return e = n$1(n$1({}, e), {
      messageId: parseInt(e.messageId)
    }), En$3.of(this._iid).buildMessageFromSerializedData(e);
  }, t$1.prototype.get = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.getByKey("".concat(e))] : [3, 2];

          case 1:
            if (t = s.sent()) return [2, this._deserialize(t)];
            s.label = 2;

          case 2:
            return [2, null];
        }
      });
    });
  }, t$1.prototype.fetch = function (e) {
    var t = e.channelUrl,
        s = e.token,
        n = e.limit,
        r$1$1 = void 0 === n ? 100 : n,
        a = e.filter,
        i$1$1 = void 0 === a ? new ee() : a,
        c = e.order,
        o = void 0 === c ? Z$1.CHANNEL_LATEST : c,
        d = e.backward,
        g = void 0 !== d && d,
        p = e.parentMessageId,
        m = void 0 === p ? null : p;
    return r$1(this, void 0, void 0, function () {
      var e,
          n,
          a,
          c = this;
      return i$1(this, function (d) {
        switch (d.label) {
          case 0:
            return this.localCacheEnabled ? (e = se(o), n = {
              where: {
                channelUrl: t,
                "/where": function (e) {
                  if (s) switch (o) {
                    case Z$1.CHANNEL_LATEST:
                      if (!g && e.createdAt > s || g && e.createdAt < s) return !1;
                      break;

                    case Z$1.NEWEST_CHILD_MESSAGE:
                      if (!m || 0 === e.parentMessageId || e.parentMessageId !== m) return !1;
                  }
                  return i$1$1.match(c._deserialize(e));
                }
              },
              index: e,
              backward: g
            }, [4, this.collection.query(n)]) : [3, 3];

          case 1:
            return [4, d.sent().fetch({
              limit: r$1$1
            })];

          case 2:
            return a = d.sent(), [2, Promise.all(a.map(function (e) {
              return r$1(c, void 0, void 0, function () {
                var t, s, n;
                return i$1(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return t = this._deserialize(e), (s = e.messageParams) ? t instanceof Vt$2 ? (t.messageParams = s, [3, 4]) : [3, 1] : [3, 4];

                    case 1:
                      return t instanceof Wt$2 ? s.fileKey && "string" == typeof s.fileKey && me$2(s.fileType) ? (n = s, [4, this.collection.getBlob(s.fileKey)]) : [3, 3] : [3, 4];

                    case 2:
                      n.file = r.sent(), r.label = 3;

                    case 3:
                      t.messageParams = s, r.label = 4;

                    case 4:
                      return [2, t];
                  }
                });
              });
            }))];

          case 3:
            return [2, []];
        }
      });
    });
  }, t$1.prototype.getAllChildMessages = function (e, t) {
    return void 0 === t && (t = new ee()), r$1(this, void 0, void 0, function () {
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return [4, this.fetch({
              channelUrl: e.channelUrl,
              token: Date.now(),
              limit: null,
              backward: !1,
              filter: t,
              order: Z$1.NEWEST_CHILD_MESSAGE,
              parentMessageId: e.messageId
            })];

          case 1:
            return [2, s.sent()];
        }
      });
    });
  }, t$1.prototype.upsert = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          s = this;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.saveBlobs(e)] : [3, 5];

          case 1:
            return n.sent(), t = e.map(function (e) {
              return s._serialize(e);
            }), [4, this.collection.upsertMany(t)];

          case 2:
            return n.sent(), [4, this.upsertChildMessages(e)];

          case 3:
            return n.sent(), [4, this._unsentMessageCache.upsertChildMessages(e)];

          case 4:
            n.sent(), n.label = 5;

          case 5:
            return [2];
        }
      });
    });
  }, t$1.prototype.upsertChildMessages = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t = this;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return this.localCacheEnabled ? [4, Promise.all(e.map(function (e) {
              return r$1(t, void 0, void 0, function () {
                var t, s;
                return i$1(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return t = [], (null === (s = e.threadInfo) || void 0 === s ? void 0 : s.replyCount) > 0 ? [4, this.getAllChildMessages(e)] : [3, 2];

                    case 1:
                      t = n.sent(), n.label = 2;

                    case 2:
                      return t.length > 0 ? (t.forEach(function (t) {
                        return t.applyParentMessage(e);
                      }), [4, this.upsert(t)]) : [3, 4];

                    case 3:
                      n.sent(), n.label = 4;

                    case 4:
                      return [2];
                  }
                });
              });
            }))] : [3, 2];

          case 1:
            s.sent(), s.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, t$1.prototype.remove = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, s$1, n, r, a, i$1$1;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            if (!this.localCacheEnabled) return [3, 8];
            c.label = 1;

          case 1:
            c.trys.push([1, 6, 7, 8]), t = s(e), s$1 = t.next(), c.label = 2;

          case 2:
            return s$1.done ? [3, 5] : (n = s$1.value, [4, this.collection.remove("".concat(n))]);

          case 3:
            c.sent(), c.label = 4;

          case 4:
            return s$1 = t.next(), [3, 2];

          case 5:
            return [3, 8];

          case 6:
            return r = c.sent(), a = {
              error: r
            }, [3, 8];

          case 7:
            try {
              s$1 && !s$1.done && (i$1$1 = t.return) && i$1$1.call(t);
            } finally {
              if (a) throw a.error;
            }

            return [7];

          case 8:
            return [2];
        }
      });
    });
  }, t$1.prototype.removeMessagesOfChannel = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.removeIf({
              where: {
                channelUrl: e
              },
              index: se(Z$1.CHANNEL_LATEST)
            })] : [3, 6];

          case 1:
            return s.sent(), [4, (t = this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e, "/message/sync"))];

          case 2:
            return s.sent(), [4, t.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e, "/message/sync.meta"))];

          case 3:
            return s.sent(), [4, t.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e, "/message/changelogs"))];

          case 4:
            return s.sent(), [4, t.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e, "/message/changelogs.meta"))];

          case 5:
            s.sent(), s.label = 6;

          case 6:
            return [2];
        }
      });
    });
  }, t$1.prototype.removeUnderOffset = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.removeIf({
              where: {
                channelUrl: e,
                createdAt: {
                  "<": t
                }
              },
              index: se(Z$1.CHANNEL_LATEST)
            })] : [3, 2];

          case 1:
            s.sent(), s.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, t$1.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];

          case 1:
            e.sent(), e.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, t$1.prototype.countBetween = function (e, t, s) {
    return r$1(this, void 0, void 0, function () {
      var n,
          r = this;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return this.localCacheEnabled ? (n = se(Z$1.CHANNEL_LATEST), [4, this.collection.query({
              where: {
                channelUrl: e,
                "/where": function (e) {
                  var n = r._deserialize(e);

                  return s.includes(n.createdAt) && t.match(n);
                }
              },
              index: n
            }).count()]) : [3, 2];

          case 1:
            return [2, a.sent()];

          case 2:
            return [2, 0];
        }
      });
    });
  }, t$1.prototype.saveBlobs = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t = this;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return [4, Promise.all(e.map(function (e) {
              return r$1(t, void 0, void 0, function () {
                var t, s;
                return i$1(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return e instanceof Wt$2 && e.messageParams && (t = e.messageParams).file && fe$2(t.file) ? [4, this.collection.saveBlob(t.file, e.reqId)] : [3, 2];

                    case 1:
                      s = n.sent(), t.fileKey = s, n.label = 2;

                    case 2:
                      return [2];
                  }
                });
              });
            }))];

          case 1:
            return s.sent(), [2];
        }
      });
    });
  }, t$1;
}(Le$1),
    fe = function (e) {
  function t$1(t) {
    var s = t.message,
        n = e.call(this) || this;
    return n.message = s, n;
  }

  return t(t$1, e), t$1;
}(L),
    ge = {},
    pe = function () {
  function e(e, t) {
    var s = t.localCacheEnabled,
        n = t.dispatcher,
        r = t.sdkState,
        a = t.logger,
        i = this;
    ge[e] = this, this._iid = e, ge[e] = this, this._localCacheEnabled = s, this._isProcessingAutoResend = !1, this._autoResendQueue = [], this._dispatcher = n, this._logger = a, this._sdkState = r, this._localCacheEnabled && n.on(function (e) {
      if (e instanceof de$1) switch (e.stateType) {
        case J$2.CONNECTED:
          i._isProcessingAutoResend || i.processAutoResendRegisteredPendingMessages().then(function () {
            return i._processNextAutoResend();
          });
          break;

        case J$2.DISCONNECTED:
          i._isProcessingAutoResend = !1;
      }
    });
  }

  return e.of = function (e) {
    return ge[e];
  }, e.prototype.processNonAutoResendRegisteredPendingMessages = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, s$1, n, r, a;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return [4, this._fetchAllCachedPendingMessages()];

          case 1:
            e = i.sent();

            try {
              for (t = s(e), s$1 = t.next(); !s$1.done; s$1 = t.next()) 0 === (n = s$1.value).errorCode && (this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ", n.reqId), n.sendingStatus = le$1.FAILED, n.errorCode = u$1.ACK_TIMEOUT, this._dispatcher.dispatch(new un$3({
                messages: [n],
                source: $t$2.LOCAL_MESSAGE_FAILED
              })));
            } catch (e) {
              r = {
                error: e
              };
            } finally {
              try {
                s$1 && !s$1.done && (a = t.return) && a.call(t);
              } finally {
                if (r) throw r.error;
              }
            }

            return [2];
        }
      });
    });
  }, e.prototype.processAutoResendRegisteredPendingMessages = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, s$1, n, r, a, i$1$1, c;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return [4, this._fetchAllCachedPendingMessages()];

          case 1:
            e = o.sent();

            try {
              for (t = s(e), s$1 = t.next(); !s$1.done; s$1 = t.next()) (n = s$1.value).errorCode && I$1(n.errorCode) && (r = new Date().getTime(), a = n.createdAt + 2592e5, r <= a ? this._autoResendQueue.map(function (e) {
                return e.reqId;
              }).indexOf(n.reqId) < 0 && this._autoResendQueue.push(n) : (this._logger.debug("auto-resend registered pending messaged expired. expiration date: ", new Date(a).toLocaleString()), n.sendingStatus = le$1.FAILED, this._dispatcher.dispatch(new un$3({
                messages: [n],
                source: $t$2.LOCAL_MESSAGE_FAILED
              }))));
            } catch (e) {
              i$1$1 = {
                error: e
              };
            } finally {
              try {
                s$1 && !s$1.done && (c = t.return) && c.call(t);
              } finally {
                if (i$1$1) throw i$1$1.error;
              }
            }

            return [2];
        }
      });
    });
  }, e.prototype.completeCurrentAndProcessNextAutoResend = function (e) {
    if (this._localCacheEnabled && (e.sendingStatus === le$1.SUCCEEDED || e.sendingStatus === le$1.FAILED && !I$1(e.errorCode))) {
      var t = this.indexOf(e);
      t >= 0 && this._autoResendQueue.splice(t, 1), 0 === t && this._processNextAutoResend();
    }
  }, e.prototype._fetchAllCachedPendingMessages = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return (e = ue.of(this._iid)) ? [4, e.fetch({
              sendingStatus: le$1.PENDING,
              backward: !0
            })] : [3, 2];

          case 1:
            return t = s.sent(), [3, 3];

          case 2:
            t = [], s.label = 3;

          case 3:
            return [2, t];
        }
      });
    });
  }, e.prototype.indexOf = function (e) {
    return this._autoResendQueue.length > 0 ? this._autoResendQueue.map(function (e) {
      return e.reqId;
    }).indexOf(e.reqId) : -1;
  }, e.prototype._isNotInQueue = function (e) {
    return -1 === this._autoResendQueue.map(function (e) {
      return e.reqId;
    }).indexOf(e.reqId);
  }, e.prototype._processNextAutoResend = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        if (this._localCacheEnabled && "foreground" === this._sdkState.appState) try {
          this._autoResendQueue.length > 0 ? (this._isProcessingAutoResend || (this._logger.debug("auto-resend queue started."), this._isProcessingAutoResend = !0), e = this._autoResendQueue[0], this._dispatcher.dispatch(new fe({
            message: e
          })), this._logger.debug("processing auto-resend for message request id: ", e.reqId)) : (this._logger.debug("auto-resend queue finished."), this._isProcessingAutoResend = !1);
        } catch (e) {
          this._logger.warn("process auto-resend error: ", e), this._isProcessingAutoResend = !1;
        }
        return [2];
      });
    });
  }, e;
}();

!function (e) {
  e[e.USER_BLOCK = 20001] = "USER_BLOCK", e[e.USER_UNBLOCK = 2e4] = "USER_UNBLOCK", e[e.FRIEND_DISCOVERED = 20900] = "FRIEND_DISCOVERED";
}(te || (te = {}));

var me = function () {
  function e(e) {
    this.category = e.cat, this.data = e.data;
  }

  return e.getDataAsUserBlockEvent = function (e, t) {
    var s = t.data,
        n = s.blocker,
        r = s.blockee;
    return {
      blocker: new ct$1(e, n),
      blockee: new ct$1(e, r)
    };
  }, e.getDataAsFriendDiscoveredEvent = function (e, t) {
    var s = t.data.friend_discoveries;
    return {
      friendDiscoveries: Array.isArray(s) ? s.map(function (t) {
        return new ct$1(e, t);
      }) : []
    };
  }, e;
}(),
    ve = function (e) {
  function t$1(t, s) {
    var n = s.userId,
        r = e.call(this) || this;
    return r._iid = t, r.userId = n, r;
  }

  return t(t$1, e), t$1;
}(L),
    be = function (e) {
  function t$1(t, s, n) {
    var r = e.call(this, t, "USEV", n) || this;
    return r.event = new me(n), r;
  }

  return t(t$1, e), t$1;
}(B$2),
    _e = function (e) {
  function t$1(t) {
    var s = t.userId,
        n = e.call(this) || this;
    return n.method = d$1.GET, n.path = "".concat(Ue$1, "/").concat(encodeURIComponent(s), "/push_preference"), n;
  }

  return t(t$1, e), t$1;
}(q$2),
    Ee = function (e) {
  function t$1(t, s) {
    var n = e.call(this, t, s) || this;
    return n.pushTriggerOption = s.push_trigger_option, n;
  }

  return t(t$1, e), t$1;
}(F$1),
    Ae$1 = function (e) {
  function t$1(t) {
    var s = t.userId,
        n = t.pushTriggerOption,
        r = e.call(this) || this;
    return r.method = d$1.PUT, r.path = "".concat(Ue$1, "/").concat(encodeURIComponent(s), "/push_preference"), r.params = {
      push_trigger_option: n
    }, r;
  }

  return t(t$1, e), t$1;
}(q$2),
    ye = function (e) {
  function t$1(t, s) {
    var n = e.call(this, t, s) || this;
    return n.pushTriggerOption = s.push_trigger_option, n;
  }

  return t(t$1, e), t$1;
}(F$1);

var Re = {
  profileImage: null,
  profileUrl: null,
  nickname: null
},
    Le = function () {
  this.onSessionExpired = Y$2, this.onSessionTokenRequired = function (e) {
    return e(null);
  }, this.onSessionError = Y$2, this.onSessionRefreshed = Y$2, this.onSessionClosed = Y$2;
},
    Pe = function () {
  this.onConnected = Y$2, this.onReconnectStarted = Y$2, this.onReconnectSucceeded = Y$2, this.onReconnectFailed = Y$2, this.onDisconnected = Y$2;
},
    Ae = function () {
  this.onFriendsDiscovered = Y$2, this.onTotalUnreadMessageCountUpdated = Y$2;
};

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(Le$1);

var De = function (e) {
  function t$1() {
    var t = null !== e && e.apply(this, arguments) || this;
    return t._pauseDelayTimer = null, t._currentState = "visible", t;
  }

  return t(t$1, e), Object.defineProperty(t$1.prototype, "isAvailable", {
    get: function () {
      return "undefined" != typeof window && !!window.addEventListener;
    },
    enumerable: !1,
    configurable: !0
  }), t$1.prototype._toggleState = function () {
    var e = this;
    "hidden" !== document.visibilityState ? "hidden" === this._currentState && (this._pauseDelayTimer && (clearTimeout(this._pauseDelayTimer), this._pauseDelayTimer = null), this.dispatch("resume")) : "hidden" !== this._currentState && (this._pauseDelayTimer = setTimeout(function () {
      e._pauseDelayTimer = null, e.dispatch("pause");
    }, 3e4)), this._currentState = document.visibilityState;
  }, t$1.prototype.start = function () {
    this.isAvailable && window.addEventListener("visibilitychange", this._toggleState.bind(this), {
      capture: !0
    });
  }, t$1.prototype.stop = function () {
    this.isAvailable && window.removeEventListener("visibilitychange", this._toggleState.bind(this), {
      capture: !0
    });
  }, t$1;
}(M$1),
    Me = function () {
  function e(e) {
    var t = e.logger,
        n = e.connectionDelegate,
        r = void 0 === n ? null : n;
    this.logger = t, r && (this.connectionDelegate = r), this._onlineWorker = this._onlineWorker.bind(this), this._offlineWorker = this._offlineWorker.bind(this);
  }

  return Object.defineProperty(e.prototype, "isAvailable", {
    get: function () {
      return "undefined" != typeof window && window.addEventListener && "ononline" in window && "onoffline" in window && "undefined" != typeof navigator && void 0 !== navigator.onLine;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype._onlineWorker = function () {
    this.connectionDelegate.reconnect();
  }, e.prototype._offlineWorker = function () {
    this.connectionDelegate.disconnect();
  }, e.prototype.start = function () {
    this.isAvailable && (window.addEventListener("online", this._onlineWorker), window.addEventListener("offline", this._offlineWorker));
  }, e.prototype.stop = function () {
    this.isAvailable && (window.removeEventListener("online", this._onlineWorker, !1), window.removeEventListener("offline", this._offlineWorker, !1));
  }, e.prototype.isOnline = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return this.isAvailable ? [2, navigator.onLine] : [2, new Promise(function (e, t) {
          fetch("https://www.google.com", {
            method: d$1.GET
          }).then(function () {
            return e(!0);
          }).catch(function () {
            return e(!1);
          });
        })];
      });
    });
  }, e;
}(),
    Ue = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.nickname,
        i = void 0 === r ? null : r,
        s = t.profileUrl,
        o = void 0 === s ? null : s,
        a = t.profileImage,
        u = void 0 === a ? null : a,
        c = t.preferredLanguages,
        l = void 0 === c ? null : c,
        h = e.call(this) || this;
    return h.method = d$1.PUT, h.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n)), h.params = U$2({
      nickname: i,
      profile_url: o,
      profile_file: u,
      preferred_languages: l
    }), h;
  }

  return t(t$1, e), t$1;
}(q$2),
    qe = function (e) {
  function t$1(t, n$1$1) {
    var r = e.call(this, t, n$1$1) || this;
    return r.user = null, r.user = new ct$1(t, n$1({}, n$1$1)), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Be = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.token,
        i = e.call(this) || this;
    return i.method = d$1.POST, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push/apns"), i.params = {
      apns_device_token: r,
      always_push: !0
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.token = n.token, r.type = n.type ? z$1[n.type.toLowerCase()] : z$1.UNKNOWN, r.user = new ct$1(t, n.user), r;
  }

  t(t$1, e);
}(F$1);

var Fe = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.token,
        i = e.call(this) || this;
    return i.method = d$1.POST, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push/gcm"), i.params = {
      gcm_reg_token: r,
      always_push: !0
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.token = n.token, r.type = n.type ? z$1[n.type.toLowerCase()] : z$1.UNKNOWN, r.user = new ct$1(t, n.user), r;
  }

  t(t$1, e);
}(F$1);

var Ke = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.token,
        i = e.call(this) || this;
    return i.method = d$1.DELETE, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push/apns/").concat(encodeURIComponent(r)), i;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.token = n.token, r.user = new ct$1(t, n.user), r;
  }

  t(t$1, e);
}(F$1);

var je = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.token,
        i = e.call(this) || this;
    return i.method = d$1.DELETE, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push/gcm/").concat(encodeURIComponent(r)), i;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.token = n.token, r.user = new ct$1(t, n.user), r;
  }

  t(t$1, e);
}(F$1);

var He = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = e.call(this) || this;
    return r.method = d$1.DELETE, r.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push/apns"), r;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.type = n.type ? z$1[n.type.toLowerCase()] : z$1.UNKNOWN, r.user = new ct$1(t, n.user), r;
  }

  t(t$1, e);
}(F$1);

var Ve = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = e.call(this) || this;
    return r.method = d$1.DELETE, r.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push/gcm"), r;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.type = n.type ? z$1[n.type.toLowerCase()] : z$1.UNKNOWN, r.user = new ct$1(t, n.user), r;
  }

  t(t$1, e);
}(F$1);

var We = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.type,
        i = t.token,
        s = t.ts,
        o = e.call(this) || this;
    return o.method = d$1.GET, o.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push/").concat(encodeURIComponent(r), "/device_tokens"), o.params = {
      created_ts: s,
      token: i
    }, o;
  }

  return t(t$1, e), t$1;
}(q$2),
    ze = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.pushTokens = {
      type: n.type ? z$1[n.type.toLowerCase()] : z$1.UNKNOWN,
      deviceTokens: n.device_tokens,
      hasMore: n.has_more,
      token: n.token
    }, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Qe = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = e.call(this) || this;
    return r.method = d$1.GET, r.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/channel_invitation_preference"), r;
  }

  return t(t$1, e), t$1;
}(q$2),
    Ge = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.autoAccept = n.auto_accept, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Ye = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.willAutoAccept,
        i = e.call(this) || this;
    return i.method = d$1.PUT, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/channel_invitation_preference"), i.params = {
      auto_accept: r
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2),
    Je = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.autoAccept = n.auto_accept, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Xe = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = e.call(this) || this;
    return r.method = d$1.GET, r.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push_preference"), r;
  }

  return t(t$1, e), t$1;
}(q$2),
    Ze = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.preference = {
      doNotDisturbOn: n.do_not_disturb,
      startHour: n.start_hour,
      startMin: n.start_min,
      endHour: n.end_hour,
      endMin: n.end_min,
      timezone: n.timezone
    }, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    $e = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.doNotDisturbOn,
        i = t.startHour,
        s = t.startMin,
        o = t.endHour,
        a = t.endMin,
        u = t.timezone,
        c = e.call(this) || this;
    return c.method = d$1.PUT, c.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push_preference"), c.params = {
      do_not_disturb: r,
      start_hour: i,
      start_min: s,
      end_hour: o,
      end_min: a,
      timezone: u
    }, c;
  }

  return t(t$1, e), t$1;
}(q$2),
    et = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.preference = {
      doNotDisturbOn: n.do_not_disturb,
      startHour: n.start_hour,
      startMin: n.start_min,
      endHour: n.end_hour,
      endMin: n.end_min,
      timezone: n.timezone
    }, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    tt = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = e.call(this) || this;
    return r.method = d$1.GET, r.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push_preference"), r;
  }

  return t(t$1, e), t$1;
}(q$2),
    nt = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.snoozePeriod = {
      isSnoozeOn: n.snooze_enabled
    }, "number" == typeof n.snooze_start_ts && (r.snoozePeriod.startTs = n.snooze_start_ts), "number" == typeof n.snooze_end_ts && (r.snoozePeriod.endTs = n.snooze_end_ts), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    rt = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.snoozeOn,
        i = t.startTs,
        s = t.endTs,
        o = e.call(this) || this;
    return o.method = d$1.PUT, o.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push_preference"), o.params = {
      snooze_enabled: r,
      snooze_start_ts: i,
      snooze_end_ts: s
    }, o;
  }

  return t(t$1, e), t$1;
}(q$2),
    it = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.snoozePeriod = {
      isSnoozeOn: n.snooze_enabled
    }, "number" == typeof n.snooze_start_ts && (r.snoozePeriod.startTs = n.snooze_start_ts), "number" == typeof n.snooze_end_ts && (r.snoozePeriod.endTs = n.snooze_end_ts), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    st = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.blockedUserId,
        i = e.call(this) || this;
    return i.method = d$1.POST, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/block"), i.params = {
      target_id: r
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.user = new ct$1(t, n), r;
  }

  t(t$1, e);
}(F$1);

var ot = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.unblockedUserId,
        i = e.call(this) || this;
    return i.method = d$1.DELETE, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/block/").concat(encodeURIComponent(r)), i;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var at = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = e.call(this) || this;
    return r.method = d$1.GET, r.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push/template"), r;
  }

  return t(t$1, e), t$1;
}(q$2),
    ut = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.name = n.name, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    ct = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.templateName,
        i = e.call(this) || this;
    return i.method = d$1.PUT, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/push/template"), i.params = {
      name: r
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2),
    lt = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.name = n.name, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    ht = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.token,
        i = e.call(this) || this;
    return i.method = d$1.GET, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/friends/changelogs"), i.params = {
      token: r
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2),
    dt = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.changelogs = {
      addedUsers: n.added.map(function (e) {
        return new ct$1(t, e);
      }),
      updatedUsers: n.updated.map(function (e) {
        return new ct$1(t, e);
      }),
      deletedUserIds: n.deleted,
      hasMore: n.has_more,
      token: n.next
    }, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    ft = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.discoveries,
        i = e.call(this) || this;
    return i.method = d$1.PUT, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/friend_discoveries"), i.params = {
      friend_discoveries: r.map(function (e) {
        return {
          friend_discovery_key: e.friendDiscoveryKey,
          friend_name: e.friendName
        };
      })
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2),
    pt = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.friendDiscoveryRequestId = n.friend_discovery_request_id, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    vt = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.discoveryKeys,
        i = e.call(this) || this;
    return i.method = d$1.DELETE, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/friend_discoveries"), i.params = {
      friend_discovery_keys: r
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var _t = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.userIds,
        i = e.call(this) || this;
    return i.method = d$1.POST, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/friends"), i.params = {
      user_ids: r
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2),
    mt = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.users = n.users.map(function (e) {
      return new ct$1(t, e);
    }), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    yt$1 = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.userIds,
        i = e.call(this) || this;
    return i.method = d$1.DELETE, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/friends"), i.params = {
      user_ids: r
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var bt$1 = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = e.call(this) || this;
    return r.method = d$1.GET, r.path = "".concat(Ue$1, "/").concat(n, "/allow_friend_discovery"), r.params = {}, r;
  }

  return t(t$1, e), t$1;
}(q$2),
    gt = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.allowFriendDiscovery = n.allow_friend_discovery, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    It$1 = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.allowFriendDiscovery,
        i = e.call(this) || this;
    return i.method = d$1.PUT, i.path = "".concat(Ue$1, "/").concat(n, "/allow_friend_discovery"), i.params = {
      allow_friend_discovery: r
    }, i;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  t(t$1, e);
}(F$1);

var wt$1,
    Et = function (e) {
  this.key = null, this.url = null, this.key = e.key, this.url = e.url;
},
    kt$1 = function (e) {
  var t, n, r;
  this.id = 0, this.name = null, this.url = null, this.emojis = [], this.id = null !== (t = e.id) && void 0 !== t ? t : 0, this.name = null !== (n = e.name) && void 0 !== n ? n : "", this.url = null !== (r = e.url) && void 0 !== r ? r : "", this.emojis = e.emojis ? e.emojis.map(function (e) {
    return new Et(e);
  }) : [];
},
    Nt$1 = function (e) {
  this.emojiHash = null, this.emojiCategories = [], this.emojiHash = e.emoji_hash || "", this.emojiCategories = e.emoji_categories ? e.emoji_categories.map(function (e) {
    return new kt$1(e);
  }) : [];
},
    Ot$1 = function (e) {
  function t$1() {
    var t = e.call(this) || this;
    return t.method = d$1.GET, t.path = ze$1, t;
  }

  return t(t$1, e), t$1;
}(q$2),
    St$1 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.emojiContainer = new Nt$1(n), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Tt$1 = function (e) {
  function t$1(t) {
    var n = t.categoryId,
        r = e.call(this) || this;
    return r.method = d$1.GET, r.path = "".concat(ze$1, "/").concat(n), r;
  }

  return t(t$1, e), t$1;
}(q$2),
    xt$1 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.emojiCategory = new kt$1(n), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Ct$1 = function (e) {
  function t$1(t) {
    var n = t.key,
        r = e.call(this) || this;
    return r.method = d$1.GET, r.path = "".concat(Ke$1, "/").concat(n), r;
  }

  return t(t$1, e), t$1;
}(q$2),
    Rt$1 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.emoji = new Et(n), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Lt$1 = function (e) {
  function t$1(t) {
    var n = t.limit,
        r = t.token,
        i = t.userIdsFilter,
        s = t.metaDataKeyFilter,
        o = t.metaDataValuesFilter,
        a = t.nicknameStartsWithFilter,
        u = e.call(this) || this;
    return u.method = d$1.GET, u.path = Ue$1, u.params = U$2({
      limit: n,
      token: r,
      user_ids: i,
      metadatakey: s,
      metadatavalues_in: o,
      nickname_startswith: a
    }), u;
  }

  return t(t$1, e), t$1;
}(q$2),
    Pt$1 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.users = n.users.map(function (e) {
      return new ct$1(t, e);
    }), r.next = n.next, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    At$1 = function (e) {
  function n$1$1(t, n) {
    var r,
        i,
        s,
        o = this;
    return (o = e.call(this, t, n) || this).userIdsFilter = null, o.metaDataKeyFilter = null, o.metaDataValuesFilter = null, o.nicknameStartsWithFilter = null, o.userIdsFilter = null !== (r = n.userIdsFilter) && void 0 !== r ? r : null, o.metaDataKeyFilter = null !== (i = n.metaDataKeyFilter) && void 0 !== i ? i : null, o.metaDataValuesFilter = null !== (s = n.metaDataValuesFilter) && void 0 !== s ? s : null, o.nicknameStartsWithFilter = n.nicknameStartsWithFilter || null, o;
  }

  return t(n$1$1, e), n$1$1.prototype._validate = function () {
    return e.prototype._validate.call(this) && E$1("string", this.userIdsFilter, !0) && y("string", this.metaDataKeyFilter, !0) && E$1("string", this.metaDataValuesFilter, !0) && y("string", this.metaDataKeyFilter, !0);
  }, n$1$1.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n$1$1, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, e = St$1$1.of(this._iid).requestQueue, t = new Lt$1(n$1(n$1({}, this), {
              token: this._token
            })), [4, e.send(t)]) : [3, 2] : [3, 5];

          case 1:
            return n$1$1 = o.sent(), r = n$1$1.as(Pt$1), i$1$1 = r.users, s = r.next, this._token = s, this._hasNext = !!s, this._isLoading = !1, [2, i$1$1];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, n$1$1;
}(bn$2),
    Dt$1 = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.limit,
        i = t.token,
        s = t.userIdsFilter,
        o = e.call(this) || this;
    return o.method = d$1.GET, o.path = "".concat(Ue$1, "/").concat(n, "/block"), o.params = U$2({
      limit: r,
      token: i,
      user_ids: s
    }), o;
  }

  return t(t$1, e), t$1;
}(q$2),
    Mt$1 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.users = n.users.map(function (e) {
      return new ct$1(t, e);
    }), r.next = n.next, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Ut$1 = function (e) {
  function t$1(t, n) {
    var r,
        i = this;
    return (i = e.call(this, t, n) || this).userIdsFilter = null, i.userIdsFilter = null !== (r = n.userIdsFilter) && void 0 !== r ? r : null, i;
  }

  return t(t$1, e), t$1.prototype._validate = function () {
    return e.prototype._validate.call(this) && E$1("string", this.userIdsFilter, !0);
  }, t$1.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n$1$1, r, i$1$1, s, o, a;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, e = St$1$1.of(this._iid), t = e.sdkState, n$1$1 = e.requestQueue, r = new Dt$1(n$1(n$1({}, this), {
              userId: t.userId,
              token: this._token
            })), [4, n$1$1.send(r)]) : [3, 2] : [3, 5];

          case 1:
            return i$1$1 = u.sent(), s = i$1$1.as(Mt$1), o = s.users, a = s.next, this._token = a, this._hasNext = !!a, this._isLoading = !1, [2, o];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, t$1;
}(bn$2),
    qt$1 = function (e) {
  function t$1(t) {
    var n = t.userId,
        r = t.limit,
        i = t.token,
        s = e.call(this) || this;
    return s.method = d$1.GET, s.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/friends"), s.params = {
      limit: r,
      token: i
    }, s;
  }

  return t(t$1, e), t$1;
}(q$2),
    Bt$1 = function (e) {
  function t$1(t, n) {
    var r = e.call(this, t, n) || this;
    return r.hasMore = n.has_more, r.users = n.users.map(function (e) {
      return new ct$1(t, e);
    }), r.next = n.next, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Ft$1 = function (e) {
  function t$1() {
    return null !== e && e.apply(this, arguments) || this;
  }

  return t(t$1, e), t$1.prototype._validate = function () {
    return e.prototype._validate.call(this);
  }, t$1.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n$1$1, r, i$1$1, s, o, a, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, e = St$1$1.of(this._iid), t = e.sdkState, n$1$1 = e.requestQueue, r = new qt$1(n$1(n$1({}, this), {
              userId: t.userId,
              token: this._token
            })), [4, n$1$1.send(r)]) : [3, 2] : [3, 5];

          case 1:
            return i$1$1 = c.sent(), s = i$1$1.as(Bt$1), o = s.users, a = s.hasMore, u = s.next, this._token = u, this._hasNext = a, this._isLoading = !1, [2, o];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, t$1;
}(bn$2),
    Kt$1 = {},
    jt$1 = function () {
  function e(e) {
    var t = e.dbname,
        n = e.itemSizeLimit,
        r = void 0 === n ? 1048576 : n,
        i = e.cacheLimit,
        s = void 0 === i ? 256 : i,
        o = e.blockHashBase,
        a = void 0 === o ? 2 : o,
        u = e.blockHashMultiplier,
        c = void 0 === u ? 10 : u,
        l = e.blockHashConstant,
        h = void 0 === l ? 11 : l,
        d = e.transactionApplyDelay,
        f = void 0 === d ? 200 : d,
        p = e.disableLogger,
        v = void 0 !== p && p;
    return Kt$1[t] || (this.itemSizeLimit = r, this.cacheLimit = s, this.blockHashBase = a, this.blockHashMultiplier = c, this.blockHashConstant = h, this.transactionApplyDelay = f, this.disableLogger = v, Kt$1[t] = this), Kt$1[t];
  }

  return e.get = function (e) {
    return Kt$1[e];
  }, e;
}();

!function (e) {
  e[e.UNKNOWN_ERROR = 6e7] = "UNKNOWN_ERROR", e[e.STORE_NOT_DEFINED = 61001e3] = "STORE_NOT_DEFINED", e[e.STORE_NOT_AVAILABLE = 61001001] = "STORE_NOT_AVAILABLE", e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING = 61001002] = "STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING", e[e.STORE_IS_FULL = 61001003] = "STORE_IS_FULL", e[e.STORE_INVALID_KEY_TYPE = 61002e3] = "STORE_INVALID_KEY_TYPE", e[e.STORE_BROKEN_INTEGRITY = 61002001] = "STORE_BROKEN_INTEGRITY", e[e.STORE_BROKEN_BLOB = 61002002] = "STORE_BROKEN_BLOB", e[e.STORE_ENCRYPTION_INVALID = 61002003] = "STORE_ENCRYPTION_INVALID", e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED = 61017e3] = "STORE_ITEM_SIZE_LIMIT_EXCEEDED", e[e.STORE_READ_FAILED = 61017001] = "STORE_READ_FAILED", e[e.STORE_WRITE_FAILED = 61017002] = "STORE_WRITE_FAILED", e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE = 62002e3] = "DATABASE_SCHEMA_NOT_ON_UPGRADE", e[e.COLLECTION_NOT_READY = 63001e3] = "COLLECTION_NOT_READY", e[e.COLLECTION_KEY_NOT_MATCH = 63002e3] = "COLLECTION_KEY_NOT_MATCH", e[e.COLLECTION_QUERY_NOT_VALID = 63002001] = "COLLECTION_QUERY_NOT_VALID", e[e.COLLECTION_KEY_NOT_FOUND = 63004e3] = "COLLECTION_KEY_NOT_FOUND", e[e.COLLECTION_KEY_NOT_GIVEN = 63004001] = "COLLECTION_KEY_NOT_GIVEN", e[e.COLLECTION_INSERT_DUPLICATE = 63009e3] = "COLLECTION_INSERT_DUPLICATE", e[e.COLLECTION_WRITE_FAILED = 63017e3] = "COLLECTION_WRITE_FAILED", e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED = 63017001] = "COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED", e[e.INDEX_TABLE_IS_REQUIRED = 65001e3] = "INDEX_TABLE_IS_REQUIRED", e[e.INDEX_TYPE_NOT_MATCH = 65002e3] = "INDEX_TYPE_NOT_MATCH", e[e.COMPARE_TYPE_NOT_MATCH = 69002001] = "COMPARE_TYPE_NOT_MATCH", e[e.CIRCULAR_REFERENCE_FOUND = 69002002] = "CIRCULAR_REFERENCE_FOUND";
}(wt$1 || (wt$1 = {}));

var Ht$1,
    Vt$1 = function (e) {
  function t$1(n) {
    var r = n.code,
        i = void 0 === r ? wt$1.UNKNOWN_ERROR : r,
        s = n.message,
        o = void 0 === s ? "Unknown error occurred." : s,
        a = e.call(this, o) || this;
    return a.code = i, Object.setPrototypeOf(a, t$1.prototype), a;
  }

  return t(t$1, e), Object.defineProperty(t$1, "storeNotDefined", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_NOT_DEFINED,
        message: "Store is not defined. Specify the store on NestDB()"
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "storeNotAvailable", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_NOT_AVAILABLE,
        message: "Store is not available. Check your environment settings."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "storeNotAvailableInPrivateBrowsing", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,
        message: "Store is not available because it is in private browsing."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "storeIsFull", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_IS_FULL,
        message: "Store is full."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "storeKeyTypeIsInvalid", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_INVALID_KEY_TYPE,
        message: "Store key should be string type."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "storeBrokenIntegrity", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_BROKEN_INTEGRITY,
        message: "Data should be in a store but it does not. Integrity is broken."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "storeBrokenBlob", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_BROKEN_BLOB,
        message: "Data should be in a store but it does not. Blob data is broken."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "storeEncryptionInvalid", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_ENCRYPTION_INVALID,
        message: "Encryption algorithm has changed. All the store should reset."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "storeItemSizeExceeded", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_ITEM_SIZE_LIMIT_EXCEEDED,
        message: "The size of the item exceeds the limit that the store allows."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "storeReadFailed", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_READ_FAILED,
        message: "Failed to read from store."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "storeWriteFailed", {
    get: function () {
      return new t$1({
        code: wt$1.STORE_WRITE_FAILED,
        message: "Failed to write to store."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "databaseSchemaNotOnUpgrade", {
    get: function () {
      return new t$1({
        code: wt$1.DATABASE_SCHEMA_NOT_ON_UPGRADE,
        message: "Committing schema is not allowed when upgrade is not running."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "collectionNotReady", {
    get: function () {
      return new t$1({
        code: wt$1.COLLECTION_NOT_READY,
        message: "Collection is not ready due to an error during initialization."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "collectionKeyNotMatch", {
    get: function () {
      return new t$1({
        code: wt$1.COLLECTION_KEY_NOT_MATCH,
        message: "keyName of collection could not change."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "collectionQueryNotValid", {
    get: function () {
      return new t$1({
        code: wt$1.COLLECTION_QUERY_NOT_VALID,
        message: "Query parameter is not a valid format."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "collectionInsertDuplicate", {
    get: function () {
      return new t$1({
        code: wt$1.COLLECTION_INSERT_DUPLICATE,
        message: "The key already exists."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "collectionKeyNotFound", {
    get: function () {
      return new t$1({
        code: wt$1.COLLECTION_KEY_NOT_FOUND,
        message: "The key is not found."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "collectionKeyNotGiven", {
    get: function () {
      return new t$1({
        code: wt$1.COLLECTION_KEY_NOT_GIVEN,
        message: "The item should contain [keyName] property."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "collectionWriteFailed", {
    get: function () {
      return new t$1({
        code: wt$1.COLLECTION_WRITE_FAILED,
        message: "Failed to write an item."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "collectionItemSizeExceeded", {
    get: function () {
      return new t$1({
        code: wt$1.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,
        message: "The size of the item exceeds the limit that a collection allows."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "indexTableIsRequired", {
    get: function () {
      return new t$1({
        code: wt$1.INDEX_TABLE_IS_REQUIRED,
        message: "Index table is required."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "indexTypesNotMatch", {
    get: function () {
      return new t$1({
        code: wt$1.INDEX_TYPE_NOT_MATCH,
        message: "Indexed column should have primitive type."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "compareTypesNotMatch", {
    get: function () {
      return new t$1({
        code: wt$1.COMPARE_TYPE_NOT_MATCH,
        message: "Values to compare have different types."
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t$1, "circularReferenceFound", {
    get: function () {
      return new t$1({
        code: wt$1.CIRCULAR_REFERENCE_FOUND,
        message: "Cannot handle circular referenced object."
      });
    },
    enumerable: !1,
    configurable: !0
  }), t$1;
}(Error);

!function (e) {
  e.INIT = "init", e.READY = "ready", e.CLOSED = "closed";
}(Ht$1 || (Ht$1 = {}));

var Wt$1,
    zt$1 = function (e, t) {
  if (void 0 === t && (t = new WeakMap()), "object" == typeof e && null !== e) {
    if (t.has(e)) throw Vt$1.circularReferenceFound;
    t.set(e, !0);
    var n = null;
    if (Array.isArray(e)) n = e.map(function (e) {
      return zt$1(e, t);
    });else if (e instanceof RegExp) n = e;else if (e instanceof Date) n = e;else for (var r in n = {}, e) n[r] = zt$1(e[r], t);
    return t.delete(e), n;
  }

  return e;
},
    Qt$1 = function (e, t) {
  if (null == t) return 1;
  if (null == e) return -1;
  if (typeof e != typeof t) throw Vt$1.compareTypesNotMatch;
  var n = 0;

  switch (typeof e) {
    case "boolean":
    case "number":
      n = e - t;
      break;

    case "string":
      n = e.localeCompare(t);
  }

  return n;
},
    Gt$1 = function (e, t) {
  for (var n = 0, r = 0; r < e.length; r++) n = e.charCodeAt(r) + (n << 6) + (n << 16) - n;

  return (n >>> 0) % t;
},
    Yt$1 = function (e) {
  return new Promise(function (t) {
    setTimeout(function () {
      return t();
    }, e);
  });
},
    Jt$1 = function (e, t) {
  if (!t) return !1;

  if ("function" != typeof e) {
    for (var n in e) {
      if (["/and", "&&"].includes(n)) {
        if (e[n].some(function (e) {
          return !Jt$1(e, t);
        })) return !1;
      } else if (["/or", "||"].includes(n)) {
        if (e[n].every(function (e) {
          return !Jt$1(e, t);
        })) return !1;
      } else if ("/where" === n) {
        if (!(0, e[n])(t)) return !1;
      } else {
        var r = n;

        if ("object" == typeof e[r]) {
          var i = e[r];

          for (var s in i) switch (s) {
            case "/eq":
            case "=":
              if ((o = t[r]) !== (a = i[s])) return !1;
              break;

            case "/neq":
            case "!=":
              if ((o = t[r]) === (a = i[s])) return !1;
              break;

            case "/gt":
            case ">":
              var o = t[r],
                  a = i[s];
              if (!(Qt$1(o, a) > 0)) return !1;
              break;

            case "/gte":
            case ">=":
              o = t[r], a = i[s];
              if (!(Qt$1(o, a) >= 0)) return !1;
              break;

            case "/lt":
            case "<":
              o = t[r], a = i[s];
              if (!(Qt$1(o, a) < 0)) return !1;
              break;

            case "/lte":
            case "<=":
              o = t[r], a = i[s];
              if (!(Qt$1(o, a) <= 0)) return !1;
              break;

            case "/in":
              o = t[r];
              if (!(a = i[s]).includes(o)) return !1;
              break;

            case "/nin":
              o = t[r];
              if ((a = i[s]).includes(o)) return !1;
              break;

            case "/contain":
              o = t[r], a = i[s];
              if (!o.includes(a)) return !1;
              break;

            case "/regex":
              o = t[r];
              if (!(a = i[s]).test(o)) return !1;
              break;

            case "/where":
              o = t[r];
              if (!(0, i[s])(o)) return !1;
          }
        } else if ("function" == typeof e[r]) {
          if (!e[r](t[r])) return !1;
        } else if (e[r] !== t[r]) return !1;
      }
    }

    return !0;
  }

  return e(t);
},
    Xt$1 = function () {},
    Zt$1 = function () {
  return Promise.resolve();
},
    $t$1 = function (e) {
  return e;
},
    en$2 = function (e, t) {
  t(null);
};

!function (e) {
  e[e.FORWARD = 0] = "FORWARD", e[e.BACKWARD = 1] = "BACKWARD";
}(Wt$1 || (Wt$1 = {}));

var tn$2,
    nn$1,
    rn$2,
    sn$2 = function () {
  function e(e) {
    var t = e.initialPrevValue,
        n = void 0 === t ? null : t,
        r = e.initialNextValue,
        i = void 0 === r ? null : r,
        s = e.iterator,
        o = e.map,
        a = void 0 === o ? $t$1 : o,
        u = e.backward,
        c = void 0 === u ? Zt$1 : u,
        l = e.forward,
        h = void 0 === l ? Zt$1 : l,
        d = e.complete,
        f = void 0 === d ? Xt$1 : d;
    this._prevValue = n, this._nextValue = i, this._error = null, this._map = a, this._backward = c, this._forward = h, this._iterator = s, this._complete = f;
  }

  return Object.defineProperty(e.prototype, "prevValue", {
    get: function () {
      return this._map(this._prevValue);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "nextValue", {
    get: function () {
      return this._map(this._nextValue);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "error", {
    get: function () {
      return this._error;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "hasPrevious", {
    get: function () {
      return !!this._prevValue;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "hasNext", {
    get: function () {
      return !!this._nextValue;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.prev = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            if (!this.hasPrevious) return [3, 6];
            r.label = 1;

          case 1:
            return r.trys.push([1, 3,, 4]), e = this._prevValue, t = this, [4, this._backward()];

          case 2:
            return t._prevValue = r.sent() || null, this._nextValue = e, [3, 4];

          case 3:
            return n = r.sent(), this._error = n, [3, 4];

          case 4:
            return [4, this._iterator(this)];

          case 5:
            return [2, r.sent()];

          case 6:
            this._complete(), r.label = 7;

          case 7:
            return [2];
        }
      });
    });
  }, e.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            if (!this.hasNext) return [3, 6];
            r.label = 1;

          case 1:
            return r.trys.push([1, 3,, 4]), e = this._nextValue, t = this, [4, this._forward()];

          case 2:
            return t._nextValue = r.sent() || null, this._prevValue = e, [3, 4];

          case 3:
            return n = r.sent(), this._error = n, [3, 4];

          case 4:
            return [4, this._iterator(this)];

          case 5:
            return [2, r.sent()];

          case 6:
            this._complete(), r.label = 7;

          case 7:
            return [2];
        }
      });
    });
  }, e.prototype.stop = function () {
    this._prevValue = null, this._nextValue = null, this._complete();
  }, e;
}(),
    on$2 = function () {
  function e(e) {
    var t = e.condition,
        n = void 0 === t ? {} : t,
        r = e.backward,
        i = void 0 !== r && r,
        s = e.blockManager,
        o = e.indexer;
    this.condition = n, this.backward = i, this._blockManager = s, this._indexer = o;
  }

  return e.prototype.findOptimizedStartPosition = function () {
    var e = this,
        t = ["=", "/eq", ">", ">=", "/gt", "/gte"],
        n = ["=", "/eq", "<", "<=", "/lt", "/lte"];

    if (this.backward) {
      var r = this._indexer.origin.length - 1;
      if ("function" != typeof this.condition) for (var i in this._indexer.fields) {
        var s = this._indexer.fields[i],
            o = 1;
        if ("-" === s[0] && (s = s.slice(1), o = -1), this.condition[s]) if ("object" == typeof this.condition[s]) {
          var a = o > 0 ? n : t;

          for (var u in this.condition[s]) if (a.includes(u)) for (var c = r; c >= 0; c--) if (o * Qt$1(this._indexer.origin[c].columnValues[i], this.condition[s][u]) <= 0) {
            r = c;
            break;
          }
        } else for (c = r; c >= 0; c--) if (o * Qt$1(this._indexer.origin[c].columnValues[i], this.condition[s]) <= 0) {
          r = c;
          break;
        }
      }
      return Math.min(r + 1, this._indexer.origin.length - 1);
    }

    var l = 0;
    if ("function" != typeof this.condition) for (var h = function (r) {
      var i = d._indexer.fields[r],
          s = 1;
      if ("-" === i[0] && (i = i.slice(1), s = -1), d.condition[i]) if ("object" == typeof d.condition[i]) Object.keys(d.condition[i]).forEach(function (o) {
        if ((s > 0 ? t : n).includes(o)) for (var a = l; a < e._indexer.origin.length; a++) if (s * Qt$1(e._indexer.origin[a].columnValues[r], e.condition[i][o]) >= 0) {
          l = a;
          break;
        }
      });else for (var o = l; o < d._indexer.origin.length; o++) if (s * Qt$1(d._indexer.origin[o].columnValues[r], d.condition[i]) >= 0) {
        l = o;
        break;
      }
    }, d = this, i = 0; i < this._indexer.fields.length; i++) h(i);
    return Math.max(l - 1, 0);
  }, e.prototype.each = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r$1$1,
          i$1$1,
          s,
          o,
          a,
          c = this;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            if (t = this.findOptimizedStartPosition(), n = 0, this.backward && this._indexer.origin[t] && (n = this._indexer.origin[t].keys.length - 1), r$1$1 = function () {
              if (c._indexer.origin[t]) {
                if (!c._indexer.origin[t].keys[++n]) {
                  if (!c._indexer.origin[++t]) return !1;
                  n = 0;
                }

                return !0;
              }

              return !1;
            }, i$1$1 = function () {
              if (c._indexer.origin[t]) {
                if (!c._indexer.origin[t].keys[--n]) {
                  if (!c._indexer.origin[--t]) return !1;
                  n = c._indexer.origin[t].keys.length - 1;
                }

                return !0;
              }

              return !1;
            }, s = null, !this._indexer.origin[t]) return [3, 4];
            o = this.backward ? i$1$1 : r$1$1, l.label = 1;

          case 1:
            return [4, this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];

          case 2:
            if (a = l.sent(), Jt$1(this.condition, a)) return s = a, [3, 4];
            l.label = 3;

          case 3:
            if (o()) return [3, 1];
            l.label = 4;

          case 4:
            return [4, new Promise(function (o) {
              var a = new sn$2({
                initialNextValue: zt$1(s),
                iterator: e,
                forward: function () {
                  return r$1(c, void 0, void 0, function () {
                    var e, s;
                    return i$1(this, function (o) {
                      switch (o.label) {
                        case 0:
                          e = this.backward ? i$1$1 : r$1$1, o.label = 1;

                        case 1:
                          return e() ? [4, this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])] : [3, 3];

                        case 2:
                          return s = o.sent(), Jt$1(this.condition, s) ? [2, zt$1(s)] : [3, 1];

                        case 3:
                          return [2, null];
                      }
                    });
                  });
                },
                backward: function () {
                  return r$1(c, void 0, void 0, function () {
                    var e, s;
                    return i$1(this, function (o) {
                      switch (o.label) {
                        case 0:
                          e = this.backward ? r$1$1 : i$1$1, o.label = 1;

                        case 1:
                          return e() ? [4, this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])] : [3, 3];

                        case 2:
                          return s = o.sent(), Jt$1(this.condition, s) ? [2, zt$1(s)] : [3, 1];

                        case 3:
                          return [2, null];
                      }
                    });
                  });
                },
                complete: o
              });
              e(a);
            })];

          case 5:
            return [2, l.sent()];
        }
      });
    });
  }, e;
}(),
    an$2 = function () {
  function e(e) {
    var t = e.condition,
        n = void 0 === t ? {} : t,
        r = e.backward,
        i = void 0 !== r && r,
        s = e.mutex,
        o = e.blockManager,
        a = e.indexer;
    this._mutex = s, this._iterator = new on$2({
      condition: n,
      backward: i,
      blockManager: o,
      indexer: a
    });
  }

  return e.prototype.fetch = function (e) {
    return void 0 === e && (e = {}), r$1(this, void 0, void 0, function () {
      var t,
          n,
          r$1$1,
          i$1$1,
          s = this;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            if (t = Math.max(e.offset || 0, 0), 0 === (n = "number" == typeof e.limit ? e.limit : Number.MAX_SAFE_INTEGER)) return [2, []];
            if (n < 0) throw Vt$1.collectionQueryNotValid;
            o.label = 1;

          case 1:
            return o.trys.push([1, 4,, 5]), r$1$1 = [], [4, this._mutex.lock()];

          case 2:
            return o.sent(), [4, this._iterator.each(function (e) {
              return r$1(s, void 0, void 0, function () {
                return i$1(this, function (i) {
                  return e.error ? e.stop() : e.hasNext ? 0 === t ? (r$1$1.push(e.nextValue), 0 < n && n <= r$1$1.length ? e.stop() : e.next()) : (t--, e.next()) : e.stop(), [2];
                });
              });
            })];

          case 3:
            return o.sent(), this._mutex.unlock(), [2, r$1$1];

          case 4:
            throw i$1$1 = o.sent(), this._mutex.unlock(), i$1$1;

          case 5:
            return [2];
        }
      });
    });
  }, e.prototype.count = function () {
    return r$1(this, void 0, void 0, function () {
      var e,
          t,
          n = this;
      return i$1(this, function (r$1$1) {
        switch (r$1$1.label) {
          case 0:
            return r$1$1.trys.push([0, 3,, 4]), e = 0, [4, this._mutex.lock()];

          case 1:
            return r$1$1.sent(), [4, this._iterator.each(function (t) {
              return r$1(n, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return t.error ? t.stop() : t.hasNext ? (e++, t.next()) : t.stop(), [2];
                });
              });
            })];

          case 2:
            return r$1$1.sent(), this._mutex.unlock(), [2, e];

          case 3:
            throw t = r$1$1.sent(), this._mutex.unlock(), t;

          case 4:
            return [2];
        }
      });
    });
  }, e;
}(),
    un$2 = function (e) {
  return "".concat("nest", "@").concat(e);
},
    cn$2 = function (e, t) {
  return "".concat(un$2(e), "/").concat(t);
},
    ln$2 = function (e, t) {
  return "".concat(cn$2(e, t), ".metadata");
},
    hn$2 = function (e, t) {
  return "".concat(cn$2(e, t), "/block.");
},
    dn$2 = function (e, t) {
  return "".concat(cn$2(e, t), "/blob.");
},
    fn$2 = function (e, t, n, r) {
  return void 0 === r && (r = 0), "".concat(dn$2(e, t)).concat(n, ".").concat(r);
},
    pn$2 = function () {
  function e(e) {
    var t = e.dbname,
        n = e.collectionName,
        r = e.store;
    this.dbname = t, this.collectionName = n, this._store = r;
  }

  return e.prototype._makeShards = function (e, t) {
    var n = Math.max(this._store.itemSizeLimit - 1024, 0);

    if (n > 0) {
      for (var r = Math.ceil(e.data.length / n), i = "".concat(r, ".").concat(e.type, ".").concat(t), s = [], o = 0; o < e.data.length; o += n) {
        var a = e.data.slice(o, o + n);
        s.push(a);
      }

      return {
        blobId: i,
        shards: s
      };
    }

    return {
      blobId: null,
      shards: null
    };
  }, e.prototype._encode = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, new Promise(function (t) {
              var n = new FileReader();
              n.onload = function () {
                t({
                  data: n.result,
                  type: e.type
                });
              }, n.readAsDataURL(e);
            })];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, e.prototype._decode = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s, o;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return "undefined" == typeof fetch ? [3, 3] : [4, fetch(e.data)];

          case 1:
            return [4, a.sent().blob()];

          case 2:
            return [2, a.sent()];

          case 3:
            for (t = [], n = atob(e.data.split(",")[1]), r = 0; r < n.length; r += 512) {
              for (i$1$1 = n.slice(r, r + 512), s = new Array(i$1$1.length), o = 0; o < i$1$1.length; o++) s[o] = i$1$1.charCodeAt(o);

              t.push(new Uint8Array(s));
            }

            return [2, new Blob(t, {
              type: e.type
            })];
        }
      });
    });
  }, e.prototype.get = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s, o$1, a, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            if (t = [], n = o(e.split("."), 2), r = n[0], i$1$1 = n[1], !((s = parseInt(r)) > 0)) return [3, 6];
            o$1 = 0, c.label = 1;

          case 1:
            return o$1 < s ? (a = fn$2(this.dbname, this.collectionName, e, o$1), [4, this._store.get(a)]) : [3, 4];

          case 2:
            if (!(u = c.sent()) || !u.d) throw Vt$1.storeBrokenBlob;
            t.push(u.d), c.label = 3;

          case 3:
            return o$1++, [3, 1];

          case 4:
            return [4, this._decode({
              data: t.join(""),
              type: i$1$1
            })];

          case 5:
            return [2, c.sent()];

          case 6:
            return [2, null];
        }
      });
    });
  }, e.prototype.save = function (e, t) {
    return void 0 === t && (t = "".concat(Date.now())), r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s, o, a, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return n = [], [4, this._encode(e)];

          case 1:
            if (r = c.sent(), i$1$1 = this._makeShards(r, t), s = i$1$1.blobId, o = i$1$1.shards, !s) return [3, 3];

            for (a = 0; a < o.length; a++) u = fn$2(this.dbname, this.collectionName, s, a), n.push({
              key: u,
              value: {
                d: o[a]
              },
              generation: 1
            });

            return [4, this._store.setMany(n)];

          case 2:
            if (c.sent().some(function (e) {
              return e instanceof Error;
            })) throw Vt$1.storeWriteFailed;
            return [2, s];

          case 3:
            return [2, null];
        }
      });
    });
  }, e.prototype.remove = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s;
      return i$1(this, function (o$1) {
        switch (o$1.label) {
          case 0:
            if (t = [], n = o(e.split("."), 1), r = n[0], !((i$1$1 = parseInt(r)) > 0)) return [3, 2];

            for (s = 0; s < i$1$1; s++) t.push(fn$2(this.dbname, this.collectionName, e, s));

            return [4, this._store.removeMany(t)];

          case 1:
            o$1.sent(), o$1.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, e.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1, s$1, o, a;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return e = dn$2(this.dbname, this.collectionName), t = [], [4, this._store.getAllKeys()];

          case 1:
            n = u.sent();

            try {
              for (r = s(n), i$1$1 = r.next(); !i$1$1.done; i$1$1 = r.next()) (s$1 = i$1$1.value).startsWith(e) && t.push(s$1);
            } catch (e) {
              o = {
                error: e
              };
            } finally {
              try {
                i$1$1 && !i$1$1.done && (a = r.return) && a.call(r);
              } finally {
                if (o) throw o.error;
              }
            }

            return [4, this._store.removeMany(n)];

          case 2:
            return u.sent(), [2];
        }
      });
    });
  }, e;
}();

!function (e) {
  e[e.COMMIT = 0] = "COMMIT", e[e.WRITE = 1] = "WRITE", e[e.ERROR = 2] = "ERROR";
}(tn$2 || (tn$2 = {})), function (e) {
  e.PENDING = "pending", e.PERSISTENT = "persistent", e.VOLATILE = "volatile";
}(nn$1 || (nn$1 = {})), function (e) {
  e[e.NO_CACHE = 0] = "NO_CACHE", e[e.DEFAULT = 1] = "DEFAULT", e[e.PERSISTENT = 2] = "PERSISTENT";
}(rn$2 || (rn$2 = {}));

var vn$2 = [nn$1.PENDING, nn$1.VOLATILE],
    _n$2 = {},
    mn$2 = function () {
  function e(e) {
    var t = e.dbname,
        n = e.limit,
        r = void 0 === n ? 256 : n;
    return _n$2[t] || (this.dbname = t, this._items = [], this._limit = r, _n$2[t] = this), _n$2[t];
  }

  return e.get = function (e) {
    return _n$2[e];
  }, Object.defineProperty(e.prototype, "items", {
    get: function () {
      return this._items;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.find = function (e, t, n) {
    return void 0 === n && (n = rn$2.DEFAULT), r$1(this, void 0, void 0, function () {
      var r, i$1$1;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return (r = this.get(t)) ? [3, 2] : [4, e.get(t)];

          case 1:
            return (i$1$1 = s.sent()) && (r = {
              key: t,
              value: i$1$1,
              generation: 1,
              state: n === rn$2.PERSISTENT ? nn$1.PERSISTENT : nn$1.VOLATILE
            }, this.put(r)), [3, 3];

          case 2:
            n === rn$2.PERSISTENT && (r.state = nn$1.PERSISTENT), s.label = 3;

          case 3:
            return [2, r];
        }
      });
    });
  }, e.prototype.get = function (e, t) {
    void 0 === t && (t = rn$2.DEFAULT);

    var n = this._items.map(function (e) {
      return e.key;
    }).indexOf(e);

    if (n > -1) {
      var r = this._items[n];
      return t === rn$2.PERSISTENT && (r.state = nn$1.PERSISTENT), t !== rn$2.NO_CACHE && this.put(r), r;
    }

    return null;
  }, e.prototype.put = function (e) {
    var t, n;

    if (this._limit > 0) {
      var r = this._items.map(function (e) {
        return e.key;
      }).indexOf(e.key);

      if (r > -1) vn$2.includes(this._items[r].state) && vn$2.includes(e.state) ? (this._items.splice(r, 1), this._items.push(e)) : (this._items[r].state = e.state, this._items[r].generation = e.generation, this._items[r].value = e.value);else {
        this._items.push(e);

        var i = this._items.filter(function (e) {
          return e.state === nn$1.VOLATILE;
        }),
            s$1 = i.length - this._limit;

        if (s$1 > 0) {
          var o = [];

          try {
            for (var a = s(this._items), u = a.next(); !u.done; u = a.next()) {
              var c = u.value;
              c.state === nn$1.VOLATILE && s$1 > 0 ? s$1-- : o.push(c);
            }
          } catch (e) {
            t = {
              error: e
            };
          } finally {
            try {
              u && !u.done && (n = a.return) && n.call(a);
            } finally {
              if (t) throw t.error;
            }
          }

          this._items = o;
        }
      }
    }
  }, e.prototype.remove = function (e) {
    var t = this._items.map(function (e) {
      return e.key;
    }).indexOf(e);

    t > -1 && this._items.splice(t, 1);
  }, e.prototype.clearByCondition = function (e) {
    this._items = this._items.filter(function (t) {
      return !e(t);
    });
  }, e.prototype.clear = function (e) {
    void 0 === e && (e = !1), this._items = e ? [] : this._items.filter(function (e) {
      return e.state !== nn$1.VOLATILE;
    });
  }, e;
}(),
    yn$2 = function () {
  function e(e) {
    var t = e.dbname,
        n = e.collectionName,
        r = e.store;
    this._metadata = null, this._requests = [], this._onCommit = new Map(), this._onWrite = new Map(), this._onError = new Map(), this.dbname = t, this.collectionName = n, this.metadataKey = function (e, t) {
      return "".concat(cn$2(e, t), "/trans.metadata");
    }(t, n), this.recordsetKey = function (e, t) {
      return "".concat(cn$2(e, t), "/trans.recordset");
    }(t, n), this._store = r;
  }

  return Object.defineProperty(e.prototype, "generation", {
    get: function () {
      return this._metadata ? this._metadata.generation : 0;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "requestCount", {
    get: function () {
      return this._requests.length;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype._getReducedRecordset = function (e) {
    return void 0 === e && (e = []), r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, this._store.get(this.recordsetKey)];

          case 1:
            return (t = n.sent() || []).push.apply(t, a([], o(e), !1)), [2, this._reduceRecordSet(t)];
        }
      });
    });
  }, e.prototype._reduceRecordSet = function (e) {
    for (var t = [], n = {}, r = e.length - 1; r >= 0; r--) {
      for (var i = e[r], s = [], o = i.requests.length - 1; o >= 0; o--) {
        var a = i.requests[o],
            u = a.data;
        n[u.key] || (s.unshift(a), n[u.key] = !0);
      }

      s.length > 0 && (i.requests = s, t.unshift(i));
    }

    return t;
  }, e.prototype._applyRecord = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var n$1$1, r, i$1$1, s, o, a, u, c, l;
      return i$1(this, function (h) {
        switch (h.label) {
          case 0:
            n$1$1 = mn$2.get(this.dbname), r = t.generation, i$1$1 = t.requests, s = null, h.label = 1;

          case 1:
            return h.trys.push([1, 3,, 4]), [4, this._store.setMany(i$1$1.map(function (e) {
              return n$1(n$1({}, e.data), {
                generation: r
              });
            }))];

          case 2:
            for (o = h.sent(), a = 0; a < i$1$1.length; a++) o[a] instanceof Error && (s || (s = o[a]), u = i$1$1[a].data, n$1$1.put(n$1(n$1({}, u), {
              generation: r,
              state: nn$1.PERSISTENT
            })));

            return [3, 4];

          case 3:
            return c = h.sent(), s = c, [3, 4];

          case 4:
            return s ? [3, 6] : (l = e.filter(function (e) {
              return e.generation !== r;
            }), [4, this._store.set({
              key: this.recordsetKey,
              value: l,
              generation: r
            })]);

          case 5:
            return h.sent(), this._onWrite.forEach(function (e) {
              e(i$1$1.map(function (e) {
                return e.data;
              }));
            }), [3, 7];

          case 6:
            this._onError.forEach(function (e) {
              return e(s);
            }), h.label = 7;

          case 7:
            return [2];
        }
      });
    });
  }, e.prototype.init = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1, s$1, o, a;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return e = this, [4, this._store.get(this.metadataKey)];

          case 1:
            return e._metadata = u.sent() || {
              generation: 1
            }, [4, this._getReducedRecordset()];

          case 2:
            t = u.sent(), u.label = 3;

          case 3:
            u.trys.push([3, 8, 9, 10]), n = s(t), r = n.next(), u.label = 4;

          case 4:
            return r.done ? [3, 7] : (i$1$1 = r.value, [4, this._applyRecord(t, i$1$1)]);

          case 5:
            u.sent(), u.label = 6;

          case 6:
            return r = n.next(), [3, 4];

          case 7:
            return [3, 10];

          case 8:
            return s$1 = u.sent(), o = {
              error: s$1
            }, [3, 10];

          case 9:
            try {
              r && !r.done && (a = n.return) && a.call(n);
            } finally {
              if (o) throw o.error;
            }

            return [7];

          case 10:
            return [2];
        }
      });
    });
  }, e.prototype.on = function (e, t, n) {
    switch (e) {
      case tn$2.COMMIT:
        this._onCommit.set(t, n);

        break;

      case tn$2.WRITE:
        this._onWrite.set(t, n);

        break;

      case tn$2.ERROR:
        this._onError.set(t, n);

    }
  }, e.prototype.requestWrite = function (e, t) {
    void 0 === t && (t = null), this._requests.push({
      data: e,
      options: t
    }), mn$2.get(this.dbname).put(n$1({
      state: nn$1.PENDING,
      generation: this.generation
    }, e));
  }, e.prototype.requestMultipleWrite = function (e, t) {
    var n$1$1, r;
    void 0 === t && (t = null);
    var i = mn$2.get(this.dbname);

    try {
      for (var s$1 = s(e), o = s$1.next(); !o.done; o = s$1.next()) {
        var a = o.value;
        this._requests.push({
          data: a,
          options: t
        }), i.put(n$1({
          state: nn$1.PENDING,
          generation: this.generation
        }, a));
      }
    } catch (e) {
      n$1$1 = {
        error: e
      };
    } finally {
      try {
        o && !o.done && (r = s$1.return) && r.call(s$1);
      } finally {
        if (n$1$1) throw n$1$1.error;
      }
    }
  }, e.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return mn$2.get(this.dbname).clearByCondition(function (e) {
          return e.state === nn$1.PENDING;
        }), this._requests = [], [2];
      });
    });
  }, e.prototype.commit = function () {
    return r$1(this, void 0, void 0, function () {
      var e,
          t,
          n$1$1,
          r,
          i$1$1,
          s,
          o,
          a,
          u,
          c,
          l,
          d,
          f = this;
      return i$1(this, function (h) {
        switch (h.label) {
          case 0:
            if (!((e = this._requests).length > 0)) return [3, 4];

            for (t = [], n$1$1 = {}, a = e.length - 1; a >= 0; a--) r = e[a], c = r.data, n$1$1[c.key] || (n$1$1[c.key] = !0, t.unshift(r));

            return i$1$1 = {
              generation: this.generation,
              requests: t
            }, [4, this._getReducedRecordset([i$1$1])];

          case 1:
            return s = h.sent(), [4, this._store.set({
              key: this.recordsetKey,
              value: s,
              generation: this.generation
            })];

          case 2:
            return h.sent(), this._metadata.generation++, [4, this._store.set({
              key: this.metadataKey,
              value: this._metadata,
              generation: 1
            })];

          case 3:
            for (h.sent(), o = mn$2.get(this.dbname), a = 0; a < t.length; a++) u = t[a], c = u.data, l = u.options, o.put(n$1(n$1({}, c), {
              generation: i$1$1.generation,
              state: l && l.persistent ? nn$1.PERSISTENT : nn$1.VOLATILE
            }));

            this._requests = [], this._onCommit.forEach(function (t) {
              t(e.map(function (e) {
                return e.data;
              }));
            }), d = jt$1.get(this.dbname), setTimeout(function () {
              try {
                f._applyRecord(s, i$1$1);
              } catch (e) {
                f._onError.forEach(function (t) {
                  return t(e);
                });
              }
            }, d.transactionApplyDelay), h.label = 4;

          case 4:
            return [2];
        }
      });
    });
  }, e;
}(),
    bn$1 = function () {
  function e(e) {
    var t = e.blockId,
        n = e.keyName,
        r = e.items,
        i = void 0 === r ? [] : r,
        s = e.limit;
    this.blockId = t, this.keyName = n, this.limit = s, this._items = a([], o(i), !1);
  }

  return e.createFromCacheItem = function (t) {
    return t ? new e(t.value) : null;
  }, Object.defineProperty(e.prototype, "isEmpty", {
    get: function () {
      return 0 === this._items.length;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "items", {
    get: function () {
      return this._items;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.serialize = function () {
    return {
      blockId: this.blockId,
      keyName: this.keyName,
      limit: this.limit,
      items: this._items
    };
  }, e.prototype.getItemByKey = function (e) {
    var t = this;
    return this._items.find(function (n) {
      var r = n[t.keyName];
      return e === r;
    });
  }, e.prototype.has = function (e) {
    var t = this;
    return this._items.map(function (e) {
      return e[t.keyName];
    }).includes(e);
  }, e.prototype.add = function (e) {
    var t = this,
        n = this._items.map(function (e) {
      return e[t.keyName];
    }).indexOf(e[this.keyName]);

    return n < 0 ? this._items.length < this.limit && (this._items.push(e), !0) : (this._items[n] = e, !0);
  }, e.prototype.remove = function (e) {
    for (var t in this._items) if (this._items[t][this.keyName] === e) return this._items.splice(parseInt(t), 1), !0;

    return !1;
  }, e.prototype.clear = function () {
    this._items = [];
  }, e;
}(),
    gn$2 = function () {
  function e(e) {
    var t = e.dbname,
        n = e.collectionName,
        r = e.metadata,
        i = e.hashFunction,
        s = void 0 === i ? Gt$1 : i,
        o = e.transaction,
        a = e.store;
    this.dbname = t, this.collectionName = n, this.hashFunction = s, this.metadata = r, this._transaction = o, this._store = a;
  }

  return Object.defineProperty(e.prototype, "keyName", {
    get: function () {
      return this.metadata.keyName;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.createBlockId = function (e, t) {
    return void 0 === t && (t = this.metadata.blockLevel), n = this.dbname, r = this.collectionName, i = t, s = "".concat(function (e, t, n) {
      var r = n.base * Math.pow(n.multiplier, t) + n.constant;
      return (n.hashFunction || Gt$1)(e, r);
    }(e, t, {
      hashFunction: this.hashFunction,
      base: this.metadata.blockHashBase,
      multiplier: this.metadata.blockHashMultiplier,
      constant: this.metadata.blockHashConstant
    })), "".concat(hn$2(n, r)).concat(i, ".").concat(s);
    var n, r, i, s;
  }, e.prototype._findBlock = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            t = mn$2.get(this.dbname), n = this.metadata.blockLevel, o.label = 1;

          case 1:
            return n > 0 ? (r = this.createBlockId(e, n), [4, t.find(this._store, r)]) : [3, 4];

          case 2:
            if ((i$1$1 = o.sent()) && (s = bn$1.createFromCacheItem(i$1$1), s.getItemByKey(e))) return [2, s];
            o.label = 3;

          case 3:
            return n--, [3, 1];

          case 4:
            return [2, null];
        }
      });
    });
  }, e.prototype.getFromBlock = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, this._findBlock(e)];

          case 1:
            return [2, (t = n.sent()) ? t.getItemByKey(e) : null];
        }
      });
    });
  }, e.prototype.putToBlock = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s, o;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return n = jt$1.get(this.dbname), r = this.createBlockId(e), i$1$1 = Math.floor(this._store.itemSizeLimit / n.itemSizeLimit), [4, mn$2.get(this.dbname).find(this._store, r)];

          case 1:
            return s = a.sent(), (o = s ? bn$1.createFromCacheItem(s) : new bn$1({
              blockId: r,
              keyName: this.keyName,
              items: [],
              limit: i$1$1
            })).add(t) ? (this._transaction.requestWrite({
              key: o.blockId,
              value: o.serialize()
            }), [2, !0]) : [2, !1];
        }
      });
    });
  }, e.prototype.removeFromBlock = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, this._findBlock(e)];

          case 1:
            return (t = n.sent()) && t.remove(e) ? (this._transaction.requestWrite({
              key: t.blockId,
              value: t.serialize()
            }), [2, !0]) : [2, !1];
        }
      });
    });
  }, e.prototype.clearAllBlocks = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1, s$1, o, a, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return e = hn$2(this.dbname, this.collectionName), [4, this._store.getAllKeys()];

          case 1:
            return t = c.sent(), n = t.filter(function (t) {
              return t.startsWith(e);
            }), [4, this._store.removeMany(n)];

          case 2:
            c.sent(), r = mn$2.get(this.dbname);

            try {
              for (i$1$1 = s(n), s$1 = i$1$1.next(); !s$1.done; s$1 = i$1$1.next()) o = s$1.value, r.remove(o);
            } catch (e) {
              a = {
                error: e
              };
            } finally {
              try {
                s$1 && !s$1.done && (u = i$1$1.return) && u.call(i$1$1);
              } finally {
                if (a) throw a.error;
              }
            }

            return [2];
        }
      });
    });
  }, e;
}(),
    In$1 = function () {
  function e(e) {
    var t = e.dbname,
        n = e.collectionName,
        r = e.keyName,
        i = e.fields,
        s = e.transaction,
        o = e.store,
        a = this;
    this._origin = [], this._table = [], this.dbname = t, this.collectionName = n, this.keyName = r, this.fields = i, this.indexerKey = function (e, t, n) {
      return "".concat(cn$2(e, t), "/index.").concat(n);
    }(this.dbname, this.collectionName, this.fields.join(">")), this._transaction = s, this._store = o, this._transaction.on(tn$2.COMMIT, this.indexerKey, function () {
      return a.commit();
    }), this._transaction.on(tn$2.ERROR, this.indexerKey, function () {
      return a.abort();
    });
  }

  return e.createKey = function (e) {
    return e.join(">");
  }, e.parseKey = function (e) {
    return e.split(">");
  }, e.prototype._addItem = function (e) {
    var t = e[this.keyName],
        n = this.getColumnValues(e),
        r = o(this.indexOf(n), 2),
        i = r[0];
    return r[1] ? !this._table[i].keys.includes(t) && (this._table[i].keys.push(t), !0) : (this._table.splice(i, 0, {
      columnValues: n,
      keys: [t]
    }), !0);
  }, e.prototype._removeItem = function (e) {
    var t = e[this.keyName],
        n = this.getColumnValues(e),
        r = o(this.indexOf(n), 2),
        i = r[0];

    if (r[1]) {
      var s = this._table[i].keys.indexOf(t);

      if (s > -1) return this._table[i].keys.splice(s, 1), 0 === this._table[i].keys.length && this._table.splice(i, 1), !0;
    }

    return !1;
  }, Object.defineProperty(e.prototype, "origin", {
    get: function () {
      return this._origin;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "table", {
    get: function () {
      return this._table;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.getColumnValues = function (e) {
    var t,
        n,
        r,
        i,
        s$1 = [];

    try {
      for (var o = s(this.fields), a = o.next(); !a.done; a = o.next()) {
        var u = a.value;
        if ("-" === u[0] && (u = u.slice(1)), r = e[u], i = void 0, i = typeof r, null !== r && "undefined" !== i && "boolean" !== i && "number" !== i && "string" !== i) throw Vt$1.indexTypesNotMatch;
        s$1.push(e[u]);
      }
    } catch (e) {
      t = {
        error: e
      };
    } finally {
      try {
        a && !a.done && (n = o.return) && n.call(o);
      } finally {
        if (t) throw t.error;
      }
    }

    return s$1;
  }, e.prototype.diff = function (e, t) {
    for (var n in this.fields) {
      var r = "-" === this.fields[n][0] ? -1 : 1,
          i = Qt$1(e[n], t[n]);
      if (0 !== i) return r * i;
    }

    return 0;
  }, e.prototype.indexOf = function (e) {
    if (this._table.length > 0) {
      for (var t = 0, n = this._table.length - 1; t <= n;) {
        var r = Math.floor((t + n) / 2),
            i = this.diff(e, this._table[r].columnValues);
        if (i > 0) t = r + 1;else {
          if (!(i < 0)) return [r, !0];
          n = r - 1;
        }
      }

      return [t, !1];
    }

    return [0, !1];
  }, e.prototype.ensure = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1, s$1, o, a, u, c, l, d, f, p, v, _, m;

      return i$1(this, function (h) {
        switch (h.label) {
          case 0:
            return [4, (e = mn$2.get(this.dbname)).find(this._store, this.indexerKey, rn$2.PERSISTENT)];

          case 1:
            return (t = h.sent()) ? [3, 11] : (n = hn$2(this.dbname, this.collectionName), [4, this._store.getAllKeys()]);

          case 2:
            r = h.sent(), h.label = 3;

          case 3:
            h.trys.push([3, 8, 9, 10]), i$1$1 = s(r), s$1 = i$1$1.next(), h.label = 4;

          case 4:
            return s$1.done ? [3, 7] : (o = s$1.value).startsWith(n) ? [4, e.find(this._store, o, rn$2.NO_CACHE)] : [3, 6];

          case 5:
            a = h.sent(), u = bn$1.createFromCacheItem(a);

            try {
              for (_ = void 0, c = s(u.items), l = c.next(); !l.done; l = c.next()) d = l.value, this._addItem(d);
            } catch (e) {
              _ = {
                error: e
              };
            } finally {
              try {
                l && !l.done && (m = c.return) && m.call(c);
              } finally {
                if (_) throw _.error;
              }
            }

            h.label = 6;

          case 6:
            return s$1 = i$1$1.next(), [3, 4];

          case 7:
            return [3, 10];

          case 8:
            return f = h.sent(), p = {
              error: f
            }, [3, 10];

          case 9:
            try {
              s$1 && !s$1.done && (v = i$1$1.return) && v.call(i$1$1);
            } finally {
              if (p) throw p.error;
            }

            return [7];

          case 10:
            return this._transaction.requestWrite({
              key: this.indexerKey,
              value: this._table
            }, {
              persistent: !0
            }), [3, 12];

          case 11:
            this._origin = t.value, this._table = zt$1(this._origin), h.label = 12;

          case 12:
            return [2];
        }
      });
    });
  }, e.prototype.drop = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return mn$2.get(this.dbname).remove(this.indexerKey), [4, this._store.remove(this.indexerKey)];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, e.prototype.addItem = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return this._addItem(e) && this._transaction.requestWrite({
          key: this.indexerKey,
          value: this._table
        }, {
          persistent: !0
        }), [2];
      });
    });
  }, e.prototype.removeItem = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return this._removeItem(e) && this._transaction.requestWrite({
          key: this.indexerKey,
          value: this._table
        }, {
          persistent: !0
        }), [2];
      });
    });
  }, e.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return this._table = [], this._transaction.requestWrite({
          key: this.indexerKey,
          value: this._table
        }, {
          persistent: !0
        }), [2];
      });
    });
  }, e.prototype.commit = function () {
    this._origin = this._table, this._table = zt$1(this._origin);
  }, e.prototype.abort = function () {
    this._table = zt$1(this._origin);
  }, e;
}(),
    wn$2 = "undefined" != typeof document && "undefined" != typeof navigator;

wn$2 && navigator.userAgent && navigator.userAgent.includes("Chrome/") && navigator.userAgent.includes("Chromium/");
var En$2 = wn$2 && navigator.userAgent && navigator.userAgent.includes("Firefox/") && !navigator.userAgent.includes("Seamonkey/");
wn$2 && navigator.userAgent && navigator.userAgent.includes("Safari/") && !navigator.userAgent.includes("Chrome/") && navigator.userAgent.includes("Chromium/"), wn$2 && navigator.userAgent && (navigator.userAgent.includes("OPR/") || navigator.userAgent.includes("Opera/")), wn$2 && navigator.userAgent && navigator.userAgent.includes("Trident/7.0");

var kn$1,
    Nn$2,
    On$1 = wn$2 && navigator.userAgent && navigator.userAgent.includes("Edge/"),
    Sn$1 = function () {
  var e = new Date().getTime();
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (t) {
    var n = (e + 16 * Math.random()) % 16 | 0;
    return e = Math.floor(e / 16), ("x" === t ? n : 3 & n | 8).toString(16);
  });
};

!function (e) {
  e[e.PROCESSING = 0] = "PROCESSING", e[e.DONE = 1] = "DONE";
}(kn$1 || (kn$1 = {})), function (e) {
  e.NEWNODE = "newnode", e.REMOVENODE = "removenode", e.CLAIM_HOST = "claimhost", e.SYNC_HOST = "synchost", e.REQUEST_LOCK = "requestlock", e.ACQUIRE_LOCK = "acquirelock", e.RELEASE_LOCK = "releaselock";
}(Nn$2 || (Nn$2 = {}));

var Tn$2,
    xn$1 = {},
    Cn$2 = function () {
  function e(e, t) {
    void 0 === t && (t = {});
    var n = this;
    return this._state = kn$1.PROCESSING, this._hostId = null, this._queue = [], this._currentItem = null, this._activationTimeout = null, this._activationQueue = [], xn$1[e] && !t.forceCreate || (this.nodeId = Sn$1(), this.key = e, wn$2 && (t.startAsInvisible ? this.registerNode() : "visible" === document.visibilityState ? this.claimHost() : this.registerNode(), document.addEventListener("visibilitychange", function () {
      "visible" === document.visibilityState && n.claimHost();
    }), window.addEventListener("message", function (e) {
      var t,
          r,
          i = e.data,
          s$1 = i.nodeId,
          o = i.requestId,
          a = i.key,
          u = i.op,
          c = i.data;
      if (s$1 !== n.nodeId && a === n.key) switch (u) {
        case Nn$2.NEWNODE:
          n._sendSync();

          break;

        case Nn$2.CLAIM_HOST:
          n._sendSync(), n._hostId = s$1;
          break;

        case Nn$2.SYNC_HOST:
          if (!n.isInSync) {
            n._activationTimeout && clearTimeout(n._activationTimeout);

            var l = c,
                h = l.currentItemRequestId,
                d = l.queue,
                f = function (e) {
              var t = n._queue.findIndex(function (t) {
                return t.requestId === e.requestId;
              });

              t < 0 && n._requestLock({
                nodeId: e.nodeId,
                requestId: e.requestId,
                key: n.key,
                op: Nn$2.REQUEST_LOCK,
                ts: e.ts
              });
            };

            try {
              for (var p = s(d), v = p.next(); !v.done; v = p.next()) {
                f(v.value);
              }
            } catch (e) {
              t = {
                error: e
              };
            } finally {
              try {
                v && !v.done && (r = p.return) && r.call(p);
              } finally {
                if (t) throw t.error;
              }
            }

            n._currentItem = n._queue.find(function (e) {
              return e.requestId === h;
            }), n._completeSync();
          }

          break;

        case Nn$2.REMOVENODE:
          n._queue = n._queue.filter(function (e) {
            return e.nodeId !== i.nodeId;
          }), n._currentItem && n._currentItem.nodeId === i.nodeId && (n._currentItem = null, n._acquire(n._queue[0]));
          break;

        case Nn$2.REQUEST_LOCK:
          n._requestLock(i);

          break;

        case Nn$2.ACQUIRE_LOCK:
          var _ = n._queue.find(function (e) {
            return e.requestId === o;
          });

          n._acquire(_);

          break;

        case Nn$2.RELEASE_LOCK:
          n._release(o);

      }
    }), window.addEventListener("beforeunload", function () {
      n._send(Nn$2.REMOVENODE);
    })), xn$1[e] = this), xn$1[e];
  }

  return Object.defineProperty(e.prototype, "locked", {
    get: function () {
      return !!this._currentItem;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "isHost", {
    get: function () {
      return this._hostId === this.nodeId;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "isInSync", {
    get: function () {
      return this._state == kn$1.DONE;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype._send = function (e, t) {
    var n, r;
    void 0 === t && (t = {});
    var i = {
      nodeId: this.nodeId,
      requestId: null !== (n = null == t ? void 0 : t.requestId) && void 0 !== n ? n : Sn$1(),
      key: this.key,
      op: e,
      data: null !== (r = t.data) && void 0 !== r ? r : null,
      ts: Date.now()
    };
    return wn$2 && window.postMessage(i, "*"), i;
  }, e.prototype._acquire = function (e) {
    void 0 === e && (e = null), e ? (this._currentItem = e, this._currentItem.onAcquired(e.requestId)) : this._currentItem = null;
  }, e.prototype._release = function (e) {
    if (this._currentItem && this._currentItem.requestId === e) {
      var t = this._currentItem;
      this._currentItem = null, t.nodeId === this.nodeId && this._send(Nn$2.RELEASE_LOCK, {
        requestId: t.requestId
      });

      var n = this._queue.findIndex(function (t) {
        return t.requestId === e;
      });

      n > -1 && this._queue.splice(n, 1), t.onReleased(e);
    }
  }, e.prototype._requestLock = function (e) {
    var t = this;
    return new Promise(function (n) {
      var r = {
        nodeId: e.nodeId,
        requestId: e.requestId,
        ts: e.ts,
        onAcquired: function (e) {
          t.isHost && t._send(Nn$2.ACQUIRE_LOCK, {
            requestId: e
          }), n();
        },
        onReleased: function () {
          t._acquire(t._queue[0]);
        }
      },
          i = !1;

      for (var s in t._queue) if (t._queue[s].ts > r.ts) {
        t._queue.splice(parseInt(s), 0, r), i = !0;
        break;
      }

      i || t._queue.push(r), t._currentItem || t._acquire(t._queue[0]);
    });
  }, e.prototype._sendSync = function () {
    var e;
    this.isHost && this._send(Nn$2.SYNC_HOST, {
      data: {
        currentItemRequestId: null === (e = this._currentItem) || void 0 === e ? void 0 : e.requestId,
        queue: this._queue.map(function (e) {
          return {
            nodeId: e.nodeId,
            requestId: e.requestId,
            ts: e.ts
          };
        })
      }
    });
  }, e.prototype._waitUntilSyncCompleted = function () {
    return r$1(this, void 0, void 0, function () {
      var e = this;
      return i$1(this, function (t) {
        return this.isHost && !this.isInSync ? [2, new Promise(function (t) {
          e._activationQueue.push(t);
        })] : [2];
      });
    });
  }, e.prototype._waitSync = function () {
    var e = this;
    this.isInSync || (this._activationTimeout = setTimeout(function () {
      e._completeSync();
    }, 8));
  }, e.prototype._completeSync = function () {
    this.isInSync || (this._state = kn$1.DONE, this._activationQueue.forEach(function (e) {
      return e();
    }), this._activationQueue = []);
  }, e.prototype.registerNode = function () {
    this._send(Nn$2.NEWNODE), this._waitSync();
  }, e.prototype.claimHost = function () {
    this._hostId = this.nodeId, this._send(Nn$2.CLAIM_HOST), this._waitSync();
  }, e.prototype.lock = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._waitUntilSyncCompleted()];

          case 1:
            return t.sent(), e = this._send(Nn$2.REQUEST_LOCK), [4, this._requestLock(e)];

          case 2:
            return t.sent(), [2];
        }
      });
    });
  }, e.prototype.unlock = function () {
    var e;

    this._release(null === (e = this._currentItem) || void 0 === e ? void 0 : e.requestId);
  }, e;
}(),
    Rn$1 = function () {
  function e(e) {
    var t = e.dbname,
        n = e.collectionName,
        r = e.keyName,
        i = e.keyHash,
        s = e.indexes,
        o$1 = e.store,
        a$1 = this;
    this._state = Ht$1.INIT, this._metadata = null, this._indexers = [], this.dbname = t, this.name = n, this.keyName = r, this.indexes = a([[r]], o(s.filter(function (e) {
      return In$1.createKey(e) !== a$1.keyName;
    })), !1), this._keyHash = i, this._store = o$1, this._mutex = new Cn$2(function (e, t) {
      return "".concat(cn$2(e, t), ".lock");
    }(t, n)), this._blobContainer = new pn$2({
      dbname: t,
      collectionName: n,
      store: o$1
    }), this._transaction = new yn$2({
      dbname: t,
      collectionName: n,
      store: o$1
    });
  }

  return e.metadataOf = function (e, t, n) {
    return r$1(this, void 0, void 0, function () {
      var r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return r = ln$2(e, t), [4, n.get(r)];

          case 1:
            return [2, i.sent()];
        }
      });
    });
  }, Object.defineProperty(e.prototype, "state", {
    get: function () {
      return this._state;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "isReady", {
    get: function () {
      return this._state === Ht$1.READY;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.init = function () {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r,
          i$1$1,
          s$1,
          o$1,
          a$1,
          u,
          c,
          l,
          d,
          f,
          p,
          v,
          _ = this;

      return i$1(this, function (h) {
        switch (h.label) {
          case 0:
            return [4, this._mutex.lock()];

          case 1:
            h.sent(), h.label = 2;

          case 2:
            return h.trys.push([2, 9,, 10]), t = jt$1.get(this.dbname), [4, e.metadataOf(this.dbname, this.name, this._store)];

          case 3:
            return n = h.sent(), this._metadata = n || {
              keyName: this.keyName,
              blockLevel: 1,
              blockHashBase: t.blockHashBase,
              blockHashMultiplier: t.blockHashMultiplier,
              blockHashConstant: t.blockHashConstant,
              indexes: this.indexes
            }, [4, this._transaction.init()];

          case 4:
            h.sent(), this._blockManager = new gn$2({
              dbname: this.dbname,
              collectionName: this.name,
              hashFunction: this._keyHash,
              metadata: this._metadata,
              transaction: this._transaction,
              store: this._store
            }), r = a([], o(this.indexes), !1), i$1$1 = [], s$1 = r.map(function (e) {
              return In$1.createKey(e);
            }), o$1 = n ? n.indexes.map(function (e) {
              return In$1.createKey(e);
            }) : [];

            try {
              for (a$1 = s(o$1), u = a$1.next(); !u.done; u = a$1.next()) c = u.value, s$1.includes(c) || i$1$1.push(In$1.parseKey(c));
            } catch (e) {
              p = {
                error: e
              };
            } finally {
              try {
                u && !u.done && (v = a$1.return) && v.call(a$1);
              } finally {
                if (p) throw p.error;
              }
            }

            return (l = []).push.apply(l, a([], o(r.map(function (e) {
              var t = new In$1({
                dbname: _.dbname,
                collectionName: _.name,
                keyName: _.keyName,
                fields: e,
                transaction: _._transaction,
                store: _._store
              });
              return _._indexers.push(t), t.ensure();
            })), !1)), l.push.apply(l, a([], o(i$1$1.map(function (e) {
              return new In$1({
                dbname: _.dbname,
                collectionName: _.name,
                keyName: _.keyName,
                fields: e,
                transaction: _._transaction,
                store: _._store
              }).drop();
            })), !1)), [4, Promise.all(l)];

          case 5:
            return h.sent(), [4, this._transaction.commit()];

          case 6:
            return h.sent(), s$1.sort().join(",") === o$1.sort().join(",") ? [3, 8] : (d = ln$2(this.dbname, this.name), this._metadata.indexes = r, [4, this._store.set({
              key: d,
              value: this._metadata,
              generation: 1
            })]);

          case 7:
            h.sent(), h.label = 8;

          case 8:
            return this._state = Ht$1.READY, this._mutex.unlock(), [3, 10];

          case 9:
            throw f = h.sent(), this._mutex.unlock(), f;

          case 10:
            return [2];
        }
      });
    });
  }, e.prototype.close = function () {
    this._state = Ht$1.CLOSED;
  }, e.prototype._hasPropertyOfKeyName = function (e) {
    var t = e[this.keyName];
    return "string" == typeof t && !!t;
  }, e.prototype._getIndexerBy = function (e) {
    var t, n;
    void 0 === e && (e = null), e || (e = [this.keyName]);
    var r = In$1.createKey(e);

    try {
      for (var i = s(this._indexers), s$1 = i.next(); !s$1.done; s$1 = i.next()) {
        var o = s$1.value;
        if (r === In$1.createKey(o.fields)) return o;
      }
    } catch (e) {
      t = {
        error: e
      };
    } finally {
      try {
        s$1 && !s$1.done && (n = i.return) && n.call(i);
      } finally {
        if (t) throw t.error;
      }
    }

    return null;
  }, e.prototype._upgradeBlockLevel = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return e = ln$2(this.dbname, this.name), this._metadata.blockLevel++, [4, this._store.set({
              key: e,
              value: this._metadata,
              generation: 1
            })];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, e.prototype._requestInsert = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s$1, o;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return t = e[this.keyName], [4, this._blockManager.getFromBlock(t)];

          case 1:
            return a.sent() ? [3, 13] : [4, this._blockManager.putToBlock(t, e)];

          case 2:
            return a.sent() ? [3, 5] : [4, this._upgradeBlockLevel()];

          case 3:
            return a.sent(), [4, this._blockManager.putToBlock(t, e)];

          case 4:
            a.sent(), a.label = 5;

          case 5:
            a.trys.push([5, 10, 11, 12]), n = s(this._indexers), r = n.next(), a.label = 6;

          case 6:
            return r.done ? [3, 9] : [4, r.value.addItem(e)];

          case 7:
            a.sent(), a.label = 8;

          case 8:
            return r = n.next(), [3, 6];

          case 9:
            return [3, 12];

          case 10:
            return i$1$1 = a.sent(), s$1 = {
              error: i$1$1
            }, [3, 12];

          case 11:
            try {
              r && !r.done && (o = n.return) && o.call(n);
            } finally {
              if (s$1) throw s$1.error;
            }

            return [7];

          case 12:
            return [3, 14];

          case 13:
            throw Vt$1.collectionInsertDuplicate;

          case 14:
            return [2];
        }
      });
    });
  }, e.prototype._requestUpsert = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s$1, o, a, u, c, l, d, f, p;
      return i$1(this, function (h) {
        switch (h.label) {
          case 0:
            return t = e[this.keyName], [4, this._blockManager.getFromBlock(t)];

          case 1:
            return (n = h.sent()) ? [3, 13] : [4, this._blockManager.putToBlock(t, e)];

          case 2:
            return h.sent() ? [3, 5] : [4, this._upgradeBlockLevel()];

          case 3:
            return h.sent(), [4, this._blockManager.putToBlock(t, e)];

          case 4:
            h.sent(), h.label = 5;

          case 5:
            h.trys.push([5, 10, 11, 12]), r = s(this._indexers), i$1$1 = r.next(), h.label = 6;

          case 6:
            return i$1$1.done ? [3, 9] : [4, (u = i$1$1.value).addItem(e)];

          case 7:
            h.sent(), h.label = 8;

          case 8:
            return i$1$1 = r.next(), [3, 6];

          case 9:
            return [3, 12];

          case 10:
            return s$1 = h.sent(), l = {
              error: s$1
            }, [3, 12];

          case 11:
            try {
              i$1$1 && !i$1$1.done && (d = r.return) && d.call(r);
            } finally {
              if (l) throw l.error;
            }

            return [7];

          case 12:
            return [3, 23];

          case 13:
            return [4, this._blockManager.putToBlock(t, e)];

          case 14:
            h.sent(), h.label = 15;

          case 15:
            h.trys.push([15, 21, 22, 23]), o = s(this._indexers), a = o.next(), h.label = 16;

          case 16:
            return a.done ? [3, 20] : 0 === (u = a.value).diff(u.getColumnValues(n), u.getColumnValues(e)) ? [3, 19] : [4, u.removeItem(n)];

          case 17:
            return h.sent(), [4, u.addItem(e)];

          case 18:
            h.sent(), h.label = 19;

          case 19:
            return a = o.next(), [3, 16];

          case 20:
            return [3, 23];

          case 21:
            return c = h.sent(), f = {
              error: c
            }, [3, 23];

          case 22:
            try {
              a && !a.done && (p = o.return) && p.call(o);
            } finally {
              if (f) throw f.error;
            }

            return [7];

          case 23:
            return [2];
        }
      });
    });
  }, e.prototype._requestUpdate = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s$1, o, a, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return t = e[this.keyName], [4, this._blockManager.getFromBlock(t)];

          case 1:
            return (n = c.sent()) ? [4, this._blockManager.putToBlock(t, e)] : [3, 11];

          case 2:
            c.sent(), c.label = 3;

          case 3:
            c.trys.push([3, 9, 10, 11]), r = s(this._indexers), i$1$1 = r.next(), c.label = 4;

          case 4:
            return i$1$1.done ? [3, 8] : 0 === (s$1 = i$1$1.value).diff(s$1.getColumnValues(n), s$1.getColumnValues(e)) ? [3, 7] : [4, s$1.removeItem(n)];

          case 5:
            return c.sent(), [4, s$1.addItem(e)];

          case 6:
            c.sent(), c.label = 7;

          case 7:
            return i$1$1 = r.next(), [3, 4];

          case 8:
            return [3, 11];

          case 9:
            return o = c.sent(), a = {
              error: o
            }, [3, 11];

          case 10:
            try {
              i$1$1 && !i$1$1.done && (u = r.return) && u.call(r);
            } finally {
              if (a) throw a.error;
            }

            return [7];

          case 11:
            return [2];
        }
      });
    });
  }, e.prototype._requestRemove = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s$1, o;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return [4, this._blockManager.getFromBlock(e)];

          case 1:
            return (t = a.sent()) ? [4, this._blockManager.removeFromBlock(e)] : [3, 10];

          case 2:
            a.sent(), a.label = 3;

          case 3:
            a.trys.push([3, 8, 9, 10]), n = s(this._indexers), r = n.next(), a.label = 4;

          case 4:
            return r.done ? [3, 7] : [4, r.value.removeItem(t)];

          case 5:
            a.sent(), a.label = 6;

          case 6:
            return r = n.next(), [3, 4];

          case 7:
            return [3, 10];

          case 8:
            return i$1$1 = a.sent(), s$1 = {
              error: i$1$1
            }, [3, 10];

          case 9:
            try {
              r && !r.done && (o = n.return) && o.call(n);
            } finally {
              if (s$1) throw s$1.error;
            }

            return [7];

          case 10:
            return [2];
        }
      });
    });
  }, e.prototype._requestClear = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1;
      return i$1(this, function (s$1) {
        switch (s$1.label) {
          case 0:
            return [4, this._blockManager.clearAllBlocks()];

          case 1:
            s$1.sent(), s$1.label = 2;

          case 2:
            s$1.trys.push([2, 7, 8, 9]), e = s(this._indexers), t = e.next(), s$1.label = 3;

          case 3:
            return t.done ? [3, 6] : [4, t.value.clear()];

          case 4:
            s$1.sent(), s$1.label = 5;

          case 5:
            return t = e.next(), [3, 3];

          case 6:
            return [3, 9];

          case 7:
            return n = s$1.sent(), r = {
              error: n
            }, [3, 9];

          case 8:
            try {
              t && !t.done && (i$1$1 = e.return) && i$1$1.call(e);
            } finally {
              if (r) throw r.error;
            }

            return [7];

          case 9:
            return [2];
        }
      });
    });
  }, e.prototype.getByKey = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 6];

          case 1:
            r.sent(), r.label = 2;

          case 2:
            return r.trys.push([2, 4,, 5]), [4, this._blockManager.getFromBlock(e)];

          case 3:
            return t = r.sent(), this._mutex.unlock(), [2, zt$1(t)];

          case 4:
            throw n = r.sent(), this._mutex.unlock(), n;

          case 5:
            return [3, 7];

          case 6:
            throw Vt$1.collectionNotReady;

          case 7:
            return [2];
        }
      });
    });
  }, e.prototype.query = function (e) {
    return void 0 === e && (e = {}), this.isReady ? new an$2({
      condition: e.where,
      mutex: this._mutex,
      blockManager: this._blockManager,
      indexer: this._getIndexerBy(e.index),
      backward: !!e.backward
    }) : null;
  }, e.prototype.insertOne = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 8];

          case 1:
            n.sent(), n.label = 2;

          case 2:
            if (n.trys.push([2, 5,, 7]), !this._hasPropertyOfKeyName(e)) throw Vt$1.collectionKeyNotGiven;
            return [4, this._requestInsert(zt$1(e))];

          case 3:
            return n.sent(), [4, this._transaction.commit()];

          case 4:
            return n.sent(), this._mutex.unlock(), [2, e];

          case 5:
            return t = n.sent(), [4, this._transaction.clear()];

          case 6:
            throw n.sent(), this._mutex.unlock(), t;

          case 7:
            return [3, 9];

          case 8:
            throw Vt$1.collectionNotReady;

          case 9:
            return [2];
        }
      });
    });
  }, e.prototype.insertMany = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r,
          i$1$1,
          s$1,
          o,
          a,
          u = this;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 15];

          case 1:
            c.sent(), c.label = 2;

          case 2:
            if (c.trys.push([2, 12,, 14]), e.some(function (e) {
              return !u._hasPropertyOfKeyName(e);
            })) throw Vt$1.collectionKeyNotGiven;
            c.label = 3;

          case 3:
            c.trys.push([3, 8, 9, 10]), t = s(e), n = t.next(), c.label = 4;

          case 4:
            return n.done ? [3, 7] : (r = n.value, [4, this._requestInsert(zt$1(r))]);

          case 5:
            c.sent(), c.label = 6;

          case 6:
            return n = t.next(), [3, 4];

          case 7:
            return [3, 10];

          case 8:
            return i$1$1 = c.sent(), o = {
              error: i$1$1
            }, [3, 10];

          case 9:
            try {
              n && !n.done && (a = t.return) && a.call(t);
            } finally {
              if (o) throw o.error;
            }

            return [7];

          case 10:
            return [4, this._transaction.commit()];

          case 11:
            return c.sent(), this._mutex.unlock(), [2, e];

          case 12:
            return s$1 = c.sent(), [4, this._transaction.clear()];

          case 13:
            throw c.sent(), this._mutex.unlock(), s$1;

          case 14:
            return [3, 16];

          case 15:
            throw Vt$1.collectionNotReady;

          case 16:
            return [2];
        }
      });
    });
  }, e.prototype.upsertOne = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 8];

          case 1:
            n.sent(), n.label = 2;

          case 2:
            if (n.trys.push([2, 5,, 7]), !this._hasPropertyOfKeyName(e)) throw Vt$1.collectionKeyNotGiven;
            return [4, this._requestUpsert(zt$1(e))];

          case 3:
            return n.sent(), [4, this._transaction.commit()];

          case 4:
            return n.sent(), this._mutex.unlock(), [2, e];

          case 5:
            return t = n.sent(), [4, this._transaction.clear()];

          case 6:
            throw n.sent(), this._mutex.unlock(), t;

          case 7:
            return [3, 9];

          case 8:
            throw Vt$1.collectionNotReady;

          case 9:
            return [2];
        }
      });
    });
  }, e.prototype.upsertMany = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r,
          i$1$1,
          s$1,
          o,
          a,
          u = this;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 15];

          case 1:
            c.sent(), c.label = 2;

          case 2:
            if (c.trys.push([2, 12,, 14]), e.some(function (e) {
              return !u._hasPropertyOfKeyName(e);
            })) throw Vt$1.collectionKeyNotGiven;
            c.label = 3;

          case 3:
            c.trys.push([3, 8, 9, 10]), t = s(e), n = t.next(), c.label = 4;

          case 4:
            return n.done ? [3, 7] : (r = n.value, [4, this._requestUpsert(zt$1(r))]);

          case 5:
            c.sent(), c.label = 6;

          case 6:
            return n = t.next(), [3, 4];

          case 7:
            return [3, 10];

          case 8:
            return i$1$1 = c.sent(), o = {
              error: i$1$1
            }, [3, 10];

          case 9:
            try {
              n && !n.done && (a = t.return) && a.call(t);
            } finally {
              if (o) throw o.error;
            }

            return [7];

          case 10:
            return [4, this._transaction.commit()];

          case 11:
            return c.sent(), this._mutex.unlock(), [2, e];

          case 12:
            return s$1 = c.sent(), [4, this._transaction.clear()];

          case 13:
            throw c.sent(), this._mutex.unlock(), s$1;

          case 14:
            return [3, 16];

          case 15:
            throw Vt$1.collectionNotReady;

          case 16:
            return [2];
        }
      });
    });
  }, e.prototype.update = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 8];

          case 1:
            n.sent(), n.label = 2;

          case 2:
            if (n.trys.push([2, 5,, 7]), !this._hasPropertyOfKeyName(e)) throw Vt$1.collectionKeyNotGiven;
            return [4, this._requestUpdate(zt$1(e))];

          case 3:
            return n.sent(), [4, this._transaction.commit()];

          case 4:
            return n.sent(), this._mutex.unlock(), [2, e];

          case 5:
            return t = n.sent(), [4, this._transaction.clear()];

          case 6:
            throw n.sent(), this._mutex.unlock(), t;

          case 7:
            return [3, 9];

          case 8:
            throw Vt$1.collectionNotReady;

          case 9:
            return [2];
        }
      });
    });
  }, e.prototype.updateIf = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var n,
          r$1$1,
          i$1$1,
          s$1,
          o,
          a,
          c,
          l,
          d,
          f,
          p,
          v,
          _,
          m,
          y = this;

      return i$1(this, function (b) {
        switch (b.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 16];

          case 1:
            b.sent(), b.label = 2;

          case 2:
            return b.trys.push([2, 13,, 15]), n = e.where, r$1$1 = void 0 === n ? {} : n, i$1$1 = e.index, s$1 = void 0 === i$1$1 ? null : i$1$1, o = e.backward, a = void 0 !== o && o, c = [], [4, new on$2({
              condition: r$1$1,
              blockManager: this._blockManager,
              backward: a,
              indexer: this._getIndexerBy(s$1)
            }).each(function (e) {
              return r$1(y, void 0, void 0, function () {
                var n, i$1$1;
                return i$1(this, function (s) {
                  if (e.error) throw e.stop(), e.error;

                  if (e.hasNext) {
                    if (n = e.nextValue, Jt$1(r$1$1, n) && t.set) {
                      if ("function" != typeof t.set) for (i$1$1 in t.set) n[i$1$1] = t.set[i$1$1];else t.set(n);
                      c.push(n);
                    }

                    e.next();
                  } else e.stop();

                  return [2];
                });
              });
            })];

          case 3:
            b.sent(), b.label = 4;

          case 4:
            b.trys.push([4, 9, 10, 11]), l = s(c), d = l.next(), b.label = 5;

          case 5:
            return d.done ? [3, 8] : (f = d.value, [4, this._requestUpdate(zt$1(f))]);

          case 6:
            b.sent(), b.label = 7;

          case 7:
            return d = l.next(), [3, 5];

          case 8:
            return [3, 11];

          case 9:
            return p = b.sent(), _ = {
              error: p
            }, [3, 11];

          case 10:
            try {
              d && !d.done && (m = l.return) && m.call(l);
            } finally {
              if (_) throw _.error;
            }

            return [7];

          case 11:
            return [4, this._transaction.commit()];

          case 12:
            return b.sent(), this._mutex.unlock(), [2, c];

          case 13:
            return v = b.sent(), [4, this._transaction.clear()];

          case 14:
            throw b.sent(), this._mutex.unlock(), v;

          case 15:
            return [3, 17];

          case 16:
            throw this._transaction.clear(), Vt$1.collectionNotReady;

          case 17:
            return [2];
        }
      });
    });
  }, e.prototype.remove = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 8];

          case 1:
            n.sent(), n.label = 2;

          case 2:
            return n.trys.push([2, 5,, 7]), [4, this._requestRemove(e)];

          case 3:
            return n.sent(), [4, this._transaction.commit()];

          case 4:
            return n.sent(), this._mutex.unlock(), [3, 7];

          case 5:
            return t = n.sent(), [4, this._transaction.clear()];

          case 6:
            throw n.sent(), this._mutex.unlock(), t;

          case 7:
            return [3, 9];

          case 8:
            throw Vt$1.collectionNotReady;

          case 9:
            return [2];
        }
      });
    });
  }, e.prototype.removeIf = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r$1$1,
          i$1$1,
          s$1,
          o,
          a,
          c,
          l,
          d,
          f,
          p,
          v,
          _,
          m = this;

      return i$1(this, function (y) {
        switch (y.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 15];

          case 1:
            y.sent(), y.label = 2;

          case 2:
            return y.trys.push([2, 13,, 14]), t = e.where, n = void 0 === t ? {} : t, r$1$1 = e.index, i$1$1 = void 0 === r$1$1 ? null : r$1$1, s$1 = e.backward, o = void 0 !== s$1 && s$1, a = [], [4, new on$2({
              condition: n,
              blockManager: this._blockManager,
              backward: o,
              indexer: this._getIndexerBy(i$1$1)
            }).each(function (e) {
              return r$1(m, void 0, void 0, function () {
                var t, r;
                return i$1(this, function (i) {
                  if (e.error) throw e.stop(), e.error;
                  return e.hasNext ? (t = e.nextValue, Jt$1(n, t) && (r = t[this.keyName], a.push(r)), e.next()) : e.stop(), [2];
                });
              });
            })];

          case 3:
            y.sent(), y.label = 4;

          case 4:
            y.trys.push([4, 9, 10, 11]), c = s(a), l = c.next(), y.label = 5;

          case 5:
            return l.done ? [3, 8] : (d = l.value, [4, this._requestRemove(d)]);

          case 6:
            y.sent(), y.label = 7;

          case 7:
            return l = c.next(), [3, 5];

          case 8:
            return [3, 11];

          case 9:
            return f = y.sent(), v = {
              error: f
            }, [3, 11];

          case 10:
            try {
              l && !l.done && (_ = c.return) && _.call(c);
            } finally {
              if (v) throw v.error;
            }

            return [7];

          case 11:
            return [4, this._transaction.commit()];

          case 12:
            return y.sent(), this._mutex.unlock(), [2, a];

          case 13:
            throw p = y.sent(), this._mutex.unlock(), p;

          case 14:
            return [3, 16];

          case 15:
            throw this._transaction.clear(), Vt$1.collectionNotReady;

          case 16:
            return [2];
        }
      });
    });
  }, e.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 8];

          case 1:
            t.sent(), t.label = 2;

          case 2:
            return t.trys.push([2, 5,, 7]), [4, this._requestClear()];

          case 3:
            return t.sent(), [4, this._transaction.commit()];

          case 4:
            return t.sent(), this._mutex.unlock(), [3, 7];

          case 5:
            return e = t.sent(), [4, this._transaction.clear()];

          case 6:
            throw t.sent(), this._mutex.unlock(), e;

          case 7:
            return [3, 9];

          case 8:
            throw Vt$1.collectionNotReady;

          case 9:
            return [2];
        }
      });
    });
  }, e.prototype.getBlob = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._blobContainer.get(e)];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, e.prototype.saveBlob = function (e, t) {
    return void 0 === t && (t = null), r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, this._blobContainer.save(e, t)];

          case 1:
            return [2, n.sent()];
        }
      });
    });
  }, e.prototype.removeBlob = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._blobContainer.remove(e)];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, e.prototype.removeAllBlobs = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, this._blobContainer.clear()];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, e;
}(),
    Ln$1 = {},
    Pn$1 = function () {
  function e(e) {
    void 0 === e && (e = {});
    var t = e.itemSizeLimit,
        n = void 0 === t ? 4194304 : t,
        r = e.delay,
        i = void 0 === r ? 1 : r,
        s = e.encryption,
        o = void 0 === s ? A$1 : s;
    this._encryption = o, this.itemSizeLimit = n, this.delay = i, this.observer = {};
  }

  return Object.defineProperty(e.prototype, "rawData", {
    get: function () {
      return Ln$1[this.dbname];
    },
    set: function (e) {
      Ln$1[this.dbname] = e;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.observe = function (e, t, n) {
    var r = this;
    this.observer[e] = {}, t.forEach(function (t) {
      return r.observer[e][t] = n;
    });
  }, e.prototype.init = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            this.dbname = e, Ln$1[this.dbname] = {}, n.label = 1;

          case 1:
            return n.trys.push([1,, 3, 5]), [4, this.get(N$1.key)];

          case 2:
            if ((t = n.sent()) && JSON.stringify(t) !== JSON.stringify(N$1.value)) throw Vt$1.storeEncryptionInvalid;
            return [3, 5];

          case 3:
            return [4, this.set(N$1)];

          case 4:
            return n.sent(), [7];

          case 5:
            return [2];
        }
      });
    });
  }, e.prototype.getAllKeys = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return [2, Object.keys(Ln$1[this.dbname]).filter(function (e) {
          return e !== N$1.key;
        })];
      });
    });
  }, e.prototype.get = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return [4, Yt$1(this.delay)];

          case 1:
            if (r.sent(), t = this.observer[e], n = t && t.get ? t.get(e) : null) throw n;
            return [2, Ln$1[this.dbname][e] ? this._encryption.decrypt(Ln$1[this.dbname][e]) : null];
        }
      });
    });
  }, e.prototype.set = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s, o;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return [4, Yt$1(this.delay)];

          case 1:
            if (a.sent(), t = e.key, n = e.value, r = this.observer[t], i$1$1 = r && r.set ? r.set(t) : null) throw i$1$1;
            if (s = this._encryption.encrypt(n), o = JSON.stringify(s), t === N$1.key || o.length < this.itemSizeLimit) return Ln$1[this.dbname][t] = s, [2, Ln$1[this.dbname][t]];
            throw Vt$1.storeItemSizeExceeded;
        }
      });
    });
  }, e.prototype.setMany = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n = this;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return [4, Yt$1(this.delay)];

          case 1:
            return r.sent(), t = [], e.forEach(function (e) {
              var r = e.key,
                  i = e.value,
                  s = n.observer[r];
              if (s && s.set ? s.set(r) : null) t.push(Vt$1.collectionWriteFailed);else {
                var o = n._encryption.encrypt(i),
                    a = JSON.stringify(o);

                r === N$1.key || a.length < n.itemSizeLimit ? (Ln$1[n.dbname][r] = o, t.push(i)) : t.push(Vt$1.storeItemSizeExceeded);
              }
            }), [2, t];
        }
      });
    });
  }, e.prototype.remove = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return [4, Yt$1(this.delay)];

          case 1:
            if (r.sent(), t = this.observer[e], n = t && t.remove ? t.remove(e) : null) throw n;
            return Ln$1[this.dbname][e] && delete Ln$1[this.dbname][e], [2, e];
        }
      });
    });
  }, e.prototype.removeMany = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s$1, o, a;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return [4, Yt$1(this.delay)];

          case 1:
            u.sent();

            try {
              for (t = s(e), n = t.next(); !n.done; n = t.next()) {
                if (r = n.value, i$1$1 = this.observer[r], s$1 = i$1$1 && i$1$1.remove ? i$1$1.remove(r) : null) throw s$1;
                Ln$1[this.dbname][r] && delete Ln$1[this.dbname][r];
              }
            } catch (e) {
              o = {
                error: e
              };
            } finally {
              try {
                n && !n.done && (a = t.return) && a.call(t);
              } finally {
                if (o) throw o.error;
              }
            }

            return [2, e];
        }
      });
    });
  }, e.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, Yt$1(this.delay)];

          case 1:
            return e.sent(), Ln$1[this.dbname] = {}, [2];
        }
      });
    });
  }, e;
}(),
    An$1 = function () {
  function e(e) {
    void 0 === e && (e = {}), this.itemSizeLimit = 104857600;
    var t = e.encryption,
        n = void 0 === t ? A$1 : t;
    this._window = "undefined" != typeof window ? window : null, this._indexedDB = this._window ? this._window.indexedDB || this._window.mozIndexedDB || this._window.webkitIndexedDB || this._window.msIndexedDB : null, this._encryption = n;
  }

  return e.prototype.init = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r = this;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return this.dbname = e, [4, new Promise(function (e, t) {
              if (r._window && wn$2) {
                if (En$2) {
                  var n = r._indexedDB.open("_testMozilla");

                  n.onerror = function () {
                    return t(Vt$1.storeNotAvailableInPrivateBrowsing);
                  }, n.onsuccess = function () {
                    return e();
                  };
                } else On$1 ? r._window.indexedDB || !r._window.PointerEvent && !r._window.MSPointerEvent || t(Vt$1.storeNotAvailableInPrivateBrowsing) : e();
              } else t(Vt$1.storeNotAvailable);
            })];

          case 1:
            return i.sent(), t = this, [4, new Promise(function (t, n) {
              var i = r._indexedDB.open(e);

              i.addEventListener("upgradeneeded", function (e) {
                e.target.result.createObjectStore("NestDBStore", {
                  keyPath: "key"
                });
              }), i.addEventListener("success", function (e) {
                return t(e.target.result);
              }), i.addEventListener("error", function (e) {
                return n(e.target.error);
              });
            })];

          case 2:
            t._database = i.sent(), i.label = 3;

          case 3:
            return i.trys.push([3,, 5, 7]), [4, this.get(N$1.key)];

          case 4:
            if ((n = i.sent()) && JSON.stringify(n) !== JSON.stringify(N$1.value)) throw Vt$1.storeEncryptionInvalid;
            return [3, 7];

          case 5:
            return [4, this.set(N$1)];

          case 6:
            return i.sent(), [7];

          case 7:
            return [2];
        }
      });
    });
  }, e.prototype.getAllKeys = function () {
    return r$1(this, void 0, void 0, function () {
      var e = this;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, new Promise(function (t, n) {
              var r = e._database.transaction("NestDBStore", "readonly").objectStore("NestDBStore").getAllKeys();

              r.addEventListener("success", function (e) {
                t(e.target.result.filter(function (e) {
                  return e !== N$1.key;
                }));
              }), r.addEventListener("error", function (e) {
                return n(e.target.error);
              });
            })];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, e.prototype.get = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t = this;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, new Promise(function (n, r) {
              var i = t._database.transaction("NestDBStore", "readonly").objectStore("NestDBStore").get(e);

              i.addEventListener("success", function (e) {
                return n(e.target.result ? t._encryption.decrypt(e.target.result.value) : null);
              }), i.addEventListener("error", function (e) {
                return r(e.target.error);
              });
            })];

          case 1:
            return [2, n.sent()];
        }
      });
    });
  }, e.prototype.set = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r = this;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = e.key, n = e.value, [4, new Promise(function (e, i) {
              var s = r._database.transaction("NestDBStore", "readwrite").objectStore("NestDBStore").put({
                key: t,
                value: r._encryption.encrypt(n)
              });

              s.addEventListener("success", function (t) {
                e(t.target.result);
              }), s.addEventListener("error", function (e) {
                return i(e.target.error);
              });
            })];

          case 1:
            return i.sent(), [2, n];
        }
      });
    });
  }, e.prototype.setMany = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r = this;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = [], n = this._database.transaction("NestDBStore", "readwrite").objectStore("NestDBStore"), e.forEach(function (e) {
              var i = e.key,
                  s = e.value;
              t.push(new Promise(function (e) {
                var t = n.put({
                  key: i,
                  value: r._encryption.encrypt(s)
                });
                t.addEventListener("success", function (t) {
                  e(t.target.result);
                }), t.addEventListener("error", function () {
                  e(Vt$1.collectionWriteFailed);
                });
              }));
            }), [4, Promise.all(t)];

          case 1:
            return i.sent(), [2, e.map(function (e) {
              return e.value;
            })];
        }
      });
    });
  }, e.prototype.remove = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t = this;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, new Promise(function (n, r) {
              var i = t._database.transaction("NestDBStore", "readwrite").objectStore("NestDBStore").delete(e);

              i.addEventListener("success", function () {
                return n(e);
              }), i.addEventListener("error", function (e) {
                return r(e.target.error);
              });
            })];

          case 1:
            return [2, n.sent()];
        }
      });
    });
  }, e.prototype.removeMany = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return t = this._database.transaction("NestDBStore", "readwrite").objectStore("NestDBStore"), [4, Promise.all(e.map(function (e) {
              return new Promise(function (n, r) {
                var i = t.delete(e);
                i.addEventListener("success", function () {
                  return n(e);
                }), i.addEventListener("error", function (e) {
                  return r(e.target.error);
                });
              });
            }))];

          case 1:
            return [2, n.sent()];
        }
      });
    });
  }, e.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      var e = this;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, new Promise(function (t, n) {
              var r = e._database.transaction("NestDBStore", "readwrite").objectStore("NestDBStore").clear();

              r.addEventListener("success", function () {
                return t();
              }), r.addEventListener("error", function (e) {
                return n(e.target.error);
              });
            })];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, e;
}(),
    Dn$1 = function () {
  function e(e) {
    var t = e.AsyncStorage,
        n = e.encryption,
        r = void 0 === n ? A$1 : n;
    this.itemSizeLimit = 6291456, this._asyncStorage = t, this._encryption = r;
  }

  return e.prototype._isBelonging = function (e) {
    return e.startsWith("".concat(this.dbname, "/"));
  }, e.prototype._getActualKey = function (e) {
    return "".concat(this.dbname, "/").concat(e);
  }, e.prototype.init = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            this.dbname = e, n.label = 1;

          case 1:
            return n.trys.push([1,, 3, 5]), [4, this.get(N$1.key)];

          case 2:
            if ((t = n.sent()) && JSON.stringify(t) !== JSON.stringify(N$1.value)) throw Vt$1.storeEncryptionInvalid;
            return [3, 5];

          case 3:
            return [4, this.set(N$1)];

          case 4:
            return n.sent(), [7];

          case 5:
            return [2];
        }
      });
    });
  }, e.prototype.getAllKeys = function () {
    return r$1(this, void 0, void 0, function () {
      var e,
          t,
          n = this;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return e = this._getActualKey(N$1.key), [4, this._asyncStorage.getAllKeys()];

          case 1:
            return t = r.sent(), [2, t.filter(function (t) {
              return n._isBelonging(t) && t !== e;
            }).map(function (e) {
              return e.substring("".concat(n.dbname, "/").length);
            })];
        }
      });
    });
  }, e.prototype.get = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, this._asyncStorage.getItem(this._getActualKey(e))];

          case 1:
            return [2, (t = n.sent()) ? this._encryption.decrypt(JSON.parse(t)) : null];
        }
      });
    });
  }, e.prototype.set = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = e.key, n = e.value, r = JSON.stringify(this._encryption.encrypt(n)), t === N$1.key || r.length < this.itemSizeLimit ? [4, this._asyncStorage.setItem(this._getActualKey(t), r)] : [3, 2];

          case 1:
            return i.sent(), [2, JSON.parse(r)];

          case 2:
            throw Vt$1.storeItemSizeExceeded;
        }
      });
    });
  }, e.prototype.setMany = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s$1, o, a, u, c, l;
      return i$1(this, function (h) {
        switch (h.label) {
          case 0:
            t = [], n = [];

            try {
              for (r = s(e), i$1$1 = r.next(); !i$1$1.done; i$1$1 = r.next()) {
                s$1 = i$1$1.value;

                try {
                  o = s$1.key, a = s$1.value, u = JSON.stringify(this._encryption.encrypt(a)), o === N$1.key || u.length < this.itemSizeLimit ? (n.push([this._getActualKey(o), u]), t.push(a)) : t.push(Vt$1.storeItemSizeExceeded);
                } catch (e) {
                  t.push(Vt$1.collectionWriteFailed);
                }
              }
            } catch (e) {
              c = {
                error: e
              };
            } finally {
              try {
                i$1$1 && !i$1$1.done && (l = r.return) && l.call(r);
              } finally {
                if (c) throw c.error;
              }
            }

            h.label = 1;

          case 1:
            return h.trys.push([1, 3,, 4]), [4, this._asyncStorage.multiSet(n)];

          case 2:
            return h.sent(), [3, 4];

          case 3:
            return h.sent(), [2, new Array(t.length).fill(Vt$1.collectionWriteFailed)];

          case 4:
            return [2, t];
        }
      });
    });
  }, e.prototype.remove = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._asyncStorage.removeItem(this._getActualKey(e))];

          case 1:
            return t.sent(), [2, e];
        }
      });
    });
  }, e.prototype.removeMany = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t = this;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, this._asyncStorage.multiRemove(e.map(function (e) {
              return t._getActualKey(e);
            }))];

          case 1:
            return n.sent(), [2, e];
        }
      });
    });
  }, e.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this.getAllKeys()];

          case 1:
            return e = t.sent(), [4, this.removeMany(e)];

          case 2:
            return t.sent(), [4, this.remove(N$1.key)];

          case 3:
            return t.sent(), [2];
        }
      });
    });
  }, e;
}(),
    Mn$1 = !0,
    Un$2 = function () {
  function e() {}

  return e.off = function () {
    Mn$1 = !1;
  }, e.log = function () {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

    Mn$1 && console.log.apply(console, a(["".concat("[NESTDB]", "[LOG]")], o(e), !1));
  }, e.warning = function () {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

    Mn$1 && console.warn.apply(console, a(["".concat("[NESTDB]", "[WARNING]")], o(e), !1));
  }, e.error = function () {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

    Mn$1 && console.error.apply(console, a(["".concat("[NESTDB]", "[ERROR]")], o(e), !1));
  }, e;
}();

!function (e) {
  e.INIT = "INIT", e.OPENING = "OPENING", e.OPENED = "OPENED", e.CLOSED = "CLOSED";
}(Tn$2 || (Tn$2 = {}));

var qn$1 = function () {
  function e(e) {
    var t = e.name,
        n = e.version,
        r = e.store,
        i = e.config;
    this.name = t, this._version = n, this._state = Tn$2.INIT, this._config = i || new jt$1({
      dbname: t
    }), this._store = r, this._event = {
      success: Xt$1,
      error: Xt$1,
      upgrade: en$2
    }, this._collections = new Map(), this._globalMutex = new Cn$2("".concat(this.name, ".lock")), this._config.disableLogger && Un$2.off(), new mn$2({
      dbname: t,
      limit: this._config.cacheLimit
    });
  }

  return Object.defineProperty(e.prototype, "version", {
    get: function () {
      return this._version;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "state", {
    get: function () {
      return this._state;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.commitSchema = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t = this;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return this._state !== Tn$2.OPENING ? [3, 2] : [4, Promise.all(e.map(function (e) {
              return r$1(t, void 0, void 0, function () {
                var t, n, r, i$1$1;
                return i$1(this, function (s) {
                  switch (s.label) {
                    case 0:
                      return t = e.collectionName, n = e.keyName, r = e.index, i$1$1 = void 0 === r ? [] : r, this._collections.has(t) || this._collections.set(t, new Rn$1({
                        dbname: this.name,
                        collectionName: t,
                        keyName: n,
                        keyHash: e.keyHash || null,
                        indexes: i$1$1,
                        store: this._store
                      })), [4, this._collections.get(t).init()];

                    case 1:
                      return s.sent(), [2];
                  }
                });
              });
            }))];

          case 1:
            return n.sent(), [3, 3];

          case 2:
            throw Vt$1.databaseSchemaNotOnUpgrade;

          case 3:
            return [2];
        }
      });
    });
  }, e.prototype.open = function () {
    var e;
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r$1$1,
          i$1$1,
          s = this;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return [4, this._globalMutex.lock()];

          case 1:
            if (o.sent(), this._state === Tn$2.OPENED) return [3, 15];
            this._state = Tn$2.OPENING, o.label = 2;

          case 2:
            return o.trys.push([2, 5,, 15]), [4, this._store.init(this.name)];

          case 3:
            return o.sent(), a = this.name, t = "".concat(un$2(a), ".metadata"), n = {
              version: 0,
              collectionNames: []
            }, [4, this._store.get(t)];

          case 4:
            return r$1$1 = null !== (e = o.sent()) && void 0 !== e ? e : n, [2, new Promise(function (e, n) {
              var i$1$1 = function (e) {
                r$1$1.version < s._version ? s._event.upgrade(r$1$1.version, function (n) {
                  return r$1(s, void 0, void 0, function () {
                    var i$1$1;
                    return i$1(this, function (s) {
                      switch (s.label) {
                        case 0:
                          if (n) return [3, 5];
                          r$1$1.version++, r$1$1.collectionNames = Array.from(this._collections.keys()), s.label = 1;

                        case 1:
                          return s.trys.push([1, 3,, 4]), [4, this._store.set({
                            key: t,
                            value: r$1$1,
                            generation: this._version
                          })];

                        case 2:
                          return s.sent(), e({
                            continued: !0
                          }), [3, 4];

                        case 3:
                          return i$1$1 = s.sent(), e({
                            continued: !1,
                            err: i$1$1
                          }), [3, 4];

                        case 4:
                          return [3, 6];

                        case 5:
                          e({
                            continued: !1,
                            err: n
                          }), s.label = 6;

                        case 6:
                          return [2];
                      }
                    });
                  });
                }) : e({
                  continued: !1
                });
              },
                  o = function (t) {
                var a = t.continued,
                    c = void 0 !== a && a,
                    l = t.err,
                    d = void 0 === l ? null : l;
                if (c) setTimeout(function () {
                  return i$1$1(o);
                }, 10);else if (d) Un$2.error(d.message), s._globalMutex.unlock(), s._event.error(d), n(d);else {
                  var f = [];
                  r$1$1.collectionNames.forEach(function (e) {
                    s._collections.has(e) || f.push(r$1(s, void 0, void 0, function () {
                      var t, n;
                      return i$1(this, function (r) {
                        switch (r.label) {
                          case 0:
                            return [4, Rn$1.metadataOf(this.name, e, this._store)];

                          case 1:
                            return (t = r.sent()) ? (n = new Rn$1({
                              dbname: this.name,
                              collectionName: e,
                              keyName: t.keyName,
                              indexes: t.indexes,
                              store: this._store
                            }), this._collections.set(e, n), [4, n.init()]) : [3, 3];

                          case 2:
                            r.sent(), r.label = 3;

                          case 3:
                            return [2];
                        }
                      });
                    }));
                  }), Promise.all(f).then(function () {
                    s._state = Tn$2.OPENED, s._globalMutex.unlock(), s._event.success(), e();
                  }).catch(function (e) {
                    Un$2.error(e.message), s._globalMutex.unlock(), s._event.error(e), n(e);
                  });
                }
              };

              i$1$1(o);
            })];

          case 5:
            switch (i$1$1 = o.sent(), i$1$1.code) {
              case wt$1.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:
                return [3, 6];

              case wt$1.STORE_NOT_AVAILABLE:
                return [3, 8];

              case wt$1.STORE_ENCRYPTION_INVALID:
                return [3, 10];
            }

            return [3, 13];

          case 6:
            return Un$2.warning("Access to the local storage is not allowed in private browsing. Switched to MemoryStore automatically."), this._store = new Pn$1({}), this._globalMutex.unlock(), this._event.error(i$1$1), [4, this.open()];

          case 7:
            return o.sent(), [3, 14];

          case 8:
            return Un$2.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."), this._store = new Pn$1({}), this._globalMutex.unlock(), this._event.error(i$1$1), [4, this.open()];

          case 9:
            return o.sent(), [3, 14];

          case 10:
            return Un$2.warning("Encryption algorithm has changed. Stored data would be cleared."), [4, this._store.clear()];

          case 11:
            return o.sent(), this._globalMutex.unlock(), this._event.error(i$1$1), [4, this.open()];

          case 12:
            return o.sent(), [3, 14];

          case 13:
            throw Un$2.error(i$1$1.message), this._globalMutex.unlock(), this._event.error(i$1$1), i$1$1;

          case 14:
            return [3, 15];

          case 15:
            return [2];
        }

        var a;
      });
    });
  }, e.prototype.close = function () {
    this._collections.forEach(function (e) {
      return e.close();
    }), this._state = Tn$2.CLOSED;
  }, e.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, Promise.all(Array.from(this._collections.values()).map(function (e) {
              return e.clear();
            }))];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, e.prototype.reset = function () {
    return r$1(this, void 0, void 0, function () {
      var e,
          t = this;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return this.close(), (e = mn$2.get(this.name)) && e.clearByCondition(function (e) {
              return e.key.startsWith(un$2(t.name));
            }), [4, this._store.clear()];

          case 1:
            return n.sent(), [2];
        }
      });
    });
  }, e.prototype.on = function (e, t) {
    this._event[e] = t;
  }, e.prototype.off = function (e) {
    if ("function" == typeof this._event[e]) if ("upgrade" === e) this._event[e] = en$2;else this._event[e] = Xt$1;
  }, e.prototype.collection = function (e) {
    return this._collections.get(e) || null;
  }, e;
}(),
    Bn$1 = null,
    Fn$1 = function () {
  function n$1$1(e, t, n) {
    var r$1$1 = this;
    this._fcmPushToken = null, this._apnsPushToken = null, this._iid = e, this.options = t;
    var i$1$1 = St$1$1.of(e),
        s = i$1$1.sdkState,
        o = i$1$1.cacheContext,
        a = i$1$1.dispatcher,
        c = i$1$1.sessionManager,
        l = i$1$1.requestQueue,
        d = i$1$1.logger,
        f = i$1$1.userEventHandlers;
    this._onlineDetector = new Me({
      logger: d,
      connectionDelegate: {
        reconnect: function () {
          var t = St$1$1.of(e),
              n = t.sdkState,
              r = t.connectionManager;
          "foreground" === n.appState && r.resetAndReconnect();
        },
        disconnect: function () {
          St$1$1.of(e).connectionManager.disconnect();
        }
      }
    }), new pe(e, {
      localCacheEnabled: o.localCacheEnabled,
      dispatcher: a,
      sdkState: s,
      logger: d
    }), n.forEach(function (t) {
      t.init(e, {
        sdkState: s,
        cacheContext: o,
        dispatcher: a,
        sessionManager: c,
        requestQueue: l,
        logger: d,
        onlineDetector: r$1$1._onlineDetector
      }), r$1$1[t.name] = t;
    }), this._appStateChangeDetector = new De(), this._appStateChangeDetector.on("resume", function () {
      d.debug("the page resumes from freeze"), r$1$1.setForegroundState();
    }).on("pause", function () {
      d.debug("the page freezes"), r$1$1.setBackgroundState();
    }), a.on(function (t) {
      if (t instanceof B$2) {
        if ("USEV" === t.code) {
          var n = t.as(be).event;

          if (n.category === te.FRIEND_DISCOVERED) {
            var i$1$1 = me.getDataAsFriendDiscoveredEvent(e, n).friendDiscoveries;
            Ie$1(function () {
              return r$1(r$1$1, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return [2, f.forEach(function (e) {
                    e.onFriendsDiscovered(i$1$1);
                  })];
                });
              });
            });
          }
        }
      } else if (t instanceof $$1) {
        var a = St$1$1.of(r$1$1._iid).subscribedUnreadMessageCount,
            c = !1,
            l = t.ts;

        if ("number" == typeof l && l > a.ts) {
          if (a.all !== t.all && (c = !0), a.all = t.all >= 0 ? t.all : 0, t.customTypes) for (var d in t.customTypes) a.customTypes[d] !== t.customTypes[d] && (c = !0), a.customTypes[d] = t.customTypes[d];
          c = c && a.ts > 0, a.ts = l;
        }

        c && Ie$1(function () {
          return r$1(r$1$1, void 0, void 0, function () {
            return i$1(this, function (e) {
              return [2, f.forEach(function (e) {
                e.onTotalUnreadMessageCountUpdated(a.all, a.customTypes);
              })];
            });
          });
        });
      } else t instanceof lt$1 && o.localCacheEnabled && o.preference.set(r$1$1._getUserProfileCacheKey(s.userId), dt$1.payloadify(t.userProfile));
    });
  }

  return n$1$1.init = function (e) {
    var t = e.appId,
        r = e.appVersion,
        i = void 0 === r ? null : r,
        s = e.modules,
        o$1 = void 0 === s ? [] : s,
        a$1 = e.options,
        u = void 0 === a$1 ? new b() : a$1,
        c = e.debugMode,
        l = void 0 !== c && c,
        h = e.customApiHost,
        d = e.customWebSocketHost,
        f = e.newInstance,
        p = void 0 !== f && f,
        v = e.logLevel,
        _ = e.localCacheEnabled,
        m = void 0 !== _ && _,
        y = e.localCacheEncryption,
        b$1 = e.useAsyncStorageStore,
        g = void 0 === b$1 ? null : b$1;

    if (!Bn$1 || p) {
      var I = "su-".concat(R$2()),
          w = null != y ? y : {
        encrypt: function (e) {
          return e;
        },
        decrypt: function (e) {
          return e;
        }
      },
          E = new Pn$1({
        encryption: w
      });
      l || (E = g ? new Dn$1({
        AsyncStorage: g,
        encryption: w
      }) : new An$1({
        encryption: w
      })), new St$1$1(I, {
        appId: t,
        appVersion: i,
        options: u,
        apiHost: null != h ? h : "https://api-".concat(t, ".sendbird.com"),
        websocketHost: null != d ? d : "wss://ws-".concat(t, ".sendbird.com"),
        store: E,
        encryption: w,
        logLevel: v,
        localCacheEnabled: m,
        debugMode: l
      });
      var k = new n$1$1(I, u, a(a([], o(o$1), !1), [new Dn$2()], !1));
      return Bn$1 || (Bn$1 = k), k;
    }

    return Bn$1;
  }, Object.defineProperty(n$1$1, "instance", {
    get: function () {
      return Bn$1;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1, "version", {
    get: function () {
      return c$1;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "appId", {
    get: function () {
      return St$1$1.of(this._iid).sdkState.appId;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "appInfo", {
    get: function () {
      return St$1$1.of(this._iid).appInfo;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "appVersion", {
    get: function () {
      var e;
      return null !== (e = St$1$1.of(this._iid).sdkState.appVersion) && void 0 !== e ? e : "";
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "debugMode", {
    get: function () {
      return St$1$1.of(this._iid).debugMode;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "logLevel", {
    get: function () {
      return St$1$1.of(this._iid).logger.level;
    },
    set: function (e) {
      St$1$1.of(this._iid).logger.level = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "isCacheEnabled", {
    get: function () {
      return St$1$1.of(this._iid).cacheContext.localCacheEnabled;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "ekey", {
    get: function () {
      return Me$1(this._iid);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "currentUser", {
    get: function () {
      var e;
      return null !== (e = St$1$1.of(this._iid).sessionManager.currentUser) && void 0 !== e ? e : null;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "connectionState", {
    get: function () {
      var e = St$1$1.of(this._iid).connectionManager;
      return e.isConnected ? j$1.OPEN : e.isConnecting ? j$1.CONNECTING : j$1.CLOSED;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "lastConnectedAt", {
    get: function () {
      var e = St$1$1.of(this._iid),
          t = e.connectedAt;
      return e.connectionManager.isConnected ? t : 0;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "fcmPushToken", {
    get: function () {
      return this._fcmPushToken;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "apnsPushToken", {
    get: function () {
      return this._apnsPushToken;
    },
    enumerable: !1,
    configurable: !0
  }), n$1$1.prototype._getPreferenceCacheKey = function (e) {
    return "sendbird@".concat(this.appId, "/").concat(e, ".pref");
  }, n$1$1.prototype._getUserProfileCacheKey = function (e) {
    return "sendbird@".concat(this.appId, "/").concat(e, ".profile");
  }, n$1$1.prototype.getMemoryStoreForDebugging = function () {
    var e = St$1$1.of(this._iid),
        t = e.debugMode,
        n = e.cacheContext;
    if (t) return n.store instanceof Pn$1 ? n.store : null;
    throw p$1.debugModeRequired;
  }, n$1$1.prototype.addExtension = function (e, t) {
    var n = St$1$1.of(this._iid).sdkState;
    ["sb_uikit", "sb_syncmanager"].indexOf(e) > -1 && (n.extensions[e] = t);
  }, n$1$1.prototype.initializeCache = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s, o, a, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return t = St$1$1.of(this._iid), n = t.sdkState, r = t.cacheContext, i$1$1 = t.connectionManager, s = t.dispatcher, n.userId && n.userId === e ? [3, 6] : [4, i$1$1.logout()];

          case 1:
            return c.sent(), n.userId = e, r.localCacheEnabled ? (o = "sendbird@".concat(n.appId, "/").concat(e, ".db"), r.nestdb && r.nestdb.state !== Tn$2.CLOSED && r.nestdb.name === o ? [3, 3] : ((a = r.nestdb = new qn$1({
              name: "sendbird@".concat(n.appId, "/").concat(e, ".db"),
              version: 1,
              store: r.store
            })).on("upgrade", function (e) {
              return function (t, n) {
                0 === t ? e.commitSchema([{
                  collectionName: W$1,
                  keyName: V$1,
                  index: [$(K$1.LATEST_LAST_MESSAGE), $(K$1.CHRONOLOGICAL), $(K$1.CHANNEL_NAME_ALPHABETICAL)]
                }, {
                  collectionName: J$1,
                  keyName: X$1,
                  index: [se(Z$1.CHANNEL_LATEST), se(Z$1.NEWEST_CHILD_MESSAGE)]
                }, {
                  collectionName: ce,
                  keyName: oe,
                  index: [se(Z$1.CHANNEL_LATEST), se(Z$1.NEWEST_CHILD_MESSAGE)]
                }, {
                  collectionName: "Poll",
                  keyName: "pollId"
                }]).then(function () {
                  return n();
                }).catch(function (e) {
                  return n(e);
                }) : n();
              };
            }(a)), [4, a.open()])) : [3, 6];

          case 2:
            c.sent(), s.dispatch(new ve(this._iid, {
              userId: e
            })), c.label = 3;

          case 3:
            return [4, r.preference.init(this._getPreferenceCacheKey(e))];

          case 4:
            return c.sent(), [4, r.preference.get(this._getUserProfileCacheKey(e))];

          case 5:
            (u = c.sent()) && new dt$1(this._iid, u).apply(), c.label = 6;

          case 6:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.clearCachedData = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return (e = St$1$1.of(this._iid).cacheContext).localCacheEnabled ? (e.nestdb && e.nestdb.clear(), [4, e.preference.clear()]) : [3, 2];

          case 1:
            t.sent(), t.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.clearCachedMessages = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r$1$1 = this;
      return i$1(this, function (i$1$1) {
        switch (i$1$1.label) {
          case 0:
            return at$1(E$1("string", e)).throw(p$1.invalidParameters), t = he.of(this._iid), n = ue.of(this._iid), t && n ? [4, Promise.all(e.map(function (e) {
              return r$1(r$1$1, void 0, void 0, function () {
                return i$1(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return [4, t.removeMessagesOfChannel(e)];

                    case 1:
                      return r.sent(), [4, n.removeMessagesOfChannel(e)];

                    case 2:
                      return r.sent(), [2];
                  }
                });
              });
            }))] : [3, 2];

          case 1:
            i$1$1.sent(), i$1$1.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.connect = function (e, t) {
    return void 0 === t && (t = null), r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s, o, a, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            n = St$1$1.of(this._iid), r = n.sdkState, i$1$1 = n.cacheContext, s = n.connectionManager, o = n.statLogCollector, c.label = 1;

          case 1:
            return c.trys.push([1, 3,, 4]), [4, this.initializeCache(e)];

          case 2:
            return c.sent(), [3, 4];

          case 3:
            return c.sent(), a = St$1$1.of(this._iid).logger, i$1$1.localCacheEnabled = !1, a.warn("Cache initialization failed - cache is not available."), [3, 4];

          case 4:
            return [4, o.init("sendbird@".concat(r.appId, "/").concat(e, ".statlog"))];

          case 5:
            return c.sent(), [4, s.connect(t)];

          case 6:
            return c.sent(), this._appStateChangeDetector.start(), r.appState = "foreground", [4, null == (u = pe.of(this._iid)) ? void 0 : u.processNonAutoResendRegisteredPendingMessages()];

          case 7:
            return c.sent(), this._onlineDetector.start(), [2, this.currentUser];
        }
      });
    });
  }, n$1$1.prototype.reconnect = function () {
    var e = St$1$1.of(this._iid),
        t = e.connectionManager,
        n = e.sdkState,
        r = e.sessionManager.auth.hasSession;
    return r && t.resetAndReconnect().then(function () {
      n.appState = "foreground";
    }).catch(function () {}), r;
  }, n$1$1.prototype.disconnect = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.connectionManager, n = e.cacheContext, r = e.requestQueue, this._appStateChangeDetector.stop(), this._onlineDetector.stop(), r.cancelAll(), [4, t.logout()];

          case 1:
            return i.sent(), n.localCacheEnabled ? [4, this.clearCachedData()] : [3, 3];

          case 2:
            i.sent(), i.label = 3;

          case 3:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.setBackgroundState = function () {
    var e = St$1$1.of(this._iid),
        t = e.connectionManager,
        n = e.sdkState,
        r = e.logger;
    "foreground" === n.appState && (n.appState = "background", r.debug("going background state"), t.background());
  }, n$1$1.prototype.setForegroundState = function () {
    var e = St$1$1.of(this._iid),
        t = e.connectionManager,
        n = e.sdkState,
        r = e.logger;
    "background" === n.appState && (n.appState = "foreground", r.debug("going foreground state"), t.resetAndReconnect());
  }, n$1$1.prototype.setSessionHandler = function (e) {
    at$1(e instanceof Le).throw(p$1.invalidParameters), St$1$1.of(this._iid).sessionManager.handler = e;
  }, n$1$1.prototype.addUserEventHandler = function (e, n) {
    at$1(y("string", e) && n instanceof Ae).throw(p$1.invalidParameters), St$1$1.of(this._iid).userEventHandlers.set(e, n);
  }, n$1$1.prototype.removeUserEventHandler = function (e) {
    St$1$1.of(this._iid).userEventHandlers.delete(e);
  }, n$1$1.prototype.removeAllUserEventHandler = function () {
    St$1$1.of(this._iid).userEventHandlers.clear();
  }, n$1$1.prototype.addConnectionHandler = function (e, n) {
    at$1(y("string", e) && n instanceof Pe).throw(p$1.invalidParameters), St$1$1.of(this._iid).connectionHandlers.set(e, n);
  }, n$1$1.prototype.removeConnectionHandler = function (e) {
    St$1$1.of(this._iid).connectionHandlers.delete(e);
  }, n$1$1.prototype.removeAllConnectionHandler = function () {
    St$1$1.of(this._iid).connectionHandlers.clear();
  }, n$1$1.prototype.createApplicationUserListQuery = function (e) {
    return void 0 === e && (e = {}), new At$1(this._iid, e);
  }, n$1$1.prototype.createBlockedUserListQuery = function (e) {
    return void 0 === e && (e = {}), new Ut$1(this._iid, e);
  }, n$1$1.prototype.createFriendListQuery = function (e) {
    return void 0 === e && (e = {}), new Ft$1(this._iid, e);
  }, n$1$1.prototype.createMessageSearchQuery = function (e) {
    return new Cn$3(this._iid, e);
  }, n$1$1.prototype.buildUserFromSerializedData = function (e) {
    var t = ot$1(e);
    return new ct$1(this._iid, ct$1.payloadify(t));
  }, n$1$1.prototype.updateCurrentUserInfo = function (n$1$1) {
    return void 0 === n$1$1 && (n$1$1 = {}), r$1(this, void 0, void 0, function () {
      var r, i$1$1, s, o, a, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return n$1$1 = n$1(n$1({}, Re), n$1$1), at$1(function (n) {
              return S$1(n.profileImage, !0) && y("string", n.profileUrl, !0) && y("string", n.nickname, !0);
            }(n$1$1)).throw(p$1.invalidParameters), this.currentUser ? (r = St$1$1.of(this._iid), i$1$1 = r.sdkState, s = r.requestQueue, o = new Ue(n$1({
              userId: i$1$1.userId
            }, n$1$1)), [4, s.send(o)]) : [3, 2];

          case 1:
            return a = c.sent(), u = a.as(qe).user, this.currentUser && (n$1$1.nickname && (this.currentUser.nickname = u.nickname), (n$1$1.profileUrl || n$1$1.profileImage) && (this.currentUser.plainProfileUrl = u.profileUrl)), [2, u];

          case 2:
            throw p$1.connectionRequired;
        }
      });
    });
  }, n$1$1.prototype.updateCurrentUserInfoWithPreferredLanguages = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s, o;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return at$1(E$1("string", e)).throw(p$1.invalidParameters), this.currentUser ? (t = St$1$1.of(this._iid), n = t.sdkState, r = t.requestQueue, i$1$1 = new Ue({
              userId: n.userId,
              preferredLanguages: e
            }), [4, r.send(i$1$1)]) : [3, 2];

          case 1:
            return s = a.sent(), o = s.as(qe).user, this.currentUser && (this.currentUser.preferredLanguages = o.preferredLanguages), [2, o];

          case 2:
            throw p$1.connectionRequired;
        }
      });
    });
  }, n$1$1.prototype.registerFCMPushTokenForCurrentUser = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            if (at$1(y("string", e)).throw(p$1.invalidParameters), !this.currentUser) return [3, 5];
            o.label = 1;

          case 1:
            return o.trys.push([1, 3,, 4]), n = St$1$1.of(this._iid), r = n.sdkState, i$1$1 = n.requestQueue, s = new Fe({
              userId: r.userId,
              token: e
            }), [4, i$1$1.send(s)];

          case 2:
            return o.sent(), this._fcmPushToken = "", [2, B$1.SUCCESS];

          case 3:
            return o.sent(), [2, B$1.ERROR];

          case 4:
            return [3, 6];

          case 5:
            return this._fcmPushToken = e, [2, B$1.PENDING];

          case 6:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.unregisterFCMPushTokenForCurrentUser = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            if (at$1(y("string", e)).throw(p$1.invalidParameters), !this.currentUser) return [3, 5];
            o.label = 1;

          case 1:
            return o.trys.push([1, 3,, 4]), n = St$1$1.of(this._iid), r = n.sdkState, i$1$1 = n.requestQueue, s = new je({
              userId: r.userId,
              token: e
            }), [4, i$1$1.send(s)];

          case 2:
            return o.sent(), this._fcmPushToken = "", [2, B$1.SUCCESS];

          case 3:
            return o.sent(), [2, B$1.ERROR];

          case 4:
            return [3, 6];

          case 5:
            return this._fcmPushToken = e, [2, B$1.PENDING];

          case 6:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.unregisterFCMPushTokenAllForCurrentUser = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return this.currentUser ? (e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new Ve({
              userId: t.userId
            }), [4, n.send(r)]) : [3, 2];

          case 1:
            i.sent(), i.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.registerAPNSPushTokenForCurrentUser = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            if (at$1(y("string", e)).throw(p$1.invalidParameters), !this.currentUser) return [3, 5];
            o.label = 1;

          case 1:
            return o.trys.push([1, 3,, 4]), n = St$1$1.of(this._iid), r = n.sdkState, i$1$1 = n.requestQueue, s = new Be({
              userId: r.userId,
              token: e
            }), [4, i$1$1.send(s)];

          case 2:
            return o.sent(), this._fcmPushToken = "", [2, B$1.SUCCESS];

          case 3:
            return o.sent(), [2, B$1.ERROR];

          case 4:
            return [3, 6];

          case 5:
            return this._fcmPushToken = e, [2, B$1.PENDING];

          case 6:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.unregisterAPNSPushTokenForCurrentUser = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            if (at$1(y("string", e)).throw(p$1.invalidParameters), !this.currentUser) return [3, 5];
            o.label = 1;

          case 1:
            return o.trys.push([1, 3,, 4]), n = St$1$1.of(this._iid), r = n.sdkState, i$1$1 = n.requestQueue, s = new Ke({
              userId: r.userId,
              token: e
            }), [4, i$1$1.send(s)];

          case 2:
            return o.sent(), this._fcmPushToken = "", [2, B$1.SUCCESS];

          case 3:
            return o.sent(), [2, B$1.ERROR];

          case 4:
            return [3, 6];

          case 5:
            return this._fcmPushToken = e, [2, B$1.PENDING];

          case 6:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.unregisterAPNSPushTokenAllForCurrentUser = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return this.currentUser ? (e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new He({
              userId: t.userId
            }), [4, n.send(r)]) : [3, 2];

          case 1:
            i.sent(), i.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.getChannelInvitationPreference = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new Qe({
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return i$1$1 = s.sent(), [2, {
              autoAccept: i$1$1.as(Ge).autoAccept
            }];
        }
      });
    });
  }, n$1$1.prototype.setChannelInvitationPreference = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s, o;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return at$1(y("boolean", e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid), r = n.sdkState, i$1$1 = n.requestQueue, s = new Ye({
              userId: r.userId,
              willAutoAccept: e
            }), [4, i$1$1.send(s)];

          case 1:
            return o = a.sent(), [2, {
              autoAccept: o.as(Je).autoAccept
            }];
        }
      });
    });
  }, n$1$1.prototype.getDoNotDisturb = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new Xe({
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return i$1$1 = s.sent(), [2, i$1$1.as(Ze).preference];
        }
      });
    });
  }, n$1$1.prototype.setDoNotDisturb = function (e, n, r$1$1, i$1$1, s, o) {
    return void 0 === n && (n = 0), void 0 === r$1$1 && (r$1$1 = 0), void 0 === i$1$1 && (i$1$1 = 0), void 0 === s && (s = 0), void 0 === o && (o = ""), r$1(this, void 0, void 0, function () {
      var a, u, c, l, d;
      return i$1(this, function (h) {
        switch (h.label) {
          case 0:
            return at$1(y("boolean", e) && y("number", n) && y("number", r$1$1) && y("number", i$1$1) && y("number", s) && y("string", o)).throw(p$1.invalidParameters), a = St$1$1.of(this._iid), u = a.sdkState, c = a.requestQueue, l = new $e({
              userId: u.userId,
              doNotDisturbOn: e,
              startHour: n,
              startMin: r$1$1,
              endHour: i$1$1,
              endMin: s,
              timezone: o
            }), [4, c.send(l)];

          case 1:
            return d = h.sent(), [2, d.as(et).preference];
        }
      });
    });
  }, n$1$1.prototype.getSnoozePeriod = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new tt({
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return i$1$1 = s.sent(), [2, i$1$1.as(nt).snoozePeriod];
        }
      });
    });
  }, n$1$1.prototype.setSnoozePeriod = function (e, n, r$1$1) {
    return void 0 === n && (n = 0), void 0 === r$1$1 && (r$1$1 = 0), r$1(this, void 0, void 0, function () {
      var i$1$1, s, o, a, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return at$1(y("boolean", e) && y("number", n) && y("number", r$1$1)).throw(p$1.invalidParameters), i$1$1 = St$1$1.of(this._iid), s = i$1$1.sdkState, o = i$1$1.requestQueue, a = new rt({
              userId: s.userId,
              snoozeOn: e,
              startTs: n,
              endTs: r$1$1
            }), [4, o.send(a)];

          case 1:
            return u = c.sent(), [2, u.as(it).snoozePeriod];
        }
      });
    });
  }, n$1$1.prototype.getMyPushTokensByToken = function (e, n) {
    return r$1(this, void 0, void 0, function () {
      var r, i$1$1, s, o, a;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return at$1(y("string", e) && m(z$1, n)).throw(p$1.invalidParameters), r = St$1$1.of(this._iid), i$1$1 = r.sdkState, s = r.requestQueue, o = new We({
              userId: i$1$1.userId,
              type: n,
              token: e
            }), [4, s.send(o)];

          case 1:
            return a = u.sent(), [2, a.as(ze).pushTokens];
        }
      });
    });
  }, n$1$1.prototype.getPushTriggerOption = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new _e({
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return [2, i.sent().as(Ee).pushTriggerOption];
        }
      });
    });
  }, n$1$1.prototype.setPushTriggerOption = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return at$1(m(H$1, e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n = t.sdkState, r = t.requestQueue, i$1$1 = new Ae$1({
              userId: n.userId,
              pushTriggerOption: e
            }), [4, r.send(i$1$1)];

          case 1:
            return [2, s.sent().as(ye).pushTriggerOption];
        }
      });
    });
  }, n$1$1.prototype.getPushTemplate = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new at({
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return [2, i.sent().as(ut).name];
        }
      });
    });
  }, n$1$1.prototype.setPushTemplate = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return at$1(m(q$1, e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n = t.sdkState, r = t.requestQueue, i$1$1 = new ct({
              userId: n.userId,
              templateName: e
            }), [4, r.send(i$1$1)];

          case 1:
            return [2, s.sent().as(lt).name];
        }
      });
    });
  }, n$1$1.prototype.blockUser = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return at$1(e instanceof ct$1 || y("string", e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid), r = n.sdkState, i$1$1 = n.requestQueue, s = new st({
              userId: r.userId,
              blockedUserId: e instanceof ct$1 ? e.userId : e
            }), [4, i$1$1.send(s)];

          case 1:
            return o.sent(), [2];
        }
      });
    });
  }, n$1$1.prototype.blockUserWithUserId = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return [2, this.blockUser(e)];
      });
    });
  }, n$1$1.prototype.unblockUser = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return at$1(e instanceof ct$1 || y("string", e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid), r = n.sdkState, i$1$1 = n.requestQueue, s = new ot({
              userId: r.userId,
              unblockedUserId: e instanceof ct$1 ? e.userId : e
            }), [4, i$1$1.send(s)];

          case 1:
            return o.sent(), [2];
        }
      });
    });
  }, n$1$1.prototype.unblockUserWithUserId = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return [2, this.unblockUser(e)];
      });
    });
  }, n$1$1.prototype.getFriendChangeLogsByToken = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s, o;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return at$1(y("string", e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid), r = n.sdkState, i$1$1 = n.requestQueue, s = new ht({
              userId: r.userId,
              token: e
            }), [4, i$1$1.send(s)];

          case 1:
            return o = a.sent(), [2, o.as(dt).changelogs];
        }
      });
    });
  }, n$1$1.prototype.getAllowFriendDiscovery = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, i$1$1;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new bt$1({
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return i$1$1 = s.sent(), [2, i$1$1.as(gt).allowFriendDiscovery];
        }
      });
    });
  }, n$1$1.prototype.setAllowFriendDiscovery = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return at$1(y("boolean", e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid), r = n.sdkState, i$1$1 = n.requestQueue, s = new It$1({
              userId: r.userId,
              allowFriendDiscovery: e
            }), [4, i$1$1.send(s)];

          case 1:
            return o.sent(), [2, e];
        }
      });
    });
  }, n$1$1.prototype.uploadFriendDiscoveries = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return t = St$1$1.of(this._iid), n = t.sdkState, r = t.requestQueue, i$1$1 = new ft({
              userId: n.userId,
              discoveries: e
            }), [4, r.send(i$1$1)];

          case 1:
            return s = o.sent(), [2, s.as(pt).friendDiscoveryRequestId];
        }
      });
    });
  }, n$1$1.prototype.deleteFriendDiscovery = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return [2, this.deleteFriendDiscoveries([e])];
      });
    });
  }, n$1$1.prototype.deleteFriendDiscoveries = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return at$1(E$1("string", e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n = t.sdkState, r = t.requestQueue, i$1$1 = new vt({
              userId: n.userId,
              discoveryKeys: e
            }), [4, r.send(i$1$1)];

          case 1:
            return s.sent(), [2];
        }
      });
    });
  }, n$1$1.prototype.addFriends = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1, s;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return at$1(E$1("string", e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n = t.sdkState, r = t.requestQueue, i$1$1 = new _t({
              userId: n.userId,
              userIds: e
            }), [4, r.send(i$1$1)];

          case 1:
            return s = o.sent(), [2, s.as(mt).users];
        }
      });
    });
  }, n$1$1.prototype.deleteFriend = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return [2, this.deleteFriends([e])];
      });
    });
  }, n$1$1.prototype.deleteFriends = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, i$1$1;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return at$1(E$1("string", e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n = t.sdkState, r = t.requestQueue, i$1$1 = new yt$1({
              userId: n.userId,
              userIds: e
            }), [4, r.send(i$1$1)];

          case 1:
            return s.sent(), [2];
        }
      });
    });
  }, n$1$1.prototype.getAllEmoji = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return e = St$1$1.of(this._iid).requestQueue, t = new Ot$1(), [4, e.send(t)];

          case 1:
            return n = r.sent(), [2, n.as(St$1).emojiContainer];
        }
      });
    });
  }, n$1$1.prototype.getEmojiCategory = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = St$1$1.of(this._iid).requestQueue, n = new Tt$1({
              categoryId: e
            }), [4, t.send(n)];

          case 1:
            return r = i.sent(), [2, r.as(xt$1).emojiCategory];
        }
      });
    });
  }, n$1$1.prototype.getEmoji = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = St$1$1.of(this._iid).requestQueue, n = new Ct$1({
              key: e
            }), [4, t.send(n)];

          case 1:
            return r = i.sent(), [2, r.as(Rt$1).emoji];
        }
      });
    });
  }, n$1$1;
}();

var _;

!function (e) {
  e[e.NONE = 0] = "NONE", e[e.CHANNEL_ENTER = 10102] = "CHANNEL_ENTER", e[e.CHANNEL_EXIT = 10103] = "CHANNEL_EXIT", e[e.USER_CHANNEL_MUTE = 10201] = "USER_CHANNEL_MUTE", e[e.USER_CHANNEL_UNMUTE = 10200] = "USER_CHANNEL_UNMUTE", e[e.USER_CHANNEL_BAN = 10601] = "USER_CHANNEL_BAN", e[e.USER_CHANNEL_UNBAN = 10600] = "USER_CHANNEL_UNBAN", e[e.CHANNEL_FREEZE = 10701] = "CHANNEL_FREEZE", e[e.CHANNEL_UNFREEZE = 10700] = "CHANNEL_UNFREEZE", e[e.TYPING_START = 10900] = "TYPING_START", e[e.TYPING_END = 10901] = "TYPING_END", e[e.CHANNEL_JOIN = 1e4] = "CHANNEL_JOIN", e[e.CHANNEL_LEAVE = 10001] = "CHANNEL_LEAVE", e[e.CHANNEL_OPERATOR_UPDATE = 10002] = "CHANNEL_OPERATOR_UPDATE", e[e.CHANNEL_INVITE = 10020] = "CHANNEL_INVITE", e[e.CHANNEL_ACCEPT_INVITE = 10021] = "CHANNEL_ACCEPT_INVITE", e[e.CHANNEL_DECLINE_INVITE = 10022] = "CHANNEL_DECLINE_INVITE", e[e.CHANNEL_PROP_CHANGED = 11e3] = "CHANNEL_PROP_CHANGED", e[e.CHANNEL_DELETED = 12e3] = "CHANNEL_DELETED", e[e.CHANNEL_META_DATA_CHANGED = 11100] = "CHANNEL_META_DATA_CHANGED", e[e.CHANNEL_META_COUNTERS_CHANGED = 11200] = "CHANNEL_META_COUNTERS_CHANGED", e[e.CHANNEL_HIDE = 13e3] = "CHANNEL_HIDE", e[e.CHANNEL_UNHIDE = 13001] = "CHANNEL_UNHIDE";
}(_ || (_ = {}));

var l$1 = function () {
  function n(e) {
    this.channelUrl = e.channel_url, this.channelType = e.channel_type, this.category = e.cat, this.data = e.data, this.ts = e.ts;
  }

  return Object.defineProperty(n.prototype, "isGroupChannelEvent", {
    get: function () {
      return this.channelType === ne$1.GROUP;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n.prototype, "isOpenChannelEvent", {
    get: function () {
      return this.channelType === ne$1.OPEN;
    },
    enumerable: !1,
    configurable: !0
  }), n;
}(),
    C = function (e) {
  function t$1(n, t, a) {
    var s = e.call(this, n, "SYEV", a) || this;
    return s.event = new l$1(a), s;
  }

  return t(t$1, e), t$1;
}(B$2),
    d = function (e) {
  function t$1(n, t, s) {
    var N = e.call(this, n, t, s) || this,
        o = s.data.operators,
        E = void 0 === o ? [] : o;
    return N.operators = E.map(function (e) {
      return new ct$1(N._iid, e);
    }), N;
  }

  return t(t$1, e), t$1;
}(C),
    h = function (e) {
  function t$1(n, t, a) {
    var s = e.call(this, n, "MCNT", a) || this;
    return s.groupChannelMemberCounts = a.group_channels.map(function (e) {
      return {
        channelUrl: e.channel_url,
        memberCount: e.member_count,
        joinedMemberCount: e.joined_member_count,
        updatedAt: e.ts
      };
    }), s.openChannelMemberCounts = a.open_channels.map(function (e) {
      return {
        channelUrl: e.channel_url,
        participantCount: e.participant_count,
        updatedAt: e.ts
      };
    }), s;
  }

  return t(t$1, e), t$1;
}(B$2),
    A = function (e) {
  function t$1(n, t, a) {
    var E,
        r,
        i,
        u = this;
    (u = e.call(this, n, "ADMM", a) || this).message = new Kt$2(n, a);
    var _ = St$1$1.of(n).sdkState;
    return u.isMentioned = Ye$1(u.message.mentionType, null !== (E = u.message.mentionedUserIds) && void 0 !== E ? E : null === (r = u.message.mentionedUsers) || void 0 === r ? void 0 : r.map(function (e) {
      return e.userId;
    }), _.userId), u.forceUpdateLastMessage = null !== (i = a.force_update_last_message) && void 0 !== i && i, u;
  }

  return t(t$1, e), t$1;
}(B$2),
    c = function (e) {
  function t$1(n, t, a) {
    var o,
        r,
        i,
        u,
        _,
        l,
        C = this;

    (C = e.call(this, n, "AEDI", a) || this).message = new Kt$2(n, a);
    var d = St$1$1.of(n).sdkState;
    return C.mentionCountChange = Je$1({
      mentionType: null !== (r = null === (o = a.old_values) || void 0 === o ? void 0 : o.mention_type) && void 0 !== r ? r : null,
      mentionedUserIds: null !== (u = null === (i = a.old_values) || void 0 === i ? void 0 : i.mentioned_user_ids) && void 0 !== u ? u : []
    }, {
      mentionType: C.message.mentionType,
      mentionedUserIds: null !== (_ = C.message.mentionedUserIds) && void 0 !== _ ? _ : null === (l = C.message.mentionedUsers) || void 0 === l ? void 0 : l.map(function (e) {
        return e.userId;
      })
    }, d.userId), C;
  }

  return t(t$1, e), t$1;
}(B$2),
    H = function (e) {
  function t$1(n, t, a) {
    var s = e.call(this, n, "MRCT", a) || this;
    return s.channelUrl = a.channel_url, s.channelType = a.channel_type, s.event = new wt$1$1(a), s;
  }

  return t(t$1, e), t$1;
}(B$2),
    T$1 = function (e) {
  function t$1(n, t, a) {
    var s = e.call(this, n, "MTHD", a) || this;
    return s.event = new Sn$2(n, a), s;
  }

  return t(t$1, e), t$1;
}(B$2),
    U$1 = function () {
  this.onUserMuted = Y$2, this.onUserUnmuted = Y$2, this.onUserBanned = Y$2, this.onUserUnbanned = Y$2, this.onChannelChanged = Y$2, this.onChannelDeleted = Y$2, this.onChannelFrozen = Y$2, this.onChannelUnfrozen = Y$2, this.onOperatorUpdated = Y$2, this.onChannelMemberCountChanged = Y$2, this.onMetaDataCreated = Y$2, this.onMetaDataUpdated = Y$2, this.onMetaDataDeleted = Y$2, this.onMetaCounterCreated = Y$2, this.onMetaCounterUpdated = Y$2, this.onMetaCounterDeleted = Y$2, this.onMessageReceived = Y$2, this.onMessageUpdated = Y$2, this.onMessageDeleted = Y$2, this.onMentionReceived = Y$2, this.onReactionUpdated = Y$2, this.onThreadInfoUpdated = Y$2;
};

var en$1 = function (r$1$1) {
  function a() {
    var n = null !== r$1$1 && r$1$1.apply(this, arguments) || this;
    return n._channels = new Map(), n._enteredChannelUrls = [], n;
  }

  return t(a, r$1$1), Object.defineProperty(a.prototype, "enteredChannels", {
    get: function () {
      var n = this;
      return this._enteredChannelUrls.map(function (e) {
        return n._channels.get(e);
      }).filter(function (n) {
        return null !== n;
      });
    },
    enumerable: !1,
    configurable: !0
  }), a.prototype.isEnteredChannel = function (n) {
    return this._enteredChannelUrls.includes(n);
  }, a.prototype.enter = function (n) {
    this._enteredChannelUrls.indexOf(n) < 0 && this._enteredChannelUrls.push(n);
  }, a.prototype.exit = function (n) {
    var e = this._enteredChannelUrls.indexOf(n);

    e >= 0 && this._enteredChannelUrls.splice(e, 1);
  }, a.prototype.exitAll = function () {
    this._enteredChannelUrls = [];
  }, a.prototype.get = function (n) {
    var r$1$1;
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return [2, null !== (r$1$1 = this._channels.get(n)) && void 0 !== r$1$1 ? r$1$1 : null];
      });
    });
  }, a.prototype.upsert = function (n) {
    return r$1(this, void 0, void 0, function () {
      var e = this;
      return i$1(this, function (t) {
        return n.forEach(function (n) {
          if (e._channels.has(n.url)) {
            var t = e._channels.get(n.url);

            Object.assign(t, n);
          } else e._channels.set(n.url, n);
        }), [2];
      });
    });
  }, a.prototype.remove = function (n) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return this._channels.delete(n), this.exit(n), [2];
      });
    });
  }, a.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        return this._channels.clear(), this._enteredChannelUrls = [], [2];
      });
    });
  }, a;
}(Le$1),
    tn$1 = {
  channelUrl: null,
  name: null,
  coverUrlOrImage: null,
  data: null,
  customType: null,
  operatorUserIds: null
},
    rn$1 = function (e) {
  function t$1(n) {
    var t = n.channelUrl,
        r = n.isInternalCall,
        a = e.call(this) || this;
    return a.method = d$1.GET, a.path = "".concat(r ? Ge$1 : xe$1, "/").concat(encodeURIComponent(t)), a;
  }

  return t(t$1, e), t$1;
}(q$2),
    an$1 = function (e) {
  function t$1(n, t) {
    var r = e.call(this, n, t) || this;
    return r.channel = null, r.channel = new gn$1(n, t), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    sn$1 = function (e) {
  function t$1(n) {
    var t = this,
        r = n.channelUrl,
        a = n.coverUrlOrImage,
        u = n.name,
        l = n.data,
        h = n.customType,
        p = n.operatorUserIds;
    return (t = e.call(this) || this).method = d$1.POST, t.path = xe$1, t.params = U$2({
      channel_url: r,
      cover_url: y("string", a) ? a : null,
      cover_file: S$1(a) ? a : null,
      name: u,
      data: l,
      custom_type: h,
      operators: p
    }), t;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(n, t) {
    var r = e.call(this, n, t) || this;
    return r.channel = new gn$1(n, t), r;
  }

  t(t$1, e);
}(F$1);

var on$1 = function (e) {
  function t$1(n) {
    var t = n.channelUrl;
    return e.call(this, {
      code: "ENTR",
      payload: {
        channel_url: t
      },
      ackRequired: !0
    }) || this;
  }

  return t(t$1, e), t$1;
}(H$2),
    un$1 = function (e) {
  function t$1(n, t, r) {
    var a,
        i,
        s = this;
    return s = e.call(this, n, "ENTR", r) || this, r.data && (s.participantCount = null !== (a = r.data.participant_count) && void 0 !== a ? a : 0, s.user = new ct$1(n, r.data), s.ts = null !== (i = r.data.edge_ts) && void 0 !== i ? i : 0), s;
  }

  return t(t$1, e), t$1;
}(B$2),
    cn$1 = function (e) {
  function t$1(n) {
    var t = n.channelUrl;
    return e.call(this, {
      code: "EXIT",
      payload: {
        channel_url: t
      },
      ackRequired: !0
    }) || this;
  }

  return t(t$1, e), t$1;
}(H$2),
    ln$1 = function (e) {
  function t$1(n, t, r) {
    var a,
        i,
        s = this;
    return s = e.call(this, n, "EXIT", r) || this, r.data && (s.participantCount = null !== (a = r.data.participant_count) && void 0 !== a ? a : 0, s.user = new ct$1(n, r.data), s.ts = null !== (i = r.data.edge_ts) && void 0 !== i ? i : 0), s;
  }

  return t(t$1, e), t$1;
}(B$2),
    hn$1 = {},
    dn$1 = function () {
  function n$1$1(n, e) {
    var t = e.sdkState,
        r = e.dispatcher,
        a = e.requestQueue,
        i = this;
    this._sdkState = t, this._requestQueue = a, this._dispatcher = r, this._openChannelCache = new en$1(n), this._openChannelHandlers = new Map(), this._dispatcher.on(function (n) {
      var e, t;
      if (n instanceof B$2) i._handleEvent(n);else if (n instanceof de$1 && n.stateType === J$2.CONNECTED) {
        var r = i._openChannelCache.enteredChannels;

        try {
          for (var a = s(r), s$1 = a.next(); !s$1.done; s$1 = a.next()) {
            s$1.value.enter();
          }
        } catch (n) {
          e = {
            error: n
          };
        } finally {
          try {
            s$1 && !s$1.done && (t = a.return) && t.call(a);
          } finally {
            if (e) throw e.error;
          }
        }
      }
    }), hn$1[n] = this;
  }

  return n$1$1.of = function (n) {
    return hn$1[n];
  }, n$1$1.prototype.buildOpenChannelFromSerializedData = function (n) {
    var e = ot$1(n);
    return new gn$1(e._iid, gn$1.payloadify(e));
  }, n$1$1.prototype.getChannelFromCache = function (n) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, this._openChannelCache.get(n)];

          case 1:
            return [2, e.sent()];
        }
      });
    });
  }, n$1$1.prototype.upsertChannelsToCache = function (n) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, this._openChannelCache.upsert(n)];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, n$1$1.prototype.removeChannelsFromCache = function (n) {
    return r$1(this, void 0, void 0, function () {
      var e, r, a, i$1$1, s$1, o;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            t.trys.push([0, 5, 6, 7]), e = s(n), r = e.next(), t.label = 1;

          case 1:
            return r.done ? [3, 4] : (a = r.value, [4, this._openChannelCache.remove(a)]);

          case 2:
            t.sent(), t.label = 3;

          case 3:
            return r = e.next(), [3, 1];

          case 4:
            return [3, 7];

          case 5:
            return i$1$1 = t.sent(), s$1 = {
              error: i$1$1
            }, [3, 7];

          case 6:
            try {
              r && !r.done && (o = e.return) && o.call(e);
            } finally {
              if (s$1) throw s$1.error;
            }

            return [7];

          case 7:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.setEnteredToCache = function (n) {
    this._openChannelCache.enter(n.url);
  }, n$1$1.prototype.setExitedToCache = function (n) {
    this._openChannelCache.exit(n.url);
  }, n$1$1.prototype._handleEvent = function (n) {
    return r$1(this, void 0, void 0, function () {
      var r$1$1,
          a,
          i$1$1,
          s$1,
          o,
          u,
          c$1,
          l,
          h$2,
          d$1,
          p,
          f,
          C$1,
          v,
          _$1,
          m,
          T$1$1,
          N,
          H$1,
          I,
          M,
          b,
          O,
          D,
          x,
          A$1,
          B,
          nn,
          en,
          tn,
          rn,
          an,
          sn,
          on,
          cn,
          hn,
          dn,
          pn,
          fn,
          Cn,
          vn,
          _n,
          yn,
          mn,
          gn,
          Un,
          En,
          wn,
          Tn,
          Nn,
          Hn,
          In,
          Mn,
          bn,
          On,
          Dn,
          xn,
          An,
          Pn,
          Ln = this;

      return i$1(this, function (Rn) {
        switch (Rn.label) {
          case 0:
            switch (Rn.trys.push([0, 51,, 52]), n.code) {
              case "MESG":
              case "FILE":
              case "ADMM":
              case "BRDM":
                return [3, 1];

              case "MEDI":
              case "FEDI":
              case "AEDI":
                return [3, 4];

              case "DELM":
                return [3, 7];

              case "MRCT":
                return [3, 10];

              case "MTHD":
                return [3, 13];

              case "MCNT":
                return [3, 16];

              case "SYEV":
                return [3, 27];
            }

            return [3, 50];

          case 1:
            return s$1 = null, "MESG" === n.code ? s$1 = n.as(gt$2) : "FILE" === n.code ? s$1 = n.as(Jt$2) : "ADMM" !== n.code && "BRDM" != n.code || (s$1 = n.as(A)), s$1 ? (r$1$1 = s$1.message, a = s$1.isMentioned, r$1$1.channelType !== ne$1.OPEN ? [3, 3] : [4, this.getChannel(r$1$1.channelUrl, !0)]) : [3, 3];

          case 2:
            i$1$1 = Rn.sent(), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                var n, e, s$1, o, u;
                return i$1(this, function (t) {
                  try {
                    for (n = s(this._openChannelHandlers.values()), e = n.next(); !e.done; e = n.next()) s$1 = e.value, this._openChannelCache.isEnteredChannel(i$1$1.url) && s$1.onMessageReceived(i$1$1, r$1$1), a && s$1.onMentionReceived(i$1$1, r$1$1);
                  } catch (n) {
                    o = {
                      error: n
                    };
                  } finally {
                    try {
                      e && !e.done && (u = n.return) && u.call(n);
                    } finally {
                      if (o) throw o.error;
                    }
                  }

                  return [2];
                });
              });
            }), Rn.label = 3;

          case 3:
            return [3, 50];

          case 4:
            return s$1 = null, "MEDI" === n.code ? s$1 = n.as(Tt$2) : "FEDI" === n.code ? s$1 = n.as(It$2) : "AEDI" === n.code && (s$1 = n.as(c)), s$1 ? (o = s$1.message).channelType !== ne$1.OPEN ? [3, 6] : [4, this.getChannel(o.channelUrl, !0)] : [3, 6];

          case 5:
            u = Rn.sent(), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                var n, e, r, a, i$1$1;
                return i$1(this, function (t) {
                  try {
                    for (n = s(this._openChannelHandlers.values()), e = n.next(); !e.done; e = n.next()) r = e.value, this._openChannelCache.isEnteredChannel(u.url) && r.onMessageUpdated(u, o);
                  } catch (n) {
                    a = {
                      error: n
                    };
                  } finally {
                    try {
                      e && !e.done && (i$1$1 = n.return) && i$1$1.call(n);
                    } finally {
                      if (a) throw a.error;
                    }
                  }

                  return [2];
                });
              });
            }), Rn.label = 6;

          case 6:
            return [3, 50];

          case 7:
            return c$1 = n.as(wt$2), M = c$1.channelUrl, p = c$1.channelType, l = c$1.messageId, p !== ne$1.OPEN ? [3, 9] : [4, this.getChannel(M, !0)];

          case 8:
            h$2 = Rn.sent(), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                var n, e, r, a, i$1$1;
                return i$1(this, function (t) {
                  try {
                    for (n = s(this._openChannelHandlers.values()), e = n.next(); !e.done; e = n.next()) r = e.value, this._openChannelCache.isEnteredChannel(h$2.url) && r.onMessageDeleted(h$2, l);
                  } catch (n) {
                    a = {
                      error: n
                    };
                  } finally {
                    try {
                      e && !e.done && (i$1$1 = n.return) && i$1$1.call(n);
                    } finally {
                      if (a) throw a.error;
                    }
                  }

                  return [2];
                });
              });
            }), Rn.label = 9;

          case 9:
            return [3, 50];

          case 10:
            return d$1 = n.as(H), M = d$1.channelUrl, p = d$1.channelType, f = d$1.event, p !== ne$1.OPEN ? [3, 12] : [4, this.getChannel(M, !0)];

          case 11:
            C$1 = Rn.sent(), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                var n, e, r, a;
                return i$1(this, function (t) {
                  try {
                    for (n = s(this._openChannelHandlers.values()), e = n.next(); !e.done; e = n.next()) e.value.onReactionUpdated(C$1, f);
                  } catch (n) {
                    r = {
                      error: n
                    };
                  } finally {
                    try {
                      e && !e.done && (a = n.return) && a.call(n);
                    } finally {
                      if (r) throw r.error;
                    }
                  }

                  return [2];
                });
              });
            }), Rn.label = 12;

          case 12:
            return [3, 50];

          case 13:
            return (v = n.as(T$1).event).channelType !== ne$1.OPEN ? [3, 15] : [4, this.getChannel(v.channelUrl, !0)];

          case 14:
            _$1 = Rn.sent(), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                var n, e, r, a;
                return i$1(this, function (t) {
                  try {
                    for (n = s(this._openChannelHandlers.values()), e = n.next(); !e.done; e = n.next()) e.value.onThreadInfoUpdated(_$1, v);
                  } catch (n) {
                    r = {
                      error: n
                    };
                  } finally {
                    try {
                      e && !e.done && (a = n.return) && a.call(n);
                    } finally {
                      if (r) throw r.error;
                    }
                  }

                  return [2];
                });
              });
            }), Rn.label = 15;

          case 15:
            return [3, 50];

          case 16:
            m = n.as(h).openChannelMemberCounts, T$1$1 = [], Rn.label = 17;

          case 17:
            Rn.trys.push([17, 22, 23, 24]), N = s(m), H$1 = N.next(), Rn.label = 18;

          case 18:
            return H$1.done ? [3, 21] : (I = H$1.value, M = I.channelUrl, an = I.participantCount, b = I.updatedAt, [4, this.getChannelFromCache(M)]);

          case 19:
            (O = Rn.sent()) && O._updateParticipantCount(an, b) && T$1$1.push(O), Rn.label = 20;

          case 20:
            return H$1 = N.next(), [3, 18];

          case 21:
            return [3, 24];

          case 22:
            return D = Rn.sent(), An = {
              error: D
            }, [3, 24];

          case 23:
            try {
              H$1 && !H$1.done && (Pn = N.return) && Pn.call(N);
            } finally {
              if (An) throw An.error;
            }

            return [7];

          case 24:
            return T$1$1.length > 0 ? [4, this.upsertChannelsToCache(T$1$1)] : [3, 26];

          case 25:
            Rn.sent(), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                var n, e, r, a;
                return i$1(this, function (t) {
                  try {
                    for (n = s(this._openChannelHandlers.values()), e = n.next(); !e.done; e = n.next()) e.value.onChannelMemberCountChanged(T$1$1);
                  } catch (n) {
                    r = {
                      error: n
                    };
                  } finally {
                    try {
                      e && !e.done && (a = n.return) && a.call(n);
                    } finally {
                      if (r) throw r.error;
                    }
                  }

                  return [2];
                });
              });
            }), Rn.label = 26;

          case 26:
            return [3, 50];

          case 27:
            if (!(x = n.as(C).event).isOpenChannelEvent) return [3, 49];

            switch (x.category) {
              case _.CHANNEL_ENTER:
                return [3, 28];

              case _.CHANNEL_EXIT:
                return [3, 30];

              case _.CHANNEL_OPERATOR_UPDATE:
                return [3, 32];

              case _.USER_CHANNEL_MUTE:
              case _.USER_CHANNEL_UNMUTE:
                return [3, 34];

              case _.USER_CHANNEL_BAN:
              case _.USER_CHANNEL_UNBAN:
                return [3, 36];

              case _.CHANNEL_FREEZE:
              case _.CHANNEL_UNFREEZE:
                return [3, 38];

              case _.CHANNEL_DELETED:
                return [3, 40];

              case _.CHANNEL_PROP_CHANGED:
                return [3, 43];

              case _.CHANNEL_META_DATA_CHANGED:
                return [3, 45];

              case _.CHANNEL_META_COUNTERS_CHANGED:
                return [3, 47];
            }

            return [3, 49];

          case 28:
            return [4, this.getChannel(x.channelUrl, !0)];

          case 29:
            return A$1 = Rn.sent(), B = n.as(un$1), an = B.participantCount, nn = B.user, en = A$1._updateParticipantCount(an, x.ts), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return this._openChannelHandlers.forEach(function (n) {
                    n.onUserEntered(A$1, nn), en && n.onChannelParticipantCountChanged(A$1);
                  }), [2];
                });
              });
            }), [3, 49];

          case 30:
            return [4, this.getChannel(x.channelUrl, !0)];

          case 31:
            return tn = Rn.sent(), rn = n.as(ln$1), an = rn.participantCount, sn = rn.user, on = tn._updateParticipantCount(an, x.ts), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return this._openChannelHandlers.forEach(function (n) {
                    n.onUserExited(tn, sn), on && n.onChannelParticipantCountChanged(tn);
                  }), [2];
                });
              });
            }), [3, 49];

          case 32:
            return [4, this.getChannel(x.channelUrl, !0)];

          case 33:
            return cn = Rn.sent(), hn = n.as(d).operators, cn.operators = hn, this.upsertChannelsToCache([cn]), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return this._openChannelHandlers.forEach(function (n) {
                    n.onOperatorUpdated(cn, hn);
                  }), [2];
                });
              });
            }), [3, 49];

          case 34:
            return [4, this.getChannel(x.channelUrl, !0)];

          case 35:
            return dn = Rn.sent(), pn = x.category === _.USER_CHANNEL_MUTE, fn = n.as(pn ? at$2 : ot$2).user, Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return this._openChannelHandlers.forEach(function (n) {
                    pn ? n.onUserMuted(dn, fn) : n.onUserUnmuted(dn, fn);
                  }), [2];
                });
              });
            }), [3, 49];

          case 36:
            return [4, this.getChannel(x.channelUrl, !0)];

          case 37:
            return Cn = Rn.sent(), vn = x.category === _.USER_CHANNEL_BAN, _n = n.as(vn ? ct$2 : dt$2).user, Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return this._openChannelHandlers.forEach(function (n) {
                    vn ? n.onUserBanned(Cn, _n) : n.onUserUnbanned(Cn, _n);
                  }), [2];
                });
              });
            }), [3, 49];

          case 38:
            return [4, this.getChannel(x.channelUrl, !0)];

          case 39:
            return yn = Rn.sent(), mn = n.as(pt$2).freeze, yn.isFrozen = mn, this.upsertChannelsToCache([yn]), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return this._openChannelHandlers.forEach(function (n) {
                    mn ? n.onChannelFrozen(yn) : n.onChannelUnfrozen(yn);
                  }), [2];
                });
              });
            }), [3, 49];

          case 40:
            return [4, this.getChannel(x.channelUrl, !0)];

          case 41:
            return gn = Rn.sent(), [4, this.removeChannelsFromCache([gn.url])];

          case 42:
            return Rn.sent(), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return this._openChannelHandlers.forEach(function (n) {
                    n.onChannelDeleted(gn.url, gn.channelType);
                  }), [2];
                });
              });
            }), [3, 49];

          case 43:
            return [4, this.getChannelWithoutCache(x.channelUrl, !0)];

          case 44:
            return Un = Rn.sent(), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return this._openChannelHandlers.forEach(function (n) {
                    n.onChannelChanged(Un);
                  }), [2];
                });
              });
            }), [3, 49];

          case 45:
            return [4, this.getChannel(x.channelUrl, !0)];

          case 46:
            return En = Rn.sent(), wn = n.as(je$2), Tn = wn.created, Nn = wn.updated, Hn = wn.deleted, Tn && En._upsertCachedMetaData(Tn, x.ts), Nn && En._upsertCachedMetaData(Nn, x.ts), Hn && En._removeFromCachedMetaData(Hn, x.ts), Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return this._openChannelHandlers.forEach(function (n) {
                    Tn && n.onMetaDataCreated(En, Tn), Nn && n.onMetaDataUpdated(En, Nn), Hn && n.onMetaDataDeleted(En, Hn);
                  }), [2];
                });
              });
            }), [3, 49];

          case 47:
            return [4, this.getChannel(x.channelUrl, !0)];

          case 48:
            return In = Rn.sent(), Mn = n.as(tt$2), bn = Mn.created, On = Mn.updated, Dn = Mn.deleted, Ie$1(function () {
              return r$1(Ln, void 0, void 0, function () {
                return i$1(this, function (n) {
                  return this._openChannelHandlers.forEach(function (n) {
                    bn && n.onMetaCounterCreated(In, bn), On && n.onMetaCounterUpdated(In, On), Dn && n.onMetaCounterDeleted(In, Dn);
                  }), [2];
                });
              });
            }), [3, 49];

          case 49:
            return [3, 50];

          case 50:
            return [3, 52];

          case 51:
            if (xn = Rn.sent(), h$1(xn)) throw xn;
            return [3, 52];

          case 52:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.addHandler = function (n, e) {
    this._openChannelHandlers.set(n, e);
  }, n$1$1.prototype.removeHandler = function (n) {
    this._openChannelHandlers.delete(n);
  }, n$1$1.prototype.clearHandler = function () {
    this._openChannelHandlers.clear();
  }, n$1$1.prototype.getChannel = function (n, r$1$1) {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            at$1(y("string", n)).throw(p$1.invalidParameters), t.label = 1;

          case 1:
            return t.trys.push([1, 3,, 4]), [4, this.getChannelFromCache(n)];

          case 2:
            return (e = t.sent()) ? [2, e] : [3, 4];

          case 3:
            return t.sent(), [3, 4];

          case 4:
            return [4, this.getChannelWithoutCache(n)];

          case 5:
            return [2, t.sent()];
        }
      });
    });
  }, n$1$1.prototype.getChannelWithoutCache = function (n, r$1$1) {
    return void 0 === r$1$1 && (r$1$1 = !1), r$1(this, void 0, void 0, function () {
      var e, a, s;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return at$1(y("string", n)).throw(p$1.invalidParameters), e = new rn$1({
              channelUrl: n,
              isInternalCall: r$1$1
            }), [4, this._requestQueue.send(e)];

          case 1:
            return a = t.sent(), s = a.as(an$1).channel, [4, this.upsertChannelsToCache([s])];

          case 2:
            return t.sent(), [2, s];
        }
      });
    });
  }, n$1$1.prototype.createChannel = function (n$1$1) {
    return r$1(this, void 0, void 0, function () {
      var e, r, o;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return n$1$1 = n$1(n$1({}, tn$1), n$1$1), at$1(function (n) {
              return E$1("string", n.operatorUserIds, !0) && (y("string", n.coverUrlOrImage) || S$1(n.coverUrlOrImage) || null === n.coverUrlOrImage) && y("string", n.name, !0) && y("string", n.data, !0) && y("string", n.customType, !0) && (y("string", n.channelUrl) && /^\w+$/.test(n.channelUrl) || null === n.channelUrl);
            }(n$1$1)).throw(p$1.invalidParameters), e = new sn$1(n$1$1), [4, this._requestQueue.send(e)];

          case 1:
            return r = t.sent(), o = r.as(an$1).channel, this.upsertChannelsToCache([o]), [2, o];
        }
      });
    });
  }, n$1$1;
}(),
    pn$1 = {
  name: null,
  coverUrlOrImage: null,
  data: null,
  customType: null,
  operatorUserIds: null
},
    fn$1 = function (e) {
  function t$1(n) {
    var t = this,
        r = n.channelUrl,
        a = n.token,
        i = n.limit;
    return (t = e.call(this) || this).method = d$1.GET, t.path = "".concat(xe$1, "/").concat(encodeURIComponent(r), "/participants"), t.params = {
      token: a,
      limit: i
    }, t;
  }

  return t(t$1, e), t$1;
}(q$2),
    Cn$1 = function (e) {
  function t$1(n, t) {
    var r = e.call(this, n, t) || this;
    r.token = null, r.participants = [];
    var a = t.next,
        i = t.participants;
    return r.token = a, r.participants = i.map(function (e) {
      return new ct$1(n, e);
    }), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    vn$1 = function (r$1$1) {
  function a(n, e, t) {
    return r$1$1.call(this, n, e, ne$1.OPEN, t) || this;
  }

  return t(a, r$1$1), a.prototype._validate = function () {
    return r$1$1.prototype._validate.call(this);
  }, a.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var n$1$1, e, r, a, i$1$1, s;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, n$1$1 = St$1$1.of(this._iid).requestQueue, e = new fn$1(n$1(n$1({}, this), {
              token: this._token
            })), [4, n$1$1.send(e)]) : [3, 2] : [3, 5];

          case 1:
            return r = t.sent(), a = r.as(Cn$1), i$1$1 = a.participants, s = a.token, this._token = s, this._hasNext = !!s, this._isLoading = !1, [2, i$1$1];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, a;
}(On$2),
    _n$1 = function (e) {
  function t$1(n) {
    var t = this,
        r = n.channelUrl,
        a = n.coverUrlOrImage,
        u = n.name,
        l = n.data,
        h = n.customType,
        p = n.operatorUserIds;
    return (t = e.call(this) || this).method = d$1.PUT, t.path = "".concat(xe$1, "/").concat(encodeURIComponent(r)), t.params = U$2({
      cover_url: y("string", a) ? a : null,
      cover_file: S$1(a) ? a : null,
      name: u,
      data: l,
      custom_type: h,
      operators: p
    }), t;
  }

  return t(t$1, e), t$1;
}(q$2),
    yn$1 = function (e) {
  function t$1(n, t) {
    var r = e.call(this, n, t) || this;
    return r.channel = new gn$1(n, t), r;
  }

  return t(t$1, e), t$1;
}(F$1),
    mn$1 = function (e) {
  function t$1(n) {
    var t = this,
        r = n.channelUrl;
    return (t = e.call(this) || this).method = d$1.DELETE, t.path = "".concat(xe$1, "/").concat(encodeURIComponent(r)), t;
  }

  return t(t$1, e), t$1;
}(q$2);

!function (e) {
  function t$1(n, t) {
    return e.call(this, n, t) || this;
  }

  t(t$1, e);
}(F$1);

var gn$1 = function (r$1$1) {
  function o(n, e) {
    var t,
        a = this;
    return (a = r$1$1.call(this, n, e) || this)._lastParticipantCountUpdated = 0, a.participantCount = 0, a.operators = [], a.channelType = ne$1.OPEN, a.participantCount = null !== (t = e.participant_count) && void 0 !== t ? t : 0, a.operators = Array.isArray(e.operators) ? e.operators.map(function (e) {
      return new ct$1(n, e);
    }) : [], a;
  }

  return t(o, r$1$1), o.payloadify = function (n$1$1) {
    return n$1$1 ? U$2(n$1(n$1({}, kt$2.payloadify(n$1$1)), {
      participant_count: n$1$1.participantCount,
      operators: n$1$1.operators.map(function (n) {
        return ct$1.payloadify(n);
      })
    })) : null;
  }, o.prototype.serialize = function () {
    return st$1(this);
  }, o.prototype.isOperator = function (n) {
    return n instanceof ct$1 ? this.isOperator(n.userId) : this.operators.some(function (e) {
      return e.userId === n;
    });
  }, o.prototype._updateParticipantCount = function (n, e) {
    return e > this._lastParticipantCountUpdated && (this.participantCount = n, this._lastParticipantCountUpdated = e, !0);
  }, o.prototype.createParticipantListQuery = function (n) {
    return new vn$1(this._iid, this.url, n);
  }, o.prototype.refresh = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, dn$1.of(this._iid).getChannelWithoutCache(this.url)];

          case 1:
            return [2, n.sent()];
        }
      });
    });
  }, o.prototype.enter = function () {
    return r$1(this, void 0, void 0, function () {
      var n, e, r, a, i$1$1, s;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return n = St$1$1.of(this._iid).requestQueue, e = new on$1({
              channelUrl: this.url
            }), [4, n.send(e)];

          case 1:
            return r = t.sent(), a = r.as(un$1), i$1$1 = a.participantCount, s = a.ts, this._updateParticipantCount(i$1$1, s), dn$1.of(this._iid).setEnteredToCache(this), [2];
        }
      });
    });
  }, o.prototype.exit = function () {
    return r$1(this, void 0, void 0, function () {
      var n, e, r, a, i$1$1, s;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return n = St$1$1.of(this._iid).requestQueue, e = new cn$1({
              channelUrl: this.url
            }), [4, n.send(e)];

          case 1:
            return r = t.sent(), a = r.as(ln$1), i$1$1 = a.participantCount, s = a.ts, this._updateParticipantCount(i$1$1, s), dn$1.of(this._iid).setExitedToCache(this), En$3.of(this._iid).fileMessageQueue.cancel(this), [2];
        }
      });
    });
  }, o.prototype.updateChannel = function (n$1$1) {
    return r$1(this, void 0, void 0, function () {
      var e, r, o, u;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return n$1$1 = n$1(n$1({}, pn$1), n$1$1), at$1(function (n) {
              return E$1("string", n.operatorUserIds, !0) && (y("string", n.coverUrlOrImage) || S$1(n.coverUrlOrImage) || null === n.coverUrlOrImage) && y("string", n.name, !0) && y("string", n.data, !0) && y("string", n.customType, !0);
            }(n$1$1)).throw(p$1.invalidParameters), e = St$1$1.of(this._iid).requestQueue, r = new _n$1(n$1({
              channelUrl: this.url
            }, n$1$1)), [4, e.send(r)];

          case 1:
            return o = t.sent(), u = o.as(yn$1).channel, [4, dn$1.of(this._iid).upsertChannelsToCache([u])];

          case 2:
            return t.sent(), [2, u];
        }
      });
    });
  }, o.prototype.updateChannelWithOperatorUserIds = function (n$1$1, r$1$1, a, i$1$1, s) {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        return e = n$1(n$1({}, pn$1), {
          name: n$1$1,
          coverUrlOrImage: r$1$1,
          data: a,
          operatorUserIds: i$1$1,
          customType: s
        }), [2, this.updateChannel(e)];
      });
    });
  }, o.prototype.delete = function () {
    return r$1(this, void 0, void 0, function () {
      var n, e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return n = St$1$1.of(this._iid).requestQueue, e = new mn$1({
              channelUrl: this.url
            }), [4, n.send(e)];

          case 1:
            return t.sent(), [4, dn$1.of(this._iid).removeChannelsFromCache([this.url])];

          case 2:
            return t.sent(), [2];
        }
      });
    });
  }, o;
}(kt$2),
    Un$1 = function (e) {
  function t$1(n) {
    void 0 === n && (n = {});
    var t = e.call(this) || this;
    return Object.keys(n).forEach(function (e) {
      t.hasOwnProperty(e) && (t[e] = n[e]);
    }), t;
  }

  return t(t$1, e), t$1;
}(function (e) {
  function t$1() {
    var n = null !== e && e.apply(this, arguments) || this;
    return n.onUserEntered = Y$2, n.onUserExited = Y$2, n.onChannelParticipantCountChanged = Y$2, n;
  }

  return t(t$1, e), t$1;
}(U$1)),
    En$1 = function (e) {
  function t$1(n) {
    var t = this,
        r = n.token,
        a = n.limit,
        i = n.nameKeyword,
        s = n.urlKeyword,
        u = n.customTypes,
        l = n.includeFrozen,
        h = n.includeMetaData;
    return (t = e.call(this) || this).method = d$1.GET, t.path = xe$1, t.params = U$2({
      token: r,
      limit: a,
      name_contains: i,
      url_contains: s,
      custom_types: u,
      show_frozen: l,
      show_metadata: h
    }), t;
  }

  return t(t$1, e), t$1;
}(q$2),
    wn$1 = function (e) {
  function t$1(n, t) {
    var r = e.call(this, n, t) || this;
    r.token = null, r.channels = [], r.ts = null;
    var a = t.next,
        i = t.channels,
        s = t.ts;
    return r.token = a, i && i.length > 0 && (r.channels = i.map(function (e) {
      return new gn$1(n, e);
    })), r.ts = "number" == typeof s ? s : null, r;
  }

  return t(t$1, e), t$1;
}(F$1),
    Tn$1 = function (r$1$1) {
  function s(n, e) {
    var t,
        a,
        i,
        s,
        o,
        u = this;
    return (u = r$1$1.call(this, n, e) || this).includeFrozen = !0, u.includeMetaData = !0, u.nameKeyword = null, u.urlKeyword = null, u.customTypes = null, u.includeFrozen = null === (t = e.includeFrozen) || void 0 === t || t, u.includeMetaData = null === (a = e.includeMetaData) || void 0 === a || a, u.nameKeyword = null !== (i = e.nameKeyword) && void 0 !== i ? i : null, u.urlKeyword = null !== (s = e.urlKeyword) && void 0 !== s ? s : null, u.customTypes = null !== (o = e.customTypes) && void 0 !== o ? o : null, u;
  }

  return t(s, r$1$1), s.prototype._validate = function () {
    return r$1$1.prototype._validate.call(this) && y("boolean", this.includeFrozen) && y("boolean", this.includeMetaData) && y("string", this.nameKeyword, !0) && y("string", this.urlKeyword, !0) && E$1("string", this.customTypes, !0);
  }, s.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var n$1$1, e, r, a, i$1$1, s;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 4] : this._hasNext ? (this._isLoading = !0, n$1$1 = St$1$1.of(this._iid).requestQueue, e = new En$1(n$1(n$1({}, this), {
              token: this._token
            })), [4, n$1$1.send(e)]) : [3, 3] : [3, 6];

          case 1:
            return r = t.sent(), a = r.as(wn$1), i$1$1 = a.channels, s = a.token, this._token = s, this._hasNext = !!s, [4, dn$1.of(this._iid).upsertChannelsToCache(i$1$1)];

          case 2:
            return t.sent(), this._isLoading = !1, [2, i$1$1];

          case 3:
            return [2, []];

          case 4:
            throw p$1.queryInProgress;

          case 5:
            return [3, 7];

          case 6:
            throw p$1.invalidParameters;

          case 7:
            return [2];
        }
      });
    });
  }, s;
}(bn$2),
    Nn$1 = function (r$1$1) {
  function a() {
    var n = null !== r$1$1 && r$1$1.apply(this, arguments) || this;
    return n.name = "openChannel", n;
  }

  return t(a, r$1$1), a.prototype.init = function (n, e) {
    var t = e.sdkState,
        a = e.dispatcher,
        i = e.sessionManager,
        s = e.requestQueue,
        o = e.logger,
        u = e.onlineDetector,
        c = e.cacheContext;
    r$1$1.prototype.init.call(this, n, {
      sdkState: t,
      dispatcher: a,
      sessionManager: i,
      requestQueue: s,
      logger: o,
      onlineDetector: u,
      cacheContext: c
    }), this._manager = new dn$1(n, {
      sdkState: t,
      dispatcher: a,
      requestQueue: s
    });
  }, a.prototype.createOpenChannelListQuery = function (n) {
    return void 0 === n && (n = {}), new Tn$1(this._iid, n);
  }, a.prototype.addOpenChannelHandler = function (n, e) {
    this._manager.addHandler(n, e);
  }, a.prototype.removeOpenChannelHandler = function (n) {
    this._manager.removeHandler(n);
  }, a.prototype.removeAllOpenChannelHandlers = function () {
    this._manager.clearHandler();
  }, a.prototype.buildOpenChannelFromSerializedData = function (n) {
    return this._manager.buildOpenChannelFromSerializedData(n);
  }, a.prototype.getChannel = function (n) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return [2, this._manager.getChannel(n)];
      });
    });
  }, a.prototype.getChannelWithoutCache = function (n) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return [2, this._manager.getChannelWithoutCache(n)];
      });
    });
  }, a.prototype.createChannel = function (n) {
    return void 0 === n && (n = {}), r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return [2, this._manager.createChannel(n)];
      });
    });
  }, a.prototype.createChannelWithOperatorUserIds = function (n$1$1, r$1$1, a, i$1$1, s) {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        return (e = n$1({}, tn$1)).name = n$1$1, e.coverUrlOrImage = r$1$1, e.data = a, e.operatorUserIds = i$1$1, e.customType = s, [2, this._manager.createChannel(e)];
      });
    });
  }, a;
}(Tt$1$1);

var yt;
!function (e) {
  e.NONE = "none", e.JOINED = "joined", e.INVITED = "invited";
}(yt || (yt = {}));

var Ct,
    Nt,
    bt,
    Mt,
    St,
    At,
    Tt,
    Ut,
    It = function (i) {
  function a(e, r) {
    var s = i.call(this, e, r) || this;
    return s.state = null, s.role = null, s.isMuted = !1, s.isBlockedByMe = !1, s.isBlockingMe = !1, s.state = m(yt, r.state) ? r.state : null, s.role = m(re$1, r.role) ? r.role : null, r.hasOwnProperty("is_muted") && (s.isMuted = r.is_muted), r.hasOwnProperty("is_blocked_by_me") && (s.isBlockedByMe = r.is_blocked_by_me), r.hasOwnProperty("is_blocking_me") && (s.isBlockingMe = r.is_blocking_me), s;
  }

  return t(a, i), a.payloadify = function (e) {
    return e ? U$2(n$1(n$1({}, i.payloadify.call(this, e)), {
      state: e.state,
      role: e.role,
      is_muted: e.isMuted,
      is_blocked_by_me: e.isBlockedByMe,
      is_blocking_me: e.isBlockingMe
    })) : null;
  }, a;
}(Ue$2),
    wt = function (t$1) {
  function n(e, n) {
    var r,
        s,
        o = this;
    return (o = t$1.call(this, e) || this).channelUrl = null !== (r = n.channel_url) && void 0 !== r ? r : "", o.channelType = null !== (s = n.channel_type) && void 0 !== s ? s : ne$1.GROUP, o.reader = new ct$1(o._iid, n.user), o.readAt = n.ts, o;
  }

  return t(n, t$1), n;
}(Le$1);

!function (e) {
  e.ALL = "all", e.PUBLIC = "public", e.PRIVATE = "private";
}(Ct || (Ct = {})), function (e) {
  e.ALL = "all", e.JOINED = "joined_only", e.INVITED = "invited_only", e.INVITED_BY_FRIEND = "invited_by_friend", e.INVITED_BY_NON_FRIEND = "invited_by_non_friend";
}(Nt || (Nt = {})), function (e) {
  e.ALL = "all", e.SUPER = "super", e.NON_SUPER = "nonsuper", e.BROADCAST_ONLY = "broadcast_only", e.EXCLUSIVE_ONLY = "exclusive_only";
}(bt || (bt = {})), function (e) {
  e.ALL = "all", e.UNREAD_MESSAGE = "unread_message";
}(Mt || (Mt = {})), function (e) {
  e.ALL = "all", e.UNHIDDEN = "unhidden_only", e.HIDDEN = "hidden_only", e.HIDDEN_ALLOW_AUTO_UNHIDE = "hidden_allow_auto_unhide", e.HIDDEN_PREVENT_AUTO_UNHIDE = "hidden_prevent_auto_unhide";
}(St || (St = {})), function (e) {
  e.ALL = "all", e.OPERATOR = "operator", e.NONOPERATOR = "nonoperator";
}(At || (At = {})), function (e) {
  e.AND = "AND", e.OR = "OR";
}(Tt || (Tt = {})), function (e) {
  e.MEMBER_NICKNAME = "member_nickname", e.CHANNEL_NAME = "channel_name";
}(Ut || (Ut = {}));

var Dt,
    Lt = function () {
  function e() {
    this._searchFilter = null, this._userIdsFilter = null, this.includeEmpty = !1, this.nicknameContainsFilter = "", this.channelNameContainsFilter = "", this.myMemberStateFilter = Nt.ALL, this.customTypesFilter = null, this.channelUrlsFilter = null, this.superChannelFilter = bt.ALL, this.publicChannelFilter = Ct.ALL, this.customTypeStartsWithFilter = null, this.unreadChannelFilter = Mt.ALL, this.hiddenChannelFilter = St.UNHIDDEN, this.includeFrozen = !0;
  }

  return e.prototype._isFriend = function (e) {
    return !!e.friendDiscoveryKey || !!e.friendName;
  }, Object.defineProperty(e.prototype, "searchFilter", {
    get: function () {
      return this._searchFilter;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.setSearchFilter = function (e, t) {
    Array.isArray(e) && 0 !== e.length && "string" == typeof t && t && (this._searchFilter = {
      query: t,
      fields: e
    });
  }, Object.defineProperty(e.prototype, "userIdsFilter", {
    get: function () {
      return this._userIdsFilter;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.setUserIdsFilter = function (e, t, n) {
    void 0 === n && (n = Tt.AND), this._userIdsFilter = {
      userIds: e,
      includeMode: t,
      queryType: n
    };
  }, e.prototype.clone = function () {
    var t = new e();
    this.searchFilter && t.setSearchFilter(this.searchFilter.fields, this.searchFilter.query), this.userIdsFilter && t.setUserIdsFilter(this.userIdsFilter.userIds, this.userIdsFilter.includeMode, this.userIdsFilter.queryType);
    var n = JSON.parse(JSON.stringify(this));
    return Object.keys(n).forEach(function (e) {
      t[e] = n[e];
    }), t;
  }, e.prototype.match = function (e, t) {
    if (this._searchFilter) {
      var n = this._searchFilter,
          r = n.query,
          s = n.fields;
      if (r && s && s.length > 0 && !s.some(function (t) {
        switch (t) {
          case Ut.CHANNEL_NAME:
            return e.name.toLowerCase().includes(r.toLowerCase());

          case Ut.MEMBER_NICKNAME:
            return e.members.some(function (e) {
              return e.nickname.toLowerCase().includes(r.toLowerCase());
            });

          default:
            return !0;
        }
      })) return !1;
    }

    if (this._userIdsFilter) {
      var i = this._userIdsFilter,
          a = i.userIds,
          o = i.includeMode,
          u = i.queryType,
          l = e.members.map(function (e) {
        return e.userId;
      });

      if (o) {
        if (a.length > 0) switch (u) {
          case Tt.AND:
            if (a.some(function (e) {
              return !l.includes(e);
            })) return !1;
            break;

          case Tt.OR:
            if (a.every(function (e) {
              return !l.includes(e);
            })) return !1;
        }
      } else {
        if (a.includes(t) || a.push(t), e.members.length > a.length) return !1;
        if (!T$2(a, l)) return !1;
      }
    }

    if (!this.includeEmpty && !e.lastMessage) return !1;
    if (!this.includeFrozen && e.isFrozen) return !1;
    if (this.customTypesFilter && this.customTypesFilter.length > 0 && !this.customTypesFilter.includes(e.customType)) return !1;
    if (this.customTypeStartsWithFilter && !new RegExp("^".concat(this.customTypeStartsWithFilter)).test(e.customType)) return !1;
    if (this.channelNameContainsFilter && !e.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase())) return !1;

    if (this.nicknameContainsFilter) {
      var h = this.nicknameContainsFilter.toLowerCase();
      if (e.members.every(function (e) {
        return !e.nickname.toLowerCase().includes(h);
      })) return !1;
    }

    if (this.channelUrlsFilter && this.channelUrlsFilter.length > 0 && !this.channelUrlsFilter.includes(e.url)) return !1;
    if (this.myMemberStateFilter) switch (this.myMemberStateFilter) {
      case Nt.JOINED:
        if ("joined" !== e.myMemberState) return !1;
        break;

      case Nt.INVITED:
        if ("invited" !== e.myMemberState) return !1;
        break;

      case Nt.INVITED_BY_FRIEND:
        if ("invited" !== e.myMemberState || !this._isFriend(e.inviter)) return !1;
        break;

      case Nt.INVITED_BY_NON_FRIEND:
        if ("invited" !== e.myMemberState || this._isFriend(e.inviter)) return !1;
        break;

      case Nt.ALL:
        if ("none" === e.myMemberState) return !1;
    }
    if (this.hiddenChannelFilter) switch (this.hiddenChannelFilter) {
      case St.UNHIDDEN:
        if (e.isHidden || "unhidden" !== e.hiddenState) return !1;
        break;

      case St.HIDDEN:
        if (!e.isHidden) return !1;
        break;

      case St.HIDDEN_ALLOW_AUTO_UNHIDE:
        if (!e.isHidden || "hidden_allow_auto_unhide" !== e.hiddenState) return !1;
        break;

      case St.HIDDEN_PREVENT_AUTO_UNHIDE:
        if (!e.isHidden || "hidden_prevent_auto_unhide" !== e.hiddenState) return !1;
    }
    if (this.unreadChannelFilter && this.unreadChannelFilter === Mt.UNREAD_MESSAGE) if (0 === e.unreadMessageCount) return !1;
    if (this.publicChannelFilter) switch (this.publicChannelFilter) {
      case Ct.PUBLIC:
        if (!e.isPublic) return !1;
        break;

      case Ct.PRIVATE:
        if (e.isPublic) return !1;
    }
    if (this.superChannelFilter) switch (this.superChannelFilter) {
      case bt.SUPER:
        if (!e.isSuper) return !1;
        break;

      case bt.NON_SUPER:
        if (e.isSuper) return !1;
    }
    return !0;
  }, e;
}(),
    Rt = function (t$1) {
  function n$1$1(e, n) {
    var r = n.sdkState,
        s = n.cacheContext,
        i = t$1.call(this, e) || this;
    return i._channels = new Map(), i._sdkState = r, i._cacheContext = s, i;
  }

  return t(n$1$1, t$1), Object.defineProperty(n$1$1.prototype, "collection", {
    get: function () {
      var e = this._cacheContext.nestdb;
      return e ? e.collection(W$1) : null;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n$1$1.prototype, "localCacheEnabled", {
    get: function () {
      return this._cacheContext.localCacheEnabled && !!this.collection;
    },
    enumerable: !1,
    configurable: !0
  }), n$1$1.prototype._serialize = function (e, t) {
    return void 0 === t && (t = 0), n$1(n$1({}, e.serialize()), {
      lastMessageUpdatedAt: e.lastMessage ? e.lastMessage.createdAt : 0,
      syncIndex: t
    });
  }, n$1$1.prototype._deserialize = function (e) {
    return Bn.of(this._iid).buildGroupChannelFromSerializedData(e);
  }, Object.defineProperty(n$1$1.prototype, "channels", {
    get: function () {
      return a([], o(this._channels.values()), !1);
    },
    enumerable: !1,
    configurable: !0
  }), n$1$1.prototype.isCachedInMemory = function (e) {
    return this._channels.has(e);
  }, n$1$1.prototype.get = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return this._channels.has(e) ? [3, 3] : this.localCacheEnabled ? [4, this.collection.getByKey(e)] : [3, 2];

          case 1:
            if (t = r.sent()) return n = this._deserialize(t), this._channels.set(e, n), [2, n];
            r.label = 2;

          case 2:
            return [2, null];

          case 3:
            return [2, this._channels.get(e)];
        }
      });
    });
  }, n$1$1.prototype.fetch = function (e) {
    var t = e.token,
        n = e.limit,
        r$1$1 = void 0 === n ? j : n,
        s = e.backward,
        i$1$1 = void 0 !== s && s,
        a = e.filter,
        o = void 0 === a ? new Lt() : a,
        u = e.order,
        c = void 0 === u ? K$1.LATEST_LAST_MESSAGE : u;
    return r$1(this, void 0, void 0, function () {
      var e,
          n,
          s,
          a,
          u = this;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            return this.localCacheEnabled ? (e = $(c), n = {
              where: function (e) {
                if (t) switch (c) {
                  case K$1.CHANNEL_NAME_ALPHABETICAL:
                    if (!i$1$1 && e.name.localeCompare(t) < 0 || i$1$1 && e.name.localeCompare(t) > 0) return !1;
                    break;

                  case K$1.CHRONOLOGICAL:
                    if (!i$1$1 && e.createdAt > t || i$1$1 && e.createdAt < t) return !1;
                    break;

                  case K$1.LATEST_LAST_MESSAGE:
                    if (!i$1$1 && e.lastMessageUpdatedAt > t || i$1$1 && e.lastMessageUpdatedAt < t) return !1;
                }
                return o.match(u._deserialize(e), u._sdkState.userId);
              },
              index: e,
              backward: i$1$1
            }, [4, this.collection.query(n)]) : [3, 3];

          case 1:
            return [4, l.sent().fetch({
              limit: r$1$1
            })];

          case 2:
            return s = l.sent(), (a = s.map(function (e) {
              return u._deserialize(e);
            })).forEach(function (e) {
              u._channels.has(e.url) || u._channels.set(e.url, e);
            }), [2, a];

          case 3:
            return [2, []];
        }
      });
    });
  }, n$1$1.prototype.upsert = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          n,
          r = this;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            if (e.forEach(function (e) {
              if (r._channels.has(e.url)) {
                var t = r._channels.get(e.url);

                Object.assign(t, e, {
                  _iid: r._iid
                });
              } else r._channels.set(e.url, e);
            }), !this.localCacheEnabled) return [3, 2];

            for (n in t = [], e) t.push(this._serialize(e[n], parseInt(n)));

            return [4, this.collection.upsertMany(t)];

          case 1:
            s.sent(), s.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.remove = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, s$1, i$1$1, a;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            o.trys.push([0, 5, 6, 7]), t = s(e), n = t.next(), o.label = 1;

          case 1:
            return n.done ? [3, 4] : (r = n.value, this._channels.delete(r), this.localCacheEnabled ? [4, this.collection.remove(r)] : [3, 3]);

          case 2:
            o.sent(), o.label = 3;

          case 3:
            return n = t.next(), [3, 1];

          case 4:
            return [3, 7];

          case 5:
            return s$1 = o.sent(), i$1$1 = {
              error: s$1
            }, [3, 7];

          case 6:
            try {
              n && !n.done && (a = t.return) && a.call(t);
            } finally {
              if (i$1$1) throw i$1$1.error;
            }

            return [7];

          case 7:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.clear = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return this.clearMemoryCache(), this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];

          case 1:
            e.sent(), e.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.clearMemoryCache = function () {
    this._channels.clear();
  }, n$1$1.prototype._setBlockStateOfAllChannels = function (e, t, n) {
    return r$1(this, void 0, void 0, function () {
      var r, s$1, i$1$1, a, o, u, c, l, h, d, p, m, v, g, E, y, C, N, b;
      return i$1(this, function (_) {
        switch (_.label) {
          case 0:
            if (r = [], e === this._sdkState.userId) try {
              for (s$1 = s(this._channels.values()), i$1$1 = s$1.next(); !i$1$1.done; i$1$1 = s$1.next()) {
                l = i$1$1.value;

                try {
                  for (g = void 0, a = s(l.members), o = a.next(); !o.done; o = a.next()) if ((p = o.value).userId === t) {
                    p.isBlockedByMe = n, r.push(l);
                    break;
                  }
                } catch (e) {
                  g = {
                    error: e
                  };
                } finally {
                  try {
                    o && !o.done && (E = a.return) && E.call(a);
                  } finally {
                    if (g) throw g.error;
                  }
                }
              }
            } catch (e) {
              m = {
                error: e
              };
            } finally {
              try {
                i$1$1 && !i$1$1.done && (v = s$1.return) && v.call(s$1);
              } finally {
                if (m) throw m.error;
              }
            } else if (t === this._sdkState.userId) try {
              for (u = s(this._channels.values()), c = u.next(); !c.done; c = u.next()) {
                l = c.value;

                try {
                  for (N = void 0, h = s(l.members), d = h.next(); !d.done; d = h.next()) if ((p = d.value).userId === e) {
                    p.isBlockingMe = n, r.push(l);
                    break;
                  }
                } catch (e) {
                  N = {
                    error: e
                  };
                } finally {
                  try {
                    d && !d.done && (b = h.return) && b.call(h);
                  } finally {
                    if (N) throw N.error;
                  }
                }
              }
            } catch (e) {
              y = {
                error: e
              };
            } finally {
              try {
                c && !c.done && (C = u.return) && C.call(u);
              } finally {
                if (y) throw y.error;
              }
            }
            return r.length > 0 ? [4, this.upsert(r)] : [3, 2];

          case 1:
            _.sent(), _.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, n$1$1.prototype.block = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, this._setBlockStateOfAllChannels(e, t, !0)];

          case 1:
            return n.sent(), [2];
        }
      });
    });
  }, n$1$1.prototype.unblock = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, this._setBlockStateOfAllChannels(e, t, !1)];

          case 1:
            return n.sent(), [2];
        }
      });
    });
  }, n$1$1.prototype.markAsRead = function (e, t) {
    return void 0 === t && (t = a([], o(this._channels.keys()), !1)), r$1(this, void 0, void 0, function () {
      var n, r, s$1, i$1$1, a, o, u, c;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            n = [], l.label = 1;

          case 1:
            l.trys.push([1, 6, 7, 8]), r = s(t), s$1 = r.next(), l.label = 2;

          case 2:
            return s$1.done ? [3, 5] : (i$1$1 = s$1.value, [4, this.get(i$1$1)]);

          case 3:
            (a = l.sent())._updateUnreadMemberState(this._sdkState.userId, e) && (a._updateUnreadCount(0, 0), n.push(a)), l.label = 4;

          case 4:
            return s$1 = r.next(), [3, 2];

          case 5:
            return [3, 8];

          case 6:
            return o = l.sent(), u = {
              error: o
            }, [3, 8];

          case 7:
            try {
              s$1 && !s$1.done && (c = r.return) && c.call(r);
            } finally {
              if (u) throw u.error;
            }

            return [7];

          case 8:
            return n.length > 0 ? [4, this.upsert(n)] : [3, 10];

          case 9:
            l.sent(), l.label = 10;

          case 10:
            return [2];
        }
      });
    });
  }, n$1$1;
}(Le$1),
    Ot = {
  invitedUserIds: null,
  channelUrl: null,
  coverUrl: null,
  coverImage: null,
  isDistinct: null,
  isSuper: null,
  isBroadcast: null,
  isExclusive: null,
  isPublic: null,
  isDiscoverable: null,
  isStrict: null,
  isEphemeral: null,
  accessCode: null,
  name: null,
  data: null,
  customType: null,
  operatorUserIds: null,
  messageSurvivalSeconds: null
},
    kt = function (e) {
  return E$1("string", e.invitedUserIds, !0) && y("string", e.channelUrl, !0) && y("string", e.coverUrl, !0) && (S$1(e.coverImage) || y("string", e.coverImage) || null === e.coverImage) && y("boolean", e.isDistinct, !0) && y("boolean", e.isSuper, !0) && y("boolean", e.isBroadcast, !0) && y("boolean", e.isExclusive, !0) && y("boolean", e.isPublic, !0) && y("boolean", e.isStrict, !0) && y("boolean", e.isDiscoverable, !0) && y("boolean", e.isEphemeral, !0) && y("string", e.accessCode, !0) && y("string", e.name, !0) && y("string", e.data, !0) && y("string", e.customType, !0) && E$1("string", e.operatorUserIds, !0) && y("number", e.messageSurvivalSeconds, !0);
},
    Ft = {
  customTypes: null,
  includeEmpty: !1,
  includeFrozen: !0
},
    Pt = function (e) {
  return E$1("string", e.customTypes, !0) && y("boolean", e.includeEmpty) && y("boolean", e.includeFrozen);
},
    xt = {
  myMemberStateFilter: Nt.ALL
},
    Ht = function (e) {
  return m(Nt, e.myMemberStateFilter);
};

!function (e) {
  e.GROUP_CHANNEL_UNREAD_MENTION_COUNT = "group_channel_unread_mention_count", e.NONSUPER_UNREAD_MENTION_COUNT = "non_super_group_channel_unread_mention_count", e.SUPER_UNREAD_MENTION_COUNT = "super_group_channel_unread_mention_count", e.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT = "group_channel_unread_message_count", e.NONSUPER_UNREAD_MESSAGE_COUNT = "non_super_group_channel_unread_message_count", e.SUPER_UNREAD_MESSAGE_COUNT = "super_group_channel_unread_message_count", e.GROUP_CHANNEL_INVITATION_COUNT = "group_channel_invitation_count", e.NONSUPER_INVITATION_COUNT = "non_super_group_channel_invitation_count", e.SUPER_INVITATION_COUNT = "super_group_channel_invitation_count";
}(Dt || (Dt = {}));
var Vt,
    Gt = {
  keys: []
},
    qt = {
  channelCustomTypesFilter: null,
  superChannelFilter: bt.ALL
},
    Bt = {
  channelUrl: null,
  scheduledStatus: null,
  messageTypeFilter: se$1.ALL
};
!function (e) {
  e.UNKNOWN = "UNKNOWN", e.EVENT_CHANNEL_CREATED = "EVENT_CHANNEL_CREATED", e.EVENT_CHANNEL_UPDATED = "EVENT_CHANNEL_UPDATED", e.EVENT_CHANNEL_DELETED = "EVENT_CHANNEL_DELETED", e.EVENT_CHANNEL_READ = "EVENT_CHANNEL_READ", e.EVENT_CHANNEL_DELIVERED = "EVENT_CHANNEL_DELIVERED", e.EVENT_CHANNEL_INVITED = "EVENT_CHANNEL_INVITED", e.EVENT_CHANNEL_JOINED = "EVENT_CHANNEL_JOINED", e.EVENT_CHANNEL_LEFT = "EVENT_CHANNEL_LEFT", e.EVENT_CHANNEL_ACCEPTED_INVITE = "EVENT_CHANNEL_ACCEPTED_INVITE", e.EVENT_CHANNEL_DECLINED_INVITE = "EVENT_CHANNEL_DECLINED_INVITE", e.EVENT_CHANNEL_OPERATOR_UPDATED = "EVENT_CHANNEL_OPERATOR_UPDATED", e.EVENT_CHANNEL_MUTED = "EVENT_CHANNEL_MUTED", e.EVENT_CHANNEL_UNMUTED = "EVENT_CHANNEL_UNMUTED", e.EVENT_CHANNEL_FROZEN = "EVENT_CHANNEL_FROZEN", e.EVENT_CHANNEL_UNFROZEN = "EVENT_CHANNEL_UNFROZEN", e.EVENT_CHANNEL_HIDDEN = "EVENT_CHANNEL_HIDDEN", e.EVENT_CHANNEL_UNHIDDEN = "EVENT_CHANNEL_UNHIDDEN", e.EVENT_CHANNEL_RESET_HISTORY = "EVENT_CHANNEL_RESET_HISTORY", e.EVENT_CHANNEL_TYPING_STATUS_UPDATE = "EVENT_CHANNEL_TYPING_STATUS_UPDATE", e.EVENT_CHANNEL_MEMBER_COUNT_UPDATED = "EVENT_CHANNEL_MEMBER_COUNT_UPDATED", e.EVENT_MESSAGE_SENT = "EVENT_MESSAGE_SENT", e.EVENT_MESSAGE_RECEIVED = "EVENT_MESSAGE_RECEIVED", e.EVENT_MESSAGE_UPDATED = "EVENT_MESSAGE_UPDATED", e.REQUEST_CHANNEL = "REQUEST_CHANNEL", e.REQUEST_CHANNEL_CHANGELOGS = "REQUEST_CHANNEL_CHANGELOGS", e.SYNC_CHANNEL_BACKGROUND = "SYNC_CHANNEL_BACKGROUND", e.SYNC_CHANNEL_CHANGELOGS = "SYNC_CHANNEL_CHANGELOGS";
}(Vt || (Vt = {}));

var Kt = function (e) {
  return e.startsWith("EVENT_") || e === Vt.SYNC_CHANNEL_BACKGROUND || e === Vt.SYNC_CHANNEL_CHANGELOGS;
},
    jt = function (t$1) {
  function n(e) {
    var n = e.channels,
        r = e.source,
        s = t$1.call(this) || this;
    return s.channels = n, s.source = r, s;
  }

  return t(n, t$1), n;
}(L),
    zt = function (t$1) {
  function n(e) {
    var n = e.channelUrls,
        r = e.source,
        s = t$1.call(this) || this;
    return s.channelUrls = n, s.source = r, s;
  }

  return t(n, t$1), n;
}(L),
    Qt = function () {
  function e(e) {
    var t = e.groupChannelCache,
        n = e.messageCache,
        r$1$1 = e.unsentMessageCache,
        s$1 = e.dispatcher,
        i$1$1 = this;
    this._observers = new Map(), s$1.on(function (e) {
      return r$1(i$1$1, void 0, void 0, function () {
        var s$1,
            i$1$1,
            a,
            o,
            u = this;
        return i$1(this, function (c) {
          switch (c.label) {
            case 0:
              return e instanceof jt ? (s$1 = e.channels, o = e.source, i$1$1 = s$1.filter(function (e) {
                return e instanceof Vr;
              }), [4, t.upsert(i$1$1)]) : [3, 2];

            case 1:
              return c.sent(), this._broadcastUpdateEvent(i$1$1, o), [3, 7];

            case 2:
              return e instanceof zt ? (a = e.channelUrls, o = e.source, [4, t.remove(a)]) : [3, 5];

            case 3:
              return c.sent(), [4, Se$1(function () {
                return r$1(u, void 0, void 0, function () {
                  var e, t, s$1, i$1$1, o, u;
                  return i$1(this, function (c) {
                    switch (c.label) {
                      case 0:
                        c.trys.push([0, 6, 7, 8]), e = s(a), t = e.next(), c.label = 1;

                      case 1:
                        return t.done ? [3, 5] : (s$1 = t.value, [4, n.removeMessagesOfChannel(s$1)]);

                      case 2:
                        return c.sent(), [4, r$1$1.removeMessagesOfChannel(s$1)];

                      case 3:
                        c.sent(), c.label = 4;

                      case 4:
                        return t = e.next(), [3, 1];

                      case 5:
                        return [3, 8];

                      case 6:
                        return i$1$1 = c.sent(), o = {
                          error: i$1$1
                        }, [3, 8];

                      case 7:
                        try {
                          t && !t.done && (u = e.return) && u.call(e);
                        } finally {
                          if (o) throw o.error;
                        }

                        return [7];

                      case 8:
                        return [2];
                    }
                  });
                });
              })];

            case 4:
              return c.sent(), this._broadcastRemoveEvent(a, o), [3, 7];

            case 5:
              return e instanceof ve ? [4, t.fetch({
                token: Number.MAX_SAFE_INTEGER,
                limit: Number.MAX_SAFE_INTEGER
              })] : [3, 7];

            case 6:
              c.sent(), c.label = 7;

            case 7:
              return [2];
          }
        });
      });
    });
  }

  return e.prototype._broadcastUpdateEvent = function (e, t) {
    var n, r;

    try {
      for (var s$1 = s(this._observers.values()), i = s$1.next(); !i.done; i = s$1.next()) {
        i.value.onUpdate(e, t);
      }
    } catch (e) {
      n = {
        error: e
      };
    } finally {
      try {
        i && !i.done && (r = s$1.return) && r.call(s$1);
      } finally {
        if (n) throw n.error;
      }
    }
  }, e.prototype._broadcastRemoveEvent = function (e, t) {
    var n, r;

    try {
      for (var s$1 = s(this._observers.values()), i = s$1.next(); !i.done; i = s$1.next()) {
        i.value.onRemove(e, t);
      }
    } catch (e) {
      n = {
        error: e
      };
    } finally {
      try {
        i && !i.done && (r = s$1.return) && r.call(s$1);
      } finally {
        if (n) throw n.error;
      }
    }
  }, e.prototype.subscribe = function (e, t) {
    this._observers.set(e, t);
  }, e.prototype.unsubscribe = function (e) {
    this._observers.delete(e);
  }, e;
}(),
    Wt = function () {
  function e(e) {
    var t = e.messageCache,
        n = e.unsentMessageCache,
        r$1$1 = e.dispatcher,
        s = e.logger,
        i$1$1 = this;
    this._observers = new Map(), this._logger = null, this._logger = s, r$1$1.on(function (e) {
      return r$1(i$1$1, void 0, void 0, function () {
        var r$1$1,
            s,
            i$1$1,
            a,
            o,
            u,
            c = this;
        return i$1(this, function (l) {
          switch (l.label) {
            case 0:
              return e instanceof un$3 ? (r$1$1 = e.messages, u = e.source, s = r$1$1.filter(function (e) {
                return e.messageId > 0;
              }), i$1$1 = r$1$1.filter(function (e) {
                return 0 === e.messageId;
              }), s.length > 0 ? [4, Se$1(function () {
                return r$1(c, void 0, void 0, function () {
                  return i$1(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return [4, t.upsert(s)];

                      case 1:
                        return e.sent(), [4, n.remove(s.map(function (e) {
                          return e instanceof xt$2 ? e.reqId : null;
                        }).filter(function (e) {
                          return null !== e;
                        }))];

                      case 2:
                        return e.sent(), [2];
                    }
                  });
                });
              })] : [3, 2]) : [3, 5];

            case 1:
              l.sent(), this._broadcastUpdateEvent(s, u), l.label = 2;

            case 2:
              return i$1$1.length > 0 ? [4, Se$1(function () {
                return r$1(c, void 0, void 0, function () {
                  return i$1(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return [4, n.upsert(i$1$1)];

                      case 1:
                        return e.sent(), [2];
                    }
                  });
                });
              })] : [3, 4];

            case 3:
              l.sent(), this._broadcastUpdateEvent(i$1$1, u), l.label = 4;

            case 4:
              return [3, 9];

            case 5:
              return e instanceof cn$3 ? (a = e.messageIds, u = e.source, [4, Se$1(function () {
                return r$1(c, void 0, void 0, function () {
                  return i$1(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return [4, t.remove(a)];

                      case 1:
                        return e.sent(), [2];
                    }
                  });
                });
              })]) : [3, 7];

            case 6:
              return l.sent(), this._broadcastRemoveEvent(a, u), [3, 9];

            case 7:
              return e instanceof ln$3 ? (o = e.reqId, u = e.source, [4, Se$1(function () {
                return r$1(c, void 0, void 0, function () {
                  return i$1(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return [4, n.remove([o])];

                      case 1:
                        return e.sent(), [2];
                    }
                  });
                });
              })]) : [3, 9];

            case 8:
              l.sent(), this._broadcastRemoveUnsentEvent(o, u), l.label = 9;

            case 9:
              return [2];
          }
        });
      });
    });
  }

  return e.prototype._broadcastUpdateEvent = function (e, t) {
    var n, r;

    try {
      for (var s$1 = s(this._observers.values()), i = s$1.next(); !i.done; i = s$1.next()) {
        i.value.onUpdate(e, t);
      }
    } catch (e) {
      n = {
        error: e
      };
    } finally {
      try {
        i && !i.done && (r = s$1.return) && r.call(s$1);
      } finally {
        if (n) throw n.error;
      }
    }
  }, e.prototype._broadcastRemoveEvent = function (e, t) {
    var n, r;

    try {
      for (var s$1 = s(this._observers.values()), i = s$1.next(); !i.done; i = s$1.next()) {
        i.value.onRemove(e, t);
      }
    } catch (e) {
      n = {
        error: e
      };
    } finally {
      try {
        i && !i.done && (r = s$1.return) && r.call(s$1);
      } finally {
        if (n) throw n.error;
      }
    }
  }, e.prototype._broadcastRemoveUnsentEvent = function (e, t) {
    var n, r;

    try {
      for (var s$1 = s(this._observers.values()), i = s$1.next(); !i.done; i = s$1.next()) {
        i.value.onRemoveUnsent(e, t);
      }
    } catch (e) {
      n = {
        error: e
      };
    } finally {
      try {
        i && !i.done && (r = s$1.return) && r.call(s$1);
      } finally {
        if (n) throw n.error;
      }
    }
  }, e.prototype.subscribe = function (e, t) {
    this._observers.set(e, t);
  }, e.prototype.unsubscribe = function (e) {
    this._observers.delete(e);
  }, e;
}(),
    Yt = function (t$1) {
  function n$1$1(e) {
    var n$1$1 = e.userId,
        i = e.ts,
        a = e.token,
        o = e.filter,
        u = t$1.call(this) || this,
        c = n$1(n$1({}, Ft), o),
        l = c.customTypes,
        h = c.includeEmpty,
        d$1$1 = c.includeFrozen;
    return u.method = d$1.GET, u.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n$1$1), "/my_group_channels/changelogs"), u.params = U$2({
      show_delivery_receipt: !0,
      show_member: !0,
      show_read_receipt: !0,
      change_ts: i,
      token: a,
      custom_types: l,
      show_empty: h,
      show_frozen: d$1$1
    }), u;
  }

  return t(n$1$1, t$1), n$1$1;
}(q$2),
    Jt = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.updatedChannels = n.updated.map(function (t) {
      return new Vr(e, t);
    }), r.deletedChannelUrls = n.deleted, r.hasMore = n.has_more, r.token = n.next, r;
  }

  return t(n, t$1), n;
}(F$1),
    Xt = function (t$1) {
  function n(e) {
    var n = e.channelUrl,
        r = e.isInternalCall,
        s = t$1.call(this) || this;
    return s.method = d$1.GET, s.path = "".concat(r ? Fe$1 : qe$1, "/").concat(encodeURIComponent(n)), s.params = {
      show_member: !0,
      show_read_receipt: !0,
      show_delivery_receipt: !0
    }, s;
  }

  return t(n, t$1), n;
}(q$2),
    Zt = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.channel = null, r.channel = new Vr(e, n), r;
  }

  return t(n, t$1), n;
}(F$1),
    $t = function (t$1) {
  function n(e) {
    var n = this,
        s = e.userId,
        i = e.token,
        a = e.limit,
        o = e.order,
        u = e.includeEmpty,
        c = e.myMemberStateFilter,
        l = e.superChannelFilter,
        h = e.publicChannelFilter,
        d$1$1 = e.unreadChannelFilter,
        _ = e.nicknameContainsFilter,
        f = e.channelNameContainsFilter,
        p = e.channelUrlsFilter,
        m = e.customTypesFilter,
        v = e.customTypeStartsWithFilter,
        g = e.hiddenChannelFilter,
        E = e.metadataOrderKeyFilter,
        y = e.metadataKey,
        C = e.metadataValues,
        N = e.metadataValueStartsWith,
        b = e.includeFrozen,
        M = e.includeMetaData,
        S = e.searchFilter,
        U$1 = e.userIdsFilter;
    return (n = t$1.call(this) || this).method = d$1.GET, n.path = "".concat(Ue$1, "/").concat(encodeURIComponent(s), "/my_group_channels"), n.params = U$2({
      token: i,
      limit: a,
      order: o,
      show_member: !0,
      show_read_receipt: !0,
      show_delivery_receipt: !0,
      show_empty: u,
      member_state_filter: c,
      super_mode: l,
      public_mode: h,
      unread_filter: d$1$1,
      members_nickname_contains: _,
      name_contains: f,
      channel_urls: p,
      custom_types: m,
      custom_type_startswith: v,
      hidden_mode: g,
      metadata_order_key: E,
      metadata_key: y,
      metadata_values: C,
      metadata_value_startswith: N,
      show_frozen: b,
      show_metadata: M
    }), S && S.query && S.fields && (n.params.search_query = S.query, n.params.search_fields = S.fields), U$1 && U$1.userIds && U$1.userIds.length > 0 && (U$1.includeMode ? (n.params.members_include_in = U$1.userIds, n.params.query_type = U$1.queryType.toUpperCase()) : n.params.members_exactly_in = U$1.userIds), n;
  }

  return t(n, t$1), n;
}(q$2),
    en = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    r.token = null, r.channels = [], r.ts = null;
    var s = n.next,
        i = n.channels,
        a = n.ts;
    return r.token = s, i && i.length > 0 && (r.channels = i.map(function (t) {
      return t.ts = a, new Vr(e, t);
    })), r.ts = null != a ? a : null, r;
  }

  return t(n, t$1), n;
}(F$1),
    tn = function (t$1) {
  function n(e) {
    var n = e.userId,
        r = e.filter,
        s = t$1.call(this) || this,
        i = r.myMemberStateFilter;
    return s.method = d$1.GET, s.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/group_channel_count"), s.params = {
      state: null != i ? i : Nt.ALL
    }, s;
  }

  return t(n, t$1), n;
}(q$2),
    nn = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.groupChannelCount = n.group_channel_count, r;
  }

  return t(n, t$1), n;
}(F$1),
    rn = function (t$1) {
  function n(e) {
    var n = e.userId,
        r = e.filter,
        s = t$1.call(this) || this,
        i = r.keys;
    return s.method = d$1.GET, s.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/unread_item_count"), s.params = {
      item_keys: i
    }, s;
  }

  return t(n, t$1), n;
}(q$2),
    sn = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return "number" == typeof n[Dt.GROUP_CHANNEL_UNREAD_MENTION_COUNT] && (r.groupChannelUnreadMentionCount = n[Dt.GROUP_CHANNEL_UNREAD_MENTION_COUNT]), "number" == typeof n[Dt.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT] && (r.groupChannelUnreadMessageCount = n[Dt.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]), "number" == typeof n[Dt.GROUP_CHANNEL_INVITATION_COUNT] && (r.groupChannelInvitationCount = n[Dt.GROUP_CHANNEL_INVITATION_COUNT]), "number" == typeof n[Dt.SUPER_UNREAD_MENTION_COUNT] && (r.superGroupChannelUnreadMentionCount = n[Dt.SUPER_UNREAD_MENTION_COUNT]), "number" == typeof n[Dt.SUPER_UNREAD_MESSAGE_COUNT] && (r.superGroupChannelUnreadMessageCount = n[Dt.SUPER_UNREAD_MESSAGE_COUNT]), "number" == typeof n[Dt.SUPER_INVITATION_COUNT] && (r.superGroupChannelInvitationCount = n[Dt.SUPER_INVITATION_COUNT]), "number" == typeof n[Dt.NONSUPER_UNREAD_MENTION_COUNT] && (r.nonSuperGroupChannelUnreadMentionCount = n[Dt.NONSUPER_UNREAD_MENTION_COUNT]), "number" == typeof n[Dt.NONSUPER_UNREAD_MESSAGE_COUNT] && (r.nonSuperGroupChannelUnreadMessageCount = n[Dt.NONSUPER_UNREAD_MESSAGE_COUNT]), "number" == typeof n[Dt.NONSUPER_INVITATION_COUNT] && (r.nonSuperGroupChannelInvitationCount = n[Dt.NONSUPER_INVITATION_COUNT]), r;
  }

  return t(n, t$1), n;
}(F$1),
    an = function (t$1) {
  function n(e) {
    var n = e.userId,
        r = t$1.call(this) || this;
    return r.method = d$1.GET, r.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/unread_channel_count"), r;
  }

  return t(n, t$1), n;
}(q$2),
    on = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.unreadCount = n.unread_count, r;
  }

  return t(n, t$1), n;
}(F$1),
    un = function (t$1) {
  function n(e) {
    var n = e.userId,
        r = e.filter,
        s = t$1.call(this) || this,
        i = r.channelCustomTypesFilter,
        a = r.superChannelFilter;
    return s.method = d$1.GET, s.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/unread_message_count"), s.params = {
      super_mode: null != a ? a : bt.ALL,
      custom_types: i
    }, s;
  }

  return t(n, t$1), n;
}(q$2),
    cn = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.unreadCount = n.unread_count, r;
  }

  return t(n, t$1), n;
}(F$1),
    ln = function (t$1) {
  function n(e) {
    var n = e.channelUrl,
        r = e.scheduledStatus,
        s = e.messageTypeFilter,
        i = t$1.call(this) || this;
    return i.method = d$1.GET, i.path = "".concat(Ve$1, "/count"), i.params = {
      channel_url: n,
      status: dn(r)
    }, s && (i.params.message_type = s), i;
  }

  return t(n, t$1), n;
}(q$2),
    hn = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.count = n.count, r;
  }

  return t(n, t$1), n;
}(F$1),
    dn = function (e) {
  if (e) {
    var t = [];
    e.forEach(function (e) {
      switch (e) {
        case Ct$1$1.PENDING:
          t.push(Ot$1$1.PENDING);
          break;

        case Ct$1$1.SENT:
          t.push(Ot$1$1.IN_QUEUE), t.push(Ot$1$1.SENT);
          break;

        case Ct$1$1.CANCELED:
          t.push(Ot$1$1.CANCELED);
          break;

        case Ct$1$1.FAILED:
          t.push(Ot$1$1.FAILED);
      }
    });
  }
},
    _n = function (t$1) {
  function n(e) {
    var n = this,
        s = e.userId,
        i = e.channelUrl,
        a$1 = e.coverUrl,
        o$1 = e.coverImage,
        u = e.isDistinct,
        c = e.isSuper,
        d$1$1 = e.isBroadcast,
        _ = e.isPublic,
        f = e.isExclusive,
        p = e.isDiscoverable,
        m = e.isStrict,
        v = e.isEphemeral,
        g = e.accessCode,
        E = e.name,
        y = e.data,
        C = e.customType,
        N = e.messageSurvivalSeconds,
        b = e.invitedUserIds,
        M = e.operatorUserIds;
    return (n = t$1.call(this) || this).method = d$1.POST, n.path = qe$1, n.params = U$2({
      user_ids: a([s], o(null != b ? b : []), !1).filter(function (e, t, n) {
        return t === n.indexOf(e);
      }),
      channel_url: i,
      cover_url: a$1,
      cover_file: o$1,
      is_distinct: u,
      is_super: c,
      is_broadcast: d$1$1,
      is_exclusive: f,
      is_public: _,
      is_discoverable: p,
      strict: m,
      is_ephemeral: v,
      access_code: g,
      name: E,
      data: y,
      custom_type: C,
      operator_ids: M,
      message_survival_seconds: N
    }), n;
  }

  return t(n, t$1), n;
}(q$2),
    fn = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.channel = new Vr(e, n), r.isCreated = n.is_created, r;
  }

  return t(n, t$1), n;
}(F$1),
    pn = function (t$1) {
  function n(e) {
    var n = e.userId,
        r = e.channelUrls,
        s = t$1.call(this) || this;
    return s.method = d$1.PUT, s.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/mark_as_read_all"), s.params = {
      channel_urls: r
    }, s;
  }

  return t(n, t$1), n;
}(q$2);

!function (t$1) {
  function n() {
    return null !== t$1 && t$1.apply(this, arguments) || this;
  }

  t(n, t$1);
}(F$1);

var mn = function (t$1) {
  function n(e) {
    var n = this,
        r = e.channelUrl,
        s = e.userId,
        i = e.accessCode;
    return (n = t$1.call(this) || this).method = d$1.PUT, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(r), "/join"), n.params = {
      user_id: s,
      access_code: i
    }, n;
  }

  return t(n, t$1), n;
}(q$2),
    vn = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.channel = new Vr(e, n), r;
  }

  return t(n, t$1), n;
}(F$1),
    gn = function (t$1) {
  function n(e, n, r) {
    var s = t$1.call(this, e, n, r) || this,
        i = r.data,
        a = i.member_count,
        o = void 0 === a ? null : a,
        u = i.joined_member_count,
        c = void 0 === u ? null : u,
        l = i.users,
        h = void 0 === l ? null : l;
    return s.memberCount = o, s.joinedMemberCount = c, s.members = Array.isArray(h) ? h.map(function (t) {
      return new It(e, t);
    }) : [new It(e, r.data)], s;
  }

  return t(n, t$1), n;
}(C),
    En = function (t$1) {
  function n(e) {
    var n = this,
        r = e.channelUrl,
        s = e.userId,
        i = e.shouldRemoveOperatorStatus;
    return (n = t$1.call(this) || this).method = d$1.PUT, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(r), "/leave"), n.params = {
      user_id: s,
      should_remove_operator_status: i
    }, n;
  }

  return t(n, t$1), n;
}(q$2);

!function (t$1) {
  function n(e, n) {
    return t$1.call(this, e, n) || this;
  }

  t(n, t$1);
}(F$1);

var yn = function (t$1) {
  function n(e, n, r) {
    var s = t$1.call(this, e, n, r) || this,
        i = r.data,
        a = i.member_count,
        o = void 0 === a ? null : a,
        u = i.joined_member_count,
        c = void 0 === u ? null : u;
    return s.memberCount = o, s.joinedMemberCount = c, s.member = new It(s._iid, r.data), s;
  }

  return t(n, t$1), n;
}(C),
    Cn = function (t$1) {
  function n(e) {
    var n = this,
        r = e.channelUrl,
        s = e.userIds;
    return (n = t$1.call(this) || this).method = d$1.POST, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(r), "/invite"), n.params = {
      user_ids: s
    }, n;
  }

  return t(n, t$1), n;
}(q$2),
    Nn = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.channel = new Vr(e, n), r;
  }

  return t(n, t$1), n;
}(F$1),
    bn = function (t$1) {
  function n(e, n, r) {
    var s = t$1.call(this, e, n, r) || this,
        i = r.data,
        o = i.member_count,
        u = void 0 === o ? null : o,
        c = i.joined_member_count,
        l = void 0 === c ? null : c,
        h = i.inviter,
        d = void 0 === h ? null : h,
        _ = i.invitees,
        f = void 0 === _ ? [] : _;
    return s.memberCount = u, s.joinedMemberCount = l, s.inviter = d ? new ct$1(e, d) : null, s.invitees = f.map(function (t) {
      return new It(e, t);
    }), s;
  }

  return t(n, t$1), n;
}(C),
    Mn = function (t$1) {
  function n(e) {
    var n = this,
        r = e.channelUrl,
        s = e.userId;
    return (n = t$1.call(this) || this).method = d$1.PUT, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(r), "/decline"), n.params = {
      user_id: s
    }, n;
  }

  return t(n, t$1), n;
}(q$2),
    Sn = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.channel = new Vr(e, n), r.channel.myMemberState = yt.NONE, r;
  }

  return t(n, t$1), n;
}(F$1),
    An = function (t$1) {
  function n(e, n, r) {
    var s = t$1.call(this, e, n, r) || this,
        i = r.data,
        o = i.member_count,
        u = void 0 === o ? null : o,
        c = i.joined_member_count,
        l = void 0 === c ? null : c,
        h = i.inviter,
        d = void 0 === h ? null : h,
        _ = i.invitee,
        f = void 0 === _ ? null : _;
    return s.memberCount = u, s.joinedMemberCount = l, s.inviter = d ? new ct$1(e, d) : null, s.invitee = f ? new It(e, f) : null, s;
  }

  return t(n, t$1), n;
}(C),
    Tn = function (t$1) {
  function n(e) {
    var n = e.channelUrl;
    return t$1.call(this, {
      code: "READ",
      ackRequired: !0,
      payload: {
        channel_url: n
      }
    }) || this;
  }

  return t(n, t$1), n;
}(H$2),
    Un = function (t$1) {
  function n(e, n, r) {
    var s = t$1.call(this, e, "READ", r) || this;
    return s.readStatus = new wt(e, r), s;
  }

  return t(n, t$1), n;
}(B$2),
    In = function (t$1) {
  function n(e) {
    var n = e.channelUrl,
        s = e.userId,
        i = t$1.call(this) || this;
    return (i = t$1.call(this) || this).method = d$1.PUT, i.path = "".concat(qe$1, "/").concat(encodeURIComponent(n), "/messages/mark_as_delivered"), i.params = U$2({
      userId: s
    }), i;
  }

  return t(n, t$1), n;
}(q$2);

!function (t$1) {
  function n() {
    return null !== t$1 && t$1.apply(this, arguments) || this;
  }

  t(n, t$1);
}(F$1);

var wn,
    Dn = function (t$1) {
  function n(e, n, r) {
    var s = t$1.call(this, e, "DLVR", r) || this;
    return s.channelUrl = r.channel_url, s.deliveredStateUpdate = r.updated, s;
  }

  return t(n, t$1), n;
}(B$2),
    Ln = function (t$1) {
  function n(e) {
    var n = this,
        r = e.channelUrl,
        s = e.userId,
        i = e.hidePreviousMessages,
        a = e.allowAutoUnhide;
    return (n = t$1.call(this) || this).method = d$1.PUT, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(r), "/hide"), n.params = {
      user_id: s,
      hide_previous_messages: i,
      allow_auto_unhide: a
    }, n;
  }

  return t(n, t$1), n;
}(q$2),
    Rn = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    r.messageOffsetTimestamp = null;
    var s = n.ts_message_offset;
    return r.messageOffsetTimestamp = null != s ? s : null, r;
  }

  return t(n, t$1), n;
}(F$1),
    On = function (t$1) {
  function n(e, n, r) {
    var s = t$1.call(this, e, "SYEV", r) || this;
    return s.allowAutoUnhide = null, s.hidePreviousMessages = null, s.messageOffsetTimestamp = null, r.data && (s.allowAutoUnhide = r.data.allow_auto_unhide, s.hidePreviousMessages = r.data.hide_previous_messages), s.messageOffsetTimestamp = r.ts_message_offset, s;
  }

  return t(n, t$1), n;
}(B$2),
    kn = function (t$1) {
  function n(e) {
    var n = e.channelUrl,
        r = e.time;
    return t$1.call(this, {
      code: "TPST",
      ackRequired: !1,
      payload: {
        channel_url: n,
        time: r
      }
    }) || this;
  }

  return t(n, t$1), n;
}(H$2),
    Fn = function (t$1) {
  function n(e, n, r) {
    var s = t$1.call(this, e, "SYEV", r) || this;
    return s.user = new ct$1(e, r.data), s;
  }

  return t(n, t$1), n;
}(B$2),
    Pn = function (t$1) {
  function n(e) {
    var n = e.channelUrl,
        r = e.time;
    return t$1.call(this, {
      code: "TPEN",
      ackRequired: !1,
      payload: {
        channel_url: n,
        time: r
      }
    }) || this;
  }

  return t(n, t$1), n;
}(H$2),
    xn = function (t$1) {
  function n(e, n, r) {
    var s = t$1.call(this, e, "SYEV", r) || this;
    return s.user = new ct$1(e, r.data), s;
  }

  return t(n, t$1), n;
}(B$2),
    Hn = function (t$1) {
  function n(e) {
    var n = e.channelUrl,
        r = e.messageId;
    return t$1.call(this, {
      code: "MACK",
      ackRequired: !1,
      payload: {
        channel_url: n,
        msg_id: r
      }
    }) || this;
  }

  return t(n, t$1), n;
}(H$2),
    Vn = function (n) {
  function r$1$1(e, t) {
    var r,
        s,
        i,
        a,
        o,
        u,
        c,
        l,
        h,
        d,
        _,
        f,
        p,
        m,
        v,
        g,
        E,
        y,
        C,
        N,
        b = this;

    return (b = n.call(this, e, t) || this).includeEmpty = !1, b.includeFrozen = !0, b.includeMetaData = !0, b.channelUrlsFilter = null, b.customTypesFilter = null, b.customTypeStartsWithFilter = null, b.nicknameContainsFilter = "", b.channelNameContainsFilter = "", b.myMemberStateFilter = Nt.ALL, b.unreadChannelFilter = Mt.ALL, b.superChannelFilter = bt.ALL, b.publicChannelFilter = Ct.ALL, b.hiddenChannelFilter = St.UNHIDDEN, b.searchFilter = {
      fields: [],
      query: null
    }, b.userIdsFilter = {
      userIds: [],
      includeMode: !0,
      queryType: Tt.AND
    }, b.metadataKey = null, b.metadataValues = null, b.metadataOrderKeyFilter = null, b.metadataValueStartsWith = null, b.order = K$1.LATEST_LAST_MESSAGE, b.includeEmpty = null !== (r = t.includeEmpty) && void 0 !== r && r, b.includeFrozen = null === (s = t.includeFrozen) || void 0 === s || s, b.includeMetaData = null === (i = t.includeMetaData) || void 0 === i || i, b.channelUrlsFilter = null !== (a = t.channelUrlsFilter) && void 0 !== a ? a : null, b.customTypesFilter = null !== (o = t.customTypesFilter) && void 0 !== o ? o : null, b.customTypeStartsWithFilter = null !== (u = t.customTypeStartsWithFilter) && void 0 !== u ? u : "", b.nicknameContainsFilter = null !== (c = t.nicknameContainsFilter) && void 0 !== c ? c : "", b.channelNameContainsFilter = null !== (l = t.channelNameContainsFilter) && void 0 !== l ? l : "", b.myMemberStateFilter = null !== (h = t.myMemberStateFilter) && void 0 !== h ? h : Nt.ALL, b.unreadChannelFilter = null !== (d = t.unreadChannelFilter) && void 0 !== d ? d : Mt.ALL, b.superChannelFilter = null !== (_ = t.superChannelFilter) && void 0 !== _ ? _ : bt.ALL, b.publicChannelFilter = null !== (f = t.publicChannelFilter) && void 0 !== f ? f : Ct.ALL, b.hiddenChannelFilter = null !== (p = t.hiddenChannelFilter) && void 0 !== p ? p : St.UNHIDDEN, b.searchFilter = null !== (m = t.searchFilter) && void 0 !== m ? m : {
      fields: [],
      query: null
    }, b.userIdsFilter = null !== (v = t.userIdsFilter) && void 0 !== v ? v : {
      userIds: [],
      includeMode: !0,
      queryType: Tt.AND
    }, b.metadataKey = null !== (g = t.metadataKey) && void 0 !== g ? g : null, b.metadataValues = null !== (E = t.metadataValues) && void 0 !== E ? E : null, b.metadataOrderKeyFilter = null !== (y = t.metadataOrderKeyFilter) && void 0 !== y ? y : null, b.metadataValueStartsWith = null !== (C = t.metadataValueStartsWith) && void 0 !== C ? C : null, b.order = null !== (N = t.order) && void 0 !== N ? N : K$1.LATEST_LAST_MESSAGE, b;
  }

  return t(r$1$1, n), r$1$1.prototype._validate = function () {
    return n.prototype._validate.call(this) && y("boolean", this.includeEmpty) && y("boolean", this.includeFrozen) && y("boolean", this.includeMetaData) && y("string", this.channelNameContainsFilter) && E$1("string", this.channelUrlsFilter, !0) && E$1("string", this.customTypesFilter, !0) && y("string", this.customTypeStartsWithFilter) && y("string", this.nicknameContainsFilter) && m(Nt, this.myMemberStateFilter) && m(bt, this.superChannelFilter) && m(Ct, this.publicChannelFilter) && m(Mt, this.unreadChannelFilter) && m(St, this.hiddenChannelFilter) && E$1(Ut, this.searchFilter.fields) && y("string", this.searchFilter.query, !0) && E$1("string", this.userIdsFilter.userIds) && y("boolean", this.userIdsFilter.includeMode) && m(Tt, this.userIdsFilter.queryType) && m(K$1, this.order) && y("string", this.metadataOrderKeyFilter, !0) && y("string", this.metadataKey, !0) && E$1("string", this.metadataValues, !0) && y("string", this.metadataValueStartsWith, !0);
  }, r$1$1.prototype.serialize = function () {
    return st$1(this);
  }, r$1$1.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, [4, Bn.of(this._iid).getMyGroupChannels(this._token, this, this.limit)]) : [3, 2] : [3, 5];

          case 1:
            return e = r.sent(), t = e.channels, n = e.token, this._token = n, this._hasNext = !!n, this._isLoading = !1, [2, t];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, r$1$1;
}(bn$2),
    Gn = function () {
  function e(e) {
    var t = e.top,
        n = void 0 === t ? Number.MAX_SAFE_INTEGER : t,
        r = e.bottom,
        s = void 0 === r ? 0 : r;
    this.top = n, this.bottom = s;
  }

  return e.prototype.includes = function () {
    for (var e = this, t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];

    return t.every(function (t) {
      return e.top <= t && t <= e.bottom;
    });
  }, e.prototype.overlap = function (e) {
    return this.includes(e.top) || this.includes(e.bottom);
  }, e.prototype.extends = function () {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

    this.top = Math.min.apply(Math, a([this.top], o(e), !1)), this.bottom = Math.max.apply(Math, a([this.bottom], o(e), !1));
  }, e;
}(),
    qn = {},
    Bn = function () {
  function e(e, t) {
    var n = t.sdkState,
        r$1$1 = t.cacheContext,
        s$1 = t.dispatcher,
        i$1$1 = t.sessionManager,
        a = t.requestQueue,
        o = t.logger,
        u = this;
    this._leftChannels = new Map(), this._markAsReadAllLastSentAt = 0, this._iid = e, this._sdkState = n, this._sessionManager = i$1$1, this._requestQueue = a, this._dispatcher = s$1, this._logger = o, this._groupChannelHandlers = new Map(), this._groupChannelCache = new Rt(this._iid, {
      sdkState: n,
      cacheContext: r$1$1
    }), this._unsentMessageCache = new ue(this._iid, {
      sdkState: n,
      cacheContext: r$1$1
    }), this._messageCache = new he(this._iid, {
      sdkState: n,
      cacheContext: r$1$1,
      unsentMessageCache: this._unsentMessageCache
    }), this._groupChannelBroadcast = new Qt({
      groupChannelCache: this._groupChannelCache,
      messageCache: this._messageCache,
      unsentMessageCache: this._unsentMessageCache,
      dispatcher: s$1
    }), this._messageBroadcast = new Wt({
      messageCache: this._messageCache,
      unsentMessageCache: this._unsentMessageCache,
      dispatcher: s$1,
      logger: o
    }), setInterval(function () {
      var e,
          t,
          n = function (e) {
        e.invalidateTypingStatus() && (u._dispatcher.dispatch(new jt({
          channels: [e],
          source: Vt.EVENT_CHANNEL_TYPING_STATUS_UPDATE
        })), u._groupChannelHandlers.forEach(function (t) {
          t.onTypingStatusUpdated(e);
        }));
      };

      try {
        for (var r = s(u._groupChannelCache.channels), s$1 = r.next(); !s$1.done; s$1 = r.next()) {
          n(s$1.value);
        }
      } catch (t) {
        e = {
          error: t
        };
      } finally {
        try {
          s$1 && !s$1.done && (t = r.return) && t.call(r);
        } finally {
          if (e) throw e.error;
        }
      }
    }, 1e3), this._dispatcher.on(function (e) {
      e instanceof B$2 ? u._handleEvent(e) : e instanceof fe && r$1(u, void 0, void 0, function () {
        var t, n;
        return i$1(this, function (r) {
          switch (r.label) {
            case 0:
              return t = e.message, [4, this.getChannel(t.channelUrl, !0)];

            case 1:
              return n = r.sent(), t instanceof Vt$2 ? n._autoResendUserMessage(t) : t instanceof Wt$2 && n._autoResendFileMessage(t), [2];
          }
        });
      });
    }), qn[e] = this;
  }

  return e.of = function (e) {
    return qn[e];
  }, Object.defineProperty(e.prototype, "handlers", {
    get: function () {
      return a([], o(this._groupChannelHandlers.values()), !1);
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.buildGroupChannelFromSerializedData = function (e) {
    var t = ot$1(e);
    return new Vr(this._iid, Vr.payloadify(t));
  }, e.prototype.buildGroupChannelListQueryFromSerializedData = function (e) {
    var t = ot$1(e);
    return new Vn(this._iid, t);
  }, e.prototype.buildMemberFromSerializedData = function (e) {
    var t = ot$1(e);
    return new It(this._iid, It.payloadify(t));
  }, e.prototype.getChannelFromCache = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._groupChannelCache.get(e)];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, e.prototype.getChannelsFromCache = function (e, t, n) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return [4, this._groupChannelCache.fetch({
              token: e,
              filter: t,
              order: n
            })];

          case 1:
            return [2, r.sent()];
        }
      });
    });
  }, e.prototype._handleEvent = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t,
          r$1$1,
          s$1,
          a,
          o,
          u,
          c$1,
          l,
          h$2,
          p,
          m,
          v,
          g,
          E,
          y,
          N,
          A$1,
          T,
          U,
          I,
          w,
          D,
          L,
          R,
          O,
          k,
          F,
          P,
          x,
          H$1,
          G,
          q,
          B,
          z,
          Y,
          J,
          X,
          Z,
          $,
          ee,
          te$1,
          ne,
          re,
          se,
          ie,
          ae,
          oe,
          ue,
          ce,
          le,
          he,
          de,
          _e,
          fe,
          pe,
          me$1,
          ve,
          ge,
          Ee,
          ye,
          Ce,
          Ne,
          be$1,
          Me,
          Se$1$1,
          Ae,
          Te,
          Ue,
          Le,
          Re,
          Oe,
          ke,
          Fe,
          Pe,
          xe,
          He,
          Ve,
          Ge,
          qe,
          Be,
          Ke,
          je$1,
          ze,
          st,
          it,
          at,
          ot,
          ut,
          ct,
          lt,
          Et,
          Ct,
          Nt,
          bt,
          Mt,
          St,
          At,
          Tt,
          Ut,
          It,
          wt,
          Dt,
          Lt,
          Rt,
          Ot,
          kt,
          Ft,
          Pt,
          xt,
          Ht,
          Gt,
          qt,
          Bt,
          Kt,
          Qt,
          Wt,
          Yt,
          Jt,
          Xt,
          Zt,
          $t,
          en,
          tn = this;

      return i$1(this, function (nn) {
        switch (nn.label) {
          case 0:
            switch (nn.trys.push([0, 72,, 73]), e.code) {
              case "MESG":
              case "FILE":
              case "ADMM":
              case "BRDM":
                return [3, 1];

              case "MEDI":
              case "FEDI":
              case "AEDI":
                return [3, 4];

              case "DELM":
                return [3, 7];

              case "READ":
                return [3, 10];

              case "DLVR":
                return [3, 13];

              case "MRCT":
                return [3, 15];

              case "MTHD":
                return [3, 19];

              case "MCNT":
                return [3, 23];

              case "SYEV":
                return [3, 32];

              case "USEV":
                return [3, 70];
            }

            return [3, 71];

          case 1:
            return l = null, "MESG" === e.code ? l = e.as(gt$2) : "FILE" === e.code ? l = e.as(Jt$2) : "ADMM" !== e.code && "BRDM" != e.code || (l = e.as(A)), l ? (t = l.message, r$1$1 = l.isMentioned, s$1 = l.forceUpdateLastMessage, t.channelType !== ne$1.GROUP ? [3, 3] : (Se$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e;
                return i$1(this, function (n) {
                  return e = new Hn(t), this._requestQueue.send(e), [2];
                });
              });
            }), L = this._groupChannelCache.isCachedInMemory(t.channelUrl), v = t instanceof xt$2 && t.sender.userId === this._sdkState.userId, [4, this.getChannel(t.channelUrl, !0)])) : [3, 3];

          case 2:
            if ((a = nn.sent()).hiddenState = Fr.UNHIDDEN, t instanceof xt$2) {
              o = St$1$1.of(this._iid).useMemberInfoInMessage;

              try {
                for (u = s(a.members), c$1 = u.next(); !c$1.done; c$1 = u.next()) if ((Be = c$1.value).userId === t.sender.userId) {
                  o ? (t.sender.nickname = Be.nickname, t.sender.plainProfileUrl = Be.plainProfileUrl, t.sender.metaData = Be.metaData, t.sender.isBlockedByMe = Be.isBlockedByMe) : (Be.nickname = t.sender.nickname, Be.plainProfileUrl = t.sender.plainProfileUrl, Be.metaData = t.sender.metaData, Be.isBlockedByMe = t.sender.isBlockedByMe);
                  break;
                }
              } catch (e) {
                Bt = {
                  error: e
                };
              } finally {
                try {
                  c$1 && !c$1.done && (Kt = u.return) && Kt.call(u);
                } finally {
                  if (Bt) throw Bt.error;
                }
              }

              o && r$1$1 && t.mentionedUsers.forEach(function (e) {
                var t, n;

                try {
                  for (var r = s(a.members), s$1 = r.next(); !s$1.done; s$1 = r.next()) {
                    var i = s$1.value;

                    if (e.userId === i.userId) {
                      e.nickname = i.nickname, e.plainProfileUrl = i.plainProfileUrl, e.metaData = i.metaData;
                      break;
                    }
                  }
                } catch (e) {
                  t = {
                    error: e
                  };
                } finally {
                  try {
                    s$1 && !s$1.done && (n = r.return) && n.call(r);
                  } finally {
                    if (t) throw t.error;
                  }
                }
              }), v && (E = this._sessionManager.currentUser) && (E.nickname = t.sender.nickname, E.plainProfileUrl = t.sender.plainProfileUrl, E.metaData = t.sender.metaData);
            }

            t.silent && !v || (a.isEphemeral || L) && ((!a.lastMessage || a.lastMessage.createdAt < t.createdAt) && (a.lastMessage = t), v || a._updateUnreadCount(a.unreadMessageCount + 1, a.unreadMentionCount + (r$1$1 ? 1 : 0))), s$1 && (!a.lastMessage || a.lastMessage.createdAt < t.createdAt) && (a.lastMessage = t), this._dispatcher.dispatch(new jt({
              channels: [a],
              source: Vt.EVENT_MESSAGE_RECEIVED
            })), t.silent && !v || Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r;
                return i$1(this, function (s$1) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) t.value.onChannelChanged(a);
                  } catch (e) {
                    n = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (r = e.return) && r.call(e);
                    } finally {
                      if (n) throw n.error;
                    }
                  }

                  return [2];
                });
              });
            }), this._dispatcher.dispatch(new un$3({
              messages: [t],
              source: $t$2.EVENT_MESSAGE_RECEIVED
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, n, s$1, i$1$1, o;
                return i$1(this, function (u) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), n = e.next(); !n.done; n = e.next()) (s$1 = n.value).onMessageReceived(a, t), r$1$1 && s$1.onMentionReceived(a, t);
                  } catch (e) {
                    i$1$1 = {
                      error: e
                    };
                  } finally {
                    try {
                      n && !n.done && (o = e.return) && o.call(e);
                    } finally {
                      if (i$1$1) throw i$1$1.error;
                    }
                  }

                  return [2];
                });
              });
            }), nn.label = 3;

          case 3:
            return [3, 71];

          case 4:
            return l = null, "MEDI" === e.code ? l = e.as(Tt$2) : "FEDI" === e.code ? l = e.as(It$2) : "AEDI" === e.code && (l = e.as(c)), l ? (h$2 = l.message, p = l.mentionCountChange, h$2.channelType !== ne$1.GROUP ? [3, 6] : (L = this._groupChannelCache.isCachedInMemory(h$2.channelUrl), [4, this.getChannel(h$2.channelUrl, !0)])) : [3, 6];

          case 5:
            m = nn.sent(), v = h$2 instanceof xt$2 && h$2.sender.userId === this._sdkState.userId, g = !1, v ? (E = this._sessionManager.currentUser) && (E.nickname = h$2.sender.nickname, E.plainProfileUrl = h$2.sender.plainProfileUrl, E.metaData = h$2.sender.metaData) : m.isReadMessage(h$2) && 0 !== p && !h$2.silent && L && (m._updateUnreadCount(m.unreadMessageCount, m.unreadMentionCount + p), g = !0), !m.lastMessage || m.lastMessage.createdAt < h$2.createdAt ? (m.lastMessage = h$2, g = !0) : m.lastMessage.isIdentical(h$2) && (L ? m.lastMessage.updatedAt < h$2.updatedAt && (m.lastMessage = h$2, g = !0) : g = !0), g && (this._dispatcher.dispatch(new jt({
              channels: [m],
              source: Vt.EVENT_MESSAGE_UPDATED
            })), h$2.silent && !v || Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r;
                return i$1(this, function (s$1) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) t.value.onChannelChanged(m);
                  } catch (e) {
                    n = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (r = e.return) && r.call(e);
                    } finally {
                      if (n) throw n.error;
                    }
                  }

                  return [2];
                });
              });
            })), this._dispatcher.dispatch(new un$3({
              messages: [h$2],
              source: $t$2.EVENT_MESSAGE_UPDATED
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r, s$1;
                return i$1(this, function (i) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) (n = t.value).onMessageUpdated(m, h$2), 0 !== p && n.onMentionReceived(m, h$2);
                  } catch (e) {
                    r = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (s$1 = e.return) && s$1.call(e);
                    } finally {
                      if (r) throw r.error;
                    }
                  }

                  return [2];
                });
              });
            }), nn.label = 6;

          case 6:
            return [3, 71];

          case 7:
            return y = e.as(wt$2), Z = y.channelUrl, F = y.channelType, N = y.messageId, F !== ne$1.GROUP ? [3, 9] : [4, this.getChannel(Z, !0)];

          case 8:
            A$1 = nn.sent(), this._dispatcher.dispatch(new cn$3({
              messageIds: [N],
              source: $t$2.EVENT_MESSAGE_DELETED
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r;
                return i$1(this, function (s$1) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) t.value.onMessageDeleted(A$1, N);
                  } catch (e) {
                    n = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (r = e.return) && r.call(e);
                    } finally {
                      if (n) throw n.error;
                    }
                  }

                  return [2];
                });
              });
            }), nn.label = 9;

          case 9:
            return [3, 71];

          case 10:
            return (T = e.as(Un).readStatus).channelType !== ne$1.GROUP ? [3, 12] : (L = this._groupChannelCache.isCachedInMemory(T.channelUrl), [4, this.getChannel(T.channelUrl, !0)]);

          case 11:
            U = nn.sent(), L && U._updateUnreadMemberState(T.reader.userId, T.readAt), T.reader.userId === this._sdkState.userId ? L ? (U.unreadMessageCount > 0 || U.unreadMentionCount > 0) && (U._updateUnreadCount(0, 0), this._dispatcher.dispatch(new jt({
              channels: [U],
              source: Vt.EVENT_CHANNEL_READ
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r;
                return i$1(this, function (s$1) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) t.value.onChannelChanged(U);
                  } catch (e) {
                    n = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (r = e.return) && r.call(e);
                    } finally {
                      if (n) throw n.error;
                    }
                  }

                  return [2];
                });
              });
            })) : 0 !== U.unreadMessageCount && 0 !== U.unreadMentionCount || (this._dispatcher.dispatch(new jt({
              channels: [U],
              source: Vt.EVENT_CHANNEL_READ
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r;
                return i$1(this, function (s$1) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) t.value.onChannelChanged(U);
                  } catch (e) {
                    n = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (r = e.return) && r.call(e);
                    } finally {
                      if (n) throw n.error;
                    }
                  }

                  return [2];
                });
              });
            })) : (this._dispatcher.dispatch(new jt({
              channels: [U],
              source: Vt.EVENT_CHANNEL_READ
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r;
                return i$1(this, function (s$1) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) t.value.onUnreadMemberStatusUpdated(U);
                  } catch (e) {
                    n = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (r = e.return) && r.call(e);
                    } finally {
                      if (n) throw n.error;
                    }
                  }

                  return [2];
                });
              });
            })), nn.label = 12;

          case 12:
            return [3, 71];

          case 13:
            return I = e.as(Dn), Z = I.channelUrl, w = I.deliveredStateUpdate, D = void 0 === w ? {} : w, L = this._groupChannelCache.isCachedInMemory(Z), [4, this.getChannel(Z, !0)];

          case 14:
            if (R = nn.sent(), L) for (O in D) R._updateUndeliveredMemberState(O, D[O]);
            return this._dispatcher.dispatch(new jt({
              channels: [R],
              source: Vt.EVENT_CHANNEL_DELIVERED
            })), Object.keys(D).some(function (e) {
              return e !== tn._sdkState.userId;
            }) && Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r;
                return i$1(this, function (s$1) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) t.value.onUndeliveredMemberStatusUpdated(R);
                  } catch (e) {
                    n = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (r = e.return) && r.call(e);
                    } finally {
                      if (n) throw n.error;
                    }
                  }

                  return [2];
                });
              });
            }), [3, 71];

          case 15:
            return k = e.as(H), Z = k.channelUrl, F = k.channelType, P = k.event, F !== ne$1.GROUP ? [3, 18] : [4, this.getChannel(Z, !0)];

          case 16:
            return x = nn.sent(), [4, this.getMessageFromCache(P.messageId)];

          case 17:
            (q = nn.sent()) && (q.applyReactionEvent(P), this._dispatcher.dispatch(new un$3({
              messages: [q],
              source: $t$2.EVENT_MESSAGE_REACTION_UPDATED
            }))), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r;
                return i$1(this, function (s$1) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) t.value.onReactionUpdated(x, P);
                  } catch (e) {
                    n = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (r = e.return) && r.call(e);
                    } finally {
                      if (n) throw n.error;
                    }
                  }

                  return [2];
                });
              });
            }), nn.label = 18;

          case 18:
            return [3, 71];

          case 19:
            return (H$1 = e.as(T$1).event).channelType !== ne$1.GROUP ? [3, 22] : [4, this.getChannel(H$1.channelUrl, !0)];

          case 20:
            return G = nn.sent(), [4, this.getMessageFromCache(H$1.targetMessageId)];

          case 21:
            (q = nn.sent()) && (q.applyThreadInfoUpdateEvent(H$1), this._dispatcher.dispatch(new un$3({
              messages: [q],
              source: $t$2.EVENT_MESSAGE_THREADINFO_UPDATED
            }))), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r;
                return i$1(this, function (s$1) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) t.value.onThreadInfoUpdated(G, H$1);
                  } catch (e) {
                    n = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (r = e.return) && r.call(e);
                    } finally {
                      if (n) throw n.error;
                    }
                  }

                  return [2];
                });
              });
            }), nn.label = 22;

          case 22:
            return [3, 71];

          case 23:
            B = e.as(h).groupChannelMemberCounts, z = [], nn.label = 24;

          case 24:
            nn.trys.push([24, 29, 30, 31]), Y = s(B), J = Y.next(), nn.label = 25;

          case 25:
            return J.done ? [3, 28] : (X = J.value, Z = X.channelUrl, Ue = X.memberCount, Le = X.joinedMemberCount, $ = X.updatedAt, [4, this.getChannelFromCache(Z)]);

          case 26:
            (ee = nn.sent()) && ee._setLatestMemberCount(Ue, Le, $) && z.push(ee), nn.label = 27;

          case 27:
            return J = Y.next(), [3, 25];

          case 28:
            return [3, 31];

          case 29:
            return te$1 = nn.sent(), Qt = {
              error: te$1
            }, [3, 31];

          case 30:
            try {
              J && !J.done && (Wt = Y.return) && Wt.call(Y);
            } finally {
              if (Qt) throw Qt.error;
            }

            return [7];

          case 31:
            return z.length > 0 && (this._dispatcher.dispatch(new jt({
              channels: z,
              source: Vt.EVENT_CHANNEL_MEMBER_COUNT_UPDATED
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                var e, t, n, r;
                return i$1(this, function (s$1) {
                  try {
                    for (e = s(this._groupChannelHandlers.values()), t = e.next(); !t.done; t = e.next()) t.value.onChannelMemberCountChanged(z);
                  } catch (e) {
                    n = {
                      error: e
                    };
                  } finally {
                    try {
                      t && !t.done && (r = e.return) && r.call(e);
                    } finally {
                      if (n) throw n.error;
                    }
                  }

                  return [2];
                });
              });
            })), [3, 71];

          case 32:
            if (!(ne = e.as(C).event).isGroupChannelEvent) return [3, 69];

            switch (ne.category) {
              case _.CHANNEL_JOIN:
                return [3, 33];

              case _.CHANNEL_LEAVE:
                return [3, 35];

              case _.CHANNEL_OPERATOR_UPDATE:
                return [3, 39];

              case _.CHANNEL_INVITE:
                return [3, 41];

              case _.CHANNEL_DECLINE_INVITE:
                return [3, 43];

              case _.TYPING_START:
              case _.TYPING_END:
                return [3, 45];

              case _.USER_CHANNEL_MUTE:
              case _.USER_CHANNEL_UNMUTE:
                return [3, 47];

              case _.USER_CHANNEL_BAN:
                return [3, 49];

              case _.USER_CHANNEL_UNBAN:
                return [3, 53];

              case _.CHANNEL_FREEZE:
              case _.CHANNEL_UNFREEZE:
                return [3, 55];

              case _.CHANNEL_HIDE:
                return [3, 57];

              case _.CHANNEL_UNHIDE:
                return [3, 59];

              case _.CHANNEL_DELETED:
                return [3, 61];

              case _.CHANNEL_PROP_CHANGED:
                return [3, 63];

              case _.CHANNEL_META_DATA_CHANGED:
                return [3, 65];

              case _.CHANNEL_META_COUNTERS_CHANGED:
                return [3, 67];
            }

            return [3, 69];

          case 33:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 34:
            return re = nn.sent(), se = e.as(gn), ie = se.memberCount, ae = se.joinedMemberCount, oe = se.members, ue = !1, oe.forEach(function (e) {
              re.isExclusive || re.isSuper || re.isBroadcast ? ue = ue || re._setLatestMemberCount(ie, ae, ne.ts) : (e.state = yt.JOINED, re.addMember(e, ne.ts), tn._updateJoinedMemberCount(re)), e.userId === tn._sdkState.userId && (re.myMemberState = yt.JOINED);
            }), this._dispatcher.dispatch(new jt({
              channels: [re],
              source: Vt.EVENT_CHANNEL_JOINED
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    var t, n;

                    try {
                      for (var r = s(oe), s$1 = r.next(); !s$1.done; s$1 = r.next()) {
                        var i = s$1.value;
                        e.onUserJoined(re, i);
                      }
                    } catch (e) {
                      t = {
                        error: e
                      };
                    } finally {
                      try {
                        s$1 && !s$1.done && (n = r.return) && n.call(r);
                      } finally {
                        if (t) throw t.error;
                      }
                    }

                    re.isBroadcast && ue && e.onChannelMemberCountChanged([re]);
                  }), [2];
                });
              });
            }), [3, 69];

          case 35:
            return (Ke = this._leftChannels.get(ne.channelUrl)) ? (le = Ke.channel, [3, 38]) : [3, 36];

          case 36:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 37:
            le = nn.sent(), nn.label = 38;

          case 38:
            return ce = le, he = e.as(yn), Ue = he.memberCount, Le = he.joinedMemberCount, de = he.member, _e = !1, ce.isExclusive || ce.isSuper || ce.isBroadcast ? _e = ce._setLatestMemberCount(Ue, Le, ne.ts) : (ce.removeMember(de), this._updateJoinedMemberCount(ce)), de.userId === this._sdkState.userId ? ce.isPublic ? (ce.myMemberState = yt.NONE, ce.invitedAt = 0, ce.joinedAt = 0, ce._updateUnreadCount(0, 0), this._dispatcher.dispatch(new jt({
              channels: [ce],
              source: Vt.EVENT_CHANNEL_LEFT
            }))) : (this._markAsLeave(ce), this._dispatcher.dispatch(new zt({
              channelUrls: [ce.url],
              source: Vt.EVENT_CHANNEL_LEFT
            }))) : this._dispatcher.dispatch(new jt({
              channels: [ce],
              source: Vt.EVENT_CHANNEL_LEFT
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onUserLeft(ce, de), ce.isBroadcast && _e && e.onChannelMemberCountChanged([ce]);
                  }), [2];
                });
              });
            }), [3, 69];

          case 39:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 40:
            fe = nn.sent(), pe = e.as(d).operators, me$1 = pe.map(function (e) {
              return e.userId;
            });

            try {
              for (ve = s(fe.members), ge = ve.next(); !ge.done; ge = ve.next()) (Be = ge.value).role = me$1.includes(Be.userId) ? re$1.OPERATOR : re$1.NONE;
            } catch (e) {
              Yt = {
                error: e
              };
            } finally {
              try {
                ge && !ge.done && (Jt = ve.return) && Jt.call(ve);
              } finally {
                if (Yt) throw Yt.error;
              }
            }

            return fe.myRole = me$1.includes(this._sdkState.userId) ? re$1.OPERATOR : re$1.NONE, this._dispatcher.dispatch(new jt({
              channels: [fe],
              source: Vt.EVENT_CHANNEL_OPERATOR_UPDATED
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onOperatorUpdated(fe, pe);
                  }), [2];
                });
              });
            }), [3, 69];

          case 41:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 42:
            Ee = nn.sent(), ye = e.as(bn), Ue = ye.memberCount, Le = ye.joinedMemberCount, Ce = ye.inviter, (Ne = ye.invitees).forEach(function (e) {
              return e.state = yt.INVITED;
            });

            try {
              for (be$1 = s(Ne), Me = be$1.next(); !Me.done; Me = be$1.next()) Se$1$1 = Me.value, Ee.isExclusive || Ee.isSuper || Ee.isBroadcast ? Ee._setLatestMemberCount(Ue, Le, ne.ts) : Ee.addMember(Se$1$1, ne.ts), this._sdkState.userId === Se$1$1.userId && (Ee.hiddenState = Fr.UNHIDDEN, Ee.myMemberState !== yt.JOINED && (Ee.myMemberState = yt.INVITED), Ee.invitedAt = ne.ts);
            } catch (e) {
              Xt = {
                error: e
              };
            } finally {
              try {
                Me && !Me.done && (Zt = be$1.return) && Zt.call(be$1);
              } finally {
                if (Xt) throw Xt.error;
              }
            }

            return this._dispatcher.dispatch(new jt({
              channels: [Ee],
              source: Vt.EVENT_CHANNEL_INVITED
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onUserReceivedInvitation(Ee, Ce, Ne);
                  }), [2];
                });
              });
            }), [3, 69];

          case 43:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 44:
            return Ae = nn.sent(), Te = e.as(An), Ue = Te.memberCount, Le = Te.joinedMemberCount, Re = Te.inviter, Oe = Te.invitee, Ae.isExclusive || Ae.isSuper || Ae.isBroadcast ? Ae._setLatestMemberCount(Ue, Le, ne.ts) : Ae.removeMember(Oe), this._sdkState.userId === Oe.userId ? (Ae.invitedAt = 0, Ae.myMemberState = yt.NONE, Ae.isPublic ? this._dispatcher.dispatch(new jt({
              channels: [Ae],
              source: Vt.EVENT_CHANNEL_DECLINED_INVITE
            })) : this._dispatcher.dispatch(new zt({
              channelUrls: [Ae.url],
              source: Vt.EVENT_CHANNEL_DECLINED_INVITE
            }))) : this._dispatcher.dispatch(new jt({
              channels: [Ae],
              source: Vt.EVENT_CHANNEL_DECLINED_INVITE
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onUserDeclinedInvitation(Ae, Re, Oe);
                  }), [2];
                });
              });
            }), [3, 69];

          case 45:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 46:
            return ke = nn.sent(), Fe = ne.category === _.TYPING_START, Pe = e.as(Fe ? Fn : xn).user, ke._updateTypingStatus(Pe, Fe ? ne.ts : 0), this._dispatcher.dispatch(new jt({
              channels: [ke],
              source: Vt.EVENT_CHANNEL_TYPING_STATUS_UPDATE
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onTypingStatusUpdated(ke);
                  }), [2];
                });
              });
            }), [3, 69];

          case 47:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 48:
            xe = nn.sent(), He = ne.category === _.USER_CHANNEL_MUTE, (Ve = e.as(He ? at$2 : ot$2).user).userId === this._sdkState.userId && (xe.myMutedState = He ? kr.MUTED : kr.UNMUTED);

            try {
              for (Ge = s(xe.members), qe = Ge.next(); !qe.done; qe = Ge.next()) if ((Be = qe.value).userId === Ve.userId) {
                Be.isMuted = He;
                break;
              }
            } catch (e) {
              $t = {
                error: e
              };
            } finally {
              try {
                qe && !qe.done && (en = Ge.return) && en.call(Ge);
              } finally {
                if ($t) throw $t.error;
              }
            }

            return this._dispatcher.dispatch(new jt({
              channels: [xe],
              source: He ? Vt.EVENT_CHANNEL_MUTED : Vt.EVENT_CHANNEL_UNMUTED
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    He ? e.onUserMuted(xe, Ve) : e.onUserUnmuted(xe, Ve);
                  }), [2];
                });
              });
            }), [3, 69];

          case 49:
            return (Ke = this._leftChannels.get(ne.channelUrl)) ? (ze = Ke.channel, [3, 52]) : [3, 50];

          case 50:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 51:
            ze = nn.sent(), nn.label = 52;

          case 52:
            return je$1 = ze, this._markAsLeave(je$1), st = e.as(ct$2).user, Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onUserBanned(je$1, st);
                  }), [2];
                });
              });
            }), [3, 69];

          case 53:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 54:
            return it = nn.sent(), at = e.as(dt$2).user, Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onUserUnbanned(it, at);
                  }), [2];
                });
              });
            }), [3, 69];

          case 55:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 56:
            return ot = nn.sent(), ut = e.as(pt$2).freeze, ot.isFrozen = ut, this._dispatcher.dispatch(new jt({
              channels: [ot],
              source: ut ? Vt.EVENT_CHANNEL_FROZEN : Vt.EVENT_CHANNEL_UNFROZEN
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    ut ? e.onChannelFrozen(ot) : e.onChannelUnfrozen(ot);
                  }), [2];
                });
              });
            }), [3, 69];

          case 57:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 58:
            return ct = nn.sent(), lt = e.as(On), Et = lt.allowAutoUnhide, Ct = lt.hidePreviousMessages, Nt = lt.messageOffsetTimestamp, null !== Et && (ct.hiddenState = Et ? Fr.HIDDEN_ALLOW_AUTO_UNHIDE : Fr.HIDDEN_PREVENT_AUTO_UNHIDE), null !== Ct && Ct && ct._updateUnreadCount(0, 0), null !== Nt && (ct.messageOffsetTimestamp = Nt), this._dispatcher.dispatch(new jt({
              channels: [ct],
              source: Vt.EVENT_CHANNEL_HIDDEN
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onChannelHidden(ct);
                  }), [2];
                });
              });
            }), [3, 69];

          case 59:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 60:
            return (bt = nn.sent()).hiddenState = Fr.UNHIDDEN, this._dispatcher.dispatch(new jt({
              channels: [bt],
              source: Vt.EVENT_CHANNEL_UNHIDDEN
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onChannelChanged(bt);
                  }), [2];
                });
              });
            }), [3, 69];

          case 61:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 62:
            return Mt = nn.sent(), this._dispatcher.dispatch(new zt({
              channelUrls: [ne.channelUrl],
              source: Vt.EVENT_CHANNEL_DELETED
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onChannelDeleted(Mt.url, Mt.channelType);
                  }), [2];
                });
              });
            }), [3, 69];

          case 63:
            return [4, this.getChannelWithoutCache(ne.channelUrl, !0)];

          case 64:
            return St = nn.sent(), this._dispatcher.dispatch(new jt({
              channels: [St],
              source: Vt.EVENT_CHANNEL_UPDATED
            })), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    e.onChannelChanged(St);
                  }), [2];
                });
              });
            }), [3, 69];

          case 65:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 66:
            return At = nn.sent(), Tt = e.as(je$2), Ut = Tt.created, It = Tt.updated, wt = Tt.deleted, Ut && At._upsertCachedMetaData(Ut, ne.ts), It && At._upsertCachedMetaData(It, ne.ts), wt && At._removeFromCachedMetaData(wt, ne.ts), Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    Ut && e.onMetaDataCreated(At, Ut), It && e.onMetaDataUpdated(At, It), wt && e.onMetaDataDeleted(At, wt);
                  }), [2];
                });
              });
            }), [3, 69];

          case 67:
            return [4, this.getChannel(ne.channelUrl, !0)];

          case 68:
            return Dt = nn.sent(), Lt = e.as(tt$2), Rt = Lt.created, Ot = Lt.updated, kt = Lt.deleted, Ie$1(function () {
              return r$1(tn, void 0, void 0, function () {
                return i$1(this, function (e) {
                  return this._groupChannelHandlers.forEach(function (e) {
                    Rt && e.onMetaCounterCreated(Dt, Rt), Ot && e.onMetaCounterUpdated(Dt, Ot), kt && e.onMetaCounterDeleted(Dt, kt);
                  }), [2];
                });
              });
            }), [3, 69];

          case 69:
            return [3, 71];

          case 70:
            switch ((Ft = e.as(be).event).category) {
              case te.USER_BLOCK:
                Pt = me.getDataAsUserBlockEvent(this._iid, Ft), Ht = Pt.blocker, Gt = Pt.blockee, this._groupChannelCache.block(Ht.userId, Gt.userId);
                break;

              case te.USER_UNBLOCK:
                xt = me.getDataAsUserBlockEvent(this._iid, Ft), Ht = xt.blocker, Gt = xt.blockee, this._groupChannelCache.unblock(Ht.userId, Gt.userId);
            }

            return [3, 71];

          case 71:
            return [3, 73];

          case 72:
            if (qt = nn.sent(), h$1(qt)) throw qt;
            return [3, 73];

          case 73:
            return [2];
        }
      });
    });
  }, e.prototype._markAsLeave = function (e) {
    var t,
        n = this,
        r = null !== (t = this._leftChannels.get(e.url)) && void 0 !== t ? t : {
      channel: e,
      ref: 0
    };
    r.ref++, this._leftChannels.set(e.url, r), setTimeout(function () {
      r.ref--, 0 === r.ref && n._leftChannels.delete(e.url);
    }, 1e4);
  }, e.prototype.addHandler = function (e, t) {
    this._groupChannelHandlers.set(e, t);
  }, e.prototype.removeHandler = function (e) {
    this._groupChannelHandlers.delete(e);
  }, e.prototype.clearHandler = function () {
    this._groupChannelHandlers.clear();
  }, e.prototype.subscribeGroupChannelEvent = function (e, t) {
    this._groupChannelBroadcast.subscribe(e, t);
  }, e.prototype.unsubscribeGroupChannelEvent = function (e) {
    this._groupChannelBroadcast.unsubscribe(e);
  }, e.prototype.subscribeMessageEvent = function (e, t) {
    this._messageBroadcast.subscribe(e, t);
  }, e.prototype.unsubscribeMessageEvent = function (e) {
    this._messageBroadcast.unsubscribe(e);
  }, e.prototype._updateJoinedMemberCount = function (e) {
    e.joinedMemberCount = e.members.filter(function (e) {
      return e.state === yt.JOINED;
    }).length;
  }, e.prototype.getChannel = function (e, t) {
    return void 0 === t && (t = !1), r$1(this, void 0, void 0, function () {
      var n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            at$1(y("string", e)).throw(p$1.invalidParameters), r.label = 1;

          case 1:
            return r.trys.push([1, 3,, 4]), [4, this.getChannelFromCache(e)];

          case 2:
            return (n = r.sent()) ? [2, n] : [3, 4];

          case 3:
            return r.sent(), [3, 4];

          case 4:
            return [4, this.getChannelWithoutCache(e, t)];

          case 5:
            return [2, r.sent()];
        }
      });
    });
  }, e.prototype.getChannelWithoutCache = function (e, t) {
    return void 0 === t && (t = !1), r$1(this, void 0, void 0, function () {
      var n, r, s, i$1$1, a;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return at$1(y("string", e)).throw(p$1.invalidParameters), n = new Xt({
              channelUrl: e,
              isInternalCall: t
            }), [4, this._requestQueue.send(n)];

          case 1:
            switch (r = o.sent(), s = r.as(Zt).channel, i$1$1 = s.unreadMessageCount, a = s.unreadMentionCount, s.myCountPreference) {
              case Or.UNREAD_MESSAGE_COUNT_ONLY:
                a = 0;
                break;

              case Or.UNREAD_MENTION_COUNT_ONLY:
                i$1$1 = 0;
                break;

              case Or.OFF:
                i$1$1 = 0, a = 0;
            }

            return s._updateUnreadCount(i$1$1, a), [4, this._groupChannelCache.upsert([s])];

          case 2:
            return o.sent(), [2, s];
        }
      });
    });
  }, e.prototype.getMyGroupChannels = function (e, t, n$1$1, r$1$1) {
    return void 0 === r$1$1 && (r$1$1 = Vt.REQUEST_CHANNEL), r$1(this, void 0, void 0, function () {
      var i$1$1, a, o, u, c;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            return i$1$1 = new $t(n$1(n$1({}, t), {
              userId: this._sdkState.userId,
              token: e,
              limit: n$1$1
            })), [4, this._requestQueue.send(i$1$1)];

          case 1:
            return a = l.sent(), o = a.as(en), u = o.channels, c = o.token, this._dispatcher.dispatch(new jt({
              channels: u,
              source: r$1$1
            })), [2, {
              channels: u,
              token: c
            }];
        }
      });
    });
  }, e.prototype.getMessageFromCache = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._messageCache.get(e)];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, e.prototype.getMessagesFromCache = function (e, t, n, r$1$1, s) {
    return void 0 === s && (s = Y$1), r$1(this, void 0, void 0, function () {
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return [4, this._messageCache.fetch({
              channelUrl: e,
              token: t,
              limit: s,
              filter: r$1$1,
              backward: "next" === n
            })];

          case 1:
            return [2, i.sent()];
        }
      });
    });
  }, e.prototype.getAllFailedMessagesFromCache = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, this._unsentMessageCache.fetch({
              channelUrl: e,
              filter: t,
              sendingStatus: le$1.FAILED
            })];

          case 1:
            return [2, n.sent()];
        }
      });
    });
  }, e.prototype.removeFailedMessageFromCache = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._unsentMessageCache.remove([e])];

          case 1:
            return t.sent(), [2];
        }
      });
    });
  }, e.prototype.getCachedMessageCountBetween = function (e, t, n, r$1$1) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return [4, this._messageCache.countBetween(e, t, new Gn({
              top: n,
              bottom: r$1$1
            }))];

          case 1:
            return [2, s.sent()];
        }
      });
    });
  }, e.prototype.getMyGroupChannelChangeLogs = function (e, t, n$1$1) {
    return void 0 === n$1$1 && (n$1$1 = Vt.REQUEST_CHANNEL_CHANGELOGS), r$1(this, void 0, void 0, function () {
      var i$1$1, a, o, u, c;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            return t = n$1(n$1({}, Ft), t), at$1(y("string", e) && Pt(t)).throw(p$1.invalidParameters), i$1$1 = new Yt(U$2({
              userId: this._sdkState.userId,
              ts: "number" == typeof e ? e : null,
              token: "string" == typeof e ? e : null,
              filter: t
            })), [4, this._requestQueue.send(i$1$1)];

          case 1:
            return a = l.sent(), o = a.as(Jt), u = o.updatedChannels, c = o.deletedChannelUrls, u.length > 0 && this._dispatcher.dispatch(new jt({
              channels: u,
              source: n$1$1
            })), c.length > 0 && this._dispatcher.dispatch(new zt({
              channelUrls: c,
              source: n$1$1
            })), [2, o];
        }
      });
    });
  }, e.prototype.getGroupChannelCount = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n$1$1;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return e = n$1(n$1({}, xt), e), at$1(Ht(e)).throw(p$1.invalidParameters), t = new tn({
              userId: this._sdkState.userId,
              filter: e
            }), [4, this._requestQueue.send(t)];

          case 1:
            return n$1$1 = r.sent(), [2, n$1$1.as(nn).groupChannelCount];
        }
      });
    });
  }, e.prototype.getUnreadItemCount = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n$1$1, r, i$1$1;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return e = n$1(n$1({}, Gt), e), at$1(function (e) {
              return E$1(Dt, e.keys);
            }(e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n$1$1 = t.sdkState, r = t.requestQueue, i$1$1 = new rn({
              userId: n$1$1.userId,
              filter: e
            }), [4, r.send(i$1$1)];

          case 1:
            return [2, a.sent().as(sn)];
        }
      });
    });
  }, e.prototype.getTotalUnreadChannelCount = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, s;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new an({
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return s = i.sent(), [2, s.as(on).unreadCount];
        }
      });
    });
  }, e.prototype.getTotalUnreadMessageCount = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n$1$1, r, i$1$1, a, o;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return e = n$1(n$1({}, qt), e), at$1(function (e) {
              return E$1("string", e.channelCustomTypesFilter) && m(bt, e.superChannelFilter);
            }(e)).throw(p$1.invalidParameters), n$1$1 = St$1$1.of(this._iid), r = n$1$1.sdkState, i$1$1 = n$1$1.requestQueue, a = new un({
              userId: r.userId,
              filter: e
            }), [4, i$1$1.send(a)];

          case 1:
            return o = u.sent(), [2, o.as(cn).unreadCount];
        }
      });
    });
  }, e.prototype.getTotalScheduledMessageCount = function (e) {
    return void 0 === e && (e = {}), r$1(this, void 0, void 0, function () {
      var n$1$1, r, i$1$1;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return e = n$1(n$1({}, Bt), e), at$1(function (e) {
              return y("string", e.channelUrl, !0) && E$1(Ct$1$1, e.scheduledStatus, !0) && m(se$1, e.messageTypeFilter);
            }(e)).throw(p$1.invalidParameters), n$1$1 = St$1$1.of(this._iid).requestQueue, r = new ln(e), [4, n$1$1.send(r)];

          case 1:
            return i$1$1 = a.sent(), [2, i$1$1.as(hn).count];
        }
      });
    });
  }, e.prototype.getSubscribedTotalUnreadMessageCount = function () {
    var e = St$1$1.of(this._iid).subscribedUnreadMessageCount;
    return e.all >= 0 ? e.all : 0;
  }, e.prototype.getSubscribedCustomTypeTotalUnreadMessageCount = function () {
    var e = 0,
        t = St$1$1.of(this._iid).subscribedUnreadMessageCount;

    for (var n in t.customTypes) e += t.customTypes[n];

    return e;
  }, e.prototype.getSubscribedCustomTypeUnreadMessageCount = function (e) {
    var t;
    return null !== (t = St$1$1.of(this._iid).subscribedUnreadMessageCount.customTypes[e]) && void 0 !== t ? t : 0;
  }, e.prototype.createChannel = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n$1$1, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return e = n$1(n$1({}, Ot), e), at$1(kt(e)).throw(p$1.invalidParameters), e.isPublic || (e.accessCode = null), t = new _n(n$1({
              userId: this._sdkState.userId
            }, e)), [4, this._requestQueue.send(t)];

          case 1:
            return n$1$1 = i.sent(), r = n$1$1.as(fn).channel, [4, this._groupChannelCache.upsert([r])];

          case 2:
            return i.sent(), [2, r];
        }
      });
    });
  }, e.prototype.markAsReadAll = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, s$1, i$1$1, a, o;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return e = Date.now(), at$1(e - this._markAsReadAllLastSentAt >= 1e3).throw(p$1.markAsReadAllRateLimitExceeded), this._markAsReadAllLastSentAt = e, t = new pn({
              userId: this._sdkState.userId
            }), [4, this._requestQueue.send(t)];

          case 1:
            u.sent(), n = this._groupChannelCache.channels;

            try {
              for (r = s(n), s$1 = r.next(); !s$1.done; s$1 = r.next()) (i$1$1 = s$1.value)._updateUnreadMemberState(this._sdkState.userId, e), i$1$1._updateUnreadCount(0, 0);
            } catch (e) {
              a = {
                error: e
              };
            } finally {
              try {
                s$1 && !s$1.done && (o = r.return) && o.call(r);
              } finally {
                if (a) throw a.error;
              }
            }

            return n.length > 0 ? [4, this._groupChannelCache.upsert(n)] : [3, 3];

          case 2:
            u.sent(), u.label = 3;

          case 3:
            return [2];
        }
      });
    });
  }, e.prototype.markAsReadWithChannelUrls = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, s$1, i$1$1, a, o, u, c;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            return t = Date.now(), at$1(E$1("string", e) && t - this._markAsReadAllLastSentAt >= 1e3).throw(p$1.markAsReadAllRateLimitExceeded), this._markAsReadAllLastSentAt = t, n = new pn({
              userId: this._sdkState.userId,
              channelUrls: e
            }), [4, this._requestQueue.send(n)];

          case 1:
            l.sent(), r = this._groupChannelCache.channels, s$1 = [];

            try {
              for (i$1$1 = s(r), a = i$1$1.next(); !a.done; a = i$1$1.next()) o = a.value, e.includes(o.url) && (o._updateUnreadMemberState(this._sdkState.userId, t), o._updateUnreadCount(0, 0), s$1.push(o));
            } catch (e) {
              u = {
                error: e
              };
            } finally {
              try {
                a && !a.done && (c = i$1$1.return) && c.call(i$1$1);
              } finally {
                if (u) throw u.error;
              }
            }

            return s$1.length > 0 ? [4, this._groupChannelCache.upsert(s$1)] : [3, 3];

          case 2:
            l.sent(), l.label = 3;

          case 3:
            return [2];
        }
      });
    });
  }, e.prototype.markAsDelivered = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this.getChannel(e)];

          case 1:
            return [4, t.sent().markAsDelivered()];

          case 2:
            return t.sent(), [2];
        }
      });
    });
  }, e;
}(),
    Kn = new Map(),
    jn = new Map(),
    zn = new Map(),
    Qn = function () {
  function e(t) {
    var n = t.key,
        r$1$1 = t.concurrentCallLimit,
        s = void 0 === r$1$1 ? 2 : r$1$1,
        i$1$1 = t.backOffDelay,
        a = void 0 === i$1$1 ? 0 : i$1$1,
        o = this;
    this._holdersKey = e.createSemaphoreHoldersKey(n), this._resolversKey = e.createSemaphoreResolversKey(n), this._chainProcessStateKey = e.createChainProcessStateKey(n), this._numLocks = s, this._backOffDelay = a, this._localAcquiredKeys = [], this._localResolversData = [], z$2() ? (Kn[this._holdersKey] || (Kn[this._holdersKey] = []), jn[this._resolversKey] || (jn[this._resolversKey] = [])) : (window.addEventListener("storage", function (e) {
      return r$1(o, void 0, void 0, function () {
        var t, n;
        return i$1(this, function (r) {
          if (this._localResolversData.length > 0 && this.numLocksAvailable > 0 && !this._isProcessChainAcquireRunning() && this._hasHighestPriorityResolver()) switch (e.key) {
            case this._holdersKey:
              if (t = JSON.parse(e.oldValue), n = JSON.parse(e.newValue), !t || !n || n.length >= t.length) return [2];

              this._processChainResolve();

              break;

            case this._chainProcessStateKey:
              if (JSON.parse(e.newValue)) return [2];

              this._processChainResolve();

              break;

            default:
              return [2];
          }
          return [2];
        });
      });
    }), window.addEventListener("beforeunload", function () {
      var e = o._getLocalResolversData(),
          t = o._localResolversData.map(function (e) {
        return e.key;
      }),
          n = e.filter(function (e) {
        return t.indexOf(e.key) < 0;
      });

      window.localStorage.setItem(o._resolversKey, JSON.stringify(n)), o._localAcquiredKeys.forEach(function (e) {
        return o.release(e);
      });
    }));
  }

  return e.createSemaphoreHoldersKey = function (e) {
    return "collection@semaphore_holders_for:" + e;
  }, e.createSemaphoreResolversKey = function (e) {
    return "collection@semaphore_resolvers_for:" + e;
  }, e.createChainProcessStateKey = function (e) {
    return "collection@semaphore_chain_process_state_for:" + e;
  }, Object.defineProperty(e.prototype, "numLocks", {
    get: function () {
      return this._numLocks;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "backOffDelay", {
    get: function () {
      return this._backOffDelay;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "numLocksAvailable", {
    get: function () {
      if (z$2()) return this.numLocks - Kn[this._holdersKey].length;

      var e = this._getLocalHoldersData();

      return this.numLocks - e.length;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "waitCount", {
    get: function () {
      return z$2() ? jn[this._resolversKey].length : this._getLocalResolversData().length;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype._hasHighestPriorityResolver = function () {
    var e = this._getLocalResolversData();

    return e.length > 0 && this._localResolversData.map(function (e) {
      return e.key;
    }).indexOf(e[0].key) >= 0;
  }, e.prototype._isProcessChainAcquireRunning = function () {
    if (z$2()) return zn[this._chainProcessStateKey];
    var e = window.localStorage[this._chainProcessStateKey];
    return void 0 !== e && JSON.parse(e);
  }, e.prototype._setProcessChainAcquireRunning = function (e) {
    z$2() ? zn[this._chainProcessStateKey] = e : e ? window.localStorage.setItem(this._chainProcessStateKey, JSON.stringify(e)) : window.localStorage.removeItem(this._chainProcessStateKey);
  }, e.prototype._processChainResolve = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this.waitCount > 0 && this.numLocksAvailable > 0 && !this._isProcessChainAcquireRunning() ? (this._setProcessChainAcquireRunning(!0), this._tryResolve() ? [4, me$1(this._backOffDelay)] : [3, 2]) : [3, 3];

          case 1:
            t.sent(), t.label = 2;

          case 2:
            this._setProcessChainAcquireRunning(!1), z$2() ? this._processChainResolve() : (e = new StorageEvent("storage", {
              key: this._chainProcessStateKey,
              oldValue: JSON.stringify(!0),
              newValue: JSON.stringify(!1)
            }), dispatchEvent(e)), t.label = 3;

          case 3:
            return [2];
        }
      });
    });
  }, e.prototype.acquire = function (e) {
    return void 0 === e && (e = 0), r$1(this, void 0, void 0, function () {
      var t,
          n = this;
      return i$1(this, function (r) {
        return z$2() ? [2, new Promise(function (t) {
          for (var r = {
            key: R$2(),
            resolver: function (e) {
              return t(e);
            },
            priority: e
          }, s = jn[n._resolversKey], i = -1, a = 0; a < s.length; a++) if (e > s[a].priority) {
            i = a;
            break;
          }

          i >= 0 ? jn[n._resolversKey].splice(i, 0, r) : jn[n._resolversKey].push(r), n._processChainResolve();
        })] : (t = this._getLocalResolversData(), [2, new Promise(function (r) {
          for (var s = R$2(), i = {
            key: s,
            priority: e
          }, a = {
            key: s,
            resolver: function (e) {
              return r(e);
            },
            priority: e
          }, o = -1, u = 0; u < t.length; u++) if (e > t[u].priority) {
            o = u;
            break;
          }

          o >= 0 ? (t.splice(o, 0, i), n._localResolversData.splice(o, 0, a)) : (t.push(i), n._localResolversData.push(a)), window.localStorage.setItem(n._resolversKey, JSON.stringify(t)), n._processChainResolve();
        })]);
      });
    });
  }, e.prototype.release = function (e) {
    if (z$2()) {
      if ((t = Kn[this._holdersKey].indexOf(e)) >= 0) return Kn[this._holdersKey].splice(t, 1), this._processChainResolve(), !0;
    } else if (window.localStorage[this._holdersKey]) {
      var t,
          n = JSON.parse(window.localStorage[this._holdersKey]),
          r = a([], o(n), !1);

      if ((t = n.indexOf(e)) >= 0) {
        n.splice(t, 1), window.localStorage.setItem(this._holdersKey, JSON.stringify(n)), this._localAcquiredKeys.splice(this._localAcquiredKeys.indexOf(e), 1);
        var s = new StorageEvent("storage", {
          key: this._holdersKey,
          oldValue: JSON.stringify(r),
          newValue: JSON.stringify(n)
        });
        return dispatchEvent(s), !0;
      }
    }

    return !1;
  }, e.prototype._tryResolve = function () {
    if (z$2()) {
      if (Kn[this._holdersKey].length < this.numLocks) {
        var e = R$2();
        return Kn[this._holdersKey] = a(a([], o(Kn[this._holdersKey]), !1), [e], !1), (n = jn[this._resolversKey].shift()).resolver(e), !0;
      }
    } else {
      var t = this._getLocalHoldersData();

      if (t.length < this.numLocks) {
        e = R$2();

        var n = this._localResolversData.shift(),
            r = this._getLocalResolversData(),
            s = r.map(function (e) {
          return e.key;
        }).indexOf(n.key);

        r.splice(s, 1), window.localStorage.setItem(this._resolversKey, JSON.stringify(r)), window.localStorage.setItem(this._holdersKey, JSON.stringify(a(a([], o(t), !1), [e], !1))), this._localAcquiredKeys.push(e);
        var i = new StorageEvent("storage", {
          key: this._holdersKey,
          oldValue: JSON.stringify(a([], o(t), !1)),
          newValue: JSON.stringify(a(a([], o(t), !1), [e], !1))
        });
        return dispatchEvent(i), (0, n.resolver)(e), !0;
      }
    }

    return !1;
  }, e.prototype._getLocalHoldersData = function () {
    var e = window.localStorage[this._holdersKey];
    return void 0 !== e ? JSON.parse(e) : [];
  }, e.prototype._getLocalResolversData = function () {
    var e = window.localStorage[this._resolversKey];
    return void 0 !== e ? JSON.parse(e) : [];
  }, e;
}();

!function (e) {
  e[e.IDLE = 0] = "IDLE", e[e.RUNNING = 1] = "RUNNING", e[e.END = 2] = "END";
}(wn || (wn = {}));

var Wn,
    Yn = function (t$1) {
  function n(e, n, r, s) {
    void 0 === r && (r = 2), void 0 === s && (s = 10);
    var i = t$1.call(this) || this;
    return i._worker = null, i._state = wn.IDLE, i._semaphore = null, i._retryCount = 0, i._retryLimit = 3, i.priority = 0, i._worker = n, i._semaphore = new Qn({
      key: e,
      concurrentCallLimit: r,
      backOffDelay: s
    }), i;
  }

  return t(n, t$1), Object.defineProperty(n.prototype, "isIdle", {
    get: function () {
      return this._state === wn.IDLE;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n.prototype, "isRunning", {
    get: function () {
      return this._state === wn.RUNNING;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n.prototype, "isDone", {
    get: function () {
      return this._state === wn.END;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n.prototype, "retryCount", {
    get: function () {
      return this._retryCount;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(n.prototype, "retryLimit", {
    get: function () {
      return this._retryLimit;
    },
    enumerable: !1,
    configurable: !0
  }), n.prototype._run = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            if (!this.isRunning) return [3, 4];
            r.label = 1;

          case 1:
            return r.trys.push([1, 3,, 4]), [4, this._worker(e)];

          case 2:
            return t = r.sent(), this._retryCount = 0, this.dispatch("progress", t), t.hasNext ? this._run(t.nextToken) : this.end(), [3, 4];

          case 3:
            return n = r.sent(), this.dispatch("error", n), this._retryCount < this._retryLimit ? (this._retryCount++, this._run(e)) : this.stop(), [3, 4];

          case 4:
            return [2];
        }
      });
    });
  }, n.prototype.start = function (e) {
    this.isIdle && (this._state = wn.RUNNING, this._run(e));
  }, n.prototype.stop = function () {
    this._state = wn.IDLE, this.dispatch("stop");
  }, n.prototype.end = function () {
    this._state = wn.END, this.dispatch("end");
  }, n;
}(M$1),
    Jn = function (e) {
  this.source = e;
},
    Xn = function (e) {
  this.source = e;
},
    Zn = {},
    $n = function () {
  function e(e) {
    var t = e._iid,
        n = e.channel,
        r$1$1 = this;
    this._prevSync = null, this._nextSync = null, this._metadata = null, this._iid = t, this._channel = n;
    var s,
        i$1$1,
        a = St$1$1.of(this._iid),
        o = a.sdkState,
        u = a.logger;
    this._metadataKey = (s = o.userId, i$1$1 = n.url, "sendbird:".concat(s, "@groupchannel/").concat(i$1$1, "/message/sync.meta"));

    var c = function (e, t) {
      return "sendbird:".concat(e, "@groupchannel/").concat(t, "/message/sync");
    }(o.userId, n.url);

    this._prevSync = new Yn(c, function (e) {
      return r$1(r$1$1, void 0, void 0, function () {
        var t, n, r, s, i$1$1, a;
        return i$1(this, function (o) {
          switch (o.label) {
            case 0:
              return t = {
                hasNext: !0,
                nextToken: 0
              }, [4, this.loadMetadata()];

            case 1:
              if (o.sent(), u.debug("message background prev sync from", null === (s = this._metadata) || void 0 === s ? void 0 : s.range.top), this._metadata.previousComplete) return [3, 9];
              o.label = 2;

            case 2:
              return o.trys.push([2, 5,, 8]), [4, En$3.of(this._iid).getMessagesByTimestamp(this._channel.url, this._channel.channelType, null !== (a = null === (i$1$1 = this._metadata.range) || void 0 === i$1$1 ? void 0 : i$1$1.top) && void 0 !== a ? a : e, {
                prevResultSize: 100,
                nextResultSize: 0,
                replyType: ue$1.ALL,
                includeReactions: !0,
                includeMetaArray: !0,
                includeParentMessageInfo: !0,
                includeThreadInfo: !0
              }, $t$2.SYNC_MESSAGE_BACKGROUND)];

            case 3:
              return n = o.sent(), this.extendRange(n), t.hasNext = n.length >= 100, t.nextToken = this._metadata.range.top, this._metadata.previousComplete = !t.hasNext, u.debug("message background prev sync progress", t), [4, this.saveMetadata()];

            case 4:
              return o.sent(), [3, 8];

            case 5:
              return (r = o.sent()) instanceof p$1 && r.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 7];

            case 6:
              o.sent(), o.label = 7;

            case 7:
              return t.hasNext = !1, t.nextToken = 0, [3, 8];

            case 8:
              return [3, 10];

            case 9:
              t.hasNext = !1, o.label = 10;

            case 10:
              return [2, t];
          }
        });
      });
    }), this._nextSync = new Yn(c, function (e) {
      return r$1(r$1$1, void 0, void 0, function () {
        var t, n, r, s, i$1$1;
        return i$1(this, function (a) {
          switch (a.label) {
            case 0:
              return t = {
                hasNext: !0,
                nextToken: 0
              }, [4, this.loadMetadata()];

            case 1:
              return a.sent(), u.debug("message background next sync from", null === (r = this._metadata) || void 0 === r ? void 0 : r.range.bottom), [4, En$3.of(this._iid).getMessagesByTimestamp(this._channel.url, this._channel.channelType, null !== (i$1$1 = null === (s = this._metadata.range) || void 0 === s ? void 0 : s.bottom) && void 0 !== i$1$1 ? i$1$1 : e, {
                prevResultSize: 0,
                nextResultSize: 100,
                replyType: ue$1.ALL,
                includeReactions: !0,
                includeMetaArray: !0,
                includeParentMessageInfo: !0,
                includeThreadInfo: !0
              }, $t$2.SYNC_MESSAGE_BACKGROUND)];

            case 2:
              return n = a.sent(), this.extendRange(n), t.hasNext = n.length >= 100, t.nextToken = this._metadata.range.bottom, u.debug("message background next sync progress", t), [4, this.saveMetadata()];

            case 3:
              return a.sent(), [2, t];
          }
        });
      });
    });
  }

  return e.of = function (t, n) {
    if (Zn[t] || (Zn[t] = {}), !Zn[t][n.url]) {
      var r = Zn[t][n.url] = new e({
        _iid: t,
        channel: n
      });
      St$1$1.of(t).dispatcher.on(function (e) {
        if (e instanceof de$1) if (e.stateType === J$2.CONNECTED) r.resume();else r.pause();
      });
    }

    return Zn[t][n.url];
  }, Object.defineProperty(e.prototype, "range", {
    get: function () {
      var e;
      return null === (e = this._metadata) || void 0 === e ? void 0 : e.range;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "previousComplete", {
    get: function () {
      var e;
      return !!(null === (e = this._metadata) || void 0 === e ? void 0 : e.previousComplete);
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.isWrappingMessages = function (e) {
    var t;
    return null === (t = this.range) || void 0 === t ? void 0 : t.includes.apply(t, a([], o(e.map(function (e) {
      return e.createdAt;
    })), !1));
  }, e.prototype.extendRange = function (e) {
    var t;
    this._metadata && (t = this._metadata.range).extends.apply(t, a([], o(e.map(function (e) {
      return e.createdAt;
    })), !1));
  }, e.prototype.loadMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._metadata ? [3, 2] : [4, St$1$1.of(this._iid).cacheContext.preference.get(this._metadataKey)];

          case 1:
            e = t.sent(), this._metadata = {
              range: new Gn(e ? e.range : {
                top: Number.MAX_SAFE_INTEGER,
                bottom: Number.MAX_SAFE_INTEGER
              }),
              previousComplete: !!e && e.previousComplete
            }, t.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, e.prototype.saveMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return this._metadata ? [4, St$1$1.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];

          case 1:
            e.sent(), e.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, e.prototype.clearMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return St$1$1.of(this._iid).cacheContext.preference.remove(this._metadataKey), [2];
      });
    });
  }, e.prototype.resume = function () {
    var e, t, n, r;
    St$1$1.of(this._iid).logger.debug("message background sync resume()"), this._metadata && this._metadata.previousComplete || this._prevSync.start(null !== (t = null === (e = this._metadata) || void 0 === e ? void 0 : e.range.top) && void 0 !== t ? t : Date.now()), this._nextSync.start(null !== (r = null === (n = this._metadata) || void 0 === n ? void 0 : n.range.bottom) && void 0 !== r ? r : Date.now());
  }, e.prototype.pause = function () {
    St$1$1.of(this._iid).logger.debug("message background sync stop()"), this._prevSync.stop(), this._nextSync.stop();
  }, e;
}(),
    er = {},
    tr = function () {
  function e(e) {
    var t = e._iid,
        n = e.channel,
        r$1$1 = this;
    this._sync = null, this._metadata = null, this._iid = t, this._channel = n;
    var s,
        i$1$1,
        a = St$1$1.of(this._iid).sdkState;
    this._metadataKey = (s = a.userId, i$1$1 = n.url, "sendbird:".concat(s, "@groupchannel/").concat(i$1$1, "/message/changelogs.meta"));

    var o = function (e, t) {
      return "sendbird:".concat(e, "@groupchannel/").concat(t, "/message/changelogs");
    }(a.userId, this._channel.url);

    this._sync = new Yn(o, function () {
      return r$1(r$1$1, void 0, void 0, function () {
        var e, t, n, r, s;
        return i$1(this, function (i) {
          switch (i.label) {
            case 0:
              return e = {
                hasNext: !0,
                nextToken: 0
              }, [4, this.loadMetadata()];

            case 1:
              i.sent(), i.label = 2;

            case 2:
              return i.trys.push([2, 5,, 8]), [4, En$3.of(this._iid).getMessageChangelogs(this._channel.url, this._channel.channelType, this._metadata.token, {
                replyType: ue$1.ALL,
                includeReactions: !0,
                includeThreadInfo: !0,
                includeMetaArray: !0,
                includeParentMessageInfo: !0,
                includePollDetails: !0
              }, $t$2.SYNC_MESSAGE_CHANGELOGS)];

            case 3:
              return t = i.sent(), n = t.hasMore, r = t.token, e.hasNext = n, e.nextToken = r, this._metadata.token = r, [4, this.saveMetadata()];

            case 4:
              return i.sent(), [3, 8];

            case 5:
              return (s = i.sent()) instanceof p$1 && s.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 7];

            case 6:
              i.sent(), i.label = 7;

            case 7:
              return e.hasNext = !1, e.nextToken = "", [3, 8];

            case 8:
              return [2, e];
          }
        });
      });
    });
  }

  return e.of = function (t, n) {
    if (er[t] || (er[t] = {}), !er[t][n.url]) {
      var r = er[t][n.url] = new e({
        _iid: t,
        channel: n
      });
      St$1$1.of(t).dispatcher.on(function (e) {
        if (e instanceof de$1) if (e.stateType === J$2.CONNECTED) r.resume();else r.pause();
      });
    }

    return er[t][n.url];
  }, e.prototype.loadMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return this._metadata ? [3, 2] : (e = St$1$1.of(this._iid), t = e.cacheContext, n = e.firstConnectedAt, [4, t.preference.get(this._metadataKey)]);

          case 1:
            r = s.sent(), this._metadata = {
              token: r ? r.token : n / 1e3
            }, s.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, e.prototype.saveMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return this._metadata ? [4, St$1$1.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];

          case 1:
            e.sent(), e.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, e.prototype.clearMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return St$1$1.of(this._iid).cacheContext.preference.remove(this._metadataKey), [2];
      });
    });
  }, e.prototype.resume = function () {
    this._sync.start(0);
  }, e.prototype.pause = function () {
    this._sync.stop();
  }, e;
}(),
    nr = function (t$1) {
  function n(e) {
    var n,
        s,
        i,
        a,
        o,
        u,
        c = this;
    return (c = t$1.call(this) || this).method = d$1.GET, c.path = "".concat(We$1(e.channelType), "/").concat(e.channelUrl, "/messages_gap"), c.params = U$2({
      prev_start_ts: e.prevStart,
      prev_end_ts: e.prevEnd,
      prev_cache_count: e.prevCount,
      next_start_ts: e.nextStart,
      next_end_ts: e.nextEnd,
      next_cache_count: e.nextCount,
      huge_gap_threshold: null !== (n = e.threshold) && void 0 !== n ? n : null,
      reverse: !0,
      custom_types: null !== (s = e.customTypes) && void 0 !== s ? s : ["*"],
      message_type: null !== (i = e.messageType) && void 0 !== i ? i : null,
      include_reactions: null === (a = e.includeReactions) || void 0 === a || a,
      with_sorted_meta_array: null === (o = e.includeMetaArray) || void 0 === o || o,
      show_subchannel_messages_only: null !== (u = e.showSubchannelMessagesOnly) && void 0 !== u && u
    }), c;
  }

  return t(n, t$1), n;
}(q$2),
    rr = function (t$1) {
  function n(e, n) {
    var r,
        s,
        i,
        a,
        o = this;
    return (o = t$1.call(this, e, n) || this).isHugeGap = n.is_huge_gap, o.prevMessages = (null !== (r = n.prev_messages) && void 0 !== r ? r : []).map(function (t) {
      return Ht$2(e, t);
    }), o.prevHasMore = null !== (s = n.prev_hasmore) && void 0 !== s && s, o.nextMessages = (null !== (i = n.next_messages) && void 0 !== i ? i : []).map(function (t) {
      return Ht$2(e, t);
    }), o.nextHasmore = null !== (a = n.next_hasmore) && void 0 !== a && a, o;
  }

  return t(n, t$1), n;
}(F$1),
    sr = function (e, t) {
  return e.findIndex(function (e) {
    return e.isIdentical(t);
  });
},
    ir = function (e, t, n) {
  if (e.length > 0) {
    var r = sr(e, t);

    if (r < 0) {
      for (var s = 0, i = e.length - 1, a = Math.floor((s + i) / 2); s < i;) {
        var o = ar(e[a], t, n);
        if (o > 0) i = a, a = Math.floor((s + i) / 2);else {
          if (!(o < 0)) return {
            place: a,
            contains: e[a].isIdentical(t)
          };
          s = a + 1, a = Math.floor((s + i) / 2);
        }
      }

      return {
        place: ar(e[a], t, n) > 0 ? a : a + 1,
        contains: !1
      };
    }

    return {
      place: r,
      contains: !0
    };
  }

  return {
    place: e.length,
    contains: !1
  };
},
    ar = function (e, t, n) {
  switch (n) {
    case K$1.LATEST_LAST_MESSAGE:
      return e.lastMessage && t.lastMessage ? t.lastMessage.createdAt - e.lastMessage.createdAt : e.lastMessage ? -1 : t.lastMessage ? 1 : t.createdAt - e.createdAt;

    case K$1.CHRONOLOGICAL:
      return t.createdAt - e.createdAt;

    case K$1.CHANNEL_NAME_ALPHABETICAL:
      return e.name.localeCompare(t.name);
  }
},
    or = function (e, t) {
  if (t instanceof xt$2) return e.findIndex(function (e) {
    return e instanceof xt$2 && t.isIdentical(e);
  });
  e.findIndex(function (e) {
    return e.isIdentical(t);
  });
},
    ur = function (e, t) {
  if (e.length > 0) {
    for (var n = 0, r = e.length - 1, s = Math.floor((n + r) / 2); n < r;) {
      var i = e[s].createdAt - t.createdAt;
      if (i > 0) r = s, s = Math.floor((n + r) / 2);else {
        if (!(i < 0)) return s;
        n = s + 1, s = Math.floor((n + r) / 2);
      }
    }

    return e[s].createdAt > t.createdAt ? s : s + 1;
  }

  return e.length;
};

!function (e) {
  e.CACHE_AND_REPLACE_BY_API = "cache_and_replace_by_api";
}(Wn || (Wn = {}));

var cr,
    lr,
    hr,
    dr = function () {
  function e() {}

  return e.prototype._invokeResponse = function (e, t, n) {
    var r$1$1 = this;
    Ie$1(function () {
      return r$1(r$1$1, void 0, void 0, function () {
        return i$1(this, function (r) {
          switch (e) {
            case "local":
              this._onCacheResult(t, n);

              break;

            case "remote":
              this._onApiResult(t, n);

          }

          return [2];
        });
      });
    });
  }, e.prototype.onCacheResult = function (e) {
    return this._onCacheResult = e, this;
  }, e.prototype.onApiResult = function (e) {
    return this._onApiResult = e, this;
  }, e;
}(),
    _r = function () {
  function e(e, t) {
    var n = t.channel,
        r$1$1 = t.filter,
        s$1 = t.startingPoint,
        i$1$1 = t.limit,
        a$1 = this;
    this._channel = null, this._messages = [], this._unsentMessages = [], this._readReceiptMap = new Map(), this._deliveryReceiptMap = new Map(), this._iid = e, this._key = "mc-".concat(R$2()), this.filter = null != r$1$1 ? r$1$1 : new ee(), this._channel = n, this._syncRange = new Gn({}), this._hasPrevious = !0, this._hasNext = !0, this._startingPoint = s$1 || Date.now() + 6e5, this._limit = i$1$1 || Y$1;
    var o$1 = Bn.of(this._iid);
    o$1.subscribeGroupChannelEvent(this._key, {
      onUpdate: function (e, t) {
        var n,
            r$1$1,
            s$1,
            i$1$1,
            o = sr(e, a$1._channel);
        if (o >= 0) switch (Ie$1(function () {
          return r$1(a$1, void 0, void 0, function () {
            var n;
            return i$1(this, function (r) {
              return n = new Jn(t), this._channel = e[o], this._handler.onChannelUpdated(n, this.channel), [2];
            });
          });
        }), t) {
          case Vt.EVENT_CHANNEL_UPDATED:
            var u = !1;

            for (var c in a$1._messages) {
              if ((g = a$1._messages[c]).createdAt >= a$1._channel.messageOffsetTimestamp) {
                u = !0;
                var l = parseInt(c);

                if (l > 0) {
                  var h = a$1._messages.splice(0, l);

                  a$1._removeMessagesFromView(h.map(function (e) {
                    return e.messageId;
                  }), $t$2.EVENT_MESSAGE_OFFSET_UPDATED);
                }

                break;
              }
            }

            !u && a$1._messages.length > 0 && a$1._removeMessagesFromView(a$1._messages.map(function (e) {
              return e.messageId;
            }), $t$2.EVENT_MESSAGE_OFFSET_UPDATED);
            break;

          case Vt.EVENT_CHANNEL_READ:
            var p = [];

            try {
              for (var m = s(a$1._messages), v = m.next(); !v.done; v = m.next()) {
                var g = v.value;
                if ((C = a$1._readReceiptMap.get(g.messageId)) > 0) C !== a$1._channel.getUnreadMemberCount(g) && p.push(g);
              }
            } catch (e) {
              n = {
                error: e
              };
            } finally {
              try {
                v && !v.done && (r$1$1 = m.return) && r$1$1.call(m);
              } finally {
                if (n) throw n.error;
              }
            }

            p.length > 0 && a$1._updateMessagesToView(p, $t$2.EVENT_MESSAGE_READ);
            break;

          case Vt.EVENT_CHANNEL_DELIVERED:
            p = [];

            try {
              for (var E = s(a$1._messages), y = E.next(); !y.done; y = E.next()) {
                var C;
                g = y.value;
                if ((C = a$1._deliveryReceiptMap.get(g.messageId)) > 0) C !== a$1._channel.getUndeliveredMemberCount(g) && p.push(g);
              }
            } catch (e) {
              s$1 = {
                error: e
              };
            } finally {
              try {
                y && !y.done && (i$1$1 = E.return) && i$1$1.call(E);
              } finally {
                if (s$1) throw s$1.error;
              }
            }

            p.length > 0 && a$1._updateMessagesToView(p, $t$2.EVENT_MESSAGE_READ);
        }
      },
      onRemove: function (e, t) {
        e.indexOf(a$1.channel.url) >= 0 && Ie$1(function () {
          return r$1(a$1, void 0, void 0, function () {
            var e;
            return i$1(this, function (n) {
              return e = new Jn(t), this._handler.onChannelDeleted(e, this.channel.url), [2];
            });
          });
        });
      }
    }), o$1.subscribeMessageEvent(this._key, {
      onUpdate: function (e, t) {
        var n,
            r,
            s$1 = [],
            i = [];

        try {
          for (var o = s(e), u = o.next(); !u.done; u = o.next()) {
            var c = u.value;
            c.channelUrl === a$1._channel.url && (a$1.filter.match(c) ? s$1.push(c) : i.push(c.messageId));
          }
        } catch (e) {
          n = {
            error: e
          };
        } finally {
          try {
            u && !u.done && (r = o.return) && r.call(o);
          } finally {
            if (n) throw n.error;
          }
        }

        if (an$3(t)) {
          if (s$1.length > 0) switch (t) {
            case $t$2.EVENT_MESSAGE_SENT_FAILED:
            case $t$2.EVENT_MESSAGE_SENT_SUCCESS:
            case $t$2.EVENT_MESSAGE_UPDATED:
            case $t$2.EVENT_MESSAGE_THREADINFO_UPDATED:
            case $t$2.EVENT_MESSAGE_REACTION_UPDATED:
            case $t$2.SYNC_MESSAGE_CHANGELOGS:
              a$1._updateMessagesToView(s$1, t);

              break;

            case $t$2.EVENT_MESSAGE_SENT_PENDING:
            case $t$2.EVENT_MESSAGE_RECEIVED:
            case $t$2.SYNC_MESSAGE_FILL:
              a$1._addMessagesToView(s$1, t);

          }
          i.length > 0 && a$1._removeMessagesFromView(i, t);
        }
      },
      onRemove: function (e, t) {
        a$1._removeMessagesFromView(e, t);
      },
      onRemoveUnsent: function (e, t) {
        a$1._removeUnsentMessageFromView(e, t);
      }
    });
    var u = St$1$1.of(this._iid).cacheContext;
    !this._channel.isSuper && u.localCacheEnabled && $n.of(this._iid, this._channel).resume(), tr.of(this._iid, this._channel).resume(), this._prevFill = new Yn(this._key, function (e) {
      return r$1(a$1, void 0, void 0, function () {
        var t, n;
        return i$1(this, function (r) {
          switch (r.label) {
            case 0:
              return [4, this._getRemoteMessages(e, {
                prevLimit: this._limit,
                source: $t$2.SYNC_MESSAGE_FILL
              })];

            case 1:
              return (t = r.sent()).length > 0 ? (n = Math.min.apply(Math, a([], o(t.map(function (e) {
                return e.createdAt;
              })), !1)), this._syncRange.extends(n), [2, {
                hasNext: t.length >= this._limit && this.viewTop < n,
                nextToken: this._syncRange.top
              }]) : [2, {
                hasNext: !1,
                nextToken: 0
              }];
          }
        });
      });
    }), this._nextFill = new Yn(this._key, function (e) {
      return r$1(a$1, void 0, void 0, function () {
        var t, n;
        return i$1(this, function (r) {
          switch (r.label) {
            case 0:
              return [4, this._getRemoteMessages(e, {
                nextLimit: this._limit,
                source: $t$2.SYNC_MESSAGE_FILL
              })];

            case 1:
              return (t = r.sent()).length > 0 ? (n = Math.max.apply(Math, a([], o(t.map(function (e) {
                return e.createdAt;
              })), !1)), this._syncRange.extends(n), [2, {
                hasNext: !(t.length >= this._limit && this._hasNext) || this.viewBottom > n,
                nextToken: this._syncRange.bottom
              }]) : [2, {
                hasNext: !1,
                nextToken: 0
              }];
          }
        });
      });
    });
    var c = St$1$1.of(this._iid),
        p = c.dispatcher,
        m = c.logger;
    p.on(function (e) {
      if (e instanceof de$1) if (e.stateType === J$2.CONNECTED) m.debug("check huge gap"), a$1._checkHugeGap();else a$1._prevFill.stop(), a$1._nextFill.stop();
    });
  }

  return Object.defineProperty(e.prototype, "channel", {
    get: function () {
      return this._channel;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "succeededMessages", {
    get: function () {
      return a([], o(this._messages), !1);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "failedMessages", {
    get: function () {
      return this._unsentMessages.filter(function (e) {
        return e.sendingStatus === le$1.FAILED;
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "pendingMessages", {
    get: function () {
      return this._unsentMessages.filter(function (e) {
        return e.sendingStatus === le$1.PENDING;
      });
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "hasPrevious", {
    get: function () {
      return this._hasPrevious;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "hasNext", {
    get: function () {
      return this._hasNext;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "viewTop", {
    get: function () {
      return Math.min.apply(Math, a(a([], o(this._messages.map(function (e) {
        return e.createdAt;
      })), !1), [Number.MAX_SAFE_INTEGER], !1));
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "viewBottom", {
    get: function () {
      return Math.max.apply(Math, a(a([], o(this._messages.map(function (e) {
        return e.createdAt;
      })), !1), [0], !1));
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.setMessageCollectionHandler = function (e) {
    this._handler = e;
  }, e.prototype._filterUnderOffsetMessage = function (e) {
    var t = this;
    return e.filter(function (e) {
      return e.createdAt >= t._channel.messageOffsetTimestamp;
    });
  }, e.prototype._addMessagesToView = function (e, t) {
    var n,
        r$1$1,
        s$1 = this,
        i$1$1 = this._filterUnderOffsetMessage(e),
        a$1 = [],
        o$1 = [];

    try {
      for (var u = s(i$1$1), c = u.next(); !c.done; c = u.next()) {
        var p = c.value;

        if (p.messageId > 0) {
          if ((E = or(this._messages, p)) < 0) {
            var m = or(this._unsentMessages, p);
            m < 0 ? a$1.push(p) : (this._unsentMessages.splice(m, 1), o$1.push(p));
            var v = ur(this._messages, p);

            this._messages.splice(v, 0, p);
          } else o$1.push(p), this._messages[E] = p;

          if (this._readReceiptMap.set(p.messageId, this._channel.getUnreadMemberCount(p)), this._deliveryReceiptMap.set(p.messageId, this._channel.getUndeliveredMemberCount(p)), p.updatedAt > 0) {
            var g = this._updateChildMessagesInView(p);

            o$1.push.apply(o$1, a([], o(g), !1));
          }
        } else {
          var E;
          if (p instanceof xt$2) (E = or(this._unsentMessages, p)) < 0 ? or(this._messages, p) < 0 && (this._unsentMessages.push(p), a$1.push(p)) : (o$1.push(p), this._unsentMessages[E] = p);
        }
      }
    } catch (e) {
      n = {
        error: e
      };
    } finally {
      try {
        c && !c.done && (r$1$1 = u.return) && r$1$1.call(u);
      } finally {
        if (n) throw n.error;
      }
    }

    an$3(t) && Ie$1(function () {
      return r$1(s$1, void 0, void 0, function () {
        var e;
        return i$1(this, function (n) {
          return e = new Xn(t), a$1.length > 0 && this._handler.onMessagesAdded(e, this.channel, a$1), o$1.length > 0 && this._handler.onMessagesUpdated(e, this.channel, o$1), [2];
        });
      });
    });
  }, e.prototype._updateChildMessagesInView = function (e) {
    var t = [];
    return this._messages.forEach(function (n) {
      n.applyParentMessage(e) && t.push(n);
    }), t;
  }, e.prototype._updateMessagesToView = function (e, t) {
    var n,
        r$1$1,
        s$1 = this,
        i$1$1 = [];

    try {
      for (var a = s(e), o = a.next(); !o.done; o = a.next()) {
        var u,
            c = o.value;
        if (c.messageId > 0) {
          if ((u = or(this._messages, c)) >= 0) i$1$1.push(c), this._messages[u] = c;else {
            var l = or(this._unsentMessages, c);

            if (l >= 0) {
              i$1$1.push(c), this._unsentMessages.splice(l, 1);
              var h = ur(this._messages, c);

              this._messages.splice(h, 0, c);
            }
          }
        } else if (c instanceof xt$2) (u = or(this._unsentMessages, c)) >= 0 && (i$1$1.push(c), this._unsentMessages[u] = c);
      }
    } catch (e) {
      n = {
        error: e
      };
    } finally {
      try {
        o && !o.done && (r$1$1 = a.return) && r$1$1.call(a);
      } finally {
        if (n) throw n.error;
      }
    }

    return an$3(t) && Ie$1(function () {
      return r$1(s$1, void 0, void 0, function () {
        var e;
        return i$1(this, function (n) {
          return e = new Xn(t), i$1$1.length > 0 && this._handler.onMessagesUpdated(e, this.channel, i$1$1), [2];
        });
      });
    }), i$1$1;
  }, e.prototype._removeMessagesFromView = function (e, t) {
    var n,
        r$1$1,
        s$1 = this,
        i$1$1 = [],
        a = function (e) {
      var t = o._messages.findIndex(function (t) {
        return t.messageId === e;
      });

      t >= 0 && (i$1$1.push(o._messages[t].messageId), o._messages.splice(t, 1));
    },
        o = this;

    try {
      for (var u = s(e), c = u.next(); !c.done; c = u.next()) {
        a(c.value);
      }
    } catch (e) {
      n = {
        error: e
      };
    } finally {
      try {
        c && !c.done && (r$1$1 = u.return) && r$1$1.call(u);
      } finally {
        if (n) throw n.error;
      }
    }

    return an$3(t) && i$1$1.length > 0 && Ie$1(function () {
      return r$1(s$1, void 0, void 0, function () {
        var e;
        return i$1(this, function (n) {
          return e = new Xn(t), i$1$1.length > 0 && this._handler.onMessagesDeleted(e, this.channel, i$1$1), [2];
        });
      });
    }), i$1$1;
  }, e.prototype._removeUnsentMessageFromView = function (e, t) {
    var n = this._unsentMessages.findIndex(function (t) {
      return t.reqId === e;
    });

    n >= 0 && this._unsentMessages.splice(n, 1);
  }, e.prototype._getLocalMessages = function (e, t) {
    var n = t.prevLimit,
        r$1$1 = void 0 === n ? 0 : n,
        s = t.nextLimit,
        i$1$1 = void 0 === s ? 0 : s;
    return r$1(this, void 0, void 0, function () {
      var t, n, s, a$1, o$1, u, c;
      return i$1(this, function (d) {
        switch (d.label) {
          case 0:
            return t = Bn.of(this._iid), r$1$1 > 0 ? [4, t.getMessagesFromCache(this._channel.url, e, "prev", this.filter, this._limit)] : [3, 2];

          case 1:
            return s = d.sent(), [3, 3];

          case 2:
            s = [], d.label = 3;

          case 3:
            return n = s, i$1$1 > 0 ? [4, t.getMessagesFromCache(this._channel.url, e, "next", this.filter, this._limit)] : [3, 5];

          case 4:
            return o$1 = d.sent(), [3, 6];

          case 5:
            o$1 = [], d.label = 6;

          case 6:
            if (a$1 = o$1, n.length > 0 && a$1.length) for (c in u = n.map(function (e) {
              return e.messageId;
            }), a$1) if (u.includes(a$1[c].messageId)) {
              a$1.splice(parseInt(c), 1);
              break;
            }
            return [2, a(a([], o(n), !1), o(a$1), !1).sort(function (e, t) {
              return t.createdAt - e.createdAt;
            })];
        }
      });
    });
  }, e.prototype._getRemoteMessages = function (e, t) {
    var n$1$1 = t.prevLimit,
        r$1$1 = void 0 === n$1$1 ? 0 : n$1$1,
        i$1$1 = t.nextLimit,
        a = void 0 === i$1$1 ? 0 : i$1$1,
        o = t.source,
        u = void 0 === o ? $t$2.REQUEST_MESSAGE : o;
    return r$1(this, void 0, void 0, function () {
      var t, n$1$1;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = En$3.of(this._iid), r$1$1 > 0 || a > 0 ? [4, t.getMessagesByTimestamp(this._channel.url, this._channel.channelType, e, n$1(n$1({}, this.filter), {
              prevResultSize: r$1$1,
              nextResultSize: a,
              includeMetaArray: !0,
              includeReactions: !0,
              includeThreadInfo: !0
            }), u)] : [3, 2];

          case 1:
            return n$1$1 = i.sent(), [3, 3];

          case 2:
            n$1$1 = [], i.label = 3;

          case 3:
            return [2, n$1$1];
        }
      });
    });
  }, e.prototype._checkHugeGap = function () {
    return r$1(this, void 0, void 0, function () {
      var e,
          t,
          n$1$1,
          r$1$1,
          i$1$1,
          a$1,
          o$1,
          u,
          c,
          f,
          p = this;
      return i$1(this, function (m) {
        switch (m.label) {
          case 0:
            return this._messages.length > 0 ? (e = this.viewTop, t = this._syncRange.top, n$1$1 = this._syncRange.bottom, r$1$1 = this.hasNext ? this.viewBottom : Number.MAX_SAFE_INTEGER, [4, (i$1$1 = Bn.of(this._iid)).getCachedMessageCountBetween(this._channel.url, this.filter, e, t)]) : [3, 4];

          case 1:
            return a$1 = m.sent(), [4, i$1$1.getCachedMessageCountBetween(this._channel.url, this.filter, n$1$1, r$1$1)];

          case 2:
            return o$1 = m.sent(), [4, Ee$1(function () {
              return r$1(p, void 0, void 0, function () {
                var i$1$1,
                    u,
                    c,
                    f,
                    p,
                    m,
                    v,
                    g,
                    E,
                    y,
                    C,
                    N,
                    b,
                    S,
                    A,
                    T,
                    U,
                    I = this;
                return i$1(this, function (w) {
                  switch (w.label) {
                    case 0:
                      return i$1$1 = St$1$1.of(this._iid), u = i$1$1.dispatcher, c = i$1$1.requestQueue, f = new nr(n$1({
                        channelUrl: this._channel.url,
                        channelType: this._channel.channelType,
                        prevStart: e,
                        prevEnd: t,
                        prevCount: a$1,
                        nextStart: n$1$1,
                        nextEnd: r$1$1,
                        nextCount: o$1
                      }, this.filter)), [4, c.send(f)];

                    case 1:
                      return p = w.sent(), m = p.as(rr), v = m.isHugeGap, g = m.prevMessages, E = void 0 === g ? [] : g, y = m.prevHasMore, C = m.nextMessages, N = void 0 === C ? [] : C, b = m.nextHasmore, v ? Ie$1(function () {
                        return r$1(I, void 0, void 0, function () {
                          return i$1(this, function (e) {
                            return this._handler.onHugeGapDetected(), [2];
                          });
                        });
                      }) : (this._hasPrevious = y, this._hasNext = b, S = this.viewTop, A = this.viewBottom, T = Math.min.apply(Math, a([Number.MAX_SAFE_INTEGER], o(E.map(function (e) {
                        return e.createdAt;
                      })), !1)), U = Math.max.apply(Math, a([0], o(N.map(function (e) {
                        return e.createdAt;
                      })), !1)), u.dispatch(new un$3({
                        messages: E,
                        source: $t$2.SYNC_MESSAGE_FILL
                      })), u.dispatch(new un$3({
                        messages: N,
                        source: $t$2.SYNC_MESSAGE_FILL
                      })), this._syncRange.extends(T, U), S < T && this._prevFill.start(T), A > U && this._nextFill.start(U)), [2];
                  }
                });
              });
            }, 1)];

          case 3:
            return m.sent(), [3, 6];

          case 4:
            return u = Math.floor(this._limit / 2), [4, this._getRemoteMessages(Date.now(), {
              prevLimit: u,
              nextLimit: u,
              source: $t$2.SYNC_MESSAGE_FILL
            })];

          case 5:
            (c = m.sent()).length > 0 && ((f = this._syncRange).extends.apply(f, a([], o(c.map(function (e) {
              return e.createdAt;
            })), !1)), c.length < u && (this._hasPrevious = !1, this._hasNext = !1)), m.label = 6;

          case 6:
            return [2];
        }
      });
    });
  }, e.prototype._loadAllFailedMessages = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, Bn.of(this._iid).getAllFailedMessagesFromCache(this._channel.url, this.filter)];

          case 1:
            return e = t.sent(), this._unsentMessages = e, [2, e];
        }
      });
    });
  }, e.prototype.initialize = function (e) {
    var t = this,
        n = new dr();
    this._messages = [], this._unsentMessages = [], this._syncRange = new Gn({}), this._hasNext = !0, this._hasPrevious = !0;
    var r = Math.floor(this._limit / 2);
    if (e === Wn.CACHE_AND_REPLACE_BY_API) this._getLocalMessages(this._startingPoint, {
      prevLimit: r,
      nextLimit: r
    }).then(function (e) {
      var r = t._filterUnderOffsetMessage(e);

      t._addMessagesToView(r, $t$2.REQUEST_MESSAGE), n._invokeResponse("local", null, r);
    }).catch(function (e) {
      if (h$1(e)) throw e;

      n._invokeResponse("local", e, null);
    }).finally(function () {
      t._loadAllFailedMessages(), t._getRemoteMessages(t._startingPoint, {
        prevLimit: r,
        nextLimit: r
      }).then(function (e) {
        var s;
        t._messages = [];

        var i = t._filterUnderOffsetMessage(e);

        i.length < r && (t._hasPrevious = !1, t._hasNext = !1), i.length > 0 && ((s = t._syncRange).extends.apply(s, a([], o(i.map(function (e) {
          return e.createdAt;
        })), !1)), t._addMessagesToView(i, $t$2.REQUEST_MESSAGE)), n._invokeResponse("remote", null, i);
      }).catch(function (e) {
        if (h$1(e)) throw e;

        n._invokeResponse("remote", e, null);
      });
    });
    return n;
  }, e.prototype.loadPrevious = function () {
    return r$1(this, void 0, void 0, function () {
      var e,
          t,
          n,
          r$1$1,
          s = this;
      return i$1(this, function (i$1$1) {
        switch (i$1$1.label) {
          case 0:
            return this._hasPrevious ? (e = this.viewTop, t = [], [4, Se$1(function () {
              return r$1(s, void 0, void 0, function () {
                var n;
                return i$1(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return n = this._filterUnderOffsetMessage, [4, this._getLocalMessages(e, {
                        prevLimit: this._limit
                      })];

                    case 1:
                      return t = n.apply(this, [r.sent()]), [2];
                  }
                });
              });
            })]) : [3, 5];

          case 1:
            return i$1$1.sent(), n = $n.of(this._iid, this._channel), 0 !== t.length && n.isWrappingMessages(t) ? [3, 3] : [4, Se$1(function () {
              return r$1(s, void 0, void 0, function () {
                var r, s;
                return i$1(this, function (i) {
                  switch (i.label) {
                    case 0:
                      return r = this._filterUnderOffsetMessage, [4, this._getRemoteMessages(e, {
                        prevLimit: this._limit
                      })];

                    case 1:
                      return t = r.apply(this, [i.sent()]), this._hasPrevious = t.length >= this._limit, t.length > 0 && ((s = this._syncRange).extends.apply(s, a([], o(t.map(function (e) {
                        return e.createdAt;
                      })), !1)), n.range.overlap(this._syncRange) && n.range.extends(this._syncRange.top)), [2];
                  }
                });
              });
            })];

          case 2:
            return i$1$1.sent(), this._addMessagesToView(t, $t$2.REQUEST_MESSAGE), [3, 4];

          case 3:
            this._hasPrevious = t.length >= this._limit, t.length > 0 && ((r$1$1 = this._syncRange).extends.apply(r$1$1, a([], o(t.map(function (e) {
              return e.createdAt;
            })), !1)), this._addMessagesToView(t, $t$2.REQUEST_MESSAGE)), i$1$1.label = 4;

          case 4:
            return [2, t];

          case 5:
            return [2, []];
        }
      });
    });
  }, e.prototype.loadNext = function () {
    return r$1(this, void 0, void 0, function () {
      var e,
          t,
          n,
          r$1$1,
          s = this;
      return i$1(this, function (i$1$1) {
        switch (i$1$1.label) {
          case 0:
            return e = this.viewBottom, t = [], [4, Se$1(function () {
              return r$1(s, void 0, void 0, function () {
                var n;
                return i$1(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return n = this._filterUnderOffsetMessage, [4, this._getLocalMessages(e, {
                        nextLimit: this._limit
                      })];

                    case 1:
                      return t = n.apply(this, [r.sent()]), [2];
                  }
                });
              });
            })];

          case 1:
            return i$1$1.sent(), n = $n.of(this._iid, this._channel), 0 !== t.length && n.isWrappingMessages(t) ? [3, 3] : [4, Se$1(function () {
              return r$1(s, void 0, void 0, function () {
                var r, s;
                return i$1(this, function (i) {
                  switch (i.label) {
                    case 0:
                      return r = this._filterUnderOffsetMessage, [4, this._getRemoteMessages(e, {
                        nextLimit: this._limit
                      })];

                    case 1:
                      return t = r.apply(this, [i.sent()]), this._hasNext = t.length >= this._limit, t.length > 0 && ((s = this._syncRange).extends.apply(s, a([], o(t.map(function (e) {
                        return e.createdAt;
                      })), !1)), n.range.overlap(this._syncRange) && n.range.extends(this._syncRange.bottom)), [2];
                  }
                });
              });
            })];

          case 2:
            return i$1$1.sent(), this._addMessagesToView(t, $t$2.REQUEST_MESSAGE), [3, 4];

          case 3:
            this._hasNext = t.length >= this._limit, t.length > 0 && ((r$1$1 = this._syncRange).extends.apply(r$1$1, a([], o(t.map(function (e) {
              return e.createdAt;
            })), !1)), this._addMessagesToView(t, $t$2.REQUEST_MESSAGE)), i$1$1.label = 4;

          case 4:
            return [2, t];
        }
      });
    });
  }, e.prototype.removeFailedMessage = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, Bn.of(this._iid).removeFailedMessageFromCache(e)];

          case 1:
            return n.sent(), (t = this._unsentMessages.findIndex(function (t) {
              return t.reqId === e;
            })) > -1 && this._unsentMessages.splice(t, 1), [2];
        }
      });
    });
  }, e.prototype.dispose = function () {
    var e = Bn.of(this._iid);
    e.unsubscribeGroupChannelEvent(this._key), e.unsubscribeMessageEvent(this._key);
  }, e;
}(),
    fr = {
  coverUrl: null,
  coverImage: null,
  isDistinct: null,
  isPublic: null,
  isDiscoverable: null,
  accessCode: null,
  name: null,
  data: null,
  customType: null,
  operatorUserIds: null,
  messageSurvivalSeconds: null
},
    pr = {
  hidePreviousMessages: !1,
  allowAutoUnhide: !0
},
    mr = function (t$1) {
  function n(e) {
    var n = this,
        r = e.channelUrl,
        s = e.token,
        i = e.limit,
        a = e.order,
        o = e.mutedMemberFilter,
        u = e.memberStateFilter,
        c = e.nicknameStartsWithFilter,
        l = e.operatorFilter;
    return (n = t$1.call(this) || this).method = d$1.GET, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(r), "/members"), n.params = {
      token: s,
      limit: i,
      order: a,
      muted_member_filter: o,
      member_state_filter: u,
      nickname_startswith: c,
      operator_filter: l,
      show_member_is_muted: !0,
      show_read_receipt: !0,
      show_delivery_receipt: !0
    }, n;
  }

  return t(n, t$1), n;
}(q$2),
    vr = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    r.token = null, r.members = [];
    var s = n.next,
        i = n.members;
    return r.token = s, i && i.length > 0 && (r.members = i.map(function (t) {
      return new It(e, t);
    })), r;
  }

  return t(n, t$1), n;
}(F$1);

!function (e) {
  e.ALL = "all", e.MUTED = "muted", e.UNMUTED = "unmuted";
}(cr || (cr = {})), function (e) {
  e.MEMBER_NICKNAME_ALPHABETICAL = "member_nickname_alphabetical", e.OPERATOR_THEN_MEMBER_ALPHABETICAL = "operator_then_member_alphabetical";
}(lr || (lr = {})), function (e) {
  e.ALL = "all", e.JOINED = "joined_only", e.INVITED = "invited_only", e.INVITED_BY_FRIEND = "invited_by_friend", e.INVITED_BY_NON_FRIEND = "invited_by_non_friend";
}(hr || (hr = {}));

var gr = function (n$1$1) {
  function r$1$1(e, t, r) {
    var s,
        a,
        o,
        u,
        c = this;
    return (c = n$1$1.call(this, e, t, ne$1.GROUP, r) || this).mutedMemberFilter = cr.ALL, c.memberStateFilter = hr.ALL, c.nicknameStartsWithFilter = null, c.operatorFilter = At.ALL, c.order = lr.MEMBER_NICKNAME_ALPHABETICAL, c.mutedMemberFilter = null !== (s = r.mutedMemberFilter) && void 0 !== s ? s : cr.ALL, c.memberStateFilter = null !== (a = r.memberStateFilter) && void 0 !== a ? a : hr.ALL, c.nicknameStartsWithFilter = null !== (o = r.nicknameStartsWithFilter) && void 0 !== o ? o : null, c.order = null !== (u = r.order) && void 0 !== u ? u : lr.MEMBER_NICKNAME_ALPHABETICAL, c;
  }

  return t(r$1$1, n$1$1), r$1$1.prototype._validate = function () {
    return n$1$1.prototype._validate.call(this) && m(cr, this.mutedMemberFilter) && m(hr, this.memberStateFilter) && (y("string", this.nicknameStartsWithFilter) || null === this.nicknameStartsWithFilter) && m(At, this.operatorFilter) && m(lr, this.order);
  }, r$1$1.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n$1$1, r, i$1$1, a;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, e = St$1$1.of(this._iid).requestQueue, t = new mr(n$1(n$1({}, this), {
              token: this._token
            })), [4, e.send(t)]) : [3, 2] : [3, 5];

          case 1:
            return n$1$1 = o.sent(), r = n$1$1.as(vr), i$1$1 = r.members, a = r.token, this._token = a, this._hasNext = !!a, this._isLoading = !1, [2, i$1$1];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, r$1$1;
}(On$2),
    Er = function (t$1) {
  function n(e) {
    var n = this,
        r = e.channelUrl,
        s = e.userId,
        i = e.accessCode;
    return (n = t$1.call(this) || this).method = d$1.PUT, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(r), "/accept"), n.params = {
      user_id: s,
      access_code: i
    }, n;
  }

  return t(n, t$1), n;
}(q$2),
    yr = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.channel = new Vr(e, n), r.channel.myMemberState = yt.JOINED, r;
  }

  return t(n, t$1), n;
}(F$1),
    Cr = function (t$1) {
  function n(e) {
    var n = this,
        s = e.channelUrl,
        i = e.isDistinct,
        a = e.isPublic,
        o = e.isDiscoverable,
        u = e.coverUrl,
        c = e.coverImage,
        l = e.accessCode,
        h = e.name,
        d$1$1 = e.data,
        _ = e.customType,
        f = e.operatorUserIds,
        p = e.messageSurvivalSeconds;
    return (n = t$1.call(this) || this).method = d$1.PUT, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(s)), n.params = U$2({
      is_distinct: i,
      is_public: a,
      is_discoverable: o,
      name: h,
      data: d$1$1,
      custom_type: _,
      cover_url: u,
      cover_file: c,
      access_code: l,
      operator_ids: f,
      message_survival_seconds: p
    }), n;
  }

  return t(n, t$1), n;
}(q$2),
    Nr = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.channel = new Vr(e, n), r;
  }

  return t(n, t$1), n;
}(F$1),
    br = function (t$1) {
  function n(e) {
    var n = this,
        r = e.channelUrl;
    return (n = t$1.call(this) || this).method = d$1.DELETE, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(r)), n;
  }

  return t(n, t$1), n;
}(q$2);

!function (t$1) {
  function n(e, n) {
    return t$1.call(this, e, n) || this;
  }

  t(n, t$1);
}(F$1);

var Mr = function (t$1) {
  function n(e) {
    var n = this,
        r = e.channelUrl;
    return (n = t$1.call(this) || this).method = d$1.DELETE, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(r), "/hide"), n;
  }

  return t(n, t$1), n;
}(q$2);

!function (t$1) {
  function n() {
    return null !== t$1 && t$1.apply(this, arguments) || this;
  }

  t(n, t$1);
}(F$1);

var Sr = function (t$1) {
  function n(e) {
    var n = e.userId,
        r = e.channelUrl,
        s = e.countPreference,
        i = t$1.call(this) || this;
    return i.method = d$1.PUT, i.path = "".concat(Ue$1, "/").concat(encodeURIComponent(n), "/count_preference/").concat(encodeURIComponent(r)), i.params = {
      count_preference: s
    }, i;
  }

  return t(n, t$1), n;
}(q$2),
    Ar = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.countPreference = Or[n.count_preference], r;
  }

  return t(n, t$1), n;
}(F$1),
    Tr = function (t$1) {
  function n(e) {
    var n = this,
        r = e.channelUrl;
    return (n = t$1.call(this) || this).method = d$1.PUT, n.path = "".concat(qe$1, "/").concat(encodeURIComponent(r), "/reset_user_history"), n;
  }

  return t(n, t$1), n;
}(q$2),
    Ur = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    r.messageOffsetTimestamp = null;
    var s = n.ts_message_offset;
    return r.messageOffsetTimestamp = null != s ? s : null, r;
  }

  return t(n, t$1), n;
}(F$1),
    Ir = n$1(n$1({}, Ie), {
  scheduledAt: null,
  file: null,
  fileUrl: null,
  fileName: null,
  mimeType: null,
  fileSize: null,
  thumbnailSizes: null,
  requireAuth: !1
}),
    wr = n$1(n$1({}, we), {
  scheduledAt: null
}),
    Dr = function (t$1) {
  function n(e) {
    var n,
        r = this;
    r = t$1.call(this) || this;
    var s = [];
    e.mentionType === ae$1.USERS && (e.mentionedUserIds ? s = e.mentionedUserIds : e.mentionedUsers && (s = e.mentionedUsers.map(function (e) {
      return e.userId;
    })));
    var i = e.channelType,
        a = e.channelUrl,
        o = e.scheduledMessageId;
    return r.method = d$1.PUT, r.path = "".concat(We$1(i), "/").concat(encodeURIComponent(a), "/scheduled_messages/").concat(encodeURIComponent(o)), r.params = {
      req_id: e.reqId,
      scheduled_at: e.scheduledAt,
      message_type: oe$1.FILE,
      url: e.fileUrl,
      file_name: e.fileName,
      file_size: e.fileSize,
      file_type: e.mimeType,
      thumbnails: e.thumbnailSizes ? e.thumbnailSizes.map(function (e) {
        return Gt$2.payloadify(e);
      }) : [],
      custom_type: e.customType,
      data: e.data,
      require_auth: e.requireAuth,
      mention_type: e.mentionType,
      mentioned_user_ids: s,
      sorted_metaarray: null === (n = e.metaArrays) || void 0 === n ? void 0 : n.map(function (e) {
        return Dt$1$1.payloadify(e);
      }),
      apple_critical_alert_options: Lt$2.payloadify(e.appleCriticalAlertOptions),
      push_option: e.pushNotificationDeliveryOption
    }, r;
  }

  return t(n, t$1), n;
}(q$2),
    Lr = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.message = new Wt$2(e, n), r;
  }

  return t(n, t$1), n;
}(F$1),
    Rr = function (t$1) {
  function n(e) {
    var n,
        r = this;
    r = t$1.call(this) || this;
    var s = [];
    e.mentionType === ae$1.USERS && (e.mentionedUserIds ? s = e.mentionedUserIds : e.mentionedUsers && (s = e.mentionedUsers.map(function (e) {
      return e.userId;
    })));
    var i = e.channelType,
        a = e.channelUrl,
        o = e.scheduledMessageId;
    return r.method = d$1.PUT, r.path = "".concat(We$1(i), "/").concat(encodeURIComponent(a), "/scheduled_messages/").concat(encodeURIComponent(o)), r.params = {
      req_id: e.reqId,
      scheduled_at: e.scheduledAt,
      message_type: oe$1.USER,
      message: e.message,
      custom_type: e.customType,
      data: e.data,
      mention_type: e.mentionType,
      mentioned_user_ids: s,
      sorted_metaarray: null === (n = e.metaArrays) || void 0 === n ? void 0 : n.map(function (e) {
        return Dt$1$1.payloadify(e);
      }),
      apple_critical_alert_options: Lt$2.payloadify(e.appleCriticalAlertOptions),
      target_langs: e.translationTargetLanguages,
      push_option: e.pushNotificationDeliveryOption
    }, r;
  }

  return t(n, t$1), n;
}(q$2);

!function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    return r.message = new Vt$2(e, n), r;
  }

  t(n, t$1);
}(F$1);

var Or,
    kr,
    Fr,
    Pr = function (t$1) {
  function n(e) {
    var n = t$1.call(this) || this,
        r = e.channelType,
        s = e.channelUrl,
        i = e.scheduledMessageId;
    return n.method = d$1.DELETE, n.path = "".concat(We$1(r), "/").concat(encodeURIComponent(s), "/scheduled_messages/").concat(encodeURIComponent(i)), n;
  }

  return t(n, t$1), n;
}(q$2),
    xr = function (t$1) {
  function n(e) {
    var n = t$1.call(this) || this,
        r = e.channelType,
        s = e.channelUrl,
        i = e.scheduledMessageId;
    return n.method = d$1.POST, n.path = "".concat(We$1(r), "/").concat(encodeURIComponent(s), "/scheduled_messages/").concat(encodeURIComponent(i), "/send_now"), n;
  }

  return t(n, t$1), n;
}(q$2);

!function (e) {
  e.ALL = "all", e.UNREAD_MESSAGE_COUNT_ONLY = "unread_message_count_only", e.UNREAD_MENTION_COUNT_ONLY = "unread_mention_count_only", e.OFF = "off";
}(Or || (Or = {})), function (e) {
  e.MUTED = "muted", e.UNMUTED = "unmuted";
}(kr || (kr = {})), function (e) {
  e.UNHIDDEN = "unhidden", e.HIDDEN_ALLOW_AUTO_UNHIDE = "hidden_allow_auto_unhide", e.HIDDEN_PREVENT_AUTO_UNHIDE = "hidden_prevent_auto_unhide";
}(Fr || (Fr = {}));

var Hr,
    Vr = function (o$1) {
  function u(e, r) {
    var u,
        c,
        d,
        _,
        f,
        p,
        v,
        g,
        E,
        y$1,
        C,
        N,
        b,
        M,
        S,
        A,
        T,
        U,
        I = this;

    return (I = o$1.call(this, e, r) || this)._unreadMemberStateMap = new Map(), I._undeliveredMemberStateMap = new Map(), I._typingStatus = new Map(), I._lastMemberCountUpdated = 0, I._typingStarted = 0, I._typingEnded = 0, I.isDistinct = !1, I.isSuper = !1, I.isBroadcast = !1, I.isExclusive = !1, I.isPublic = !1, I.isDiscoverable = !0, I.isAccessCodeRequired = !1, I.isPushEnabled = !1, I.unreadMessageCount = 0, I.unreadMentionCount = 0, I.members = [], I.memberCount = 0, I.joinedMemberCount = 0, I.hiddenState = Fr.UNHIDDEN, I.lastMessage = null, I.messageOffsetTimestamp = 0, I.messageSurvivalSeconds = -1, I.myMemberState = yt.NONE, I.myRole = re$1.NONE, I.myMutedState = kr.UNMUTED, I.myLastRead = 0, I.myCountPreference = Or.ALL, I.myPushTriggerOption = H$1.DEFAULT, I.inviter = null, I.invitedAt = 0, I.joinedAt = 0, I.channelType = ne$1.GROUP, I.isDistinct = null !== (c = r.is_distinct) && void 0 !== c && c, I.isSuper = null !== (d = r.is_super) && void 0 !== d && d, I.isBroadcast = null !== (_ = r.is_broadcast) && void 0 !== _ && _, I.isExclusive = null !== (f = r.is_exclusive) && void 0 !== f && f, I.isPublic = null !== (p = r.is_public) && void 0 !== p && p, I.isDiscoverable = null !== (v = r.is_discoverable) && void 0 !== v ? v : I.isPublic, I.isAccessCodeRequired = null !== (g = r.is_access_code_required) && void 0 !== g && g, I.isPushEnabled = null !== (E = r.is_push_enabled) && void 0 !== E && E, Array.isArray(r.members) && (u = I.members).push.apply(u, a([], o(r.members.map(function (e) {
      return new It(I._iid, e);
    })), !1)), I.memberCount = null !== (y$1 = r.member_count) && void 0 !== y$1 ? y$1 : 0, I.joinedMemberCount = null !== (C = r.joined_member_count) && void 0 !== C ? C : 0, I.hiddenState = m(Fr, r.hidden_state) ? r.hidden_state : Fr.UNHIDDEN, I.messageOffsetTimestamp = null !== (N = r.ts_message_offset) && void 0 !== N ? N : 0, I.messageSurvivalSeconds = null !== (b = r.message_survival_seconds) && void 0 !== b ? b : -1, I.lastMessage = r.last_message ? Ht$2(I._iid, n$1({
      channel_type: I.channelType
    }, r.last_message)) : null, r.read_receipt && Object.keys(r.read_receipt).forEach(function (e) {
      y("number", r.read_receipt[e]) && I._updateUnreadMemberState(e, r.read_receipt[e]);
    }), r.delivery_receipt && Object.keys(r.delivery_receipt).forEach(function (e) {
      y("number", r.delivery_receipt[e]) && I._updateUndeliveredMemberState(e, r.delivery_receipt[e]);
    }), I.myMemberState = m(yt, r.member_state) ? r.member_state : yt.NONE, I.myRole = m(re$1, r.my_role) ? r.my_role : re$1.NONE, m(kr, r.is_muted) ? I.myMutedState = r.is_muted : y("boolean", r.is_muted) ? I.myMutedState = r.is_muted ? kr.MUTED : kr.UNMUTED : I.myMutedState = kr.UNMUTED, I.myCountPreference = m(Or, r.count_preference) ? r.count_preference : Or.ALL, I.myPushTriggerOption = m(H$1, r.push_trigger_option) ? r.push_trigger_option : H$1.ALL, I.myLastRead = null !== (M = r.user_last_read) && void 0 !== M ? M : 0, I.inviter = r.inviter ? new ct$1(I._iid, r.inviter) : null, I.invitedAt = null !== (S = r.invited_at) && void 0 !== S ? S : 0, I.joinedAt = null !== (A = r.joined_ts) && void 0 !== A ? A : 0, I._updateUnreadCount(null !== (T = r.unread_message_count) && void 0 !== T ? T : 0, null !== (U = r.unread_mention_count) && void 0 !== U ? U : 0), I;
  }

  return t(u, o$1), Object.defineProperty(u.prototype, "isHidden", {
    get: function () {
      return this.hiddenState !== Fr.UNHIDDEN;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(u.prototype, "isTyping", {
    get: function () {
      return Object.keys(this._typingStatus).length > 0;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(u.prototype, "cachedUnreadMemberState", {
    get: function () {
      var e,
          t,
          n = {};

      try {
        for (var r = s(this._unreadMemberStateMap), s$1 = r.next(); !s$1.done; s$1 = r.next()) {
          var i = o(s$1.value, 2),
              a = i[0],
              o$1 = i[1];
          n[a] = o$1;
        }
      } catch (t) {
        e = {
          error: t
        };
      } finally {
        try {
          s$1 && !s$1.done && (t = r.return) && t.call(r);
        } finally {
          if (e) throw e.error;
        }
      }

      return n;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(u.prototype, "cachedUndeliveredMemberState", {
    get: function () {
      var e,
          t,
          n = {};

      try {
        for (var r = s(this._undeliveredMemberStateMap), s$1 = r.next(); !s$1.done; s$1 = r.next()) {
          var i = o(s$1.value, 2),
              a = i[0],
              o$1 = i[1];
          n[a] = o$1;
        }
      } catch (t) {
        e = {
          error: t
        };
      } finally {
        try {
          s$1 && !s$1.done && (t = r.return) && t.call(r);
        } finally {
          if (e) throw e.error;
        }
      }

      return n;
    },
    enumerable: !1,
    configurable: !0
  }), u.payloadify = function (e) {
    return e ? U$2(n$1(n$1({}, o$1.payloadify.call(this, e)), {
      is_access_code_required: e.isAccessCodeRequired,
      is_distinct: e.isDistinct,
      is_super: e.isSuper,
      is_broadcast: e.isBroadcast,
      is_exclusive: e.isExclusive,
      is_public: e.isPublic,
      is_discoverable: e.isDiscoverable,
      is_muted: e.myMutedState,
      is_push_enabled: e.isPushEnabled,
      unread_message_count: e.unreadMessageCount,
      unread_mention_count: e.unreadMentionCount,
      push_trigger_option: e.myPushTriggerOption,
      count_preference: e.myCountPreference,
      hidden_state: e.hiddenState,
      member_count: e.memberCount,
      joined_member_count: e.joinedMemberCount,
      member_state: e.myMemberState,
      my_role: e.myRole,
      user_last_read: e.myLastRead,
      ts_message_offset: e.messageOffsetTimestamp,
      message_survival_seconds: e.messageSurvivalSeconds,
      read_receipt: e.cachedUnreadMemberState,
      delivery_receipt: e.cachedUndeliveredMemberState,
      members: e.members.map(function (e) {
        return It.payloadify(e);
      }),
      last_message: Bt$2(e.lastMessage),
      inviter: e.inviter ? ct$1.payloadify(e.inviter) : null,
      invited_at: e.invitedAt,
      joined_ts: e.joinedAt
    })) : null;
  }, u.prototype._updateUnreadCount = function (e, t) {
    if ("number" == typeof e && e >= 0) {
      if (this.myCountPreference === Or.ALL || this.myCountPreference === Or.UNREAD_MESSAGE_COUNT_ONLY) {
        if (this.isExclusive || this.isSuper || this.isBroadcast) {
          var n = St$1$1.of(this._iid).maxSuperGroupChannelUnreadCount;
          this.unreadMessageCount = n && e >= n ? n : e;
        } else this.unreadMessageCount = e;
      } else this.unreadMessageCount = 0;
    } else this.unreadMessageCount = 0;
    "number" == typeof t && t >= 0 && (this.myCountPreference === Or.ALL || this.myCountPreference === Or.UNREAD_MENTION_COUNT_ONLY) ? this.unreadMentionCount = t : this.unreadMentionCount = 0;
  }, u.prototype._updateUnreadMemberState = function (e, t) {
    var n = this._unreadMemberStateMap.get(e);

    return (!n || n < t) && (this._unreadMemberStateMap.set(e, t), St$1$1.of(this._iid).sdkState.userId === e && (this.myLastRead = t), !0);
  }, u.prototype._updateUndeliveredMemberState = function (e, t) {
    var n = this._undeliveredMemberStateMap.get(e);

    (!n || n < t) && this._undeliveredMemberStateMap.set(e, t);
  }, u.prototype._updateTypingStatus = function (e, t) {
    void 0 === t && (t = new Date().getTime()), t > 0 ? this._typingStatus[e.userId] = {
      user: e,
      ts: t
    } : delete this._typingStatus[e.userId];
  }, u.prototype._invalidateTypingStatus = function () {
    var e = new Date().getTime(),
        t = !1;

    for (var n in this._typingStatus) {
      e - this._typingStatus[n].ts >= 1e4 && (delete this._typingStatus[n], t = !0);
    }

    return t;
  }, u.prototype._setLatestMemberCount = function (e, t, n) {
    var r = !1;
    return n >= this._lastMemberCountUpdated && (this._lastMemberCountUpdated = n, r = e !== this.memberCount || t !== this.joinedMemberCount, this.memberCount = e, this.joinedMemberCount = t), r;
  }, u.prototype.isReadMessage = function (e) {
    var t = St$1$1.of(this._iid).sdkState,
        n = this._unreadMemberStateMap.get(t.userId);

    return n && n >= e.createdAt;
  }, u.prototype.serialize = function () {
    var e = this;
    return st$1(this, function (t) {
      t.cachedUnreadMemberState = e.cachedUnreadMemberState, t.cachedUndeliveredMemberState = e.cachedUndeliveredMemberState;
    });
  }, u.prototype.createMessageCollection = function (e) {
    return void 0 === e && (e = {}), new _r(this._iid, n$1({
      channel: this
    }, e));
  }, u.prototype.createMemberListQuery = function (e) {
    return void 0 === e && (e = {}), new gr(this._iid, this.url, e);
  }, u.prototype.addMember = function (e, t) {
    if (void 0 === t && (t = 0), !this.isExclusive && !this.isSuper && !this.isBroadcast) {
      var n = this.members.findIndex(function (t) {
        return t.userId === e.userId;
      });

      if (n > -1) {
        var r = this.members[n];
        r.state === yt.JOINED && (e.state = r.state), this.members.splice(n, 1), this.memberCount--;
      }

      this.members.push(e), this.memberCount++, this._updateUnreadMemberState(e.userId, t), this._updateUndeliveredMemberState(e.userId, t);
    }
  }, u.prototype.removeMember = function (e) {
    if (!this.isExclusive && !this.isSuper && !this.isBroadcast) {
      var t = this.members.findIndex(function (t) {
        return t.userId === e.userId;
      });
      if (t > -1) return this.members.splice(t, 1), this.memberCount--, !0;
    }

    return !1;
  }, u.prototype.getUnreadMemberCount = function (e) {
    var t, n;

    if (e instanceof xt$2 && !this.isExclusive && !this.isSuper && !this.isBroadcast) {
      var r = St$1$1.of(this._iid).sdkState,
          s$1 = e.createdAt,
          i = 0;

      try {
        for (var a = s(this.members), o = a.next(); !o.done; o = a.next()) {
          var u = o.value;
          if (r.userId !== u.userId && u.state === yt.JOINED && e.sender.userId !== u.userId) (this.cachedUnreadMemberState[u.userId] || 0) < s$1 && i++;
        }
      } catch (e) {
        t = {
          error: e
        };
      } finally {
        try {
          o && !o.done && (n = a.return) && n.call(a);
        } finally {
          if (t) throw t.error;
        }
      }

      return i;
    }

    return 0;
  }, u.prototype.getUndeliveredMemberCount = function (e) {
    var t, n;

    if (e instanceof xt$2 && !this.isExclusive && !this.isSuper && !this.isBroadcast) {
      var r = St$1$1.of(this._iid).sdkState,
          s$1 = e.createdAt,
          i = 0;

      try {
        for (var a = s(this.members), o = a.next(); !o.done; o = a.next()) {
          var u = o.value;
          if (r.userId !== u.userId && u.state === yt.JOINED && e.sender.userId !== u.userId) (this.cachedUndeliveredMemberState[u.userId] || 0) < s$1 && i++;
        }
      } catch (e) {
        t = {
          error: e
        };
      } finally {
        try {
          o && !o.done && (n = a.return) && n.call(a);
        } finally {
          if (t) throw t.error;
        }
      }

      return i;
    }

    return 0;
  }, u.prototype.getReadMembers = function (e, t) {
    var n = this;
    void 0 === t && (t = !1);
    var r = St$1$1.of(this._iid).sdkState;
    if (!r.userId || this.isExclusive || this.isSuper || this.isBroadcast) return [];
    var s = [];
    return this.members.forEach(function (i) {
      (t || i.userId !== r.userId && i.userId !== e.sender.userId) && n._unreadMemberStateMap.get(i.userId) >= e.createdAt && s.push(i);
    }), s;
  }, u.prototype.getUnreadMembers = function (e, t) {
    var n = this;
    void 0 === t && (t = !1);
    var r = St$1$1.of(this._iid).sdkState;
    if (!r.userId || this.isExclusive || this.isSuper || this.isBroadcast) return [];
    var s = [];
    return this.members.forEach(function (i) {
      (t || i.userId !== r.userId && i.userId !== e.sender.userId) && n._unreadMemberStateMap.get(i.userId) < e.createdAt && s.push(i);
    }), s;
  }, u.prototype.getReadStatus = function (e) {
    var t = this;
    void 0 === e && (e = !1);
    var n = St$1$1.of(this._iid).sdkState;
    if (!n.userId || this.isExclusive || this.isSuper || this.isBroadcast) return null;
    var r = {};
    return this.members.forEach(function (s) {
      if (e || s.userId !== n.userId) {
        var i = t._unreadMemberStateMap.get(s.userId);

        r[s.userId] = new wt(t._iid, {
          channel_url: t.url,
          channel_type: t.channelType,
          user: It.payloadify(s),
          ts: i
        });
      }
    }), r;
  }, u.prototype.getTypingUsers = function () {
    var e = [];

    for (var t in this._typingStatus) {
      var n = this._typingStatus[t].user;
      e.push(n);
    }

    return e;
  }, u.prototype.invalidateTypingStatus = function () {
    var e = St$1$1.of(this._iid).typingIndicatorInvalidateTime,
        t = new Date().getTime(),
        n = !1;

    for (var r in this._typingStatus) {
      t - this._typingStatus[r].ts >= e && (delete this._typingStatus[r], n = !0);
    }

    return n;
  }, u.prototype.refresh = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, s, i$1$1;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.requestQueue, n = e.dispatcher, r = new Xt({
              channelUrl: this.url
            }), [4, t.send(r)];

          case 1:
            return s = a.sent(), i$1$1 = s.as(Zt).channel, n.dispatch(new jt({
              channels: [i$1$1],
              source: Vt.REQUEST_CHANNEL
            })), [2, i$1$1];
        }
      });
    });
  }, u.prototype.freeze = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, o$1.prototype.freeze.call(this)];

          case 1:
            return e.sent(), St$1$1.of(this._iid).dispatcher.dispatch(new jt({
              channels: [this],
              source: Vt.EVENT_CHANNEL_HIDDEN
            })), [2];
        }
      });
    });
  }, u.prototype.unfreeze = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, o$1.prototype.unfreeze.call(this)];

          case 1:
            return e.sent(), St$1$1.of(this._iid).dispatcher.dispatch(new jt({
              channels: [this],
              source: Vt.EVENT_CHANNEL_UNHIDDEN
            })), [2];
        }
      });
    });
  }, u.prototype.updateChannel = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n$1$1, r, i$1$1, a, o;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return e = n$1(n$1({}, fr), e), at$1(function (e) {
              return y("string", e.coverUrl, !0) && (S$1(e.coverImage) || y("string", e.coverImage) || null === e.coverImage) && y("boolean", e.isDistinct, !0) && y("boolean", e.isPublic, !0) && y("boolean", e.isDiscoverable, !0) && y("string", e.accessCode, !0) && y("string", e.name, !0) && y("string", e.data, !0) && y("string", e.customType, !0) && E$1("string", e.operatorUserIds, !0) && y("number", e.messageSurvivalSeconds, !0);
            }(e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n$1$1 = t.dispatcher, r = t.requestQueue, i$1$1 = new Cr(n$1({
              channelUrl: this.url
            }, e)), [4, r.send(i$1$1)];

          case 1:
            return a = u.sent(), o = a.as(Nr).channel, n$1$1.dispatch(new jt({
              channels: [o],
              source: Vt.EVENT_CHANNEL_UPDATED
            })), [2, o];
        }
      });
    });
  }, u.prototype.invite = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return at$1(e.every(function (e) {
          return e instanceof ct$1;
        })).throw(p$1.invalidParameters), [2, this.inviteWithUserIds(e.map(function (e) {
          return e.userId;
        }))];
      });
    });
  }, u.prototype.inviteWithUserIds = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, s, i$1$1, a;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return at$1(E$1("string", e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n = t.dispatcher, r = t.requestQueue, s = new Cn({
              channelUrl: this.url,
              userIds: e
            }), [4, r.send(s)];

          case 1:
            return i$1$1 = o.sent(), a = i$1$1.as(Nn).channel, n.dispatch(new jt({
              channels: [a],
              source: Vt.EVENT_CHANNEL_INVITED
            })), [2, a];
        }
      });
    });
  }, u.prototype.join = function (e) {
    return void 0 === e && (e = null), r$1(this, void 0, void 0, function () {
      var t, n, r, s, i$1$1, a, o;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return at$1(y("string", e) || null === e).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n = t.dispatcher, r = t.sdkState, s = t.requestQueue, i$1$1 = new mn({
              channelUrl: this.url,
              userId: r.userId,
              accessCode: e
            }), [4, s.send(i$1$1)];

          case 1:
            return a = u.sent(), (o = a.as(vn).channel).myMemberState = yt.JOINED, n.dispatch(new jt({
              channels: [o],
              source: Vt.EVENT_CHANNEL_JOINED
            })), [2, this];
        }
      });
    });
  }, u.prototype.leave = function (e) {
    return void 0 === e && (e = !1), r$1(this, void 0, void 0, function () {
      var t, n, r, s;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = St$1$1.of(this._iid), n = t.sdkState, r = t.requestQueue, s = new En({
              channelUrl: this.url,
              userId: n.userId,
              shouldRemoveOperatorStatus: e
            }), [4, r.send(s)];

          case 1:
            return i.sent(), [2];
        }
      });
    });
  }, u.prototype.acceptInvitation = function (e) {
    return void 0 === e && (e = null), r$1(this, void 0, void 0, function () {
      var t, n, r, s, i$1$1, a, o;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return at$1(y("string", e) || null === e).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n = t.dispatcher, r = t.sdkState, s = t.requestQueue, i$1$1 = new Er({
              channelUrl: this.url,
              userId: r.userId,
              accessCode: e
            }), [4, s.send(i$1$1)];

          case 1:
            return a = u.sent(), (o = a.as(yr).channel).myMemberState = yt.JOINED, n.dispatch(new jt({
              channels: [o],
              source: Vt.EVENT_CHANNEL_ACCEPTED_INVITE
            })), [2, o];
        }
      });
    });
  }, u.prototype.declineInvitation = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, s, i$1$1;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new Mn({
              channelUrl: this.url,
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return s = a.sent(), (i$1$1 = s.as(Sn).channel).myMemberState = yt.NONE, [2, i$1$1];
        }
      });
    });
  }, u.prototype.sendUserMessage = function (e) {
    var t = this,
        n = new In$2(),
        r = St$1$1.of(this._iid).dispatcher,
        s = pe.of(this._iid);
    return o$1.prototype.sendUserMessage.call(this, e).onPending(function (e) {
      s.completeCurrentAndProcessNextAutoResend(e), n._trigger(null, e);
    }).onFailed(function (e, t) {
      t && s.completeCurrentAndProcessNextAutoResend(t), n._trigger(e, t);
    }).onSucceeded(function (e) {
      var i = Bn.of(t._iid);
      s.completeCurrentAndProcessNextAutoResend(e), t.lastMessage = e, i.handlers.map(function (e) {
        return e.onChannelChanged(t);
      }), r.dispatch(new jt({
        channels: [t],
        source: Vt.EVENT_MESSAGE_SENT
      })), n._trigger(null, e);
    }), n;
  }, u.prototype._autoResendUserMessage = function (e) {
    var t = this,
        n = new In$2(),
        r = St$1$1.of(this._iid).dispatcher,
        s = pe.of(this._iid);
    return o$1.prototype._autoResendUserMessage.call(this, e).onPending(function (e) {
      s.completeCurrentAndProcessNextAutoResend(e), n._trigger(null, e);
    }).onFailed(function (e, t) {
      s.completeCurrentAndProcessNextAutoResend(t), n._trigger(e, t);
    }).onSucceeded(function (e) {
      var i = Bn.of(t._iid);
      s.completeCurrentAndProcessNextAutoResend(e), t.lastMessage = e, i.handlers.map(function (e) {
        return e.onChannelChanged(t);
      }), r.dispatch(new jt({
        channels: [t],
        source: Vt.EVENT_MESSAGE_SENT
      })), n._trigger(null, e);
    }), n;
  }, u.prototype.sendFileMessage = function (e) {
    var t = this,
        n = new In$2(),
        r = St$1$1.of(this._iid).dispatcher,
        s = pe.of(this._iid);
    return o$1.prototype.sendFileMessage.call(this, e).onPending(function (e) {
      s.completeCurrentAndProcessNextAutoResend(e), n._trigger(null, e);
    }).onFailed(function (e, t) {
      t && s.completeCurrentAndProcessNextAutoResend(t), n._trigger(e, t);
    }).onSucceeded(function (e) {
      var i = Bn.of(t._iid);
      s.completeCurrentAndProcessNextAutoResend(e), t.lastMessage = e, i.handlers.map(function (e) {
        return e.onChannelChanged(t);
      }), r.dispatch(new jt({
        channels: [t],
        source: Vt.EVENT_MESSAGE_SENT
      })), n._trigger(null, e);
    }), n;
  }, u.prototype._autoResendFileMessage = function (e) {
    var t = this,
        n = new In$2(),
        r = St$1$1.of(this._iid).dispatcher,
        s = pe.of(this._iid);
    return o$1.prototype._autoResendFileMessage.call(this, e).onPending(function (e) {
      s.completeCurrentAndProcessNextAutoResend(e), n._trigger(null, e);
    }).onFailed(function (e, t) {
      s.completeCurrentAndProcessNextAutoResend(t), n._trigger(e, t);
    }).onSucceeded(function (e) {
      var i = Bn.of(t._iid);
      s.completeCurrentAndProcessNextAutoResend(e), t.lastMessage = e, i.handlers.map(function (e) {
        return e.onChannelChanged(t);
      }), r.dispatch(new jt({
        channels: [t],
        source: Vt.EVENT_MESSAGE_SENT
      })), n._trigger(null, e);
    }), n;
  }, u.prototype.deleteMessage = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, o$1.prototype.deleteMessage.call(this, e)];

          case 1:
            return t.sent(), 0 === e.messageId && St$1$1.of(this._iid).dispatcher.dispatch(new ln$3({
              reqId: e.reqId,
              source: $t$2.EVENT_MESSAGE_DELETED
            })), [2];
        }
      });
    });
  }, u.prototype.hide = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n$1$1, r, i$1$1, a, o, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return e = n$1(n$1({}, pr), e), at$1(function (e) {
              return y("boolean", e.hidePreviousMessages) && y("boolean", e.allowAutoUnhide);
            }(e)).throw(p$1.invalidParameters), t = St$1$1.of(this._iid), n$1$1 = t.dispatcher, r = t.sdkState, i$1$1 = t.requestQueue, a = new Ln(n$1({
              channelUrl: this.url,
              userId: r.userId
            }, e)), [4, i$1$1.send(a)];

          case 1:
            return o = c.sent(), u = o.as(Rn).messageOffsetTimestamp, this.hiddenState = e.allowAutoUnhide ? Fr.HIDDEN_ALLOW_AUTO_UNHIDE : Fr.HIDDEN_PREVENT_AUTO_UNHIDE, e.hidePreviousMessages && this._updateUnreadCount(0, 0), u && (this.messageOffsetTimestamp = u), n$1$1.dispatch(new jt({
              channels: [this],
              source: Vt.EVENT_CHANNEL_HIDDEN
            })), [2, this];
        }
      });
    });
  }, u.prototype.unhide = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.dispatcher, n = e.requestQueue, r = new Mr({
              channelUrl: this.url
            }), [4, n.send(r)];

          case 1:
            return s.sent(), this.hiddenState = Fr.UNHIDDEN, t.dispatch(new jt({
              channels: [this],
              source: Vt.EVENT_CHANNEL_UNHIDDEN
            })), [2, this];
        }
      });
    });
  }, u.prototype.delete = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return e = St$1$1.of(this._iid).requestQueue, t = new br({
              channelUrl: this.url
            }), [4, e.send(t)];

          case 1:
            return n.sent(), [2];
        }
      });
    });
  }, u.prototype.markAsRead = function () {
    return r$1(this, void 0, void 0, function () {
      var e,
          t,
          n,
          r,
          s,
          i$1$1,
          a,
          o = this;
      return i$1(this, function (u) {
        switch (u.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.dispatcher, r = e.requestQueue, s = new Tn({
              channelUrl: this.url
            }), [4, r.send(s)];

          case 1:
            return i$1$1 = u.sent(), a = i$1$1.as(Un).readStatus, this._updateUnreadMemberState(t.userId, a.readAt), (this.unreadMessageCount > 0 || this.unreadMentionCount > 0) && (this._updateUnreadCount(0, 0), Bn.of(this._iid).handlers.map(function (e) {
              return e.onChannelChanged(o);
            })), n.dispatch(new jt({
              channels: [this],
              source: Vt.EVENT_CHANNEL_READ
            })), [2];
        }
      });
    });
  }, u.prototype.markAsDelivered = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new In({
              channelUrl: this.url,
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return s.sent(), [2];
        }
      });
    });
  }, u.prototype.startTyping = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, s;
      return i$1(this, function (i) {
        return e = St$1$1.of(this._iid), t = e.requestQueue, n = e.typingIndicatorThrottle, (r = new Date().getTime()) - this._typingStarted >= n && (this._typingStarted = r, this._typingEnded = 0, s = new kn({
          channelUrl: this.url,
          time: this._typingStarted
        }), t.send(s)), [2];
      });
    });
  }, u.prototype.endTyping = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, s;
      return i$1(this, function (i) {
        return e = St$1$1.of(this._iid), t = e.requestQueue, n = e.typingIndicatorThrottle, (r = new Date().getTime()) - this._typingEnded >= n && (this._typingStarted = 0, this._typingEnded = r, s = new Pn({
          channelUrl: this.url,
          time: this._typingStarted
        }), t.send(s)), [2];
      });
    });
  }, u.prototype.createScheduledUserMessage = function (e) {
    e = n$1(n$1({}, ne), e), at$1(re(e)).throw(p$1.invalidParameters);
    var t = new In$2();
    return this._createScheduledUserMessage(e, t), t;
  }, u.prototype.updateScheduledUserMessage = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var n$1$1, r, i$1$1;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return t = n$1(n$1({}, wr), t), at$1(function (e) {
              return Me$2(e) && y("number", e.scheduledAt, !0);
            }(t)).throw(p$1.invalidParameters), n$1$1 = St$1$1.of(this._iid).requestQueue, r = new Rr(n$1({
              reqId: this._generateRequestId(),
              scheduledMessageId: e,
              channelType: this.channelType,
              channelUrl: this.url
            }, t)), [4, n$1$1.send(r)];

          case 1:
            return i$1$1 = a.sent(), [2, i$1$1.as(Rt$2).message];
        }
      });
    });
  }, u.prototype.createScheduledFileMessage = function (e) {
    var t = this;
    e = n$1(n$1({}, ae), e), at$1(ie(e)).throw(p$1.invalidParameters);

    var n$1$1 = St$1$1.of(this._iid).dispatcher,
        r$1$1 = Date.now(),
        i$1$1 = this._generateRequestId(),
        a = new In$2();

    return me$1(Ot$2).then(function () {
      var s = t._createPendingScheduledFileMessage(e, i$1$1, r$1$1);

      n$1$1.dispatch(new un$3({
        messages: [s],
        source: $t$2.EVENT_MESSAGE_SENT_PENDING
      })), Ie$1(function () {
        return r$1(t, void 0, void 0, function () {
          return i$1(this, function (e) {
            return [2, a._trigger(null, s)];
          });
        });
      });
    }), S$1(e.file) ? this._uploadFileAndUpdateParams(e).then(function () {
      return t._createScheduledFileMessage(e, a, i$1$1, r$1$1);
    }) : this._createScheduledFileMessage(e, a, i$1$1, r$1$1), a;
  }, u.prototype.updateScheduledFileMessage = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      var n$1$1, r;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return t = n$1(n$1({}, Ir), t), at$1(function (e) {
              return Ee$2(e) && y("number", e.scheduledAt, !0) && (S$1(e.file) || y("string", e.fileUrl)) && y("string", e.fileName, !0) && y("string", e.mimeType, !0) && y("number", e.fileSize, !0) && (null === e.thumbnailSizes || e.thumbnailSizes.every(function (e) {
                return y("object", e) && e.maxWidth > 0 && e.maxHeight > 0;
              }));
            }(t)).throw(p$1.invalidParameters), S$1(t.file) ? [4, this._uploadFileAndUpdateParams(t)] : [3, 2];

          case 1:
            i.sent(), i.label = 2;

          case 2:
            return n$1$1 = new Dr(n$1(n$1({
              reqId: this._generateRequestId(),
              scheduledMessageId: e,
              channelType: this.channelType,
              channelUrl: this.url
            }, t), {
              fileUrl: t.fileUrl,
              requireAuth: t.requireAuth
            })), [4, St$1$1.of(this._iid).requestQueue.send(n$1$1)];

          case 3:
            return r = i.sent(), [2, r.as(Lr).message];
        }
      });
    });
  }, u.prototype.cancelScheduledMessage = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return t = new Pr({
              scheduledMessageId: e,
              channelType: this.channelType,
              channelUrl: this.url
            }), [4, St$1$1.of(this._iid).requestQueue.send(t)];

          case 1:
            return n.sent(), [2];
        }
      });
    });
  }, u.prototype.sendScheduledMessageNow = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return t = new xr({
              scheduledMessageId: e,
              channelType: this.channelType,
              channelUrl: this.url
            }), [4, St$1$1.of(this._iid).requestQueue.send(t)];

          case 1:
            return n.sent(), [2];
        }
      });
    });
  }, u.prototype.getMyPushTriggerOption = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, s;
      return i$1(this, function (i) {
        switch (i.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.sdkState, n = e.requestQueue, r = new _e({
              userId: t.userId
            }), [4, n.send(r)];

          case 1:
            return s = i.sent(), [2, s.as(Ee).pushTriggerOption];
        }
      });
    });
  }, u.prototype.setMyPushTriggerOption = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, s, i$1$1, a;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return at$1(m(H$1, e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid), r = n.sdkState, s = n.requestQueue, i$1$1 = new Ae$1({
              userId: r.userId,
              pushTriggerOption: e
            }), [4, s.send(i$1$1)];

          case 1:
            return a = o.sent(), [2, a.as(ye).pushTriggerOption];
        }
      });
    });
  }, u.prototype.setMyCountPreference = function (e) {
    return r$1(this, void 0, void 0, function () {
      var n, r, s, i$1$1, a, o, u;
      return i$1(this, function (c) {
        switch (c.label) {
          case 0:
            return at$1(m(Or, e)).throw(p$1.invalidParameters), n = St$1$1.of(this._iid), r = n.dispatcher, s = n.sdkState, i$1$1 = n.requestQueue, a = new Sr({
              channelUrl: this.url,
              userId: s.userId,
              countPreference: e
            }), [4, i$1$1.send(a)];

          case 1:
            return o = c.sent(), u = o.as(Ar).countPreference, this.myCountPreference = u, this._updateUnreadCount(this.unreadMessageCount, this.unreadMentionCount), r.dispatch(new jt({
              channels: [this],
              source: Vt.EVENT_CHANNEL_CREATED
            })), [2, u];
        }
      });
    });
  }, u.prototype.resetMyHistory = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r, s, i$1$1;
      return i$1(this, function (a) {
        switch (a.label) {
          case 0:
            return e = St$1$1.of(this._iid), t = e.dispatcher, n = e.requestQueue, r = new Tr({
              channelUrl: this.url
            }), [4, n.send(r)];

          case 1:
            return s = a.sent(), i$1$1 = s.as(Ur).messageOffsetTimestamp, this.messageOffsetTimestamp = i$1$1, t.dispatch(new jt({
              channels: [this],
              source: Vt.EVENT_CHANNEL_RESET_HISTORY
            })), [2, this];
        }
      });
    });
  }, u.prototype._uploadFileAndUpdateParams = function (e) {
    return r$1(this, void 0, void 0, function () {
      var t, n, r, s, i$1$1, a, o, u, c, l, h;
      return i$1(this, function (d) {
        switch (d.label) {
          case 0:
            return S$1(e.file) ? (t = St$1$1.of(this._iid).requestQueue, n = new bt$1$1({
              file: e.file,
              channelUrl: this.url,
              thumbnailSizes: e.thumbnailSizes,
              requestId: this._generateRequestId()
            }), [4, t.send(n)]) : [3, 2];

          case 1:
            r = d.sent(), s = r.as(Nt$1$1), i$1$1 = s.url, a = s.fileSize, o = void 0 === a ? e.fileSize : a, u = s.thumbnailSizes, c = void 0 === u ? e.thumbnailSizes : u, l = s.requireAuth, h = void 0 !== l && l, e.fileUrl = i$1$1, e.fileSize = o, e.thumbnailSizes = c, e.requireAuth = h, d.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, u;
}(kt$2),
    Gr = {},
    qr = function () {
  function e(e) {
    var t = e._iid,
        n = this;
    this._sync = null, this._metadata = null, this._iid = t;
    var r$1$1,
        s = St$1$1.of(this._iid),
        i$1$1 = s.sdkState,
        a$1 = s.logger;
    this._metadataKey = (r$1$1 = i$1$1.userId, "sendbird:".concat(r$1$1, "@groupchannel/sync.meta"));

    var o$1 = function (e) {
      return "sendbird:".concat(e, "@groupchannel/sync");
    }(i$1$1.userId);

    this._sync = new Yn(o$1, function () {
      return r$1(n, void 0, void 0, function () {
        var e, t, n, r, s, i$1$1;
        return i$1(this, function (o$1) {
          switch (o$1.label) {
            case 0:
              return e = {
                hasNext: !0,
                nextToken: ""
              }, [4, this.loadMetadata()];

            case 1:
              if (o$1.sent(), a$1.debug("channel background sync from", this._metadata.token), this._metadata.completed) return [3, 9];
              o$1.label = 2;

            case 2:
              return o$1.trys.push([2, 5,, 8]), [4, Bn.of(this._iid).getMyGroupChannels(this._metadata.token, {
                includeEmpty: !0,
                order: K$1.CHRONOLOGICAL
              }, 100, Vt.SYNC_CHANNEL_BACKGROUND)];

            case 3:
              return t = o$1.sent(), n = t.channels, r = t.token, e.hasNext = n.length >= 100 && !!r, e.nextToken = r, this._metadata.token = r, (i$1$1 = this._metadata.range).extends.apply(i$1$1, a([], o(n.map(function (e) {
                return e.createdAt;
              })), !1)), this._metadata.completed = !e.hasNext, a$1.debug("channel background sync progress", e), [4, this.saveMetadata()];

            case 4:
              return o$1.sent(), [3, 8];

            case 5:
              return (s = o$1.sent()) instanceof p$1 && s.isInvalidTokenError ? [4, this.clearMetaData()] : [3, 7];

            case 6:
              o$1.sent(), o$1.label = 7;

            case 7:
              return e.hasNext = !1, e.nextToken = "", [3, 8];

            case 8:
              return [3, 10];

            case 9:
              e.hasNext = !1, e.nextToken = "", o$1.label = 10;

            case 10:
              return [2, e];
          }
        });
      });
    });
  }

  return e.of = function (t) {
    if (!Gr[t]) {
      var n = Gr[t] = new e({
        _iid: t
      });
      St$1$1.of(t).dispatcher.on(function (e) {
        if (e instanceof de$1) if (e.stateType === J$2.CONNECTED) n.resume();else n.pause();
      });
    }

    return Gr[t];
  }, Object.defineProperty(e.prototype, "range", {
    get: function () {
      var e;
      return null === (e = this._metadata) || void 0 === e ? void 0 : e.range;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "completed", {
    get: function () {
      var e;
      return !!(null === (e = this._metadata) || void 0 === e ? void 0 : e.completed);
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.loadMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      var e;
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return this._metadata ? [3, 2] : [4, St$1$1.of(this._iid).cacheContext.preference.get(this._metadataKey)];

          case 1:
            e = t.sent(), this._metadata = {
              token: e ? e.token : "",
              range: new Gn(e ? e.range : {
                top: Number.MAX_SAFE_INTEGER,
                bottom: 0
              }),
              completed: !!e && e.completed
            }, t.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, e.prototype.saveMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return this._metadata ? [4, St$1$1.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];

          case 1:
            e.sent(), e.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, e.prototype.clearMetaData = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, St$1$1.of(this._iid).cacheContext.preference.remove(this._metadataKey)];

          case 1:
            return e.sent(), [2];
        }
      });
    });
  }, e.prototype.resume = function () {
    var e, t;
    St$1$1.of(this._iid).logger.debug("channel background sync resume()"), this._sync.start(null !== (t = null === (e = this._metadata) || void 0 === e ? void 0 : e.token) && void 0 !== t ? t : "");
  }, e.prototype.pause = function () {
    St$1$1.of(this._iid).logger.debug("channel background sync stop()"), this._sync.stop();
  }, e;
}(),
    Br = {},
    Kr = function () {
  function e(e) {
    var t = e._iid,
        n = this;
    this._sync = null, this._metadataKey = null, this._metadata = null, this._iid = t;
    var r$1$1,
        s = St$1$1.of(this._iid).sdkState;
    this._metadataKey = (r$1$1 = s.userId, "sendbird:".concat(r$1$1, "@groupchannel/changelogs.meta"));

    var i$1$1 = function (e) {
      return "sendbird:".concat(e, "@groupchannel/changelogs");
    }(s.userId);

    this._sync = new Yn(i$1$1, function () {
      return r$1(n, void 0, void 0, function () {
        var e, t, n, r, s;
        return i$1(this, function (i) {
          switch (i.label) {
            case 0:
              return e = {
                hasNext: !0,
                nextToken: 0
              }, [4, this.loadMetadata()];

            case 1:
              i.sent(), i.label = 2;

            case 2:
              return i.trys.push([2, 5,, 8]), [4, Bn.of(this._iid).getMyGroupChannelChangeLogs(this._metadata.token, {}, Vt.SYNC_CHANNEL_CHANGELOGS)];

            case 3:
              return t = i.sent(), n = t.hasMore, r = t.token, e.hasNext = n, e.nextToken = r, this._metadata.token = r, [4, this.saveMetadata()];

            case 4:
              return i.sent(), [3, 8];

            case 5:
              return (s = i.sent()) instanceof p$1 && s.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 7];

            case 6:
              i.sent(), i.label = 7;

            case 7:
              return e.hasNext = !1, e.nextToken = "", [3, 8];

            case 8:
              return [2, e];
          }
        });
      });
    });
  }

  return e.of = function (t) {
    if (!Br[t]) {
      var n = Br[t] = new e({
        _iid: t
      });
      St$1$1.of(t).dispatcher.on(function (e) {
        if (e instanceof de$1) if (e.stateType === J$2.CONNECTED) n.resume();else n.pause();
      });
    }

    return Br[t];
  }, e.prototype.loadMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n, r;
      return i$1(this, function (s) {
        switch (s.label) {
          case 0:
            return this._metadata ? [3, 2] : (e = St$1$1.of(this._iid), t = e.cacheContext, n = e.firstConnectedAt, [4, t.preference.get(this._metadataKey)]);

          case 1:
            r = s.sent(), this._metadata = {
              token: r ? r.token : n / 1e3
            }, s.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, e.prototype.saveMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return this._metadata ? [4, St$1$1.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];

          case 1:
            e.sent(), e.label = 2;

          case 2:
            return [2];
        }
      });
    });
  }, e.prototype.clearMetadata = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return St$1$1.of(this._iid).cacheContext.preference.remove(this._metadataKey), [2];
      });
    });
  }, e.prototype.resume = function () {
    this._sync.start(0);
  }, e.prototype.pause = function () {
    this._sync.stop();
  }, e;
}(),
    jr = function () {
  function e(e, t) {
    var n = t.filter,
        r = t.order,
        s = t.limit,
        i = this;
    this.channels = [], this._iid = e, this._key = "gcc-".concat(R$2()), this.filter = null != n ? n : new Lt(), this.order = null != r ? r : K$1.LATEST_LAST_MESSAGE, this._hasMore = !0, this._token = "", this._limit = null != s ? s : j;
    var a = St$1$1.of(this._iid),
        o = a.sdkState;
    a.cacheContext.localCacheEnabled && qr.of(e).resume(), Kr.of(e).resume(), Bn.of(this._iid).subscribeGroupChannelEvent(this._key, {
      onUpdate: function (e, t) {
        var n = e.filter(function (e) {
          return i.filter.match(e, o.userId);
        }),
            r = e.filter(function (e) {
          return !i.filter.match(e, o.userId);
        }).map(function (e) {
          return e.url;
        });
        n.length > 0 && i._addChannelsToView(n, t), r.length > 0 && i._removeChannelsFromView(r, t);
      },
      onRemove: function (e, t) {
        i._removeChannelsFromView(e, t);
      }
    });
  }

  return Object.defineProperty(e.prototype, "hasMore", {
    get: function () {
      return this._hasMore;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.setGroupChannelCollectionHandler = function (e) {
    this._handler = e;
  }, e.prototype._addChannelsToView = function (e, t, n) {
    var r$1$1,
        s$1,
        i$1$1 = this;
    void 0 === n && (n = !1);
    var a = [],
        o = [];

    try {
      for (var u = s(e), c = u.next(); !c.done; c = u.next()) {
        var l = c.value,
            h = ir(this.channels, l, this.order),
            p = h.place;
        if (h.contains) switch (o.push(l), t) {
          case Vt.EVENT_CHANNEL_UPDATED:
          case Vt.EVENT_MESSAGE_RECEIVED:
            this.channels.splice(p, 1);
            var m = ir(this.channels, l, this.order).place;
            this.channels.splice(m, 0, l);
            break;

          default:
            this.channels[p] = l;
        } else if (p === this.channels.length) {
          var v = qr.of(this._iid);
          (n || v.completed) && (a.push(l), this.channels.push(l));
        } else a.push(l), this.channels.splice(p, 0, l);
      }
    } catch (e) {
      r$1$1 = {
        error: e
      };
    } finally {
      try {
        c && !c.done && (s$1 = u.return) && s$1.call(u);
      } finally {
        if (r$1$1) throw r$1$1.error;
      }
    }

    Kt(t) && Ie$1(function () {
      return r$1(i$1$1, void 0, void 0, function () {
        var e;
        return i$1(this, function (n) {
          return e = new Jn(t), a.length > 0 && this._handler.onChannelsAdded(e, a), o.length > 0 && this._handler.onChannelsUpdated(e, o), [2];
        });
      });
    });
  }, e.prototype._removeChannelsFromView = function (e, t) {
    var n,
        r$1$1,
        s$1 = this,
        i$1$1 = [],
        a = function (e) {
      var t = o.channels.findIndex(function (t) {
        return t.url === e;
      });
      t >= 0 && (i$1$1.push(o.channels[t].url), o.channels.splice(t, 1));
    },
        o = this;

    try {
      for (var u = s(e), c = u.next(); !c.done; c = u.next()) {
        a(c.value);
      }
    } catch (e) {
      n = {
        error: e
      };
    } finally {
      try {
        c && !c.done && (r$1$1 = u.return) && r$1$1.call(u);
      } finally {
        if (n) throw n.error;
      }
    }

    return Kt(t) && i$1$1.length > 0 && Ie$1(function () {
      return r$1(s$1, void 0, void 0, function () {
        var e;
        return i$1(this, function (n) {
          return e = new Jn(t), this._handler.onChannelsDeleted(e, i$1$1), [2];
        });
      });
    }), i$1$1;
  }, e.prototype._getLocalChannels = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, Bn.of(this._iid).getChannelsFromCache(this._token, this.filter, this.order)];

          case 1:
            return [2, e.sent()];
        }
      });
    });
  }, e.prototype._getRemoteChannels = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n$1$1;
      return i$1(this, function (r) {
        switch (r.label) {
          case 0:
            return [4, Bn.of(this._iid).getMyGroupChannels(this._token, n$1(n$1({}, this.filter), {
              order: this.order
            }), this._limit)];

          case 1:
            return e = r.sent(), t = e.channels, n$1$1 = e.token, this._token = n$1$1, [2, t];
        }
      });
    });
  }, e.prototype.loadMore = function () {
    return r$1(this, void 0, void 0, function () {
      var e,
          t = this;
      return i$1(this, function (n) {
        switch (n.label) {
          case 0:
            return this._hasMore ? (e = [], [4, Se$1(function () {
              return r$1(t, void 0, void 0, function () {
                return i$1(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return [4, this._getLocalChannels()];

                    case 1:
                      return e = t.sent(), [2];
                  }
                });
              });
            })]) : [3, 3];

          case 1:
            return n.sent(), [4, Se$1(function () {
              return r$1(t, void 0, void 0, function () {
                return i$1(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return [4, this._getRemoteChannels()];

                    case 1:
                      return e = t.sent(), [2];
                  }
                });
              });
            })];

          case 2:
            return n.sent(), this._addChannelsToView(e, Vt.REQUEST_CHANNEL, !0), [2, e];

          case 3:
            return [2, []];
        }
      });
    });
  }, e.prototype.dispose = function () {
    Bn.of(this._iid).unsubscribeGroupChannelEvent(this._key);
  }, e;
}(),
    zr = function (t$1) {
  function n(e) {
    var n = this,
        s = e.token,
        i = e.limit,
        a = e.order,
        o = e.includeEmpty,
        u = e.membershipFilter,
        c = e.channelNameContainsFilter,
        l = e.channelUrlsFilter,
        h = e.customTypesFilter,
        d$1$1 = e.customTypeStartsWithFilter,
        _ = e.superChannelFilter,
        f = e.metadataOrderKeyFilter,
        p = e.metadataKey,
        m = e.metadataValues,
        v = e.metadataValueStartsWith,
        g = e.includeFrozen,
        E = e.includeMetaData;
    return (n = t$1.call(this) || this).method = d$1.GET, n.path = qe$1, n.params = U$2({
      token: s,
      limit: i,
      order: a,
      show_member: !0,
      show_read_receipt: !0,
      show_delivery_receipt: !0,
      show_empty: o,
      public_mode: Ct.PUBLIC,
      public_membership_mode: u,
      name_contains: c,
      channel_urls: l,
      custom_types: h,
      custom_type_startswith: d$1$1,
      super_mode: _,
      metadata_order_key: f,
      metadata_key: p,
      metadata_values: m,
      metadata_value_startswith: v,
      show_frozen: g,
      show_metadata: E
    }), n;
  }

  return t(n, t$1), n;
}(q$2),
    Qr = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    r.token = null, r.channels = [], r.ts = null;
    var s = n.next,
        i = n.channels,
        a = n.ts;
    return r.token = s, i && i.length > 0 && (r.channels = i.map(function (t) {
      return t.ts = a, new Vr(e, t);
    })), r.ts = "number" == typeof a ? a : null, r;
  }

  return t(n, t$1), n;
}(F$1);

!function (e) {
  e.ALL = "all", e.JOINED = "joined";
}(Hr || (Hr = {}));

var Wr = function (n$1$1) {
  function r$1$1(e, t) {
    var r,
        s,
        i,
        a,
        o,
        u,
        c,
        l,
        h,
        d,
        _,
        f,
        p,
        m,
        v = this;

    return (v = n$1$1.call(this, e, t) || this).includeEmpty = !1, v.includeFrozen = !0, v.includeMetaData = !0, v.channelUrlsFilter = null, v.customTypesFilter = null, v.customTypeStartsWithFilter = null, v.nicknameContainsFilter = null, v.channelNameContainsFilter = null, v.membershipFilter = Hr.ALL, v.superChannelFilter = bt.ALL, v.metadataKey = null, v.metadataValues = null, v.metadataOrderKeyFilter = null, v.metadataValueStartsWith = null, v.order = G.CHRONOLOGICAL, v.includeEmpty = null !== (r = t.includeEmpty) && void 0 !== r && r, v.includeFrozen = null === (s = t.includeFrozen) || void 0 === s || s, v.includeMetaData = null === (i = t.includeMetaData) || void 0 === i || i, v.channelUrlsFilter = null !== (a = t.channelUrlsFilter) && void 0 !== a ? a : null, v.customTypesFilter = null !== (o = t.customTypesFilter) && void 0 !== o ? o : null, v.customTypeStartsWithFilter = null !== (u = t.customTypeStartsWithFilter) && void 0 !== u ? u : null, v.channelNameContainsFilter = null !== (c = t.channelNameContainsFilter) && void 0 !== c ? c : null, v.membershipFilter = null !== (l = t.membershipFilter) && void 0 !== l ? l : Hr.ALL, v.superChannelFilter = null !== (h = t.superChannelFilter) && void 0 !== h ? h : bt.ALL, v.metadataKey = null !== (d = t.metadataKey) && void 0 !== d ? d : null, v.metadataValues = null !== (_ = t.metadataValues) && void 0 !== _ ? _ : null, v.metadataOrderKeyFilter = null !== (f = t.metadataOrderKeyFilter) && void 0 !== f ? f : null, v.metadataValueStartsWith = null !== (p = t.metadataValueStartsWith) && void 0 !== p ? p : null, v.order = null !== (m = t.order) && void 0 !== m ? m : G.CHRONOLOGICAL, v;
  }

  return t(r$1$1, n$1$1), r$1$1.prototype._validate = function () {
    return n$1$1.prototype._validate.call(this) && y("boolean", this.includeEmpty) && y("boolean", this.includeFrozen) && y("boolean", this.includeMetaData) && y("string", this.channelNameContainsFilter, !0) && E$1("string", this.channelUrlsFilter, !0) && E$1("string", this.customTypesFilter, !0) && y("string", this.customTypeStartsWithFilter, !0) && m(Hr, this.membershipFilter) && m(bt, this.superChannelFilter) && m(G, this.order) && y("string", this.metadataOrderKeyFilter, !0) && y("string", this.metadataKey, !0) && E$1("string", this.metadataValues, !0) && y("string", this.metadataValueStartsWith, !0);
  }, r$1$1.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n$1$1, r, i$1$1, a, o, u, c;
      return i$1(this, function (l) {
        switch (l.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : (e = [], this._hasNext ? (this._isLoading = !0, t = St$1$1.of(this._iid), n$1$1 = t.requestQueue, r = t.dispatcher, i$1$1 = new zr(n$1(n$1({}, this), {
              token: this._token
            })), [4, n$1$1.send(i$1$1)]) : [3, 2]) : [3, 5];

          case 1:
            return a = l.sent(), o = a.as(Qr), u = o.channels, c = o.token, this._token = c, this._hasNext = !!c, r.dispatch(new jt({
              channels: u,
              source: Vt.REQUEST_CHANNEL
            })), this._isLoading = !1, [2, u];

          case 2:
            return [2, e];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, r$1$1;
}(bn$2),
    Yr = function (t$1) {
  function n(e) {
    void 0 === e && (e = {});
    var n = t$1.call(this) || this;
    return Object.keys(e).forEach(function (t) {
      n.hasOwnProperty(t) && (n[t] = e[t]);
    }), n;
  }

  return t(n, t$1), n;
}(function (t$1) {
  function n() {
    var e = null !== t$1 && t$1.apply(this, arguments) || this;
    return e.onUserJoined = Y$2, e.onUserLeft = Y$2, e.onUserReceivedInvitation = Y$2, e.onUserDeclinedInvitation = Y$2, e.onChannelHidden = Y$2, e.onUnreadMemberStatusUpdated = Y$2, e.onUndeliveredMemberStatusUpdated = Y$2, e.onTypingStatusUpdated = Y$2, e;
  }

  return t(n, t$1), n;
}(U$1)),
    Jr = function (t$1) {
  function n(e) {
    var n = this,
        s = e.token,
        i = e.limit,
        a = e.order,
        o = e.reverse,
        u = e.channelUrl,
        c = e.messageTypeFilter,
        l = e.scheduledStatus;
    return (n = t$1.call(this) || this).method = d$1.GET, n.path = "".concat(Ve$1), n.params = U$2({
      limit: i,
      reverse: o,
      channel_url: u,
      order: a,
      status: l
    }), s && (n.params.token = s), c && (n.params.message_type_filter = c), n;
  }

  return t(n, t$1), n;
}(q$2),
    Xr = function (t$1) {
  function n(e, n) {
    var r = t$1.call(this, e, n) || this;
    r.token = null, r.scheduledMessages = [];
    var s = n.next,
        i = n.scheduled_messages;
    return r.token = s, r.scheduledMessages = i.map(function (t) {
      return Ht$2(e, t);
    }), r;
  }

  return t(n, t$1), n;
}(F$1),
    Zr = function (n$1$1) {
  function r$1$1(e, t) {
    var r,
        s,
        i,
        a,
        o,
        u = this;
    return (u = n$1$1.call(this, e, t) || this).channelUrl = null, u.order = null, u.reverse = !1, u.scheduledStatus = null, u.messageTypeFilter = se$1.ALL, u.channelUrl = null !== (r = t.channelUrl) && void 0 !== r ? r : null, u.order = null !== (s = t.order) && void 0 !== s ? s : null, u.reverse = null !== (i = t.reverse) && void 0 !== i && i, u.scheduledStatus = null !== (a = t.scheduledStatus) && void 0 !== a ? a : null, u.messageTypeFilter = null !== (o = t.messageTypeFilter) && void 0 !== o ? o : se$1.ALL, u;
  }

  return t(r$1$1, n$1$1), r$1$1.prototype._validate = function () {
    return n$1$1.prototype._validate.call(this) && y("string", this.channelUrl, !0) && (m(Q$1, this.order) || null === this.order) && y("boolean", this.reverse) && (E$1(Ct$1$1, this.scheduledStatus) || null === this.scheduledStatus) && m(se$1, this.messageTypeFilter);
  }, r$1$1.prototype.next = function () {
    return r$1(this, void 0, void 0, function () {
      var e, t, n$1$1, r, i$1$1, a;
      return i$1(this, function (o) {
        switch (o.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = !0, e = St$1$1.of(this._iid).requestQueue, t = new Jr(n$1(n$1({}, this), {
              token: this._token
            })), [4, e.send(t)]) : [3, 2] : [3, 5];

          case 1:
            return n$1$1 = o.sent(), r = n$1$1.as(Xr), i$1$1 = r.scheduledMessages, a = r.token, this._token = a, this._hasNext = !!a, this._isLoading = !1, [2, i$1$1];

          case 2:
            return [2, []];

          case 3:
            throw p$1.queryInProgress;

          case 4:
            return [3, 6];

          case 5:
            throw p$1.invalidParameters;

          case 6:
            return [2];
        }
      });
    });
  }, r$1$1;
}(bn$2),
    $r = function (t$1) {
  function n$1$1() {
    var e = null !== t$1 && t$1.apply(this, arguments) || this;
    return e.name = "groupChannel", e;
  }

  return t(n$1$1, t$1), n$1$1.prototype.init = function (e, n) {
    var r = n.sdkState,
        s = n.dispatcher,
        i = n.sessionManager,
        a = n.requestQueue,
        o = n.logger,
        u = n.onlineDetector,
        c = n.cacheContext;
    t$1.prototype.init.call(this, e, {
      sdkState: r,
      dispatcher: s,
      sessionManager: i,
      requestQueue: a,
      logger: o,
      onlineDetector: u,
      cacheContext: c
    }), this._manager = new Bn(e, {
      sdkState: r,
      cacheContext: c,
      dispatcher: s,
      sessionManager: i,
      requestQueue: a,
      logger: o
    });
  }, n$1$1.prototype.createGroupChannelCollection = function (e) {
    return void 0 === e && (e = {}), new jr(this._iid, e);
  }, n$1$1.prototype.createMyGroupChannelListQuery = function (e) {
    return void 0 === e && (e = {}), new Vn(this._iid, e);
  }, n$1$1.prototype.createPublicGroupChannelListQuery = function (e) {
    return void 0 === e && (e = {}), new Wr(this._iid, e);
  }, n$1$1.prototype.createScheduledMessageListQuery = function (e) {
    return void 0 === e && (e = {}), new Zr(this._iid, e);
  }, n$1$1.prototype.addGroupChannelHandler = function (e, t) {
    at$1(y("string", e) && t instanceof Yr).throw(p$1.invalidParameters), this._manager.addHandler(e, t);
  }, n$1$1.prototype.removeGroupChannelHandler = function (e) {
    at$1(y("string", e)).throw(p$1.invalidParameters), this._manager.removeHandler(e);
  }, n$1$1.prototype.removeAllGroupChannelHandlers = function () {
    this._manager.clearHandler();
  }, n$1$1.prototype.buildGroupChannelFromSerializedData = function (e) {
    return this._manager.buildGroupChannelFromSerializedData(e);
  }, n$1$1.prototype.buildGroupChannelListQueryFromSerializedData = function (e) {
    return this._manager.buildGroupChannelListQueryFromSerializedData(e);
  }, n$1$1.prototype.buildMemberFromSerializedData = function (e) {
    return this._manager.buildMemberFromSerializedData(e);
  }, n$1$1.prototype.getChannel = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return at$1(y("string", e)).throw(p$1.invalidParameters), [2, this._manager.getChannel(e)];
      });
    });
  }, n$1$1.prototype.getChannelWithoutCache = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return at$1(y("string", e)).throw(p$1.invalidParameters), [2, this._manager.getChannelWithoutCache(e)];
      });
    });
  }, n$1$1.prototype.getMyGroupChannelChangeLogsByToken = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n$1$1) {
        switch (n$1$1.label) {
          case 0:
            return t = n$1(n$1({}, Ft), t), at$1(y("string", e) && Pt(t)).throw(p$1.invalidParameters), [4, this._manager.getMyGroupChannelChangeLogs(e, t)];

          case 1:
            return [2, n$1$1.sent()];
        }
      });
    });
  }, n$1$1.prototype.getMyGroupChannelChangeLogsByTimestamp = function (e, t) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (n$1$1) {
        switch (n$1$1.label) {
          case 0:
            return t = n$1(n$1({}, Ft), t), at$1(y("number", e) && Pt(t)).throw(p$1.invalidParameters), [4, this._manager.getMyGroupChannelChangeLogs(e, t)];

          case 1:
            return [2, n$1$1.sent()];
        }
      });
    });
  }, n$1$1.prototype.getGroupChannelCount = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return e = n$1(n$1({}, xt), e), at$1(Ht(e)).throw(p$1.invalidParameters), [2, this._manager.getGroupChannelCount(e)];
      });
    });
  }, n$1$1.prototype.getUnreadItemCount = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._manager.getUnreadItemCount(e)];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, n$1$1.prototype.getTotalUnreadChannelCount = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        switch (e.label) {
          case 0:
            return [4, this._manager.getTotalUnreadChannelCount()];

          case 1:
            return [2, e.sent()];
        }
      });
    });
  }, n$1$1.prototype.getTotalUnreadMessageCount = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._manager.getTotalUnreadMessageCount(e)];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, n$1$1.prototype.getTotalScheduledMessageCount = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, this._manager.getTotalScheduledMessageCount(e)];

          case 1:
            return [2, t.sent()];
        }
      });
    });
  }, n$1$1.prototype.getSubscribedTotalUnreadMessageCount = function () {
    return this._manager.getSubscribedTotalUnreadMessageCount();
  }, n$1$1.prototype.getSubscribedCustomTypeTotalUnreadMessageCount = function () {
    return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount();
  }, n$1$1.prototype.getSubscribedCustomTypeUnreadMessageCount = function (e) {
    return this._manager.getSubscribedCustomTypeUnreadMessageCount(e);
  }, n$1$1.prototype.createChannel = function (e) {
    return void 0 === e && (e = {}), r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return e = n$1(n$1({}, Ot), e), at$1(kt(e)).throw(p$1.invalidParameters), [2, this._manager.createChannel(e)];
      });
    });
  }, n$1$1.prototype.createDistinctChannelIfNotExist = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return e = n$1(n$1({}, Ot), e), at$1(kt(e)).throw(p$1.invalidParameters), e && (e.isDistinct = !0), [2, this.createChannel(e)];
      });
    });
  }, n$1$1.prototype.createChannelWithUserIds = function (e, t, n$1$1, r$1$1, i$1$1, a) {
    return void 0 === t && (t = !1), void 0 === n$1$1 && (n$1$1 = null), void 0 === r$1$1 && (r$1$1 = null), void 0 === i$1$1 && (i$1$1 = ""), void 0 === a && (a = ""), r$1(this, void 0, void 0, function () {
      var o;
      return i$1(this, function (u) {
        return o = n$1(n$1({}, Ot), {
          invitedUserIds: e,
          isDistinct: t,
          name: n$1$1,
          data: i$1$1,
          customType: a
        }), "string" == typeof r$1$1 ? o.coverUrl = r$1$1 : o.coverImage = r$1$1, [2, this.createChannel(o)];
      });
    });
  }, n$1$1.prototype.markAsReadAll = function () {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (e) {
        return this._manager.markAsReadAll(), [2];
      });
    });
  }, n$1$1.prototype.markAsReadWithChannelUrls = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        return at$1(E$1("string", e)).throw(p$1.invalidParameters), this._manager.markAsReadWithChannelUrls(e), [2];
      });
    });
  }, n$1$1.prototype.markAsDelivered = function (e) {
    return r$1(this, void 0, void 0, function () {
      return i$1(this, function (t) {
        switch (t.label) {
          case 0:
            return at$1(y("string", e)).throw(p$1.invalidParameters), [4, this.getChannel(e)];

          case 1:
            return [4, t.sent().markAsDelivered()];

          case 2:
            return t.sent(), [2];
        }
      });
    });
  }, n$1$1;
}(Tt$1$1);

var INIT_USER = 'INIT_USER';
var RESET_USER = 'RESET_USER';
var UPDATE_USER_INFO = 'UPDATE_USER_INFO';

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

/* global Reflect, Promise */
var extendStatics = function (d, b) {
  extendStatics = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (d, b) {
    d.__proto__ = b;
  } || function (d, b) {
    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
  };

  return extendStatics(d, b);
};

function __extends(d, b) {
  if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
  extendStatics(d, b);

  function __() {
    this.constructor = d;
  }

  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function () {
  __assign = Object.assign || function __assign(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

function __spreadArray(to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
}

var SUPPORTED_MIMES$2 = {
  IMAGE: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/svg+xml', 'image/webp' // not supported in IE
  ],
  VIDEO: ['video/mpeg', 'video/ogg', 'video/webm', 'video/mp4'],
  AUDIO: ['audio/aac', 'audio/midi', 'audio/x-midi', 'audio/mpeg', 'audio/ogg', 'audio/opus', 'audio/wav', 'audio/webm', 'audio/3gpp', 'audio/3gpp2', 'audio/mp3']
};
var SendingMessageStatus$1 = {
  NONE: 'none',
  SUCCEEDED: 'succeeded',
  FAILED: 'failed',
  PENDING: 'pending'
};
var OutgoingMessageStates = {
  NONE: 'NONE',
  PENDING: 'PENDING',
  SENT: 'SENT',
  FAILED: 'FAILED',
  DELIVERED: 'DELIVERED',
  READ: 'READ'
};

var isTextuallyNull = function isTextuallyNull(text) {
  if (text === '' || text === null) {
    return true;
  }

  return false;
};

var isImage$1 = function isImage(type) {
  return SUPPORTED_MIMES$2.IMAGE.indexOf(type) >= 0;
};

var isVideo$1 = function isVideo(type) {
  return SUPPORTED_MIMES$2.VIDEO.indexOf(type) >= 0;
};

var isSupportedFileView = function isSupportedFileView(type) {
  return isImage$1(type) || isVideo$1(type);
};

var getOutgoingMessageStates = function getOutgoingMessageStates() {
  return __assign({}, OutgoingMessageStates);
};

var getSendingMessageStatus = function getSendingMessageStatus() {
  return __assign({}, SendingMessageStatus$1);
};

var reducer$3 = function reducer(accumulator, currentValue) {
  if (Array.isArray(currentValue)) {
    return __spreadArray(__spreadArray([], accumulator, true), currentValue, true);
  } else {
    accumulator.push(currentValue);
    return accumulator;
  }
};

var getClassName = function getClassName(classNames) {
  return Array.isArray(classNames) ? classNames.reduce(reducer$3, []).join(' ') : classNames;
};

var URL_REG$1 = /[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;

var isUrl = function isUrl(text) {
  return URL_REG$1.test(text);
};

var StringObjType;

(function (StringObjType) {
  StringObjType[StringObjType["normal"] = 0] = "normal";
  StringObjType[StringObjType["mention"] = 1] = "mention";
  StringObjType[StringObjType["url"] = 2] = "url";
})(StringObjType || (StringObjType = {}));

var convertWordToStringObj = function convertWordToStringObj(word, _users, _template) {
  var users = _users || [];
  var template = _template || '@'; // Use global variable

  var resultArray = [];
  var regex = RegExp("".concat(template, "{(").concat(users.map(function (user) {
    return user === null || user === void 0 ? void 0 : user.userId;
  }).join('|'), ")}"), 'g');
  var excutionResult;
  var lastIndex = 0;

  var _loop_1 = function _loop_1() {
    var template_1 = excutionResult[0],
        userId = excutionResult[1];
    var endIndex = regex.lastIndex;
    var startIndex = endIndex - template_1.length; // Normal text

    var normalText = word.slice(lastIndex, startIndex);
    resultArray.push({
      type: isUrl(normalText) ? StringObjType.url : StringObjType.normal,
      value: normalText
    }); // Mention template

    var mentionedUser = users.find(function (user) {
      return (user === null || user === void 0 ? void 0 : user.userId) === userId;
    });

    if (!mentionedUser) {
      resultArray.push({
        type: StringObjType.normal,
        value: template_1 // because template is the origin text

      });
    } else {
      resultArray.push({
        type: StringObjType.mention,
        value: (mentionedUser === null || mentionedUser === void 0 ? void 0 : mentionedUser.nickname) || '(No name)',
        userId: userId
      });
    }

    lastIndex = endIndex;
  };

  while ((excutionResult = regex.exec(word)) !== null) {
    _loop_1();
  }

  if (lastIndex < word.length) {
    // Normal text
    var normalText = word.slice(lastIndex);
    resultArray.push({
      type: isUrl(normalText) ? StringObjType.url : StringObjType.normal,
      value: normalText
    });
  }

  return resultArray;
};

var arrayEqual = function arrayEqual(array1, array2) {
  if (Array.isArray(array1) && Array.isArray(array2) && array1.length === array2.length) {
    for (var i = 0; i < array1.length; i++) {
      if (array1[i] !== array2[i]) {
        return false;
      }
    }

    return true;
  }

  return false;
};

/*!
 * css-vars-ponyfill
 * v2.4.8
 * https://jhildenbiddle.github.io/css-vars-ponyfill/
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function _extends$W() {
  _extends$W = Object.assign ? Object.assign.bind() : function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };
  return _extends$W.apply(this, arguments);
}
/*!
 * get-css-data
 * v2.1.0
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */


function getUrls(urls) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var settings = {
    mimeType: options.mimeType || null,
    onBeforeSend: options.onBeforeSend || Function.prototype,
    onSuccess: options.onSuccess || Function.prototype,
    onError: options.onError || Function.prototype,
    onComplete: options.onComplete || Function.prototype
  };
  var urlArray = Array.isArray(urls) ? urls : [urls];
  var urlQueue = Array.apply(null, Array(urlArray.length)).map(function (x) {
    return null;
  });

  function isValidCss(text) {
    var isString = typeof text === "string";
    var isHTML = isString && text.trim().charAt(0) === "<";
    return isString && !isHTML;
  }

  function onError(xhr, urlIndex) {
    settings.onError(xhr, urlArray[urlIndex], urlIndex);
  }

  function onSuccess(responseText, urlIndex) {
    var returnVal = settings.onSuccess(responseText, urlArray[urlIndex], urlIndex);
    responseText = returnVal === false ? "" : returnVal || responseText;
    urlQueue[urlIndex] = responseText;

    if (urlQueue.indexOf(null) === -1) {
      settings.onComplete(urlQueue);
    }
  }

  var parser = document.createElement("a");
  urlArray.forEach(function (url, i) {
    parser.setAttribute("href", url);
    parser.href = String(parser.href);
    var isIElte9 = Boolean(document.all && !window.atob);
    var isIElte9CORS = isIElte9 && parser.host.split(":")[0] !== location.host.split(":")[0];

    if (isIElte9CORS) {
      var isSameProtocol = parser.protocol === location.protocol;

      if (isSameProtocol) {
        var xdr = new XDomainRequest();
        xdr.open("GET", url);
        xdr.timeout = 0;
        xdr.onprogress = Function.prototype;
        xdr.ontimeout = Function.prototype;

        xdr.onload = function () {
          var text = xdr.responseText;

          if (isValidCss(text)) {
            onSuccess(text, i);
          } else {
            onError(xdr, i);
          }
        };

        xdr.onerror = function (err) {
          onError(xdr, i);
        };

        setTimeout(function () {
          xdr.send();
        }, 0);
      } else {
        console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(url, ")"));
        onError(null, i);
      }
    } else {
      var xhr = new XMLHttpRequest();
      xhr.open("GET", url);

      if (settings.mimeType && xhr.overrideMimeType) {
        xhr.overrideMimeType(settings.mimeType);
      }

      settings.onBeforeSend(xhr, url, i);

      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
          var text = xhr.responseText;

          if (xhr.status < 400 && isValidCss(text)) {
            onSuccess(text, i);
          } else if (xhr.status === 0 && isValidCss(text)) {
            onSuccess(text, i);
          } else {
            onError(xhr, i);
          }
        }
      };

      xhr.send();
    }
  });
}
/**
 * Gets CSS data from <style> and <link> nodes (including @imports), then
 * returns data in order processed by DOM. Allows specifying nodes to
 * include/exclude and filtering CSS data using RegEx.
 *
 * @preserve
 * @param {object}   [options] The options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes.
 * @param {string}   [options.include] CSS selector matching <link> and <style>
 *                   nodes to include
 * @param {string}   [options.exclude] CSS selector matching <link> and <style>
 *                   nodes to exclude
 * @param {object}   [options.filter] Regular expression used to filter node CSS
 *                   data. Each block of CSS data is tested against the filter,
 *                   and only matching data is included.
 * @param {boolean}  [options.skipDisabled=true] Determines if disabled
 *                   stylesheets will be skipped while collecting CSS data.
 * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be
 *                   collected from a stylesheet's runtime values instead of its
 *                   text content. This is required to get accurate CSS data
 *                   when a stylesheet has been modified using the deleteRule()
 *                   or insertRule() methods because these modifications will
 *                   not be reflected in the stylesheet's text content.
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments.
 * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
 *                   1) CSS text, 2) source node reference, and 3) the source
 *                   URL as arguments.
 * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
 *                   object for inspection, 2) soure node reference, and 3) the
 *                   source URL that failed (either a <link> href or an @import)
 *                   as arguments
 * @param {function} [options.onComplete] Callback after all nodes have been
 *                   processed. Passes 1) concatenated CSS text, 2) an array of
 *                   CSS text in DOM order, and 3) an array of nodes in DOM
 *                   order as arguments.
 *
 * @example
 *
 *   getCssData({
 *     rootElement : document,
 *     include     : 'style,link[rel="stylesheet"]',
 *     exclude     : '[href="skip.css"]',
 *     filter      : /red/,
 *     skipDisabled: true,
 *     useCSSOM    : false,
 *     onBeforeSend(xhr, node, url) {
 *       // ...
 *     }
 *     onSuccess(cssText, node, url) {
 *       // ...
 *     }
 *     onError(xhr, node, url) {
 *       // ...
 *     },
 *     onComplete(cssText, cssArray, nodeArray) {
 *       // ...
 *     }
 *   });
 */


function getCssData(options) {
  var regex = {
    cssComments: /\/\*[\s\S]+?\*\//g,
    cssImports: /(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g
  };
  var settings = {
    rootElement: options.rootElement || document,
    include: options.include || 'style,link[rel="stylesheet"]',
    exclude: options.exclude || null,
    filter: options.filter || null,
    skipDisabled: options.skipDisabled !== false,
    useCSSOM: options.useCSSOM || false,
    onBeforeSend: options.onBeforeSend || Function.prototype,
    onSuccess: options.onSuccess || Function.prototype,
    onError: options.onError || Function.prototype,
    onComplete: options.onComplete || Function.prototype
  };
  var sourceNodes = Array.apply(null, settings.rootElement.querySelectorAll(settings.include)).filter(function (node) {
    return !matchesSelector(node, settings.exclude);
  });
  var cssArray = Array.apply(null, Array(sourceNodes.length)).map(function (x) {
    return null;
  });

  function handleComplete() {
    var isComplete = cssArray.indexOf(null) === -1;

    if (isComplete) {
      cssArray.reduce(function (skipIndices, value, i) {
        if (value === "") {
          skipIndices.push(i);
        }

        return skipIndices;
      }, []).reverse().forEach(function (skipIndex) {
        return [sourceNodes, cssArray].forEach(function (arr) {
          return arr.splice(skipIndex, 1);
        });
      });
      var cssText = cssArray.join("");
      settings.onComplete(cssText, cssArray, sourceNodes);
    }
  }

  function handleSuccess(cssText, cssIndex, node, sourceUrl) {
    var returnVal = settings.onSuccess(cssText, node, sourceUrl);
    cssText = returnVal !== undefined && Boolean(returnVal) === false ? "" : returnVal || cssText;
    resolveImports(cssText, node, sourceUrl, function (resolvedCssText, errorData) {
      if (cssArray[cssIndex] === null) {
        errorData.forEach(function (data) {
          return settings.onError(data.xhr, node, data.url);
        });

        if (!settings.filter || settings.filter.test(resolvedCssText)) {
          cssArray[cssIndex] = resolvedCssText;
        } else {
          cssArray[cssIndex] = "";
        }

        handleComplete();
      }
    });
  }

  function parseImportData(cssText, baseUrl) {
    var ignoreRules = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
    var importData = {};
    importData.rules = (cssText.replace(regex.cssComments, "").match(regex.cssImports) || []).filter(function (rule) {
      return ignoreRules.indexOf(rule) === -1;
    });
    importData.urls = importData.rules.map(function (rule) {
      return rule.replace(regex.cssImports, "$1");
    });
    importData.absoluteUrls = importData.urls.map(function (url) {
      return getFullUrl$1(url, baseUrl);
    });
    importData.absoluteRules = importData.rules.map(function (rule, i) {
      var oldUrl = importData.urls[i];
      var newUrl = getFullUrl$1(importData.absoluteUrls[i], baseUrl);
      return rule.replace(oldUrl, newUrl);
    });
    return importData;
  }

  function resolveImports(cssText, node, baseUrl, callbackFn) {
    var __errorData = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];

    var __errorRules = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];

    var importData = parseImportData(cssText, baseUrl, __errorRules);

    if (importData.rules.length) {
      getUrls(importData.absoluteUrls, {
        onBeforeSend: function onBeforeSend(xhr, url, urlIndex) {
          settings.onBeforeSend(xhr, node, url);
        },
        onSuccess: function onSuccess(cssText, url, urlIndex) {
          var returnVal = settings.onSuccess(cssText, node, url);
          cssText = returnVal === false ? "" : returnVal || cssText;
          var responseImportData = parseImportData(cssText, url, __errorRules);
          responseImportData.rules.forEach(function (rule, i) {
            cssText = cssText.replace(rule, responseImportData.absoluteRules[i]);
          });
          return cssText;
        },
        onError: function onError(xhr, url, urlIndex) {
          __errorData.push({
            xhr: xhr,
            url: url
          });

          __errorRules.push(importData.rules[urlIndex]);

          resolveImports(cssText, node, baseUrl, callbackFn, __errorData, __errorRules);
        },
        onComplete: function onComplete(responseArray) {
          responseArray.forEach(function (importText, i) {
            cssText = cssText.replace(importData.rules[i], importText);
          });
          resolveImports(cssText, node, baseUrl, callbackFn, __errorData, __errorRules);
        }
      });
    } else {
      callbackFn(cssText, __errorData);
    }
  }

  if (sourceNodes.length) {
    sourceNodes.forEach(function (node, i) {
      var linkHref = node.getAttribute("href");
      var linkRel = node.getAttribute("rel");
      var isLink = node.nodeName.toLowerCase() === "link" && linkHref && linkRel && linkRel.toLowerCase().indexOf("stylesheet") !== -1;
      var isSkip = settings.skipDisabled === false ? false : node.disabled;
      var isStyle = node.nodeName.toLowerCase() === "style";

      if (isLink && !isSkip) {
        var isURIScheme = linkHref.indexOf("data:text/css") !== -1;

        if (isURIScheme) {
          var cssText = decodeURIComponent(linkHref.substring(linkHref.indexOf(",") + 1));

          if (settings.useCSSOM) {
            cssText = Array.apply(null, node.sheet.cssRules).map(function (rule) {
              return rule.cssText;
            }).join("");
          }

          handleSuccess(cssText, i, node, location.href);
        } else {
          getUrls(linkHref, {
            mimeType: "text/css",
            onBeforeSend: function onBeforeSend(xhr, url, urlIndex) {
              settings.onBeforeSend(xhr, node, url);
            },
            onSuccess: function onSuccess(cssText, url, urlIndex) {
              var sourceUrl = getFullUrl$1(linkHref);
              handleSuccess(cssText, i, node, sourceUrl);
            },
            onError: function onError(xhr, url, urlIndex) {
              cssArray[i] = "";
              settings.onError(xhr, node, url);
              handleComplete();
            }
          });
        }
      } else if (isStyle && !isSkip) {
        var _cssText = node.textContent;

        if (settings.useCSSOM) {
          _cssText = Array.apply(null, node.sheet.cssRules).map(function (rule) {
            return rule.cssText;
          }).join("");
        }

        handleSuccess(_cssText, i, node, location.href);
      } else {
        cssArray[i] = "";
        handleComplete();
      }
    });
  } else {
    settings.onComplete("", []);
  }
}

function getFullUrl$1(url, base) {
  var d = document.implementation.createHTMLDocument("");
  var b = d.createElement("base");
  var a = d.createElement("a");
  d.head.appendChild(b);
  d.body.appendChild(a);
  b.href = base || document.baseURI || (document.querySelector("base") || {}).href || location.href;
  a.href = url;
  return a.href;
}

function matchesSelector(elm, selector) {
  var matches = elm.matches || elm.matchesSelector || elm.webkitMatchesSelector || elm.mozMatchesSelector || elm.msMatchesSelector || elm.oMatchesSelector;
  return matches.call(elm, selector);
}

var balancedMatch = balanced;

function balanced(a, b, str) {
  if (a instanceof RegExp) a = maybeMatch(a, str);
  if (b instanceof RegExp) b = maybeMatch(b, str);
  var r = range(a, b, str);
  return r && {
    start: r[0],
    end: r[1],
    pre: str.slice(0, r[0]),
    body: str.slice(r[0] + a.length, r[1]),
    post: str.slice(r[1] + b.length)
  };
}

function maybeMatch(reg, str) {
  var m = str.match(reg);
  return m ? m[0] : null;
}

balanced.range = range;

function range(a, b, str) {
  var begs, beg, left, right, result;
  var ai = str.indexOf(a);
  var bi = str.indexOf(b, ai + 1);
  var i = ai;

  if (ai >= 0 && bi > 0) {
    if (a === b) {
      return [ai, bi];
    }

    begs = [];
    left = str.length;

    while (i >= 0 && !result) {
      if (i == ai) {
        begs.push(i);
        ai = str.indexOf(a, i + 1);
      } else if (begs.length == 1) {
        result = [begs.pop(), bi];
      } else {
        beg = begs.pop();

        if (beg < left) {
          left = beg;
          right = bi;
        }

        bi = str.indexOf(b, i + 1);
      }

      i = ai < bi && ai >= 0 ? ai : bi;
    }

    if (begs.length) {
      result = [left, right];
    }
  }

  return result;
}

function parseCss(css) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var defaults = {
    preserveStatic: true,
    removeComments: false
  };

  var settings = _extends$W({}, defaults, options);

  var errors = [];

  function error(msg) {
    throw new Error("CSS parse error: ".concat(msg));
  }

  function match(re) {
    var m = re.exec(css);

    if (m) {
      css = css.slice(m[0].length);
      return m;
    }
  }

  function open() {
    return match(/^{\s*/);
  }

  function close() {
    return match(/^}/);
  }

  function whitespace() {
    match(/^\s*/);
  }

  function comment() {
    whitespace();

    if (css[0] !== "/" || css[1] !== "*") {
      return;
    }

    var i = 2;

    while (css[i] && (css[i] !== "*" || css[i + 1] !== "/")) {
      i++;
    }

    if (!css[i]) {
      return error("end of comment is missing");
    }

    var str = css.slice(2, i);
    css = css.slice(i + 2);
    return {
      type: "comment",
      comment: str
    };
  }

  function comments() {
    var cmnts = [];
    var c;

    while (c = comment()) {
      cmnts.push(c);
    }

    return settings.removeComments ? [] : cmnts;
  }

  function selector() {
    whitespace();

    while (css[0] === "}") {
      error("extra closing bracket");
    }

    var m = match(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);

    if (m) {
      var _selector = m[0].trim();

      var selectorItems;
      var hasComment = /\/\*/.test(_selector);

      if (hasComment) {
        _selector = _selector.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g, "");
      }

      var hasCommaInQuotes = /["']\w*,\w*["']/.test(_selector);

      if (hasCommaInQuotes) {
        _selector = _selector.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g, function (m) {
          return m.replace(/,/g, "â");
        });
      }

      var hasMultipleSelectors = /,/.test(_selector);

      if (hasMultipleSelectors) {
        selectorItems = _selector.split(/\s*(?![^(]*\)),\s*/);
      } else {
        selectorItems = [_selector];
      }

      if (hasCommaInQuotes) {
        selectorItems = selectorItems.map(function (s) {
          return s.replace(/\u200C/g, ",");
        });
      }

      return selectorItems;
    }
  }

  function declaration() {
    if (css[0] === "@") {
      return at_rule();
    }

    match(/^([;\s]*)+/);
    var comment_regexp = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;
    var prop = match(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);

    if (!prop) {
      return;
    }

    prop = prop[0].trim();

    if (!match(/^:\s*/)) {
      return error("property missing ':'");
    }

    var val = match(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/);
    var ret = {
      type: "declaration",
      property: prop.replace(comment_regexp, ""),
      value: val ? val[0].replace(comment_regexp, "").trim() : ""
    };
    match(/^[;\s]*/);
    return ret;
  }

  function declarations() {
    if (!open()) {
      return error("missing '{'");
    }

    var d;
    var decls = comments();

    while (d = declaration()) {
      decls.push(d);
      decls = decls.concat(comments());
    }

    if (!close()) {
      return error("missing '}'");
    }

    return decls;
  }

  function keyframe() {
    whitespace();
    var vals = [];
    var m;

    while (m = match(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/)) {
      vals.push(m[1]);
      match(/^,\s*/);
    }

    if (vals.length) {
      return {
        type: "keyframe",
        values: vals,
        declarations: declarations()
      };
    }
  }

  function at_keyframes() {
    var m = match(/^@([-\w]+)?keyframes\s*/);

    if (!m) {
      return;
    }

    var vendor = m[1];
    m = match(/^([-\w]+)\s*/);

    if (!m) {
      return error("@keyframes missing name");
    }

    var name = m[1];

    if (!open()) {
      return error("@keyframes missing '{'");
    }

    var frame;
    var frames = comments();

    while (frame = keyframe()) {
      frames.push(frame);
      frames = frames.concat(comments());
    }

    if (!close()) {
      return error("@keyframes missing '}'");
    }

    return {
      type: "keyframes",
      name: name,
      vendor: vendor,
      keyframes: frames
    };
  }

  function at_page() {
    var m = match(/^@page */);

    if (m) {
      var sel = selector() || [];
      return {
        type: "page",
        selectors: sel,
        declarations: declarations()
      };
    }
  }

  function at_page_margin_box() {
    var m = match(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);

    if (m) {
      var name = "".concat(m[1], "-").concat(m[2]) + (m[3] ? "-".concat(m[3]) : "");
      return {
        type: "page-margin-box",
        name: name,
        declarations: declarations()
      };
    }
  }

  function at_fontface() {
    var m = match(/^@font-face\s*/);

    if (m) {
      return {
        type: "font-face",
        declarations: declarations()
      };
    }
  }

  function at_supports() {
    var m = match(/^@supports *([^{]+)/);

    if (m) {
      return {
        type: "supports",
        supports: m[1].trim(),
        rules: rules()
      };
    }
  }

  function at_host() {
    var m = match(/^@host\s*/);

    if (m) {
      return {
        type: "host",
        rules: rules()
      };
    }
  }

  function at_media() {
    var m = match(/^@media([^{]+)*/);

    if (m) {
      return {
        type: "media",
        media: (m[1] || "").trim(),
        rules: rules()
      };
    }
  }

  function at_custom_m() {
    var m = match(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);

    if (m) {
      return {
        type: "custom-media",
        name: m[1].trim(),
        media: m[2].trim()
      };
    }
  }

  function at_document() {
    var m = match(/^@([-\w]+)?document *([^{]+)/);

    if (m) {
      return {
        type: "document",
        document: m[2].trim(),
        vendor: m[1] ? m[1].trim() : null,
        rules: rules()
      };
    }
  }

  function at_x() {
    var m = match(/^@(import|charset|namespace)\s*([^;]+);/);

    if (m) {
      return {
        type: m[1],
        name: m[2].trim()
      };
    }
  }

  function at_rule() {
    whitespace();

    if (css[0] === "@") {
      var ret = at_x() || at_fontface() || at_media() || at_keyframes() || at_supports() || at_document() || at_custom_m() || at_host() || at_page() || at_page_margin_box();

      if (ret && !settings.preserveStatic) {
        var hasVarFunc = false;

        if (ret.declarations) {
          hasVarFunc = ret.declarations.some(function (decl) {
            return /var\(/.test(decl.value);
          });
        } else {
          var arr = ret.keyframes || ret.rules || [];
          hasVarFunc = arr.some(function (obj) {
            return (obj.declarations || []).some(function (decl) {
              return /var\(/.test(decl.value);
            });
          });
        }

        return hasVarFunc ? ret : {};
      }

      return ret;
    }
  }

  function rule() {
    if (!settings.preserveStatic) {
      var balancedMatch$1 = balancedMatch("{", "}", css);

      if (balancedMatch$1) {
        var hasVarDecl = /:(?:root|host)(?![.:#(])/.test(balancedMatch$1.pre) && /--\S*\s*:/.test(balancedMatch$1.body);
        var hasVarFunc = /var\(/.test(balancedMatch$1.body);

        if (!hasVarDecl && !hasVarFunc) {
          css = css.slice(balancedMatch$1.end + 1);
          return {};
        }
      }
    }

    var sel = selector() || [];
    var decls = settings.preserveStatic ? declarations() : declarations().filter(function (decl) {
      var hasVarDecl = sel.some(function (s) {
        return /:(?:root|host)(?![.:#(])/.test(s);
      }) && /^--\S/.test(decl.property);
      var hasVarFunc = /var\(/.test(decl.value);
      return hasVarDecl || hasVarFunc;
    });

    if (!sel.length) {
      error("selector missing");
    }

    return {
      type: "rule",
      selectors: sel,
      declarations: decls
    };
  }

  function rules(core) {
    if (!core && !open()) {
      return error("missing '{'");
    }

    var node;
    var rules = comments();

    while (css.length && (core || css[0] !== "}") && (node = at_rule() || rule())) {
      if (node.type) {
        rules.push(node);
      }

      rules = rules.concat(comments());
    }

    if (!core && !close()) {
      return error("missing '}'");
    }

    return rules;
  }

  return {
    type: "stylesheet",
    stylesheet: {
      rules: rules(true),
      errors: errors
    }
  };
}

function parseVars(cssData) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var defaults = {
    parseHost: false,
    store: {},
    onWarning: function onWarning() {}
  };

  var settings = _extends$W({}, defaults, options);

  var reVarDeclSelectors = new RegExp(":".concat(settings.parseHost ? "host" : "root", "$"));

  if (typeof cssData === "string") {
    cssData = parseCss(cssData, settings);
  }

  cssData.stylesheet.rules.forEach(function (rule) {
    if (rule.type !== "rule" || !rule.selectors.some(function (s) {
      return reVarDeclSelectors.test(s);
    })) {
      return;
    }

    rule.declarations.forEach(function (decl, i) {
      var prop = decl.property;
      var value = decl.value;

      if (prop && prop.indexOf("--") === 0) {
        settings.store[prop] = value;
      }
    });
  });
  return settings.store;
}

function stringifyCss(tree) {
  var delim = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
  var cb = arguments.length > 2 ? arguments[2] : undefined;
  var renderMethods = {
    charset: function charset(node) {
      return "@charset " + node.name + ";";
    },
    comment: function comment(node) {
      return node.comment.indexOf("__CSSVARSPONYFILL") === 0 ? "/*" + node.comment + "*/" : "";
    },
    "custom-media": function customMedia(node) {
      return "@custom-media " + node.name + " " + node.media + ";";
    },
    declaration: function declaration(node) {
      return node.property + ":" + node.value + ";";
    },
    document: function document(node) {
      return "@" + (node.vendor || "") + "document " + node.document + "{" + visit(node.rules) + "}";
    },
    "font-face": function fontFace(node) {
      return "@font-face" + "{" + visit(node.declarations) + "}";
    },
    host: function host(node) {
      return "@host" + "{" + visit(node.rules) + "}";
    },
    import: function _import(node) {
      return "@import " + node.name + ";";
    },
    keyframe: function keyframe(node) {
      return node.values.join(",") + "{" + visit(node.declarations) + "}";
    },
    keyframes: function keyframes(node) {
      return "@" + (node.vendor || "") + "keyframes " + node.name + "{" + visit(node.keyframes) + "}";
    },
    media: function media(node) {
      return "@media " + node.media + "{" + visit(node.rules) + "}";
    },
    namespace: function namespace(node) {
      return "@namespace " + node.name + ";";
    },
    page: function page(node) {
      return "@page " + (node.selectors.length ? node.selectors.join(", ") : "") + "{" + visit(node.declarations) + "}";
    },
    "page-margin-box": function pageMarginBox(node) {
      return "@" + node.name + "{" + visit(node.declarations) + "}";
    },
    rule: function rule(node) {
      var decls = node.declarations;

      if (decls.length) {
        return node.selectors.join(",") + "{" + visit(decls) + "}";
      }
    },
    supports: function supports(node) {
      return "@supports " + node.supports + "{" + visit(node.rules) + "}";
    }
  };

  function visit(nodes) {
    var buf = "";

    for (var i = 0; i < nodes.length; i++) {
      var n = nodes[i];

      if (cb) {
        cb(n);
      }

      var txt = renderMethods[n.type](n);

      if (txt) {
        buf += txt;

        if (txt.length && n.selectors) {
          buf += delim;
        }
      }
    }

    return buf;
  }

  return visit(tree.stylesheet.rules);
}

function walkCss(node, fn) {
  node.rules.forEach(function (rule) {
    if (rule.rules) {
      walkCss(rule, fn);
      return;
    }

    if (rule.keyframes) {
      rule.keyframes.forEach(function (keyframe) {
        if (keyframe.type === "keyframe") {
          fn(keyframe.declarations, rule);
        }
      });
      return;
    }

    if (!rule.declarations) {
      return;
    }

    fn(rule.declarations, node);
  });
}

var VAR_PROP_IDENTIFIER = "--";
var VAR_FUNC_IDENTIFIER = "var";

function transformCss(cssData) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var defaults = {
    preserveStatic: true,
    preserveVars: false,
    variables: {},
    onWarning: function onWarning() {}
  };

  var settings = _extends$W({}, defaults, options);

  if (typeof cssData === "string") {
    cssData = parseCss(cssData, settings);
  }

  walkCss(cssData.stylesheet, function (declarations, node) {
    for (var i = 0; i < declarations.length; i++) {
      var decl = declarations[i];
      var type = decl.type;
      var prop = decl.property;
      var value = decl.value;

      if (type !== "declaration") {
        continue;
      }

      if (!settings.preserveVars && prop && prop.indexOf(VAR_PROP_IDENTIFIER) === 0) {
        declarations.splice(i, 1);
        i--;
        continue;
      }

      if (value.indexOf(VAR_FUNC_IDENTIFIER + "(") !== -1) {
        var resolvedValue = resolveValue(value, settings);

        if (resolvedValue !== decl.value) {
          resolvedValue = fixNestedCalc(resolvedValue);

          if (!settings.preserveVars) {
            decl.value = resolvedValue;
          } else {
            declarations.splice(i, 0, {
              type: type,
              property: prop,
              value: resolvedValue
            });
            i++;
          }
        }
      }
    }
  });
  return stringifyCss(cssData);
}

function fixNestedCalc(value) {
  var reCalcVal = /calc\(([^)]+)\)/g;
  (value.match(reCalcVal) || []).forEach(function (match) {
    var newVal = "calc".concat(match.split("calc").join(""));
    value = value.replace(match, newVal);
  });
  return value;
}

function resolveValue(value) {
  var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var __recursiveFallback = arguments.length > 2 ? arguments[2] : undefined;

  if (value.indexOf("var(") === -1) {
    return value;
  }

  var valueData = balancedMatch("(", ")", value);

  function resolveFunc(value) {
    var name = value.split(",")[0].replace(/[\s\n\t]/g, "");
    var fallback = (value.match(/(?:\s*,\s*){1}(.*)?/) || [])[1];
    var match = Object.prototype.hasOwnProperty.call(settings.variables, name) ? String(settings.variables[name]) : undefined;
    var replacement = match || (fallback ? String(fallback) : undefined);
    var unresolvedFallback = __recursiveFallback || value;

    if (!match) {
      settings.onWarning('variable "'.concat(name, '" is undefined'));
    }

    if (replacement && replacement !== "undefined" && replacement.length > 0) {
      return resolveValue(replacement, settings, unresolvedFallback);
    } else {
      return "var(".concat(unresolvedFallback, ")");
    }
  }

  if (!valueData) {
    if (value.indexOf("var(") !== -1) {
      settings.onWarning('missing closing ")" in the value "'.concat(value, '"'));
    }

    return value;
  } else if (valueData.pre.slice(-3) === "var") {
    var isEmptyVarFunc = valueData.body.trim().length === 0;

    if (isEmptyVarFunc) {
      settings.onWarning("var() must contain a non-whitespace string");
      return value;
    } else {
      return valueData.pre.slice(0, -3) + resolveFunc(valueData.body) + resolveValue(valueData.post, settings);
    }
  } else {
    return valueData.pre + "(".concat(resolveValue(valueData.body, settings), ")") + resolveValue(valueData.post, settings);
  }
}

var isBrowser = typeof window !== "undefined";
var isNativeSupport = isBrowser && window.CSS && window.CSS.supports && window.CSS.supports("(--a: 0)");
var counters = {
  group: 0,
  job: 0
};
var defaults = {
  rootElement: isBrowser ? document : null,
  shadowDOM: false,
  include: "style,link[rel=stylesheet]",
  exclude: "",
  variables: {},
  onlyLegacy: true,
  preserveStatic: true,
  preserveVars: false,
  silent: false,
  updateDOM: true,
  updateURLs: true,
  watch: null,
  onBeforeSend: function onBeforeSend() {},
  onError: function onError() {},
  onWarning: function onWarning() {},
  onSuccess: function onSuccess() {},
  onComplete: function onComplete() {},
  onFinally: function onFinally() {}
};
var regex = {
  cssComments: /\/\*[\s\S]+?\*\//g,
  cssKeyframes: /@(?:-\w*-)?keyframes/,
  cssMediaQueries: /@media[^{]+\{([\s\S]+?})\s*}/g,
  cssUrls: /url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,
  cssVarDeclRules: /(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,
  cssVarDecls: /(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,
  cssVarFunc: /var\(\s*--[\w-]/,
  cssVars: /(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/
};
var variableStore = {
  dom: {},
  job: {},
  user: {}
};
var cssVarsIsRunning = false;
var cssVarsObserver = null;
var cssVarsSrcNodeCount = 0;
var debounceTimer = null;
var isShadowDOMReady = false;
/**
 * Fetches, parses, and transforms CSS custom properties from specified
 * <style> and <link> elements into static values, then appends a new <style>
 * element with static values to the DOM to provide CSS custom property
 * compatibility for legacy browsers. Also provides a single interface for
 * live updates of runtime values in both modern and legacy browsers.
 *
 * @preserve
 * @param {object}   [options] Options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes
 * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
 *                   and <style> nodes will be processed.
 * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
 *                   matching <link re="stylesheet"> and <style> nodes to
 *                   process
 * @param {string}   [options.exclude] CSS selector matching <link
 *                   rel="stylehseet"> and <style> nodes to exclude from those
 *                   matches by options.include
 * @param {object}   [options.variables] A map of custom property name/value
 *                   pairs. Property names can omit or include the leading
 *                   double-hyphen (â), and values specified will override
 *                   previous values
 * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
 *                   only generate legacy-compatible CSS in browsers that lack
 *                   native support (i.e., legacy browsers)
 * @param {boolean}  [options.preserveStatic=true] Determines if CSS
 *                   declarations that do not reference a custom property will
 *                   be preserved in the transformed CSS
 * @param {boolean}  [options.preserveVars=false] Determines if CSS custom
 *                   property declarations will be preserved in the transformed
 *                   CSS
 * @param {boolean}  [options.silent=false] Determines if warning and error
 *                   messages will be displayed on the console
 * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
 *                   update the DOM after processing CSS custom properties
 * @param {boolean}  [options.updateURLs=true] Determines if relative url()
 *                   paths will be converted to absolute urls in external CSS
 * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
 *                   be created that will execute the ponyfill when a <link> or
 *                   <style> DOM mutation is observed
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments
 * @param {function} [options.onError] Callback after a CSS parsing error has
 *                   occurred or an XHR request has failed. Passes 1) an error
 *                   message, and 2) source node reference, 3) xhr, and 4 url as
 *                   arguments.
 * @param {function} [options.onWarning] Callback after each CSS parsing warning
 *                   has occurred. Passes 1) a warning message as an argument.
 * @param {function} [options.onSuccess] Callback after CSS data has been
 *                   collected from each node and before CSS custom properties
 *                   have been transformed. Allows modifying the CSS data before
 *                   it is transformed by returning any string value (or false
 *                   to skip). Passes 1) CSS text, 2) source node reference, and
 *                   3) the source URL as arguments.
 * @param {function} [options.onComplete] Callback after all CSS has been
 *                   processed, legacy-compatible CSS has been generated, and
 *                   (optionally) the DOM has been updated. Passes 1) a CSS
 *                   string with CSS variable values resolved, 2) an array of
 *                   output <style> node references that have been appended to
 *                   the DOM, 3) an object containing all custom properies names
 *                   and values, and 4) the ponyfill execution time in
 *                   milliseconds.
 * @param {function} [options.onFinally] Callback in modern and legacy browsers
 *                   after the ponyfill has finished all tasks. Passes 1) a
 *                   boolean indicating if the last ponyfill call resulted in a
 *                   style change, 2) a boolean indicating if the current
 *                   browser provides native support for CSS custom properties,
 *                   and 3) the ponyfill execution time in milliseconds.
 * @example
 *
 *   cssVars({
 *     rootElement   : document,
 *     shadowDOM     : false,
 *     include       : 'style,link[rel="stylesheet"]',
 *     exclude       : '',
 *     variables     : {},
 *     onlyLegacy    : true,
 *     preserveStatic: true,
 *     preserveVars  : false,
 *     silent        : false,
 *     updateDOM     : true,
 *     updateURLs    : true,
 *     watch         : false,
 *     onBeforeSend(xhr, node, url) {},
 *     onError(message, node, xhr, url) {},
 *     onWarning(message) {},
 *     onSuccess(cssText, node, url) {},
 *     onComplete(cssText, styleNode, cssVariables, benchmark) {},
 *     onFinally(hasChanged, hasNativeSupport, benchmark)
 *   });
 */

function cssVars() {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var msgPrefix = "cssVars(): ";

  var settings = _extends$W({}, defaults, options);

  function handleError(message, sourceNode, xhr, url) {
    if (!settings.silent && window.console) {
      console.error("".concat(msgPrefix).concat(message, "\n"), sourceNode);
    }

    settings.onError(message, sourceNode, xhr, url);
  }

  function handleWarning(message) {
    if (!settings.silent && window.console) {
      console.warn("".concat(msgPrefix).concat(message));
    }

    settings.onWarning(message);
  }

  function handleFinally(hasChanged) {
    settings.onFinally(Boolean(hasChanged), isNativeSupport, getTimeStamp() - settings.__benchmark);
  }

  if (!isBrowser) {
    return;
  }

  if (settings.watch) {
    settings.watch = defaults.watch;
    addMutationObserver(settings);
    cssVars(settings);
    return;
  } else if (settings.watch === false && cssVarsObserver) {
    cssVarsObserver.disconnect();
    cssVarsObserver = null;
  }

  if (!settings.__benchmark) {
    if (cssVarsIsRunning === settings.rootElement) {
      cssVarsDebounced(options);
      return;
    }

    var srcNodes = [].slice.call(settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));
    settings.__benchmark = getTimeStamp();
    settings.exclude = [cssVarsObserver ? '[data-cssvars]:not([data-cssvars=""])' : '[data-cssvars="out"]', "link[disabled]:not([data-cssvars])", settings.exclude].filter(function (selector) {
      return selector;
    }).join(",");
    settings.variables = fixVarNames(settings.variables);
    srcNodes.forEach(function (srcNode) {
      var hasStyleCache = srcNode.nodeName.toLowerCase() === "style" && srcNode.__cssVars.text;

      var hasStyleChanged = hasStyleCache && srcNode.textContent !== srcNode.__cssVars.text;

      if (hasStyleCache && hasStyleChanged) {
        srcNode.sheet && (srcNode.sheet.disabled = false);
        srcNode.setAttribute("data-cssvars", "");
      }
    });

    if (!cssVarsObserver) {
      var outNodes = [].slice.call(settings.rootElement.querySelectorAll('[data-cssvars="out"]'));
      outNodes.forEach(function (outNode) {
        var dataGroup = outNode.getAttribute("data-cssvars-group");
        var srcNode = dataGroup ? settings.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(dataGroup, '"]')) : null;

        if (!srcNode) {
          outNode.parentNode.removeChild(outNode);
        }
      });

      if (cssVarsSrcNodeCount && srcNodes.length < cssVarsSrcNodeCount) {
        cssVarsSrcNodeCount = srcNodes.length;
        variableStore.dom = {};
      }
    }
  }

  if (document.readyState !== "loading") {
    if (isNativeSupport && settings.onlyLegacy) {
      var hasVarChange = false;

      if (settings.updateDOM) {
        var targetElm = settings.rootElement.host || (settings.rootElement === document ? document.documentElement : settings.rootElement);
        Object.keys(settings.variables).forEach(function (key) {
          var varValue = settings.variables[key];
          hasVarChange = hasVarChange || varValue !== getComputedStyle(targetElm).getPropertyValue(key);
          targetElm.style.setProperty(key, varValue);
        });
      }

      handleFinally(hasVarChange);
    } else if (!isShadowDOMReady && (settings.shadowDOM || settings.rootElement.shadowRoot || settings.rootElement.host)) {
      getCssData({
        rootElement: defaults.rootElement,
        include: defaults.include,
        exclude: settings.exclude,
        skipDisabled: false,
        onSuccess: function onSuccess(cssText, node, url) {
          var isUserDisabled = (node.sheet || {}).disabled && !node.__cssVars;

          if (isUserDisabled) {
            return false;
          }

          cssText = cssText.replace(regex.cssComments, "").replace(regex.cssMediaQueries, "");
          cssText = (cssText.match(regex.cssVarDeclRules) || []).join("");
          return cssText || false;
        },
        onComplete: function onComplete(cssText, cssArray, nodeArray) {
          parseVars(cssText, {
            store: variableStore.dom,
            onWarning: handleWarning
          });
          isShadowDOMReady = true;
          cssVars(settings);
        }
      });
    } else {
      cssVarsIsRunning = settings.rootElement;
      getCssData({
        rootElement: settings.rootElement,
        include: settings.include,
        exclude: settings.exclude,
        skipDisabled: false,
        onBeforeSend: settings.onBeforeSend,
        onError: function onError(xhr, node, url) {
          var responseUrl = xhr.responseURL || getFullUrl(url, location.href);
          var statusText = xhr.statusText ? "(".concat(xhr.statusText, ")") : "Unspecified Error" + (xhr.status === 0 ? " (possibly CORS related)" : "");
          var errorMsg = "CSS XHR Error: ".concat(responseUrl, " ").concat(xhr.status, " ").concat(statusText);
          handleError(errorMsg, node, xhr, responseUrl);
        },
        onSuccess: function onSuccess(cssText, node, url) {
          var isUserDisabled = (node.sheet || {}).disabled && !node.__cssVars;

          if (isUserDisabled) {
            return false;
          }

          var isLink = node.nodeName.toLowerCase() === "link";
          var isStyleImport = node.nodeName.toLowerCase() === "style" && cssText !== node.textContent;
          var returnVal = settings.onSuccess(cssText, node, url);
          cssText = returnVal !== undefined && Boolean(returnVal) === false ? "" : returnVal || cssText;

          if (settings.updateURLs && (isLink || isStyleImport)) {
            cssText = fixRelativeCssUrls(cssText, url);
          }

          return cssText;
        },
        onComplete: function onComplete(cssText, cssArray) {
          var nodeArray = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

          var currentVars = _extends$W({}, variableStore.dom, variableStore.user);

          var hasVarChange = false;
          variableStore.job = {};
          nodeArray.forEach(function (node, i) {
            var nodeCSS = cssArray[i];
            node.__cssVars = node.__cssVars || {};
            node.__cssVars.text = nodeCSS;

            if (regex.cssVars.test(nodeCSS)) {
              try {
                var cssTree = parseCss(nodeCSS, {
                  preserveStatic: settings.preserveStatic,
                  removeComments: true
                });
                parseVars(cssTree, {
                  parseHost: Boolean(settings.rootElement.host),
                  store: variableStore.dom,
                  onWarning: handleWarning
                });
                node.__cssVars.tree = cssTree;
              } catch (err) {
                handleError(err.message, node);
              }
            }
          });

          _extends$W(variableStore.job, variableStore.dom);

          if (settings.updateDOM) {
            _extends$W(variableStore.user, settings.variables);

            _extends$W(variableStore.job, variableStore.user);
          } else {
            _extends$W(variableStore.job, variableStore.user, settings.variables);

            _extends$W(currentVars, settings.variables);
          }

          hasVarChange = counters.job > 0 && Boolean(Object.keys(variableStore.job).length > Object.keys(currentVars).length || Boolean(Object.keys(currentVars).length && Object.keys(variableStore.job).some(function (key) {
            return variableStore.job[key] !== currentVars[key];
          })));

          if (hasVarChange) {
            resetCssNodes(settings.rootElement);
            cssVars(settings);
          } else {
            var outCssArray = [];
            var outNodeArray = [];
            var hasKeyframesWithVars = false;

            if (settings.updateDOM) {
              counters.job++;
            }

            nodeArray.forEach(function (node, i) {
              var isSkip = !node.__cssVars.tree;

              if (node.__cssVars.tree) {
                try {
                  transformCss(node.__cssVars.tree, _extends$W({}, settings, {
                    variables: variableStore.job,
                    onWarning: handleWarning
                  }));
                  var outCss = stringifyCss(node.__cssVars.tree);

                  if (settings.updateDOM) {
                    var nodeCSS = cssArray[i];
                    var hasCSSVarFunc = regex.cssVarFunc.test(nodeCSS);

                    if (!node.getAttribute("data-cssvars")) {
                      node.setAttribute("data-cssvars", "src");
                    }

                    if (outCss.length && hasCSSVarFunc) {
                      var dataGroup = node.getAttribute("data-cssvars-group") || ++counters.group;
                      var outCssNoSpaces = outCss.replace(/\s/g, "");
                      var outNode = settings.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(dataGroup, '"]')) || document.createElement("style");
                      hasKeyframesWithVars = hasKeyframesWithVars || regex.cssKeyframes.test(outCss);

                      if (settings.preserveStatic) {
                        node.sheet && (node.sheet.disabled = true);
                      }

                      if (!outNode.hasAttribute("data-cssvars")) {
                        outNode.setAttribute("data-cssvars", "out");
                      }

                      if (outCssNoSpaces === node.textContent.replace(/\s/g, "")) {
                        isSkip = true;

                        if (outNode && outNode.parentNode) {
                          node.removeAttribute("data-cssvars-group");
                          outNode.parentNode.removeChild(outNode);
                        }
                      } else if (outCssNoSpaces !== outNode.textContent.replace(/\s/g, "")) {
                        [node, outNode].forEach(function (n) {
                          n.setAttribute("data-cssvars-job", counters.job);
                          n.setAttribute("data-cssvars-group", dataGroup);
                        });
                        outNode.textContent = outCss;
                        outCssArray.push(outCss);
                        outNodeArray.push(outNode);

                        if (!outNode.parentNode) {
                          node.parentNode.insertBefore(outNode, node.nextSibling);
                        }
                      }
                    }
                  } else {
                    if (node.textContent.replace(/\s/g, "") !== outCss) {
                      outCssArray.push(outCss);
                    }
                  }
                } catch (err) {
                  handleError(err.message, node);
                }
              }

              if (isSkip) {
                node.setAttribute("data-cssvars", "skip");
              }

              if (!node.hasAttribute("data-cssvars-job")) {
                node.setAttribute("data-cssvars-job", counters.job);
              }
            });
            cssVarsSrcNodeCount = settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length;

            if (settings.shadowDOM) {
              var elms = [].concat(settings.rootElement).concat([].slice.call(settings.rootElement.querySelectorAll("*")));

              for (var i = 0, elm; elm = elms[i]; ++i) {
                if (elm.shadowRoot && elm.shadowRoot.querySelector("style")) {
                  var shadowSettings = _extends$W({}, settings, {
                    rootElement: elm.shadowRoot
                  });

                  cssVars(shadowSettings);
                }
              }
            }

            if (settings.updateDOM && hasKeyframesWithVars) {
              fixKeyframes(settings.rootElement);
            }

            cssVarsIsRunning = false;
            settings.onComplete(outCssArray.join(""), outNodeArray, JSON.parse(JSON.stringify(variableStore.job)), getTimeStamp() - settings.__benchmark);
            handleFinally(outNodeArray.length);
          }
        }
      });
    }
  } else {
    document.addEventListener("DOMContentLoaded", function init(evt) {
      cssVars(options);
      document.removeEventListener("DOMContentLoaded", init);
    });
  }
}

cssVars.reset = function () {
  counters.job = 0;
  counters.group = 0;
  cssVarsIsRunning = false;

  if (cssVarsObserver) {
    cssVarsObserver.disconnect();
    cssVarsObserver = null;
  }

  cssVarsSrcNodeCount = 0;
  debounceTimer = null;
  isShadowDOMReady = false;

  for (var prop in variableStore) {
    variableStore[prop] = {};
  }
};

function addMutationObserver(settings) {
  function isDisabled(node) {
    var isDisabledAttr = isLink(node) && node.hasAttribute("disabled");
    var isDisabledSheet = (node.sheet || {}).disabled;
    return isDisabledAttr || isDisabledSheet;
  }

  function isLink(node) {
    var isStylesheet = node.nodeName.toLowerCase() === "link" && (node.getAttribute("rel") || "").indexOf("stylesheet") !== -1;
    return isStylesheet;
  }

  function isStyle(node) {
    return node.nodeName.toLowerCase() === "style";
  }

  function isValidAttributeMutation(mutation) {
    var isValid = false;

    if (mutation.type === "attributes" && isLink(mutation.target) && !isDisabled(mutation.target)) {
      var isEnabledMutation = mutation.attributeName === "disabled";
      var isHrefMutation = mutation.attributeName === "href";
      var isSkipNode = mutation.target.getAttribute("data-cssvars") === "skip";
      var isSrcNode = mutation.target.getAttribute("data-cssvars") === "src";

      if (isEnabledMutation) {
        isValid = !isSkipNode && !isSrcNode;
      } else if (isHrefMutation) {
        if (isSkipNode) {
          mutation.target.setAttribute("data-cssvars", "");
        } else if (isSrcNode) {
          resetCssNodes(settings.rootElement, true);
        }

        isValid = true;
      }
    }

    return isValid;
  }

  function isValidStyleTextMutation(mutation) {
    var isValid = false;

    if (mutation.type === "childList") {
      var isStyleElm = isStyle(mutation.target);
      var isOutNode = mutation.target.getAttribute("data-cssvars") === "out";
      isValid = isStyleElm && !isOutNode;
    }

    return isValid;
  }

  function isValidAddMutation(mutation) {
    var isValid = false;

    if (mutation.type === "childList") {
      isValid = [].slice.call(mutation.addedNodes).some(function (node) {
        var isElm = node.nodeType === 1;
        var hasAttr = isElm && node.hasAttribute("data-cssvars");
        var isStyleWithVars = isStyle(node) && regex.cssVars.test(node.textContent);
        var isValid = !hasAttr && (isLink(node) || isStyleWithVars);
        return isValid && !isDisabled(node);
      });
    }

    return isValid;
  }

  function isValidRemoveMutation(mutation) {
    var isValid = false;

    if (mutation.type === "childList") {
      isValid = [].slice.call(mutation.removedNodes).some(function (node) {
        var isElm = node.nodeType === 1;
        var isOutNode = isElm && node.getAttribute("data-cssvars") === "out";
        var isSrcNode = isElm && node.getAttribute("data-cssvars") === "src";
        var isValid = isSrcNode;

        if (isSrcNode || isOutNode) {
          var dataGroup = node.getAttribute("data-cssvars-group");
          var orphanNode = settings.rootElement.querySelector('[data-cssvars-group="'.concat(dataGroup, '"]'));

          if (isSrcNode) {
            resetCssNodes(settings.rootElement, true);
          }

          if (orphanNode) {
            orphanNode.parentNode.removeChild(orphanNode);
          }
        }

        return isValid;
      });
    }

    return isValid;
  }

  if (!window.MutationObserver) {
    return;
  }

  if (cssVarsObserver) {
    cssVarsObserver.disconnect();
    cssVarsObserver = null;
  }

  cssVarsObserver = new MutationObserver(function (mutations) {
    var hasValidMutation = mutations.some(function (mutation) {
      return isValidAttributeMutation(mutation) || isValidStyleTextMutation(mutation) || isValidAddMutation(mutation) || isValidRemoveMutation(mutation);
    });

    if (hasValidMutation) {
      cssVars(settings);
    }
  });
  cssVarsObserver.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ["disabled", "href"],
    childList: true,
    subtree: true
  });
}

function cssVarsDebounced(settings) {
  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;
  clearTimeout(debounceTimer);
  debounceTimer = setTimeout(function () {
    settings.__benchmark = null;
    cssVars(settings);
  }, delay);
}

function fixKeyframes(rootElement) {
  var animationNameProp = ["animation-name", "-moz-animation-name", "-webkit-animation-name"].filter(function (prop) {
    return getComputedStyle(document.body)[prop];
  })[0];

  if (animationNameProp) {
    var allNodes = [].slice.call(rootElement.querySelectorAll("*"));
    var keyframeNodes = [];
    var nameMarker = "__CSSVARSPONYFILL-KEYFRAMES__";

    for (var i = 0, len = allNodes.length; i < len; i++) {
      var node = allNodes[i];
      var animationName = getComputedStyle(node)[animationNameProp];

      if (animationName !== "none") {
        node.style[animationNameProp] += nameMarker;
        keyframeNodes.push(node);
      }
    }

    void document.body.offsetHeight;

    for (var _i = 0, _len = keyframeNodes.length; _i < _len; _i++) {
      var nodeStyle = keyframeNodes[_i].style;
      nodeStyle[animationNameProp] = nodeStyle[animationNameProp].replace(nameMarker, "");
    }
  }
}

function fixRelativeCssUrls(cssText, baseUrl) {
  var cssUrls = cssText.replace(regex.cssComments, "").match(regex.cssUrls) || [];
  cssUrls.forEach(function (cssUrl) {
    var oldUrl = cssUrl.replace(regex.cssUrls, "$1");
    var newUrl = getFullUrl(oldUrl, baseUrl);
    cssText = cssText.replace(cssUrl, cssUrl.replace(oldUrl, newUrl));
  });
  return cssText;
}

function fixVarNames() {
  var varObj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var reLeadingHyphens = /^-{2}/;
  return Object.keys(varObj).reduce(function (obj, value) {
    var key = reLeadingHyphens.test(value) ? value : "--".concat(value.replace(/^-+/, ""));
    obj[key] = varObj[value];
    return obj;
  }, {});
}

function getFullUrl(url) {
  var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : location.href;
  var d = document.implementation.createHTMLDocument("");
  var b = d.createElement("base");
  var a = d.createElement("a");
  d.head.appendChild(b);
  d.body.appendChild(a);
  b.href = base;
  a.href = url;
  return a.href;
}

function getTimeStamp() {
  return isBrowser && (window.performance || {}).now ? window.performance.now() : new Date().getTime();
}

function resetCssNodes(rootElement) {
  var resetDOMVariableStore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  var resetNodes = [].slice.call(rootElement.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));
  resetNodes.forEach(function (node) {
    return node.setAttribute("data-cssvars", "");
  });

  if (resetDOMVariableStore) {
    variableStore.dom = {};
  }
}

/* eslint-disable no-bitwise */

/* eslint-disable eqeqeq */

/* eslint-disable no-mixed-operators */
// https://stackoverflow.com/a/2117523
// used mainly for dom key generation
var uuidv4 = function uuidv4() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
    var r = Math.random() * 16 | 0;
    var v = c === 'x' ? r : r & 0x3 | 0x8;
    return v.toString(16);
  });
};

var getStringSet$1 = function getStringSet() {
  var lang = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'en';
  var stringSet = {
    en: {
      OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE: 'Channel Information',
      OPEN_CHANNEL_SETTINGS__OPERATOR_URL: 'URL',
      OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE: 'Participants',
      OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL: 'Delete channel',
      OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE: 'Delete channel?',
      OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT: 'Once deleted, this channel can\'t be restored.',
      OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT: 'Delete',
      OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE: 'Operators',
      OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD: 'Add operator',
      OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL: 'All operators',
      OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE: 'Muted participants',
      OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL: 'All muted participants',
      OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE: 'No muted participants yet',
      OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE: 'Banned users',
      OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL: 'All banned users',
      OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE: 'No banned users yet',
      OPEN_CHANNEL_SETTINGS__MEMBERS__YOU: ' (You)',
      OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR: 'Operator',
      OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE: 'Participants',
      OPEN_CHANNEL_SETTINGS__EMPTY_LIST: 'No participants yet',
      OPEN_CHANNEL_SETTINGS__SEE_ALL: 'See all participants',
      OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE: 'All participants',
      OPEN_CHANNEL_SETTINGS__NO_TITLE: '(No title)',
      OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR: 'Register as operator',
      OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR: 'Unregister operator',
      OPEN_CHANNEL_SETTING__MODERATION__MUTE: 'Mute',
      OPEN_CHANNEL_SETTING__MODERATION__UNMUTE: 'Unmute',
      OPEN_CHANNEL_SETTING__MODERATION__BAN: 'Ban',
      OPEN_CHANNEL_SETTING__MODERATION__UNBAN: 'Unban',
      OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS: 'participants',
      TRYING_TO_CONNECT: 'Trying to connectâ¦',
      USER_PROFILE__MESSAGE: 'Message',
      USER_PROFILE__USER_ID: 'User ID',
      EDIT_PROFILE__TITLE: 'My profile',
      EDIT_PROFILE__IMAGE_LABEL: 'Profile image',
      EDIT_PROFILE__IMAGE_UPLOAD: 'Upload',
      EDIT_PROFILE__NICKNAME_LABEL: 'Nickname',
      EDIT_PROFILE__NICKNAME_PLACEHOLDER: 'Enter your nickname',
      EDIT_PROFILE__USERID_LABEL: 'User ID',
      EDIT_PROFILE__THEME_LABEL: 'Dark theme',
      MESSAGE_INPUT__PLACE_HOLDER: 'Enter message',
      MESSAGE_INPUT__PLACE_HOLDER__DISABLED: 'Chat is unavailable in this channel',
      MESSAGE_INPUT__PLACE_HOLDER__MUTED: 'Chat is unavailable because you are being muted',
      MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER: 'Reply to message',
      CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE: 'new message(s) since',
      CHANNEL__MESSAGE_LIST__NOTIFICATION__ON: 'on',
      CHANNEL_SETTING__HEADER__TITLE: 'Channel information',
      CHANNEL_SETTING__PROFILE__EDIT: 'Edit',
      CHANNEL_SETTING__MEMBERS__TITLE: 'Members',
      CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS: 'All members',
      CHANNEL_SETTING__MEMBERS__INVITE_MEMBER: 'Invite users',
      CHANNEL_SETTING__MEMBERS__YOU: ' (You)',
      CHANNEL_SETTING__MEMBERS__OPERATOR: 'Operator',
      CHANNEL_SETTING__LEAVE_CHANNEL__TITLE: 'Leave channel',
      CHANNEL_SETTING__OPERATORS__TITLE: 'Operators',
      CHANNEL_SETTING__OPERATORS__TITLE_ALL: 'All operators',
      CHANNEL_SETTING__OPERATORS__TITLE_ADD: 'Add operator',
      CHANNEL_SETTING__MUTED_MEMBERS__TITLE: 'Muted members',
      CHANNEL_SETTING__BANNED_MEMBERS__TITLE: 'Banned users',
      CHANNEL_SETTING__FREEZE_CHANNEL: 'Freeze Channel',
      CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR: 'Register as operator',
      CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR: 'Unregister operator',
      CHANNEL_SETTING__MODERATION__MUTE: 'Mute',
      CHANNEL_SETTING__MODERATION__UNMUTE: 'Unmute',
      CHANNEL_SETTING__MODERATION__BAN: 'Ban',
      CHANNEL_SETTING__MODERATION__UNBAN: 'Unban',
      BUTTON__CANCEL: 'Cancel',
      BUTTON__DELETE: 'Delete',
      BUTTON__SAVE: 'Save',
      BUTTON__CREATE: 'Create',
      BUTTON__INVITE: 'Invite',
      BADGE__OVER: '+',
      MODAL__DELETE_MESSAGE__TITLE: 'Delete this message?',
      MODAL__CHANNEL_INFORMATION__TITLE: 'Edit channel information',
      MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE: 'Channel image',
      MODAL__CHANNEL_INFORMATION__UPLOAD: 'Upload',
      MODAL__CHANNEL_INFORMATION__CHANNEL_NAME: 'Channel name',
      MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER: 'Enter name',
      MODAL__INVITE_MEMBER__TITLE: 'Invite member',
      MODAL__INVITE_MEMBER__SELECTEC: 'selected',
      MODAL__CHOOSE_CHANNEL_TYPE__TITLE: 'New channel',
      MODAL__CHOOSE_CHANNEL_TYPE__GROUP: 'Group',
      MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP: 'Super group',
      MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST: 'Broadcast',
      MODAL__CREATE_CHANNEL__TITLE: 'New channel',
      MODAL__CREATE_CHANNEL__GROUP: 'Group',
      MODAL__CREATE_CHANNEL__SUPER: 'Super group',
      MODAL__CREATE_CHANNEL__BROADCAST: 'Broadcast',
      MODAL__CREATE_CHANNEL__SELECTED: 'selected',
      TYPING_INDICATOR__IS_TYPING: 'is typing...',
      TYPING_INDICATOR__AND: 'and',
      TYPING_INDICATOR__ARE_TYPING: 'are typing...',
      TYPING_INDICATOR__MULTIPLE_TYPING: 'Several people are typing...',
      CHANNEL_FROZEN: 'Channel frozen',
      PLACE_HOLDER__NO_CHANNEL: 'No channels',
      PLACE_HOLDER__WRONG: 'Something went wrong',
      PLACE_HOLDER__RETRY_TO_CONNECT: 'Retry',
      PLACE_HOLDER__NO_MESSAGES: 'No messages',
      NO_TITLE: 'No title',
      NO_NAME: '(No name)',
      NO_MEMBERS: '(No members)',
      TOOLTIP__AND_YOU: ', and you',
      TOOLTIP__YOU: 'you',
      TOOLTIP__UNKNOWN_USER: '(no name)',
      UNKNOWN__UNKNOWN_MESSAGE_TYPE: '(Unknown message type)',
      UNKNOWN__CANNOT_READ_MESSAGE: 'Cannot read this message.',
      MESSAGE_EDITED: '(edited)',
      MESSAGE_MENU__COPY: 'Copy',
      MESSAGE_MENU__REPLY: 'Reply',
      MESSAGE_MENU__EDIT: 'Edit',
      MESSAGE_MENU__RESEND: 'Resend',
      MESSAGE_MENU__DELETE: 'Delete',
      SEARCH: 'Search',
      SEARCH_IN_CHANNEL: 'Search in channel',
      SEARCH_IN: 'Search in',
      SEARCHING: 'Searching for messages...',
      NO_SEARCHED_MESSAGE: 'No results found.',
      QUOTE_MESSAGE_INPUT__REPLY_TO: 'Reply to',
      QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE: 'Photo',
      QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF: 'GIF',
      QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO: 'Video',
      QUOTED_MESSAGE__REPLIED_TO: 'replied to',
      QUOTED_MESSAGE__CURRENT_USER: 'You',
      // FIXME: get back legacy, remove after refactoring open channel messages
      CONTEXT_MENU_DROPDOWN__COPY: 'Copy',
      CONTEXT_MENU_DROPDOWN__EDIT: 'Edit',
      CONTEXT_MENU_DROPDOWN__RESEND: 'Resend',
      CONTEXT_MENU_DROPDOWN__DELETE: 'Delete',
      MENTION_NAME__NO_NAME: '(No name)',
      MENTION_COUNT__OVER_LIMIT: 'You can mention up to %d times per message.',
      UI__FILE_VIEWER__UNSUPPORT: 'Unsupported message'
    }
  };
  return stringSet[lang];
};

var formatDistanceLocale$1 = {
  lessThanXSeconds: {
    one: 'less than a second',
    other: 'less than {{count}} seconds'
  },
  xSeconds: {
    one: '1 second',
    other: '{{count}} seconds'
  },
  halfAMinute: 'half a minute',
  lessThanXMinutes: {
    one: 'less than a minute',
    other: 'less than {{count}} minutes'
  },
  xMinutes: {
    one: '1 minute',
    other: '{{count}} minutes'
  },
  aboutXHours: {
    one: 'about 1 hour',
    other: 'about {{count}} hours'
  },
  xHours: {
    one: '1 hour',
    other: '{{count}} hours'
  },
  xDays: {
    one: '1 day',
    other: '{{count}} days'
  },
  aboutXWeeks: {
    one: 'about 1 week',
    other: 'about {{count}} weeks'
  },
  xWeeks: {
    one: '1 week',
    other: '{{count}} weeks'
  },
  aboutXMonths: {
    one: 'about 1 month',
    other: 'about {{count}} months'
  },
  xMonths: {
    one: '1 month',
    other: '{{count}} months'
  },
  aboutXYears: {
    one: 'about 1 year',
    other: 'about {{count}} years'
  },
  xYears: {
    one: '1 year',
    other: '{{count}} years'
  },
  overXYears: {
    one: 'over 1 year',
    other: 'over {{count}} years'
  },
  almostXYears: {
    one: 'almost 1 year',
    other: 'almost {{count}} years'
  }
};

function formatDistance$1(token, count, options) {
  options = options || {};
  var result;

  if (typeof formatDistanceLocale$1[token] === 'string') {
    result = formatDistanceLocale$1[token];
  } else if (count === 1) {
    result = formatDistanceLocale$1[token].one;
  } else {
    result = formatDistanceLocale$1[token].other.replace('{{count}}', count);
  }

  if (options.addSuffix) {
    if (options.comparison > 0) {
      return 'in ' + result;
    } else {
      return result + ' ago';
    }
  }

  return result;
}

function buildFormatLongFn$1(args) {
  return function (dirtyOptions) {
    var options = dirtyOptions || {};
    var width = options.width ? String(options.width) : args.defaultWidth;
    var format = args.formats[width] || args.formats[args.defaultWidth];
    return format;
  };
}

var dateFormats$1 = {
  full: 'EEEE, MMMM do, y',
  long: 'MMMM do, y',
  medium: 'MMM d, y',
  short: 'MM/dd/yyyy'
};
var timeFormats$1 = {
  full: 'h:mm:ss a zzzz',
  long: 'h:mm:ss a z',
  medium: 'h:mm:ss a',
  short: 'h:mm a'
};
var dateTimeFormats$1 = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: '{{date}}, {{time}}',
  short: '{{date}}, {{time}}'
};
var formatLong$1 = {
  date: buildFormatLongFn$1({
    formats: dateFormats$1,
    defaultWidth: 'full'
  }),
  time: buildFormatLongFn$1({
    formats: timeFormats$1,
    defaultWidth: 'full'
  }),
  dateTime: buildFormatLongFn$1({
    formats: dateTimeFormats$1,
    defaultWidth: 'full'
  })
};
var formatRelativeLocale$1 = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: 'P'
};

function formatRelative$1(token, _date, _baseDate, _options) {
  return formatRelativeLocale$1[token];
}

function buildLocalizeFn$1(args) {
  return function (dirtyIndex, dirtyOptions) {
    var options = dirtyOptions || {};
    var context = options.context ? String(options.context) : 'standalone';
    var valuesArray;

    if (context === 'formatting' && args.formattingValues) {
      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      var width = options.width ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      var _defaultWidth = args.defaultWidth;

      var _width = options.width ? String(options.width) : args.defaultWidth;

      valuesArray = args.values[_width] || args.values[_defaultWidth];
    }

    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;
    return valuesArray[index];
  };
}

var eraValues$1 = {
  narrow: ['B', 'A'],
  abbreviated: ['BC', 'AD'],
  wide: ['Before Christ', 'Anno Domini']
};
var quarterValues$1 = {
  narrow: ['1', '2', '3', '4'],
  abbreviated: ['Q1', 'Q2', 'Q3', 'Q4'],
  wide: ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter'] // Note: in English, the names of days of the week and months are capitalized.
  // If you are making a new locale based on this one, check if the same is true for the language you're working on.
  // Generally, formatted dates should look like they are in the middle of a sentence,
  // e.g. in Spanish language the weekdays and months should be in the lowercase.

};
var monthValues$1 = {
  narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],
  abbreviated: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
  wide: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
};
var dayValues$1 = {
  narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],
  short: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
  abbreviated: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
  wide: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
};
var dayPeriodValues$1 = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  }
};
var formattingDayPeriodValues$1 = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  }
};

function ordinalNumber$1(dirtyNumber, _dirtyOptions) {
  var number = Number(dirtyNumber); // If ordinal numbers depend on context, for example,
  // if they are different for different grammatical genders,
  // use `options.unit`:
  //
  //   var options = dirtyOptions || {}
  //   var unit = String(options.unit)
  //
  // where `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',
  // 'day', 'hour', 'minute', 'second'

  var rem100 = number % 100;

  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + 'st';

      case 2:
        return number + 'nd';

      case 3:
        return number + 'rd';
    }
  }

  return number + 'th';
}

var localize$1 = {
  ordinalNumber: ordinalNumber$1,
  era: buildLocalizeFn$1({
    values: eraValues$1,
    defaultWidth: 'wide'
  }),
  quarter: buildLocalizeFn$1({
    values: quarterValues$1,
    defaultWidth: 'wide',
    argumentCallback: function (quarter) {
      return Number(quarter) - 1;
    }
  }),
  month: buildLocalizeFn$1({
    values: monthValues$1,
    defaultWidth: 'wide'
  }),
  day: buildLocalizeFn$1({
    values: dayValues$1,
    defaultWidth: 'wide'
  }),
  dayPeriod: buildLocalizeFn$1({
    values: dayPeriodValues$1,
    defaultWidth: 'wide',
    formattingValues: formattingDayPeriodValues$1,
    defaultFormattingWidth: 'wide'
  })
};

function buildMatchPatternFn$1(args) {
  return function (dirtyString, dirtyOptions) {
    var string = String(dirtyString);
    var options = dirtyOptions || {};
    var matchResult = string.match(args.matchPattern);

    if (!matchResult) {
      return null;
    }

    var matchedString = matchResult[0];
    var parseResult = string.match(args.parsePattern);

    if (!parseResult) {
      return null;
    }

    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    return {
      value: value,
      rest: string.slice(matchedString.length)
    };
  };
}

function buildMatchFn$1(args) {
  return function (dirtyString, dirtyOptions) {
    var string = String(dirtyString);
    var options = dirtyOptions || {};
    var width = options.width;
    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    var matchResult = string.match(matchPattern);

    if (!matchResult) {
      return null;
    }

    var matchedString = matchResult[0];
    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    var value;

    if (Object.prototype.toString.call(parsePatterns) === '[object Array]') {
      value = findIndex$1(parsePatterns, function (pattern) {
        return pattern.test(matchedString);
      });
    } else {
      value = findKey$1(parsePatterns, function (pattern) {
        return pattern.test(matchedString);
      });
    }

    value = args.valueCallback ? args.valueCallback(value) : value;
    value = options.valueCallback ? options.valueCallback(value) : value;
    return {
      value: value,
      rest: string.slice(matchedString.length)
    };
  };
}

function findKey$1(object, predicate) {
  for (var key in object) {
    if (object.hasOwnProperty(key) && predicate(object[key])) {
      return key;
    }
  }
}

function findIndex$1(array, predicate) {
  for (var key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
}

var matchOrdinalNumberPattern$1 = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern$1 = /\d+/i;
var matchEraPatterns$1 = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns$1 = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns$1 = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns$1 = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns$1 = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns$1 = {
  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],
  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]
};
var matchDayPatterns$1 = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns$1 = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns$1 = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns$1 = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match$1 = {
  ordinalNumber: buildMatchPatternFn$1({
    matchPattern: matchOrdinalNumberPattern$1,
    parsePattern: parseOrdinalNumberPattern$1,
    valueCallback: function (value) {
      return parseInt(value, 10);
    }
  }),
  era: buildMatchFn$1({
    matchPatterns: matchEraPatterns$1,
    defaultMatchWidth: 'wide',
    parsePatterns: parseEraPatterns$1,
    defaultParseWidth: 'any'
  }),
  quarter: buildMatchFn$1({
    matchPatterns: matchQuarterPatterns$1,
    defaultMatchWidth: 'wide',
    parsePatterns: parseQuarterPatterns$1,
    defaultParseWidth: 'any',
    valueCallback: function (index) {
      return index + 1;
    }
  }),
  month: buildMatchFn$1({
    matchPatterns: matchMonthPatterns$1,
    defaultMatchWidth: 'wide',
    parsePatterns: parseMonthPatterns$1,
    defaultParseWidth: 'any'
  }),
  day: buildMatchFn$1({
    matchPatterns: matchDayPatterns$1,
    defaultMatchWidth: 'wide',
    parsePatterns: parseDayPatterns$1,
    defaultParseWidth: 'any'
  }),
  dayPeriod: buildMatchFn$1({
    matchPatterns: matchDayPeriodPatterns$1,
    defaultMatchWidth: 'any',
    parsePatterns: parseDayPeriodPatterns$1,
    defaultParseWidth: 'any'
  })
};
/**
 * @type {Locale}
 * @category Locales
 * @summary English locale (United States).
 * @language English
 * @iso-639-2 eng
 * @author Sasha Koss [@kossnocorp]{@link https://github.com/kossnocorp}
 * @author Lesha Koss [@leshakoss]{@link https://github.com/leshakoss}
 */

var locale$1 = {
  code: 'en-US',
  formatDistance: formatDistance$1,
  formatLong: formatLong$1,
  formatRelative: formatRelative$1,
  localize: localize$1,
  match: match$1,
  options: {
    weekStartsOn: 0
    /* Sunday */
    ,
    firstWeekContainsDate: 1
  }
};
var defaultLocale$1 = locale$1;

var LocalizationContext = /*#__PURE__*/React__default__default["default"].createContext({
  stringSet: getStringSet$1('en'),
  dateLocale: defaultLocale$1
});

var LocalizationProvider = function LocalizationProvider(props) {
  var children = props.children;
  return /*#__PURE__*/React__default__default["default"].createElement(LocalizationContext.Provider, {
    value: props
  }, children);
};

var useLocalization = function useLocalization() {
  return React__default__default["default"].useContext(LocalizationContext);
};

var INIT_SDK = 'INIT_SDK';
var SET_SDK_LOADING = 'SET_SDK_LOADING';
var RESET_SDK = 'RESET_SDK';
var SDK_ERROR = 'SDK_ERROR';
var APP_VERSION_STRING = '3.1.3';

var disconnectSdk = function disconnectSdk(_ref) {
  var sdkDispatcher = _ref.sdkDispatcher,
      userDispatcher = _ref.userDispatcher,
      sdk = _ref.sdk,
      onDisconnect = _ref.onDisconnect;
  sdkDispatcher({
    type: SET_SDK_LOADING,
    payload: true
  });

  if (sdk && sdk.disconnect) {
    sdk.disconnect().then(function () {
      sdkDispatcher({
        type: RESET_SDK
      });
      userDispatcher({
        type: RESET_USER
      });
    }).finally(function () {
      onDisconnect();
    });
  } else {
    onDisconnect();
  }
};

var handleConnection = function handleConnection(_ref2, dispatchers) {
  var userId = _ref2.userId,
      appId = _ref2.appId,
      nickname = _ref2.nickname,
      profileUrl = _ref2.profileUrl,
      accessToken = _ref2.accessToken,
      configureSession = _ref2.configureSession,
      customApiHost = _ref2.customApiHost,
      customWebSocketHost = _ref2.customWebSocketHost,
      sdk = _ref2.sdk,
      logger = _ref2.logger;
  var sdkDispatcher = dispatchers.sdkDispatcher,
      userDispatcher = dispatchers.userDispatcher;
  disconnectSdk({
    sdkDispatcher: sdkDispatcher,
    userDispatcher: userDispatcher,
    sdk: sdk,
    logger: logger,
    onDisconnect: function onDisconnect() {
      logger.info('Setup connection');
      var sessionHandler = null;
      sdkDispatcher({
        type: SET_SDK_LOADING,
        payload: true
      });

      if (userId && appId) {
        var params = {
          appId: appId,
          modules: [new $r(), new Nn$1()]
        };

        if (customApiHost) {
          params.customApiHost = customApiHost;
        }

        if (customWebSocketHost) {
          params.customWebSocketHost = customWebSocketHost;
        }

        var newSdk = Fn$1.init(params);

        if (configureSession && typeof configureSession === 'function') {
          sessionHandler = configureSession(newSdk);
          newSdk.setSessionHandler(sessionHandler);
        } // to check if code is released version from rollup and *not from storybook*
        // see rollup config file


        {
          newSdk.addExtension('sb_uikit', APP_VERSION_STRING);
        }

        var connectCbSucess = function connectCbSucess(user) {
          sdkDispatcher({
            type: INIT_SDK,
            payload: newSdk
          });
          userDispatcher({
            type: INIT_USER,
            payload: user
          }); // use nickname/profileUrl if provided
          // or set userID as nickname

          if ((nickname !== user.nickname || profileUrl !== user.profileUrl) && !(isTextuallyNull(nickname) && isTextuallyNull(profileUrl))) {
            newSdk.updateCurrentUserInfo({
              nickname: nickname || user.nickname,
              profileUrl: profileUrl || user.profileUrl
            }).then(function (namedUser) {
              userDispatcher({
                type: UPDATE_USER_INFO,
                payload: namedUser
              });
            });
          }
        };

        var connectCbError = function connectCbError(e) {
          logger.error('Connection failed', "".concat(e));
          sdkDispatcher({
            type: RESET_SDK
          });
          sdkDispatcher({
            type: RESET_USER
          });
          sdkDispatcher({
            type: SDK_ERROR
          });
        };

        if (accessToken) {
          newSdk.connect(userId, accessToken).then(function (res) {
            return connectCbSucess(res);
          }).catch(function (err) {
            return connectCbError(err);
          });
        } else {
          newSdk.connect(userId).then(function (res) {
            return connectCbSucess(res);
          }).catch(function (err) {
            return connectCbError(err);
          });
        }
      } else {
        sdkDispatcher({
          type: SDK_ERROR
        });
        logger.warning('Connection failed', 'UserId or appId missing');
      }
    }
  });
};

var isEmpty$1 = function isEmpty(obj) {
  if (obj === null || obj === undefined) {
    return true;
  }

  for (var prop in obj) {
    if (obj.hasOwnProperty(prop)) {
      return false;
    }
  }

  return JSON.stringify(obj) === JSON.stringify({});
};

var useTheme = function useTheme(overrides) {
  React__default.useLayoutEffect(function () {
    if (!isEmpty$1(overrides)) {
      cssVars({
        variables: __assign({
          '--sendbird-dark-primary-500': '#4d2aa6',
          '--sendbird-dark-primary-400': '#6440C4',
          '--sendbird-dark-primary-300': '#7B53EF',
          '--sendbird-dark-primary-200': '#9E8CF5',
          '--sendbird-dark-primary-100': '#E2DFFF',
          '--sendbird-dark-secondary-500': '#007A7A',
          '--sendbird-dark-secondary-400': '#189A8D',
          '--sendbird-dark-secondary-300': '#2EBA9F',
          '--sendbird-dark-secondary-200': '#6FD6BE',
          '--sendbird-dark-secondary-100': '#AEF2DC',
          '--sendbird-dark-information-100': '#b2d9ff',
          '--sendbird-dark-error-500': '#A30E2D',
          '--sendbird-dark-error-400': '#C11F41',
          '--sendbird-dark-error-300': '#E53157',
          '--sendbird-dark-error-200': '#FF6183',
          '--sendbird-dark-error-100': '#FFABBD',
          '--sendbird-dark-background-700': '#000000',
          '--sendbird-dark-background-600': '#161616',
          '--sendbird-dark-background-500': '#2C2C2C',
          '--sendbird-dark-background-400': '#393939',
          '--sendbird-dark-background-300': '#A8A8A8',
          '--sendbird-dark-background-200': '#D9D9D9',
          '--sendbird-dark-background-100': '#F0F0F0',
          '--sendbird-dark-background-50': '#FFFFFF',
          '--sendbird-dark-overlay': 'rgba(0, 0, 0, 0.32)',
          '--sendbird-dark-onlight-01': 'rgba(0, 0, 0, 0.88)',
          '--sendbird-dark-onlight-02': 'rgba(0, 0, 0, 0.50)',
          '--sendbird-dark-onlight-03': 'rgba(0, 0, 0, 0.38)',
          '--sendbird-dark-onlight-04': 'rgba(0, 0, 0, 0.12)',
          '--sendbird-dark-ondark-01': 'rgba(255, 255, 255, 0.88)',
          '--sendbird-dark-ondark-02': 'rgba(255, 255, 255, 0.50)',
          '--sendbird-dark-ondark-03': 'rgba(255, 255, 255, 0.38)',
          '--sendbird-dark-ondark-04': 'rgba(255, 255, 255, 0.12)',
          '--sendbird-dark-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',
          '--sendbird-dark-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',
          '--sendbird-dark-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',
          '--sendbird-dark-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',
          '--sendbird-dark-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',
          '--sendbird-light-primary-500': '#4d2aa6',
          '--sendbird-light-primary-400': '#6440C4',
          '--sendbird-light-primary-300': '#7B53EF',
          '--sendbird-light-primary-200': '#9E8CF5',
          '--sendbird-light-primary-100': '#E2DFFF',
          '--sendbird-light-secondary-500': '#007A7A',
          '--sendbird-light-secondary-400': '#189A8D',
          '--sendbird-light-secondary-300': '#2EBA9F',
          '--sendbird-light-secondary-200': '#6FD6BE',
          '--sendbird-light-secondary-100': '#AEF2DC',
          '--sendbird-light-information-100': '#b2d9ff',
          '--sendbird-light-error-500': '#A30E2D',
          '--sendbird-light-error-400': '#C11F41',
          '--sendbird-light-error-300': '#E53157',
          '--sendbird-light-error-200': '#FF6183',
          '--sendbird-light-error-100': '#FFABBD',
          '--sendbird-light-background-700': '#000000',
          '--sendbird-light-background-600': '#161616',
          '--sendbird-light-background-500': '#2C2C2C',
          '--sendbird-light-background-400': '#393939',
          '--sendbird-light-background-300': '#A8A8A8',
          '--sendbird-light-background-200': '#D9D9D9',
          '--sendbird-light-background-100': '#F0F0F0',
          '--sendbird-light-background-50': ' #FFFFFF',
          '--sendbird-light-overlay': 'rgba(0, 0, 0, 0.32)',
          '--sendbird-light-onlight-01': 'rgba(0, 0, 0, 0.88)',
          '--sendbird-light-onlight-02': 'rgba(0, 0, 0, 0.50)',
          '--sendbird-light-onlight-03': 'rgba(0, 0, 0, 0.38)',
          '--sendbird-light-onlight-04': 'rgba(0, 0, 0, 0.12)',
          '--sendbird-light-ondark-01': 'rgba(255, 255, 255, 0.88)',
          '--sendbird-light-ondark-02': 'rgba(255, 255, 255, 0.50)',
          '--sendbird-light-ondark-03': 'rgba(255, 255, 255, 0.38)',
          '--sendbird-light-ondark-04': 'rgba(255, 255, 255, 0.12)',
          '--sendbird-light-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',
          '--sendbird-light-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',
          '--sendbird-light-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',
          '--sendbird-light-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',
          '--sendbird-light-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)'
        }, overrides)
      });
    }
  }, [overrides]);
};

var sdkInitialState = {
  initialized: false,
  loading: false,
  sdk: {},
  error: false
};

function reducer$1(state, action) {
  switch (action.type) {
    case SET_SDK_LOADING:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        initialized: false,
        loading: action.payload
      });

    case SDK_ERROR:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        initialized: false,
        loading: false,
        error: true
      });

    case INIT_SDK:
      return {
        sdk: action.payload,
        initialized: true,
        loading: false,
        error: false
      };

    case RESET_SDK:
      return sdkInitialState;

    default:
      return state;
  }
}

var userInitialState = {
  initialized: false,
  loading: false,
  user: {}
};

function reducer$2(state, action) {
  switch (action.type) {
    case INIT_USER:
      return {
        initialized: true,
        loading: false,
        user: action.payload
      };

    case RESET_USER:
      return userInitialState;

    case UPDATE_USER_INFO:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        user: action.payload
      });

    default:
      return state;
  }
}

function useConnectionStatus(sdk, logger) {
  var _useState = React__default.useState(true),
      _useState2 = _slicedToArray(_useState, 2),
      isOnline = _useState2[0],
      setIsOnline = _useState2[1];

  React__default.useEffect(function () {
    var uniqueHandlerId = uuidv4();

    try {
      logger.warning('sdk changed', uniqueHandlerId);
      var handler = new Pe();

      handler.onDisconnected = function () {
        logger.warning('onDisconnected', {
          isOnline: isOnline
        });
      };

      handler.onReconnectStarted = function () {
        setIsOnline(false);
        logger.warning('onReconnectStarted', {
          isOnline: isOnline
        });
      };

      handler.onReconnectSucceeded = function () {
        setIsOnline(true);
        logger.warning('onReconnectSucceeded', {
          isOnline: isOnline
        });
      };

      handler.onReconnectFailed = function () {
        sdk.reconnect();
        logger.warning('onReconnectFailed');
      };

      logger.info('Added ConnectionHandler', uniqueHandlerId);

      if (sdk !== null && sdk !== void 0 && sdk.addConnectionHandler) {
        sdk.addConnectionHandler(uniqueHandlerId, handler);
      }
    } catch (_unused) {//
    }

    return function () {
      try {
        sdk.removeConnectionHandler(uniqueHandlerId);
        logger.info('Removed ConnectionHandler', uniqueHandlerId);
      } catch (_unused2) {//
      }
    };
  }, [sdk]);
  React__default.useEffect(function () {
    var tryReconnect = function tryReconnect() {
      try {
        logger.warning('Try reconnecting SDK');

        if (sdk.connectionState !== 'OPEN') {
          // connection is not broken yet
          sdk.reconnect();
        }
      } catch (_unused3) {//
      }
    }; // addEventListener version


    window.addEventListener('online', tryReconnect);
    return function () {
      window.removeEventListener('online', tryReconnect);
    };
  }, [sdk]); // add offline-class to body

  React__default.useEffect(function () {
    var body = document.querySelector('body');

    if (!isOnline) {
      try {
        body.classList.add('sendbird__offline');
        logger.info('Added class sendbird__offline to body');
      } catch (e) {//
      }
    } else {
      try {
        body.classList.remove('sendbird__offline');
        logger.info('Removed class sendbird__offline from body');
      } catch (e) {//
      }
    }
  }, [isOnline]);
  return isOnline;
} // Logger, pretty much explains it
// in SendbirdProvider
// const [logger, setLogger] = useState(LoggerFactory(logLevel));


var LOG_LEVELS = {
  DEBUG: 'debug',
  WARNING: 'warning',
  ERROR: 'error',
  INFO: 'info',
  ALL: 'all'
};

var colorLog = function colorLog(level) {
  switch (level) {
    case LOG_LEVELS.WARNING:
      return 'color: Orange';

    case LOG_LEVELS.ERROR:
      return 'color: Red';

    default:
      return 'color: Gray';
  }
};

var printLog = function printLog(_ref) {
  var level = _ref.level,
      title = _ref.title,
      _ref$description = _ref.description,
      description = _ref$description === void 0 ? '' : _ref$description; // eslint-disable-next-line no-console

  console.log("%c SendbirdUIKit | ".concat(level, " | ").concat(new Date().toISOString(), " | ").concat(title, " ").concat(description && '|'), colorLog(level), description);
};

var getDefaultLogger = function getDefaultLogger() {
  return {
    info: function info() {},
    error: function error() {},
    warning: function warning() {}
  };
};

var LoggerFactory = function LoggerFactory(lvl, customInterface) {
  var logInterface = customInterface || printLog;
  var lvlArray = Array.isArray(lvl) ? lvl : [lvl];

  var applyLog = function applyLog(lgLvl) {
    return function (title, description) {
      return logInterface({
        level: lgLvl,
        title: title,
        description: description
      });
    };
  };

  var logger = lvlArray.reduce(function (accumulator, currentLvl) {
    if (currentLvl === LOG_LEVELS.DEBUG || currentLvl === LOG_LEVELS.ALL) {
      return _objectSpread2(_objectSpread2({}, accumulator), {}, {
        info: applyLog(LOG_LEVELS.INFO),
        error: applyLog(LOG_LEVELS.ERROR),
        warning: applyLog(LOG_LEVELS.WARNING)
      });
    }

    if (currentLvl === LOG_LEVELS.INFO) {
      return _objectSpread2(_objectSpread2({}, accumulator), {}, {
        info: applyLog(LOG_LEVELS.INFO)
      });
    }

    if (currentLvl === LOG_LEVELS.ERROR) {
      return _objectSpread2(_objectSpread2({}, accumulator), {}, {
        error: applyLog(LOG_LEVELS.ERROR)
      });
    }

    if (currentLvl === LOG_LEVELS.WARNING) {
      return _objectSpread2(_objectSpread2({}, accumulator), {}, {
        warning: applyLog(LOG_LEVELS.WARNING)
      });
    }

    return _objectSpread2({}, accumulator);
  }, getDefaultLogger());
  return logger;
}; // https://davidwalsh.name/pubsub-javascript
// we use pubsub to sync events between multiple components(example - ChannelList, Channel)
// for example, if customer sends a message from their custom component
// without pubsub,we would not be able to listen to it
// in our ChannelList or Conversation


var pubSubFactory = function () {
  var topics = {};
  var hOP = topics.hasOwnProperty;
  return {
    __getTopics: function __getTopics() {
      return topics;
    },
    subscribe: function subscribe(topic, listener) {
      // Create the topic's object if not yet created
      if (!hOP.call(topics, topic)) {
        topics[topic] = [];
      } // Add the listener to queue


      var index = topics[topic].push(listener) - 1; // Provide handle back for removal of topic

      return {
        remove: function remove() {
          delete topics[topic][index];
        }
      };
    },
    publish: function publish(topic, info) {
      // If the topic doesn't exist, or there's no listeners in queue, just leave
      if (!hOP.call(topics, topic)) {
        return;
      } // Cycle through topics queue, fire!


      topics[topic].forEach(function (item) {
        item(info !== undefined ? info : {});
      });
    }
  };
};

function useAppendDomNode() {
  var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var rootSelector = arguments.length > 1 ? arguments[1] : undefined;
  React__default.useEffect(function () {
    var root = document.querySelector(rootSelector);
    ids.forEach(function (id) {
      var elem = document.createElement('div');
      elem.setAttribute('id', id);
      root.appendChild(elem);
    });
    return function () {
      ids.forEach(function (id) {
        var target = document.getElementById(id);

        if (target) {
          root.removeChild(target);
        }
      });
    };
  }, []);
}

function Sendbird(props) {
  var userId = props.userId,
      dateLocale = props.dateLocale,
      appId = props.appId,
      accessToken = props.accessToken,
      configureSession = props.configureSession,
      customApiHost = props.customApiHost,
      customWebSocketHost = props.customWebSocketHost,
      children = props.children,
      disableUserProfile = props.disableUserProfile,
      renderUserProfile = props.renderUserProfile,
      allowProfileEdit = props.allowProfileEdit,
      theme = props.theme,
      nickname = props.nickname,
      profileUrl = props.profileUrl,
      userListQuery = props.userListQuery,
      _props$config = props.config,
      config = _props$config === void 0 ? {} : _props$config,
      colorSet = props.colorSet,
      stringSet = props.stringSet,
      imageCompression = props.imageCompression,
      isReactionEnabled = props.isReactionEnabled,
      isMentionEnabled = props.isMentionEnabled,
      isTypingIndicatorEnabledOnChannelList = props.isTypingIndicatorEnabledOnChannelList,
      isMessageReceiptStatusEnabledOnChannelList = props.isMessageReceiptStatusEnabledOnChannelList;
  var _config$logLevel = config.logLevel,
      logLevel = _config$logLevel === void 0 ? '' : _config$logLevel,
      _config$userMention = config.userMention,
      userMention = _config$userMention === void 0 ? {} : _config$userMention,
      _config$isREMUnitEnab = config.isREMUnitEnabled,
      isREMUnitEnabled = _config$isREMUnitEnab === void 0 ? false : _config$isREMUnitEnab;

  var _useState = React__default.useState(LoggerFactory(logLevel)),
      _useState2 = _slicedToArray(_useState, 2),
      logger = _useState2[0],
      setLogger = _useState2[1];

  var _useState3 = React__default.useState(),
      _useState4 = _slicedToArray(_useState3, 2),
      pubSub = _useState4[0],
      setPubSub = _useState4[1];

  var _useReducer = React__default.useReducer(reducer$1, sdkInitialState),
      _useReducer2 = _slicedToArray(_useReducer, 2),
      sdkStore = _useReducer2[0],
      sdkDispatcher = _useReducer2[1];

  var _useReducer3 = React__default.useReducer(reducer$2, userInitialState),
      _useReducer4 = _slicedToArray(_useReducer3, 2),
      userStore = _useReducer4[0],
      userDispatcher = _useReducer4[1];

  useTheme(colorSet);
  React__default.useEffect(function () {
    setPubSub(pubSubFactory());
  }, []);
  React__default.useEffect(function () {
    logger.info('App Init'); // dispatch action

    handleConnection({
      userId: userId,
      appId: appId,
      accessToken: accessToken,
      sdkStore: sdkStore,
      nickname: nickname,
      profileUrl: profileUrl,
      configureSession: configureSession,
      customApiHost: customApiHost,
      customWebSocketHost: customWebSocketHost,
      sdk: sdkStore.sdk,
      logger: logger
    }, {
      sdkDispatcher: sdkDispatcher,
      userDispatcher: userDispatcher
    });
  }, [userId, appId, accessToken]); // to create a pubsub to communicate between parent and child

  React__default.useEffect(function () {
    setLogger(LoggerFactory(logLevel));
  }, [logLevel]);
  useAppendDomNode(['sendbird-modal-root', 'sendbird-dropdown-portal', 'sendbird-emoji-list-portal'], 'body'); // should move to reducer

  var _useState5 = React__default.useState(theme),
      _useState6 = _slicedToArray(_useState5, 2),
      currenttheme = _useState6[0],
      setCurrenttheme = _useState6[1];

  React__default.useEffect(function () {
    setCurrenttheme(theme);
  }, [theme]);
  React__default.useEffect(function () {
    var body = document.querySelector('body');
    body.classList.remove('sendbird-experimental__rem__units');

    if (isREMUnitEnabled) {
      body.classList.add('sendbird-experimental__rem__units');
    }
  }, [isREMUnitEnabled]); // add-remove theme from body

  React__default.useEffect(function () {
    logger.info('Setup theme', "Theme: ".concat(currenttheme));

    try {
      var body = document.querySelector('body');
      body.classList.remove('sendbird-theme--light');
      body.classList.remove('sendbird-theme--dark');
      body.classList.add("sendbird-theme--".concat(currenttheme || 'light'));
      logger.info('Finish setup theme'); // eslint-disable-next-line no-empty
    } catch (e) {
      logger.warning('Setup theme failed', "".concat(e));
    }

    return function () {
      try {
        var _body = document.querySelector('body');

        _body.classList.remove('sendbird-theme--light');

        _body.classList.remove('sendbird-theme--dark'); // eslint-disable-next-line no-empty

      } catch (_unused) {}
    };
  }, [currenttheme]);
  var isOnline = useConnectionStatus(sdkStore.sdk, logger);
  var localeStringSet = React__default__default["default"].useMemo(function () {
    if (!stringSet) {
      return getStringSet$1('en');
    }

    return _objectSpread2(_objectSpread2({}, getStringSet$1('en')), stringSet);
  }, [stringSet]);
  return /*#__PURE__*/React__default__default["default"].createElement(SendbirdSdkContext.Provider, {
    value: {
      stores: {
        sdkStore: sdkStore,
        userStore: userStore
      },
      dispatchers: {
        sdkDispatcher: sdkDispatcher,
        userDispatcher: userDispatcher,
        reconnect: function reconnect() {
          handleConnection({
            userId: userId,
            appId: appId,
            accessToken: accessToken,
            sdkStore: sdkStore,
            nickname: nickname,
            profileUrl: profileUrl,
            logger: logger,
            sdk: sdkStore.sdk
          }, {
            sdkDispatcher: sdkDispatcher,
            userDispatcher: userDispatcher
          });
        }
      },
      config: {
        disableUserProfile: disableUserProfile,
        renderUserProfile: renderUserProfile,
        allowProfileEdit: allowProfileEdit,
        isOnline: isOnline,
        userId: userId,
        appId: appId,
        accessToken: accessToken,
        theme: currenttheme,
        setCurrenttheme: setCurrenttheme,
        userListQuery: userListQuery,
        logger: logger,
        pubSub: pubSub,
        imageCompression: imageCompression,
        isReactionEnabled: isReactionEnabled,
        isMentionEnabled: isMentionEnabled || false,
        userMention: {
          maxMentionCount: (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount) || 10,
          maxSuggestionCount: (userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount) || 15
        },
        isTypingIndicatorEnabledOnChannelList: isTypingIndicatorEnabledOnChannelList,
        isMessageReceiptStatusEnabledOnChannelList: isMessageReceiptStatusEnabledOnChannelList
      }
    }
  }, /*#__PURE__*/React__default__default["default"].createElement(LocalizationProvider, {
    stringSet: localeStringSet,
    dateLocale: dateLocale
  }, children));
}

Sendbird.propTypes = {
  userId: propTypes.exports.string.isRequired,
  appId: propTypes.exports.string.isRequired,
  accessToken: propTypes.exports.string,
  customApiHost: propTypes.exports.string,
  customWebSocketHost: propTypes.exports.string,
  configureSession: propTypes.exports.func,
  children: propTypes.exports.oneOfType([propTypes.exports.element, propTypes.exports.arrayOf(propTypes.exports.element), propTypes.exports.any]).isRequired,
  theme: propTypes.exports.string,
  nickname: propTypes.exports.string,
  dateLocale: propTypes.exports.shape({}),
  profileUrl: propTypes.exports.string,
  disableUserProfile: propTypes.exports.bool,
  renderUserProfile: propTypes.exports.func,
  allowProfileEdit: propTypes.exports.bool,
  userListQuery: propTypes.exports.func,
  config: propTypes.exports.shape({
    // None Error Warning Info 'All/Debug'
    logLevel: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.arrayOf(propTypes.exports.string)]),
    pubSub: propTypes.exports.shape({
      subscribe: propTypes.exports.func,
      publish: propTypes.exports.func
    }),
    userMention: propTypes.exports.shape({
      maxMentionCount: propTypes.exports.number,
      maxSuggestionCount: propTypes.exports.number
    }),
    isREMUnitEnabled: propTypes.exports.bool
  }),
  stringSet: propTypes.exports.objectOf(propTypes.exports.string),
  colorSet: propTypes.exports.objectOf(propTypes.exports.string),
  isReactionEnabled: propTypes.exports.bool,
  isMentionEnabled: propTypes.exports.bool,
  imageCompression: propTypes.exports.shape({
    compressionRate: propTypes.exports.number,
    resizingWidth: propTypes.exports.oneOfType([propTypes.exports.number, propTypes.exports.string]),
    resizingHeight: propTypes.exports.oneOfType([propTypes.exports.number, propTypes.exports.string])
  }),
  isTypingIndicatorEnabledOnChannelList: propTypes.exports.bool,
  isMessageReceiptStatusEnabledOnChannelList: propTypes.exports.bool
};
Sendbird.defaultProps = {
  accessToken: '',
  customApiHost: null,
  customWebSocketHost: null,
  configureSession: null,
  theme: 'light',
  nickname: '',
  dateLocale: null,
  profileUrl: '',
  disableUserProfile: false,
  renderUserProfile: null,
  allowProfileEdit: false,
  userListQuery: null,
  config: {},
  stringSet: null,
  colorSet: null,
  imageCompression: {},
  isReactionEnabled: true,
  isMentionEnabled: false,
  isTypingIndicatorEnabledOnChannelList: false,
  isMessageReceiptStatusEnabledOnChannelList: false
};

var css_248z$d = ".sendbird-chat-header {\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  height: 64px;\n  min-height: 64px;\n  padding-left: 20px;\n  padding-right: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-chat-header {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-chat-header {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-chat-header__left {\n    margin-right: 24px; }\n  .sendbird-chat-header__left, .sendbird-chat-header__right {\n    overflow: hidden;\n    display: flex;\n    flex-direction: row;\n    align-items: center; }\n  .sendbird-chat-header .sendbird-chat-header__left__title {\n    margin-left: 8px;\n    margin-right: 16px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    max-width: 780px; }\n  .sendbird-chat-header .sendbird-chat-header__left__subtitle {\n    max-width: 240px;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .sendbird-chat-header .sendbird-chat-header__right__mute {\n    margin-right: 26px; }\n  .sendbird-chat-header .sendbird-iconbutton--pressed {\n    background-color: inherit; }\n  .sendbird-chat-header .sendbird-chat-header__right__info {\n    margin-left: 16px; }\n\n.sendbird-openchannel-conversation-header {\n  position: relative;\n  min-height: 64px;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-openchannel-conversation-header {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-openchannel-conversation-header {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04); }\n  .sendbird-openchannel-conversation-header .sendbird-openchannel-conversation-header__left__title {\n    white-space: nowrap;\n    overflow-x: hidden;\n    text-overflow: ellipsis;\n    max-width: calc(100% - 120px); }\n  .sendbird-openchannel-conversation-header__left [class*=sendbird-openchannel-conversation-header__left__cover-image] {\n    position: absolute;\n    left: 20px;\n    top: 16px; }\n  .sendbird-openchannel-conversation-header__left__title {\n    position: absolute;\n    left: 60px;\n    top: 12px; }\n  .sendbird-openchannel-conversation-header__left__sub-title {\n    position: absolute;\n    left: 60px;\n    top: 36px; }\n  .sendbird-openchannel-conversation-header__right {\n    position: absolute;\n    top: 0px;\n    right: 0px;\n    width: 64px;\n    height: 64px; }\n    .sendbird-openchannel-conversation-header__right__trigger {\n      position: absolute;\n      top: 16px;\n      right: 16px;\n      display: flex;\n      align-items: center;\n      justify-content: center; }\n\n.sendbird-openchannel-conversation-header__left__cover-image--icon {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%; }\n  .sendbird-theme--light .sendbird-openchannel-conversation-header__left__cover-image--icon {\n    background-color: var(--sendbird-light-background-300); }\n  .sendbird-theme--dark .sendbird-openchannel-conversation-header__left__cover-image--icon {\n    background-color: var(--sendbird-dark-background-300); }\n\n.sendbird__offline .sendbird-channel-preview {\n  cursor: not-allowed; }\n\n.sendbird-channel-preview {\n  position: relative;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: 320px;\n  height: 80px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  padding: 12px 16px 12px 16px; }\n  .sendbird-theme--light .sendbird-channel-preview {\n    border-bottom: solid 1px var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-channel-preview {\n    border-bottom: solid 1px var(--sendbird-dark-ondark-04); }\n  .sendbird-channel-preview:focus {\n    outline: none; }\n  .sendbird-channel-preview .sendbird-channel-preview__avatar {\n    width: 56px;\n    height: 56px; }\n  .sendbird-channel-preview .sendbird-channel-preview__content {\n    width: 100%;\n    height: 100%;\n    margin-left: 16px; }\n    .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper {\n      display: flex;\n      justify-content: space-between;\n      width: 216px;\n      height: 16px; }\n      .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__header {\n        display: flex;\n        justify-content: flex-start;\n        overflow: hidden;\n        text-overflow: ellipsis; }\n        .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__header .sendbird-channel-preview__content__upper__header__broadcast-icon {\n          padding-right: 4px; }\n        .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__header .sendbird-channel-preview__content__upper__header__channel-name {\n          overflow: hidden;\n          text-overflow: ellipsis;\n          max-width: 128px;\n          word-break: break-all;\n          white-space: nowrap; }\n        .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__header .sendbird-channel-preview__content__upper__header__total-members {\n          margin-top: 2px;\n          margin-left: 4px; }\n        .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__header .sendbird-channel-preview__content__upper__header__frozen-icon {\n          padding-left: 4px; }\n      .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__last-message-at {\n        margin-left: 4px;\n        margin-bottom: 4px;\n        white-space: nowrap; }\n    .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__lower {\n      margin-top: 8px;\n      width: 216px;\n      height: 32px;\n      display: flex;\n      justify-content: space-between; }\n      .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__lower .sendbird-channel-preview__content__lower__last-message {\n        overflow: hidden;\n        text-overflow: ellipsis; }\n      .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__lower .sendbird-channel-preview__content__lower__unread-message-count {\n        margin-left: 8px;\n        margin-bottom: 12px; }\n  .sendbird-channel-preview .sendbird-channel-preview__action {\n    position: absolute;\n    top: 12px;\n    right: 12px;\n    display: inline-block; }\n    .sendbird-channel-preview .sendbird-channel-preview__action .sendbird-iconbutton {\n      display: none; }\n  .sendbird-theme--light .sendbird-channel-preview:hover {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-channel-preview:hover {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-channel-preview:hover .sendbird-channel-preview__action .sendbird-iconbutton {\n    display: inline-block; }\n  .sendbird-channel-preview:hover .sendbird-channel-preview__content__upper__last-message-at {\n    display: none; }\n  .sendbird-channel-preview:hover .sendbird-channel-preview__content__lower__unread-message-count {\n    display: none; }\n\n.sendbird-channel-preview--active {\n  padding: 12px 16px 12px 12px; }\n  .sendbird-theme--light .sendbird-channel-preview--active {\n    border-left: solid 4px var(--sendbird-light-primary-300);\n    border-bottom: solid 1px var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-primary-100); }\n  .sendbird-theme--dark .sendbird-channel-preview--active {\n    border-left: solid 4px var(--sendbird-dark-primary-200);\n    border-bottom: solid 1px var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-700); }\n  .sendbird-theme--light .sendbird-channel-preview--active .sendbird-channel-preview__content__upper__header__channel-name {\n    color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-channel-preview--active .sendbird-channel-preview__content__upper__header__channel-name {\n    color: var(--sendbird-dark-primary-200); }\n\n@import url(\"https://fonts.googleapis.com/css?family=Open+Sans:400,600,700&display=swap\");\n:root {\n  --sendbird-light-primary-500: #491389;\n  --sendbird-light-primary-400: #6211c8;\n  --sendbird-light-primary-300: #742ddd;\n  --sendbird-light-primary-200: #c2a9fa;\n  --sendbird-light-primary-100: #dbd1ff;\n  --sendbird-light-secondary-500: #066858;\n  --sendbird-light-secondary-400: #027d69;\n  --sendbird-light-secondary-300: #259c72;\n  --sendbird-light-secondary-200: #69c085;\n  --sendbird-light-secondary-100: #a8e2ab;\n  --sendbird-light-information-100: #adc9ff;\n  --sendbird-highlight-100: #fff2b6;\n  --sendbird-light-error-500: #9d091e;\n  --sendbird-light-error-400: #bf0711;\n  --sendbird-light-error-300: #de360b;\n  --sendbird-light-error-200: #f66161;\n  --sendbird-light-error-100: #fdaaaa;\n  --sendbird-light-background-700: #000000;\n  --sendbird-light-background-600: #161616;\n  --sendbird-light-background-500: #2C2C2C;\n  --sendbird-light-background-400: #393939;\n  --sendbird-light-background-300: #bdbdbd;\n  --sendbird-light-background-200: #e0e0e0;\n  --sendbird-light-background-100: #eeeeee;\n  --sendbird-light-background-50:  #FFFFFF;\n  --sendbird-light-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-light-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-light-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-light-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-light-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-light-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-light-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-light-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-light-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-light-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-light-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12); }\n\n:root {\n  --sendbird-dark-primary-500: #491389;\n  --sendbird-dark-primary-400: #6211c8;\n  --sendbird-dark-primary-300: #742ddd;\n  --sendbird-dark-primary-200: #c2a9fa;\n  --sendbird-dark-primary-100: #dbd1ff;\n  --sendbird-dark-secondary-500: #066858;\n  --sendbird-dark-secondary-400: #027d69;\n  --sendbird-dark-secondary-300: #259c72;\n  --sendbird-dark-secondary-200: #69c085;\n  --sendbird-dark-secondary-100: #a8e2ab;\n  --sendbird-dark-information-100: #adc9ff;\n  --sendbird-highlight-100: #fff2b6;\n  --sendbird-dark-error-500: #9d091e;\n  --sendbird-dark-error-400: #bf0711;\n  --sendbird-dark-error-300: #de360b;\n  --sendbird-dark-error-200: #f66161;\n  --sendbird-dark-error-100: #fdaaaa;\n  --sendbird-dark-background-700: #000000;\n  --sendbird-dark-background-600: #161616;\n  --sendbird-dark-background-500: #2C2C2C;\n  --sendbird-dark-background-400: #393939;\n  --sendbird-dark-background-300: #bdbdbd;\n  --sendbird-dark-background-200: #e0e0e0;\n  --sendbird-dark-background-100: #eeeeee;\n  --sendbird-dark-background-50:  #FFFFFF;\n  --sendbird-dark-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-dark-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-dark-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-dark-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-dark-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-dark-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-dark-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-dark-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-dark-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-dark-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-dark-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12); }\n\n:root {\n  --sendbird-iconbutton-color: #825eeb;\n  --sendbird-message-input-border-active: #7B53EF;\n  --sendbird-selected-reaction-button-border-hover: #9E8CF5;\n  --sendbird-add-reaction-button-border-hover: #9E8CF5;\n  --sendbird-tooltip-background: #000000;\n  --sendbird-tooltip-text-color: rgba(255, 255, 255, 0.88);\n  --sendbird-button-border-focus: #FFFFFF;\n  --sendbird-file-message-icon-background: #FFFFFF;\n  --sendbird-font-family-default: 'Roboto', sans-serif;\n  --sendbird-message-balloon-width: 404px; }\n\n.sendbird-experimental__rem__units .sendbird-label--h-1 {\n  font-size: 1.25rem; }\n\n.sendbird-experimental__rem__units .sendbird-label--h-2 {\n  font-size: 1.125rem; }\n\n.sendbird-experimental__rem__units .sendbird-label--subtitle-1 {\n  font-size: 1rem; }\n\n.sendbird-experimental__rem__units .sendbird-label--subtitle-2 {\n  font-size: .875rem; }\n\n.sendbird-experimental__rem__units .sendbird-label--body-1 {\n  font-size: .875rem; }\n\n.sendbird-experimental__rem__units .sendbird-label--body-2 {\n  font-size: .75rem; }\n\n.sendbird-experimental__rem__units .sendbird-label--button-1 {\n  font-size: .875rem; }\n\n.sendbird-experimental__rem__units .sendbird-label--button-2 {\n  font-size: .875rem; }\n\n.sendbird-experimental__rem__units .sendbird-label--caption-1 {\n  font-size: .875rem; }\n\n.sendbird-experimental__rem__units .sendbird-label--caption-2 {\n  font-size: .75rem; }\n\n.sendbird-experimental__rem__units .sendbird-label--caption-3 {\n  font-size: .75rem; }\n\n.sendbird-experimental__rem__units .sendbird-message-search-pannel .sendbird-message-search-pannel__input__container__input-area {\n  font-size: .875rem; }\n\n.sendbird-experimental__rem__units .sendbird-checkbox {\n  font-size: 1.375rem; }\n\n.sendbird-experimental__rem__units .sendbird-mention-user-label {\n  font-size: .875rem; }\n  .sendbird-experimental__rem__units .sendbird-mention-user-label.purple {\n    font-size: 1.125rem; }\n\n.sendbird-experimental__rem__units .sendbird-message-input .sendbird-message-input--textarea,\n.sendbird-experimental__rem__units .sendbird-message-input .sendbird-message-input--placeholder {\n  font-size: .875rem; }\n\n.sendbird-experimental__rem__units .sendbird-input .sendbird-input__input,\n.sendbird-experimental__rem__units .sendbird-input .sendbird-input__placeholder {\n  font-size: .875rem; }\n\n.sendbird-experimental__rem__units .sendbird-tooltip__text {\n  font-size: .75rem; }\n\n.sendbird-experimental__rem__units .sendbird-quote-message .sendbird-quote-message__replied-to .sendbird-quote-message__replied-to__text {\n  font-size: .75rem; }\n\n.sendbird-experimental__rem__units .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__text-message {\n  font-size: .75rem; }\n\n.sendbird-experimental__rem__units .sendbird-quote-message .sendbird-quote-message__replied-message__file-message {\n  font-size: .75rem; }\n\n.sendbird-channel-list {\n  width: 320px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-channel-list {\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-channel-list {\n    background-color: var(--sendbird-dark-background-600); }\n\n.sendbird-channel-list__header {\n  height: 64px;\n  min-height: 64px; }\n\n.sendbird-channel-list__body {\n  flex: 1 1 0;\n  -ms-flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden; }\n\n[class*=sendbird-label] {\n  font-family: var(--sendbird-font-family-default); }\n\n.sendbird-label--h-1 {\n  font-size: 20px;\n  font-weight: 600;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.4;\n  letter-spacing: -0.2px; }\n\n.sendbird-label--h-2 {\n  font-size: 18px;\n  font-weight: 600;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.2px; }\n\n.sendbird-label--subtitle-1 {\n  font-size: 16px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.38;\n  letter-spacing: -0.2px; }\n\n.sendbird-label--subtitle-2 {\n  font-size: 14px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.14;\n  letter-spacing: -0.2px; }\n\n.sendbird-label--body-1 {\n  font-size: 14px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.43;\n  letter-spacing: normal; }\n\n.sendbird-label--body-2 {\n  font-size: 12px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.33;\n  letter-spacing: normal; }\n\n.sendbird-label--button-1 {\n  font-size: 14px;\n  font-weight: 600;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.43;\n  letter-spacing: normal; }\n\n.sendbird-label--button-2 {\n  font-size: 14px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.43;\n  letter-spacing: normal; }\n\n.sendbird-label--caption-1 {\n  font-size: 14px;\n  font-weight: 600;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.43;\n  letter-spacing: normal; }\n\n.sendbird-label--caption-2 {\n  font-size: 12px;\n  font-weight: bold;\n  font-style: normal;\n  line-height: 1;\n  letter-spacing: normal; }\n\n.sendbird-label--caption-3 {\n  font-size: 12px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1;\n  letter-spacing: normal; }\n\n.sendbird-theme--light .sendbird-label--color-onbackground-1 {\n  color: var(--sendbird-light-onlight-01); }\n\n.sendbird-theme--dark .sendbird-label--color-onbackground-1 {\n  color: var(--sendbird-dark-ondark-01); }\n\n.sendbird-theme--light .sendbird-label--color-onbackground-2 {\n  color: var(--sendbird-light-onlight-02); }\n\n.sendbird-theme--dark .sendbird-label--color-onbackground-2 {\n  color: var(--sendbird-dark-ondark-02); }\n\n.sendbird-theme--light .sendbird-label--color-onbackground-3 {\n  color: var(--sendbird-light-onlight-03); }\n\n.sendbird-theme--dark .sendbird-label--color-onbackground-3 {\n  color: var(--sendbird-dark-ondark-03); }\n\n.sendbird-theme--light .sendbird-label--color-onbackground-4 {\n  color: var(--sendbird-light-onlight-04); }\n\n.sendbird-theme--dark .sendbird-label--color-onbackground-4 {\n  color: var(--sendbird-dark-ondark-04); }\n\n.sendbird-theme--light .sendbird-label--color-oncontent-1 {\n  color: var(--sendbird-light-ondark-01); }\n\n.sendbird-theme--dark .sendbird-label--color-oncontent-1 {\n  color: var(--sendbird-dark-onlight-01); }\n\n.sendbird-theme--light .sendbird-label--color-oncontent-2 {\n  color: var(--sendbird-light-ondark-02); }\n\n.sendbird-theme--dark .sendbird-label--color-oncontent-2 {\n  color: var(--sendbird-dark-onlight-02); }\n\n.sendbird-theme--light .sendbird-label--color-primary {\n  color: var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-label--color-primary {\n  color: var(--sendbird-dark-primary-200); }\n\n.sendbird-theme--light .sendbird-label--color-error {\n  color: var(--sendbird-light-error-300); }\n\n.sendbird-theme--dark .sendbird-label--color-error {\n  color: var(--sendbird-dark-error-200); }\n\n.sendbird-theme--light .sendbird-label--color-secondary-3 {\n  color: var(--sendbird-light-secondary-300); }\n\n.sendbird-theme--dark .sendbird-label--color-secondary-3 {\n  color: var(--sendbird-dark-secondary-200); }\n\n.sendbird-iconbutton {\n  color: var(--sendbird-iconbutton-color);\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  padding: 3px;\n  background-color: transparent;\n  cursor: pointer;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  outline: 0px; }\n  .sendbird-iconbutton .sendbird-iconbutton__inner {\n    height: 100%; }\n    .sendbird-theme--light .sendbird-iconbutton .sendbird-iconbutton__inner svg {\n      fill: var(--sendbird-light-onlight-01); }\n    .sendbird-theme--dark .sendbird-iconbutton .sendbird-iconbutton__inner svg {\n      fill: var(--sendbird-dark-ondark-01); }\n  .sendbird-theme--light .sendbird-iconbutton:hover {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-iconbutton:hover {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-theme--light .sendbird-iconbutton:active {\n    background-color: var(--sendbird-light-background-200); }\n  .sendbird-theme--dark .sendbird-iconbutton:active {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-iconbutton:disabled {\n    cursor: not-allowed !important; }\n    .sendbird-theme--light .sendbird-iconbutton:disabled .sendbird-iconbutton__inner svg, .sendbird-theme--light .sendbird-iconbutton:disabled .sendbird-iconbutton__inner path {\n      fill: var(--sendbird-light-onlight-02); }\n    .sendbird-theme--dark .sendbird-iconbutton:disabled .sendbird-iconbutton__inner svg, .sendbird-theme--dark .sendbird-iconbutton:disabled .sendbird-iconbutton__inner path {\n      fill: var(--sendbird-dark-ondark-02); }\n\n.sendbird-theme--light .sendbird-iconbutton--pressed {\n  background-color: var(--sendbird-light-primary-100); }\n\n.sendbird-theme--dark .sendbird-iconbutton--pressed {\n  background-color: var(--sendbird-dark-background-700); }\n\n.sendbird-channel-header {\n  position: relative;\n  height: 64px;\n  min-height: 64px;\n  width: 320px;\n  padding: 8px 64px 8px 8px;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-channel-header {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-channel-header {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-channel-header.sendbird-channel-header--allow-edit .sendbird-channel-header__title {\n    cursor: pointer; }\n  .sendbird-channel-header .sendbird-channel-header__title {\n    display: flex;\n    flex-direction: row;\n    width: 260px;\n    height: 48px;\n    border-radius: 4px; }\n    .sendbird-theme--light .sendbird-channel-header .sendbird-channel-header__title:hover {\n      background: var(--sendbird-light-background-100); }\n    .sendbird-theme--dark .sendbird-channel-header .sendbird-channel-header__title:hover {\n      background: var(--sendbird-dark-background-500); }\n    .sendbird-channel-header .sendbird-channel-header__title:focus {\n      outline: none; }\n      .sendbird-theme--light .sendbird-channel-header .sendbird-channel-header__title:focus {\n        background: var(--sendbird-light-background-200); }\n      .sendbird-theme--dark .sendbird-channel-header .sendbird-channel-header__title:focus {\n        background: var(--sendbird-dark-background-400); }\n    .sendbird-theme--light .sendbird-channel-header .sendbird-channel-header__title:active {\n      border: solid 2px var(--sendbird-light-primary-300); }\n    .sendbird-theme--dark .sendbird-channel-header .sendbird-channel-header__title:active {\n      border: solid 2px var(--sendbird-dark-primary-200); }\n    .sendbird-channel-header .sendbird-channel-header__title .sendbird-channel-header__title__left {\n      width: 48px;\n      padding: 8px;\n      box-sizing: border-box; }\n    .sendbird-channel-header .sendbird-channel-header__title .sendbird-channel-header__title__right {\n      margin-left: 4px;\n      padding-top: 8px; }\n    .sendbird-channel-header .sendbird-channel-header__title .sendbird-channel-header__title__right__name,\n    .sendbird-channel-header .sendbird-channel-header__title .sendbird-channel-header__title__right__user-id {\n      display: block;\n      max-width: 200px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis; }\n  .sendbird-channel-header .sendbird-channel-header__right-icon {\n    position: absolute;\n    right: 16px;\n    top: 16px; }\n\n.sendbird-image-renderer {\n  overflow: hidden;\n  position: relative; }\n\n.sendbird-image-renderer__hidden-image-loader {\n  display: none; }\n\n.sendbird-icon {\n  display: inline-block; }\n  .sendbird-icon:focus {\n    outline: none; }\n\n.sendbird-theme--light .sendbird-icon-color--primary [class*='fill'] {\n  fill: var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-icon-color--primary [class*='fill'] {\n  fill: var(--sendbird-dark-primary-200); }\n\n.sendbird-theme--light .sendbird-icon-color--primary [class*='stroke'] {\n  stroke: var(--sendbird-light-primary-300);\n  stroke-width: 2px;\n  stroke-linejoin: round; }\n\n.sendbird-theme--dark .sendbird-icon-color--primary [class*='stroke'] {\n  stroke: var(--sendbird-dark-primary-200);\n  stroke-width: 2px;\n  stroke-linejoin: round; }\n\n.sendbird-theme--light .sendbird-icon-color--secondary [class*='fill'] {\n  fill: var(--sendbird-light-secondary-300); }\n\n.sendbird-theme--dark .sendbird-icon-color--secondary [class*='fill'] {\n  fill: var(--sendbird-dark-secondary-200); }\n\n.sendbird-theme--light .sendbird-icon-color--content [class*='fill'] {\n  fill: var(--sendbird-light-ondark-01); }\n\n.sendbird-theme--dark .sendbird-icon-color--content [class*='fill'] {\n  fill: var(--sendbird-dark-onlight-01); }\n\n.sendbird-theme--light .sendbird-icon-color--content-inverse [class*='fill'] {\n  fill: var(--sendbird-light-onlight-01); }\n\n.sendbird-theme--dark .sendbird-icon-color--content-inverse [class*='fill'] {\n  fill: var(--sendbird-dark-ondark-01); }\n\n.sendbird-icon-color--white [class*='fill'] {\n  fill: #ffffff; }\n\n.sendbird-icon-color--gray [class*='fill'] {\n  fill: var(--sendbird-light-onlight-04); }\n\n.sendbird-theme--light .sendbird-icon-color--sent [class*='fill'] {\n  fill: var(--sendbird-light-onlight-03); }\n\n.sendbird-theme--dark .sendbird-icon-color--sent [class*='fill'] {\n  fill: var(--sendbird-dark-ondark-03); }\n\n.sendbird-theme--light .sendbird-icon-color--read [class*='fill'] {\n  fill: var(--sendbird-light-secondary-300); }\n\n.sendbird-theme--dark .sendbird-icon-color--read [class*='fill'] {\n  fill: var(--sendbird-dark-secondary-200); }\n\n.sendbird-theme--light .sendbird-icon-color--on-background-1 [class*='fill'] {\n  fill: var(--sendbird-light-onlight-01); }\n\n.sendbird-theme--dark .sendbird-icon-color--on-background-1 [class*='fill'] {\n  fill: var(--sendbird-dark-ondark-01); }\n\n.sendbird-theme--light .sendbird-icon-color--on-background-2 [class*='fill'] {\n  fill: var(--sendbird-light-onlight-02); }\n\n.sendbird-theme--dark .sendbird-icon-color--on-background-2 [class*='fill'] {\n  fill: var(--sendbird-dark-ondark-02); }\n\n.sendbird-theme--light .sendbird-icon-color--on-background-3 [class*='fill'] {\n  fill: var(--sendbird-light-onlight-03); }\n\n.sendbird-theme--dark .sendbird-icon-color--on-background-3 [class*='fill'] {\n  fill: var(--sendbird-dark-ondark-03); }\n\n.sendbird-theme--light .sendbird-icon-color--background-3 [class*='fill'] {\n  fill: var(--sendbird-light-background-300); }\n\n.sendbird-theme--dark .sendbird-icon-color--background-3 [class*='fill'] {\n  fill: var(--sendbird-dark-background-400); }\n\n.sendbird-theme--light .sendbird-icon-color--error [class*='fill'] {\n  fill: var(--sendbird-light-error-300); }\n\n.sendbird-theme--dark .sendbird-icon-color--error [class*='fill'] {\n  fill: var(--sendbird-dark-error-200); }\n\n.sendbird-avatar {\n  display: inline-block;\n  overflow: hidden;\n  border-radius: 50%;\n  position: relative; }\n  .sendbird-avatar:focus {\n    outline: none; }\n  .sendbird-avatar .sendbird-avatar-img {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    display: flex;\n    justify-content: center;\n    align-items: center; }\n    .sendbird-theme--light .sendbird-avatar .sendbird-avatar-img {\n      background-color: var(--sendbird-light-background-300); }\n    .sendbird-theme--dark .sendbird-avatar .sendbird-avatar-img {\n      background-color: var(--sendbird-dark-background-300); }\n  .sendbird-avatar .sendbird-avatar--inner__two-child .sendbird-avatar-img:first-child {\n    transform: translate(2%, -50%); }\n  .sendbird-avatar .sendbird-avatar--inner__two-child .sendbird-avatar-img:last-child {\n    transform: translate(-102%, -50%); }\n  .sendbird-avatar .sendbird-avatar--inner__three-child--upper .sendbird-avatar-img:first-child {\n    transform: translate(-50%, -102%); }\n  .sendbird-avatar .sendbird-avatar--inner__three-child--lower .sendbird-avatar-img:first-child {\n    transform: translate(-77%, -23%) scale(0.5); }\n  .sendbird-avatar .sendbird-avatar--inner__three-child--lower .sendbird-avatar-img:last-child {\n    transform: translate(-23%, -23%) scale(0.5); }\n  .sendbird-avatar .sendbird-avatar--inner__four-child .sendbird-avatar-img:first-child {\n    transform: translate(-77%, -77%) scale(0.5); }\n  .sendbird-avatar .sendbird-avatar--inner__four-child .sendbird-avatar-img:nth-child(2) {\n    transform: translate(-23%, -77%) scale(0.5); }\n  .sendbird-avatar .sendbird-avatar--inner__four-child .sendbird-avatar-img:nth-child(3) {\n    transform: translate(-77%, -23%) scale(0.5); }\n  .sendbird-avatar .sendbird-avatar--inner__four-child .sendbird-avatar-img:last-child {\n    transform: translate(-23%, -23%) scale(0.5); }\n  .sendbird-avatar .sendbird-avatar-img--default {\n    display: flex;\n    justify-content: center;\n    align-items: center; }\n    .sendbird-theme--light .sendbird-avatar .sendbird-avatar-img--default {\n      background-color: var(--sendbird-light-background-300); }\n    .sendbird-theme--dark .sendbird-avatar .sendbird-avatar-img--default {\n      background-color: var(--sendbird-dark-background-300); }\n\n.sendbird-add-channel__rectangle-wrap {\n  margin-top: 26px; }\n\n.sendbird-add-channel__rectangle-footer {\n  text-align: right;\n  margin-top: 32px; }\n\n.sendbird-add-channel__rectangle {\n  width: 432px;\n  height: 72px;\n  border-radius: 4px;\n  margin-bottom: 8px;\n  padding: 25px 72px;\n  position: relative;\n  box-sizing: border-box;\n  cursor: pointer; }\n  .sendbird-theme--light .sendbird-add-channel__rectangle {\n    border: 1px solid var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-add-channel__rectangle {\n    border: 1px solid var(--sendbird-dark-ondark-04); }\n  .sendbird-add-channel__rectangle .sendbird-icon {\n    position: absolute;\n    left: 22px;\n    top: 24px; }\n\n.sendbird-create-channel--content {\n  width: 480px;\n  max-height: 552px; }\n\n.sendbird-create-channel--scroll {\n  height: 360px;\n  overflow-y: auto; }\n\n.sendbird-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center; }\n\n.sendbird-modal__content {\n  width: 480px;\n  border-radius: 4px;\n  z-index: 10001;\n  padding: 18px 24px 24px 24px;\n  position: relative;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-modal__content {\n    background-color: var(--sendbird-light-background-50);\n    box-shadow: var(--sendbird-light-shadow-04); }\n  .sendbird-theme--dark .sendbird-modal__content {\n    background-color: var(--sendbird-dark-background-500);\n    box-shadow: var(--sendbird-dark-shadow-04); }\n  .sendbird-modal__content .sendbird-modal__close {\n    position: absolute;\n    top: 16px;\n    right: 16px;\n    cursor: pointer; }\n    .sendbird-theme--light .sendbird-modal__content .sendbird-modal__close path {\n      fill: var(--sendbird-light-onlight-01); }\n    .sendbird-theme--dark .sendbird-modal__content .sendbird-modal__close path {\n      fill: var(--sendbird-dark-ondark-01); }\n  .sendbird-modal__content .sendbird-modal__header {\n    margin-bottom: 16px; }\n  .sendbird-modal__content .sendbird-modal__body {\n    height: calc(100% - 116px); }\n  .sendbird-modal__content .sendbird-modal__footer {\n    margin-top: 32px;\n    text-align: right; }\n    .sendbird-modal__content .sendbird-modal__footer .sendbird-button:last-child {\n      margin-left: 8px;\n      width: 80px;\n      height: 40px; }\n\n.sendbird-modal__backdrop {\n  position: fixed;\n  z-index: 10000;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0; }\n  .sendbird-theme--light .sendbird-modal__backdrop {\n    background-color: var(--sendbird-light-overlay-02); }\n  .sendbird-theme--dark .sendbird-modal__backdrop {\n    background-color: var(--sendbird-dark-overlay-02); }\n\n.sendbird-button {\n  display: inline-block;\n  box-shadow: none;\n  border-radius: 4px;\n  padding: 0px;\n  font-family: var(--sendbird-font-family-default);\n  cursor: pointer; }\n  .sendbird-button:hover {\n    box-shadow: none; }\n  .sendbird-button:focus {\n    outline: none; }\n  .sendbird-button:active {\n    box-shadow: none; }\n  .sendbird-button.sendbird-button__disabled {\n    cursor: not-allowed; }\n    .sendbird-theme--light .sendbird-button.sendbird-button__disabled {\n      border: none;\n      background-color: var(--sendbird-light-background-200); }\n    .sendbird-theme--dark .sendbird-button.sendbird-button__disabled {\n      border: none;\n      background-color: var(--sendbird-dark-background-400); }\n    .sendbird-theme--light .sendbird-button.sendbird-button__disabled:hover {\n      background-color: var(--sendbird-light-background-200); }\n    .sendbird-theme--dark .sendbird-button.sendbird-button__disabled:hover {\n      background-color: var(--sendbird-dark-background-400); }\n\n.sendbird-button--big {\n  height: 40px; }\n  .sendbird-button--big .sendbird-button__text {\n    margin: 10px 16px; }\n\n.sendbird-button--small {\n  height: 32px; }\n  .sendbird-button--small .sendbird-button__text {\n    margin: 6px 16px; }\n\n.sendbird-theme--light .sendbird-button--primary {\n  border: 1px solid var(--sendbird-light-primary-300);\n  background-color: var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-button--primary {\n  border: 1px solid var(--sendbird-dark-primary-200);\n  background-color: var(--sendbird-dark-primary-200); }\n\n.sendbird-theme--light .sendbird-button--primary .sendbird-button__text {\n  color: var(--sendbird-light-ondark-01); }\n\n.sendbird-theme--dark .sendbird-button--primary .sendbird-button__text {\n  color: var(--sendbird-dark-onlight-01); }\n\n.sendbird-theme--light .sendbird-button--primary:hover {\n  background-color: var(--sendbird-light-primary-400);\n  border-color: var(--sendbird-light-primary-400); }\n\n.sendbird-theme--dark .sendbird-button--primary:hover {\n  background-color: var(--sendbird-dark-primary-300);\n  border-color: var(--sendbird-dark-primary-300); }\n\n.sendbird-theme--light .sendbird-button--primary:focus {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-light-primary-300);\n  border: 1px solid var(--sendbird-button-border-focus); }\n\n.sendbird-theme--dark .sendbird-button--primary:focus {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-dark-primary-200);\n  border: 1px solid var(--sendbird-button-border-focus); }\n\n.sendbird-theme--light .sendbird-button--primary:active {\n  background-color: var(--sendbird-light-primary-500); }\n\n.sendbird-theme--dark .sendbird-button--primary:active {\n  background-color: var(--sendbird-dark-primary-400); }\n\n.sendbird-theme--light .sendbird-button--primary:focus .sendbird-button--primary:hover {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-light-primary-400); }\n\n.sendbird-theme--dark .sendbird-button--primary:focus .sendbird-button--primary:hover {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-dark-primary-300); }\n\n.sendbird-theme--light .sendbird-button--primary:focus .sendbird-button--primary:active {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-light-primary-500); }\n\n.sendbird-theme--dark .sendbird-button--primary:focus .sendbird-button--primary:active {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-dark-primary-400); }\n\n.sendbird-button--secondary {\n  background-color: transparent; }\n  .sendbird-theme--light .sendbird-button--secondary {\n    border: 1px solid var(--sendbird-light-onlight-03); }\n  .sendbird-theme--dark .sendbird-button--secondary {\n    border: 1px solid var(--sendbird-dark-ondark-03); }\n  .sendbird-theme--light .sendbird-button--secondary .sendbird-button__text {\n    color: var(--sendbird-light-onlight-01); }\n  .sendbird-theme--dark .sendbird-button--secondary .sendbird-button__text {\n    color: var(--sendbird-dark-ondark-01); }\n  .sendbird-button--secondary:hover {\n    background-color: transparent; }\n    .sendbird-theme--light .sendbird-button--secondary:hover {\n      border: 1px solid var(--sendbird-light-primary-300); }\n    .sendbird-theme--dark .sendbird-button--secondary:hover {\n      border: 1px solid var(--sendbird-dark-primary-200); }\n    .sendbird-theme--light .sendbird-button--secondary:hover .sendbird-button__text {\n      color: var(--sendbird-light-primary-300); }\n    .sendbird-theme--dark .sendbird-button--secondary:hover .sendbird-button__text {\n      color: var(--sendbird-dark-primary-200); }\n  .sendbird-button--secondary.sendbird-button__disabled {\n    cursor: not-allowed;\n    border: none; }\n    .sendbird-theme--light .sendbird-button--secondary.sendbird-button__disabled {\n      background-color: var(--sendbird-light-background-200); }\n    .sendbird-theme--dark .sendbird-button--secondary.sendbird-button__disabled {\n      background-color: var(--sendbird-dark-background-400); }\n    .sendbird-theme--light .sendbird-button--secondary.sendbird-button__disabled .sendbird-button__text {\n      color: var(--sendbird-light-onlight-02); }\n    .sendbird-theme--dark .sendbird-button--secondary.sendbird-button__disabled .sendbird-button__text {\n      color: var(--sendbird-dark-ondark-02); }\n    .sendbird-button--secondary.sendbird-button__disabled:hover {\n      border: none; }\n      .sendbird-theme--light .sendbird-button--secondary.sendbird-button__disabled:hover {\n        background-color: var(--sendbird-light-background-200); }\n      .sendbird-theme--dark .sendbird-button--secondary.sendbird-button__disabled:hover {\n        background-color: var(--sendbird-dark-background-400); }\n      .sendbird-theme--light .sendbird-button--secondary.sendbird-button__disabled:hover .sendbird-button__text {\n        color: var(--sendbird-light-onlight-02); }\n      .sendbird-theme--dark .sendbird-button--secondary.sendbird-button__disabled:hover .sendbird-button__text {\n        color: var(--sendbird-dark-ondark-02); }\n  .sendbird-theme--light .sendbird-button--secondary:hover .sendbird-button--secondary:focus .sendbird-button__text {\n    color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-button--secondary:hover .sendbird-button--secondary:focus .sendbird-button__text {\n    color: var(--sendbird-dark-primary-200); }\n  .sendbird-button--secondary:focus {\n    border: 1px solid transparent;\n    background-color: transparent; }\n    .sendbird-theme--light .sendbird-button--secondary:focus {\n      box-shadow: var(--sendbird-light-primary-300) 0px 0px 0px 2px; }\n    .sendbird-theme--dark .sendbird-button--secondary:focus {\n      box-shadow: var(--sendbird-dark-primary-200) 0px 0px 0px 2px; }\n    .sendbird-theme--light .sendbird-button--secondary:focus .sendbird-button__text {\n      color: var(--sendbird-light-onlight-01); }\n    .sendbird-theme--dark .sendbird-button--secondary:focus .sendbird-button__text {\n      color: var(--sendbird-dark-ondark-01); }\n  .sendbird-button--secondary:active {\n    box-shadow: none; }\n    .sendbird-theme--light .sendbird-button--secondary:active {\n      border: 1px solid var(--sendbird-light-primary-300); }\n    .sendbird-theme--dark .sendbird-button--secondary:active {\n      border: 1px solid var(--sendbird-dark-primary-200); }\n    .sendbird-theme--light .sendbird-button--secondary:active .sendbird-button__text {\n      color: var(--sendbird-light-primary-300); }\n    .sendbird-theme--dark .sendbird-button--secondary:active .sendbird-button__text {\n      color: var(--sendbird-dark-primary-200); }\n\n.sendbird-theme--light .sendbird-button--danger {\n  border: 1px solid var(--sendbird-light-error-300);\n  background-color: var(--sendbird-light-error-300); }\n\n.sendbird-theme--dark .sendbird-button--danger {\n  border: 1px solid var(--sendbird-dark-error-200);\n  background-color: var(--sendbird-dark-error-200); }\n\n.sendbird-theme--light .sendbird-button--danger .sendbird-button__text {\n  color: var(--sendbird-light-ondark-01); }\n\n.sendbird-theme--dark .sendbird-button--danger .sendbird-button__text {\n  color: var(--sendbird-dark-onlight-01); }\n\n.sendbird-theme--light .sendbird-button--danger:hover {\n  background-color: var(--sendbird-light-error-400);\n  border-color: var(--sendbird-light-error-400); }\n\n.sendbird-theme--dark .sendbird-button--danger:hover {\n  background-color: var(--sendbird-dark-error-400);\n  border-color: var(--sendbird-dark-error-400); }\n\n.sendbird-theme--light .sendbird-button--danger:focus {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-light-error-300);\n  border-color: var(--sendbird-button-border-focus); }\n\n.sendbird-theme--dark .sendbird-button--danger:focus {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-dark-error-300);\n  border-color: var(--sendbird-button-border-focus); }\n\n.sendbird-button--danger:active {\n  box-shadow: none; }\n  .sendbird-theme--light .sendbird-button--danger:active {\n    background-color: var(--sendbird-light-error-500); }\n  .sendbird-theme--dark .sendbird-button--danger:active {\n    background-color: var(--sendbird-dark-error-500); }\n\n.sendbird-theme--light .sendbird-button--danger:hover .sendbird-button--danger:focus {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-light-error-400); }\n\n.sendbird-theme--dark .sendbird-button--danger:hover .sendbird-button--danger:focus {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-dark-error-400); }\n\n.sendbird-theme--light .sendbird-button--danger:active .sendbird-button--danger:focus {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-light-error-500); }\n\n.sendbird-theme--dark .sendbird-button--danger:active .sendbird-button--danger:focus {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-dark-error-500); }\n\n.sendbird-button--disabled {\n  border: 1px solid transparent;\n  cursor: not-allowed; }\n  .sendbird-theme--light .sendbird-button--disabled {\n    background-color: var(--sendbird-light-background-200);\n    color: var(--sendbird-light-ondark-01); }\n  .sendbird-theme--dark .sendbird-button--disabled {\n    background-color: var(--sendbird-dark-background-400);\n    color: var(--sendbird-dark-onlight-01); }\n\n.sendbird-user-list-item {\n  display: block;\n  position: relative;\n  box-sizing: border-box;\n  width: 432px;\n  height: 56px; }\n  .sendbird-theme--light .sendbird-user-list-item {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-user-list-item {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-user-list-item .sendbird-user-list-item__avatar {\n    position: absolute;\n    top: 8px;\n    left: 0px;\n    cursor: pointer; }\n  .sendbird-user-list-item .sendbird-muted-avatar {\n    position: absolute;\n    top: 8px;\n    left: 0px;\n    pointer-events: none; }\n  .sendbird-user-list-item .sendbird-user-list-item__title {\n    position: absolute;\n    top: 17px;\n    left: 56px;\n    max-width: 250px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .sendbird-user-list-item .sendbird-user-list-item__subtitle {\n    position: absolute;\n    top: 23px;\n    left: 140px;\n    max-width: 237px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .sendbird-user-list-item .sendbird-user-list-item__checkbox {\n    position: absolute;\n    top: 16px;\n    right: 16px; }\n  .sendbird-user-list-item .sendbird-user-list-item__action {\n    position: absolute;\n    right: 0;\n    top: 10px; }\n  .sendbird-user-list-item .sendbird-user-list-item__operator {\n    position: absolute;\n    right: 40px;\n    top: 22px; }\n    .sendbird-user-list-item .sendbird-user-list-item__operator.checkbox {\n      right: 66px; }\n\n.sendbird-muted-avatar {\n  border-radius: 50%;\n  display: inline-block; }\n  .sendbird-muted-avatar .sendbird-muted-avatar__icon {\n    position: relative; }\n    .sendbird-muted-avatar .sendbird-muted-avatar__icon .sendbird-icon {\n      position: absolute;\n      top: 4px;\n      left: 4px; }\n  .sendbird-muted-avatar .sendbird-muted-avatar__bg {\n    opacity: .5;\n    position: absolute;\n    border-radius: 50%;\n    top: 0;\n    left: 0; }\n    .sendbird-theme--light .sendbird-muted-avatar .sendbird-muted-avatar__bg {\n      background-color: var(--sendbird-light-primary-400); }\n    .sendbird-theme--dark .sendbird-muted-avatar .sendbird-muted-avatar__bg {\n      background-color: var(--sendbird-dark-primary-300); }\n\n.sendbird-checkbox {\n  display: inline-block;\n  position: relative;\n  padding-left: 35px;\n  margin-bottom: 12px;\n  cursor: pointer;\n  font-size: 22px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none; }\n\n.sendbird-checkbox input {\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0; }\n\n.sendbird-checkbox--checkmark {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 18px;\n  width: 18px;\n  border-radius: 2px;\n  background-color: inherit; }\n  .sendbird-theme--light .sendbird-checkbox--checkmark {\n    border: solid 2px var(--sendbird-light-background-400); }\n  .sendbird-theme--dark .sendbird-checkbox--checkmark {\n    border: solid 2px var(--sendbird-dark-background-300); }\n  .sendbird-theme--light .sendbird-checkbox--checkmark.disabled {\n    border: solid 2px var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-checkbox--checkmark.disabled {\n    border: solid 2px var(--sendbird-dark-ondark-04); }\n\n.sendbird-theme--light .sendbird-checkbox input:focus ~ .sendbird-checkbox--checkmark {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-checkbox input:focus ~ .sendbird-checkbox--checkmark {\n  box-shadow: 0px 0px 0px 2px var(--sendbird-dark-primary-200); }\n\n.sendbird-theme--light .sendbird-checkbox input:checked ~ .sendbird-checkbox--checkmark {\n  background-color: var(--sendbird-light-primary-300);\n  border: solid 2px var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-checkbox input:checked ~ .sendbird-checkbox--checkmark {\n  background-color: var(--sendbird-dark-primary-200);\n  border: solid 2px var(--sendbird-dark-primary-200); }\n\n.sendbird-theme--light .sendbird-checkbox input:checked ~ .sendbird-checkbox--checkmark.disabled {\n  background-color: var(--sendbird-light-onlight-04);\n  border: solid 2px var(--sendbird-light-onlight-04); }\n\n.sendbird-theme--dark .sendbird-checkbox input:checked ~ .sendbird-checkbox--checkmark.disabled {\n  background-color: var(--sendbird-dark-ondark-04);\n  border: solid 2px var(--sendbird-dark-ondark-04); }\n\n.sendbird-checkbox--checkmark:after {\n  content: \"\";\n  position: absolute;\n  display: none; }\n\n.sendbird-checkbox input:checked ~ .sendbird-checkbox--checkmark:after {\n  display: block; }\n\n.sendbird-theme--light .sendbird-checkbox .sendbird-checkbox--checkmark:after {\n  left: 5px;\n  top: -0.5px;\n  width: 7px;\n  height: 12px;\n  border: solid var(--sendbird-light-background-50);\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg); }\n\n.sendbird-theme--dark .sendbird-checkbox .sendbird-checkbox--checkmark:after {\n  left: 5px;\n  top: -0.5px;\n  width: 7px;\n  height: 12px;\n  border: solid var(--sendbird-dark-background-600);\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg); }\n\n.sendbird__user-profile {\n  width: 320px;\n  border-radius: 4px;\n  padding: 24px;\n  box-sizing: border-box;\n  text-align: center; }\n  .sendbird-theme--light .sendbird__user-profile {\n    box-shadow: var(--sendbird-light-shadow-02);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird__user-profile {\n    box-shadow: var(--sendbird-dark-shadow-02);\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird__user-profile .sendbird__user-profile-avatar {\n    margin: 8px 0px; }\n  .sendbird__user-profile .sendbird__user-profile-name {\n    max-width: 250px;\n    white-space: nowrap;\n    overflow-x: hidden;\n    text-overflow: ellipsis; }\n  .sendbird__user-profile .sendbird__user-profile-message {\n    margin-top: 20px; }\n    .sendbird__user-profile .sendbird__user-profile-message button {\n      width: 272px; }\n  .sendbird__user-profile .sendbird__user-profile-separator {\n    margin: 24px 0px;\n    height: 1px; }\n    .sendbird-theme--light .sendbird__user-profile .sendbird__user-profile-separator {\n      background-color: var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird__user-profile .sendbird__user-profile-separator {\n      background-color: var(--sendbird-dark-ondark-04); }\n  .sendbird__user-profile .sendbird__user-profile-userId--label,\n  .sendbird__user-profile .sendbird__user-profile-userId--value {\n    display: block;\n    text-align: left; }\n  .sendbird__user-profile .sendbird__user-profile-userId--label {\n    margin-bottom: 8px; }\n\n.sendbird-context-menu {\n  display: 'inline'; }\n\n.sendbird__offline .sendbird-dropdown__menu .sendbird-dropdown__menu-item {\n  cursor: not-allowed; }\n\n.sendbird-dropdown__menu {\n  z-index: 99999;\n  position: absolute;\n  top: 100%;\n  left: 0;\n  min-width: 140px;\n  margin: 0px;\n  padding: 8px 0px;\n  border-radius: 4px;\n  list-style: none; }\n  .sendbird-theme--light .sendbird-dropdown__menu {\n    box-shadow: var(--sendbird-light-shadow-02);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-dropdown__menu {\n    box-shadow: var(--sendbird-dark-shadow-02);\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-dropdown__menu .sendbird-dropdown__menu-item {\n    cursor: pointer;\n    white-space: nowrap;\n    padding: 8px 16px; }\n    .sendbird-dropdown__menu .sendbird-dropdown__menu-item.disable {\n      cursor: not-allowed; }\n      .sendbird-theme--light .sendbird-dropdown__menu .sendbird-dropdown__menu-item.disable:hover {\n        background-color: var(--sendbird-light-background-50); }\n      .sendbird-theme--dark .sendbird-dropdown__menu .sendbird-dropdown__menu-item.disable:hover {\n        background-color: var(--sendbird-dark-background-500); }\n    .sendbird-theme--light .sendbird-dropdown__menu .sendbird-dropdown__menu-item:hover {\n      background-color: var(--sendbird-light-background-100); }\n    .sendbird-theme--dark .sendbird-dropdown__menu .sendbird-dropdown__menu-item:hover {\n      background-color: var(--sendbird-dark-background-400); }\n\n.sendbird-dropdown__reaction-bar {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  min-width: 44px;\n  max-width: 352px;\n  max-height: 208px;\n  overflow-y: scroll;\n  margin: 0px;\n  padding: 8px;\n  border-radius: 8px;\n  list-style: none; }\n  .sendbird-theme--light .sendbird-dropdown__reaction-bar {\n    box-shadow: var(--sendbird-light-shadow-02);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-dropdown__reaction-bar {\n    box-shadow: var(--sendbird-dark-shadow-02);\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-dropdown__reaction-bar .sendbird-dropdown__reaction-bar__row .sendbird-reaction-button, .sendbird-dropdown__reaction-bar .sendbird-dropdown__reaction-bar__row .sendbird-reaction-button--selected {\n    margin: 4px; }\n\n.sendbird-dropdown__menu-backdrop {\n  background-color: transparent;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n\n.sendbird-sort-by-row {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center; }\n\n.sendbird__offline .sendbird-channel-preview {\n  cursor: not-allowed; }\n\n.sendbird-channel-preview {\n  position: relative;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: 320px;\n  height: 80px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  padding: 12px 16px 12px 16px; }\n  .sendbird-theme--light .sendbird-channel-preview {\n    border-bottom: solid 1px var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-channel-preview {\n    border-bottom: solid 1px var(--sendbird-dark-ondark-04); }\n  .sendbird-channel-preview:focus {\n    outline: none; }\n  .sendbird-channel-preview .sendbird-channel-preview__avatar {\n    width: 56px;\n    height: 56px; }\n  .sendbird-channel-preview .sendbird-channel-preview__content {\n    width: 100%;\n    height: 100%;\n    margin-left: 16px; }\n    .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper {\n      display: flex;\n      justify-content: space-between;\n      width: 216px;\n      height: 16px; }\n      .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__header {\n        display: flex;\n        justify-content: flex-start;\n        overflow: hidden;\n        text-overflow: ellipsis; }\n        .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__header .sendbird-channel-preview__content__upper__header__broadcast-icon {\n          padding-right: 4px; }\n        .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__header .sendbird-channel-preview__content__upper__header__channel-name {\n          overflow: hidden;\n          text-overflow: ellipsis;\n          max-width: 128px;\n          word-break: break-all;\n          white-space: nowrap; }\n        .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__header .sendbird-channel-preview__content__upper__header__total-members {\n          margin-top: 2px;\n          margin-left: 4px; }\n        .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__header .sendbird-channel-preview__content__upper__header__frozen-icon {\n          padding-left: 4px; }\n      .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__last-message-at {\n        margin-left: 4px;\n        margin-bottom: 4px;\n        white-space: nowrap; }\n        .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__upper .sendbird-channel-preview__content__upper__last-message-at.sendbird-message-status {\n          max-width: 74px;\n          justify-content: flex-end; }\n    .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__lower {\n      margin-top: 8px;\n      width: 216px;\n      height: 32px;\n      display: flex;\n      justify-content: space-between; }\n      .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__lower .sendbird-channel-preview__content__lower__last-message {\n        overflow: hidden;\n        text-overflow: ellipsis; }\n      .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__lower .sendbird-channel-preview__content__lower__unread-message-count {\n        display: flex;\n        align-items: center;\n        margin-left: 8px;\n        margin-bottom: 12px; }\n        .sendbird-channel-preview .sendbird-channel-preview__content .sendbird-channel-preview__content__lower .sendbird-channel-preview__content__lower__unread-message-count .sendbird-channel-preview__content__lower__unread-message-count__mention {\n          display: inline-flex;\n          align-items: center;\n          margin-right: 4px; }\n  .sendbird-channel-preview .sendbird-channel-preview__action {\n    position: absolute;\n    top: 12px;\n    right: 12px;\n    display: inline-block; }\n    .sendbird-channel-preview .sendbird-channel-preview__action .sendbird-iconbutton {\n      display: none; }\n  .sendbird-theme--light .sendbird-channel-preview:hover {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-channel-preview:hover {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-channel-preview:hover .sendbird-channel-preview__action .sendbird-iconbutton {\n    display: inline-block; }\n  .sendbird-channel-preview:hover .sendbird-channel-preview__content__upper__last-message-at {\n    display: none; }\n  .sendbird-channel-preview:hover .sendbird-channel-preview__content__lower__unread-message-count {\n    display: none; }\n\n.sendbird-channel-preview--active {\n  padding: 12px 16px 12px 12px; }\n  .sendbird-theme--light .sendbird-channel-preview--active {\n    border-left: solid 4px var(--sendbird-light-primary-300);\n    border-bottom: solid 1px var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-primary-100); }\n  .sendbird-theme--dark .sendbird-channel-preview--active {\n    border-left: solid 4px var(--sendbird-dark-primary-200);\n    border-bottom: solid 1px var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-700); }\n  .sendbird-theme--light .sendbird-channel-preview--active .sendbird-channel-preview__content__upper__header__channel-name {\n    color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-channel-preview--active .sendbird-channel-preview__content__upper__header__channel-name {\n    color: var(--sendbird-dark-primary-200); }\n\n.sendbird-chat-header--default-avatar {\n  width: 56px;\n  height: 56px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%; }\n  .sendbird-theme--light .sendbird-chat-header--default-avatar {\n    background-color: var(--sendbird-light-secondary-300); }\n  .sendbird-theme--dark .sendbird-chat-header--default-avatar {\n    background-color: var(--sendbird-dark-secondary-200); }\n\n.sendbird-badge {\n  height: 20px;\n  min-width: 20px;\n  border-radius: 10px;\n  display: inline-block; }\n  .sendbird-theme--light .sendbird-badge {\n    background-color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-badge {\n    background-color: var(--sendbird-dark-primary-200); }\n  .sendbird-badge .sendbird-badge__text {\n    margin: 0px 6px; }\n\n.sendbird-mention-user-label {\n  display: inline-block;\n  font-family: var(--sendbird-font-family-default);\n  font-size: 14px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.43;\n  letter-spacing: normal; }\n  .sendbird-mention-user-label:hover {\n    cursor: pointer; }\n  .sendbird-theme--light .sendbird-mention-user-label {\n    color: var(--sendbird-light-onlight-01); }\n  .sendbird-theme--dark .sendbird-mention-user-label {\n    color: var(--sendbird-dark-ondark-01); }\n  .sendbird-theme--light .sendbird-mention-user-label.reverse {\n    color: var(--sendbird-light-ondark-01); }\n  .sendbird-theme--dark .sendbird-mention-user-label.reverse {\n    color: var(--sendbird-dark-onlight-01); }\n  .sendbird-mention-user-label.purple {\n    font-family: Roboto;\n    font-size: 18px;\n    font-weight: bold;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal; }\n    .sendbird-theme--light .sendbird-mention-user-label.purple {\n      color: var(--sendbird-light-primary-300); }\n    .sendbird-theme--dark .sendbird-mention-user-label.purple {\n      color: var(--sendbird-dark-primary-200); }\n\n.sendbird-reaction-button {\n  border-radius: 8px;\n  display: inline-block;\n  border: solid 1px transparent;\n  box-sizing: border-box;\n  cursor: pointer; }\n  .sendbird-theme--light .sendbird-reaction-button:hover {\n    border: solid 1px var(--sendbird-light-background-100);\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-reaction-button:hover {\n    border: solid 1px var(--sendbird-dark-background-400);\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-reaction-button__inner {\n    margin: 3px; }\n\n.sendbird-reaction-button--selected {\n  cursor: pointer;\n  border-radius: 8px;\n  display: inline-block;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-reaction-button--selected {\n    border: solid 1px var(--sendbird-light-primary-100);\n    background-color: var(--sendbird-light-primary-100); }\n  .sendbird-theme--dark .sendbird-reaction-button--selected {\n    border: solid 1px var(--sendbird-dark-primary-400);\n    background-color: var(--sendbird-dark-primary-400); }\n  .sendbird-reaction-button--selected:hover {\n    border: solid 1px var(--sendbird-selected-reaction-button-border-hover); }\n  .sendbird-reaction-button--selected__inner {\n    margin: 3px; }\n  .sendbird-reaction-button--selected.sendbird-reactions--pressed {\n    display: block !important; }\n\n.sendbird-message-status {\n  position: relative;\n  display: inline-flex;\n  align-items: flex-start;\n  width: 100%;\n  height: 100%; }\n  .sendbird-message-status .sendbird-message-status__icon {\n    position: relative;\n    display: inline-block;\n    top: -2px; }\n    .sendbird-message-status .sendbird-message-status__icon.hide-icon {\n      display: none; }\n  .sendbird-message-status .sendbird-message-status__text {\n    position: relative;\n    display: inline-block;\n    margin-left: 4px; }\n    .sendbird-message-status .sendbird-message-status__text .sendbird-message-status__text__try-again {\n      text-decoration: underline; }\n      .sendbird-message-status .sendbird-message-status__text .sendbird-message-status__text__try-again:hover {\n        cursor: pointer; }\n    .sendbird-message-status .sendbird-message-status__text .sendbird-message-status__text__delete {\n      text-decoration: underline; }\n      .sendbird-message-status .sendbird-message-status__text .sendbird-message-status__text__delete:hover {\n        cursor: pointer; }\n\n.sendbird-loader {\n  display: inline-block;\n  -webkit-animation: 1s infinite linear;\n          animation: 1s infinite linear;\n  -webkit-animation-name: rotate;\n          animation-name: rotate; }\n\n@-webkit-keyframes rotate {\n  from {\n    transform: rotate(0); }\n  to {\n    transform: rotate(360deg); } }\n\n@keyframes rotate {\n  from {\n    transform: rotate(0); }\n  to {\n    transform: rotate(360deg); } }\n\n.sendbird-edit-user-profile section {\n  margin-top: 16px; }\n  .sendbird-edit-user-profile section .sendbird-input-label {\n    display: block;\n    margin-bottom: 12px; }\n\n.sendbird-edit-user-profile .sendbird-edit-user-profile__img .sendbird-input-label {\n  margin-bottom: 12px; }\n\n.sendbird-edit-user-profile__img {\n  position: relative; }\n\n.sendbird-edit-user-profile__img__avatar-button {\n  position: absolute;\n  top: 50px;\n  left: 96px; }\n\n.sendbird-edit-user-profile__theme__theme-icon .sendbird-icon {\n  cursor: pointer; }\n\n.sendbird-input {\n  display: inline-block;\n  width: 100%;\n  height: 40px;\n  position: relative; }\n  .sendbird-input .sendbird-input__input {\n    width: 100%;\n    height: 100%;\n    border-radius: 4px;\n    font-family: var(--sendbird-font-family-default);\n    font-size: 14px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: 1.43;\n    letter-spacing: normal;\n    padding: 10px 16px;\n    box-sizing: border-box;\n    background-color: inherit; }\n    .sendbird-theme--light .sendbird-input .sendbird-input__input {\n      color: var(--sendbird-light-onlight-01);\n      caret-color: var(--sendbird-light-primary-300);\n      border: solid 1px var(--sendbird-light-onlight-03); }\n    .sendbird-theme--dark .sendbird-input .sendbird-input__input {\n      color: var(--sendbird-dark-ondark-01);\n      caret-color: var(--sendbird-dark-primary-200);\n      border: solid 1px var(--sendbird-dark-ondark-03); }\n    .sendbird-input .sendbird-input__input:focus {\n      outline: none; }\n      .sendbird-theme--light .sendbird-input .sendbird-input__input:focus {\n        box-shadow: 0 1px 5px 0 var(--sendbird-light-onlight-04), 0 0 1px 0 rgba(0, 0, 0, 0.16), 0 2px 1px 0 rgba(0, 0, 0, 0.08);\n        color: var(--sendbird-light-onlight-01);\n        border: solid 2px var(--sendbird-light-primary-300); }\n      .sendbird-theme--dark .sendbird-input .sendbird-input__input:focus {\n        box-shadow: 0 1px 5px 0 var(--sendbird-dark-ondark-04), 0 0 1px 0 rgba(0, 0, 0, 0.16), 0 2px 1px 0 rgba(0, 0, 0, 0.08);\n        color: var(--sendbird-dark-ondark-01);\n        border: solid 2px var(--sendbird-dark-primary-200); }\n    .sendbird-theme--light .sendbird-input .sendbird-input__input:active {\n      box-shadow: 0 1px 5px 0 var(--sendbird-light-onlight-04), 0 0 1px 0 rgba(0, 0, 0, 0.16), 0 2px 1px 0 rgba(0, 0, 0, 0.08);\n      color: var(--sendbird-light-onlight-01);\n      border: solid 1px var(--sendbird-light-primary-300); }\n    .sendbird-theme--dark .sendbird-input .sendbird-input__input:active {\n      box-shadow: 0 1px 5px 0 var(--sendbird-dark-ondark-04), 0 0 1px 0 rgba(0, 0, 0, 0.16), 0 2px 1px 0 rgba(0, 0, 0, 0.08);\n      color: var(--sendbird-dark-ondark-01);\n      border: solid 1px var(--sendbird-dark-primary-200); }\n    .sendbird-input .sendbird-input__input:disabled {\n      cursor: not-allowed; }\n      .sendbird-theme--light .sendbird-input .sendbird-input__input:disabled {\n        background-color: var(--sendbird-light-background-100);\n        color: var(--sendbird-light-onlight-03); }\n      .sendbird-theme--dark .sendbird-input .sendbird-input__input:disabled {\n        background-color: var(--sendbird-dark-background-500);\n        color: var(--sendbird-dark-ondark-03); }\n  .sendbird-input .sendbird-input__placeholder {\n    position: absolute;\n    pointer-events: none;\n    top: 10px;\n    left: 16px;\n    font-family: var(--sendbird-font-family-default);\n    font-size: 14px;\n    line-height: 1.43; }\n    .sendbird-theme--light .sendbird-input .sendbird-input__placeholder {\n      color: var(--sendbird-light-onlight-03); }\n    .sendbird-theme--dark .sendbird-input .sendbird-input__placeholder {\n      color: var(--sendbird-dark-ondark-03); }\n\n.sendbird-input-label {\n  margin: 4px 0; }\n\n.sendbird-textbutton {\n  text-decoration: underline;\n  cursor: pointer;\n  display: inline-block; }\n\n.sendbird-textbutton--not-underline {\n  text-decoration: none;\n  cursor: pointer; }\n\n.sendbird-textbutton--disabled {\n  cursor: not-allowed; }\n  .sendbird-theme--light .sendbird-textbutton--disabled {\n    color: var(--sendbird-light-onlight-03); }\n  .sendbird-theme--dark .sendbird-textbutton--disabled {\n    color: var(--sendbird-dark-ondark-03); }\n\n.sendbird-theme--light .sendbird-color--onbackground-1 {\n  color: var(--sendbird-light-onlight-01); }\n\n.sendbird-theme--dark .sendbird-color--onbackground-1 {\n  color: var(--sendbird-dark-ondark-01); }\n\n.sendbird-theme--light .sendbird-color--onbackground-1--background-color {\n  background-color: var(--sendbird-light-onlight-01); }\n\n.sendbird-theme--dark .sendbird-color--onbackground-1--background-color {\n  background-color: var(--sendbird-dark-ondark-01); }\n\n.sendbird-theme--light .sendbird-color--onbackground-2 {\n  color: var(--sendbird-light-onlight-02); }\n\n.sendbird-theme--dark .sendbird-color--onbackground-2 {\n  color: var(--sendbird-dark-ondark-02); }\n\n.sendbird-theme--light .sendbird-color--onbackground-2--background-color {\n  background-color: var(--sendbird-light-onlight-02); }\n\n.sendbird-theme--dark .sendbird-color--onbackground-2--background-color {\n  background-color: var(--sendbird-dark-ondark-02); }\n\n.sendbird-theme--light .sendbird-color--onbackground-3 {\n  color: var(--sendbird-light-onlight-03); }\n\n.sendbird-theme--dark .sendbird-color--onbackground-3 {\n  color: var(--sendbird-dark-ondark-03); }\n\n.sendbird-theme--light .sendbird-color--onbackground-3--background-color {\n  background-color: var(--sendbird-light-onlight-03); }\n\n.sendbird-theme--dark .sendbird-color--onbackground-3--background-color {\n  background-color: var(--sendbird-dark-ondark-03); }\n\n.sendbird-theme--light .sendbird-color--onbackground-4 {\n  color: var(--sendbird-light-onlight-04); }\n\n.sendbird-theme--dark .sendbird-color--onbackground-4 {\n  color: var(--sendbird-dark-ondark-04); }\n\n.sendbird-theme--light .sendbird-color--onbackground-4--background-color {\n  background-color: var(--sendbird-light-onlight-04); }\n\n.sendbird-theme--dark .sendbird-color--onbackground-4--background-color {\n  background-color: var(--sendbird-dark-ondark-04); }\n\n.sendbird-theme--light .sendbird-color--oncontent-1 {\n  color: var(--sendbird-light-ondark-01); }\n\n.sendbird-theme--dark .sendbird-color--oncontent-1 {\n  color: var(--sendbird-dark-onlight-01); }\n\n.sendbird-theme--light .sendbird-color--oncontent-1--background-color {\n  background-color: var(--sendbird-light-ondark-01); }\n\n.sendbird-theme--dark .sendbird-color--oncontent-1--background-color {\n  background-color: var(--sendbird-dark-onlight-01); }\n\n.sendbird-theme--light .sendbird-color--primary {\n  color: var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-color--primary {\n  color: var(--sendbird-dark-primary-200); }\n\n.sendbird-theme--light .sendbird-color--primary--background-color {\n  background-color: var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-color--primary--background-color {\n  background-color: var(--sendbird-dark-primary-200); }\n\n.sendbird-theme--light .sendbird-color--error {\n  color: var(--sendbird-light-error-300); }\n\n.sendbird-theme--dark .sendbird-color--error {\n  color: var(--sendbird-dark-error-200); }\n\n.sendbird-theme--light .sendbird-color--error--background-color {\n  background-color: var(--sendbird-light-error-300); }\n\n.sendbird-theme--dark .sendbird-color--error--background-color {\n  background-color: var(--sendbird-dark-error-300); }\n\n.sendbird-place-holder {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%; }\n  .sendbird-place-holder .sendbird-place-holder__body {\n    display: flex;\n    flex-direction: column;\n    height: 104px;\n    align-items: center; }\n    .sendbird-place-holder .sendbird-place-holder__body .sendbird-place-holder__body__icon {\n      margin-bottom: 10px; }\n    .sendbird-place-holder .sendbird-place-holder__body .sendbird-place-holder__body__text {\n      margin-top: 10px; }\n  .sendbird-place-holder .sendbird-place-holder__body__reconnect {\n    margin-top: 18px;\n    display: flex;\n    flex-direction: row;\n    cursor: pointer; }\n    .sendbird-place-holder .sendbird-place-holder__body__reconnect .sendbird-place-holder__body__reconnect__icon {\n      margin-right: 4px; }\n  .sendbird-place-holder .sendbird-place-holder__body--align-top {\n    position: absolute;\n    top: 24px;\n    display: flex;\n    width: 100%;\n    flex-direction: column;\n    justify-content: center; }\n    .sendbird-place-holder .sendbird-place-holder__body--align-top .sendbird-place-holder__body--align-top__text {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      padding-left: 16px;\n      padding-right: 16px; }\n      .sendbird-place-holder .sendbird-place-holder__body--align-top .sendbird-place-holder__body--align-top__text .sendbird-place-holder__body--align-top__text__search-in {\n        display: flex;\n        min-width: 60px;\n        margin-right: 2px; }\n      .sendbird-place-holder .sendbird-place-holder__body--align-top .sendbird-place-holder__body--align-top__text .sendbird-place-holder__body--align-top__text__channel-name {\n        display: block;\n        max-width: calc(100% - 62px);\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis; }\n    .sendbird-place-holder .sendbird-place-holder__body--align-top .sendbird-place-hlder__body--align-top__searching,\n    .sendbird-place-holder .sendbird-place-holder__body--align-top .sendbird-place-hlder__body--align-top__no-result {\n      display: flex;\n      justify-content: center; }\n\n.sendbird-conversation {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-conversation {\n    background-color: var(--sendbird-light-background-50);\n    border: 1px solid var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-conversation {\n    background-color: var(--sendbird-dark-background-600);\n    border: 1px solid var(--sendbird-dark-ondark-04); }\n\n.sendbird-conversation__messages {\n  overflow-y: auto;\n  flex: 1 1 0;\n  order: 2; }\n\n.sendbird-conversation__messages-list {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: flex-end; }\n\n.sendbird-conversation__footer {\n  width: 100%;\n  order: 3;\n  padding: 0px 0px 24px 0px; }\n\n@-webkit-keyframes sbHighlight {\n  0% {\n    background-color: #FFF2B6; }\n  99% {\n    background-color: #FFF2B6; } }\n\n@keyframes sbHighlight {\n  0% {\n    background-color: #FFF2B6; }\n  99% {\n    background-color: #FFF2B6; } }\n\n@-webkit-keyframes sbTextHighlight {\n  0% {\n    color: var(--sendbird-dark-onlight-01); }\n  99% {\n    color: var(--sendbird-dark-onlight-01); } }\n\n@keyframes sbTextHighlight {\n  0% {\n    color: var(--sendbird-dark-onlight-01); }\n  99% {\n    color: var(--sendbird-dark-onlight-01); } }\n\n@-webkit-keyframes sbHighlightBlock {\n  0% {\n    opacity: 0.5;\n    background-color: #FFF2B6; }\n  99% {\n    opacity: 0.5;\n    background-color: #FFF2B6; } }\n\n@keyframes sbHighlightBlock {\n  0% {\n    opacity: 0.5;\n    background-color: #FFF2B6; }\n  99% {\n    opacity: 0.5;\n    background-color: #FFF2B6; } }\n\n.sendbird-msg-hoc__animated .sendbird-message-content {\n  -webkit-animation: bounce 1s ease;\n          animation: bounce 1s ease; }\n\n@-webkit-keyframes bounce {\n  50% {\n    transform: translateY(-10px); }\n  60% {\n    transform: translateY(0); }\n  90% {\n    transform: translateY(-10px); }\n  100% {\n    transform: translateY(0); } }\n\n@keyframes bounce {\n  50% {\n    transform: translateY(-10px); }\n  60% {\n    transform: translateY(0); }\n  90% {\n    transform: translateY(-10px); }\n  100% {\n    transform: translateY(0); } }\n\n.sendbird-msg-hoc__highlighted .sendbird-text-message-item-body,\n.sendbird-msg-hoc__highlighted .sendbird-file-message-item-body {\n  -webkit-animation-name: sbHighlight;\n          animation-name: sbHighlight;\n  -webkit-animation-duration: 1.6s;\n          animation-duration: 1.6s;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards; }\n\n.sendbird-msg-hoc__highlighted .sendbird-text-message-item-body__message,\n.sendbird-msg-hoc__highlighted .sendbird-file-message-item-body__file-name__text {\n  -webkit-animation-name: sbTextHighlight;\n          animation-name: sbTextHighlight;\n  -webkit-animation-duration: 1.6s;\n          animation-duration: 1.6s;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards; }\n\n.sendbird-msg-hoc__highlighted .sendbird-thumbnail-message-item-body\n.sendbird-thumbnail-message-item-body__image-cover {\n  display: block;\n  -webkit-animation-name: sbHighlightBlock;\n          animation-name: sbHighlightBlock;\n  -webkit-animation-duration: 1.6s;\n          animation-duration: 1.6s;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards; }\n\n.sendbird-msg-hoc__highlighted .sendbird-og-message-item-body\n.sendbird-og-message-item-body__cover {\n  display: block;\n  -webkit-animation-name: sbHighlightBlock;\n          animation-name: sbHighlightBlock;\n  -webkit-animation-duration: 1.6s;\n          animation-duration: 1.6s;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards; }\n\n.sendbird-msg-hoc__highlighted .sendbird-message-content-reactions {\n  -webkit-animation-name: sbHighlight;\n          animation-name: sbHighlight;\n  -webkit-animation-duration: 1.6s;\n          animation-duration: 1.6s;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards; }\n\n.sendbird-conversation__scroll-container {\n  display: flex;\n  height: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n  flex-direction: column; }\n  .sendbird-conversation__scroll-container .sendbird-conversation__padding {\n    flex: 1 1 0; }\n\n.sendbird-conversation__footer {\n  position: relative;\n  box-sizing: border-box;\n  margin-top: 6px; }\n  .sendbird-conversation__footer .sendbird-conversation__footer__typing-indicator {\n    position: absolute;\n    display: inline-flex;\n    bottom: 8px; }\n    .sendbird-conversation__footer .sendbird-conversation__footer__typing-indicator .sendbird-conversation__footer__typing-indicator__text {\n      margin-left: 24px;\n      margin-right: 10px; }\n\n.sendbird-connection-status {\n  display: flex;\n  align-items: center;\n  padding-top: 5px; }\n\n.sendbird-chat-header {\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  height: 64px;\n  min-height: 64px;\n  padding-left: 20px;\n  padding-right: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-chat-header {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-chat-header {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-chat-header__left {\n    margin-right: 24px; }\n  .sendbird-chat-header__left, .sendbird-chat-header__right {\n    overflow: hidden;\n    display: flex;\n    flex-direction: row;\n    align-items: center; }\n  .sendbird-chat-header .sendbird-chat-header__left__title {\n    margin-left: 8px;\n    margin-right: 16px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    max-width: 780px; }\n  .sendbird-chat-header .sendbird-chat-header__left__subtitle {\n    max-width: 240px;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .sendbird-chat-header .sendbird-chat-header__right__mute {\n    margin-right: 26px; }\n  .sendbird-chat-header .sendbird-iconbutton--pressed {\n    background-color: inherit; }\n  .sendbird-chat-header .sendbird-chat-header__right__info {\n    margin-left: 16px; }\n\n.sendbird-conversation__messages .sendbird-conversation__messages-padding {\n  padding-left: 24px;\n  padding-right: 24px;\n  height: 100%;\n  overflow: scroll; }\n\n.sendbird-conversation__messages .sendbird-separator,\n.sendbird-conversation__messages .sendbird-admin-message {\n  padding-top: 8px;\n  padding-bottom: 8px; }\n\n.sendbird-conversation__scroll-bottom-button {\n  position: -webkit-sticky;\n  position: sticky;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  bottom: 30px;\n  left: calc(100% - 65px);\n  width: 40px;\n  height: 40px;\n  border-radius: 24px;\n  z-index: 1; }\n  .sendbird-theme--light .sendbird-conversation__scroll-bottom-button {\n    background-color: var(--sendbird-light-background-50);\n    box-shadow: var(--sendbird-light-shadow-05); }\n  .sendbird-theme--dark .sendbird-conversation__scroll-bottom-button {\n    background-color: var(--sendbird-dark-background-400);\n    box-shadow: var(--sendbird-dark-shadow-05); }\n  .sendbird-conversation__scroll-bottom-button:hover {\n    cursor: pointer; }\n    .sendbird-theme--light .sendbird-conversation__scroll-bottom-button:hover {\n      background-color: var(--sendbird-light-background-100); }\n    .sendbird-theme--dark .sendbird-conversation__scroll-bottom-button:hover {\n      background-color: var(--sendbird-dark-background-500); }\n  .sendbird-theme--light .sendbird-conversation__scroll-bottom-button:active {\n    background-color: var(--sendbird-light-background-200); }\n  .sendbird-theme--dark .sendbird-conversation__scroll-bottom-button:active {\n    background-color: var(--sendbird-dark-background-700); }\n  .sendbird-conversation__scroll-bottom-button:focus {\n    outline: none; }\n\n.sendbird-mention-suggest-list {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: calc(100% - 56px);\n  max-height: 260px;\n  overflow: scroll;\n  margin-left: 28px;\n  margin-right: 28px; }\n  .sendbird-theme--light .sendbird-mention-suggest-list {\n    border: 1px solid var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-mention-suggest-list {\n    border: 1px solid var(--sendbird-dark-background-500); }\n  .sendbird-mention-suggest-list .sendbird-mention-suggest-list__user-item {\n    position: relative;\n    display: flex;\n    align-items: center;\n    padding: 16px 8px; }\n    .sendbird-theme--light .sendbird-mention-suggest-list .sendbird-mention-suggest-list__user-item {\n      background-color: var(--sendbird-light-background-50); }\n    .sendbird-theme--dark .sendbird-mention-suggest-list .sendbird-mention-suggest-list__user-item {\n      background-color: var(--sendbird-dark-background-600); }\n    .sendbird-theme--light .sendbird-mention-suggest-list .sendbird-mention-suggest-list__user-item.focused {\n      background-color: var(--sendbird-light-background-100); }\n    .sendbird-theme--dark .sendbird-mention-suggest-list .sendbird-mention-suggest-list__user-item.focused {\n      background-color: var(--sendbird-dark-background-500); }\n    .sendbird-mention-suggest-list .sendbird-mention-suggest-list__user-item .sendbird-mention-suggest-list__user-item__avatar {\n      position: relative;\n      display: inline-block; }\n    .sendbird-mention-suggest-list .sendbird-mention-suggest-list__user-item .sendbird-mention-suggest-list__user-item__nickname {\n      position: relative;\n      display: inline-block;\n      margin-left: 16px;\n      max-width: calc(100% - 250px);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis; }\n    .sendbird-mention-suggest-list .sendbird-mention-suggest-list__user-item .sendbird-mention-suggest-list__user-item__user-id {\n      position: absolute;\n      display: inline-block;\n      right: 16px;\n      max-width: 180px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis; }\n  .sendbird-mention-suggest-list .sendbird-mention-suggest-list__notice-item {\n    position: relative;\n    display: flex;\n    align-items: center;\n    padding: 16px 8px; }\n    .sendbird-theme--light .sendbird-mention-suggest-list .sendbird-mention-suggest-list__notice-item {\n      background-color: var(--sendbird-light-background-50); }\n    .sendbird-theme--dark .sendbird-mention-suggest-list .sendbird-mention-suggest-list__notice-item {\n      background-color: var(--sendbird-dark-background-600); }\n    .sendbird-mention-suggest-list .sendbird-mention-suggest-list__notice-item .sendbird-mention-suggest-list__notice-item__icon {\n      margin-right: 4px; }\n\n.sendbird-separator {\n  width: 100%;\n  display: flex;\n  align-items: center; }\n  .sendbird-separator .sendbird-separator__left {\n    border: none;\n    height: 1px;\n    display: inline-block;\n    width: 100%; }\n  .sendbird-separator .sendbird-separator__right {\n    border: none;\n    height: 1px;\n    display: inline-block;\n    width: 100%; }\n  .sendbird-separator .sendbird-separator__text {\n    margin: 0px 16px;\n    display: flex;\n    white-space: nowrap; }\n\n.sendbird-message-input {\n  display: inline-block;\n  width: 100%;\n  position: relative; }\n  .sendbird-message-input .sendbird-message-input--textarea {\n    width: 100%;\n    border-radius: 4px;\n    font-size: 14px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: 1.43;\n    height: 56px;\n    overflow-y: hidden;\n    letter-spacing: normal;\n    padding: 18px 64px 18px 16px;\n    box-sizing: border-box;\n    resize: none;\n    font-family: var(--sendbird-font-family-default);\n    background-color: inherit;\n    white-space: pre-wrap; }\n    .sendbird-theme--light .sendbird-message-input .sendbird-message-input--textarea {\n      color: var(--sendbird-light-onlight-01);\n      caret-color: var(--sendbird-light-primary-300);\n      border: solid 1px var(--sendbird-light-onlight-03);\n      background-color: var(--sendbird-light-background-50); }\n    .sendbird-theme--dark .sendbird-message-input .sendbird-message-input--textarea {\n      color: var(--sendbird-dark-ondark-01);\n      caret-color: var(--sendbird-dark-primary-200);\n      border: solid 1px var(--sendbird-dark-ondark-03);\n      background-color: var(--sendbird-dark-background-500); }\n    .sendbird-message-input .sendbird-message-input--textarea:focus {\n      outline: none; }\n      .sendbird-theme--light .sendbird-message-input .sendbird-message-input--textarea:focus {\n        color: var(--sendbird-light-onlight-01);\n        border: solid 1px var(--sendbird-light-primary-300);\n        box-shadow: var(--sendbird-light-shadow-message-input); }\n      .sendbird-theme--dark .sendbird-message-input .sendbird-message-input--textarea:focus {\n        color: var(--sendbird-dark-ondark-01);\n        border: solid 1px var(--sendbird-dark-primary-200);\n        box-shadow: var(--sendbird-dark-shadow-message-input); }\n    .sendbird-theme--light .sendbird-message-input .sendbird-message-input--textarea:active {\n      border: solid 1px var(--sendbird-message-input-border-active);\n      color: var(--sendbird-light-onlight-01); }\n    .sendbird-theme--dark .sendbird-message-input .sendbird-message-input--textarea:active {\n      border: solid 1px var(--sendbird-message-input-border-active);\n      color: var(--sendbird-dark-ondark-01); }\n  .sendbird-message-input .sendbird-message-input--placeholder {\n    position: absolute;\n    pointer-events: none;\n    top: 18px;\n    left: 16px;\n    font-family: var(--sendbird-font-family-default);\n    font-size: 14px;\n    line-height: 1.43; }\n    .sendbird-theme--light .sendbird-message-input .sendbird-message-input--placeholder {\n      color: var(--sendbird-light-onlight-03); }\n    .sendbird-theme--dark .sendbird-message-input .sendbird-message-input--placeholder {\n      color: var(--sendbird-dark-ondark-03); }\n  .sendbird-message-input .sendbird-message-input--attach {\n    position: absolute;\n    right: 12px;\n    bottom: 18px;\n    padding: 6px; }\n  .sendbird-message-input .sendbird-message-input--send {\n    position: absolute;\n    padding: 6px;\n    right: 16px;\n    bottom: 16px; }\n  .sendbird-message-input .sendbird-message-input--attach-input {\n    display: none; }\n\n.sendbird-message-input__edit {\n  padding: 16px;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-message-input__edit {\n    background-color: var(--sendbird-light-primary-100); }\n  .sendbird-theme--dark .sendbird-message-input__edit {\n    background-color: var(--sendbird-dark-background-700); }\n\n.sendbird-message-input--edit-action {\n  text-align: right;\n  margin-top: 4px; }\n  .sendbird-message-input--edit-action button:last-child {\n    margin-left: 8px; }\n  .sendbird-message-input--edit-action .sendbird-message-input--edit-action__cancel {\n    width: 80px; }\n    .sendbird-theme--light .sendbird-message-input--edit-action .sendbird-message-input--edit-action__cancel {\n      border: solid 1px var(--sendbird-light-onlight-03); }\n    .sendbird-theme--dark .sendbird-message-input--edit-action .sendbird-message-input--edit-action__cancel {\n      border: solid 1px var(--sendbird-dark-ondark-03); }\n  .sendbird-message-input--edit-action .sendbird-message-input--edit-action__save {\n    width: 80px; }\n\n.sendbird-message-input-form__disabled {\n  cursor: not-allowed; }\n\n.sendbird-message-input__disabled {\n  pointer-events: none;\n  cursor: disabled; }\n  .sendbird-theme--light .sendbird-message-input__disabled .sendbird-message-input--textarea {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-message-input__disabled .sendbird-message-input--textarea {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-theme--light .sendbird-message-input__disabled svg {\n    fill: var(--sendbird-light-onlight-03); }\n  .sendbird-theme--dark .sendbird-message-input__disabled svg {\n    fill: var(--sendbird-dark-ondark-03); }\n\n.sendbird-message-content {\n  position: relative;\n  display: inline-flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100%; }\n  .sendbird-message-content.incoming {\n    justify-content: flex-start; }\n  .sendbird-message-content.outgoing {\n    justify-content: flex-end; }\n  .sendbird-message-content .sendbird-message-content__middle .sendbird-message-content__middle__quote-message.use-quote {\n    margin-top: -8px;\n    bottom: -8px; }\n\n.sendbird-message-content.incoming .sendbird-message-content__left {\n  position: relative;\n  display: inline-flex;\n  min-width: 40px; }\n  .sendbird-message-content.incoming .sendbird-message-content__left .sendbird-message-content__left__avatar {\n    position: absolute;\n    left: 0px;\n    bottom: 2px; }\n\n.sendbird-message-content.incoming .sendbird-message-content__middle {\n  position: relative;\n  display: inline-flex;\n  flex-direction: column;\n  max-width: 400px;\n  align-items: flex-start; }\n  .sendbird-message-content.incoming .sendbird-message-content__middle .sendbird-message-content__middle__body-container .sendbird-message-content__middle__body-container__created-at {\n    position: absolute;\n    bottom: 6px;\n    right: -84px;\n    white-space: nowrap;\n    display: flex;\n    flex-direction: row;\n    min-width: 80px; }\n    .sendbird-message-content.incoming .sendbird-message-content__middle .sendbird-message-content__middle__body-container .sendbird-message-content__middle__body-container__created-at.supposed-hover {\n      display: none; }\n  .sendbird-message-content.incoming .sendbird-message-content__middle .sendbird-message-content__middle__sender-name {\n    position: relative;\n    margin-left: 12px;\n    margin-bottom: 4px; }\n  .sendbird-message-content.incoming .sendbird-message-content__middle .sendbird-message-content__middle__quote-message {\n    position: relative;\n    width: 100%;\n    display: inline-flex; }\n    .sendbird-message-content.incoming .sendbird-message-content__middle .sendbird-message-content__middle__quote-message.outgoing {\n      justify-content: flex-end; }\n    .sendbird-message-content.incoming .sendbird-message-content__middle .sendbird-message-content__middle__quote-message.incoming {\n      justify-content: flex-start; }\n\n.sendbird-message-content.incoming .sendbird-message-content__right {\n  position: relative;\n  display: inline-flex;\n  width: 50px;\n  margin-left: 4px;\n  padding-top: 18px; }\n  .sendbird-message-content.incoming .sendbird-message-content__right.use-reactions {\n    width: 70px; }\n  .sendbird-message-content.incoming .sendbird-message-content__right.chain-top {\n    padding-top: 2px; }\n    .sendbird-message-content.incoming .sendbird-message-content__right.chain-top.use-quote {\n      padding-top: 18px; }\n  .sendbird-message-content.incoming .sendbird-message-content__right .sendbird-message-content-menu {\n    position: relative;\n    flex-direction: row;\n    height: 32px;\n    display: none; }\n    .sendbird-message-content.incoming .sendbird-message-content__right .sendbird-message-content-menu.supposed-hover {\n      display: inline-flex; }\n\n.sendbird-message-content.incoming:hover .sendbird-message-content__right .sendbird-message-content-menu {\n  display: inline-flex; }\n\n.sendbird-message-content.incoming:hover .sendbird-message-content__middle .sendbird-message-content__middle__body-container .sendbird-message-content__middle__body-container__created-at {\n  display: none; }\n\n.sendbird-message-content.outgoing .sendbird-message-content__left {\n  position: relative;\n  box-sizing: border-box;\n  display: inline-flex;\n  justify-content: flex-end;\n  width: 50px; }\n  .sendbird-message-content.outgoing .sendbird-message-content__left.use-reactions {\n    width: 70px; }\n  .sendbird-message-content.outgoing .sendbird-message-content__left.use-quote .sendbird-message-content-menu {\n    top: 18px; }\n  .sendbird-message-content.outgoing .sendbird-message-content__left .sendbird-message-content-menu {\n    position: absolute;\n    top: 2px;\n    right: 4px;\n    flex-direction: row;\n    display: none; }\n    .sendbird-message-content.outgoing .sendbird-message-content__left .sendbird-message-content-menu.supposed-hover {\n      display: inline-flex; }\n\n.sendbird-message-content.outgoing .sendbird-message-content__middle {\n  position: relative;\n  display: inline-flex;\n  flex-direction: column;\n  max-width: 400px;\n  align-items: flex-end; }\n  .sendbird-message-content.outgoing .sendbird-message-content__middle .sendbird-message-content__middle__quote-message {\n    position: relative;\n    width: 100%;\n    display: inline-flex; }\n    .sendbird-message-content.outgoing .sendbird-message-content__middle .sendbird-message-content__middle__quote-message.outgoing {\n      justify-content: flex-end; }\n    .sendbird-message-content.outgoing .sendbird-message-content__middle .sendbird-message-content__middle__quote-message.incoming {\n      justify-content: flex-start; }\n  .sendbird-message-content.outgoing .sendbird-message-content__middle .sendbird-message-content__middle__body-container {\n    position: relative;\n    width: -webkit-fit-content;\n    width: -moz-fit-content;\n    width: fit-content; }\n    .sendbird-message-content.outgoing .sendbird-message-content__middle .sendbird-message-content__middle__body-container .sendbird-message-content__middle__body-container__created-at {\n      position: absolute;\n      bottom: 2px;\n      left: -84px;\n      white-space: nowrap;\n      display: flex;\n      justify-content: flex-end;\n      box-sizing: content-box;\n      min-width: 80px;\n      min-height: 16px; }\n      .sendbird-message-content.outgoing .sendbird-message-content__middle .sendbird-message-content__middle__body-container .sendbird-message-content__middle__body-container__created-at.supposed-hover {\n        display: none; }\n      .sendbird-message-content.outgoing .sendbird-message-content__middle .sendbird-message-content__middle__body-container .sendbird-message-content__middle__body-container__created-at .sendbird-message-content__middle__body-container__created-at__component-container {\n        position: relative;\n        display: inline-flex; }\n\n.sendbird-message-content.outgoing .sendbird-message-content__right {\n  display: none; }\n\n.sendbird-message-content.outgoing:hover .sendbird-message-content__left .sendbird-message-content-menu {\n  display: inline-flex; }\n\n.sendbird-message-content.outgoing:hover .sendbird-message-content__middle .sendbird-message-content__middle__body-container .sendbird-message-content__middle__body-container__created-at {\n  display: none; }\n\n.sendbird-message-content__middle__body-container {\n  position: relative;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  display: flex;\n  flex-direction: column; }\n  .sendbird-message-content__middle__body-container .sendbird-message-content__middle__message-item-body {\n    width: 100%;\n    box-sizing: border-box; }\n\n.sendbird-message-content-reactions {\n  position: relative;\n  width: 100%;\n  max-width: 400px;\n  border-radius: 0px 0px 16px 16px; }\n  .sendbird-theme--light .sendbird-message-content-reactions {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-message-content-reactions {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-theme--light .sendbird-message-content-reactions.primary {\n    background-color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-message-content-reactions.primary {\n    background-color: var(--sendbird-dark-primary-200); }\n  .sendbird-theme--light .sendbird-message-content-reactions.mouse-hover, .sendbird-theme--light .sendbird-message-content-reactions:hover {\n    background-color: var(--sendbird-light-background-200); }\n  .sendbird-theme--dark .sendbird-message-content-reactions.mouse-hover, .sendbird-theme--dark .sendbird-message-content-reactions:hover {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-theme--light .sendbird-message-content-reactions.mouse-hover.primary, .sendbird-theme--light .sendbird-message-content-reactions:hover.primary {\n    background-color: var(--sendbird-light-primary-400); }\n  .sendbird-theme--dark .sendbird-message-content-reactions.mouse-hover.primary, .sendbird-theme--dark .sendbird-message-content-reactions:hover.primary {\n    background-color: var(--sendbird-dark-primary-300); }\n\n.sendbird-message-item-menu__list__menu-item:focus-visible {\n  outline: none; }\n\n.sendbird-text {\n  color: var(--primary-1); }\n\n.sendbird-emoji-reactions {\n  display: inline-flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  border-radius: 16px;\n  box-sizing: border-box;\n  width: 100%;\n  max-width: var(--sendbird-message-balloon-width);\n  min-height: 24px;\n  padding: 7px 5px 3px 5px; }\n  .sendbird-theme--light .sendbird-emoji-reactions {\n    background-color: var(--sendbird-light-background-50);\n    border: 1px solid var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-emoji-reactions {\n    background-color: var(--sendbird-dark-background-600);\n    border: 1px solid var(--sendbird-dark-background-500); }\n  .sendbird-emoji-reactions .sendbird-emoji-reactions__reaction-badge {\n    display: inline-flex;\n    margin-left: 2px;\n    margin-right: 2px;\n    margin-bottom: 4px; }\n  .sendbird-emoji-reactions:focus {\n    outline: none; }\n\n.sendbird-emoji-reactions__add-reaction-badge {\n  display: inline-flex;\n  width: 36px;\n  height: 24px; }\n\n.sendbird-tooltip {\n  position: relative;\n  display: inline-flex;\n  justify-content: center;\n  max-width: 200px;\n  border-radius: 8px;\n  padding: 8px 16px; }\n  .sendbird-theme--light .sendbird-tooltip {\n    background-color: var(--sendbird-light-background-700); }\n  .sendbird-theme--dark .sendbird-tooltip {\n    background-color: var(--sendbird-dark-background-300); }\n  .sendbird-tooltip::after {\n    content: '';\n    position: absolute;\n    bottom: -4px;\n    width: 8px;\n    height: 8px;\n    transform: rotate(45deg); }\n    .sendbird-theme--light .sendbird-tooltip::after {\n      background-color: var(--sendbird-light-background-700); }\n    .sendbird-theme--dark .sendbird-tooltip::after {\n      background-color: var(--sendbird-dark-background-300); }\n  .sendbird-tooltip__text {\n    font-family: var(--sendbird-font-family-default);\n    font-size: 12px;\n    font-weight: bold;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: 1.33;\n    letter-spacing: normal; }\n\n.sendbird-tooltip-wrapper {\n  position: relative;\n  display: inline-flex; }\n  .sendbird-tooltip-wrapper__hover-tooltip {\n    position: absolute;\n    display: inline-flex;\n    width: 200px; }\n    .sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container {\n      position: relative;\n      display: inline-flex; }\n\n.sendbird-reaction-badge {\n  display: inline-block;\n  border-radius: 15px;\n  width: 50px;\n  height: 24px; }\n  .sendbird-theme--light .sendbird-reaction-badge {\n    background-color: var(--sendbird-light-background-100);\n    border: solid 1px var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-reaction-badge {\n    background-color: var(--sendbird-dark-background-500);\n    border: solid 1px var(--sendbird-dark-background-500); }\n  .sendbird-reaction-badge:hover {\n    cursor: pointer; }\n    .sendbird-theme--light .sendbird-reaction-badge:hover {\n      border: solid 1px var(--sendbird-light-primary-300); }\n    .sendbird-theme--dark .sendbird-reaction-badge:hover {\n      border: solid 1px var(--sendbird-dark-primary-200); }\n\n.sendbird-reaction-badge--is-add {\n  display: inline-block;\n  border-radius: 15px;\n  width: 36px;\n  height: 24px; }\n  .sendbird-theme--light .sendbird-reaction-badge--is-add {\n    background-color: var(--sendbird-light-background-100);\n    border: solid 1px var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-reaction-badge--is-add {\n    background-color: var(--sendbird-dark-background-500);\n    border: solid 1px var(--sendbird-dark-background-500); }\n  .sendbird-reaction-badge--is-add:hover {\n    cursor: pointer; }\n    .sendbird-theme--light .sendbird-reaction-badge--is-add:hover {\n      border: solid 1px var(--sendbird-light-primary-300); }\n    .sendbird-theme--dark .sendbird-reaction-badge--is-add:hover {\n      border: solid 1px var(--sendbird-dark-primary-200); }\n  .sendbird-reaction-badge--is-add .sendbird-reaction-badge__inner .sendbird-reaction-badge__inner__icon {\n    left: 8px; }\n\n.sendbird-reaction-badge--selected {\n  display: inline-block;\n  border-radius: 15px;\n  width: 50px;\n  height: 24px; }\n  .sendbird-theme--light .sendbird-reaction-badge--selected {\n    background-color: var(--sendbird-light-primary-100);\n    border: solid 1px var(--sendbird-light-primary-100); }\n  .sendbird-theme--dark .sendbird-reaction-badge--selected {\n    background-color: var(--sendbird-dark-primary-400);\n    border: solid 1px var(--sendbird-dark-primary-400); }\n  .sendbird-reaction-badge--selected:hover {\n    cursor: pointer; }\n    .sendbird-theme--light .sendbird-reaction-badge--selected:hover {\n      border: solid 1px var(--sendbird-light-primary-300); }\n    .sendbird-theme--dark .sendbird-reaction-badge--selected:hover {\n      border: solid 1px var(--sendbird-dark-primary-200); }\n\n.sendbird-reaction-badge__inner {\n  position: relative;\n  display: flex;\n  height: 24px;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  padding-left: 20px;\n  padding-right: 4px; }\n  .sendbird-reaction-badge__inner .sendbird-reaction-badge__inner__icon {\n    position: absolute;\n    top: 2px;\n    left: 4px; }\n  .sendbird-reaction-badge__inner .sendbird-reaction-badge__inner__count {\n    margin-left: 4px; }\n\n.sendbird-admin-message {\n  display: flex;\n  justify-content: center;\n  align-items: center; }\n  .sendbird-admin-message .sendbird-admin-message__text {\n    display: flex; }\n\n.sendbird-text-message-item-body {\n  position: relative;\n  display: inline-block;\n  box-sizing: content-box;\n  padding: 8px 12px;\n  border-radius: 16px;\n  white-space: pre-line;\n  word-break: break-word; }\n  .sendbird-text-message-item-body.reactions {\n    border-radius: 16px 16px 0px 0px; }\n  .sendbird-theme--light .sendbird-text-message-item-body.incoming {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-text-message-item-body.incoming {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-theme--light .sendbird-text-message-item-body.outgoing {\n    background-color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-text-message-item-body.outgoing {\n    background-color: var(--sendbird-dark-primary-200); }\n  .sendbird-theme--light .sendbird-text-message-item-body.mouse-hover.incoming, .sendbird-theme--light .sendbird-text-message-item-body:hover.incoming {\n    background-color: var(--sendbird-light-background-200); }\n  .sendbird-theme--dark .sendbird-text-message-item-body.mouse-hover.incoming, .sendbird-theme--dark .sendbird-text-message-item-body:hover.incoming {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-theme--light .sendbird-text-message-item-body.mouse-hover.outgoing, .sendbird-theme--light .sendbird-text-message-item-body:hover.outgoing {\n    background-color: var(--sendbird-light-primary-400); }\n  .sendbird-theme--dark .sendbird-text-message-item-body.mouse-hover.outgoing, .sendbird-theme--dark .sendbird-text-message-item-body:hover.outgoing {\n    background-color: var(--sendbird-dark-primary-300); }\n  .sendbird-text-message-item-body .sendbird-text-message-item-body__text-bubble__message {\n    display: inline;\n    margin: 0px 2px; }\n\ndiv.sendbird-text-message-item-body {\n  margin: 0px; }\n\n.sendbird-word {\n  display: inline-flex;\n  margin-right: 4px;\n  height: -webkit-fit-content;\n  height: -moz-fit-content;\n  height: fit-content; }\n  .sendbird-word .sendbird-word__url,\n  .sendbird-word .sendbird-word__normal {\n    display: inline-block; }\n\n.sendbird-link-label {\n  text-decoration: unset; }\n  .sendbird-link-label:hover {\n    cursor: pointer;\n    text-decoration: underline; }\n  .sendbird-link-label:focus {\n    outline: none; }\n  .sendbird-link-label__label {\n    display: inline; }\n\n.sendbird-theme--light .sendbird-link-label .sendbird-label--color-onbackground-1 {\n  color: var(--sendbird-light-onlight-01); }\n\n.sendbird-theme--dark .sendbird-link-label .sendbird-label--color-onbackground-1 {\n  color: var(--sendbird-dark-ondark-01); }\n\n.sendbird-theme--light .sendbird-link-label .sendbird-label--color-onbackground-2 {\n  color: var(--sendbird-light-onlight-02); }\n\n.sendbird-theme--dark .sendbird-link-label .sendbird-label--color-onbackground-2 {\n  color: var(--sendbird-dark-ondark-02); }\n\n.sendbird-theme--light .sendbird-link-label .sendbird-label--color-onbackground-3 {\n  color: var(--sendbird-light-onlight-03); }\n\n.sendbird-theme--dark .sendbird-link-label .sendbird-label--color-onbackground-3 {\n  color: var(--sendbird-dark-ondark-03); }\n\n.sendbird-theme--light .sendbird-link-label .sendbird-label--color-oncontent-1 {\n  color: var(--sendbird-light-ondark-01); }\n\n.sendbird-theme--dark .sendbird-link-label .sendbird-label--color-oncontent-1 {\n  color: var(--sendbird-dark-onlight-01); }\n\n.sendbird-theme--light .sendbird-link-label .sendbird-label--color-oncontent-2 {\n  color: var(--sendbird-light-ondark-02); }\n\n.sendbird-theme--dark .sendbird-link-label .sendbird-label--color-oncontent-2 {\n  color: var(--sendbird-dark-onlight-02); }\n\n.sendbird-theme--light .sendbird-link-label .sendbird-label--color-primary {\n  color: var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-link-label .sendbird-label--color-primary {\n  color: var(--sendbird-dark-primary-200); }\n\n.sendbird-theme--light .sendbird-link-label .sendbird-label--color-error {\n  color: var(--sendbird-light-error-300); }\n\n.sendbird-theme--dark .sendbird-link-label .sendbird-label--color-error {\n  color: var(--sendbird-dark-error-200); }\n\n.sendbird-theme--light .sendbird-link-label .sendbird-label--color-secondary-3 {\n  color: var(--sendbird-light-secondary-300); }\n\n.sendbird-theme--dark .sendbird-link-label .sendbird-label--color-secondary-3 {\n  color: var(--sendbird-dark-secondary-200); }\n\n.sendbird-word .sendbird-word__mention {\n  display: inline-block; }\n  .sendbird-word .sendbird-word__mention:hover {\n    cursor: pointer; }\n  .sendbird-theme--light .sendbird-word .sendbird-word__mention.sendbird-word__mention--me {\n    background-color: var(--sendbird-highlight-100); }\n  .sendbird-theme--dark .sendbird-word .sendbird-word__mention.sendbird-word__mention--me {\n    background-color: var(--sendbird-highlight-100); }\n  .sendbird-theme--light .sendbird-word .sendbird-word__mention.sendbird-word__mention--me .sendbird-label {\n    color: var(--sendbird-light-onlight-01); }\n  .sendbird-theme--dark .sendbird-word .sendbird-word__mention.sendbird-word__mention--me .sendbird-label {\n    color: var(--sendbird-dark-onlight-01); }\n\n.sendbird-file-message-item-body {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n  padding: 8px 12px;\n  align-items: center;\n  border-radius: 16px; }\n  .sendbird-file-message-item-body.reactions {\n    border-radius: 16px 16px 0px 0px; }\n  .sendbird-theme--light .sendbird-file-message-item-body.outgoing {\n    background-color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-file-message-item-body.outgoing {\n    background-color: var(--sendbird-dark-primary-200); }\n  .sendbird-theme--light .sendbird-file-message-item-body.incoming {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-file-message-item-body.incoming {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-theme--light .sendbird-file-message-item-body.mouse-hover.outgoing, .sendbird-theme--light .sendbird-file-message-item-body:hover.outgoing {\n    background-color: var(--sendbird-light-primary-400); }\n  .sendbird-theme--dark .sendbird-file-message-item-body.mouse-hover.outgoing, .sendbird-theme--dark .sendbird-file-message-item-body:hover.outgoing {\n    background-color: var(--sendbird-dark-primary-300); }\n  .sendbird-theme--light .sendbird-file-message-item-body.mouse-hover.incoming, .sendbird-theme--light .sendbird-file-message-item-body:hover.incoming {\n    background-color: var(--sendbird-light-background-200); }\n  .sendbird-theme--dark .sendbird-file-message-item-body.mouse-hover.incoming, .sendbird-theme--dark .sendbird-file-message-item-body:hover.incoming {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-file-message-item-body .sendbird-file-message-item-body__file-icon {\n    width: 28px;\n    height: 28px;\n    min-width: 28px;\n    min-height: 28px;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 8px;\n    margin-right: 8px; }\n    .sendbird-theme--light .sendbird-file-message-item-body .sendbird-file-message-item-body__file-icon {\n      background-color: var(--sendbird-light-background-50); }\n    .sendbird-theme--dark .sendbird-file-message-item-body .sendbird-file-message-item-body__file-icon {\n      background-color: var(--sendbird-dark-background-600); }\n  .sendbird-file-message-item-body .sendbird-file-message-item-body__file-name {\n    position: relative;\n    top: -6px; }\n\n.sendbird-thumbnail-message-item-body {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  overflow: hidden;\n  width: 100%;\n  min-width: 360px;\n  max-width: 400px;\n  height: 270px;\n  border-radius: 16px; }\n  .sendbird-thumbnail-message-item-body.reactions {\n    border-radius: 16px 16px 0px 0px; }\n  .sendbird-theme--light .sendbird-thumbnail-message-item-body {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-thumbnail-message-item-body {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-theme--light .sendbird-thumbnail-message-item-body.mouse-hover, .sendbird-theme--light .sendbird-thumbnail-message-item-body:hover {\n    background-color: var(--sendbird-light-background-200); }\n  .sendbird-theme--dark .sendbird-thumbnail-message-item-body.mouse-hover, .sendbird-theme--dark .sendbird-thumbnail-message-item-body:hover {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-thumbnail-message-item-body .sendbird-thumbnail-message-item-body__thumbnail {\n    position: absolute;\n    border-radius: 16px; }\n  .sendbird-thumbnail-message-item-body .sendbird-thumbnail-message-item-body__placeholder {\n    position: absolute;\n    width: 100%;\n    height: 270px;\n    display: flex;\n    justify-content: center;\n    align-items: center; }\n    .sendbird-thumbnail-message-item-body .sendbird-thumbnail-message-item-body__placeholder .sendbird-thumbnail-message-item-body__placeholder__icon {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 56px;\n      height: 56px;\n      border-radius: 50%;\n      background-color: var(--sendbird-light-background-50); }\n  .sendbird-thumbnail-message-item-body .sendbird-thumbnail-message-item-body__image-cover {\n    position: absolute;\n    top: 0px;\n    display: none;\n    width: 100%;\n    height: 270px;\n    border-radius: 16px;\n    background-color: var(--sendbird-light-overlay-01); }\n  .sendbird-thumbnail-message-item-body .sendbird-thumbnail-message-item-body__video {\n    position: absolute;\n    width: 100%;\n    height: 270px;\n    border-radius: 16px; }\n  .sendbird-thumbnail-message-item-body .sendbird-thumbnail-message-item-body__icon-wrapper {\n    position: absolute;\n    width: 100%;\n    height: 270px;\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n    .sendbird-thumbnail-message-item-body .sendbird-thumbnail-message-item-body__icon-wrapper .sendbird-thumbnail-message-item-body__icon-wrapper__icon {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 56px;\n      height: 56px;\n      border-radius: 50%;\n      background-color: var(--sendbird-light-background-50); }\n\n.sendbird-thumbnail-message-item-body:hover {\n  cursor: pointer; }\n  .sendbird-thumbnail-message-item-body:hover .sendbird-thumbnail-message-item-body__image-cover {\n    display: inline-flex; }\n\n.sendbird-og-message-item-body {\n  position: relative;\n  display: inline-block;\n  width: 100%;\n  min-width: 320px;\n  max-width: 400px; }\n  .sendbird-og-message-item-body .sendbird-og-message-item-body__text-bubble {\n    position: relative;\n    padding: 8px 12px;\n    box-sizing: border-box;\n    border-radius: 16px 16px 0px 0px;\n    word-break: break-word; }\n    .sendbird-og-message-item-body .sendbird-og-message-item-body__text-bubble .sendbird-og-message-item-body__text-bubble__message {\n      display: inline;\n      margin: 0px 2px; }\n  .sendbird-og-message-item-body .sendbird-og-message-item-body__og-thumbnail {\n    position: relative;\n    overflow: hidden; }\n    .sendbird-og-message-item-body .sendbird-og-message-item-body__og-thumbnail .sendbird-og-message-item-body__og-thumbnail__image {\n      width: 100%;\n      position: relative;\n      display: flex;\n      justify-content: center;\n      align-items: center; }\n  .sendbird-og-message-item-body.reactions .sendbird-og-message-item-body__description {\n    border-radius: 0px; }\n  .sendbird-og-message-item-body .sendbird-og-message-item-body__description {\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    padding: 8px 12px;\n    display: flex;\n    flex-direction: column;\n    border-radius: 0px 0px 16px 16px; }\n    .sendbird-theme--light .sendbird-og-message-item-body .sendbird-og-message-item-body__description {\n      background-color: var(--sendbird-light-background-100); }\n    .sendbird-theme--dark .sendbird-og-message-item-body .sendbird-og-message-item-body__description {\n      background-color: var(--sendbird-dark-background-500); }\n    .sendbird-og-message-item-body .sendbird-og-message-item-body__description .sendbird-og-message-item-body__description__title,\n    .sendbird-og-message-item-body .sendbird-og-message-item-body__description .sendbird-og-message-item-body__description__description {\n      margin-bottom: 4px;\n      width: 100%;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      display: inline-block; }\n    .sendbird-og-message-item-body .sendbird-og-message-item-body__description .sendbird-og-message-item-body__description__url {\n      width: 100%;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      display: inline-block;\n      margin: 4px 0px; }\n  .sendbird-og-message-item-body .sendbird-og-message-item-body__og-thumbnail:hover,\n  .sendbird-og-message-item-body .sendbird-og-message-item-body__description:hover {\n    cursor: pointer; }\n  .sendbird-theme--light .sendbird-og-message-item-body.outgoing .sendbird-og-message-item-body__text-bubble {\n    background-color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-og-message-item-body.outgoing .sendbird-og-message-item-body__text-bubble {\n    background-color: var(--sendbird-dark-primary-200); }\n  .sendbird-theme--light .sendbird-og-message-item-body.incoming .sendbird-og-message-item-body__text-bubble {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-og-message-item-body.incoming .sendbird-og-message-item-body__text-bubble {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-theme--light .sendbird-og-message-item-body.mouse-hover .sendbird-og-message-item-body__description, .sendbird-theme--light .sendbird-og-message-item-body:hover .sendbird-og-message-item-body__description {\n    background-color: var(--sendbird-light-background-200); }\n  .sendbird-theme--dark .sendbird-og-message-item-body.mouse-hover .sendbird-og-message-item-body__description, .sendbird-theme--dark .sendbird-og-message-item-body:hover .sendbird-og-message-item-body__description {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-theme--light .sendbird-og-message-item-body.mouse-hover.outgoing .sendbird-og-message-item-body__text-bubble, .sendbird-theme--light .sendbird-og-message-item-body:hover.outgoing .sendbird-og-message-item-body__text-bubble {\n    background-color: var(--sendbird-light-primary-400); }\n  .sendbird-theme--dark .sendbird-og-message-item-body.mouse-hover.outgoing .sendbird-og-message-item-body__text-bubble, .sendbird-theme--dark .sendbird-og-message-item-body:hover.outgoing .sendbird-og-message-item-body__text-bubble {\n    background-color: var(--sendbird-dark-primary-300); }\n  .sendbird-theme--light .sendbird-og-message-item-body.mouse-hover.incoming .sendbird-og-message-item-body__text-bubble, .sendbird-theme--light .sendbird-og-message-item-body:hover.incoming .sendbird-og-message-item-body__text-bubble {\n    background-color: var(--sendbird-light-background-200); }\n  .sendbird-theme--dark .sendbird-og-message-item-body.mouse-hover.incoming .sendbird-og-message-item-body__text-bubble, .sendbird-theme--dark .sendbird-og-message-item-body:hover.incoming .sendbird-og-message-item-body__text-bubble {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-og-message-item-body .sendbird-og-message-item-body__cover {\n    display: none;\n    position: absolute;\n    top: 0%;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border-radius: 16px 16px 0px 0px; }\n\ndiv.sendbird-og-message-item-body__text-bubble {\n  margin: 0px; }\n\n.sendbird-unknown-message-item-body {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n  padding: 8px 12px;\n  border-radius: 16px; }\n  .sendbird-unknown-message-item-body.reactions {\n    border-radius: 16px 16px 0px 0px; }\n  .sendbird-theme--light .sendbird-unknown-message-item-body.outgoing {\n    background-color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-unknown-message-item-body.outgoing {\n    background-color: var(--sendbird-dark-primary-200); }\n  .sendbird-theme--light .sendbird-unknown-message-item-body.incoming {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-unknown-message-item-body.incoming {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-theme--light .sendbird-unknown-message-item-body.mouse-hover.outgoing, .sendbird-theme--light .sendbird-unknown-message-item-body:hover.outgoing {\n    background-color: var(--sendbird-light-primary-400); }\n  .sendbird-theme--dark .sendbird-unknown-message-item-body.mouse-hover.outgoing, .sendbird-theme--dark .sendbird-unknown-message-item-body:hover.outgoing {\n    background-color: var(--sendbird-dark-primary-300); }\n  .sendbird-theme--light .sendbird-unknown-message-item-body.mouse-hover.incoming, .sendbird-theme--light .sendbird-unknown-message-item-body:hover.incoming {\n    background-color: var(--sendbird-light-background-200); }\n  .sendbird-theme--dark .sendbird-unknown-message-item-body.mouse-hover.incoming, .sendbird-theme--dark .sendbird-unknown-message-item-body:hover.incoming {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-unknown-message-item-body .sendbird-unknown-message-item-body__header {\n    display: block; }\n  .sendbird-unknown-message-item-body .sendbird-unknown-message-item-body__description {\n    display: block; }\n\n.sendbird-quote-message {\n  position: relative;\n  display: inline-flex;\n  box-sizing: border-box;\n  flex-direction: column;\n  max-width: 400px; }\n  .sendbird-quote-message.incoming {\n    align-items: flex-start; }\n  .sendbird-quote-message.outgoing {\n    align-items: flex-end; }\n  .sendbird-quote-message .sendbird-quote-message__replied-to {\n    position: relative;\n    display: inline-flex;\n    flex-direction: row;\n    align-items: center;\n    height: 16px;\n    padding: 0px 12px; }\n    .sendbird-quote-message .sendbird-quote-message__replied-to .sendbird-quote-message__replied-to__icon {\n      position: relative;\n      margin-bottom: 4px;\n      margin-right: 4px; }\n    .sendbird-quote-message .sendbird-quote-message__replied-to .sendbird-quote-message__replied-to__text {\n      position: relative;\n      max-width: 360px;\n      overflow: hidden;\n      overflow-x: hidden;\n      white-space: nowrap;\n      word-break: keep-all;\n      text-overflow: ellipsis;\n      font-size: 12px; }\n  .sendbird-quote-message .sendbird-quote-message__replied-message {\n    position: relative;\n    display: inline-flex; }\n    .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__text-message {\n      position: relative;\n      white-space: pre-wrap;\n      word-break: break-all;\n      font-size: 12px;\n      padding: 8px 12px 16px 12px;\n      border-radius: 16px;\n      opacity: 0.5; }\n      .sendbird-theme--light .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__text-message {\n        background-color: var(--sendbird-light-background-100); }\n      .sendbird-theme--dark .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__text-message {\n        background-color: var(--sendbird-dark-background-500); }\n      .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__text-message .sendbird-quote-message__replied-message__text-message__word {\n        position: relative;\n        display: inline-flex;\n        max-height: 30px;\n        overflow: hidden;\n        text-overflow: ellipsis; }\n    .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message {\n      position: relative;\n      width: 144px;\n      height: 108px;\n      border-radius: 6.4px;\n      overflow: hidden; }\n      .sendbird-theme--light .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message {\n        background-color: var(--sendbird-light-background-100); }\n      .sendbird-theme--dark .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message {\n        background-color: var(--sendbird-dark-background-500); }\n      .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message .sendbird-quote-message__replied-message__thumbnail-message__video,\n      .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message .sendbird-quote-message__replied-message__thumbnail-message__image {\n        position: absolute;\n        top: 0px;\n        display: inline-flex;\n        width: 100%;\n        height: 100%;\n        opacity: 0.5; }\n      .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message .sendbird-quote-message__replied-message__thumbnail-message__placeholder {\n        position: absolute;\n        display: inline-flex;\n        width: 100%;\n        height: 100%;\n        justify-content: center;\n        align-items: center; }\n        .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message .sendbird-quote-message__replied-message__thumbnail-message__placeholder .sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon {\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          width: 22px;\n          height: 22px;\n          border-radius: 50%; }\n      .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message .sendbird-quote-message__replied-message__thumbnail-message__cover {\n        position: absolute;\n        display: inline-flex;\n        width: 100%;\n        height: 100%;\n        justify-content: center;\n        align-items: center;\n        top: 0px; }\n        .sendbird-theme--light .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message .sendbird-quote-message__replied-message__thumbnail-message__cover {\n          background-color: rgba(255, 255, 255, 0.4); }\n        .sendbird-theme--dark .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message .sendbird-quote-message__replied-message__thumbnail-message__cover {\n          background-color: rgba(255, 255, 255, 0.4); }\n        .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message .sendbird-quote-message__replied-message__thumbnail-message__cover .sendbird-quote-message__replied-message__thumbnail-message__cover__icon {\n          position: relative;\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          width: 22px;\n          height: 22px;\n          border-radius: 50%; }\n          .sendbird-theme--light .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message .sendbird-quote-message__replied-message__thumbnail-message__cover .sendbird-quote-message__replied-message__thumbnail-message__cover__icon {\n            background-color: white; }\n          .sendbird-theme--dark .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__thumbnail-message .sendbird-quote-message__replied-message__thumbnail-message__cover .sendbird-quote-message__replied-message__thumbnail-message__cover__icon {\n            background-color: white; }\n    .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__file-message {\n      position: relative;\n      display: inline-flex;\n      flex-direction: row;\n      font-size: 12px;\n      padding: 8px 12px 16px 12px;\n      border-radius: 16px;\n      opacity: 0.5; }\n      .sendbird-theme--light .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__file-message {\n        background-color: var(--sendbird-light-background-100); }\n      .sendbird-theme--dark .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__file-message {\n        background-color: var(--sendbird-dark-background-500); }\n      .sendbird-quote-message .sendbird-quote-message__replied-message .sendbird-quote-message__replied-message__file-message .sendbird-quote-message__replied-message__file-message__type-icon {\n        margin-right: 2px; }\n\n.sendbird-fileviewer__header__right__actions__download,\n.sendbird-fileviewer__header__right__actions__delete,\n.sendbird-fileviewer__header__right__actions__close {\n  width: 64px;\n  padding: 21px;\n  box-sizing: border-box;\n  cursor: pointer; }\n  .sendbird-fileviewer__header__right__actions__download .disabled,\n  .sendbird-fileviewer__header__right__actions__delete .disabled,\n  .sendbird-fileviewer__header__right__actions__close .disabled {\n    cursor: not-allowed; }\n\n.sendbird-fileviewer {\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 100000; }\n  .sendbird-theme--light .sendbird-fileviewer {\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-fileviewer {\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-fileviewer .sendbird-fileviewer__header {\n    height: 64px;\n    min-height: 64px;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: space-between; }\n    .sendbird-theme--light .sendbird-fileviewer .sendbird-fileviewer__header {\n      border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-fileviewer .sendbird-fileviewer__header {\n      border-bottom: 1px solid var(--sendbird-dark-ondark-04); }\n    .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__left {\n      box-sizing: border-box;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      height: 64px;\n      padding: 16px 20px; }\n      .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__left .sendbird-fileviewer__header__left__avatar {\n        margin-right: 8px; }\n      .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__left .sendbird-fileviewer__header__left__filename {\n        max-width: 500px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: inline-block; }\n      .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__left .sendbird-fileviewer__header__left__sender-name {\n        max-width: 200px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: inline-flex;\n        margin-left: 8px;\n        padding-top: 5px; }\n    .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__right {\n      display: flex;\n      width: 160px;\n      justify-content: flex-end; }\n      .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__right .sendbird-fileviewer__header__right__actions {\n        right: 0;\n        display: flex;\n        flex-direction: row; }\n      .sendbird-theme--light .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__right .sendbird-fileviewer__header__right__actions__close {\n        border-left: 1px solid var(--sendbird-light-onlight-04); }\n      .sendbird-theme--dark .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__right .sendbird-fileviewer__header__right__actions__close {\n        border-left: 1px solid var(--sendbird-dark-ondark-04); }\n  .sendbird-fileviewer .sendbird-fileviewer__content {\n    height: calc(100% - 72px);\n    margin-top: 8px;\n    overflow-y: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n    .sendbird-fileviewer .sendbird-fileviewer__content .sendbird-fileviewer__content__video {\n      max-width: 100%;\n      max-height: 100%; }\n    .sendbird-fileviewer .sendbird-fileviewer__content .sendbird-fileviewer__content__img {\n      max-width: 90%;\n      max-height: 90%; }\n    .sendbird-fileviewer .sendbird-fileviewer__content .sendbird-fileviewer__content__unsupported {\n      max-width: 100%;\n      max-height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center; }\n\n.sendbird-notification {\n  margin-top: 8px;\n  margin-left: 24px;\n  margin-right: 24px;\n  border-radius: 4px;\n  padding: 0px 2px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center; }\n  .sendbird-theme--light .sendbird-notification {\n    background-color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-notification {\n    background-color: var(--sendbird-dark-primary-200); }\n  .sendbird-notification:hover {\n    cursor: pointer; }\n    .sendbird-theme--light .sendbird-notification:hover {\n      background-color: var(--sendbird-light-primary-400); }\n    .sendbird-theme--dark .sendbird-notification:hover {\n      background-color: var(--sendbird-dark-primary-300); }\n  .sendbird-theme--light .sendbird-notification.sendbird-notification--frozen {\n    background-color: var(--sendbird-light-information-100); }\n  .sendbird-theme--dark .sendbird-notification.sendbird-notification--frozen {\n    background-color: var(--sendbird-dark-information-100); }\n  .sendbird-theme--light .sendbird-notification.sendbird-notification--frozen .sendbird-notification__text {\n    color: var(--sendbird-light-onlight-01); }\n  .sendbird-theme--dark .sendbird-notification.sendbird-notification--frozen .sendbird-notification__text {\n    color: var(--sendbird-dark-onlight-01); }\n  .sendbird-notification .sendbird-notification__text {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-right: 8px; }\n\n.sendbird-notification {\n  margin-top: 8px;\n  margin-left: 24px;\n  margin-right: 24px;\n  border-radius: 4px;\n  padding: 0px 2px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center; }\n  .sendbird-theme--light .sendbird-notification {\n    background-color: var(--sendbird-light-primary-300); }\n  .sendbird-theme--dark .sendbird-notification {\n    background-color: var(--sendbird-dark-primary-200); }\n  .sendbird-notification:hover {\n    cursor: pointer; }\n    .sendbird-theme--light .sendbird-notification:hover {\n      background-color: var(--sendbird-light-primary-400); }\n    .sendbird-theme--dark .sendbird-notification:hover {\n      background-color: var(--sendbird-dark-primary-300); }\n  .sendbird-theme--light .sendbird-notification.sendbird-notification--frozen {\n    background-color: var(--sendbird-light-information-100); }\n  .sendbird-theme--dark .sendbird-notification.sendbird-notification--frozen {\n    background-color: var(--sendbird-dark-information-100); }\n  .sendbird-theme--light .sendbird-notification.sendbird-notification--frozen .sendbird-notification__text {\n    color: var(--sendbird-light-onlight-01); }\n  .sendbird-theme--dark .sendbird-notification.sendbird-notification--frozen .sendbird-notification__text {\n    color: var(--sendbird-dark-onlight-01); }\n  .sendbird-notification .sendbird-notification__text {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-right: 8px; }\n\n.sendbird-message-input-wrapper {\n  position: relative;\n  width: 100%; }\n  .sendbird-message-input-wrapper .sendbird-message-input-wrapper__quote-message-input {\n    position: relative;\n    width: 100%; }\n    .sendbird-theme--light .sendbird-message-input-wrapper .sendbird-message-input-wrapper__quote-message-input {\n      border-top: solid 1px var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-message-input-wrapper .sendbird-message-input-wrapper__quote-message-input {\n      border-top: solid 1px var(--sendbird-dark-ondark-04); }\n  .sendbird-message-input-wrapper .sendbird-message-input-wrapper__message-input {\n    position: relative;\n    width: 100%;\n    box-sizing: border-box;\n    padding-left: 24px;\n    padding-right: 24px; }\n\n.sendbird-quote_message_input {\n  position: relative;\n  padding: 16px 80px 16px 40px;\n  width: 100%;\n  height: 76px;\n  display: flex;\n  flex-direction: row;\n  box-sizing: border-box; }\n  .sendbird-quote_message_input .sendbird-quote_message_input__avatar {\n    width: 44px;\n    min-width: 44px;\n    height: 44px;\n    min-height: 44px;\n    position: relative;\n    border-radius: 8px;\n    display: flex;\n    justify-content: center;\n    align-items: center; }\n    .sendbird-theme--light .sendbird-quote_message_input .sendbird-quote_message_input__avatar {\n      background-color: var(--sendbird-light-background-100); }\n    .sendbird-theme--dark .sendbird-quote_message_input .sendbird-quote_message_input__avatar {\n      background-color: var(--sendbird-dark-background-500); }\n  .sendbird-quote_message_input .sendbird-quote_message_input__body {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    overflow: hidden; }\n    .sendbird-quote_message_input .sendbird-quote_message_input__body .sendbird-quote_message_input__body__sender-name {\n      position: relative;\n      width: 100%;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      box-sizing: border-box;\n      margin-bottom: 8px; }\n    .sendbird-quote_message_input .sendbird-quote_message_input__body .sendbird-quote_message_input__body__message-content {\n      position: relative;\n      width: 100%;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      box-sizing: border-box; }\n  .sendbird-quote_message_input .sendbird-quote_message_input__close-button {\n    position: absolute;\n    top: 26px;\n    right: 40px; }\n    .sendbird-quote_message_input .sendbird-quote_message_input__close-button:hover {\n      cursor: pointer; }\n\n.sendbird-channel-settings {\n  height: 100%;\n  width: 320px;\n  display: inline-block;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-channel-settings {\n    background-color: var(--sendbird-light-background-50);\n    border-left: 1px solid var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-channel-settings {\n    background-color: var(--sendbird-dark-background-600);\n    border-left: 1px solid var(--sendbird-dark-background-600); }\n  .sendbird-channel-settings .sendbird-channel-settings__header-icon {\n    cursor: pointer;\n    position: absolute;\n    top: 16px;\n    right: 16px; }\n    .sendbird-theme--light .sendbird-channel-settings .sendbird-channel-settings__header-icon .sendbird-channel-settings__close-icon path {\n      fill: var(--sendbird-light-onlight-01); }\n    .sendbird-theme--dark .sendbird-channel-settings .sendbird-channel-settings__header-icon .sendbird-channel-settings__close-icon path {\n      fill: var(--sendbird-dark-ondark-01); }\n  .sendbird-channel-settings .sendbird-channel-settings__members .sendbird-badge__text {\n    margin-top: -2px; }\n  .sendbird-channel-settings .sendbird-channel-settings__header {\n    height: 64px;\n    min-height: 64px;\n    position: relative;\n    padding: 20px 24px;\n    box-sizing: border-box; }\n    .sendbird-theme--light .sendbird-channel-settings .sendbird-channel-settings__header {\n      border-bottom: solid 1px var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-channel-settings .sendbird-channel-settings__header {\n      border-bottom: solid 1px var(--sendbird-dark-ondark-04); }\n  .sendbird-channel-settings .sendbird-channel-settings__scroll-area {\n    display: flex;\n    flex-grow: 1;\n    flex-direction: column;\n    height: calc(100% - 64px);\n    overflow-y: auto; }\n  .sendbird-channel-settings .sendbird-channel-settings__panel-item {\n    cursor: pointer;\n    position: relative;\n    padding: 12px 22px 10px 56px; }\n    .sendbird-theme--light .sendbird-channel-settings .sendbird-channel-settings__panel-item {\n      background-color: var(--sendbird-light-background-50);\n      border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-channel-settings .sendbird-channel-settings__panel-item {\n      background-color: var(--sendbird-dark-background-600);\n      border-bottom: 1px solid var(--sendbird-dark-ondark-04); }\n    .sendbird-channel-settings .sendbird-channel-settings__panel-item:focus {\n      outline: none; }\n    .sendbird-channel-settings .sendbird-channel-settings__panel-item.sendbird-channel-settings__panel-item__disabled {\n      cursor: not-allowed; }\n  .sendbird-channel-settings .sendbird-channel-settings__panel-icon-left,\n  .sendbird-channel-settings .sendbird-channel-settings__panel-icon-right {\n    position: absolute;\n    top: 10px; }\n  .sendbird-channel-settings .sendbird-channel-settings__panel-icon-left {\n    left: 16px; }\n  .sendbird-channel-settings .sendbird-channel-settings__panel-icon-right {\n    right: 16px; }\n  .sendbird-channel-settings .sendbird-channel-settings__panel-icon--open {\n    transform: rotate(90deg); }\n  .sendbird-theme--light .sendbird-channel-settings .sendbird-channel-settings__panel-icon--chevron path {\n    fill: var(--sendbird-light-onlight-01); }\n  .sendbird-theme--dark .sendbird-channel-settings .sendbird-channel-settings__panel-icon--chevron path {\n    fill: var(--sendbird-dark-ondark-01); }\n\n.sendbird-channel-profile {\n  position: relative;\n  text-align: center;\n  padding: 32px 40px 27px 40px; }\n  .sendbird-theme--light .sendbird-channel-profile {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-channel-profile {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-channel-profile .sendbird-channel-profile--inner {\n    height: 92px; }\n  .sendbird-channel-profile .sendbird-channel-profile__avatar {\n    margin-bottom: 16px;\n    display: flex;\n    justify-content: center; }\n  .sendbird-channel-profile .sendbird-channel-profile__title {\n    display: block;\n    max-width: 240px;\n    white-space: nowrap;\n    overflow-x: hidden;\n    text-overflow: ellipsis;\n    height: 18px; }\n  .sendbird-channel-profile .sendbird-channel-profile__edit {\n    position: absolute;\n    top: 10px;\n    right: 16px; }\n\n.channel-profile-form .channel-profile-form__img-section {\n  position: relative; }\n\n.channel-profile-form .channel-profile-form__avatar-button {\n  position: absolute;\n  top: 54px;\n  left: 96px; }\n\n.channel-profile-form .channel-profile-form__avatar {\n  margin-top: 16px; }\n\n.channel-profile-form .channel-profile-form__name-section {\n  margin-top: 12px; }\n  .channel-profile-form .channel-profile-form__name-section .sendbird-input {\n    height: 40px; }\n\n.sendbird-channel-settings__operator .sendbird-channel-settings__accordion-icon {\n  position: absolute;\n  left: 14px; }\n\n.sendbird-channel-settings__operator .sendbird-accordion__panel-heder {\n  position: relative; }\n\n.sendbird-more-members__popup-scroll {\n  max-height: 420px;\n  overflow: scroll; }\n  .sendbird-more-members__popup-scroll .sendbird-user-list-item__operator {\n    right: 72px; }\n  .sendbird-more-members__popup-scroll .sendbird-user-list-item__title {\n    max-width: 240px; }\n\n.sendbird-channel-settings__empty-list {\n  text-align: center;\n  margin-top: 12px;\n  margin-bottom: 4px;\n  display: block; }\n\n.sendbird-channel-settings-accordion__footer {\n  padding-top: 16px;\n  display: flex;\n  justify-content: left;\n  padding-left: 12px; }\n  .sendbird-channel-settings-accordion__footer .sendbird-button:nth-child(2) {\n    margin-left: 8px; }\n\n.sendbird-channel-settings__freeze {\n  max-width: 320px;\n  position: relative;\n  padding: 12px 22px 10px 56px; }\n  .sendbird-theme--light .sendbird-channel-settings__freeze {\n    background-color: var(--sendbird-light-background-50);\n    border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-channel-settings__freeze {\n    background-color: var(--sendbird-dark-background-600);\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04); }\n\n.sendbird-channel-settings__frozen-icon {\n  position: absolute;\n  right: 20px;\n  top: 12px; }\n  .sendbird-channel-settings__frozen-icon .sendbird-icon {\n    cursor: pointer; }\n\n.sendbird-channel-settings__members-list .sendbird-badge,\n.sendbird-channel-settings__members .sendbird-badge {\n  position: absolute;\n  right: 44px;\n  top: 12px; }\n  .sendbird-theme--light .sendbird-channel-settings__members-list .sendbird-badge, .sendbird-theme--light\n  .sendbird-channel-settings__members .sendbird-badge {\n    background-color: var(--sendbird-light-background-200); }\n  .sendbird-theme--dark .sendbird-channel-settings__members-list .sendbird-badge, .sendbird-theme--dark\n  .sendbird-channel-settings__members .sendbird-badge {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-theme--light .sendbird-channel-settings__members-list .sendbird-badge .sendbird-label, .sendbird-theme--light\n  .sendbird-channel-settings__members .sendbird-badge .sendbird-label {\n    color: var(--sendbird-light-onlight-02); }\n  .sendbird-theme--dark .sendbird-channel-settings__members-list .sendbird-badge .sendbird-label, .sendbird-theme--dark\n  .sendbird-channel-settings__members .sendbird-badge .sendbird-label {\n    color: var(--sendbird-dark-ondark-02); }\n\n.sendbird-accordion {\n  padding: 8px 0px 16px 0px;\n  position: relative;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-accordion {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-accordion {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-accordion .sendbird-accordion__member {\n    position: relative;\n    padding: 12px 0px 12px 44px;\n    height: 40px;\n    box-sizing: border-box; }\n  .sendbird-accordion .sendbird-accordion__footer {\n    display: flex;\n    justify-content: flex-start;\n    margin-top: 8px; }\n\n.sendbird-accordion__panel-header {\n  cursor: pointer;\n  position: relative;\n  padding: 12px 22px 10px 56px; }\n  .sendbird-theme--light .sendbird-accordion__panel-header {\n    background-color: var(--sendbird-light-background-50);\n    border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-accordion__panel-header {\n    background-color: var(--sendbird-dark-background-600);\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04); }\n  .sendbird-accordion__panel-header:focus {\n    outline: none; }\n  .sendbird-accordion__panel-header.sendbird-accordion__panel-item__disabled {\n    cursor: not-allowed; }\n\n.sendbird-accordion__panel-icon-left,\n.sendbird-accordion__panel-icon-right {\n  position: absolute;\n  top: 10px; }\n\n.sendbird-accordion__panel-icon-left {\n  left: 16px; }\n\n.sendbird-accordion__panel-icon-right {\n  right: 16px; }\n\n.sendbird-accordion__panel-icon--open {\n  transform: rotate(90deg); }\n\n.sendbird-theme--light .sendbird-accordion__panel-icon--chevron path {\n  fill: var(--sendbird-light-onlight-01); }\n\n.sendbird-theme--dark .sendbird-accordion__panel-icon--chevron path {\n  fill: var(--sendbird-dark-ondark-01); }\n\n.sendbird-theme--light .sendbird-accordion__panel-icon__leave path {\n  fill: var(--sendbird-light-error-300); }\n\n.sendbird-theme--dark .sendbird-accordion__panel-icon__leave path {\n  fill: var(--sendbird-dark-error-300); }\n\n.sendbird-user-list-item--small {\n  display: block;\n  position: relative;\n  box-sizing: border-box;\n  height: 40px; }\n  .sendbird-user-list-item--small__avatar {\n    cursor: pointer;\n    position: absolute;\n    top: 10px;\n    left: 12px; }\n  .sendbird-user-list-item--small .sendbird-muted-avatar {\n    position: absolute;\n    top: 10px;\n    left: 12px;\n    z-index: 2;\n    pointer-events: none; }\n  .sendbird-user-list-item--small__title {\n    position: absolute;\n    top: 10px;\n    left: 54px;\n    width: 160px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .sendbird-user-list-item--small__subtitle {\n    position: absolute;\n    top: 23px;\n    left: 140px;\n    max-width: 237px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .sendbird-user-list-item--small__checkbox {\n    position: absolute;\n    top: 16px;\n    right: 16px; }\n  .sendbird-user-list-item--small__action {\n    display: none;\n    position: absolute;\n    right: 10px;\n    top: 4px; }\n  .sendbird-user-list-item--small__operator {\n    position: absolute;\n    right: 24px;\n    top: 10px; }\n  .sendbird-theme--light .sendbird-user-list-item--small:hover, .sendbird-theme--light .sendbird-user-list-item--small.sendbird-icon--pressed {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-user-list-item--small:hover, .sendbird-theme--dark .sendbird-user-list-item--small.sendbird-icon--pressed {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-user-list-item--small:hover .sendbird-user-list-item--small__action, .sendbird-user-list-item--small.sendbird-icon--pressed .sendbird-user-list-item--small__action {\n    display: block; }\n  .sendbird-user-list-item--small:hover .sendbird-user-list-item--small__operator, .sendbird-user-list-item--small.sendbird-icon--pressed .sendbird-user-list-item--small__operator {\n    display: none; }\n  .sendbird-theme--light .sendbird-user-list-item--small.sendbird-icon--pressed .sendbird-iconbutton {\n    background-color: var(--sendbird-light-primary-100); }\n  .sendbird-theme--dark .sendbird-user-list-item--small.sendbird-icon--pressed .sendbird-iconbutton {\n    background-color: var(--sendbird-dark-background-700); }\n\n.sendbird-message-search-pannel {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  height: 100%;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-message-search-pannel {\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-message-search-pannel {\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-message-search-pannel .sendbird-message-search-pannel__input__container__input-area {\n    position: absolute;\n    top: 14px;\n    left: 48px;\n    margin: 0px;\n    padding: 0px;\n    border: 0px;\n    outline: none;\n    font-size: 14px;\n    width: calc(100% - 90px); }\n    .sendbird-theme--light .sendbird-message-search-pannel .sendbird-message-search-pannel__input__container__input-area {\n      color: var(--sendbird-light-onlight-01);\n      background-color: var(--sendbird-light-background-50); }\n    .sendbird-theme--dark .sendbird-message-search-pannel .sendbird-message-search-pannel__input__container__input-area {\n      color: var(--sendbird-dark-ondark-01);\n      background-color: var(--sendbird-dark-background-600); }\n  .sendbird-message-search-pannel .sendbird-message-search-pannel__header {\n    position: relative;\n    display: flex;\n    width: 100%;\n    height: 64px;\n    min-height: 64px;\n    box-sizing: border-box; }\n    .sendbird-theme--light .sendbird-message-search-pannel .sendbird-message-search-pannel__header {\n      border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-message-search-pannel .sendbird-message-search-pannel__header {\n      border-bottom: 1px solid var(--sendbird-dark-ondark-04); }\n    .sendbird-message-search-pannel .sendbird-message-search-pannel__header .sendbird-message-search-pannel__header__title {\n      position: absolute;\n      top: 20px;\n      left: 24px;\n      width: calc(100% - 74px);\n      overflow-x: hidden;\n      word-break: keep-all;\n      text-overflow: ellipsis; }\n    .sendbird-message-search-pannel .sendbird-message-search-pannel__header .sendbird-message-search-pannel__header__close-button {\n      position: absolute;\n      top: 16px;\n      right: 16px; }\n  .sendbird-message-search-pannel .sendbird-message-search-pannel__input {\n    display: flex;\n    position: relative;\n    padding: 16px;\n    box-sizing: border-box; }\n    .sendbird-message-search-pannel .sendbird-message-search-pannel__input .sendbird-message-search-pannel__input__container {\n      position: relative;\n      border-radius: 4px;\n      width: 100%;\n      height: 44px; }\n      .sendbird-theme--light .sendbird-message-search-pannel .sendbird-message-search-pannel__input .sendbird-message-search-pannel__input__container {\n        border: 1px solid var(--sendbird-light-onlight-03); }\n      .sendbird-theme--dark .sendbird-message-search-pannel .sendbird-message-search-pannel__input .sendbird-message-search-pannel__input__container {\n        border: 1px solid var(--sendbird-dark-ondark-03); }\n      .sendbird-message-search-pannel .sendbird-message-search-pannel__input .sendbird-message-search-pannel__input__container .sendbird-message-search-pannel__input__container__search-icon {\n        position: absolute;\n        top: 10px;\n        left: 16px; }\n      .sendbird-message-search-pannel .sendbird-message-search-pannel__input .sendbird-message-search-pannel__input__container .sendbird-message-search-pannel__input__container__spinner {\n        position: absolute;\n        top: 12px;\n        right: 12px; }\n      .sendbird-message-search-pannel .sendbird-message-search-pannel__input .sendbird-message-search-pannel__input__container .sendbird-message-search-pannel__input__container__reset-input-button {\n        position: absolute;\n        top: 12px;\n        right: 12px; }\n        .sendbird-message-search-pannel .sendbird-message-search-pannel__input .sendbird-message-search-pannel__input__container .sendbird-message-search-pannel__input__container__reset-input-button:hover {\n          cursor: pointer; }\n  .sendbird-message-search-pannel .sendbird-message-search-pannel__message-search {\n    position: relative;\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    overflow-y: hidden; }\n\n.sendbird-message-search {\n  position: relative;\n  height: 100%;\n  overflow: scroll; }\n  .sendbird-theme--light .sendbird-message-search {\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-message-search {\n    background-color: var(--sendbird-dark-background-600); }\n\n.sendbird-message-search-item {\n  display: inline-flex;\n  flex-direction: row;\n  width: 100%;\n  height: 80px;\n  position: relative;\n  cursor: pointer; }\n  .sendbird-theme--light .sendbird-message-search-item {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-message-search-item {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-theme--light .sendbird-message-search-item:hover {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-message-search-item:hover {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-message-search-item .sendbird-message-search-item__left {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 90px;\n    height: 80px; }\n  .sendbird-message-search-item .sendbird-message-search-item__right {\n    display: flex;\n    flex-direction: column;\n    width: calc(100% - 106px); }\n    .sendbird-message-search-item .sendbird-message-search-item__right .sendbird-message-search-item__right__sender-name {\n      display: flex;\n      max-width: 280px;\n      height: 16px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      position: absolute;\n      top: 12px; }\n    .sendbird-message-search-item .sendbird-message-search-item__right .sendbird-message-search-item__right__message-text {\n      box-sizing: border-box;\n      display: flex;\n      width: inherit;\n      height: 32px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      position: absolute;\n      top: 36px;\n      word-break: break-word; }\n    .sendbird-message-search-item .sendbird-message-search-item__right .sendbird-message-search-item__right__message-created-at {\n      position: absolute;\n      top: 12px;\n      right: 18px; }\n  .sendbird-message-search-item .sendbird-message-search-item__right-footer {\n    width: 16px; }\n\n.sendbird-theme--light .sendbird-message-search-item.sendbird-message-search-item--selected {\n  background-color: var(--sendbird-light-primary-100); }\n\n.sendbird-theme--dark .sendbird-message-search-item.sendbird-message-search-item--selected {\n  background-color: var(--sendbird-dark-background-700); }\n\n.sendbird-theme--light .sendbird-message-search-item.sendbird-message-search-item--selected .sendbird-message-search-item__left {\n  border-left: 4px solid var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-message-search-item.sendbird-message-search-item--selected .sendbird-message-search-item__left {\n  border-left: 4px solid var(--sendbird-dark-primary-200); }\n\n.sendbird-message-search-file-item {\n  position: relative;\n  display: inline-flex;\n  flex-direction: row;\n  width: 100%;\n  height: 80px;\n  cursor: pointer; }\n  .sendbird-theme--light .sendbird-message-search-file-item {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-message-search-file-item {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-theme--light .sendbird-message-search-file-item:hover {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-message-search-file-item:hover {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-message-search-file-item .sendbird-message-search-file-item__left {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 90px;\n    height: 80px; }\n  .sendbird-message-search-file-item .sendbird-message-search-file-item__right {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    width: calc(100% - 106px); }\n    .sendbird-message-search-file-item .sendbird-message-search-file-item__right .sendbird-message-search-file-item__right__sender-name {\n      position: absolute;\n      top: 12px;\n      display: flex;\n      max-width: 280px;\n      height: 16px;\n      overflow: hidden;\n      text-overflow: ellipsis; }\n    .sendbird-message-search-file-item .sendbird-message-search-file-item__right .sendbird-message-search-file-item__right__content {\n      position: absolute;\n      top: 36px;\n      box-sizing: border-box;\n      width: 100%;\n      height: 32px;\n      display: flex;\n      flex-direction: row;\n      align-items: center; }\n      .sendbird-message-search-file-item .sendbird-message-search-file-item__right .sendbird-message-search-file-item__right__content .sendbird-message-search-file-item__right__content__type-icon {\n        position: relative;\n        margin-right: 4px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 26px;\n        min-width: 26px;\n        height: 26px;\n        border-radius: 8px; }\n        .sendbird-theme--light .sendbird-message-search-file-item .sendbird-message-search-file-item__right .sendbird-message-search-file-item__right__content .sendbird-message-search-file-item__right__content__type-icon {\n          background-color: var(--sendbird-light-background-100); }\n        .sendbird-theme--dark .sendbird-message-search-file-item .sendbird-message-search-file-item__right .sendbird-message-search-file-item__right__content .sendbird-message-search-file-item__right__content__type-icon {\n          background-color: var(--sendbird-dark-background-500); }\n      .sendbird-message-search-file-item .sendbird-message-search-file-item__right .sendbird-message-search-file-item__right__content .sendbird-message-search-file-item__right__content__url {\n        height: 16px;\n        position: relative;\n        display: flex;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        word-break: keep-all;\n        white-space: nowrap; }\n  .sendbird-message-search-file-item .sendbird-message-search-file-item__message-created-at {\n    position: absolute;\n    top: 12px;\n    right: 18px; }\n  .sendbird-message-search-file-item .sendbird-message-search-file-item__right-footer {\n    width: 16px; }\n\n.sendbird-theme--light .sendbird-message-search-file-item.sendbird-message-search-file-item--selected {\n  background-color: var(--sendbird-light-primary-100); }\n\n.sendbird-theme--dark .sendbird-message-search-file-item.sendbird-message-search-file-item--selected {\n  background-color: var(--sendbird-dark-background-700); }\n\n.sendbird-theme--light .sendbird-message-search-file-item.sendbird-message-search-file-item--selected .sendbird-message-search-file-item__left {\n  border-left: 4px solid var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-message-search-file-item.sendbird-message-search-file-item--selected .sendbird-message-search-file-item__left {\n  border-left: 4px solid var(--sendbird-dark-primary-200); }\n\n.sendbird-app__wrap {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  box-sizing: border-box; }\n  .sendbird-app__wrap .sendbird-app__searchpanel-wrap {\n    width: 320px;\n    overflow-y: scroll;\n    box-sizing: border-box; }\n    .sendbird-theme--light .sendbird-app__wrap .sendbird-app__searchpanel-wrap {\n      border-top: 1px solid var(--sendbird-light-onlight-04);\n      border-right: 1px solid var(--sendbird-light-onlight-04);\n      border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-app__wrap .sendbird-app__searchpanel-wrap {\n      border-top: 1px solid var(--sendbird-dark-background-600);\n      border-right: 1px solid var(--sendbird-dark-background-600);\n      border-bottom: 1px solid var(--sendbird-dark-background-600); }\n  .sendbird-app__wrap .sendbird-app__conversation-wrap {\n    flex: 1;\n    position: relative;\n    width: calc(100% - 320px); }\n  .sendbird-app__wrap .sendbird-app__channellist-wrap {\n    max-width: 320px; }\n    .sendbird-theme--light .sendbird-app__wrap .sendbird-app__channellist-wrap {\n      border-top: 1px solid var(--sendbird-light-onlight-04);\n      border-left: 1px solid var(--sendbird-light-onlight-04);\n      border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-app__wrap .sendbird-app__channellist-wrap {\n      border-top: 1px solid var(--sendbird-dark-background-600);\n      border-left: 1px solid var(--sendbird-dark-background-600);\n      border-bottom: 1px solid var(--sendbird-dark-background-600); }\n  .sendbird-theme--light .sendbird-app__wrap .sendbird-app__conversation--settings-open .sendbird-chat-header__info {\n    background-color: var(--sendbird-light-primary-100); }\n  .sendbird-theme--dark .sendbird-app__wrap .sendbird-app__conversation--settings-open .sendbird-chat-header__info {\n    background-color: var(--sendbird-dark-background-700); }\n  .sendbird-app__wrap .sendbird-chat-header__search {\n    margin-right: 16px; }\n  .sendbird-theme--light .sendbird-app__wrap .sendbird-app__conversation--search-open .sendbird-chat-header__search {\n    background-color: var(--sendbird-light-primary-100); }\n  .sendbird-theme--dark .sendbird-app__wrap .sendbird-app__conversation--search-open .sendbird-chat-header__search {\n    background-color: var(--sendbird-dark-background-700); }\n  .sendbird-app__wrap .sendbird-channel-settings {\n    border-left: none; }\n    .sendbird-theme--light .sendbird-app__wrap .sendbird-channel-settings {\n      border-top: 1px solid var(--sendbird-light-onlight-04);\n      border-right: 1px solid var(--sendbird-light-onlight-04);\n      border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-app__wrap .sendbird-channel-settings {\n      border-top: 1px solid var(--sendbird-dark-background-600);\n      border-right: 1px solid var(--sendbird-dark-background-600);\n      border-bottom: 1px solid var(--sendbird-dark-background-600); }\n    .sendbird-app__wrap .sendbird-channel-settings .sendbird-channel-settings__header {\n      height: 64px; }\n\n.sendbird-openchannel-conversation {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%; }\n  .sendbird-theme--light .sendbird-openchannel-conversation {\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-openchannel-conversation {\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-openchannel-conversation .sendbird-openchannel-conversation-scroll {\n    overflow-y: auto;\n    flex: 1 1 0;\n    order: 2;\n    width: 100%; }\n  .sendbird-openchannel-conversation .sendbird-openchannel-footer {\n    order: 3;\n    padding: 12px 24px 24px 24px; }\n  .sendbird-openchannel-conversation .sendbird-openchannel-conversation-scroll-container {\n    display: flex;\n    height: 100%;\n    overflow-y: auto;\n    overflow-x: hidden;\n    flex-direction: column; }\n    .sendbird-openchannel-conversation .sendbird-openchannel-conversation-scroll-container .sendbird-openchannel-conversation-scroll-padding {\n      flex: 1 1 0; }\n\n.sendbird-frozen-channel-notification {\n  position: relative;\n  margin-top: 8px;\n  margin-right: 24px;\n  margin-left: 24px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px; }\n  .sendbird-theme--light .sendbird-frozen-channel-notification {\n    background-color: var(--sendbird-light-information-100); }\n  .sendbird-theme--dark .sendbird-frozen-channel-notification {\n    background-color: var(--sendbird-dark-information-100); }\n\n.sendbird-openchannel-conversation-header {\n  position: relative;\n  min-height: 64px;\n  box-sizing: border-box; }\n  .sendbird-theme--light .sendbird-openchannel-conversation-header {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-openchannel-conversation-header {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04); }\n  .sendbird-openchannel-conversation-header .sendbird-openchannel-conversation-header__left__title {\n    white-space: nowrap;\n    overflow-x: hidden;\n    text-overflow: ellipsis;\n    max-width: calc(100% - 120px); }\n  .sendbird-openchannel-conversation-header__left [class*=sendbird-openchannel-conversation-header__left__cover-image] {\n    position: absolute;\n    left: 20px;\n    top: 16px; }\n  .sendbird-openchannel-conversation-header__left__title {\n    position: absolute;\n    left: 60px;\n    top: 12px; }\n  .sendbird-openchannel-conversation-header__left__sub-title {\n    position: absolute;\n    left: 60px;\n    top: 36px; }\n  .sendbird-openchannel-conversation-header__right {\n    position: absolute;\n    top: 0px;\n    right: 0px;\n    width: 64px;\n    height: 64px; }\n    .sendbird-openchannel-conversation-header__right__trigger {\n      position: absolute;\n      top: 16px;\n      right: 16px;\n      display: flex;\n      align-items: center;\n      justify-content: center; }\n\n.sendbird-openchannel-conversation-header__left__cover-image--icon {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%; }\n  .sendbird-theme--light .sendbird-openchannel-conversation-header__left__cover-image--icon {\n    background-color: var(--sendbird-light-background-300); }\n  .sendbird-theme--dark .sendbird-openchannel-conversation-header__left__cover-image--icon {\n    background-color: var(--sendbird-dark-background-300); }\n\n.sendbird-openchannel-conversation-scroll {\n  position: relative;\n  width: 100%; }\n  .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container {\n    position: -webkit-sticky;\n    position: sticky;\n    width: 100%;\n    bottom: 0px;\n    height: 100%;\n    overflow: hidden; }\n    .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container .sendbird-openchannel-conversation-scroll__container__padding {\n      height: 8px; }\n    .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container .sendbird-openchannel-conversation-scroll__container__item-container {\n      width: 100%;\n      height: 100%;\n      overflow: scroll; }\n    .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container .sendbird-openchannel-conversation-scroll__container__item-container.no-messages {\n      width: 100%;\n      height: 100%; }\n      .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container .sendbird-openchannel-conversation-scroll__container__item-container.no-messages .sendbird-openchannel-conversation-scroll__container__place-holder {\n        width: 100%;\n        height: 100%; }\n  .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container__scroll-bottom-button {\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    bottom: 8px;\n    left: calc(50% - 20px);\n    width: 40px;\n    height: 40px;\n    border-radius: 24px;\n    z-index: 1; }\n    .sendbird-theme--light .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container__scroll-bottom-button {\n      background-color: var(--sendbird-light-primary-300);\n      box-shadow: var(--sendbird-light-shadow-05); }\n    .sendbird-theme--dark .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container__scroll-bottom-button {\n      background-color: var(--sendbird-dark-primary-200);\n      box-shadow: var(--sendbird-dark-shadow-05); }\n    .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container__scroll-bottom-button:hover {\n      cursor: pointer; }\n      .sendbird-theme--light .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container__scroll-bottom-button:hover {\n        background-color: var(--sendbird-light-primary-400); }\n      .sendbird-theme--dark .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container__scroll-bottom-button:hover {\n        background-color: var(--sendbird-dark-primary-300); }\n    .sendbird-theme--light .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container__scroll-bottom-button:active {\n      background-color: var(--sendbird-light-primary-500); }\n    .sendbird-theme--dark .sendbird-openchannel-conversation-scroll .sendbird-openchannel-conversation-scroll__container__scroll-bottom-button:active {\n      background-color: var(--sendbird-dark-primary-400); }\n\n.sendbird-openchannel-user-message {\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  width: 100%; }\n  .sendbird-theme--light .sendbird-openchannel-user-message:hover {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-openchannel-user-message:hover {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-openchannel-user-message:hover .sendbird-openchannel-user-message__context-menu {\n    display: block; }\n  .sendbird-openchannel-user-message .sendbird-openchannel-user-message__left {\n    position: relative;\n    display: flex;\n    width: 52px;\n    min-width: 52px; }\n    .sendbird-openchannel-user-message .sendbird-openchannel-user-message__left .sendbird-openchannel-user-message__left__avatar {\n      position: relative;\n      display: flex;\n      margin-top: 8px;\n      margin-left: 24px; }\n  .sendbird-openchannel-user-message .sendbird-openchannel-user-message__right {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    margin: 8px 24px 8px 12px; }\n    .sendbird-openchannel-user-message .sendbird-openchannel-user-message__right .sendbird-openchannel-user-message__right__top {\n      position: relative;\n      display: flex;\n      margin-bottom: 2px; }\n      .sendbird-openchannel-user-message .sendbird-openchannel-user-message__right .sendbird-openchannel-user-message__right__top .sendbird-openchannel-user-message__right__top__sender-name {\n        position: relative;\n        display: flex; }\n      .sendbird-openchannel-user-message .sendbird-openchannel-user-message__right .sendbird-openchannel-user-message__right__top .sendbird-openchannel-user-message__right__top__sent-at {\n        position: relative;\n        display: flex;\n        margin-left: 4px; }\n    .sendbird-openchannel-user-message .sendbird-openchannel-user-message__right .sendbird-openchannel-user-message__right__bottom {\n      position: relative;\n      display: flex;\n      width: 100%; }\n      .sendbird-openchannel-user-message .sendbird-openchannel-user-message__right .sendbird-openchannel-user-message__right__bottom .sendbird-openchannel-user-message__right__bottom__message {\n        position: relative;\n        word-break: break-all; }\n    .sendbird-openchannel-user-message .sendbird-openchannel-user-message__right .sendbird-openchannel-user-message__right__tail {\n      position: relative;\n      top: 2px; }\n  .sendbird-openchannel-user-message .sendbird-openchannel-user-message__context-menu {\n    position: absolute;\n    right: 16px;\n    display: none; }\n    .sendbird-theme--light .sendbird-openchannel-user-message .sendbird-openchannel-user-message__context-menu .sendbird-openchannel-user-message__context-menu--icon {\n      background-color: var(--sendbird-light-background-200); }\n    .sendbird-theme--dark .sendbird-openchannel-user-message .sendbird-openchannel-user-message__context-menu .sendbird-openchannel-user-message__context-menu--icon {\n      background-color: var(--sendbird-dark-background-500); }\n    .sendbird-theme--light .sendbird-openchannel-user-message .sendbird-openchannel-user-message__context-menu .sendbird-openchannel-user-message__context-menu--icon:hover {\n      background-color: var(--sendbird-light-primary-100); }\n    .sendbird-theme--dark .sendbird-openchannel-user-message .sendbird-openchannel-user-message__context-menu .sendbird-openchannel-user-message__context-menu--icon:hover {\n      background-color: var(--sendbird-dark-background-700); }\n\n.sendbird-openchannel-admin-message {\n  position: relative;\n  margin: 16px 24px;\n  padding: 12px 16px;\n  border-radius: 4px; }\n  .sendbird-theme--light .sendbird-openchannel-admin-message {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-openchannel-admin-message {\n    background-color: var(--sendbird-dark-background-500); }\n  .sendbird-theme--light .sendbird-openchannel-admin-message:hover {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-openchannel-admin-message:hover {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-openchannel-admin-message .sendbird-openchannel-admin-message__text {\n    word-wrap: break-word; }\n\n.sendbird-openchannel-og-message {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 100%; }\n  .sendbird-theme--light .sendbird-openchannel-og-message:hover {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-openchannel-og-message:hover {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-openchannel-og-message:hover .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__context-menu {\n    display: block; }\n  .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top {\n    box-sizing: border-box;\n    position: relative;\n    display: flex;\n    flex-direction: row; }\n    .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__left {\n      position: relative;\n      display: flex;\n      width: 52px;\n      min-width: 52px; }\n      .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__left .sendbird-openchannel-og-message__top__left__avatar {\n        position: absolute;\n        display: flex;\n        top: 8px;\n        left: 24px; }\n    .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__right {\n      position: relative;\n      display: flex;\n      box-sizing: border-box;\n      flex-direction: column;\n      margin: 8px 24px 8px 12px; }\n      .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__right .sendbird-openchannel-og-message__top__right__title {\n        position: relative;\n        display: flex;\n        margin-bottom: 2px; }\n        .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__right .sendbird-openchannel-og-message__top__right__title .sendbird-openchannel-og-message__top__right__title__sender-name {\n          position: relative;\n          display: flex; }\n        .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__right .sendbird-openchannel-og-message__top__right__title .sendbird-openchannel-og-message__top__right__title__sent-at {\n          position: relative;\n          display: flex;\n          margin-left: 4px; }\n      .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__right .sendbird-openchannel-og-message__top__right__description .sendbird-openchannel-og-message__top__right__description__message {\n        position: relative;\n        display: inline;\n        white-space: pre-wrap;\n        word-break: break-all; }\n    .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__context-menu {\n      position: absolute;\n      right: 16px;\n      display: none; }\n      .sendbird-theme--light .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__context-menu .sendbird-openchannel-og-message__top__context-menu--icon {\n        background-color: var(--sendbird-light-background-200); }\n      .sendbird-theme--dark .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__context-menu .sendbird-openchannel-og-message__top__context-menu--icon {\n        background-color: var(--sendbird-dark-background-500); }\n      .sendbird-theme--light .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__context-menu .sendbird-openchannel-og-message__top__context-menu--icon:hover {\n        background-color: var(--sendbird-light-primary-100); }\n      .sendbird-theme--dark .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top .sendbird-openchannel-og-message__top__context-menu .sendbird-openchannel-og-message__top__context-menu--icon:hover {\n        background-color: var(--sendbird-dark-background-700); }\n  .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom {\n    position: relative;\n    display: inline;\n    margin-bottom: 8px;\n    width: 100%; }\n    .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag {\n      position: relative;\n      display: inline-block;\n      box-sizing: border-box;\n      width: calc(100% - 64px);\n      max-width: 360px;\n      left: 64px;\n      padding: 12px 12px 4px 12px;\n      border-radius: 8px; }\n      .sendbird-theme--light .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag {\n        border: solid 1px var(--sendbird-light-onlight-04);\n        background-color: var(--sendbird-light-background-100); }\n      .sendbird-theme--dark .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag {\n        border: solid 1px var(--sendbird-dark-ondark-04);\n        background-color: var(--sendbird-dark-background-500); }\n      .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag .sendbird-openchannel-og-message__bottom__og-tag__url {\n        position: relative;\n        display: block;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin-bottom: 8px;\n        max-width: 336px; }\n      .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag .sendbird-openchannel-og-message__bottom__og-tag__title {\n        position: relative;\n        display: inline-block;\n        white-space: pre-wrap;\n        overflow-wrap: normal;\n        margin-bottom: 8px;\n        max-width: 336px; }\n        .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag .sendbird-openchannel-og-message__bottom__og-tag__title:hover {\n          cursor: pointer; }\n          .sendbird-theme--light .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag .sendbird-openchannel-og-message__bottom__og-tag__title:hover {\n            color: var(--sendbird-light-primary-300); }\n          .sendbird-theme--dark .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag .sendbird-openchannel-og-message__bottom__og-tag__title:hover {\n            color: var(--sendbird-dark-primary-200); }\n      .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag .sendbird-openchannel-og-message__bottom__og-tag__description {\n        position: relative;\n        display: block;\n        white-space: pre-wrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        word-break: break-all;\n        max-height: 32px;\n        margin-bottom: 8px;\n        width: 100%;\n        max-width: 336px; }\n      .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag .sendbird-openchannel-og-message__bottom__og-tag__thumbnail {\n        box-sizing: border-box;\n        position: relative;\n        display: block;\n        margin-top: 4px;\n        margin-bottom: 8px;\n        width: 100%; }\n        .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag .sendbird-openchannel-og-message__bottom__og-tag__thumbnail:hover {\n          cursor: pointer; }\n        .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag .sendbird-openchannel-og-message__bottom__og-tag__thumbnail .sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image {\n          border-radius: 8px;\n          width: 100%;\n          min-width: 200px;\n          max-width: 336px; }\n        .sendbird-openchannel-og-message .sendbird-openchannel-og-message__bottom .sendbird-openchannel-og-message__bottom__og-tag .sendbird-openchannel-og-message__bottom__og-tag__thumbnail .sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder {\n          border-radius: 8px;\n          width: 100%;\n          min-width: 200px;\n          max-width: 336px; }\n  .sendbird-openchannel-og-message .sendbird-openchannel-og-message__top__right__tail {\n    position: relative;\n    left: 64px;\n    top: 2px; }\n\n.sendbird-openchannel-og-message--word {\n  display: inline;\n  margin: 0px 2px;\n  word-break: break-all; }\n\n.sendbird-theme--light .sendbird-openchannel-og-message--word--link {\n  color: var(--sendbird-light-primary-300); }\n\n.sendbird-theme--dark .sendbird-openchannel-og-message--word--link {\n  color: var(--sendbird-dark-primary-200); }\n\n.sendbird-openchannel-thumbnail-message {\n  position: relative;\n  display: flex;\n  flex-direction: row; }\n  .sendbird-theme--light .sendbird-openchannel-thumbnail-message:hover {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-openchannel-thumbnail-message:hover {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-openchannel-thumbnail-message:hover .sendbird-openchannel-thumbnail-message__context-menu {\n    display: block; }\n    .sendbird-theme--light .sendbird-openchannel-thumbnail-message:hover .sendbird-openchannel-thumbnail-message__context-menu .sendbird-openchannel-thumbnail-message__context-menu--icon {\n      background-color: var(--sendbird-light-background-200); }\n    .sendbird-theme--dark .sendbird-openchannel-thumbnail-message:hover .sendbird-openchannel-thumbnail-message__context-menu .sendbird-openchannel-thumbnail-message__context-menu--icon {\n      background-color: var(--sendbird-dark-background-500); }\n    .sendbird-theme--light .sendbird-openchannel-thumbnail-message:hover .sendbird-openchannel-thumbnail-message__context-menu .sendbird-openchannel-thumbnail-message__context-menu--icon:hover {\n      background-color: var(--sendbird-light-primary-100); }\n    .sendbird-theme--dark .sendbird-openchannel-thumbnail-message:hover .sendbird-openchannel-thumbnail-message__context-menu .sendbird-openchannel-thumbnail-message__context-menu--icon:hover {\n      background-color: var(--sendbird-dark-background-700); }\n  .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__left {\n    position: relative;\n    display: flex;\n    width: 52px;\n    min-width: 52px; }\n    .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__left .sendbird-openchannel-thumbnail-message__left__avatar {\n      position: absolute;\n      display: inline;\n      margin-top: 8px;\n      margin-left: 28px; }\n  .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    margin-top: 8px;\n    margin-bottom: 8px;\n    margin-left: 12px;\n    width: calc(100% - 64px); }\n    .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__title {\n      position: relative;\n      display: inline;\n      margin-bottom: 4px; }\n      .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__title .sendbird-openchannel-thumbnail-message__right__title__sender-name {\n        position: relative;\n        display: inline;\n        margin-right: 4px; }\n      .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__title .sendbird-openchannel-thumbnail-message__right__title__sent-at {\n        position: relative;\n        display: inline; }\n    .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body {\n      position: relative;\n      display: flex;\n      border-radius: 8px; }\n      .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body:hover .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__overlay {\n        opacity: 1; }\n      .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap {\n        position: relative;\n        box-sizing: content-box; }\n        .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__overlay {\n          position: absolute;\n          opacity: 0;\n          width: 100%;\n          height: 100%;\n          max-width: 360px;\n          top: 0px;\n          left: 0px;\n          border-radius: 8px;\n          cursor: pointer; }\n          .sendbird-theme--light .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__overlay {\n            background-color: var(--sendbird-light-overlay-02); }\n          .sendbird-theme--dark .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__overlay {\n            background-color: var(--sendbird-dark-overlay-02); }\n        .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__video {\n          max-width: 360px;\n          max-height: 360px; }\n          .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__video:hover {\n            cursor: pointer; }\n          .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__video .sendbird-openchannel-thumbnail-message__right__body__wrap__video__video {\n            max-width: 360px;\n            max-height: 360px;\n            border-radius: 8px; }\n          .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__video .sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon {\n            position: absolute;\n            top: calc(50% - 28px);\n            left: calc(50% - 28px); }\n        .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon {\n          padding: 107px 152px 107px 152px;\n          border-radius: 8px; }\n          .sendbird-theme--light .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon {\n            background-color: var(--sendbird-light-background-100); }\n          .sendbird-theme--dark .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon {\n            background-color: var(--sendbird-dark-background-500); }\n        .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__image {\n          border-radius: 8px; }\n        .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon {\n          padding: 107px 152px 107px 152px;\n          border-radius: 8px; }\n          .sendbird-theme--light .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon {\n            background-color: var(--sendbird-light-background-100); }\n          .sendbird-theme--dark .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon {\n            background-color: var(--sendbird-dark-background-500); }\n        .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__unknown {\n          padding: 107px 152px 107px 152px;\n          border-radius: 8px; }\n          .sendbird-theme--light .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__unknown {\n            background-color: var(--sendbird-light-background-100); }\n          .sendbird-theme--dark .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__body .sendbird-openchannel-thumbnail-message__right__body__wrap .sendbird-openchannel-thumbnail-message__right__body__wrap__unknown {\n            background-color: var(--sendbird-dark-background-500); }\n    .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__right .sendbird-openchannel-thumbnail-message__right__tail {\n      position: relative;\n      top: 2px; }\n  .sendbird-openchannel-thumbnail-message .sendbird-openchannel-thumbnail-message__context-menu {\n    position: absolute;\n    display: none;\n    top: 8px;\n    right: 16px; }\n\n.sendbird-openchannel-file-message {\n  position: relative;\n  display: flex;\n  flex-direction: row; }\n  .sendbird-theme--light .sendbird-openchannel-file-message:hover {\n    background-color: var(--sendbird-light-background-100); }\n  .sendbird-theme--dark .sendbird-openchannel-file-message:hover {\n    background-color: var(--sendbird-dark-background-400); }\n  .sendbird-openchannel-file-message:hover .sendbird-openchannel-file-message__context-menu {\n    display: block; }\n  .sendbird-openchannel-file-message .sendbird-openchannel-file-message__left {\n    position: relative;\n    display: flex;\n    width: 52px;\n    min-width: 52px; }\n    .sendbird-openchannel-file-message .sendbird-openchannel-file-message__left .sendbird-openchannel-file-message__left__avatar {\n      position: absolute;\n      display: block;\n      margin-top: 8px;\n      margin-left: 24px; }\n  .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    margin-left: 12px;\n    margin-bottom: 4px;\n    width: calc(100% - 64px); }\n    .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right .sendbird-openchannel-file-message__right__title {\n      position: relative;\n      display: flex;\n      margin-top: 8px; }\n      .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right .sendbird-openchannel-file-message__right__title .sendbird-openchannel-file-message__right__title__sender-name {\n        position: relative;\n        display: flex; }\n      .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right .sendbird-openchannel-file-message__right__title .sendbird-openchannel-file-message__right__title__sent-at {\n        position: relative;\n        display: flex;\n        margin-left: 4px; }\n    .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right .sendbird-openchannel-file-message__right__body {\n      position: relative;\n      display: flex;\n      margin-top: 4px;\n      margin-bottom: 4px;\n      border-radius: 8px; }\n      .sendbird-theme--light .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right .sendbird-openchannel-file-message__right__body {\n        background-color: var(--sendbird-light-background-100);\n        border: solid 1px var(--sendbird-light-onlight-04); }\n      .sendbird-theme--dark .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right .sendbird-openchannel-file-message__right__body {\n        background-color: var(--sendbird-dark-background-500);\n        border: solid 1px var(--sendbird-dark-ondark-04); }\n      .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right .sendbird-openchannel-file-message__right__body .sendbird-openchannel-file-message__right__body__icon {\n        position: relative;\n        display: inline-block;\n        margin: 8px;\n        border-radius: 8.6px; }\n        .sendbird-theme--light .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right .sendbird-openchannel-file-message__right__body .sendbird-openchannel-file-message__right__body__icon {\n          background-color: var(--sendbird-light-background-50); }\n        .sendbird-theme--dark .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right .sendbird-openchannel-file-message__right__body .sendbird-openchannel-file-message__right__body__icon {\n          background-color: var(--sendbird-dark-background-600); }\n      .sendbird-openchannel-file-message .sendbird-openchannel-file-message__right .sendbird-openchannel-file-message__right__body .sendbird-openchannel-file-message__right__body__file-name {\n        position: relative;\n        display: flex;\n        margin-top: 22px;\n        margin-right: 16px;\n        margin-left: 4px;\n        overflow: hidden;\n        height: 20px;\n        max-height: 20px;\n        text-overflow: ellipsis;\n        white-space: nowrap; }\n  .sendbird-openchannel-file-message .sendbird-openchannel-file-message__context-menu {\n    position: absolute;\n    display: none;\n    top: 8px;\n    right: 16px; }\n    .sendbird-theme--light .sendbird-openchannel-file-message .sendbird-openchannel-file-message__context-menu .sendbird-openchannel-file-message__context-menu__icon {\n      background-color: var(--sendbird-light-background-200); }\n    .sendbird-theme--dark .sendbird-openchannel-file-message .sendbird-openchannel-file-message__context-menu .sendbird-openchannel-file-message__context-menu__icon {\n      background-color: var(--sendbird-dark-background-500); }\n    .sendbird-theme--light .sendbird-openchannel-file-message .sendbird-openchannel-file-message__context-menu .sendbird-openchannel-file-message__context-menu__icon:hover {\n      background-color: var(--sendbird-light-primary-100); }\n    .sendbird-theme--dark .sendbird-openchannel-file-message .sendbird-openchannel-file-message__context-menu .sendbird-openchannel-file-message__context-menu__icon:hover {\n      background-color: var(--sendbird-dark-background-700); }\n\n.sendbird-fileviewer__header__right__actions__download,\n.sendbird-fileviewer__header__right__actions__delete,\n.sendbird-fileviewer__header__right__actions__close {\n  width: 64px;\n  padding: 21px;\n  box-sizing: border-box;\n  cursor: pointer; }\n  .sendbird-fileviewer__header__right__actions__download .disabled,\n  .sendbird-fileviewer__header__right__actions__delete .disabled,\n  .sendbird-fileviewer__header__right__actions__close .disabled {\n    cursor: not-allowed; }\n\n.sendbird-fileviewer {\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 100000; }\n  .sendbird-theme--light .sendbird-fileviewer {\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-fileviewer {\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-fileviewer .sendbird-fileviewer__header {\n    height: 64px;\n    min-height: 64px;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: space-between; }\n    .sendbird-theme--light .sendbird-fileviewer .sendbird-fileviewer__header {\n      border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-fileviewer .sendbird-fileviewer__header {\n      border-bottom: 1px solid var(--sendbird-dark-ondark-04); }\n    .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__left {\n      box-sizing: border-box;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      height: 64px;\n      padding: 16px 20px; }\n      .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__left .sendbird-fileviewer__header__left__avatar {\n        margin-right: 8px; }\n      .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__left .sendbird-fileviewer__header__left__filename {\n        max-width: 500px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: inline-block; }\n      .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__left .sendbird-fileviewer__header__left__sender-name {\n        max-width: 200px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: inline-flex;\n        margin-left: 8px;\n        padding-top: 5px; }\n    .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__right {\n      display: flex;\n      width: 160px;\n      justify-content: flex-end; }\n      .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__right .sendbird-fileviewer__header__right__actions {\n        right: 0;\n        display: flex;\n        flex-direction: row; }\n      .sendbird-theme--light .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__right .sendbird-fileviewer__header__right__actions__close {\n        border-left: 1px solid var(--sendbird-light-onlight-04); }\n      .sendbird-theme--dark .sendbird-fileviewer .sendbird-fileviewer__header .sendbird-fileviewer__header__right .sendbird-fileviewer__header__right__actions__close {\n        border-left: 1px solid var(--sendbird-dark-ondark-04); }\n  .sendbird-fileviewer .sendbird-fileviewer__content {\n    height: calc(100% - 72px);\n    margin-top: 8px;\n    overflow-y: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n    .sendbird-fileviewer .sendbird-fileviewer__content .sendbird-fileviewer__content__video {\n      max-width: 100%;\n      max-height: 100%; }\n    .sendbird-fileviewer .sendbird-fileviewer__content .sendbird-fileviewer__content__img {\n      max-width: 90%;\n      max-height: 90%; }\n    .sendbird-fileviewer .sendbird-fileviewer__content .sendbird-fileviewer__content__unsupported {\n      max-width: 100%;\n      max-height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center; }\n\n.sendbird-openchannel-settings {\n  height: 100%;\n  width: 320px;\n  display: inline-block;\n  overflow-y: scroll;\n  position: relative; }\n  .sendbird-theme--light .sendbird-openchannel-settings {\n    background-color: var(--sendbird-light-background-50);\n    border-left: 1px solid var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-openchannel-settings {\n    background-color: var(--sendbird-dark-background-600);\n    border-left: 1px solid var(--sendbird-dark-ondark-04); }\n  .sendbird-openchannel-settings .sendbird-participants-accordion__footer {\n    text-align: left;\n    padding-top: 16px;\n    padding-left: 16px; }\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__operator-accordion-icon {\n    position: absolute;\n    left: 14px; }\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__accordion-icon,\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__panel-icon__delete {\n    position: absolute;\n    left: 16px; }\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__participant {\n    height: 100%; }\n    .sendbird-openchannel-settings .sendbird-openchannel-settings__participant .sendbird-openchannel-settings__participant-list {\n      padding-top: 64px;\n      height: calc(100% - 64px);\n      overflow-y: scroll; }\n    .sendbird-openchannel-settings .sendbird-openchannel-settings__participant .sendbird-openchannel-settings__header {\n      display: block;\n      width: 100%;\n      position: absolute;\n      top: 0;\n      left: 0; }\n      .sendbird-theme--light .sendbird-openchannel-settings .sendbird-openchannel-settings__participant .sendbird-openchannel-settings__header {\n        background-color: var(--sendbird-light-background-50); }\n      .sendbird-theme--dark .sendbird-openchannel-settings .sendbird-openchannel-settings__participant .sendbird-openchannel-settings__header {\n        background-color: var(--sendbird-dark-background-600); }\n  .sendbird-openchannel-settings .sendbird-participants-accordion,\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__delete-channel {\n    text-align: left; }\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__members .sendbird-badge__text {\n    margin-top: -2px; }\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__header {\n    height: 64px;\n    min-height: 64px;\n    position: relative;\n    padding: 20px 24px;\n    box-sizing: border-box;\n    text-align: left; }\n    .sendbird-theme--light .sendbird-openchannel-settings .sendbird-openchannel-settings__header {\n      border-bottom: solid 1px var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-openchannel-settings .sendbird-openchannel-settings__header {\n      border-bottom: solid 1px var(--sendbird-dark-ondark-04); }\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__close-icon {\n    cursor: pointer;\n    position: absolute;\n    top: 20px;\n    right: 16px; }\n    .sendbird-theme--light .sendbird-openchannel-settings .sendbird-openchannel-settings__close-icon path {\n      fill: var(--sendbird-light-onlight-01); }\n    .sendbird-theme--dark .sendbird-openchannel-settings .sendbird-openchannel-settings__close-icon path {\n      fill: var(--sendbird-dark-ondark-01); }\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__placeholder {\n    margin-top: 40%; }\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__url {\n    padding: 16px;\n    box-sizing: border-box;\n    position: relative; }\n    .sendbird-openchannel-settings .sendbird-openchannel-settings__url:hover .sendbird-openchannel-settings__copy-icon {\n      display: inline-block; }\n    .sendbird-openchannel-settings .sendbird-openchannel-settings__url .sendbird-openchannel-settings__copy-icon {\n      cursor: pointer;\n      position: absolute;\n      display: none;\n      top: 10px;\n      right: 18px; }\n    .sendbird-openchannel-settings .sendbird-openchannel-settings__url .sendbird-openchannel-settings__url-value {\n      margin-top: 8px; }\n    .sendbird-openchannel-settings .sendbird-openchannel-settings__url .sendbird-openchannel-settings__url-value,\n    .sendbird-openchannel-settings .sendbird-openchannel-settings__url .sendbird-openchannel-settings__url-label {\n      text-align: left;\n      display: block;\n      word-wrap: break-word; }\n  .sendbird-theme--light .sendbird-openchannel-settings .sendbird-openchannel-settings__url {\n    background-color: var(--sendbird-light-background-50);\n    border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n  .sendbird-theme--dark .sendbird-openchannel-settings .sendbird-openchannel-settings__url {\n    background-color: var(--sendbird-dark-background-600);\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04); }\n  .sendbird-openchannel-settings .sendbird-openchannel-settings__panel-item {\n    display: block;\n    cursor: pointer;\n    box-sizing: border-box;\n    position: relative;\n    padding: 12px 22px 10px 56px; }\n    .sendbird-theme--light .sendbird-openchannel-settings .sendbird-openchannel-settings__panel-item {\n      background-color: var(--sendbird-light-background-50);\n      border-bottom: 1px solid var(--sendbird-light-onlight-04); }\n    .sendbird-theme--dark .sendbird-openchannel-settings .sendbird-openchannel-settings__panel-item {\n      background-color: var(--sendbird-dark-background-600);\n      border-bottom: 1px solid var(--sendbird-dark-ondark-04); }\n    .sendbird-openchannel-settings .sendbird-openchannel-settings__panel-item:focus {\n      outline: none; }\n    .sendbird-openchannel-settings .sendbird-openchannel-settings__panel-item.sendbird-channel-settings__panel-item__disabled {\n      cursor: not-allowed; }\n  .sendbird-openchannel-settings .sendbird-participants-accordion__member {\n    position: relative;\n    padding: 12px 0px 12px 56px;\n    width: 100%;\n    height: 40px;\n    box-sizing: border-box;\n    text-align: left; }\n    .sendbird-openchannel-settings .sendbird-participants-accordion__member .sendbird-label {\n      max-width: 190px;\n      display: inline-block;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis; }\n    .sendbird-openchannel-settings .sendbird-participants-accordion__member .sendbird-participants-accordion__member__title.operator,\n    .sendbird-openchannel-settings .sendbird-participants-accordion__member .sendbird-participants-accordion__member__title.user-id {\n      position: absolute;\n      right: 16px; }\n    .sendbird-openchannel-settings .sendbird-participants-accordion__member .sendbird-participants-accordion__member__action {\n      display: none; }\n    .sendbird-openchannel-settings .sendbird-participants-accordion__member:hover .sendbird-participants-accordion__member__title.operator,\n    .sendbird-openchannel-settings .sendbird-participants-accordion__member:hover .sendbird-participants-accordion__member__title.user-id {\n      display: none; }\n    .sendbird-openchannel-settings .sendbird-participants-accordion__member:hover .sendbird-participants-accordion__member__action {\n      display: inline-block; }\n  .sendbird-openchannel-settings .sendbird-participants-accordion__member-avatar {\n    position: absolute;\n    left: 16px;\n    top: 10px;\n    cursor: pointer; }\n  .sendbird-openchannel-settings .sendbird-participants-accordion__member__action {\n    position: absolute;\n    display: none;\n    top: 4px;\n    right: 8px;\n    cursor: pointer; }\n  .sendbird-openchannel-settings .sendbird-openchannel-operator-list__footer,\n  .sendbird-openchannel-settings .sendbird-openchannel-participant-list__footer,\n  .sendbird-openchannel-settings .sendbird-channel-settings-muted-participant-list__footer,\n  .sendbird-openchannel-settings .sendbird-channel-settings-banned-user-list__footer {\n    padding-top: 16px;\n    display: flex;\n    justify-content: left;\n    padding-left: 12px; }\n    .sendbird-openchannel-settings .sendbird-openchannel-operator-list__footer .sendbird-button:nth-child(2),\n    .sendbird-openchannel-settings .sendbird-openchannel-participant-list__footer .sendbird-button:nth-child(2),\n    .sendbird-openchannel-settings .sendbird-channel-settings-muted-participant-list__footer .sendbird-button:nth-child(2),\n    .sendbird-openchannel-settings .sendbird-channel-settings-banned-user-list__footer .sendbird-button:nth-child(2) {\n      margin-left: 8px; }\n\n.sendbird-more-users__popup-scroll {\n  max-height: 420px;\n  overflow: scroll; }\n\n.sendbird-openchannel-profile {\n  position: relative;\n  text-align: center;\n  padding: 32px 40px 27px 40px; }\n  .sendbird-theme--light .sendbird-openchannel-profile {\n    border-bottom: 1px solid var(--sendbird-light-onlight-04);\n    background-color: var(--sendbird-light-background-50); }\n  .sendbird-theme--dark .sendbird-openchannel-profile {\n    border-bottom: 1px solid var(--sendbird-dark-ondark-04);\n    background-color: var(--sendbird-dark-background-600); }\n  .sendbird-openchannel-profile .sendbird-openchannel-profile--inner {\n    height: 116px; }\n  .sendbird-openchannel-profile .sendbird-openchannel-profile__avatar {\n    margin-bottom: 16px;\n    text-align: center; }\n  .sendbird-openchannel-profile .sendbird-openchannel-profile__title {\n    display: inline-block;\n    max-width: 240px;\n    white-space: nowrap;\n    overflow-x: hidden;\n    text-overflow: ellipsis;\n    height: 18px; }\n  .sendbird-openchannel-profile .sendbird-openchannel-profile__edit {\n    position: absolute;\n    top: 10px;\n    right: 16px; }";
styleInject(css_248z$d);

var init = function (_a) {
    var userId = _a.userId, appId = _a.appId, accessToken = _a.accessToken, chatInstance = _a.chatInstance;
    return __awaiter(void 0, void 0, void 0, function () {
        var e_1;
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    _b.trys.push([0, 2, , 3]);
                    sendbirdLive_min.exports.SendbirdLive.init({
                        appId: appId,
                        chatInstance: chatInstance,
                    });
                    return [4 /*yield*/, sendbirdLive_min.exports.SendbirdLive.authenticate(userId, accessToken)];
                case 1:
                    _b.sent();
                    return [3 /*break*/, 3];
                case 2:
                    e_1 = _b.sent();
                    console.error(e_1);
                    return [3 /*break*/, 3];
                case 3: return [2 /*return*/];
            }
        });
    });
};

var PubSub = /** @class */ (function () {
    function PubSub() {
        this._topics = {};
        this._topics = {};
    }
    PubSub.prototype.subscribe = function (topic, listener) {
        var _this = this;
        if (!this._topics[topic])
            this._topics[topic] = [];
        var index = this._topics[topic].push(listener) - 1;
        return {
            remove: function () {
                delete _this._topics[topic][index];
            }
        };
    };
    PubSub.prototype.publish = function (topic) {
        var info = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            info[_i - 1] = arguments[_i];
        }
        // If the topic doesn't exist, or there's no listeners in queue, just leave
        if (!this._topics[topic])
            return;
        // Cycle through topics queue, fire!
        this._topics[topic].forEach(function (handler) {
            handler.apply(void 0, info);
        });
    };
    return PubSub;
}());

// @ts-ignore
var SendbirdLiveContext = React__default__default["default"].createContext({});

/**
 * Example:
 * const MyComponent = () => {
 *  const context = useSendbirdStateContext();
 *  const sdk = sendbirdSelectors.getSdk(context);
 *  return (<div>...</div>);
 * }
 */

function useSendbirdStateContext() {
  var context = React__default.useContext(SendbirdSdkContext);
  return context;
}

function SendbirdLiveInternal(props) {
    var _this = this;
    var _a, _b, _c, _d;
    var userId = props.userId, appId = props.appId, accessToken = props.accessToken, customApiHost = props.customApiHost, customWebSocketHost = props.customWebSocketHost, children = props.children, theme = props.theme, colorSet = props.colorSet, stringSet = props.stringSet, imageSet = props.imageSet, fontSet = props.fontSet;
    var _e = React__default.useState(false), initialized = _e[0], setInitialized = _e[1];
    var _f = React__default.useState(), pubSub = _f[0], setPubSub = _f[1];
    var globalStore = useSendbirdStateContext();
    var sdk = (_b = (_a = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _a === void 0 ? void 0 : _a.sdkStore) === null || _b === void 0 ? void 0 : _b.sdk;
    var sdkInit = (_d = (_c = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _c === void 0 ? void 0 : _c.sdkStore) === null || _d === void 0 ? void 0 : _d.initialized;
    React__default.useEffect(function () {
        // init
        var doInit = function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!sdkInit)
                            return [2 /*return*/];
                        return [4 /*yield*/, init({
                                userId: userId,
                                appId: appId,
                                accessToken: accessToken,
                                chatInstance: sdk,
                            })];
                    case 1:
                        _a.sent();
                        setPubSub(new PubSub());
                        setInitialized(true);
                        return [2 /*return*/];
                }
            });
        }); };
        doInit();
    }, [userId, appId, accessToken, sdkInit]);
    return (React__default__default["default"].createElement(SendbirdLiveContext.Provider, { value: {
            userId: userId,
            appId: appId,
            accessToken: accessToken,
            customApiHost: customApiHost,
            customWebSocketHost: customWebSocketHost,
            children: children,
            theme: theme,
            colorSet: colorSet,
            stringSet: stringSet,
            imageSet: imageSet,
            fontSet: fontSet,
            pubSub: pubSub,
        } }, !initialized
        ? React__default__default["default"].createElement("div", null)
        : children));
}

var getStringSet = function () {
    return {
        LIST_HEADER_TITLE: 'Live events',
        LIST_HEADER_BUTTON: 'Create',
        LIST_EMPTY_DESCRIPTION: 'No live events',
        NO_LIVE_EVENT_TITLE: 'No live events selected',
        NO_LIVE_EVENT_DESCRIPTION: 'Select a live event from the list or create a live event',
        EVENT_STATUS_CREATED: 'UPCOMING',
        EVENT_STATUS_READY: 'OPEN',
        EVENT_STATUS_ONGOING: 'LIVE',
        EVENT_STATUS_ENDED: 'ENDED',
        PARTICIPANT_COUNT: function (participantCount) { return "".concat(participantCount, "K"); },
        LIST_HOST_NICKNAME_PLACEHOLDER: 'â',
        LIVE_EVENT_ENTER_ROLE_DIALOG_TITLE: 'Choose your role',
        LIVE_EVENT_ENTER_ROLE_DIALOG_OPTION_HOST: 'Host',
        LIVE_EVENT_ENTER_ROLE_DIALOG_OPTION_PARTICIPANT: 'Participant',
        LIVE_EVENT_ENTER_ALERT_TITLE: "Can't enter yet",
        LIVE_EVENT_ENTER_ALERT_DESCRIPTION: 'This live event will open soon.',
        LIVE_EVENT_CREATE_HEADER_TITLE: 'New live event',
        LIVE_EVENT_CREATE_EVENT_TITLE: 'Title',
        LIVE_EVENT_CREATE_EVENT_TITLE_PLACEHOLDER: 'Add a title',
        CREATE_EVENT_DEFAULT_TITLE: 'Live event',
        LIVE_EVENT_CREATE_EVENT_USERS_FOR_HOST: 'Users who can be host',
        LIVE_EVENT_CREATE_EVENT_COVER_IMAGE_TITLE: 'Cover image',
        LIVE_EVENT_CREATE_EVENT_COVER_IMAGE_BUTTON: 'Upload photo',
        LIVE_EVENT_CREATE_HEADER_BUTTON: 'Create',
        LIST_USERS_FOR_HOST_HEADER_TITLE: 'Users who can be host',
        ADD_USERS_FOR_HOST_HEADER_TITLE: 'Users',
        ADD_USERS_FOR_HOST_HEADER_BUTTON: 'Add ${}',
        USER_FOR_HOST_NICKNAME: function (nickname) { return "".concat(nickname, " (You)"); },
        USER_ID_PLACEHOLDER: 'Enter user ID',
        ADD_USERS_FOR_HOST_DIALOG_TITLE: 'Add user',
        NICKNAME: 'Nickname',
        USER_ID: 'User ID',
        USER_SEARCH_USER_COUNT_LIMIT: function (count) { return " / 10 users"; },
        USER_SEARCH_USER_COUNT_DESCRIPTION: 'You can add up to 10 users to be host.',
        USER_SEARCH_EXACT_MATCH_DESCRIPTION: 'Only an exact match can be found.',
        USER_SEARCH_NO_MATCH_DESCRIPTION: function (keyword) { return "No matches found with \"{keyword}\""; },
        USER_SEARCH_NO_USERS_DESCRIPTION: 'There are no users.',
        USER_SEARCH_ERROR_DESCRIPTION: 'Something went wrong. Try again.',
        USER_SEARCH_COUNT_EXCEED_DESCRIPTION: "Can't add more than 10 users",
        START_LIVE_EVENT_HEADER_BUTTON: 'Start live event',
        LIVE_EVENT_PARTICIPANT_COUNT: function (participantCount) { return "".concat(participantCount); },
        LIVE_EVENT_MESSAGE_INPUT_PLACEHOLDER: 'Enter message',
        LIVE_EVENT_INFORMATION_TITLE: 'Live event information',
        HOST: 'Host',
        PARTICIPANTS: 'Participants',
        FREEZE_CHAT: 'Freeze chat',
        FREEZE_CHAT_DESCRIPTION: 'Only operators can send a message. This doesn\'t stop the live event.',
        LIVE_EVENT_ID: 'Live event ID',
        CREATED_AT: 'Created on',
        CREATED_BY: 'Created by',
        STARTED_AT: 'Started on',
        STARTED_BY: 'Started by',
        EDIT_EVENT: 'Edit this event?',
        CHANGE_TITLE: 'Change title',
        CHANGE_COVER_IMAGE: 'Change cover image',
        CHANGE_EVENT_TITLE: 'Change event title',
        CHANGE_EVENT_TITLE_PLACEHOLDER: 'Enter title',
        CHANGE_EVENT_INFO_TITLE: 'Edit live event information',
        TITLE: 'Title',
        COVER_IMAGE: 'Cover image',
        UPLOAD_IMAGE: 'Upload photo',
        EDIT_LIVE_EVENT_USERS_FOR_HOST: 'Users who can be host',
        REMOVE_IMAGE: 'Remove photo',
        CHOOSE_IMAGE: 'Choose photo',
        HOSTS: 'Host',
        HOST_LABEL: 'Host',
        USERS_FOR_HOST: 'Users who can be host',
        USERS_FOR_HOST_DESCRIPTION: 'Any one of the users in the list below can act as a host for the live event. If the current host leaves the event, another user can act as the host.',
        PARTICIPANT_LIST_HEADER_TITLE: 'Participants',
        LIVE_EVENT_END_DIALOG_TITLE: 'End live event?',
        LIVE_EVENT_END_DIALOG_DESCRIPTION: 'Do you want to end this live event?',
        LIVE_EVENT_END_DIALOG_OPTION_END: 'End live event',
        LIVE_EVENT_END_DIALOG_OPTION_EXIT: 'Exit without ending',
        TOTAL_PARTICIPANTS_COUNT: 'Total participants',
        LIVE_EVENT_SUMMARY_DIALOG_TITLE: 'Live event ended',
        PEAK_CONCURRENT_PARTICIPANTS_COUNT: 'Peak concurrent participants',
        DURATION: 'Duration',
        LIVE_EVENT_DISCONNECTED_ALERT_TITLE: 'Disconnected temporarily',
        LIVE_EVENT_DISCONNECTED_ALERT_DESCRIPTION: 'Try entering the live event again.',
        LIVE_EVENT_LIVE_PARTICIPANT_COUNT_DURATION: '1,282 watching now â Started 30 mins ago',
        LIVE_EVENT_READY_BANNER_DESCRIPTION: 'Live event will begin soon.',
        LIVE_EVENT_LIVE_BANNER_HOST_MUTED_DESCRIPTION: 'Host is muted.',
        LIVE_EVENT_LIVE_BANNER_HOST_UNAVAILABLE_DESCRIPTION: 'Host is temporarily unavailable.',
        LIVE_EVENT_ENDED_DESCRIPTION: 'Live event has ended.',
        LIVE_EVENT_ENDED_DIALOG_DESCRIPTION: 'Host has ended this live event.',
        LIVE_EVENT_ENDED_ENTER_DIALOG_DESCRIPTION: 'Can\'t enter an ended live event.',
        UNKNOWN_ERROR_ALERT_TITLE: 'Oops!',
        UNKNOWN_ERROR_ALERT_DESCRIPTION: 'Something went wrong.',
    };
};

function SendbirdLive(props) {
    var userId = props.userId, appId = props.appId, accessToken = props.accessToken; props.customApiHost; props.customWebSocketHost; props.children; props.theme; var colorSet = props.colorSet, stringSet = props.stringSet;
    var _stringSet = React__default.useMemo(function () {
        if (!stringSet)
            return getStringSet();
        return __assign$1(__assign$1({}, getStringSet()), stringSet);
    }, [stringSet]);
    return (React__default__default["default"].createElement(Sendbird, { userId: userId, appId: appId, accessToken: accessToken, colorSet: colorSet },
        React__default__default["default"].createElement(SendbirdLiveInternal, __assign$1({}, props, { stringSet: _stringSet }))));
}

var _defs$6, _path$T, _g$9;

function _extends$V() { _extends$V = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$V.apply(this, arguments); }

var SvgImgThumbnailDefault1 = function SvgImgThumbnailDefault1(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$V({
    width: 112,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _defs$6 || (_defs$6 = /*#__PURE__*/React__default__namespace.createElement("defs", null, /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "img-thumbnail-default-1_svg__a"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M1368 0v1600H0V0h1368z"
  })), /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "img-thumbnail-default-1_svg__b"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M112 0v64H0V0h112z"
  })), /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "img-thumbnail-default-1_svg__c"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M13.333 10.667A2.667 2.667 0 0 1 15 15.415v11.149c-.544.067-1.099.102-1.661.103h-.01c-.564 0-1.118-.036-1.662-.103V15.415a2.667 2.667 0 0 1 1.667-4.748zm0-10.667c7.364 0 13.334 5.97 13.334 13.333 0 6.092-4.086 11.23-9.667 12.823V22.64a10.004 10.004 0 0 0 6.333-9.307c0-5.523-4.477-10-10-10s-10 4.477-10 10c0 4.229 2.625 7.844 6.334 9.307v3.516C4.086 24.563 0 19.426 0 13.333 0 5.97 5.97 0 13.333 0zm0 5.333A8 8 0 0 1 17 20.445V16.22a4.667 4.667 0 1 0-7.333 0v4.225a8 8 0 0 1 3.667-15.112z"
  })))), _path$T || (_path$T = /*#__PURE__*/React__default__namespace.createElement("path", {
    fill: "#FFF",
    d: "M-64-876h1368V724H-64z"
  })), _g$9 || (_g$9 = /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#img-thumbnail-default-1_svg__a)",
    transform: "translate(-64 -876)"
  }, /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#img-thumbnail-default-1_svg__b)",
    transform: "translate(64 876)"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    fill: "#5858D3",
    d: "M0 0h112v64H0V0z"
  }), /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#img-thumbnail-default-1_svg__c)",
    transform: "translate(42.667 18.667)"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    fill: "#FFF",
    d: "M0 0h26.667v26.667H0V0z"
  }))))));
};

var css_248z$c = "@import url(\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap\");\nbody {\n  font-family: \"Roboto\", \"Verdana\", sans-serif;\n  font-size: 14px;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n:root {\n  --sendbird-light-primary-500: #491389;\n  --sendbird-light-primary-400: #6211c8;\n  --sendbird-light-primary-300: #742ddd;\n  --sendbird-light-primary-200: #c2a9fa;\n  --sendbird-light-primary-100: #dbd1ff;\n  --sendbird-light-secondary-500: #066858;\n  --sendbird-light-secondary-400: #027d69;\n  --sendbird-light-secondary-300: #259c72;\n  --sendbird-light-secondary-200: #69c085;\n  --sendbird-light-secondary-100: #a8e2ab;\n  --sendbird-light-information-100: #adc9ff;\n  --sendbird-light-error-500: #9d091e;\n  --sendbird-light-error-400: #bf0711;\n  --sendbird-light-error-300: #de360b;\n  --sendbird-light-error-200: #f66161;\n  --sendbird-light-error-100: #fdaaaa;\n  --sendbird-light-background-700: #000000;\n  --sendbird-light-background-600: #161616;\n  --sendbird-light-background-500: #2C2C2C;\n  --sendbird-light-background-400: #393939;\n  --sendbird-light-background-300: #bdbdbd;\n  --sendbird-light-background-200: #e0e0e0;\n  --sendbird-light-background-100: #eeeeee;\n  --sendbird-light-background-50: #FFFFFF;\n  --sendbird-light-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-light-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-light-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-light-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-light-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-light-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-light-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-light-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-light-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-light-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-light-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n:root {\n  --sendbird-dark-primary-500: #491389;\n  --sendbird-dark-primary-400: #6211c8;\n  --sendbird-dark-primary-300: #742ddd;\n  --sendbird-dark-primary-200: #c2a9fa;\n  --sendbird-dark-primary-100: #dbd1ff;\n  --sendbird-dark-secondary-500: #066858;\n  --sendbird-dark-secondary-400: #027d69;\n  --sendbird-dark-secondary-300: #259c72;\n  --sendbird-dark-secondary-200: #69c085;\n  --sendbird-dark-secondary-100: #a8e2ab;\n  --sendbird-dark-information-100: #adc9ff;\n  --sendbird-dark-error-500: #9d091e;\n  --sendbird-dark-error-400: #bf0711;\n  --sendbird-dark-error-300: #de360b;\n  --sendbird-dark-error-200: #f66161;\n  --sendbird-dark-error-100: #fdaaaa;\n  --sendbird-dark-background-700: #000000;\n  --sendbird-dark-background-600: #161616;\n  --sendbird-dark-background-500: #2C2C2C;\n  --sendbird-dark-background-400: #393939;\n  --sendbird-dark-background-300: #bdbdbd;\n  --sendbird-dark-background-200: #e0e0e0;\n  --sendbird-dark-background-100: #eeeeee;\n  --sendbird-dark-background-50: #FFFFFF;\n  --sendbird-dark-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-dark-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-dark-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-dark-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-dark-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-dark-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-dark-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-dark-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-dark-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-dark-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-dark-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n.live-event-list-view {\n  box-sizing: border-box;\n  width: 320px;\n  height: 100vh;\n  border: 1px solid var(--sendbird-light-onlight-04);\n  background-color: var(--sendbird-light-background-50);\n}\n.live-event-list-view .header {\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  height: 80px;\n  border-bottom: 1px solid var(--sendbird-light-onlight-04);\n}\n.live-event-list-view .header .title {\n  width: 92px;\n  height: 21px;\n  margin: 0 13px 0 24px;\n  font-size: 18px;\n  font-weight: bold;\n  color: rgba(0, 0, 0, 0.88);\n}\n.live-event-list-view .header .refresh {\n  cursor: pointer;\n  width: 22px;\n  height: 22px;\n  object-fit: contain;\n}\n.live-event-list-view .header .create-button {\n  cursor: pointer;\n  height: 24px;\n  margin: 0 16px 0 auto;\n  padding: 2px 0;\n  font-size: 14px;\n  font-weight: 500;\n  line-height: 1.43;\n  color: #742ddd;\n}\n.live-event-list-view .list {\n  overflow: scroll;\n}\n.live-event-list-view .list .live-event-elem {\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  height: 80px;\n  padding: 8px;\n  border-bottom: 1px solid var(--sendbird-light-onlight-04);\n}\n.live-event-list-view .list .cover-image__wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n  width: 112px;\n  height: 64px;\n  margin: 7px 12px 7px 8px;\n}\n.live-event-list-view .list .cover-image__wrapper .cover-image {\n  max-width: 100%;\n  max-height: 100%;\n}\n.live-event-list-view .list .detail {\n  width: 100%;\n}\n.live-event-list-view .list .detail .title__wrapper {\n  margin: 7px 12px 2px 12px;\n  display: flex;\n  height: 16px;\n}\n.live-event-list-view .list .detail .title__wrapper .title {\n  font-size: 14px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.88);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: center;\n}\n.live-event-list-view .list .detail .title__wrapper .participant-count__wrapper {\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n}\n.live-event-list-view .list .detail .title__wrapper .participant-count__wrapper .participant-icon, .live-event-list-view .list .detail .title__wrapper .participant-count__wrapper .participant-icon--grey, .live-event-list-view .list .detail .title__wrapper .participant-count__wrapper .participant-icon--red {\n  width: 8px;\n  height: 8px;\n  margin: 0 4px;\n  border-radius: 50%;\n}\n.live-event-list-view .list .detail .title__wrapper .participant-count__wrapper .participant-icon--red {\n  background-color: #de360b;\n}\n.live-event-list-view .list .detail .title__wrapper .participant-count__wrapper .participant-icon--grey {\n  background-color: #bdbdbd;\n}\n.live-event-list-view .list .detail .title__wrapper .participant-count__wrapper .participant-count {\n  width: 32px;\n  height: 100%;\n}\n.live-event-list-view .list .detail .created-by {\n  height: 16px;\n  margin: 2px 4px 10px 12px;\n  font-size: 12px;\n  line-height: 1.33;\n  color: rgba(0, 0, 0, 0.5);\n}\n.live-event-list-view .list .detail .event-state, .live-event-list-view .list .detail .event-state--ended, .live-event-list-view .list .detail .event-state--ongoing, .live-event-list-view .list .detail .event-state--ready, .live-event-list-view .list .detail .event-state--created {\n  width: fit-content;\n  box-sizing: border-box;\n  height: 20px;\n  margin: 10px 0 0 12px;\n  padding: 4px;\n  border-radius: 2px;\n  font-size: 12px;\n  font-weight: bold;\n  line-height: 1;\n}\n.live-event-list-view .list .detail .event-state--created {\n  background-color: var(--sendbird-light-primary-100);\n  color: #6211c8;\n}\n.live-event-list-view .list .detail .event-state--ready {\n  background-color: #c8d9fa;\n  color: #30308f;\n}\n.live-event-list-view .list .detail .event-state--ongoing {\n  background-color: var(--sendbird-light-error-300);\n  color: rgba(255, 255, 255, 0.88);\n}\n.live-event-list-view .list .detail .event-state--ended {\n  color: rgba(0, 0, 0, 0.5);\n}\n.sendbird-theme--light .live-event-list-view .list .detail .event-state--ended {\n  background-color: var(--sendbird-light-background-200);\n}\n.sendbird-theme--dark .live-event-list-view .list .detail .event-state--ended {\n  background-color: var(--sendbird-dark-background-400);\n}";
styleInject(css_248z$c);

function LiveEventElem(props) {
    var _a, _b, _c;
    var liveEvent = props.liveEvent, onClick = props.onClick, _d = props.showHostNickname, showHostNickname = _d === void 0 ? true : _d, _e = props.showStatusLabel, showStatusLabel = _e === void 0 ? true : _e;
    var stringSet = React__default.useContext(SendbirdLiveContext).stringSet;
    var mapStateName = function (name) {
        switch (name) {
            case 'created':
                return stringSet.EVENT_STATUS_CREATED;
            case 'ready':
                return stringSet.EVENT_STATUS_READY;
            case 'ongoing':
                return stringSet.EVENT_STATUS_ONGOING;
            case 'ended':
                return stringSet.EVENT_STATUS_ENDED;
        }
    };
    return (React__default__default["default"].createElement("div", { className: "live-event-elem", onClick: function () { return onClick(liveEvent); } },
        React__default__default["default"].createElement("div", { className: "cover-image__wrapper" }, liveEvent.coverUrl
            ? React__default__default["default"].createElement("img", { src: liveEvent.coverUrl, alt: "cover_image", className: "cover-image" })
            : React__default__default["default"].createElement(SvgImgThumbnailDefault1, { viewBox: "0 0 112 64", width: 112, height: 64 })),
        React__default__default["default"].createElement("div", { className: "detail" },
            React__default__default["default"].createElement("div", { className: "title__wrapper" },
                React__default__default["default"].createElement("div", { className: "title" }, (_a = liveEvent.title) !== null && _a !== void 0 ? _a : stringSet.CREATE_EVENT_DEFAULT_TITLE),
                React__default__default["default"].createElement("div", { className: "participant-count__wrapper" },
                    (liveEvent.state === sendbirdLive_min.exports.LiveEventState.ONGOING)
                        ? React__default__default["default"].createElement("div", { className: "participant-icon--red" })
                        : React__default__default["default"].createElement("div", { className: "participant-icon--grey" }),
                    React__default__default["default"].createElement("div", { className: "participant-count" }, (_b = liveEvent.participantCount) !== null && _b !== void 0 ? _b : 0))),
            showHostNickname && React__default__default["default"].createElement("div", { className: "created-by" }, liveEvent.host ? ((_c = liveEvent.host.nickname) !== null && _c !== void 0 ? _c : 'HOST') : stringSet.LIST_HOST_NICKNAME_PLACEHOLDER),
            showStatusLabel && React__default__default["default"].createElement("div", { className: "event-state--".concat(liveEvent.state) }, mapStateName(liveEvent.state)))));
}

var _path$S;

function _extends$U() { _extends$U = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$U.apply(this, arguments); }

var SvgIconsRefresh = function SvgIconsRefresh(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$U({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _path$S || (_path$S = /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "m46.14 14.43.562.537 6.631 6.167v-7.8a2.667 2.667 0 0 1 2.356-2.65l.311-.017a2.667 2.667 0 0 1 2.649 2.355l.018.311v16a2.667 2.667 0 0 1-2.356 2.65L56 32H40a2.667 2.667 0 0 1-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 1 1 5.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",
    fillRule: "evenodd"
  })));
};

function LiveEventList(props) {
    var _this = this;
    var onClickCreate = props.onClickCreate, onClickElem = props.onClickElem, queryParams = props.queryParams, renderTitle = props.renderTitle, renderCreateButton = props.renderCreateButton, renderLiveEventElem = props.renderLiveEventElem, _a = props.showStatusLabel, showStatusLabel = _a === void 0 ? true : _a, _b = props.showHostNickname, showHostNickname = _b === void 0 ? true : _b;
    var stringSet = React__default.useContext(SendbirdLiveContext).stringSet;
    var params = queryParams || { limit: 10 };
    var _c = React__default.useState(sendbirdLive_min.exports.SendbirdLive.createLiveEventListQuery(params)), query = _c[0], setQuery = _c[1];
    var liveEventList = React__default.useRef(null);
    var _d = React__default.useState([]), liveEvents = _d[0], setLiveEvents = _d[1];
    var refresh = function () { return __awaiter(_this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    setQuery(sendbirdLive_min.exports.SendbirdLive.createLiveEventListQuery(params));
                    return [4 /*yield*/, getLiveEvents(true)];
                case 1:
                    _a.sent();
                    return [2 /*return*/];
            }
        });
    }); };
    var getLiveEvents = function (refresh) { return __awaiter(_this, void 0, void 0, function () {
        var result;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!query.hasNext)
                        return [2 /*return*/];
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, query.next()];
                case 2:
                    result = _a.sent();
                    if (refresh) {
                        setLiveEvents(result);
                    }
                    else {
                        setQuery(query);
                        setLiveEvents(__spreadArray$1(__spreadArray$1([], liveEvents, true), result, true));
                    }
                    return [3 /*break*/, 4];
                case 3:
                    _a.sent();
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    }); };
    var onScroll = function () {
        if (liveEventList.current) {
            var _a = liveEventList.current, scrollTop = _a.scrollTop, scrollHeight = _a.scrollHeight, clientHeight = _a.clientHeight;
            if (scrollTop + clientHeight === scrollHeight) {
                getLiveEvents(false);
            }
        }
    };
    React__default.useEffect(function () {
        refresh();
    }, [queryParams]);
    return (React__default__default["default"].createElement("div", { className: "live-event-list-view" },
        React__default__default["default"].createElement("div", { className: "header" },
            (renderTitle === null || renderTitle === void 0 ? void 0 : renderTitle()) ||
                React__default__default["default"].createElement("div", { className: "title" }, stringSet.LIST_HEADER_TITLE),
            React__default__default["default"].createElement("div", { className: "refresh", onClick: refresh },
                React__default__default["default"].createElement(SvgIconsRefresh, { viewBox: "0 0 64 64", width: 22, height: 22 })),
            (renderCreateButton === null || renderCreateButton === void 0 ? void 0 : renderCreateButton()) ||
                React__default__default["default"].createElement("div", { className: "create-button", onClick: onClickCreate }, stringSet.LIST_HEADER_BUTTON)),
        React__default__default["default"].createElement("div", { className: "list", ref: liveEventList, onScroll: onScroll }, liveEvents.map(function (liveEvent) {
            return (renderLiveEventElem === null || renderLiveEventElem === void 0 ? void 0 : renderLiveEventElem({ liveEvent: liveEvent, onClick: onClickElem })) ||
                React__default__default["default"].createElement(LiveEventElem, { key: liveEvent.liveEventId, liveEvent: liveEvent, showStatusLabel: showStatusLabel, showHostNickname: showHostNickname, onClick: onClickElem });
        }))));
}

var SEND_MESSAGE_START = 'SEND_MESSAGE_START';
var SEND_USER_MESSAGE = 'SEND_USER_MESSAGE';
var SEND_FILE_MESSAGE = 'SEND_FILE_MESSAGE';
var UPDATE_USER_MESSAGE = 'UPDATE_USER_MESSAGE';
var DELETE_MESSAGE = 'DELETE_MESSAGE';
var CREATE_CHANNEL = 'CREATE_CHANNEL';

var noop$1 = function noop() {};

/**
 * user profile goes deep inside the component tree
 * use this context as a short circuit to send in values
 */

var UserProfileContext = /*#__PURE__*/React__default__default["default"].createContext({
  disableUserProfile: true,
  isOpenChannel: false,
  renderUserProfile: null
});

var UserProfileProvider = function UserProfileProvider(props) {
  var children = props.children;
  return /*#__PURE__*/React__default__default["default"].createElement(UserProfileContext.Provider, {
    value: props
  }, children);
};

UserProfileProvider.propTypes = {
  children: propTypes.exports.oneOfType([propTypes.exports.element, propTypes.exports.arrayOf(propTypes.exports.element), propTypes.exports.any]).isRequired,
  // eslint-disable-next-line react/no-unused-prop-types
  isOpenChannel: propTypes.exports.bool,
  // eslint-disable-next-line react/no-unused-prop-types
  disableUserProfile: propTypes.exports.bool,
  // eslint-disable-next-line react/no-unused-prop-types
  renderUserProfile: propTypes.exports.func
};
UserProfileProvider.defaultProps = {
  isOpenChannel: false,
  disableUserProfile: false,
  renderUserProfile: null
};

var Typography = {
  H_1: 'H_1',
  H_2: 'H_2',
  SUBTITLE_1: 'SUBTITLE_1',
  SUBTITLE_2: 'SUBTITLE_2',
  BODY_1: 'BODY_1',
  BODY_2: 'BODY_2',
  BUTTON_1: 'BUTTON_1',
  BUTTON_2: 'BUTTON_2',
  CAPTION_1: 'CAPTION_1',
  CAPTION_2: 'CAPTION_2',
  CAPTION_3: 'CAPTION_3'
};
var Colors$2 = {
  ONBACKGROUND_1: 'ONBACKGROUND_1',
  ONBACKGROUND_2: 'ONBACKGROUND_2',
  ONBACKGROUND_3: 'ONBACKGROUND_3',
  ONBACKGROUND_4: 'ONBACKGROUND_4',
  ONCONTENT_1: 'ONCONTENT_1',
  ONCONTENT_2: 'ONCONTENT_2',
  PRIMARY: 'PRIMARY',
  ERROR: 'ERROR',
  SECONDARY_3: 'SECONDARY_3'
};

function changeTypographyToClassName(type) {
  switch (type) {
    case Typography.H_1:
      return 'sendbird-label--h-1';

    case Typography.H_2:
      return 'sendbird-label--h-2';

    case Typography.SUBTITLE_1:
      return 'sendbird-label--subtitle-1';

    case Typography.SUBTITLE_2:
      return 'sendbird-label--subtitle-2';

    case Typography.BODY_1:
      return 'sendbird-label--body-1';

    case Typography.BODY_2:
      return 'sendbird-label--body-2';

    case Typography.BUTTON_1:
      return 'sendbird-label--button-1';

    case Typography.BUTTON_2:
      return 'sendbird-label--button-2';

    case Typography.CAPTION_1:
      return 'sendbird-label--caption-1';

    case Typography.CAPTION_2:
      return 'sendbird-label--caption-2';

    case Typography.CAPTION_3:
      return 'sendbird-label--caption-3';

    default:
      return null;
  }
}

function changeColorToClassName$2(color) {
  switch (color) {
    case Colors$2.ONBACKGROUND_1:
      return 'sendbird-label--color-onbackground-1';

    case Colors$2.ONBACKGROUND_2:
      return 'sendbird-label--color-onbackground-2';

    case Colors$2.ONBACKGROUND_3:
      return 'sendbird-label--color-onbackground-3';

    case Colors$2.ONBACKGROUND_4:
      return 'sendbird-label--color-onbackground-4';

    case Colors$2.ONCONTENT_1:
      return 'sendbird-label--color-oncontent-1';

    case Colors$2.ONCONTENT_2:
      return 'sendbird-label--color-oncontent-2';

    case Colors$2.PRIMARY:
      return 'sendbird-label--color-primary';
    // should be Primary-3 fix me

    case Colors$2.ERROR:
      return 'sendbird-label--color-error';

    case Colors$2.SECONDARY_3:
      return 'sendbird-label--color-secondary-3';

    default:
      return null;
  }
}

function Label(_ref) {
  var className = _ref.className,
      type = _ref.type,
      color = _ref.color,
      children = _ref.children;
  return /*#__PURE__*/React__default__default["default"].createElement("span", {
    className: [].concat(_toConsumableArray(Array.isArray(className) ? className : [className]), ['sendbird-label', type ? changeTypographyToClassName(type) : '', color ? changeColorToClassName$2(color) : '']).join(' ')
  }, children);
}

Label.propTypes = {
  className: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.arrayOf(propTypes.exports.string)]),
  type: propTypes.exports.oneOf(['H_1', 'H_2', 'SUBTITLE_1', 'SUBTITLE_2', 'BODY_1', 'BODY_2', 'BUTTON_1', 'BUTTON_2', 'CAPTION_1', 'CAPTION_2', 'CAPTION_3']),
  color: propTypes.exports.oneOf(['ONBACKGROUND_1', 'ONBACKGROUND_2', 'ONBACKGROUND_3', 'ONBACKGROUND_4', 'ONCONTENT_1', 'ONCONTENT_2', 'PRIMARY', 'ERROR', 'SECONDARY_3']),
  children: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.number, propTypes.exports.element, propTypes.exports.any])
};
Label.defaultProps = {
  className: [],
  type: '',
  color: '',
  children: null
};
var LabelTypography = Typography;
var LabelColors = Colors$2;

var IconButton = /*#__PURE__*/React__default__default["default"].forwardRef(function (props, ref) {
  var _a = props.className,
      className = _a === void 0 ? '' : _a,
      children = props.children,
      _b = props.disabled,
      disabled = _b === void 0 ? false : _b,
      _c = props.width,
      width = _c === void 0 ? '56px' : _c,
      _d = props.height,
      height = _d === void 0 ? '56px' : _d,
      _e = props.type,
      type = _e === void 0 ? 'button' : _e,
      _f = props.style,
      style = _f === void 0 ? {} : _f,
      _g = props.onBlur,
      _onBlur = _g === void 0 ? function () {} : _g,
      _h = props.onClick,
      _onClick = _h === void 0 ? function () {} : _h;

  var _j = React__default.useState(false),
      isPressed = _j[0],
      setIsPressed = _j[1];

  return /*#__PURE__*/React__default__default["default"].createElement("button", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-iconbutton', isPressed ? 'sendbird-iconbutton--pressed' : ''], false).join(' '),
    disabled: disabled,
    ref: ref,
    type: type,
    style: __assign(__assign({}, style), {
      height: height,
      width: width
    }),
    onClick: function onClick(e) {
      if (disabled) {
        return;
      }

      setIsPressed(true);
      _onClick === null || _onClick === void 0 ? void 0 : _onClick(e);
    },
    onBlur: function onBlur(e) {
      setIsPressed(false);
      _onBlur === null || _onBlur === void 0 ? void 0 : _onBlur(e);
    }
  }, /*#__PURE__*/React__default__default["default"].createElement("span", {
    className: "sendbird-iconbutton__inner"
  }, children));
});

var ImageRenderer = function ImageRenderer(_a) {
  var _b = _a.className,
      className = _b === void 0 ? '' : _b,
      url = _a.url,
      _c = _a.alt,
      alt = _c === void 0 ? '' : _c,
      _d = _a.width,
      width = _d === void 0 ? null : _d,
      _e = _a.height,
      height = _e === void 0 ? null : _e,
      _f = _a.circle,
      circle = _f === void 0 ? false : _f,
      _g = _a.fixedSize,
      fixedSize = _g === void 0 ? false : _g,
      _h = _a.placeHolder,
      placeHolder = _h === void 0 ? null : _h,
      _j = _a.defaultComponent,
      defaultComponent = _j === void 0 ? null : _j,
      _k = _a.onLoad,
      _onLoad = _k === void 0 ? function () {} : _k,
      _l = _a.onError,
      _onError = _l === void 0 ? function () {} : _l;

  var _m = React__default.useState(false),
      showDefaultComponent = _m[0],
      setShowDefaultComponent = _m[1];

  var _o = React__default.useState(true),
      showPlaceHolder = _o[0],
      setShowPlaceHolder = _o[1];

  var DefaultComponent = React__default.useMemo(function () {
    return typeof defaultComponent === 'function' ? defaultComponent() : defaultComponent;
  }, [defaultComponent]);
  var PlaceHolder = React__default.useMemo(function () {
    return placeHolder && typeof placeHolder === 'function' ? placeHolder({
      style: {
        width: '100%',
        minWidth: width,
        maxWidth: fixedSize ? width : '400px',
        height: height,
        position: 'absolute',
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center'
      }
    }) : null;
  }, [placeHolder]);
  var HiddenImageLoader = React__default.useMemo(function () {
    setShowDefaultComponent(false); // reset the state when url is changed

    return /*#__PURE__*/React__default__default["default"].createElement("img", {
      className: "sendbird-image-renderer__hidden-image-loader",
      src: url,
      alt: alt,
      onLoad: function onLoad() {
        setShowPlaceHolder(false);

        _onLoad();
      },
      onError: function onError() {
        setShowDefaultComponent(true);

        _onError();
      }
    });
  }, [url]);
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-image-renderer'], false).join(' '),
    style: {
      width: '100%',
      minWidth: width,
      maxWidth: fixedSize ? width : '400px',
      height: height
    }
  }, showPlaceHolder && PlaceHolder, showDefaultComponent ? DefaultComponent : /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-image-renderer__image",
    style: {
      width: '100%',
      minWidth: width,
      maxWidth: fixedSize ? width : '400px',
      height: height,
      position: 'absolute',
      backgroundRepeat: 'no-repeat',
      backgroundPosition: 'center',
      backgroundSize: 'cover',
      backgroundImage: "url(".concat(url, ")"),
      borderRadius: circle ? '50%' : null
    }
  }), HiddenImageLoader);
};

var Type$1 = {
  ADD: 'ADD',
  ARROW_LEFT: 'ARROW_LEFT',
  ATTACH: 'ATTACH',
  BAN: 'BAN',
  BROADCAST: 'BROADCAST',
  CAMERA: 'CAMERA',
  CHANNELS: 'CHANNELS',
  CHAT: 'CHAT',
  CHAT_FILLED: 'CHAT_FILLED',
  CHEVRON_DOWN: 'CHEVRON_DOWN',
  CHEVRON_RIGHT: 'CHEVRON_RIGHT',
  CLOSE: 'CLOSE',
  COLLAPSE: 'COLLAPSE',
  COPY: 'COPY',
  CREATE: 'CREATE',
  DELETE: 'DELETE',
  DISCONNECTED: 'DISCONNECTED',
  DOCUMENT: 'DOCUMENT',
  DONE: 'DONE',
  DONE_ALL: 'DONE_ALL',
  DOWNLOAD: 'DOWNLOAD',
  EDIT: 'EDIT',
  EMOJI_MORE: 'EMOJI_MORE',
  ERROR: 'ERROR',
  EXPAND: 'EXPAND',
  FILE_AUDIO: 'FILE_AUDIO',
  FILE_DOCUMENT: 'FILE_DOCUMENT',
  FREEZE: 'FREEZE',
  GIF: 'GIF',
  INFO: 'INFO',
  LEAVE: 'LEAVE',
  MEMBERS: 'MEMBERS',
  MESSAGE: 'MESSAGE',
  MODERATIONS: 'MODERATIONS',
  MORE: 'MORE',
  MUTE: 'MUTE',
  NOTIFICATIONS: 'NOTIFICATIONS',
  NOTIFICATIONS_OFF_FILLED: 'NOTIFICATIONS_OFF_FILLED',
  OPERATOR: 'OPERATOR',
  PHOTO: 'PHOTO',
  PLAY: 'PLAY',
  PLUS: 'PLUS',
  QUESTION: 'QUESTION',
  REFRESH: 'REFRESH',
  REPLY: 'REPLY',
  REMOVE: 'REMOVE',
  SEARCH: 'SEARCH',
  SEND: 'SEND',
  SETTINGS_FILLED: 'SETTINGS_FILLED',
  SPINNER: 'SPINNER',
  SUPERGROUP: 'SUPERGROUP',
  THUMBNAIL_NONE: 'THUMBNAIL_NONE',
  TOGGLE_OFF: 'TOGGLE_OFF',
  TOGGLE_ON: 'TOGGLE_ON',
  USER: 'USER'
};

var _path$Q;

function _extends$S() {
  _extends$S = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$S.apply(this, arguments);
}

function SvgIconAdd(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$S({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$Q || (_path$Q = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-add_svg__fill",
    d: "M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm0 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334a2.667 2.667 0 002.666 2.666h37.334a2.667 2.667 0 002.666-2.666V13.333a2.667 2.667 0 00-2.666-2.666zm-18.667 8a2.667 2.667 0 012.649 2.355l.018.311v8h8a2.667 2.667 0 01.311 5.316l-.311.018h-8v8a2.667 2.667 0 01-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 01-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0132 18.667z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$P;

function _extends$R() {
  _extends$R = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$R.apply(this, arguments);
}

function SvgIconArrowLeft(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$R({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$P || (_path$P = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-arrow-left_svg__fill",
    d: "M33.886 8.781a2.668 2.668 0 01.221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 01.311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 01.222 3.52l-.221.251a2.668 2.668 0 01-3.52.222l-.252-.222L8.781 33.886a2.668 2.668 0 01-.222-3.52l.222-.252L30.114 8.781a2.668 2.668 0 013.772 0z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$O;

function _extends$Q() {
  _extends$Q = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$Q.apply(this, arguments);
}

function SvgIconAttach(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$Q({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$O || (_path$O = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-attach_svg__fill",
    d: "M55.334 28.926l-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 00-3.676-3.864L15.709 37.89a7.578 7.578 0 00-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 10-3.678-3.862z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$N;

function _extends$P() {
  _extends$P = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$P.apply(this, arguments);
}

function SvgIconBan(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$P({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$N || (_path$N = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-ban_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm12.333 21.333a1 1 0 011 1v3.334a1 1 0 01-1 1H19.667a1 1 0 01-1-1v-3.334a1 1 0 011-1h24.666z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$M;

function _extends$O() {
  _extends$O = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$O.apply(this, arguments);
}

function SvgIconBroadcast(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$O({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$M || (_path$M = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-broadcast_svg__fill",
    d: "M58.545 5.498c.08.258.122.526.122.796v46.079a2.666 2.666 0 01-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 01-7.997-7.75l-.003-.25V24a8 8 0 018-8H16L55.205 3.749a2.665 2.665 0 013.34 1.75zM21.333 44.587V48a5.333 5.333 0 0010.652.398L32 47.92l-10.667-3.333zm32-34.667l-32 9.997v18.83l32 9.997V9.92zM16 21.333h-5.333a2.67 2.67 0 00-2.65 2.356L8 24v10.667a2.667 2.667 0 002.667 2.666H16v-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$L;

function _extends$N() {
  _extends$N = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$N.apply(this, arguments);
}

function SvgIconCamera(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$N({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$L || (_path$L = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-camera_svg__fill",
    d: "M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 017.986 7.53l.014.47v29.334a8 8 0 01-8 8H8a8 8 0 01-8-8V21.333a8 8 0 018-8h9.237l4.544-6.812a2.665 2.665 0 011.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 01-1.887 1.167l-.331.02H8a2.668 2.668 0 00-2.667 2.667v29.334A2.667 2.667 0 008 53.333h48a2.667 2.667 0 002.667-2.666V21.333A2.667 2.667 0 0056 18.667H45.333a2.665 2.665 0 01-2.218-1.188l-4.544-6.812zM32 21.333c7.364 0 13.333 5.97 13.333 13.334C45.333 42.03 39.363 48 32 48c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$K;

function _extends$M() {
  _extends$M = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$M.apply(this, arguments);
}

function SvgIconChannels(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$M({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$K || (_path$K = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-channels_svg__fill",
    d: "M42.65 5.333l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 01.311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 01.312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 01-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 01-.311-5.315l.31-.018h11.835l1.515-13.627a2.668 2.668 0 012.634-2.373l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.668 2.668 0 012.634-2.373zm-5.927 32l1.186-10.667H27.272l-1.184 10.667h10.635z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$J;

function _extends$L() {
  _extends$L = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$L.apply(this, arguments);
}

function SvgIconChat(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$L({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$J || (_path$J = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-chat_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$I;

function _extends$K() {
  _extends$K = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$K.apply(this, arguments);
}

function SvgIconChatFilled(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$K({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$I || (_path$I = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-chat-filled_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$H;

function _extends$J() {
  _extends$J = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$J.apply(this, arguments);
}

function SvgIconChevronDown(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$J({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$H || (_path$H = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-chevron-down_svg__fill",
    d: "M16.121 21.879a2.998 2.998 0 00-4.242 0 2.998 2.998 0 000 4.242l18 18a2.998 2.998 0 004.242 0l18-18a2.998 2.998 0 000-4.242 2.998 2.998 0 00-4.242 0L32 37.757 16.121 21.88z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$G;

function _extends$I() {
  _extends$I = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$I.apply(this, arguments);
}

function SvgIconChevronRight(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$I({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$G || (_path$G = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-chevron-right_svg__fill",
    d: "M22.114 46.114a2.668 2.668 0 003.772 3.772l16-16a2.668 2.668 0 000-3.772l-16-16a2.668 2.668 0 00-3.772 3.772L36.23 32 22.114 46.114z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$F;

function _extends$H() {
  _extends$H = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$H.apply(this, arguments);
}

function SvgIconClose(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$H({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$F || (_path$F = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-close_svg__fill",
    d: "M52.552 11.448a2.666 2.666 0 01.222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 010 3.771 2.666 2.666 0 01-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 01-3.771 0 2.666 2.666 0 01-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 013.771 0z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$E;

function _extends$G() {
  _extends$G = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$G.apply(this, arguments);
}

function SvgIconCollapse(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$G({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$E || (_path$E = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-collapse_svg__fill",
    d: "M16 8a2.667 2.667 0 00-2.649 2.356l-.018.31v42.667a2.667 2.667 0 005.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.668 2.668 0 00-.221 3.52l.221.251a2.666 2.666 0 003.52.222l.252-.222 10.666-10.666a2.666 2.666 0 00.222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 00-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0016 8z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$D;

function _extends$F() {
  _extends$F = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$F.apply(this, arguments);
}

function SvgIconCopy(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$F({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$D || (_path$D = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-copy_svg__fill",
    d: "M53.333 21.333a8 8 0 018 8v24a8 8 0 01-8 8h-24a8 8 0 01-8-8v-24a8 8 0 018-8zm0 5.334h-24a2.667 2.667 0 00-2.666 2.666v24A2.667 2.667 0 0029.333 56h24A2.667 2.667 0 0056 53.333v-24a2.667 2.667 0 00-2.667-2.666zm-18.666-24a8 8 0 017.986 7.53l.014.47v2.666a2.667 2.667 0 01-5.316.311l-.018-.31v-2.667a2.67 2.67 0 00-2.355-2.65L34.667 8h-24a2.67 2.67 0 00-2.65 2.356l-.017.31v24a2.67 2.67 0 002.356 2.65l.31.017h2.667a2.667 2.667 0 01.311 5.316l-.31.018h-2.667a8.001 8.001 0 01-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013h24z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$C;

function _extends$E() {
  _extends$E = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$E.apply(this, arguments);
}

function SvgIconCreate(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$E({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$C || (_path$C = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-create_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zm2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$B;

function _extends$D() {
  _extends$D = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$D.apply(this, arguments);
}

function SvgIconDelete(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$D({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$B || (_path$B = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-delete_svg__fill",
    d: "M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 01.311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 01-.311-5.316L8 13.333h10.666v-2.666a8.002 8.002 0 017.53-7.987l.47-.013h10.667zm10.666 16H16v34.666a2.67 2.67 0 002.356 2.65l.31.017h26.667a2.67 2.67 0 002.65-2.356l.017-.31V18.666zm-21.332 8a2.667 2.667 0 012.648 2.355l.018.311v16a2.667 2.667 0 01-5.316.311l-.017-.31v-16a2.667 2.667 0 012.667-2.667zm10.666 0a2.67 2.67 0 012.65 2.355l.017.311v16a2.667 2.667 0 01-5.315.311l-.018-.31v-16a2.667 2.667 0 012.666-2.667zm0-18.667H26.667a2.67 2.67 0 00-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 00-2.356-2.65L37.334 8z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$A;

function _extends$C() {
  _extends$C = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$C.apply(this, arguments);
}

function SvgIconDisconnected(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$C({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$A || (_path$A = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-disconnected_svg__fill",
    d: "M54.534 6.069l-.248.217-9.736 9.735-.04.04-9.573 9.573c-.15.118-.286.254-.405.404L6.286 54.286a2.423 2.423 0 003.18 3.645l.248-.217 13.374-13.373a2.419 2.419 0 001.88-.401 12.119 12.119 0 0114.04 0 2.424 2.424 0 102.808-3.952 16.951 16.951 0 00-11.303-3.072l6.743-6.744a24.105 24.105 0 0110.159 5.021 2.424 2.424 0 003.11-3.719 28.945 28.945 0 00-9.34-5.23l5.633-5.634a36.153 36.153 0 019.225 5.934 2.425 2.425 0 003.211-3.633 40.972 40.972 0 00-8.796-5.941l7.256-7.256a2.423 2.423 0 00-3.18-3.645zm-35.04 21.474a28.936 28.936 0 00-6.032 3.942 2.424 2.424 0 003.137 3.697 24.018 24.018 0 015.022-3.282 2.425 2.425 0 00-2.127-4.357zM4.748 22.909a2.424 2.424 0 003.207 3.636 36.363 36.363 0 0126.978-8.977 2.424 2.424 0 00.389-4.832A41.204 41.204 0 004.748 22.909z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$z;

function _extends$B() {
  _extends$B = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$B.apply(this, arguments);
}

function SvgIconDocument(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$B({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$z || (_path$z = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-document_svg__fill",
    d: "M37.333 2.667a3.305 3.305 0 01.274.014l.085.01.058.008c.047.007.094.016.141.026l.029.007c.05.01.098.023.146.037l.034.01c.237.07.46.173.663.303l.034.022c.036.023.07.047.104.072l.057.043a2.646 2.646 0 01.261.228l-.126-.117c.05.043.097.088.143.135L55.21 19.438c.047.046.091.094.134.143l.035.04c.026.032.052.063.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048c.009.043.017.086.024.13l.006.048.007.051.004.041c.01.09.014.18.014.27v32a8 8 0 01-8 8H16a8 8 0 01-8-8V10.667a8 8 0 018-8h21.333zM34.666 8H16a2.667 2.667 0 00-2.667 2.667v42.666A2.667 2.667 0 0016 56h32a2.667 2.667 0 002.667-2.667L50.666 24H37.333a2.667 2.667 0 01-2.648-2.356l-.018-.31L34.666 8zm12.227 10.667l-6.894-6.894.001 6.894h6.893z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$y;

function _extends$A() {
  _extends$A = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$A.apply(this, arguments);
}

function SvgIconDone(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$A({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$y || (_path$y = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-done_svg__fill",
    d: "M12.552 31.448a2.665 2.665 0 10-3.771 3.771l13.333 13.333a2.666 2.666 0 003.772 0L55.219 19.22a2.667 2.667 0 00-3.771-3.771L24 42.895 12.552 31.448z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$x;

function _extends$z() {
  _extends$z = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$z.apply(this, arguments);
}

function SvgIconDoneAll(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$z({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$x || (_path$x = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-done-all_svg__fill",
    d: "M5.886 31.448L19.219 44.78a2.667 2.667 0 01-3.771 3.771L2.114 35.22a2.667 2.667 0 013.772-3.771zm52.228-16a2.666 2.666 0 113.772 3.771L32.552 48.552a2.665 2.665 0 01-3.771 0L15.448 35.22a2.665 2.665 0 010-3.771 2.665 2.665 0 013.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 010 3.771L32.556 35.215a2.665 2.665 0 01-3.771 0 2.664 2.664 0 010-3.77L44.78 15.447a2.665 2.665 0 013.771 0z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$w;

function _extends$y() {
  _extends$y = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$y.apply(this, arguments);
}

function SvgIconDownload(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$y({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$w || (_path$w = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-download_svg__fill",
    d: "M56 42.667a2.667 2.667 0 012.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 01-7.986-7.53l-.014-.47v-8a2.667 2.667 0 015.316-.311l.018.311v8a2.67 2.67 0 002.355 2.65l.311.017h37.334a2.667 2.667 0 002.648-2.356l.018-.31v-8A2.667 2.667 0 0156 42.667zm-36.552-8.781a2.666 2.666 0 013.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 015.316-.311l.018.311v30.894l6.114-6.113a2.668 2.668 0 013.52-.221l.251.221a2.666 2.666 0 01.222 3.52l-.222.252-10.658 10.657a2.341 2.341 0 01-.135.128l.127-.119a2.67 2.67 0 01-.195.176l-.056.045a1.74 1.74 0 01-.086.064l-.056.04-.086.056-.06.036-.081.046-.079.04a2.528 2.528 0 01-.14.065l-.09.036c-.023.01-.045.017-.067.025l-.09.03-.063.019c-.043.012-.086.024-.13.034l-.013.003a3.06 3.06 0 01-.144.028l-.064.01c-.03.005-.061.009-.092.012l-.084.008a1.727 1.727 0 01-.103.006l-.069.002h-.095c-.028 0-.055-.002-.082-.003l.139.003c-.084 0-.167-.004-.249-.011l-.061-.007a1.359 1.359 0 01-.092-.012l-.09-.015a2.242 2.242 0 01-.118-.025l-.04-.01a2.644 2.644 0 01-.34-.11l-.015-.006c-.05-.02-.097-.04-.145-.063l-.042-.02L30.71 45a1.16 1.16 0 01-.067-.039c-.03-.018-.059-.035-.087-.054l-.062-.041c-.03-.02-.06-.042-.088-.063l-.04-.03-.008-.007a2.796 2.796 0 01-.251-.223L19.448 33.886z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$v;

function _extends$x() {
  _extends$x = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$x.apply(this, arguments);
}

function SvgIconEdit(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$x({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 65 65"
  }, props), _path$v || (_path$v = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-edit_svg__fill",
    d: "M56 56a2.667 2.667 0 01.311 5.315l-.311.018H8a2.667 2.667 0 01-.311-5.316L8 56h48zM35.448 3.448a2.665 2.665 0 013.771 0l10.667 10.666a2.668 2.668 0 010 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 01-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16l-6.894-6.893z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$u;

function _extends$w() {
  _extends$w = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$w.apply(this, arguments);
}

function SvgIconEmojiMore(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$w({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$u || (_path$u = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-emoji-more_svg__fill",
    d: "M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 01-1.144 4.111 24.669 24.669 0 00-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 011.494-2.62 2.13 2.13 0 012.62 1.494 28.895 28.895 0 011.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897C3.2 16.157 16.138 3.22 32.097 3.22zm10.705 34.792a2.133 2.133 0 012.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488-5.792 0-10.856-3.865-12.73-9.488a2.134 2.134 0 011.875-2.803l.15-.005h21.41zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23.292-.382zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133zm21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133zM54.853 0a.8.8 0 01.8.8v7.786h7.76a.8.8 0 01.8.8v2.667a.8.8 0 01-.8.8h-7.76v7.758a.8.8 0 01-.8.8h-2.666a.8.8 0 01-.8-.8v-7.758h-7.785a.8.8 0 01-.8-.8V9.387a.8.8 0 01.8-.8l7.784-.001V.8a.8.8 0 01.8-.8h2.667z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$t;

function _extends$v() {
  _extends$v = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$v.apply(this, arguments);
}

function SvgIconError(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$v({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$t || (_path$t = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-error_svg__fill",
    d: "M32 5.06a8 8 0 016.561 3.424l.287.439 22.608 37.744a8 8 0 01.022 7.962 8.005 8.005 0 01-6.356 4.014l-.535.024H9.384a8.002 8.002 0 01-6.862-4.038 8.008 8.008 0 01-.226-7.493l.27-.506L25.16 8.91A8.001 8.001 0 0132 5.06zm0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.669 2.669 0 001.909 3.973l.341.027h45.144a2.67 2.67 0 002.45-3.659l-.148-.304L34.28 11.676A2.666 2.666 0 0032 10.393zm0 32.274A2.667 2.667 0 1132 48a2.667 2.667 0 010-5.333zm0-21.334a2.667 2.667 0 012.649 2.356l.018.311v10.667a2.667 2.667 0 01-5.316.311l-.018-.311V24A2.667 2.667 0 0132 21.333z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$s;

function _extends$u() {
  _extends$u = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$u.apply(this, arguments);
}

function SvgIconExpand(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$u({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$s || (_path$s = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-expand_svg__fill",
    d: "M48 8a2.667 2.667 0 012.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 01-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.668 2.668 0 01.221 3.52l-.221.251a2.666 2.666 0 01-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 01-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 013.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0148 8z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$r;

function _extends$t() {
  _extends$t = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$t.apply(this, arguments);
}

function SvgIconFileAudio(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$t({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$r || (_path$r = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-file-audio_svg__fill",
    d: "M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 01-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 013.156-.047zm-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 01-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 013.156-.047z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$q;

function _extends$s() {
  _extends$s = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$s.apply(this, arguments);
}

function SvgIconFileDocument(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$s({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$q || (_path$q = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-file-document_svg__fill",
    d: "M39.414 6.4a2.41 2.41 0 011.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm0-8.533l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 00-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.152 2.152 0 001.985-2.155c0-1.193-.957-2.16-2.137-2.16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$p;

function _extends$r() {
  _extends$r = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$r.apply(this, arguments);
}

function SvgIconFreeze(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$r({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$p || (_path$p = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-freeze_svg__fill",
    d: "M41.636 3.226l.251.222a2.668 2.668 0 01.222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 015.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.668 2.668 0 011.952 2.938l-.067.328a2.667 2.667 0 01-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.667 2.667 0 012.937 1.952l.067.328a2.669 2.669 0 01-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 01-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 01-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 01-3.52.222l-.251-.222a2.666 2.666 0 01-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 01-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 01-1.953-2.937l.067-.328a2.665 2.665 0 012.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 01-2.937-1.952l-.067-.328a2.668 2.668 0 011.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 015.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 013.52-.222z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$o;

function _extends$q() {
  _extends$q = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$q.apply(this, arguments);
}

function SvgIconGif(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$q({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$o || (_path$o = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-gif_svg__fill",
    d: "M16.664 45.333c2.155 0 4.119-.318 5.89-.953 1.772-.636 3.143-1.53 4.113-2.683V31.34h-10.29v3.94h4.902v4.474c-.861.856-2.304 1.283-4.327 1.283-2.011 0-3.538-.695-4.58-2.085-1.04-1.39-1.562-3.446-1.562-6.168v-1.657c.012-2.698.497-4.73 1.455-6.097.958-1.366 2.352-2.05 4.184-2.05 1.437 0 2.565.345 3.385 1.034.82.69 1.35 1.777 1.59 3.262h5.243c-.324-2.804-1.36-4.94-3.107-6.408-1.748-1.468-4.172-2.201-7.273-2.201-2.226 0-4.169.502-5.827 1.506-1.658 1.004-2.927 2.454-3.807 4.35-.88 1.895-1.32 4.138-1.32 6.728v1.765c.024 2.52.5 4.712 1.428 6.578.928 1.865 2.245 3.288 3.95 4.269 1.707.98 3.69 1.47 5.953 1.47zm20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666h5.063z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$n;

function _extends$p() {
  _extends$p = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$p.apply(this, arguments);
}

function SvgIconInfo(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$p({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$n || (_path$n = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-info_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm1.667 21.333a1 1 0 011 1v14a1 1 0 01-1 1h-3.334a1 1 0 01-1-1v-14a1 1 0 011-1h3.334zm-1.667-8a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$m;

function _extends$o() {
  _extends$o = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$o.apply(this, arguments);
}

function SvgIconLeave(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$o({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$m || (_path$m = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-leave_svg__fill",
    d: "M32 5.333a2.667 2.667 0 01.311 5.316l-.311.018H10.667a2.67 2.67 0 00-2.65 2.355L8 13.333v37.334a2.667 2.667 0 002.356 2.648l.31.018H32a2.667 2.667 0 01.311 5.316l-.311.018H10.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V13.333a8 8 0 017.53-7.986l.47-.014H32zm17.634 13.893l.252.222 10.666 10.666a2.666 2.666 0 01.222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 01-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 01-.311-5.315l.311-.018h33.56l-7.446-7.448a2.668 2.668 0 01-.221-3.52l.221-.251a2.666 2.666 0 013.52-.222z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$l;

function _extends$n() {
  _extends$n = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$n.apply(this, arguments);
}

function SvgIconMembers(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$n({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$l || (_path$l = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-members_svg__fill",
    d: "M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM54 37.765a13.333 13.333 0 019.986 12.297l.014.605V56a2.667 2.667 0 01-5.315.311L58.667 56v-5.331a8 8 0 00-6-7.74A2.667 2.667 0 1154 37.765zM24 5.333c7.364 0 13.333 5.97 13.333 13.334C37.333 26.03 31.363 32 24 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm19.328.43a13.333 13.333 0 010 25.834 2.667 2.667 0 11-1.323-5.167 8 8 0 000-15.5 2.667 2.667 0 111.323-5.167zM24 10.667a8 8 0 100 16 8 8 0 000-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$k;

function _extends$m() {
  _extends$m = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$m.apply(this, arguments);
}

function SvgIconMessage(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$m({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$k || (_path$k = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-message_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zM18.667 29.333a2.667 2.667 0 11-.001 5.333 2.667 2.667 0 01.001-5.333zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$j;

function _extends$l() {
  _extends$l = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$l.apply(this, arguments);
}

function SvgIconModerations(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$l({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$j || (_path$j = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-moderations_svg__fill",
    d: "M18.667 34.667a2.667 2.667 0 01.311 5.316l-.311.017h-5.334v16a2.667 2.667 0 01-5.316.311L8 56V40H2.667a2.667 2.667 0 01-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 012.649 2.356l.018.311v24a2.667 2.667 0 01-5.316.311L29.333 56V32A2.667 2.667 0 0132 29.333zM61.333 40a2.667 2.667 0 01.311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 01-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 01-.311-5.316l.311-.017h16zm-8-34.667a2.67 2.67 0 012.65 2.356L56 8v24a2.667 2.667 0 01-5.315.311L50.667 32V8a2.667 2.667 0 012.666-2.667zm-42.666 0a2.667 2.667 0 012.648 2.356l.018.311v18.667a2.667 2.667 0 01-5.316.311L8 26.667V8a2.667 2.667 0 012.667-2.667zm21.333 0a2.667 2.667 0 012.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 01.311 5.317L40 24H24a2.667 2.667 0 01-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0132 5.333z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$i;

function _extends$k() {
  _extends$k = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$k.apply(this, arguments);
}

function SvgIconMore(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$k({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$i || (_path$i = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-more_svg__fill",
    d: "M32 45.333a5.333 5.333 0 110 10.666 5.333 5.333 0 010-10.666zM32 28a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 28zm0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$h;

function _extends$j() {
  _extends$j = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$j.apply(this, arguments);
}

function SvgIconMute(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$j({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$h || (_path$h = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-mute_svg__fill",
    d: "M55.62 19.616l.067.123A26.552 26.552 0 0158.667 32c0 4.326-1.03 8.41-2.864 12.025-1.012 2.726-1.235 4.847-.67 6.363.71 1.903 1.598 3.49 2.662 4.758 1.54 1.586 1.039 2.696-1.506 3.33-2.09.521-5.716-.027-10.879-1.646l-.488-.155-1.594-.527A26.56 26.56 0 0132 58.667a26.55 26.55 0 01-12.326-3.014l-.059-.03 4-4A21.24 21.24 0 0032 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219c.728.225 1.414.423 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.188 21.188 0 001.895-8.8 21.24 21.24 0 00-1.71-8.385l3.997-3.999zm2.266-13.502a2.668 2.668 0 01.221 3.52l-.221.252-48 48a2.668 2.668 0 01-3.993-3.52l.221-.252 5.238-5.237a26.563 26.563 0 01-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0116.877 6.02l5.237-5.239a2.668 2.668 0 013.772 0zM32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.248 21.248 0 0032 10.666z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$g;

function _extends$i() {
  _extends$i = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$i.apply(this, arguments);
}

function SvgIconNotifications(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$i({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$g || (_path$g = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-notifications_svg__fill",
    d: "M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zM32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.583 10.583 0 01-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$f;

function _extends$h() {
  _extends$h = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$h.apply(this, arguments);
}

function SvgIconNotificationsOffFilled(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$h({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$f || (_path$f = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-notifications-off-filled_svg__fill",
    d: "M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 012.85-.117l.127.117a2.105 2.105 0 010 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 010-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zm20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31l28.54-28.538z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$e;

function _extends$g() {
  _extends$g = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$g.apply(this, arguments);
}

function SvgIconOperator(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$g({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$e || (_path$e = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-operator_svg__fill",
    d: "M29.83 6.45a2.667 2.667 0 014.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0150.666 56H13.333a2.666 2.666 0 01-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 01-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 01-3.632-.281l-.204-.251L32 12.587zM32 32a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 32z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$d;

function _extends$f$1() {
  _extends$f$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$f$1.apply(this, arguments);
}

function SvgIconPhoto(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$f$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$d || (_path$d = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-photo_svg__fill",
    d: "M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 002.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.668 2.668 0 013.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 00-2.498-2.661l-.168-.005zm-28 5.333a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$c;

function _extends$e$1() {
  _extends$e$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$e$1.apply(this, arguments);
}

function SvgIconPlay(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$e$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$c || (_path$c = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-play_svg__fill",
    d: "M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016L51.908 34.75z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$b;

function _extends$d$1() {
  _extends$d$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$d$1.apply(this, arguments);
}

function SvgIconPlus(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$d$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$b || (_path$b = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-plus_svg__fill",
    d: "M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0v18.666z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$a;

function _extends$c$1() {
  _extends$c$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$c$1.apply(this, arguments);
}

function SvgIconQuestion(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$c$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$a || (_path$a = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-question_svg__fill",
    d: "M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333zM32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24zm2.213-18.63a2.667 2.667 0 11-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 00-10.364-1.777 2.667 2.667 0 01-5.032-1.77 10.668 10.668 0 0120.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21.268 21.268 0 01-2.813 1.578v.893zm-5.333 7.523a2.667 2.667 0 115.333 0v.44a2.667 2.667 0 11-5.333 0v-.44z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$9;

function _extends$b$1() {
  _extends$b$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$b$1.apply(this, arguments);
}

function SvgIconRefresh(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$b$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$9 || (_path$9 = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-refresh_svg__fill",
    d: "M46.14 14.43l.562.537 6.631 6.167v-7.8a2.67 2.67 0 012.356-2.65l.311-.017a2.667 2.667 0 012.649 2.355l.018.311v16a2.67 2.67 0 01-2.356 2.65L56 32H40a2.667 2.667 0 01-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 015.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$8;

function _extends$a$1() {
  _extends$a$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$a$1.apply(this, arguments);
}

function SvgIconRemove(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$a$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$8 || (_path$8 = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-remove_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zm9.886 19.447a2.668 2.668 0 00-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 00-3.638.124l-.124.134a2.667 2.667 0 00.124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 00.124 3.638l.134.124a2.667 2.667 0 003.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 003.638-.124l.124-.134a2.667 2.667 0 00-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 00-.124-3.638z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$7$1;

function _extends$9$1() {
  _extends$9$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$9$1.apply(this, arguments);
}

function SvgIconReplyFilled(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$9$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 12 12"
  }, props), _path$7$1 || (_path$7$1 = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-reply-filled_svg__fill",
    d: "M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 00.062-.164c-.07-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.331 9.331 0 00-2.406-.655 9.542 9.542 0 00-.862-.078V2.225a.225.225 0 00-.128-.203.23.23 0 00-.24.028L.084 5.692A.221.221 0 000 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.222.222 0 00.13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.39 6.39 0 012.087.96c1.018.724 1.398 1.5 1.4 1.507a.23.23 0 00.205.128z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$6$1;

function _extends$8$1() {
  _extends$8$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$8$1.apply(this, arguments);
}

function SvgIconSearch(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$8$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$6$1 || (_path$6$1 = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-search_svg__fill",
    d: "M26.667 48C14.885 48 5.333 38.449 5.333 26.667c0-11.782 9.552-21.334 21.334-21.334S48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 01-3.772 3.772l-13.67-13.67A21.239 21.239 0 0126.667 48zm0-5.333c8.836 0 16-7.164 16-16 0-8.837-7.164-16-16-16-8.837 0-16 7.163-16 16 0 8.836 7.163 16 16 16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$5$1;

function _extends$7$1() {
  _extends$7$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$7$1.apply(this, arguments);
}

function SvgIconSend(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$7$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$5$1 || (_path$5$1 = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-send_svg__fill",
    d: "M59.795 29.43L7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 001.544 1.275l32.273 5.394L11.4 37.47a1.998 1.998 0 00-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$4$1;

function _extends$6$1() {
  _extends$6$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$6$1.apply(this, arguments);
}

function SvgIconSettingsFilled(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$6$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$4$1 || (_path$4$1 = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-settings-filled_svg__fill",
    d: "M32 2.667A5.332 5.332 0 0137.333 8v.24A4.4 4.4 0 0040 12.267a4.4 4.4 0 004.853-.88l.16-.16a5.332 5.332 0 017.547 0 5.333 5.333 0 010 7.546l-.16.16a4.401 4.401 0 00-.88 4.854V24a4.4 4.4 0 004.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0051.733 40a4.4 4.4 0 00.88 4.853l.16.16a5.332 5.332 0 010 7.547 5.333 5.333 0 01-7.546 0l-.16-.16a4.401 4.401 0 00-4.854-.88 4.397 4.397 0 00-2.666 4.027V56a5.333 5.333 0 01-10.667 0v-.24A4.4 4.4 0 0024 51.733a4.4 4.4 0 00-4.853.88l-.16.16a5.332 5.332 0 01-7.547 0 5.333 5.333 0 010-7.546l.16-.16a4.401 4.401 0 00.88-4.854 4.397 4.397 0 00-4.027-2.666H8A5.333 5.333 0 018 26.88h.24A4.4 4.4 0 0012.267 24a4.4 4.4 0 00-.88-4.853l-.16-.16a5.332 5.332 0 010-7.547 5.333 5.333 0 017.546 0l.16.16a4.401 4.401 0 004.854.88H24a4.4 4.4 0 002.667-4.027V8A5.332 5.332 0 0132 2.667zM32 24a8 8 0 100 16 8 8 0 000-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$3$1;

function _extends$5$1() {
  _extends$5$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$5$1.apply(this, arguments);
}

function SvgIconSpinner(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$5$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$3$1 || (_path$3$1 = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-spinner_svg__fill",
    d: "M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 105.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 100 5.677z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$2$1;

function _extends$4$1() {
  _extends$4$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$4$1.apply(this, arguments);
}

function SvgIconSupergroup(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$4$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$2$1 || (_path$2$1 = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-supergroup_svg__fill",
    d: "M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 01-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 01-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011h9.778zm18.578-17.291c.266 0 .53.04.784.118 4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 01-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 01-2.648-2.356l-.018-.31a2.67 2.67 0 012.355-2.65l.311-.017h2.934zm-44 0l.31.018a2.666 2.666 0 012.356 2.648l-.018.311a2.666 2.666 0 01-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 010 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809.255-.078.52-.118.788-.118h2.953zM32 19.958c5.512 0 10 4.409 10 9.871 0 5.463-4.488 9.872-10 9.872s-10-4.41-10-9.872 4.488-9.871 10-9.871zm0 5.333c-2.588 0-4.667 2.043-4.667 4.538 0 2.496 2.08 4.538 4.667 4.538 2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538zM17.333 2.667c5.513 0 10 4.409 10 9.871 0 5.462-4.487 9.871-10 9.871-5.512 0-10-4.409-10-9.871 0-5.462 4.488-9.871 10-9.871zm29.334 0c5.512 0 10 4.409 10 9.871 0 5.462-4.488 9.871-10 9.871-5.513 0-10-4.409-10-9.871 0-5.462 4.487-9.871 10-9.871zM17.333 8c-2.587 0-4.666 2.042-4.666 4.538 0 2.496 2.079 4.538 4.666 4.538 2.588 0 4.667-2.042 4.667-4.538C22 10.042 19.921 8 17.333 8zm29.334 0C44.079 8 42 10.042 42 12.538c0 2.496 2.079 4.538 4.667 4.538 2.587 0 4.666-2.042 4.666-4.538 0-2.496-2.079-4.538-4.666-4.538z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$1$1;

function _extends$3$1() {
  _extends$3$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$3$1.apply(this, arguments);
}

function SvgIconThumbnailNone(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$3$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$1$1 || (_path$1$1 = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-thumbnail-none_svg__fill",
    d: "M34.667 5.333a2.667 2.667 0 010 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 013.771 0l8.781 8.78v-4.228a2.667 2.667 0 012.498-2.661l.169-.005a2.667 2.667 0 012.667 2.666v21.334a8 8 0 01-8 8H13.33a8 8 0 01-7.998-8V13.333a8 8 0 018-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 002.661-2.498l.005-.168v-9.563L42.667 30.438zM22.667 16a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667zM56.78 3.448a2.665 2.665 0 013.771 0 2.665 2.665 0 010 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 01-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 01-3.638.125l-.133-.125a2.665 2.665 0 010-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 01-.125-3.638l.125-.133a2.665 2.665 0 013.771 0l4.78 4.78z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _g$1$1;

function _extends$2$1() {
  _extends$2$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$2$1.apply(this, arguments);
}

function SvgIconToggleoff(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$2$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 88 48"
  }, props), _g$1$1 || (_g$1$1 = /*#__PURE__*/React__default__namespace.createElement("g", {
    fill: "none",
    fillRule: "evenodd"
  }, /*#__PURE__*/React__default__namespace.createElement("rect", {
    className: "icon-toggleoff_svg__fill",
    width: 80,
    height: 40,
    x: 4,
    y: 4,
    fill: "#000",
    rx: 20
  }), /*#__PURE__*/React__default__namespace.createElement("circle", {
    cx: 24,
    cy: 24,
    r: 12,
    fill: "#FFF"
  }), /*#__PURE__*/React__default__namespace.createElement("path", {
    fill: "#FFF",
    d: "M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"
  }), /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-toggleoff_svg__fill",
    fill: "#000",
    d: "M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"
  }))));
}

var _g$8;

function _extends$1$1() {
  _extends$1$1 = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$1$1.apply(this, arguments);
}

function SvgIconToggleon(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$1$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 88 48"
  }, props), _g$8 || (_g$8 = /*#__PURE__*/React__default__namespace.createElement("g", {
    fill: "none",
    fillRule: "evenodd"
  }, /*#__PURE__*/React__default__namespace.createElement("rect", {
    className: "icon-toggleon_svg__fill",
    width: 80,
    height: 40,
    x: 4,
    y: 4,
    fill: "#000",
    rx: 20
  }), /*#__PURE__*/React__default__namespace.createElement("circle", {
    cx: 64,
    cy: 24,
    r: 12,
    fill: "#FFF"
  }), /*#__PURE__*/React__default__namespace.createElement("path", {
    fill: "#FFF",
    d: "M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"
  }), /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-toggleon_svg__fill",
    fill: "#000",
    d: "M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"
  }))));
}

var _path$R;

function _extends$T() {
  _extends$T = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends$T.apply(this, arguments);
}

function SvgIconUser(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$T({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$R || (_path$R = /*#__PURE__*/React__default__namespace.createElement("path", {
    className: "icon-user_svg__fill",
    d: "M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM32 5.333c7.364 0 13.333 5.97 13.333 13.334C45.333 26.03 39.363 32 32 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var Colors$1 = {
  DEFAULT: 'DEFAULT',
  PRIMARY: 'PRIMARY',
  SECONDARY: 'SECONDARY',
  CONTENT: 'CONTENT',
  CONTENT_INVERSE: 'CONTENT_INVERSE',
  WHITE: 'WHITE',
  GRAY: 'GRAY',
  SENT: 'SENT',
  READ: 'READ',
  ON_BACKGROUND_1: 'ON_BACKGROUND_1',
  ON_BACKGROUND_2: 'ON_BACKGROUND_2',
  ON_BACKGROUND_3: 'ON_BACKGROUND_3',
  BACKGROUND_3: 'BACKGROUND_3',
  ERROR: 'ERROR'
};

function changeColorToClassName$1(color) {
  switch (color) {
    case Colors$1.PRIMARY:
      return 'sendbird-icon-color--primary';

    case Colors$1.SECONDARY:
      return 'sendbird-icon-color--secondary';

    case Colors$1.CONTENT:
      return 'sendbird-icon-color--content';

    case Colors$1.CONTENT_INVERSE:
      return 'sendbird-icon-color--content-inverse';

    case Colors$1.WHITE:
      return 'sendbird-icon-color--white';

    case Colors$1.GRAY:
      return 'sendbird-icon-color--gray';

    case Colors$1.SENT:
      return 'sendbird-icon-color--sent';

    case Colors$1.READ:
      return 'sendbird-icon-color--read';

    case Colors$1.ON_BACKGROUND_1:
      return 'sendbird-icon-color--on-background-1';

    case Colors$1.ON_BACKGROUND_2:
      return 'sendbird-icon-color--on-background-2';

    case Colors$1.ON_BACKGROUND_3:
      return 'sendbird-icon-color--on-background-3';

    case Colors$1.BACKGROUND_3:
      return 'sendbird-icon-color--background-3';

    case Colors$1.ERROR:
      return 'sendbird-icon-color--error';

    default:
      return '';
  }
}

function changeTypeToIconComponent(type) {
  switch (type) {
    case Type$1.ADD:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconAdd, null);

    case Type$1.ARROW_LEFT:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconArrowLeft, null);

    case Type$1.ATTACH:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconAttach, null);

    case Type$1.BAN:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconBan, null);

    case Type$1.BROADCAST:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconBroadcast, null);

    case Type$1.CAMERA:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconCamera, null);

    case Type$1.CHANNELS:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconChannels, null);

    case Type$1.CHAT:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconChat, null);

    case Type$1.CHAT_FILLED:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconChatFilled, null);

    case Type$1.CHEVRON_DOWN:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconChevronDown, null);

    case Type$1.CHEVRON_RIGHT:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconChevronRight, null);

    case Type$1.CLOSE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconClose, null);

    case Type$1.COLLAPSE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconCollapse, null);

    case Type$1.COPY:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconCopy, null);

    case Type$1.CREATE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconCreate, null);

    case Type$1.DELETE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconDelete, null);

    case Type$1.DISCONNECTED:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconDisconnected, null);

    case Type$1.DOCUMENT:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconDocument, null);

    case Type$1.DONE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconDone, null);

    case Type$1.DONE_ALL:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconDoneAll, null);

    case Type$1.DOWNLOAD:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconDownload, null);

    case Type$1.EDIT:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconEdit, null);

    case Type$1.EMOJI_MORE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconEmojiMore, null);

    case Type$1.ERROR:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconError, null);

    case Type$1.EXPAND:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconExpand, null);

    case Type$1.FILE_AUDIO:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconFileAudio, null);

    case Type$1.FILE_DOCUMENT:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconFileDocument, null);

    case Type$1.FREEZE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconFreeze, null);

    case Type$1.GIF:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconGif, null);

    case Type$1.INFO:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconInfo, null);

    case Type$1.LEAVE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconLeave, null);

    case Type$1.MEMBERS:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconMembers, null);

    case Type$1.MESSAGE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconMessage, null);

    case Type$1.MODERATIONS:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconModerations, null);

    case Type$1.MORE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconMore, null);

    case Type$1.MUTE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconMute, null);

    case Type$1.NOTIFICATIONS:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconNotifications, null);

    case Type$1.NOTIFICATIONS_OFF_FILLED:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconNotificationsOffFilled, null);

    case Type$1.OPERATOR:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconOperator, null);

    case Type$1.PHOTO:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconPhoto, null);

    case Type$1.PLAY:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconPlay, null);

    case Type$1.PLUS:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconPlus, null);

    case Type$1.QUESTION:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconQuestion, null);

    case Type$1.REFRESH:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconRefresh, null);

    case Type$1.REMOVE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconRemove, null);

    case Type$1.REPLY:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconReplyFilled, null);

    case Type$1.SEARCH:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconSearch, null);

    case Type$1.SEND:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconSend, null);

    case Type$1.SETTINGS_FILLED:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconSettingsFilled, null);

    case Type$1.SPINNER:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconSpinner, null);

    case Type$1.SUPERGROUP:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconSupergroup, null);

    case Type$1.THUMBNAIL_NONE:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconThumbnailNone, null);

    case Type$1.TOGGLE_OFF:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconToggleoff, null);

    case Type$1.TOGGLE_ON:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconToggleon, null);

    case Type$1.USER:
      return /*#__PURE__*/React__default__default["default"].createElement(SvgIconUser, null);

    default:
      return 'icon';
    // If you see this text 'icon' replace icon for it
  }
}

function changeTypeToIconClassName(type) {
  switch (type) {
    case Type$1.ADD:
      return 'sendbird-icon-add';

    case Type$1.ARROW_LEFT:
      return 'sendbird-icon-arrow-left';

    case Type$1.ATTACH:
      return 'sendbird-icon-attach';

    case Type$1.BAN:
      return 'sendbird-icon-ban';

    case Type$1.BROADCAST:
      return 'sendbird-icon-broadcast';

    case Type$1.CAMERA:
      return 'sendbird-icon-camera';

    case Type$1.CHANNELS:
      return 'sendbird-icon-channels';

    case Type$1.CHAT:
      return 'sendbird-icon-chat';

    case Type$1.CHAT_FILLED:
      return 'sendbird-icon-chat-filled';

    case Type$1.CHEVRON_DOWN:
      return 'sendbird-icon-chevron-down';

    case Type$1.CHEVRON_RIGHT:
      return 'sendbird-icon-chevron-right';

    case Type$1.CLOSE:
      return 'sendbird-icon-close';

    case Type$1.COLLAPSE:
      return 'sendbird-icon-collapse';

    case Type$1.COPY:
      return 'sendbird-icon-copy';

    case Type$1.CREATE:
      return 'sendbird-icon-create';

    case Type$1.DELETE:
      return 'sendbird-icon-delete';

    case Type$1.DISCONNECTED:
      return 'sendbird-icon-disconnected';

    case Type$1.DOCUMENT:
      return 'sendbird-icon-document';

    case Type$1.DONE:
      return 'sendbird-icon-done';

    case Type$1.DONE_ALL:
      return 'sendbird-icon-done-all';

    case Type$1.DOWNLOAD:
      return 'sendbird-icon-down-load';

    case Type$1.EDIT:
      return 'sendbird-icon-edit';

    case Type$1.EMOJI_MORE:
      return 'sendbird-icon-emoji-more';

    case Type$1.ERROR:
      return 'sendbird-icon-error';

    case Type$1.EXPAND:
      return 'sendbird-icon-expand';

    case Type$1.FILE_AUDIO:
      return 'sendbird-icon-file-audio';

    case Type$1.FILE_DOCUMENT:
      return 'sendbird-icon-file-document';

    case Type$1.FREEZE:
      return 'sendbird-icon-freeze';

    case Type$1.GIF:
      return 'sendbird-icon-gif';

    case Type$1.INFO:
      return 'sendbird-icon-info';

    case Type$1.LEAVE:
      return 'sendbird-icon-leave';

    case Type$1.MEMBERS:
      return 'sendbird-icon-members';

    case Type$1.MESSAGE:
      return 'sendbird-icon-message';

    case Type$1.MODERATIONS:
      return 'sendbird-icon-moderations';

    case Type$1.MORE:
      return 'sendbird-icon-more';

    case Type$1.MUTE:
      return 'sendbird-icon-mute';

    case Type$1.NOTIFICATIONS:
      return 'sendbird-icon-notifications';

    case Type$1.NOTIFICATIONS_OFF_FILLED:
      return 'sendbird-icon-notifications-off-filled';

    case Type$1.OPERATOR:
      return 'sendbird-icon-operator';

    case Type$1.PHOTO:
      return 'sendbird-icon-photo';

    case Type$1.PLAY:
      return 'sendbird-icon-play';

    case Type$1.PLUS:
      return 'sendbird-iconn-plus';

    case Type$1.QUESTION:
      return 'sendbird-icon-question';

    case Type$1.REFRESH:
      return 'sendbird-icon-refresh';

    case Type$1.REMOVE:
      return 'sendbird-icon-remove';

    case Type$1.REPLY:
      return 'sendbird-icon-reply';

    case Type$1.SEARCH:
      return 'sendbird-icon-search';

    case Type$1.SEND:
      return 'sendbird-icon-send';

    case Type$1.SETTINGS_FILLED:
      return 'sendbird-icon-settings-filled';

    case Type$1.SPINNER:
      return 'sendbird-icon-spinner';

    case Type$1.SUPERGROUP:
      return 'sendbird-icon-supergroup';

    case Type$1.THUMBNAIL_NONE:
      return 'sendbird-icon-thumbnail-none';

    case Type$1.TOGGLE_OFF:
      return 'sendbird-icon-toggle-off';

    case Type$1.TOGGLE_ON:
      return 'sendbird-icon-toggle-on';

    case Type$1.USER:
      return 'sendbird-icon-user';

    default:
      return 'sendbird-icon-unknown';
    // If you see this text 'icon' replace icon for it
  }
}

function Icon(_ref) {
  var className = _ref.className,
      type = _ref.type,
      fillColor = _ref.fillColor,
      width = _ref.width,
      height = _ref.height,
      onClick = _ref.onClick,
      children = _ref.children;
  var iconStyle = {
    width: typeof width === 'string' ? width : "".concat(width, "px"),
    minWidth: typeof width === 'string' ? width : "".concat(width, "px"),
    height: typeof height === 'string' ? height : "".concat(height, "px"),
    minHeight: typeof height === 'string' ? height : "".concat(height, "px")
  };
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: [].concat(_toConsumableArray(Array.isArray(className) ? className : [className]), ['sendbird-icon', changeTypeToIconClassName(type), changeColorToClassName$1(fillColor)]).join(' '),
    role: "button",
    onClick: onClick,
    onKeyDown: onClick,
    tabIndex: "0",
    style: iconStyle
  }, children || changeTypeToIconComponent(type));
}

Icon.propTypes = {
  className: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.arrayOf(propTypes.exports.string)]),

  /** Type: Use strings from below list */
  type: propTypes.exports.oneOfType([propTypes.exports.oneOf(Object.keys(Type$1)), propTypes.exports.string]).isRequired,

  /** Type: Use Colors from below list */
  fillColor: propTypes.exports.oneOf(Object.keys(Colors$1)),
  width: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.number]),
  height: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.number]),
  onClick: propTypes.exports.func,
  children: propTypes.exports.element
};
Icon.defaultProps = {
  className: '',
  fillColor: Colors$1.DEFAULT,
  width: 26,
  height: 26,
  onClick: function onClick() {},
  children: null
};
var IconTypes = Type$1;
var IconColors = Colors$1;

var pxToNumber$1 = function (px) {
  if (typeof px === 'number') {
    return px;
  }

  if (typeof px === 'string') {
    var parsed = Number.parseFloat(px);

    if (!Number.isNaN(parsed)) {
      return parsed;
    }
  }

  return null;
};

var imageRendererClassName = 'sendbird-avatar-img';

var DefaultComponent = function DefaultComponent(_a) {
  var width = _a.width,
      height = _a.height;
  var iconWidth = pxToNumber$1(width);
  var iconHeight = pxToNumber$1(height);

  if (typeof iconWidth === 'number') {
    iconWidth *= 0.575;
  }

  if (typeof iconHeight === 'number') {
    iconHeight *= 0.575;
  }

  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-avatar-img--default",
    style: {
      width: width,
      height: height
    }
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    type: IconTypes.USER,
    fillColor: IconColors.CONTENT,
    width: iconWidth,
    height: iconHeight
  }));
};

var _defaultComponent = function _defaultComponent(_a) {
  var width = _a.width,
      height = _a.height;
  return /*#__PURE__*/React__default__default["default"].createElement(DefaultComponent, {
    width: width,
    height: height
  });
};

var AvatarInner = function AvatarInner(_a) {
  var _b = _a.src,
      src = _b === void 0 ? '' : _b,
      _c = _a.alt,
      alt = _c === void 0 ? '' : _c,
      height = _a.height,
      width = _a.width,
      customDefaultComponent = _a.customDefaultComponent;

  var defaultComponent = function defaultComponent() {
    return customDefaultComponent ? customDefaultComponent({
      width: width,
      height: height
    }) : _defaultComponent({
      width: width,
      height: height
    });
  };

  if (typeof src === 'string') {
    return /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
      className: imageRendererClassName,
      url: src,
      height: height,
      width: width,
      alt: alt,
      defaultComponent: defaultComponent
    });
  }

  if (src && src.length) {
    if (src.length === 1) {
      return /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[0],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      });
    }

    if (src.length === 2) {
      return /*#__PURE__*/React__default__default["default"].createElement("div", {
        className: "sendbird-avatar--inner__two-child"
      }, /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[0],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      }), /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[1],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      }));
    }

    if (src.length === 3) {
      return /*#__PURE__*/React__default__default["default"].createElement(React__default__default["default"].Fragment, null, /*#__PURE__*/React__default__default["default"].createElement("div", {
        className: "sendbird-avatar--inner__three-child--upper"
      }, /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[0],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      })), /*#__PURE__*/React__default__default["default"].createElement("div", {
        className: "sendbird-avatar--inner__three-child--lower"
      }, /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[1],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      }), /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[2],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      })));
    }

    return /*#__PURE__*/React__default__default["default"].createElement("div", {
      className: "sendbird-avatar--inner__four-child"
    }, src.slice(0, 4).map(function (i) {
      return /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: i,
        height: height,
        width: width,
        alt: alt,
        key: uuidv4(),
        defaultComponent: defaultComponent
      });
    }));
  } // default img


  return /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
    className: imageRendererClassName,
    url: "",
    height: height,
    width: width,
    alt: alt,
    defaultComponent: defaultComponent
  });
};

function Avatar(_a, ref) {
  var _b = _a.className,
      className = _b === void 0 ? '' : _b,
      _c = _a.src,
      src = _c === void 0 ? '' : _c,
      _d = _a.alt,
      alt = _d === void 0 ? '' : _d,
      _e = _a.width,
      width = _e === void 0 ? '56px' : _e,
      _f = _a.height,
      height = _f === void 0 ? '56px' : _f,
      onClick = _a.onClick,
      customDefaultComponent = _a.customDefaultComponent;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-avatar'], false).join(' '),
    role: "button",
    ref: ref,
    style: {
      height: height,
      width: width
    },
    onClick: onClick,
    onKeyDown: onClick,
    tabIndex: 0
  }, /*#__PURE__*/React__default__default["default"].createElement(AvatarInner, {
    src: src,
    width: width,
    height: height,
    alt: alt,
    customDefaultComponent: customDefaultComponent
  }));
}

var Avatar$1 = /*#__PURE__*/React__default__default["default"].forwardRef(Avatar);

/**
 * 1. UIKit Instances
 *    a. getSdk
 *    b. getPubSub
 * 2. Chat & Connection
 *    a. getConnect
 *    b. getDisconnect
 *    c. getUpdateUserInfo
 * 3. Channel
 *    a. getCreateGroupChannel
 *    b. getCreateOpenChannel
 *    c. getGetGroupChannel
 *    d. getGetOpenChannel
 *    e. getLeaveGroupChannel
 *    f. getEnterOpenChannel
 *    g. getExitOpenChannel
 *    h. getFreezeChannel
 *    i. getUnfreezeChannel
 * 4. Message
 *    a. getSendUserMessage
 *    b. getSendFileMessage
 *    c. getUpdateUserMessage
 *    d. x - getUpdateFileMessage
 *    e. getDeleteMessage
 *    f. getResendUserMessage
 *    g. getResendFileMessage
 */

/**
 * import useSendbirdStateContext from '@sendbird-uikit/useSendbirdStateContext'
 * import selectors from '@sendbird-uikit/send'
 * const state = useSendbirdStateContext();
 */
// 1. UIKit Instances

/**
 * const sdk = selectors.getSdk(state);
 */

var getSdk = function getSdk(state) {
  var _a = state.stores,
      stores = _a === void 0 ? {} : _a;
  var _b = stores.sdkStore,
      sdkStore = _b === void 0 ? {} : _b;
  var sdk = sdkStore.sdk;
  return sdk;
};
/**
 * const pubSub = selectors.getPubSub(state);
 */


var getPubSub = function getPubSub(state) {
  var _a = state.config,
      config = _a === void 0 ? {} : _a;
  var pubSub = config.pubSub;
  return pubSub;
}; // 2. Chat & Connection

/**
 * const connect = selectors.getConnect(state);
 * connect('user-id-sendbirdian', 'access-token-0000')
 *  .then((user) => {})
 *  .catch((error) => {})
 */


var getConnect = function getConnect(state) {
  return function (userId, accessToken) {
    return new Promise(function (resolve, reject) {
      var sdk = getSdk(state);

      if (!sdk) {
        reject(new Error('Sdk not found'));
      }

      if (!((sdk === null || sdk === void 0 ? void 0 : sdk.connect) && typeof sdk.connect === 'function')) {
        reject(new Error('Not found the function "connect'));
      }

      if (!accessToken) {
        sdk.connect(userId).then(function (res) {
          return resolve(res);
        }).catch(function (err) {
          return reject(err);
        });
      } else {
        sdk.connect(userId, accessToken).then(function (res) {
          return resolve(res);
        }).catch(function (err) {
          return reject(err);
        });
      }
    });
  };
};
/**
 * const disconnect = selectors.getDisconnect(state);
 * disconnect()
 *  .then(() => {})
 *  .catch((error) => {})
 */


var getDisconnect = function getDisconnect(state) {
  return function () {
    return new Promise(function (resolve, reject) {
      var sdk = getSdk(state);

      if (!sdk) {
        reject(new Error('Sdk not found'));
      }

      if (!(sdk.disconnect && typeof sdk.disconnect === 'function')) {
        reject(new Error('Not found the function "disconnect'));
      }

      sdk.disconnect().then(function (res) {
        return resolve(res);
      }).catch(function (err) {
        return reject(err);
      });
    });
  };
};
/**
 * const updateUserInfo = selectors.getUpdateUserInfo(state);
 * updateUserInfo('new-nickname', 'new-profile-url')
 *  .then((user) => {})
 *  .catch((error) => {})
 */


var getUpdateUserInfo = function getUpdateUserInfo(state) {
  return function (nickname, profileUrl) {
    return new Promise(function (resolve, reject) {
      var sdk = getSdk(state);

      if (!sdk) {
        reject(new Error('Sdk not found'));
      }

      if (!(sdk.updateCurrentUserInfo && typeof sdk.updateCurrentUserInfo === 'function')) {
        reject(new Error('Not found the function "updateCurrentUserInfo"'));
      }

      var userParams = {
        nickname: nickname
      };

      if (profileUrl) {
        userParams.profileUrl = profileUrl;
      }

      sdk.updateCurrentUserInfo(userParams).then(function (res) {
        return resolve(res);
      }).catch(function (err) {
        return reject(err);
      });
    });
  };
}; // 3. Channel

/**
 * const createGroupChannel = selectors.getCreateGroupChannel(state);
 * createGroupChannel(channelParams: GroupChannelCreateParams)
 *  .then((channel) => {})
 *  .catch((error) => {})
 */


var getCreateGroupChannel = function getCreateGroupChannel(state) {
  return function (params) {
    return new Promise(function (resolve, reject) {
      var sdk = getSdk(state);
      var pubSub = getPubSub(state);

      if (!sdk) {
        reject(new Error('Sdk not found'));
      }

      if (!sdk.groupChannel) {
        reject(new Error('Not found GroupChannelModule'));
      }

      if (!(sdk.groupChannel.createChannel && typeof sdk.groupChannel.createChannel === 'function')) {
        reject(new Error('Not found the function "createChannel"'));
      }

      sdk.groupChannel.createChannel(params).then(function (channel) {
        resolve(channel);
        pubSub.publish(CREATE_CHANNEL, {
          channel: channel
        });
      }).catch(reject);
    });
  };
};
/**
 * const createOpenChannel = selectors.getCreateOpenChannel(state);
 * createOpenChannel(channelParams: OpenChannelCreateParams)
 *  .then((channel) => {})
 *  .catch((error) => {})
 */


var getCreateOpenChannel = function getCreateOpenChannel(state) {
  return function (params) {
    return new Promise(function (resolve, reject) {
      var sdk = getSdk(state); // const pubSub = getPubSub(state);

      if (!sdk) {
        reject(new Error('Sdk not found'));
      }

      if (!sdk.openChannel) {
        reject(new Error('Not found OpenChannelModule'));
      }

      if (!(sdk.openChannel.createChannel && typeof sdk.openChannel.createChannel === 'function')) {
        reject(new Error('Not found the function "createChannel"'));
      }

      sdk.openChannel.createChannel(params).then(function (channel) {
        resolve(channel); // Consider pubSub process
      }).catch(reject);
    });
  };
};
/**
 * const getGroupChannel = selectors.getGetGroupChannel(state);
 * getGroupChannel('channel-url-1234', isSelected)
 *  .then((channel) => {
 *    // groupChannel = channel;
 *    // or
 *    // setCurrentChannel(channel);
 *  })
 *  .catch((error) => {})
 */


var getGetGroupChannel = function getGetGroupChannel(state) {
  return function (channelUrl) {
    return new Promise(function (resolve, reject) {
      var sdk = getSdk(state); // const pubSub = getPubSub(state);

      if (!sdk) {
        reject(new Error('Sdk not found'));
      }

      if (!sdk.groupChannel) {
        reject(new Error('Not found GroupChannelModule'));
      }

      if (!(sdk.groupChannel.getChannel && typeof sdk.groupChannel.getChannel === 'function')) {
        reject(new Error('Not found the function "getChannel"'));
      }

      sdk.groupChannel.getChannel(channelUrl).then(function (channel) {
        resolve(channel); // Add pubSub with isSelected
      }).catch(reject);
    });
  };
};
/**
 * const getOpenChannel = selectors.getGetOpenChannel(state);
 * getOpenChannel('channel-url-12345')
 *  .then((channel) => {
 *    // openChannel = channel;
 *    // or
 *    // setCurrentChannel(channel);
 *  })
 *  .catch((error) => {})
 */


var getGetOpenChannel = function getGetOpenChannel(state) {
  return function (channelUrl) {
    return new Promise(function (resolve, reject) {
      var sdk = getSdk(state); // const pubSub = getPubSub(state);

      if (!sdk) {
        reject(new Error('Sdk not found'));
      }

      if (!sdk.openChannel) {
        reject(new Error('Not found OpenChannelModule'));
      }

      if (!(sdk.openChannel.getChannel && typeof sdk.openChannel.getChannel === 'function')) {
        reject(new Error('Not found the function "getChannel"'));
      }

      sdk.openChannel.getChannel(channelUrl).then(function (channel) {
        resolve(channel); // Add pubSub with isSelected
      }).catch(reject);
    });
  };
};
/**
 * const leaveChannel = selectors.getLeaveGroupChannel(state);
 * leaveChannel('group-channel-url')
 *  .then((channel) => {})
 *  .catch((error) => {})
 */


var getLeaveGroupChannel = function getLeaveGroupChannel(state) {
  return function (channelUrl) {
    return new Promise(function (resolve, reject) {
      var _a;

      (_a = getGetGroupChannel(state)) === null || _a === void 0 ? void 0 : _a(channelUrl).then(function (channel) {
        channel.leave().then(function () {
          resolve(); // Add pubSub process
        }).catch(reject);
      }).catch(reject);
    });
  };
};
/**
 * const enterChannel = selectors.getEnterOpenChannel(state);
 * enterChannel('open-channel-url')
 *  .then((channel) => {})
 *  .catch((error) => {})
 */


var getEnterOpenChannel = function getEnterOpenChannel(state) {
  return function (channelUrl) {
    return new Promise(function (resolve, reject) {
      var _a;

      (_a = getGetOpenChannel(state)) === null || _a === void 0 ? void 0 : _a(channelUrl).then(function (channel) {
        channel.enter().then(function () {
          resolve(channel); // Add pubSub process
        }).catch(reject);
      }).catch(reject);
    });
  };
};
/**
 * const exitChannel = selectors.getExitOpenChannel(state);
 * exitChannel('open-channel-url')
 *  .then((channel) => {})
 *  .catch((error) => {})
 */


var getExitOpenChannel = function getExitOpenChannel(state) {
  return function (channelUrl) {
    return new Promise(function (resolve, reject) {
      var _a;

      (_a = getGetOpenChannel(state)) === null || _a === void 0 ? void 0 : _a(channelUrl).then(function (channel) {
        channel.exit().then(function () {
          resolve(channel); // Add pubSub process
        }).catch(reject);
      }).catch(reject);
    });
  };
};
/**
 * const freezeChannel = selectors.getFreezeChannel(currentChannel);
 * freezeChannel()
 *  .then(() => {})
 *  .catch((error) => {})
 */


var getFreezeChannel = function getFreezeChannel() {
  return function (channel) {
    return new Promise(function (resolve, reject) {
      if (!(channel.freeze && typeof (channel === null || channel === void 0 ? void 0 : channel.freeze) === 'function')) {
        reject(new Error('Not found the function "freeze"'));
      }

      channel.freeze().then(function () {
        resolve(); // Add pubSub process

        /**
         * consider divide the logic to
         * _freezeGroupChannel and _freezeOpenChannel
         */
      }).catch(reject);
    });
  };
};
/**
 * const unfreezeChannel = selectors.getUnfreezeChannel(currentChannel);
 * unfreezeChannel()
 *  .then((channel) => {})
 *  .catch((error) => {})
 */


var getUnfreezeChannel = function getUnfreezeChannel() {
  return function (channel) {
    return new Promise(function (resolve, reject) {
      if (!(channel.unfreeze && typeof (channel === null || channel === void 0 ? void 0 : channel.unfreeze) === 'function')) {
        reject(new Error('Not found the function "unfreeze"'));
      }

      channel.unfreeze().then(function () {
        resolve(); // Add pubSub process

        /**
         * consider divide the logic to
         * _unfreezeGroupChannel and _unfreezeOpenChannel
         */
      }).catch(reject);
    });
  };
}; // 4. Message


var UikitMessageHandler =
/** @class */
function () {
  function UikitMessageHandler() {
    this._onPending = noop$1;
    this._onFailed = noop$1;
    this._onSucceeded = noop$1;
  }

  UikitMessageHandler.prototype.triggerPending = function (message) {
    this._onPending(message);
  };

  UikitMessageHandler.prototype.triggerFailed = function (error, message) {
    this._onFailed(error, message.isResendable ? message : null);
  };

  UikitMessageHandler.prototype.triggerSucceeded = function (message) {
    this._onSucceeded(message);
  };

  UikitMessageHandler.prototype.onPending = function (handler) {
    if (typeof handler === 'function') {
      this._onPending = handler;
    }

    return this;
  };

  UikitMessageHandler.prototype.onFailed = function (handler) {
    if (typeof handler === 'function') {
      this._onFailed = handler;
    }

    return this;
  };

  UikitMessageHandler.prototype.onSucceeded = function (handler) {
    if (typeof handler === 'function') {
      this._onSucceeded = handler;
    }

    return this;
  };

  return UikitMessageHandler;
}();
/**
 * const sendUserMessage = selectors.getSendUserMessage(state);
 * sendUserMessage(
 *  channel: GroupChannel | OpenChannel,
 *  params: UserMessageCreateParams,
 * )
 *  .onPending((message) => {})
 *  .onFailed((error, message) => {})
 *  .onSucceeded((message) => {})
 */


var getSendUserMessage = function getSendUserMessage(state) {
  return function (channel, params) {
    var handler = new UikitMessageHandler();
    var pubSub = getPubSub(state);
    channel.sendUserMessage(params).onFailed(function (error, message) {
      return handler.triggerFailed(error, message);
    }).onPending(function (message) {
      pubSub.publish(SEND_MESSAGE_START, {
        message: message,
        channel: channel
      });
      handler.triggerPending(message);
    }).onSucceeded(function (message) {
      pubSub.publish(SEND_USER_MESSAGE, {
        message: message,
        channel: channel
      });
      handler.triggerSucceeded(message);
    });
    return handler;
  };
};
/**
 * const sendFileMessage = selectors.getSendFileMessage(state);
 * sendFileMessage(
 *  channel: GroupChannel | OpenChannel,
 *  params: FileMessageCreateParams,
 * )
 *  .onPending((message) => {})
 *  .onFailed((error, message) => {})
 *  .onSucceeded((message) => {})
 */


var getSendFileMessage = function getSendFileMessage(state) {
  return function (channel, params) {
    var handler = new UikitMessageHandler();
    var pubSub = getPubSub(state);
    channel.sendFileMessage(params).onFailed(function (error, message) {
      return handler.triggerFailed(error, message);
    }).onPending(function (message) {
      pubSub.publish(SEND_MESSAGE_START, {
        message: message,
        channel: channel
      });
      handler.triggerPending(message);
    }).onSucceeded(function (message) {
      pubSub.publish(SEND_FILE_MESSAGE, {
        message: message,
        channel: channel
      });
      handler.triggerSucceeded(message);
    });
    return handler;
  };
};
/**
 * const updateUserMessage = selectors.getUpdateUserMessage(state);
 * updateUserMessage(
 *  channel: GroupChannel | OpenChannel,
 *  messageId: number,
 *  messageParams: UserMessageUpdateParams,
 * )
 *  .then((message) => {})
 *  .catch((error) => {})
 */


var getUpdateUserMessage = function getUpdateUserMessage(state) {
  return function (channel, messageId, params) {
    return new Promise(function (resolve, reject) {
      var pubSub = getPubSub(state);
      channel.updateUserMessage(messageId, params).then(function (message) {
        pubSub.publish(UPDATE_USER_MESSAGE, {
          message: message,
          channel: channel,
          fromSelector: true
        });
        resolve(message);
      }).catch(reject);
    });
  };
}; // TODO: We will provie this function in the future

/**
 * const updateFileMessage = selectors.getUpdateFileMessage(state);
 * updateFileMessage(
 *  channel: GroupChannel | OpenChannel,
 *  messageId: number,
 *  params: FileMessageUpdateParams,
 * )
 *  .then((message) => {})
 *  .catch((error) => {})
 */
// const getUpdateFileMessage = (state: SendBirdState) => (
//   (channel: GroupChannel | OpenChannel, messageId: number, params: FileMessageUpdateParams) => (
//     new Promise((resolve, reject) => {
//       const pubSub = getPubSub(state);
//       channel.updateFileMessage(messageId, params)
//         .then((message) => {
//           pubSub.publish(
//             topics.UPDATE_USER_MESSAGE,
//             { message, channel, fromSelector: true },
//           );
//           resolve(message);
//         })
//         .catch(reject);
//     })
//   )
// );

/**
 * const deleteMessage = selectors.getDeleteMessage(state);
 * deleteMessage(
 *  channel: GroupChannel | OpenChannel,
 *  message: SendableMessage,
 * )
 *  .then((deletedMessage) => {})
 *  .catch((error) => {})
 */


var getDeleteMessage = function getDeleteMessage(state) {
  return function (channel, message) {
    return new Promise(function (resolve, reject) {
      var pubSub = getPubSub(state);
      var messageId = message.messageId;
      channel.deleteMessage(message).then(function () {
        pubSub.publish(DELETE_MESSAGE, {
          messageId: messageId,
          channel: channel
        });
        resolve(message);
      }).catch(reject);
    });
  };
};
/**
 * const resendUserMessage = selectors.getResendUserMessage(state);
 * resendUserMessage(
 *  channel: GroupChannel | OpenChannel,
 *  failedMessage: UserMessage,
 * )
 *  .then(() => {})
 *  .catch((error) => {})
 */


var getResendUserMessage = function getResendUserMessage(state) {
  return function (channel, failedMessage) {
    return new Promise(function (resolve, reject) {
      var pubSub = getPubSub(state);
      channel.resendUserMessage(failedMessage).then(function (message) {
        pubSub.publish(SEND_USER_MESSAGE, {
          message: message,
          channel: channel
        });
        resolve(message);
      }).catch(reject);
    });
  };
};
/**
 * const resendFileMessage = selectors.getResendFileMessage(state);
 * resendFileMessage(
 *  channel: GroupChannel | OpenChannel,
 *  failedMessage: FileMessage,
 *  blob: Blob,
 * )
 *  .then(() => {})
 *  .catch((error) => {})
 */


var getResendFileMessage = function getResendFileMessage(state) {
  return function (channel, failedMessage, blob) {
    return new Promise(function (resolve, reject) {
      var pubSub = getPubSub(state);
      channel.resendFileMessage(failedMessage, blob).then(function (message) {
        pubSub.publish(SEND_FILE_MESSAGE, {
          message: message,
          channel: channel
        });
        resolve(message);
      }).catch(reject);
    });
  };
};

var sendbirdSelectors = {
  getSdk: getSdk,
  getPubSub: getPubSub,
  getConnect: getConnect,
  getDisconnect: getDisconnect,
  getUpdateUserInfo: getUpdateUserInfo,
  getCreateGroupChannel: getCreateGroupChannel,
  getCreateOpenChannel: getCreateOpenChannel,
  getGetGroupChannel: getGetGroupChannel,
  getGetOpenChannel: getGetOpenChannel,
  getLeaveGroupChannel: getLeaveGroupChannel,
  getEnterOpenChannel: getEnterOpenChannel,
  getExitOpenChannel: getExitOpenChannel,
  getFreezeChannel: getFreezeChannel,
  getUnfreezeChannel: getUnfreezeChannel,
  getSendUserMessage: getSendUserMessage,
  getSendFileMessage: getSendFileMessage,
  getUpdateUserMessage: getUpdateUserMessage,
  getDeleteMessage: getDeleteMessage,
  getResendUserMessage: getResendUserMessage,
  getResendFileMessage: getResendFileMessage
};

var CHANNEL_TYPE;

(function (CHANNEL_TYPE) {
  CHANNEL_TYPE["GROUP"] = "group";
  CHANNEL_TYPE["SUPERGROUP"] = "supergroup";
  CHANNEL_TYPE["BROADCAST"] = "broadcast";
})(CHANNEL_TYPE || (CHANNEL_TYPE = {}));

var MODAL_ROOT = 'sendbird-modal-root';

var Type;

(function (Type) {
  Type[Type["PRIMARY"] = 0] = "PRIMARY";
  Type[Type["SECONDARY"] = 1] = "SECONDARY";
  Type[Type["DANGER"] = 2] = "DANGER";
  Type[Type["DISABLED"] = 3] = "DISABLED";
})(Type || (Type = {}));

var Size;

(function (Size) {
  Size[Size["BIG"] = 0] = "BIG";
  Size[Size["SMALL"] = 1] = "SMALL";
})(Size || (Size = {}));

function changeTypeToClassName(type) {
  switch (type) {
    case Type.PRIMARY:
      return 'sendbird-button--primary';

    case Type.SECONDARY:
      return 'sendbird-button--secondary';

    case Type.DANGER:
      return 'sendbird-button--danger';

    case Type.DISABLED:
      return 'sendbird-button--disabled';

    default:
      return null;
  }
}

function changeSizeToClassName(size) {
  switch (size) {
    case Size.BIG:
      return 'sendbird-button--big';

    case Size.SMALL:
      return 'sendbird-button--small';

    default:
      return null;
  }
}

function Button(_a) {
  var className = _a.className,
      _b = _a.type,
      type = _b === void 0 ? Type.PRIMARY : _b,
      _c = _a.size,
      size = _c === void 0 ? Size.BIG : _c,
      _d = _a.children,
      children = _d === void 0 ? 'Button' : _d,
      _e = _a.disabled,
      disabled = _e === void 0 ? false : _e,
      _f = _a.onClick,
      onClick = _f === void 0 ? function () {} : _f;

  var injectingClassNames = __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-button', disabled ? 'sendbird-button__disabled' : '', changeTypeToClassName(type), changeSizeToClassName(size)], false).join(' ');

  return /*#__PURE__*/React__default__default["default"].createElement("button", {
    className: injectingClassNames,
    type: "button",
    onClick: onClick,
    disabled: disabled
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-button__text",
    type: LabelTypography.BUTTON_1,
    color: LabelColors.ONCONTENT_1
  }, children));
}

var ButtonTypes = Type;
var ButtonSizes = Size;

var ModalHeader = function ModalHeader(_a) {
  var titleText = _a.titleText;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-modal__header"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    type: LabelTypography.H_1,
    color: LabelColors.ONBACKGROUND_1
  }, titleText));
};

var ModalBody = function ModalBody(_a) {
  var children = _a.children;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-modal__body"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_2
  }, children));
};

var ModalFooter = function ModalFooter(_a) {
  var submitText = _a.submitText,
      _b = _a.disabled,
      disabled = _b === void 0 ? false : _b,
      _c = _a.type,
      type = _c === void 0 ? ButtonTypes.DANGER : _c,
      onSubmit = _a.onSubmit,
      onCancel = _a.onCancel;
  var stringSet = React__default.useContext(LocalizationContext).stringSet;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-modal__footer"
  }, /*#__PURE__*/React__default__default["default"].createElement(Button, {
    type: ButtonTypes.SECONDARY,
    onClick: onCancel
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    type: LabelTypography.BUTTON_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.BUTTON__CANCEL)), /*#__PURE__*/React__default__default["default"].createElement(Button, {
    type: type,
    disabled: disabled,
    onClick: onSubmit
  }, submitText));
};

function Modal(props) {
  var _a = props.children,
      children = _a === void 0 ? null : _a,
      titleText = props.titleText,
      submitText = props.submitText,
      _b = props.disabled,
      disabled = _b === void 0 ? false : _b,
      _c = props.hideFooter,
      hideFooter = _c === void 0 ? false : _c,
      _d = props.type,
      type = _d === void 0 ? ButtonTypes.DANGER : _d,
      _e = props.onCancel,
      onCancel = _e === void 0 ? function () {} : _e,
      _f = props.onSubmit,
      onSubmit = _f === void 0 ? function () {} : _f;
  return /*#__PURE__*/reactDom.createPortal( /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-modal"
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-modal__content"
  }, /*#__PURE__*/React__default__default["default"].createElement(ModalHeader, {
    titleText: titleText
  }), /*#__PURE__*/React__default__default["default"].createElement(ModalBody, null, children), !hideFooter && /*#__PURE__*/React__default__default["default"].createElement(ModalFooter, {
    disabled: disabled,
    onCancel: onCancel,
    onSubmit: onSubmit,
    submitText: submitText,
    type: type
  }), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-modal__close"
  }, /*#__PURE__*/React__default__default["default"].createElement(IconButton, {
    width: "32px",
    height: "32px",
    onClick: onCancel
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    type: IconTypes.CLOSE,
    fillColor: IconColors.DEFAULT,
    width: "24px",
    height: "24px"
  })))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-modal__backdrop"
  })), document.getElementById(MODAL_ROOT));
}

function UserProfile(_a) {
  var user = _a.user,
      currentUserId = _a.currentUserId,
      logger = _a.logger,
      _b = _a.disableMessaging,
      disableMessaging = _b === void 0 ? false : _b,
      createChannel = _a.createChannel,
      onSuccess = _a.onSuccess;
  var stringSet = React__default.useContext(LocalizationContext).stringSet;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird__user-profile"
  }, /*#__PURE__*/React__default__default["default"].createElement("section", {
    className: "sendbird__user-profile-avatar"
  }, /*#__PURE__*/React__default__default["default"].createElement(Avatar$1, {
    height: "80px",
    width: "80px",
    src: user === null || user === void 0 ? void 0 : user.profileUrl
  })), /*#__PURE__*/React__default__default["default"].createElement("section", {
    className: "sendbird__user-profile-name"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, (user === null || user === void 0 ? void 0 : user.nickname) || stringSet.NO_NAME)), (user === null || user === void 0 ? void 0 : user.userId) !== currentUserId && !disableMessaging && /*#__PURE__*/React__default__default["default"].createElement("section", {
    className: "sendbird__user-profile-message"
  }, /*#__PURE__*/React__default__default["default"].createElement(Button, {
    type: ButtonTypes.SECONDARY,
    onClick: function onClick() {
      var params = {
        isDistinct: true,
        invitedUserIds: [user === null || user === void 0 ? void 0 : user.userId]
      };
      onSuccess();
      createChannel(params).then(function (groupChannel) {
        logger.info('UserProfile, channel create', groupChannel);
      });
    }
  }, stringSet.USER_PROFILE__MESSAGE)), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird__user-profile-separator"
  }), /*#__PURE__*/React__default__default["default"].createElement("section", {
    className: "sendbird__user-profile-userId"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird__user-profile-userId--label",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.USER_PROFILE__USER_ID), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird__user-profile-userId--value",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, user === null || user === void 0 ? void 0 : user.userId)));
}

var mapStoreToProps = function mapStoreToProps(store) {
  return {
    sdk: getSdk(store),
    createChannel: getCreateGroupChannel(store),
    logger: store.config.logger,
    pubsub: store.config.pubSub
  };
};

var ConnectedUserProfile = withSendbirdContext(UserProfile, mapStoreToProps);

var MenuItems$1 =
/** @class */
function (_super) {
  __extends(MenuItems, _super);

  function MenuItems(props) {
    var _this = _super.call(this, props) || this;

    _this.menuRef = /*#__PURE__*/React__default__default["default"].createRef();

    _this.setupEvents = function () {
      var closeDropdown = _this.props.closeDropdown;
      var menuRef = _this.menuRef;

      var handleClickOutside = function handleClickOutside(event) {
        var _a, _b;

        if ((menuRef === null || menuRef === void 0 ? void 0 : menuRef.current) && !((_b = (_a = menuRef === null || menuRef === void 0 ? void 0 : menuRef.current) === null || _a === void 0 ? void 0 : _a.contains) === null || _b === void 0 ? void 0 : _b.call(_a, event.target))) {
          closeDropdown === null || closeDropdown === void 0 ? void 0 : closeDropdown();
        }
      };

      _this.setState({
        handleClickOutside: handleClickOutside
      });

      document.addEventListener('mousedown', handleClickOutside);
    };

    _this.cleanUpEvents = function () {
      var handleClickOutside = _this.state.handleClickOutside;
      document.removeEventListener('mousedown', handleClickOutside);
    };

    _this.getMenuPosition = function () {
      var _a, _b;

      var _c = _this.props,
          parentRef = _c.parentRef,
          openLeft = _c.openLeft;
      var parentRect = (_b = (_a = parentRef === null || parentRef === void 0 ? void 0 : parentRef.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect) === null || _b === void 0 ? void 0 : _b.call(_a);
      var x = (parentRect === null || parentRect === void 0 ? void 0 : parentRect.x) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.left) || 0;
      var y = (parentRect === null || parentRect === void 0 ? void 0 : parentRect.y) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.top) || 0;
      var menuStyle = {
        top: y,
        left: x
      };
      if (!_this.menuRef.current) return menuStyle;
      var innerWidth = window.innerWidth,
          innerHeight = window.innerHeight;

      var rect = _this.menuRef.current.getBoundingClientRect();

      if (y + rect.height > innerHeight) {
        menuStyle.top -= rect.height;
      }

      if (x + rect.width > innerWidth && !openLeft) {
        menuStyle.left -= rect.width;
      }

      if (menuStyle.top < 0) {
        menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;
      }

      if (menuStyle.left < 0) {
        menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;
      }

      menuStyle.top += 32;

      if (openLeft) {
        var padding = Number.isNaN(rect.width - 30) ? 108 // default
        : rect.width - 30;
        menuStyle.left -= padding;
      }

      _this.setState({
        menuStyle: menuStyle
      });

      return menuStyle;
    };

    _this.state = {
      menuStyle: {},
      handleClickOutside: function handleClickOutside() {}
    };
    return _this;
  }

  MenuItems.prototype.componentDidMount = function () {
    this.setupEvents();
    this.getMenuPosition();
  };

  MenuItems.prototype.componentWillUnmount = function () {
    this.cleanUpEvents();
  };

  MenuItems.prototype.render = function () {
    var menuStyle = this.state.menuStyle;
    var _a = this.props,
        children = _a.children,
        style = _a.style;
    return /*#__PURE__*/reactDom.createPortal( /*#__PURE__*/React__default__default["default"].createElement(React__default__default["default"].Fragment, null, /*#__PURE__*/React__default__default["default"].createElement("div", {
      className: "sendbird-dropdown__menu-backdrop"
    }), /*#__PURE__*/React__default__default["default"].createElement("ul", {
      className: "sendbird-dropdown__menu",
      ref: this.menuRef,
      style: __assign({
        display: 'inline-block',
        position: 'fixed',
        left: "".concat(Math.round(menuStyle.left), "px"),
        top: "".concat(Math.round(menuStyle.top), "px")
      }, style)
    }, children)), document.getElementById('sendbird-dropdown-portal'));
  };

  return MenuItems;
}(React__default__default["default"].Component);

var ENTER_KEY = 13;
var MenuItems = MenuItems$1;

var MenuItem = function MenuItem(_a) {
  var _b = _a.className,
      className = _b === void 0 ? '' : _b,
      children = _a.children,
      onClick = _a.onClick,
      _c = _a.disable,
      disable = _c === void 0 ? false : _c;

  var handleClickEvent = function handleClickEvent(e) {
    if (!disable && onClick) {
      onClick === null || onClick === void 0 ? void 0 : onClick(e);
    }
  };

  return /*#__PURE__*/React__default__default["default"].createElement("li", {
    className: getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : '']),
    role: "menuitem",
    onClick: handleClickEvent,
    onKeyPress: function onKeyPress(e) {
      if (e.keyCode === ENTER_KEY) handleClickEvent(e);
    },
    tabIndex: 0
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-dropdown__menu-item__text",
    type: LabelTypography.SUBTITLE_2,
    color: disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1
  }, children));
};

function ContextMenu(_a) {
  var menuTrigger = _a.menuTrigger,
      menuItems = _a.menuItems;

  var _b = React__default.useState(false),
      showMenu = _b[0],
      setShowMenu = _b[1];

  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-context-menu",
    style: {
      display: 'inline'
    }
  }, menuTrigger(function () {
    return setShowMenu(!showMenu);
  }), showMenu && menuItems(function () {
    return setShowMenu(false);
  }));
}

function requiredArgs$1(required, args) {
  if (args.length < required) {
    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');
  }
}
/**
 * @name toDate
 * @category Common Helpers
 * @summary Convert the given argument to an instance of Date.
 *
 * @description
 * Convert the given argument to an instance of Date.
 *
 * If the argument is an instance of Date, the function returns its clone.
 *
 * If the argument is a number, it is treated as a timestamp.
 *
 * If the argument is none of the above, the function returns Invalid Date.
 *
 * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.
 *
 * @param {Date|Number} argument - the value to convert
 * @returns {Date} the parsed date in the local time zone
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // Clone the date:
 * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))
 * //=> Tue Feb 11 2014 11:30:30
 *
 * @example
 * // Convert the timestamp to date:
 * const result = toDate(1392098430000)
 * //=> Tue Feb 11 2014 11:30:30
 */


function toDate$1(argument) {
  requiredArgs$1(1, arguments);
  var argStr = Object.prototype.toString.call(argument); // Clone the date

  if (argument instanceof Date || typeof argument === 'object' && argStr === '[object Date]') {
    // Prevent the date to lose the milliseconds when passed to new Date() in IE10
    return new Date(argument.getTime());
  } else if (typeof argument === 'number' || argStr === '[object Number]') {
    return new Date(argument);
  } else {
    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {
      // eslint-disable-next-line no-console
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"); // eslint-disable-next-line no-console

      console.warn(new Error().stack);
    }

    return new Date(NaN);
  }
}
/**
 * @name isValid
 * @category Common Helpers
 * @summary Is the given date valid?
 *
 * @description
 * Returns false if argument is Invalid Date and true otherwise.
 * Argument is converted to Date using `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}
 * Invalid Date is a Date, whose time value is NaN.
 *
 * Time value of Date: http://es5.github.io/#x15.9.1.1
 *
 * ### v2.0.0 breaking changes:
 *
 * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).
 *
 * - Now `isValid` doesn't throw an exception
 *   if the first argument is not an instance of Date.
 *   Instead, argument is converted beforehand using `toDate`.
 *
 *   Examples:
 *
 *   | `isValid` argument        | Before v2.0.0 | v2.0.0 onward |
 *   |---------------------------|---------------|---------------|
 *   | `new Date()`              | `true`        | `true`        |
 *   | `new Date('2016-01-01')`  | `true`        | `true`        |
 *   | `new Date('')`            | `false`       | `false`       |
 *   | `new Date(1488370835081)` | `true`        | `true`        |
 *   | `new Date(NaN)`           | `false`       | `false`       |
 *   | `'2016-01-01'`            | `TypeError`   | `false`       |
 *   | `''`                      | `TypeError`   | `false`       |
 *   | `1488370835081`           | `TypeError`   | `true`        |
 *   | `NaN`                     | `TypeError`   | `false`       |
 *
 *   We introduce this change to make *date-fns* consistent with ECMAScript behavior
 *   that try to coerce arguments to the expected type
 *   (which is also the case with other *date-fns* functions).
 *
 * @param {*} date - the date to check
 * @returns {Boolean} the date is valid
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // For the valid date:
 * var result = isValid(new Date(2014, 1, 31))
 * //=> true
 *
 * @example
 * // For the value, convertable into a date:
 * var result = isValid(1393804800000)
 * //=> true
 *
 * @example
 * // For the invalid date:
 * var result = isValid(new Date(''))
 * //=> false
 */


function isValid$1(dirtyDate) {
  requiredArgs$1(1, arguments);
  var date = toDate$1(dirtyDate);
  return !isNaN(date);
}

function toInteger$1(dirtyNumber) {
  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {
    return NaN;
  }

  var number = Number(dirtyNumber);

  if (isNaN(number)) {
    return number;
  }

  return number < 0 ? Math.ceil(number) : Math.floor(number);
}
/**
 * @name addMilliseconds
 * @category Millisecond Helpers
 * @summary Add the specified number of milliseconds to the given date.
 *
 * @description
 * Add the specified number of milliseconds to the given date.
 *
 * ### v2.0.0 breaking changes:
 *
 * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the milliseconds added
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Add 750 milliseconds to 10 July 2014 12:45:30.000:
 * const result = addMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:30.750
 */


function addMilliseconds$1(dirtyDate, dirtyAmount) {
  requiredArgs$1(2, arguments);
  var timestamp = toDate$1(dirtyDate).getTime();
  var amount = toInteger$1(dirtyAmount);
  return new Date(timestamp + amount);
}
/**
 * @name subMilliseconds
 * @category Millisecond Helpers
 * @summary Subtract the specified number of milliseconds from the given date.
 *
 * @description
 * Subtract the specified number of milliseconds from the given date.
 *
 * ### v2.0.0 breaking changes:
 *
 * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the milliseconds subtracted
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Subtract 750 milliseconds from 10 July 2014 12:45:30.000:
 * const result = subMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:29.250
 */


function subMilliseconds$1(dirtyDate, dirtyAmount) {
  requiredArgs$1(2, arguments);
  var amount = toInteger$1(dirtyAmount);
  return addMilliseconds$1(dirtyDate, -amount);
}

function addLeadingZeros$1(number, targetLength) {
  var sign = number < 0 ? '-' : '';
  var output = Math.abs(number).toString();

  while (output.length < targetLength) {
    output = '0' + output;
  }

  return sign + output;
}
/*
 * |     | Unit                           |     | Unit                           |
 * |-----|--------------------------------|-----|--------------------------------|
 * |  a  | AM, PM                         |  A* |                                |
 * |  d  | Day of month                   |  D  |                                |
 * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
 * |  m  | Minute                         |  M  | Month                          |
 * |  s  | Second                         |  S  | Fraction of second             |
 * |  y  | Year (abs)                     |  Y  |                                |
 *
 * Letters marked by * are not implemented but reserved by Unicode standard.
 */


var formatters$2$1 = {
  // Year
  y: function (date, token) {
    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens
    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |
    // |----------|-------|----|-------|-------|-------|
    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |
    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |
    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |
    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |
    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |
    var signedYear = date.getUTCFullYear(); // Returns 1 for 1 BC (which is year 0 in JavaScript)

    var year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros$1(token === 'yy' ? year % 100 : year, token.length);
  },
  // Month
  M: function (date, token) {
    var month = date.getUTCMonth();
    return token === 'M' ? String(month + 1) : addLeadingZeros$1(month + 1, 2);
  },
  // Day of the month
  d: function (date, token) {
    return addLeadingZeros$1(date.getUTCDate(), token.length);
  },
  // AM or PM
  a: function (date, token) {
    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? 'pm' : 'am';

    switch (token) {
      case 'a':
      case 'aa':
        return dayPeriodEnumValue.toUpperCase();

      case 'aaa':
        return dayPeriodEnumValue;

      case 'aaaaa':
        return dayPeriodEnumValue[0];

      case 'aaaa':
      default:
        return dayPeriodEnumValue === 'am' ? 'a.m.' : 'p.m.';
    }
  },
  // Hour [1-12]
  h: function (date, token) {
    return addLeadingZeros$1(date.getUTCHours() % 12 || 12, token.length);
  },
  // Hour [0-23]
  H: function (date, token) {
    return addLeadingZeros$1(date.getUTCHours(), token.length);
  },
  // Minute
  m: function (date, token) {
    return addLeadingZeros$1(date.getUTCMinutes(), token.length);
  },
  // Second
  s: function (date, token) {
    return addLeadingZeros$1(date.getUTCSeconds(), token.length);
  },
  // Fraction of second
  S: function (date, token) {
    var numberOfDigits = token.length;
    var milliseconds = date.getUTCMilliseconds();
    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));
    return addLeadingZeros$1(fractionalSeconds, token.length);
  }
};
var MILLISECONDS_IN_DAY$1 = 86400000; // This function will be a part of public API when UTC function will be implemented.
// See issue: https://github.com/date-fns/date-fns/issues/376

function getUTCDayOfYear$1(dirtyDate) {
  requiredArgs$1(1, arguments);
  var date = toDate$1(dirtyDate);
  var timestamp = date.getTime();
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
  var startOfYearTimestamp = date.getTime();
  var difference = timestamp - startOfYearTimestamp;
  return Math.floor(difference / MILLISECONDS_IN_DAY$1) + 1;
} // See issue: https://github.com/date-fns/date-fns/issues/376


function startOfUTCISOWeek$1(dirtyDate) {
  requiredArgs$1(1, arguments);
  var weekStartsOn = 1;
  var date = toDate$1(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
} // See issue: https://github.com/date-fns/date-fns/issues/376


function getUTCISOWeekYear$1(dirtyDate) {
  requiredArgs$1(1, arguments);
  var date = toDate$1(dirtyDate);
  var year = date.getUTCFullYear();
  var fourthOfJanuaryOfNextYear = new Date(0);
  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCISOWeek$1(fourthOfJanuaryOfNextYear);
  var fourthOfJanuaryOfThisYear = new Date(0);
  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCISOWeek$1(fourthOfJanuaryOfThisYear);

  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
} // See issue: https://github.com/date-fns/date-fns/issues/376


function startOfUTCISOWeekYear$1(dirtyDate) {
  requiredArgs$1(1, arguments);
  var year = getUTCISOWeekYear$1(dirtyDate);
  var fourthOfJanuary = new Date(0);
  fourthOfJanuary.setUTCFullYear(year, 0, 4);
  fourthOfJanuary.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCISOWeek$1(fourthOfJanuary);
  return date;
}

var MILLISECONDS_IN_WEEK$1$1 = 604800000; // This function will be a part of public API when UTC function will be implemented.
// See issue: https://github.com/date-fns/date-fns/issues/376

function getUTCISOWeek$1(dirtyDate) {
  requiredArgs$1(1, arguments);
  var date = toDate$1(dirtyDate);
  var diff = startOfUTCISOWeek$1(date).getTime() - startOfUTCISOWeekYear$1(date).getTime(); // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)

  return Math.round(diff / MILLISECONDS_IN_WEEK$1$1) + 1;
} // See issue: https://github.com/date-fns/date-fns/issues/376


function startOfUTCWeek$1(dirtyDate, dirtyOptions) {
  requiredArgs$1(1, arguments);
  var options = dirtyOptions || {};
  var locale = options.locale;
  var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;
  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger$1(localeWeekStartsOn);
  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger$1(options.weekStartsOn); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN

  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }

  var date = toDate$1(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
} // See issue: https://github.com/date-fns/date-fns/issues/376


function getUTCWeekYear$1(dirtyDate, dirtyOptions) {
  requiredArgs$1(1, arguments);
  var date = toDate$1(dirtyDate, dirtyOptions);
  var year = date.getUTCFullYear();
  var options = dirtyOptions || {};
  var locale = options.locale;
  var localeFirstWeekContainsDate = locale && locale.options && locale.options.firstWeekContainsDate;
  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger$1(localeFirstWeekContainsDate);
  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger$1(options.firstWeekContainsDate); // Test if weekStartsOn is between 1 and 7 _and_ is not NaN

  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }

  var firstWeekOfNextYear = new Date(0);
  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCWeek$1(firstWeekOfNextYear, dirtyOptions);
  var firstWeekOfThisYear = new Date(0);
  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCWeek$1(firstWeekOfThisYear, dirtyOptions);

  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
} // See issue: https://github.com/date-fns/date-fns/issues/376


function startOfUTCWeekYear$1(dirtyDate, dirtyOptions) {
  requiredArgs$1(1, arguments);
  var options = dirtyOptions || {};
  var locale = options.locale;
  var localeFirstWeekContainsDate = locale && locale.options && locale.options.firstWeekContainsDate;
  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger$1(localeFirstWeekContainsDate);
  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger$1(options.firstWeekContainsDate);
  var year = getUTCWeekYear$1(dirtyDate, dirtyOptions);
  var firstWeek = new Date(0);
  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCWeek$1(firstWeek, dirtyOptions);
  return date;
}

var MILLISECONDS_IN_WEEK$2 = 604800000; // This function will be a part of public API when UTC function will be implemented.
// See issue: https://github.com/date-fns/date-fns/issues/376

function getUTCWeek$1(dirtyDate, options) {
  requiredArgs$1(1, arguments);
  var date = toDate$1(dirtyDate);
  var diff = startOfUTCWeek$1(date, options).getTime() - startOfUTCWeekYear$1(date, options).getTime(); // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)

  return Math.round(diff / MILLISECONDS_IN_WEEK$2) + 1;
}

var dayPeriodEnum$1 = {
  am: 'am',
  pm: 'pm',
  midnight: 'midnight',
  noon: 'noon',
  morning: 'morning',
  afternoon: 'afternoon',
  evening: 'evening',
  night: 'night'
  /*
   * |     | Unit                           |     | Unit                           |
   * |-----|--------------------------------|-----|--------------------------------|
   * |  a  | AM, PM                         |  A* | Milliseconds in day            |
   * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |
   * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |
   * |  d  | Day of month                   |  D  | Day of year                    |
   * |  e  | Local day of week              |  E  | Day of week                    |
   * |  f  |                                |  F* | Day of week in month           |
   * |  g* | Modified Julian day            |  G  | Era                            |
   * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
   * |  i! | ISO day of week                |  I! | ISO week of year               |
   * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |
   * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |
   * |  l* | (deprecated)                   |  L  | Stand-alone month              |
   * |  m  | Minute                         |  M  | Month                          |
   * |  n  |                                |  N  |                                |
   * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |
   * |  p! | Long localized time            |  P! | Long localized date            |
   * |  q  | Stand-alone quarter            |  Q  | Quarter                        |
   * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |
   * |  s  | Second                         |  S  | Fraction of second             |
   * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |
   * |  u  | Extended year                  |  U* | Cyclic year                    |
   * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |
   * |  w  | Local week of year             |  W* | Week of month                  |
   * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |
   * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |
   * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |
   *
   * Letters marked by * are not implemented but reserved by Unicode standard.
   *
   * Letters marked by ! are non-standard, but implemented by date-fns:
   * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)
   * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,
   *   i.e. 7 for Sunday, 1 for Monday, etc.
   * - `I` is ISO week of year, as opposed to `w` which is local week of year.
   * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.
   *   `R` is supposed to be used in conjunction with `I` and `i`
   *   for universal ISO week-numbering date, whereas
   *   `Y` is supposed to be used in conjunction with `w` and `e`
   *   for week-numbering date specific to the locale.
   * - `P` is long localized date format
   * - `p` is long localized time format
   */

};
var formatters$3 = {
  // Era
  G: function (date, token, localize) {
    var era = date.getUTCFullYear() > 0 ? 1 : 0;

    switch (token) {
      // AD, BC
      case 'G':
      case 'GG':
      case 'GGG':
        return localize.era(era, {
          width: 'abbreviated'
        });
      // A, B

      case 'GGGGG':
        return localize.era(era, {
          width: 'narrow'
        });
      // Anno Domini, Before Christ

      case 'GGGG':
      default:
        return localize.era(era, {
          width: 'wide'
        });
    }
  },
  // Year
  y: function (date, token, localize) {
    // Ordinal number
    if (token === 'yo') {
      var signedYear = date.getUTCFullYear(); // Returns 1 for 1 BC (which is year 0 in JavaScript)

      var year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize.ordinalNumber(year, {
        unit: 'year'
      });
    }

    return formatters$2$1.y(date, token);
  },
  // Local week-numbering year
  Y: function (date, token, localize, options) {
    var signedWeekYear = getUTCWeekYear$1(date, options); // Returns 1 for 1 BC (which is year 0 in JavaScript)

    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear; // Two digit year

    if (token === 'YY') {
      var twoDigitYear = weekYear % 100;
      return addLeadingZeros$1(twoDigitYear, 2);
    } // Ordinal number


    if (token === 'Yo') {
      return localize.ordinalNumber(weekYear, {
        unit: 'year'
      });
    } // Padding


    return addLeadingZeros$1(weekYear, token.length);
  },
  // ISO week-numbering year
  R: function (date, token) {
    var isoWeekYear = getUTCISOWeekYear$1(date); // Padding

    return addLeadingZeros$1(isoWeekYear, token.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function (date, token) {
    var year = date.getUTCFullYear();
    return addLeadingZeros$1(year, token.length);
  },
  // Quarter
  Q: function (date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);

    switch (token) {
      // 1, 2, 3, 4
      case 'Q':
        return String(quarter);
      // 01, 02, 03, 04

      case 'QQ':
        return addLeadingZeros$1(quarter, 2);
      // 1st, 2nd, 3rd, 4th

      case 'Qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      // Q1, Q2, Q3, Q4

      case 'QQQ':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)

      case 'QQQQQ':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'formatting'
        });
      // 1st quarter, 2nd quarter, ...

      case 'QQQQ':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone quarter
  q: function (date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);

    switch (token) {
      // 1, 2, 3, 4
      case 'q':
        return String(quarter);
      // 01, 02, 03, 04

      case 'qq':
        return addLeadingZeros$1(quarter, 2);
      // 1st, 2nd, 3rd, 4th

      case 'qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      // Q1, Q2, Q3, Q4

      case 'qqq':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)

      case 'qqqqq':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'standalone'
        });
      // 1st quarter, 2nd quarter, ...

      case 'qqqq':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // Month
  M: function (date, token, localize) {
    var month = date.getUTCMonth();

    switch (token) {
      case 'M':
      case 'MM':
        return formatters$2$1.M(date, token);
      // 1st, 2nd, ..., 12th

      case 'Mo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      // Jan, Feb, ..., Dec

      case 'MMM':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // J, F, ..., D

      case 'MMMMM':
        return localize.month(month, {
          width: 'narrow',
          context: 'formatting'
        });
      // January, February, ..., December

      case 'MMMM':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone month
  L: function (date, token, localize) {
    var month = date.getUTCMonth();

    switch (token) {
      // 1, 2, ..., 12
      case 'L':
        return String(month + 1);
      // 01, 02, ..., 12

      case 'LL':
        return addLeadingZeros$1(month + 1, 2);
      // 1st, 2nd, ..., 12th

      case 'Lo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      // Jan, Feb, ..., Dec

      case 'LLL':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // J, F, ..., D

      case 'LLLLL':
        return localize.month(month, {
          width: 'narrow',
          context: 'standalone'
        });
      // January, February, ..., December

      case 'LLLL':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // Local week of year
  w: function (date, token, localize, options) {
    var week = getUTCWeek$1(date, options);

    if (token === 'wo') {
      return localize.ordinalNumber(week, {
        unit: 'week'
      });
    }

    return addLeadingZeros$1(week, token.length);
  },
  // ISO week of year
  I: function (date, token, localize) {
    var isoWeek = getUTCISOWeek$1(date);

    if (token === 'Io') {
      return localize.ordinalNumber(isoWeek, {
        unit: 'week'
      });
    }

    return addLeadingZeros$1(isoWeek, token.length);
  },
  // Day of the month
  d: function (date, token, localize) {
    if (token === 'do') {
      return localize.ordinalNumber(date.getUTCDate(), {
        unit: 'date'
      });
    }

    return formatters$2$1.d(date, token);
  },
  // Day of year
  D: function (date, token, localize) {
    var dayOfYear = getUTCDayOfYear$1(date);

    if (token === 'Do') {
      return localize.ordinalNumber(dayOfYear, {
        unit: 'dayOfYear'
      });
    }

    return addLeadingZeros$1(dayOfYear, token.length);
  },
  // Day of week
  E: function (date, token, localize) {
    var dayOfWeek = date.getUTCDay();

    switch (token) {
      // Tue
      case 'E':
      case 'EE':
      case 'EEE':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T

      case 'EEEEE':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu

      case 'EEEEEE':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday

      case 'EEEE':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Local day of week
  e: function (date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;

    switch (token) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case 'e':
        return String(localDayOfWeek);
      // Padded numerical value

      case 'ee':
        return addLeadingZeros$1(localDayOfWeek, 2);
      // 1st, 2nd, ..., 7th

      case 'eo':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });

      case 'eee':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T

      case 'eeeee':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu

      case 'eeeeee':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday

      case 'eeee':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone local day of week
  c: function (date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;

    switch (token) {
      // Numerical value (same as in `e`)
      case 'c':
        return String(localDayOfWeek);
      // Padded numerical value

      case 'cc':
        return addLeadingZeros$1(localDayOfWeek, token.length);
      // 1st, 2nd, ..., 7th

      case 'co':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });

      case 'ccc':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // T

      case 'ccccc':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'standalone'
        });
      // Tu

      case 'cccccc':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'standalone'
        });
      // Tuesday

      case 'cccc':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // ISO day of week
  i: function (date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;

    switch (token) {
      // 2
      case 'i':
        return String(isoDayOfWeek);
      // 02

      case 'ii':
        return addLeadingZeros$1(isoDayOfWeek, token.length);
      // 2nd

      case 'io':
        return localize.ordinalNumber(isoDayOfWeek, {
          unit: 'day'
        });
      // Tue

      case 'iii':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T

      case 'iiiii':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu

      case 'iiiiii':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday

      case 'iiii':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // AM or PM
  a: function (date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';

    switch (token) {
      case 'a':
      case 'aa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'aaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();

      case 'aaaaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'aaaa':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // AM, PM, midnight, noon
  b: function (date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;

    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum$1.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum$1.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    }

    switch (token) {
      case 'b':
      case 'bb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'bbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();

      case 'bbbbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'bbbb':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function (date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;

    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum$1.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum$1.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum$1.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum$1.night;
    }

    switch (token) {
      case 'B':
      case 'BB':
      case 'BBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'BBBBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'BBBB':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Hour [1-12]
  h: function (date, token, localize) {
    if (token === 'ho') {
      var hours = date.getUTCHours() % 12;
      if (hours === 0) hours = 12;
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }

    return formatters$2$1.h(date, token);
  },
  // Hour [0-23]
  H: function (date, token, localize) {
    if (token === 'Ho') {
      return localize.ordinalNumber(date.getUTCHours(), {
        unit: 'hour'
      });
    }

    return formatters$2$1.H(date, token);
  },
  // Hour [0-11]
  K: function (date, token, localize) {
    var hours = date.getUTCHours() % 12;

    if (token === 'Ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }

    return addLeadingZeros$1(hours, token.length);
  },
  // Hour [1-24]
  k: function (date, token, localize) {
    var hours = date.getUTCHours();
    if (hours === 0) hours = 24;

    if (token === 'ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }

    return addLeadingZeros$1(hours, token.length);
  },
  // Minute
  m: function (date, token, localize) {
    if (token === 'mo') {
      return localize.ordinalNumber(date.getUTCMinutes(), {
        unit: 'minute'
      });
    }

    return formatters$2$1.m(date, token);
  },
  // Second
  s: function (date, token, localize) {
    if (token === 'so') {
      return localize.ordinalNumber(date.getUTCSeconds(), {
        unit: 'second'
      });
    }

    return formatters$2$1.s(date, token);
  },
  // Fraction of second
  S: function (date, token) {
    return formatters$2$1.S(date, token);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    if (timezoneOffset === 0) {
      return 'Z';
    }

    switch (token) {
      // Hours and optional minutes
      case 'X':
        return formatTimezoneWithOptionalMinutes$1(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`

      case 'XXXX':
      case 'XX':
        // Hours and minutes without `:` delimiter
        return formatTimezone$1(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`

      case 'XXXXX':
      case 'XXX': // Hours and minutes with `:` delimiter

      default:
        return formatTimezone$1(timezoneOffset, ':');
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    switch (token) {
      // Hours and optional minutes
      case 'x':
        return formatTimezoneWithOptionalMinutes$1(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`

      case 'xxxx':
      case 'xx':
        // Hours and minutes without `:` delimiter
        return formatTimezone$1(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`

      case 'xxxxx':
      case 'xxx': // Hours and minutes with `:` delimiter

      default:
        return formatTimezone$1(timezoneOffset, ':');
    }
  },
  // Timezone (GMT)
  O: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    switch (token) {
      // Short
      case 'O':
      case 'OO':
      case 'OOO':
        return 'GMT' + formatTimezoneShort$1(timezoneOffset, ':');
      // Long

      case 'OOOO':
      default:
        return 'GMT' + formatTimezone$1(timezoneOffset, ':');
    }
  },
  // Timezone (specific non-location)
  z: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    switch (token) {
      // Short
      case 'z':
      case 'zz':
      case 'zzz':
        return 'GMT' + formatTimezoneShort$1(timezoneOffset, ':');
      // Long

      case 'zzzz':
      default:
        return 'GMT' + formatTimezone$1(timezoneOffset, ':');
    }
  },
  // Seconds timestamp
  t: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = Math.floor(originalDate.getTime() / 1000);
    return addLeadingZeros$1(timestamp, token.length);
  },
  // Milliseconds timestamp
  T: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = originalDate.getTime();
    return addLeadingZeros$1(timestamp, token.length);
  }
};

function formatTimezoneShort$1(offset, dirtyDelimiter) {
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = Math.floor(absOffset / 60);
  var minutes = absOffset % 60;

  if (minutes === 0) {
    return sign + String(hours);
  }

  var delimiter = dirtyDelimiter || '';
  return sign + String(hours) + delimiter + addLeadingZeros$1(minutes, 2);
}

function formatTimezoneWithOptionalMinutes$1(offset, dirtyDelimiter) {
  if (offset % 60 === 0) {
    var sign = offset > 0 ? '-' : '+';
    return sign + addLeadingZeros$1(Math.abs(offset) / 60, 2);
  }

  return formatTimezone$1(offset, dirtyDelimiter);
}

function formatTimezone$1(offset, dirtyDelimiter) {
  var delimiter = dirtyDelimiter || '';
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = addLeadingZeros$1(Math.floor(absOffset / 60), 2);
  var minutes = addLeadingZeros$1(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}

var formatters$1$1 = formatters$3;

function dateLongFormatter$1(pattern, formatLong) {
  switch (pattern) {
    case 'P':
      return formatLong.date({
        width: 'short'
      });

    case 'PP':
      return formatLong.date({
        width: 'medium'
      });

    case 'PPP':
      return formatLong.date({
        width: 'long'
      });

    case 'PPPP':
    default:
      return formatLong.date({
        width: 'full'
      });
  }
}

function timeLongFormatter$1(pattern, formatLong) {
  switch (pattern) {
    case 'p':
      return formatLong.time({
        width: 'short'
      });

    case 'pp':
      return formatLong.time({
        width: 'medium'
      });

    case 'ppp':
      return formatLong.time({
        width: 'long'
      });

    case 'pppp':
    default:
      return formatLong.time({
        width: 'full'
      });
  }
}

function dateTimeLongFormatter$1(pattern, formatLong) {
  var matchResult = pattern.match(/(P+)(p+)?/);
  var datePattern = matchResult[1];
  var timePattern = matchResult[2];

  if (!timePattern) {
    return dateLongFormatter$1(pattern, formatLong);
  }

  var dateTimeFormat;

  switch (datePattern) {
    case 'P':
      dateTimeFormat = formatLong.dateTime({
        width: 'short'
      });
      break;

    case 'PP':
      dateTimeFormat = formatLong.dateTime({
        width: 'medium'
      });
      break;

    case 'PPP':
      dateTimeFormat = formatLong.dateTime({
        width: 'long'
      });
      break;

    case 'PPPP':
    default:
      dateTimeFormat = formatLong.dateTime({
        width: 'full'
      });
      break;
  }

  return dateTimeFormat.replace('{{date}}', dateLongFormatter$1(datePattern, formatLong)).replace('{{time}}', timeLongFormatter$1(timePattern, formatLong));
}

var longFormatters$2 = {
  p: timeLongFormatter$1,
  P: dateTimeLongFormatter$1
};
var longFormatters$1$1 = longFormatters$2;
/**
 * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.
 * They usually appear for dates that denote time before the timezones were introduced
 * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891
 * and GMT+01:00:00 after that date)
 *
 * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,
 * which would lead to incorrect calculations.
 *
 * This function returns the timezone offset in milliseconds that takes seconds in account.
 */

function getTimezoneOffsetInMilliseconds$1(date) {
  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));
  utcDate.setUTCFullYear(date.getFullYear());
  return date.getTime() - utcDate.getTime();
}

var protectedDayOfYearTokens$1 = ['D', 'DD'];
var protectedWeekYearTokens$1 = ['YY', 'YYYY'];

function isProtectedDayOfYearToken$1(token) {
  return protectedDayOfYearTokens$1.indexOf(token) !== -1;
}

function isProtectedWeekYearToken$1(token) {
  return protectedWeekYearTokens$1.indexOf(token) !== -1;
}

function throwProtectedError$1(token, format, input) {
  if (token === 'YYYY') {
    throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  } else if (token === 'YY') {
    throw new RangeError("Use `yy` instead of `YY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  } else if (token === 'D') {
    throw new RangeError("Use `d` instead of `D` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  } else if (token === 'DD') {
    throw new RangeError("Use `dd` instead of `DD` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  }
} // - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token
//   (one of the certain letters followed by `o`)
// - (\w)\1* matches any sequences of the same letter
// - '' matches two quote characters in a row
// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),
//   except a single quote symbol, which ends the sequence.
//   Two quote characters do not end the sequence.
//   If there is no matching single quote
//   then the sequence will continue until the end of the string.
// - . matches any single character unmatched by previous parts of the RegExps


var formattingTokensRegExp$1 = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g; // This RegExp catches symbols escaped by quotes, and also
// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`

var longFormattingTokensRegExp$1 = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp$1 = /^'([^]*?)'?$/;
var doubleQuoteRegExp$1 = /''/g;
var unescapedLatinCharacterRegExp$1 = /[a-zA-Z]/;
/**
 * @name format
 * @category Common Helpers
 * @summary Format the date.
 *
 * @description
 * Return the formatted date string in the given format. The result may vary by locale.
 *
 * > â ï¸ Please note that the `format` tokens differ from Moment.js and other libraries.
 * > See: https://git.io/fxCyr
 *
 * The characters wrapped between two single quotes characters (') are escaped.
 * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.
 * (see the last example)
 *
 * Format of the string is based on Unicode Technical Standard #35:
 * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table
 * with a few additions (see note 7 below the table).
 *
 * Accepted patterns:
 * | Unit                            | Pattern | Result examples                   | Notes |
 * |---------------------------------|---------|-----------------------------------|-------|
 * | Era                             | G..GGG  | AD, BC                            |       |
 * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |
 * |                                 | GGGGG   | A, B                              |       |
 * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |
 * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |
 * |                                 | yy      | 44, 01, 00, 17                    | 5     |
 * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |
 * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |
 * |                                 | yyyyy   | ...                               | 3,5   |
 * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |
 * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |
 * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |
 * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |
 * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |
 * |                                 | YYYYY   | ...                               | 3,5   |
 * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |
 * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |
 * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |
 * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |
 * |                                 | RRRRR   | ...                               | 3,5,7 |
 * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |
 * |                                 | uu      | -43, 01, 1900, 2017               | 5     |
 * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |
 * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |
 * |                                 | uuuuu   | ...                               | 3,5   |
 * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |
 * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |
 * |                                 | QQ      | 01, 02, 03, 04                    |       |
 * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |
 * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |
 * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |
 * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |
 * |                                 | qq      | 01, 02, 03, 04                    |       |
 * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |
 * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |
 * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |
 * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |
 * |                                 | MM      | 01, 02, ..., 12                   |       |
 * |                                 | MMM     | Jan, Feb, ..., Dec                |       |
 * |                                 | MMMM    | January, February, ..., December  | 2     |
 * |                                 | MMMMM   | J, F, ..., D                      |       |
 * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |
 * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |
 * |                                 | LL      | 01, 02, ..., 12                   |       |
 * |                                 | LLL     | Jan, Feb, ..., Dec                |       |
 * |                                 | LLLL    | January, February, ..., December  | 2     |
 * |                                 | LLLLL   | J, F, ..., D                      |       |
 * | Local week of year              | w       | 1, 2, ..., 53                     |       |
 * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |
 * |                                 | ww      | 01, 02, ..., 53                   |       |
 * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |
 * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |
 * |                                 | II      | 01, 02, ..., 53                   | 7     |
 * | Day of month                    | d       | 1, 2, ..., 31                     |       |
 * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |
 * |                                 | dd      | 01, 02, ..., 31                   |       |
 * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |
 * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |
 * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |
 * |                                 | DDD     | 001, 002, ..., 365, 366           |       |
 * |                                 | DDDD    | ...                               | 3     |
 * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |
 * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Su, Sa        |       |
 * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |
 * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |
 * |                                 | ii      | 01, 02, ..., 07                   | 7     |
 * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |
 * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |
 * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |
 * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Su, Sa        | 7     |
 * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |
 * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |
 * |                                 | ee      | 02, 03, ..., 01                   |       |
 * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | eeeee   | M, T, W, T, F, S, S               |       |
 * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Su, Sa        |       |
 * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |
 * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |
 * |                                 | cc      | 02, 03, ..., 01                   |       |
 * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | ccccc   | M, T, W, T, F, S, S               |       |
 * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Su, Sa        |       |
 * | AM, PM                          | a..aa   | AM, PM                            |       |
 * |                                 | aaa     | am, pm                            |       |
 * |                                 | aaaa    | a.m., p.m.                        | 2     |
 * |                                 | aaaaa   | a, p                              |       |
 * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |
 * |                                 | bbb     | am, pm, noon, midnight            |       |
 * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |
 * |                                 | bbbbb   | a, p, n, mi                       |       |
 * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |
 * |                                 | BBBB    | at night, in the morning, ...     | 2     |
 * |                                 | BBBBB   | at night, in the morning, ...     |       |
 * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |
 * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |
 * |                                 | hh      | 01, 02, ..., 11, 12               |       |
 * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |
 * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |
 * |                                 | HH      | 00, 01, 02, ..., 23               |       |
 * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |
 * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |
 * |                                 | KK      | 01, 02, ..., 11, 00               |       |
 * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |
 * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |
 * |                                 | kk      | 24, 01, 02, ..., 23               |       |
 * | Minute                          | m       | 0, 1, ..., 59                     |       |
 * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |
 * |                                 | mm      | 00, 01, ..., 59                   |       |
 * | Second                          | s       | 0, 1, ..., 59                     |       |
 * |                                 | so      | 0th, 1st, ..., 59th               | 7     |
 * |                                 | ss      | 00, 01, ..., 59                   |       |
 * | Fraction of second              | S       | 0, 1, ..., 9                      |       |
 * |                                 | SS      | 00, 01, ..., 99                   |       |
 * |                                 | SSS     | 000, 001, ..., 999                |       |
 * |                                 | SSSS    | ...                               | 3     |
 * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |
 * |                                 | XX      | -0800, +0530, Z                   |       |
 * |                                 | XXX     | -08:00, +05:30, Z                 |       |
 * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |
 * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |
 * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |
 * |                                 | xx      | -0800, +0530, +0000               |       |
 * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |
 * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |
 * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |
 * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |
 * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |
 * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |
 * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |
 * | Seconds timestamp               | t       | 512969520                         | 7     |
 * |                                 | tt      | ...                               | 3,7   |
 * | Milliseconds timestamp          | T       | 512969520900                      | 7     |
 * |                                 | TT      | ...                               | 3,7   |
 * | Long localized date             | P       | 04/29/1453                        | 7     |
 * |                                 | PP      | Apr 29, 1453                      | 7     |
 * |                                 | PPP     | April 29th, 1453                  | 7     |
 * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |
 * | Long localized time             | p       | 12:00 AM                          | 7     |
 * |                                 | pp      | 12:00:00 AM                       | 7     |
 * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |
 * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |
 * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |
 * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |
 * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |
 * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |
 * Notes:
 * 1. "Formatting" units (e.g. formatting quarter) in the default en-US locale
 *    are the same as "stand-alone" units, but are different in some languages.
 *    "Formatting" units are declined according to the rules of the language
 *    in the context of a date. "Stand-alone" units are always nominative singular:
 *
 *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`
 *
 *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`
 *
 * 2. Any sequence of the identical letters is a pattern, unless it is escaped by
 *    the single quote characters (see below).
 *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)
 *    the output will be the same as default pattern for this unit, usually
 *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units
 *    are marked with "2" in the last column of the table.
 *
 *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`
 *
 * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).
 *    The output will be padded with zeros to match the length of the pattern.
 *
 *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`
 *
 * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.
 *    These tokens represent the shortest form of the quarter.
 *
 * 5. The main difference between `y` and `u` patterns are B.C. years:
 *
 *    | Year | `y` | `u` |
 *    |------|-----|-----|
 *    | AC 1 |   1 |   1 |
 *    | BC 1 |   1 |   0 |
 *    | BC 2 |   2 |  -1 |
 *
 *    Also `yy` always returns the last two digits of a year,
 *    while `uu` pads single digit years to 2 characters and returns other years unchanged:
 *
 *    | Year | `yy` | `uu` |
 *    |------|------|------|
 *    | 1    |   01 |   01 |
 *    | 14   |   14 |   14 |
 *    | 376  |   76 |  376 |
 *    | 1453 |   53 | 1453 |
 *
 *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),
 *    except local week-numbering years are dependent on `options.weekStartsOn`
 *    and `options.firstWeekContainsDate` (compare [getISOWeekYear]{@link https://date-fns.org/docs/getISOWeekYear}
 *    and [getWeekYear]{@link https://date-fns.org/docs/getWeekYear}).
 *
 * 6. Specific non-location timezones are currently unavailable in `date-fns`,
 *    so right now these tokens fall back to GMT timezones.
 *
 * 7. These patterns are not in the Unicode Technical Standard #35:
 *    - `i`: ISO day of week
 *    - `I`: ISO week of year
 *    - `R`: ISO week-numbering year
 *    - `t`: seconds timestamp
 *    - `T`: milliseconds timestamp
 *    - `o`: ordinal number modifier
 *    - `P`: long localized date
 *    - `p`: long localized time
 *
 * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.
 *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://git.io/fxCyr
 *
 * 9. `D` and `DD` tokens represent days of the year but they are ofthen confused with days of the month.
 *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://git.io/fxCyr
 *
 * ### v2.0.0 breaking changes:
 *
 * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).
 *
 * - The second argument is now required for the sake of explicitness.
 *
 *   ```javascript
 *   // Before v2.0.0
 *   format(new Date(2016, 0, 1))
 *
 *   // v2.0.0 onward
 *   format(new Date(2016, 0, 1), "yyyy-MM-dd'T'HH:mm:ss.SSSxxx")
 *   ```
 *
 * - New format string API for `format` function
 *   which is based on [Unicode Technical Standard #35](https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table).
 *   See [this post](https://blog.date-fns.org/post/unicode-tokens-in-date-fns-v2-sreatyki91jg) for more details.
 *
 * - Characters are now escaped using single quote symbols (`'`) instead of square brackets.
 *
 * @param {Date|Number} date - the original date
 * @param {String} format - the string of tokens
 * @param {Object} [options] - an object with options.
 * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}
 * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @param {Number} [options.firstWeekContainsDate=1] - the day of January, which is
 * @param {Boolean} [options.useAdditionalWeekYearTokens=false] - if true, allows usage of the week-numbering year tokens `YY` and `YYYY`;
 *   see: https://git.io/fxCyr
 * @param {Boolean} [options.useAdditionalDayOfYearTokens=false] - if true, allows usage of the day of year tokens `D` and `DD`;
 *   see: https://git.io/fxCyr
 * @returns {String} the formatted date string
 * @throws {TypeError} 2 arguments required
 * @throws {RangeError} `date` must not be Invalid Date
 * @throws {RangeError} `options.locale` must contain `localize` property
 * @throws {RangeError} `options.locale` must contain `formatLong` property
 * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6
 * @throws {RangeError} `options.firstWeekContainsDate` must be between 1 and 7
 * @throws {RangeError} use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://git.io/fxCyr
 * @throws {RangeError} use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://git.io/fxCyr
 * @throws {RangeError} use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://git.io/fxCyr
 * @throws {RangeError} use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://git.io/fxCyr
 * @throws {RangeError} format string contains an unescaped latin alphabet character
 *
 * @example
 * // Represent 11 February 2014 in middle-endian format:
 * var result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')
 * //=> '02/11/2014'
 *
 * @example
 * // Represent 2 July 2014 in Esperanto:
 * import { eoLocale } from 'date-fns/locale/eo'
 * var result = format(new Date(2014, 6, 2), "do 'de' MMMM yyyy", {
 *   locale: eoLocale
 * })
 * //=> '2-a de julio 2014'
 *
 * @example
 * // Escape string by single quote characters:
 * var result = format(new Date(2014, 6, 2, 15), "h 'o''clock'")
 * //=> "3 o'clock"
 */

function format$1(dirtyDate, dirtyFormatStr, dirtyOptions) {
  requiredArgs$1(2, arguments);
  var formatStr = String(dirtyFormatStr);
  var options = dirtyOptions || {};
  var locale = options.locale || defaultLocale$1;
  var localeFirstWeekContainsDate = locale.options && locale.options.firstWeekContainsDate;
  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger$1(localeFirstWeekContainsDate);
  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger$1(options.firstWeekContainsDate); // Test if weekStartsOn is between 1 and 7 _and_ is not NaN

  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }

  var localeWeekStartsOn = locale.options && locale.options.weekStartsOn;
  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger$1(localeWeekStartsOn);
  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger$1(options.weekStartsOn); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN

  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }

  if (!locale.localize) {
    throw new RangeError('locale must contain localize property');
  }

  if (!locale.formatLong) {
    throw new RangeError('locale must contain formatLong property');
  }

  var originalDate = toDate$1(dirtyDate);

  if (!isValid$1(originalDate)) {
    throw new RangeError('Invalid time value');
  } // Convert the date in system timezone to the same date in UTC+00:00 timezone.
  // This ensures that when UTC functions will be implemented, locales will be compatible with them.
  // See an issue about UTC functions: https://github.com/date-fns/date-fns/issues/376


  var timezoneOffset = getTimezoneOffsetInMilliseconds$1(originalDate);
  var utcDate = subMilliseconds$1(originalDate, timezoneOffset);
  var formatterOptions = {
    firstWeekContainsDate: firstWeekContainsDate,
    weekStartsOn: weekStartsOn,
    locale: locale,
    _originalDate: originalDate
  };
  var result = formatStr.match(longFormattingTokensRegExp$1).map(function (substring) {
    var firstCharacter = substring[0];

    if (firstCharacter === 'p' || firstCharacter === 'P') {
      var longFormatter = longFormatters$1$1[firstCharacter];
      return longFormatter(substring, locale.formatLong, formatterOptions);
    }

    return substring;
  }).join('').match(formattingTokensRegExp$1).map(function (substring) {
    // Replace two single quote characters with one single quote character
    if (substring === "''") {
      return "'";
    }

    var firstCharacter = substring[0];

    if (firstCharacter === "'") {
      return cleanEscapedString$1(substring);
    }

    var formatter = formatters$1$1[firstCharacter];

    if (formatter) {
      if (!options.useAdditionalWeekYearTokens && isProtectedWeekYearToken$1(substring)) {
        throwProtectedError$1(substring, dirtyFormatStr, dirtyDate);
      }

      if (!options.useAdditionalDayOfYearTokens && isProtectedDayOfYearToken$1(substring)) {
        throwProtectedError$1(substring, dirtyFormatStr, dirtyDate);
      }

      return formatter(utcDate, substring, locale.localize, formatterOptions);
    }

    if (firstCharacter.match(unescapedLatinCharacterRegExp$1)) {
      throw new RangeError('Format string contains an unescaped latin alphabet character `' + firstCharacter + '`');
    }

    return substring;
  }).join('');
  return result;
}

function cleanEscapedString$1(input) {
  return input.match(escapedStringRegExp$1)[1].replace(doubleQuoteRegExp$1, "'");
}

/**
 * @name startOfDay
 * @category Day Helpers
 * @summary Return the start of a day for the given date.
 *
 * @description
 * Return the start of a day for the given date.
 * The result will be in the local timezone.
 *
 * ### v2.0.0 breaking changes:
 *
 * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).
 *
 * @param {Date|Number} date - the original date
 * @returns {Date} the start of a day
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // The start of a day for 2 September 2014 11:55:00:
 * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 02 2014 00:00:00
 */

function startOfDay(dirtyDate) {
  requiredArgs$1(1, arguments);
  var date = toDate$1(dirtyDate);
  date.setHours(0, 0, 0, 0);
  return date;
}
/**
 * @name isSameDay
 * @category Day Helpers
 * @summary Are the given dates in the same day?
 *
 * @description
 * Are the given dates in the same day?
 *
 * ### v2.0.0 breaking changes:
 *
 * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).
 *
 * @param {Date|Number} dateLeft - the first date to check
 * @param {Date|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same day
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?
 * var result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))
 * //=> true
 */


function isSameDay(dirtyDateLeft, dirtyDateRight) {
  requiredArgs$1(2, arguments);
  var dateLeftStartOfDay = startOfDay(dirtyDateLeft);
  var dateRightStartOfDay = startOfDay(dirtyDateRight);
  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();
}

function MentionUserLabel(_a) {
  var _b = _a.className,
      className = _b === void 0 ? '' : _b,
      children = _a.children,
      _c = _a.isReverse,
      isReverse = _c === void 0 ? false : _c,
      color = _a.color,
      userId = _a.userId;
  return /*#__PURE__*/React__default__default["default"].createElement("span", {
    className: "sendbird-mention-user-label ".concat(className, " ").concat(isReverse ? 'reverse' : '', " ").concat(color),
    contentEditable: false,
    "data-userid": userId
  }, children);
}

var isEmpty = function isEmpty(val) {
  return val === null || val === undefined;
}; // Some Ids return string and number inconsistently
// only use to comapre IDs


function compareIds(a, b) {
  if (isEmpty(a) || isEmpty(b)) {
    return false;
  }

  var aString = a.toString();
  var bString = b.toString();
  return aString === bString;
}

var USER_MENTION_TEMP_CHAR = '@';

getOutgoingMessageStates();

var _getSendingMessageSta$1 = getSendingMessageStatus();
    _getSendingMessageSta$1.SUCCEEDED;

_getSendingMessageSta$1.FAILED;
_getSendingMessageSta$1.PENDING;

var _getSendingMessageSta = getSendingMessageStatus();
    _getSendingMessageSta.SUCCEEDED;
    _getSendingMessageSta.FAILED;
    _getSendingMessageSta.PENDING;

function Loader(_a) {
  var _b = _a.className,
      className = _b === void 0 ? '' : _b,
      _c = _a.width,
      width = _c === void 0 ? '26px' : _c,
      _d = _a.height,
      height = _d === void 0 ? '26px' : _d,
      children = _a.children;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-loader'], false).join(' '),
    style: {
      width: typeof width === 'string' ? width : "".concat(width, "px"),
      height: typeof height === 'string' ? height : "".concat(height, "px")
    }
  }, children || /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    type: IconTypes.SPINNER,
    width: "26px",
    height: "26px"
  }));
}

getOutgoingMessageStates();

({
  disabled: propTypes.exports.bool,
  onLeaveChannel: propTypes.exports.func.isRequired
});

var Colors;

(function (Colors) {
  Colors[Colors["ONBACKGROUND_1"] = 0] = "ONBACKGROUND_1";
  Colors[Colors["ONBACKGROUND_2"] = 1] = "ONBACKGROUND_2";
  Colors[Colors["ONBACKGROUND_3"] = 2] = "ONBACKGROUND_3";
  Colors[Colors["ONBACKGROUND_4"] = 3] = "ONBACKGROUND_4";
  Colors[Colors["ONCONTENT_1"] = 4] = "ONCONTENT_1";
  Colors[Colors["ONCONTENT_2"] = 5] = "ONCONTENT_2";
  Colors[Colors["PRIMARY"] = 6] = "PRIMARY";
  Colors[Colors["ERROR"] = 7] = "ERROR";
})(Colors || (Colors = {}));

var changeColorToClassName = function changeColorToClassName(color) {
  switch (color) {
    case Colors.ONBACKGROUND_1:
      return 'sendbird-color--onbackground-1';

    case Colors.ONBACKGROUND_2:
      return 'sendbird-color--onbackground-2';

    case Colors.ONBACKGROUND_3:
      return 'sendbird-color--onbackground-3';

    case Colors.ONBACKGROUND_4:
      return 'sendbird-color--onbackground-4';

    case Colors.ONCONTENT_1:
      return 'sendbird-color--oncontent-1';

    case Colors.PRIMARY:
      return 'sendbird-color--primary';

    case Colors.ERROR:
      return 'sendbird-color--error';

    default:
      return null;
  }
};

var TextButton = function TextButton(_a) {
  var _b = _a.className,
      className = _b === void 0 ? '' : _b,
      _c = _a.color,
      color = _c === void 0 ? Colors.ONBACKGROUND_1 : _c,
      _d = _a.disabled,
      disabled = _d === void 0 ? false : _d,
      _e = _a.disableUnderline,
      disableUnderline = _e === void 0 ? false : _e,
      _f = _a.onClick,
      _onClick = _f === void 0 ? function () {} : _f,
      children = _a.children;

  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [changeColorToClassName(color), disableUnderline ? 'sendbird-textbutton--not-underline' : 'sendbird-textbutton', disabled ? 'sendbird-textbutton--disabled' : ''], false).join(' '),
    role: "button",
    tabIndex: 0,
    onClick: function onClick(e) {
      return _onClick(e);
    },
    onKeyPress: function onKeyPress(e) {
      return _onClick(e);
    }
  }, children);
};

function Types() {
  return {
    LOADING: 'LOADING',
    NO_CHANNELS: 'NO_CHANNELS',
    NO_MESSAGES: 'NO_MESSAGES',
    WRONG: 'WRONG',
    SEARCH_IN: 'SEARCH_IN',
    SEARCHING: 'SEARCHING',
    NO_RESULTS: 'NO_RESULTS'
  };
}

var PlaceHolderTypes$1 = Types();
var PlaceHolderTypes = PlaceHolderTypes$1;

function PlaceHolder(_a) {
  var _b = _a.className,
      className = _b === void 0 ? '' : _b,
      type = _a.type,
      _c = _a.searchInString,
      searchInString = _c === void 0 ? '' : _c,
      _d = _a.retryToConnect,
      retryToConnect = _d === void 0 ? null : _d;
  var stringSet = React__default.useContext(LocalizationContext).stringSet;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-place-holder'], false).join(' ')
  }, type === PlaceHolderTypes.LOADING && /*#__PURE__*/React__default__default["default"].createElement(Loader, {
    width: "48px",
    height: "48px"
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "48px",
    height: "48px"
  })), (type === PlaceHolderTypes.NO_CHANNELS || type === PlaceHolderTypes.NO_MESSAGES || type === PlaceHolderTypes.WRONG) && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-place-holder__body"
  }, type === PlaceHolderTypes.NO_CHANNELS && /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-place-holder__body__icon",
    type: IconTypes.CHAT,
    fillColor: IconColors.ON_BACKGROUND_3,
    width: "64px",
    height: "64px"
  }), type === PlaceHolderTypes.WRONG && /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-place-holder__body__icon",
    type: IconTypes.ERROR,
    fillColor: IconColors.ON_BACKGROUND_3,
    width: "64px",
    height: "64px"
  }), type === PlaceHolderTypes.NO_MESSAGES && /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-place-holder__body__icon",
    type: IconTypes.MESSAGE,
    fillColor: IconColors.ON_BACKGROUND_3,
    width: "64px",
    height: "64px"
  }), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-place-holder__body__text",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, type === PlaceHolderTypes.NO_CHANNELS && stringSet.PLACE_HOLDER__NO_CHANNEL, type === PlaceHolderTypes.WRONG && stringSet.PLACE_HOLDER__WRONG, type === PlaceHolderTypes.NO_MESSAGES && stringSet.PLACE_HOLDER__NO_MESSAGES), retryToConnect && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-place-holder__body__reconnect",
    role: "button",
    onClick: retryToConnect,
    onKeyPress: retryToConnect,
    tabIndex: 0
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-place-holder__body__reconnect__icon",
    type: IconTypes.REFRESH,
    fillColor: IconColors.PRIMARY,
    width: "20px",
    height: "20px"
  }), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-place-holder__body__reconnect__text",
    type: LabelTypography.BUTTON_1,
    color: LabelColors.PRIMARY
  }, stringSet.PLACE_HOLDER__RETRY_TO_CONNECT))), (type === PlaceHolderTypes.NO_RESULTS || type === PlaceHolderTypes.SEARCH_IN || type === PlaceHolderTypes.SEARCHING) && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-place-holder__body--align-top"
  }, type === PlaceHolderTypes.SEARCH_IN && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-place-holder__body--align-top__text"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-place-holder__body--align-top__text__search-in",
    type: LabelTypography.BUTTON_2,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.SEARCH_IN), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-place-holder__body--align-top__text__channel-name",
    type: LabelTypography.BUTTON_2,
    color: LabelColors.PRIMARY
  }, "'".concat(searchInString)), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-place-holder__body--align-top__text__quote",
    type: LabelTypography.BUTTON_2,
    color: LabelColors.PRIMARY
  }, '\'')), type === PlaceHolderTypes.SEARCHING && /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-place-hlder__body--align-top__searching",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.SEARCHING), type === PlaceHolderTypes.NO_RESULTS && /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-place-hlder__body--align-top__no-result",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.NO_SEARCHED_MESSAGE)));
}

var MessageInputKeys = {
  Enter: 'Enter',
  ArrowUp: 'ArrowUp',
  ArrowDown: 'ArrowDown',
  Backspace: 'Backspace'
};
var NodeTypes = {
  ElementNode: 1,
  TextNode: 3
};
var NodeNames = {
  Span: 'SPAN',
  Br: 'BR',
  Div: 'DIV'
};

var DateSeparator = function DateSeparator(_a) {
  var _b = _a.children,
      children = _b === void 0 ? null : _b,
      _c = _a.className,
      className = _c === void 0 ? '' : _c,
      _d = _a.separatorColor,
      separatorColor = _d === void 0 ? Colors.ONBACKGROUND_4 : _d;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-separator'], false).join(' ')
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: ['sendbird-separator__left', "".concat(changeColorToClassName(separatorColor), "--background-color")].join(' ')
  }), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-separator__text"
  }, children || /*#__PURE__*/React__default__default["default"].createElement(Label, {
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, "Date Separator")), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: ['sendbird-separator__right', "".concat(changeColorToClassName(separatorColor), "--background-color")].join(' ')
  }));
};

var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

function getAugmentedNamespace(n) {
  if (n.__esModule) return n;
  var a = Object.defineProperty({}, '__esModule', {
    value: true
  });
  Object.keys(n).forEach(function (k) {
    var d = Object.getOwnPropertyDescriptor(n, k);
    Object.defineProperty(a, k, d.get ? d : {
      enumerable: true,
      get: function () {
        return n[k];
      }
    });
  });
  return a;
}

var server_node = {
  exports: {}
};
var reactDomServer_node_production_min = {};
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/

/* eslint-disable no-unused-vars */

var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
  if (val === null || val === undefined) {
    throw new TypeError('Object.assign cannot be called with null or undefined');
  }

  return Object(val);
}

function shouldUseNative() {
  try {
    if (!Object.assign) {
      return false;
    } // Detect buggy property enumeration order in older V8 versions.
    // https://bugs.chromium.org/p/v8/issues/detail?id=4118


    var test1 = new String('abc'); // eslint-disable-line no-new-wrappers

    test1[5] = 'de';

    if (Object.getOwnPropertyNames(test1)[0] === '5') {
      return false;
    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056


    var test2 = {};

    for (var i = 0; i < 10; i++) {
      test2['_' + String.fromCharCode(i)] = i;
    }

    var order2 = Object.getOwnPropertyNames(test2).map(function (n) {
      return test2[n];
    });

    if (order2.join('') !== '0123456789') {
      return false;
    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056


    var test3 = {};
    'abcdefghijklmnopqrst'.split('').forEach(function (letter) {
      test3[letter] = letter;
    });

    if (Object.keys(Object.assign({}, test3)).join('') !== 'abcdefghijklmnopqrst') {
      return false;
    }

    return true;
  } catch (err) {
    // We don't expect any of the above to throw, but better to be safe.
    return false;
  }
}

var objectAssign = shouldUseNative() ? Object.assign : function (target, source) {
  var from;
  var to = toObject(target);
  var symbols;

  for (var s = 1; s < arguments.length; s++) {
    from = Object(arguments[s]);

    for (var key in from) {
      if (hasOwnProperty.call(from, key)) {
        to[key] = from[key];
      }
    }

    if (getOwnPropertySymbols) {
      symbols = getOwnPropertySymbols(from);

      for (var i = 0; i < symbols.length; i++) {
        if (propIsEnumerable.call(from, symbols[i])) {
          to[symbols[i]] = from[symbols[i]];
        }
      }
    }
  }

  return to;
};
var events = {
  exports: {}
};
var R$1 = typeof Reflect === 'object' ? Reflect : null;
var ReflectApply = R$1 && typeof R$1.apply === 'function' ? R$1.apply : function ReflectApply(target, receiver, args) {
  return Function.prototype.apply.call(target, receiver, args);
};
var ReflectOwnKeys;

if (R$1 && typeof R$1.ownKeys === 'function') {
  ReflectOwnKeys = R$1.ownKeys;
} else if (Object.getOwnPropertySymbols) {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));
  };
} else {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target);
  };
}

function ProcessEmitWarning(warning) {
  if (console && console.warn) console.warn(warning);
}

var NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {
  return value !== value;
};

function EventEmitter() {
  EventEmitter.init.call(this);
}

events.exports = EventEmitter;
events.exports.once = once; // Backwards-compat with node 0.10.x

EventEmitter.EventEmitter = EventEmitter;
EventEmitter.prototype._events = undefined;
EventEmitter.prototype._eventsCount = 0;
EventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.

var defaultMaxListeners = 10;

function checkListener(listener) {
  if (typeof listener !== 'function') {
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
  }
}

Object.defineProperty(EventEmitter, 'defaultMaxListeners', {
  enumerable: true,
  get: function () {
    return defaultMaxListeners;
  },
  set: function (arg) {
    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {
      throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + '.');
    }

    defaultMaxListeners = arg;
  }
});

EventEmitter.init = function () {
  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {
    this._events = Object.create(null);
    this._eventsCount = 0;
  }

  this._maxListeners = this._maxListeners || undefined;
}; // Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.


EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + '.');
  }

  this._maxListeners = n;
  return this;
};

function _getMaxListeners(that) {
  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;
  return that._maxListeners;
}

EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
  return _getMaxListeners(this);
};

EventEmitter.prototype.emit = function emit(type) {
  var args = [];

  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);

  var doError = type === 'error';
  var events = this._events;
  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false; // If there is no 'error' event listener then throw.

  if (doError) {
    var er;
    if (args.length > 0) er = args[0];

    if (er instanceof Error) {
      // Note: The comments on the `throw` lines are intentional, they show
      // up in Node's output if this results in an unhandled exception.
      throw er; // Unhandled 'error' event
    } // At least give some kind of context to the user


    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));
    err.context = er;
    throw err; // Unhandled 'error' event
  }

  var handler = events[type];
  if (handler === undefined) return false;

  if (typeof handler === 'function') {
    ReflectApply(handler, this, args);
  } else {
    var len = handler.length;
    var listeners = arrayClone(handler, len);

    for (var i = 0; i < len; ++i) ReflectApply(listeners[i], this, args);
  }

  return true;
};

function _addListener(target, type, listener, prepend) {
  var m;
  var events;
  var existing;
  checkListener(listener);
  events = target._events;

  if (events === undefined) {
    events = target._events = Object.create(null);
    target._eventsCount = 0;
  } else {
    // To avoid recursion in the case that type === "newListener"! Before
    // adding it to the listeners, first emit "newListener".
    if (events.newListener !== undefined) {
      target.emit('newListener', type, listener.listener ? listener.listener : listener); // Re-assign `events` because a newListener handler could have caused the
      // this._events to be assigned to a new object

      events = target._events;
    }

    existing = events[type];
  }

  if (existing === undefined) {
    // Optimize the case of one listener. Don't need the extra array object.
    existing = events[type] = listener;
    ++target._eventsCount;
  } else {
    if (typeof existing === 'function') {
      // Adding the second element, need to change to array.
      existing = events[type] = prepend ? [listener, existing] : [existing, listener]; // If we've already got an array, just append.
    } else if (prepend) {
      existing.unshift(listener);
    } else {
      existing.push(listener);
    } // Check for listener leak


    m = _getMaxListeners(target);

    if (m > 0 && existing.length > m && !existing.warned) {
      existing.warned = true; // No error code for this since it is a Warning
      // eslint-disable-next-line no-restricted-syntax

      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');
      w.name = 'MaxListenersExceededWarning';
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }

  return target;
}

EventEmitter.prototype.addListener = function addListener(type, listener) {
  return _addListener(this, type, listener, false);
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener = function prependListener(type, listener) {
  return _addListener(this, type, listener, true);
};

function onceWrapper() {
  if (!this.fired) {
    this.target.removeListener(this.type, this.wrapFn);
    this.fired = true;
    if (arguments.length === 0) return this.listener.call(this.target);
    return this.listener.apply(this.target, arguments);
  }
}

function _onceWrap(target, type, listener) {
  var state = {
    fired: false,
    wrapFn: undefined,
    target: target,
    type: type,
    listener: listener
  };
  var wrapped = onceWrapper.bind(state);
  wrapped.listener = listener;
  state.wrapFn = wrapped;
  return wrapped;
}

EventEmitter.prototype.once = function once(type, listener) {
  checkListener(listener);
  this.on(type, _onceWrap(this, type, listener));
  return this;
};

EventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {
  checkListener(listener);
  this.prependListener(type, _onceWrap(this, type, listener));
  return this;
}; // Emits a 'removeListener' event if and only if the listener was removed.


EventEmitter.prototype.removeListener = function removeListener(type, listener) {
  var list, events, position, i, originalListener;
  checkListener(listener);
  events = this._events;
  if (events === undefined) return this;
  list = events[type];
  if (list === undefined) return this;

  if (list === listener || list.listener === listener) {
    if (--this._eventsCount === 0) this._events = Object.create(null);else {
      delete events[type];
      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);
    }
  } else if (typeof list !== 'function') {
    position = -1;

    for (i = list.length - 1; i >= 0; i--) {
      if (list[i] === listener || list[i].listener === listener) {
        originalListener = list[i].listener;
        position = i;
        break;
      }
    }

    if (position < 0) return this;
    if (position === 0) list.shift();else {
      spliceOne(list, position);
    }
    if (list.length === 1) events[type] = list[0];
    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);
  }

  return this;
};

EventEmitter.prototype.off = EventEmitter.prototype.removeListener;

EventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {
  var listeners, events, i;
  events = this._events;
  if (events === undefined) return this; // not listening for removeListener, no need to emit

  if (events.removeListener === undefined) {
    if (arguments.length === 0) {
      this._events = Object.create(null);
      this._eventsCount = 0;
    } else if (events[type] !== undefined) {
      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];
    }

    return this;
  } // emit removeListener for all listeners on all events


  if (arguments.length === 0) {
    var keys = Object.keys(events);
    var key;

    for (i = 0; i < keys.length; ++i) {
      key = keys[i];
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }

    this.removeAllListeners('removeListener');
    this._events = Object.create(null);
    this._eventsCount = 0;
    return this;
  }

  listeners = events[type];

  if (typeof listeners === 'function') {
    this.removeListener(type, listeners);
  } else if (listeners !== undefined) {
    // LIFO order
    for (i = listeners.length - 1; i >= 0; i--) {
      this.removeListener(type, listeners[i]);
    }
  }

  return this;
};

function _listeners(target, type, unwrap) {
  var events = target._events;
  if (events === undefined) return [];
  var evlistener = events[type];
  if (evlistener === undefined) return [];
  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];
  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}

EventEmitter.prototype.listeners = function listeners(type) {
  return _listeners(this, type, true);
};

EventEmitter.prototype.rawListeners = function rawListeners(type) {
  return _listeners(this, type, false);
};

EventEmitter.listenerCount = function (emitter, type) {
  if (typeof emitter.listenerCount === 'function') {
    return emitter.listenerCount(type);
  } else {
    return listenerCount$1.call(emitter, type);
  }
};

EventEmitter.prototype.listenerCount = listenerCount$1;

function listenerCount$1(type) {
  var events = this._events;

  if (events !== undefined) {
    var evlistener = events[type];

    if (typeof evlistener === 'function') {
      return 1;
    } else if (evlistener !== undefined) {
      return evlistener.length;
    }
  }

  return 0;
}

EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
};

function arrayClone(arr, n) {
  var copy = new Array(n);

  for (var i = 0; i < n; ++i) copy[i] = arr[i];

  return copy;
}

function spliceOne(list, index) {
  for (; index + 1 < list.length; index++) list[index] = list[index + 1];

  list.pop();
}

function unwrapListeners(arr) {
  var ret = new Array(arr.length);

  for (var i = 0; i < ret.length; ++i) {
    ret[i] = arr[i].listener || arr[i];
  }

  return ret;
}

function once(emitter, name) {
  return new Promise(function (resolve, reject) {
    function errorListener(err) {
      emitter.removeListener(name, resolver);
      reject(err);
    }

    function resolver() {
      if (typeof emitter.removeListener === 'function') {
        emitter.removeListener('error', errorListener);
      }

      resolve([].slice.call(arguments));
    }

    eventTargetAgnosticAddListener(emitter, name, resolver, {
      once: true
    });

    if (name !== 'error') {
      addErrorHandlerIfEventEmitter(emitter, errorListener, {
        once: true
      });
    }
  });
}

function addErrorHandlerIfEventEmitter(emitter, handler, flags) {
  if (typeof emitter.on === 'function') {
    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);
  }
}

function eventTargetAgnosticAddListener(emitter, name, listener, flags) {
  if (typeof emitter.on === 'function') {
    if (flags.once) {
      emitter.once(name, listener);
    } else {
      emitter.on(name, listener);
    }
  } else if (typeof emitter.addEventListener === 'function') {
    // EventTarget does not have `error` event semantics like Node
    // EventEmitters, we do not listen for `error` events here.
    emitter.addEventListener(name, function wrapListener(arg) {
      // IE does not have builtin `{ once: true }` support so we
      // have to do it manually.
      if (flags.once) {
        emitter.removeEventListener(name, wrapListener);
      }

      listener(arg);
    });
  } else {
    throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof emitter);
  }
}

var EE = events.exports;
var util$1 = {};

var isBuffer = function isBuffer(arg) {
  return arg instanceof Buffer;
};

var inherits = {
  exports: {}
};
var inherits_browser = {
  exports: {}
};

if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  inherits_browser.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor;
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  inherits_browser.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor;

    var TempCtor = function () {};

    TempCtor.prototype = superCtor.prototype;
    ctor.prototype = new TempCtor();
    ctor.prototype.constructor = ctor;
  };
}

try {
  var util = util$1;
  if (typeof util.inherits !== 'function') throw '';
  inherits.exports = util.inherits;
} catch (e) {
  inherits.exports = inherits_browser.exports;
}

(function (exports) {
  // Copyright Joyent, Inc. and other Node contributors.
  //
  // Permission is hereby granted, free of charge, to any person obtaining a
  // copy of this software and associated documentation files (the
  // "Software"), to deal in the Software without restriction, including
  // without limitation the rights to use, copy, modify, merge, publish,
  // distribute, sublicense, and/or sell copies of the Software, and to permit
  // persons to whom the Software is furnished to do so, subject to the
  // following conditions:
  //
  // The above copyright notice and this permission notice shall be included
  // in all copies or substantial portions of the Software.
  //
  // THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
  // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
  // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
  // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
  // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
  // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
  // USE OR OTHER DEALINGS IN THE SOFTWARE.
  var getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors || function getOwnPropertyDescriptors(obj) {
    var keys = Object.keys(obj);
    var descriptors = {};

    for (var i = 0; i < keys.length; i++) {
      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);
    }

    return descriptors;
  };

  var formatRegExp = /%[sdj%]/g;

  exports.format = function (f) {
    if (!isString(f)) {
      var objects = [];

      for (var i = 0; i < arguments.length; i++) {
        objects.push(inspect(arguments[i]));
      }

      return objects.join(' ');
    }

    var i = 1;
    var args = arguments;
    var len = args.length;
    var str = String(f).replace(formatRegExp, function (x) {
      if (x === '%%') return '%';
      if (i >= len) return x;

      switch (x) {
        case '%s':
          return String(args[i++]);

        case '%d':
          return Number(args[i++]);

        case '%j':
          try {
            return JSON.stringify(args[i++]);
          } catch (_) {
            return '[Circular]';
          }

        default:
          return x;
      }
    });

    for (var x = args[i]; i < len; x = args[++i]) {
      if (isNull(x) || !isObject(x)) {
        str += ' ' + x;
      } else {
        str += ' ' + inspect(x);
      }
    }

    return str;
  }; // Mark that a method should not be used.
  // Returns a modified function which warns once by default.
  // If --no-deprecation is set, then it is a no-op.


  exports.deprecate = function (fn, msg) {
    if (typeof process !== 'undefined' && process.noDeprecation === true) {
      return fn;
    } // Allow for deprecating things in the process of starting up.


    if (typeof process === 'undefined') {
      return function () {
        return exports.deprecate(fn, msg).apply(this, arguments);
      };
    }

    var warned = false;

    function deprecated() {
      if (!warned) {
        if (process.throwDeprecation) {
          throw new Error(msg);
        } else if (process.traceDeprecation) {
          console.trace(msg);
        } else {
          console.error(msg);
        }

        warned = true;
      }

      return fn.apply(this, arguments);
    }

    return deprecated;
  };

  var debugs = {};
  var debugEnviron;

  exports.debuglog = function (set) {
    if (isUndefined(debugEnviron)) debugEnviron = process.env.NODE_DEBUG || '';
    set = set.toUpperCase();

    if (!debugs[set]) {
      if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
        var pid = process.pid;

        debugs[set] = function () {
          var msg = exports.format.apply(exports, arguments);
          console.error('%s %d: %s', set, pid, msg);
        };
      } else {
        debugs[set] = function () {};
      }
    }

    return debugs[set];
  };
  /**
   * Echos the value of a value. Trys to print the value out
   * in the best way possible given the different types.
   *
   * @param {Object} obj The object to print out.
   * @param {Object} opts Optional options object that alters the output.
   */

  /* legacy: obj, showHidden, depth, colors*/


  function inspect(obj, opts) {
    // default options
    var ctx = {
      seen: [],
      stylize: stylizeNoColor
    }; // legacy...

    if (arguments.length >= 3) ctx.depth = arguments[2];
    if (arguments.length >= 4) ctx.colors = arguments[3];

    if (isBoolean(opts)) {
      // legacy...
      ctx.showHidden = opts;
    } else if (opts) {
      // got an "options" object
      exports._extend(ctx, opts);
    } // set default options


    if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
    if (isUndefined(ctx.depth)) ctx.depth = 2;
    if (isUndefined(ctx.colors)) ctx.colors = false;
    if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
    if (ctx.colors) ctx.stylize = stylizeWithColor;
    return formatValue(ctx, obj, ctx.depth);
  }

  exports.inspect = inspect; // http://en.wikipedia.org/wiki/ANSI_escape_code#graphics

  inspect.colors = {
    'bold': [1, 22],
    'italic': [3, 23],
    'underline': [4, 24],
    'inverse': [7, 27],
    'white': [37, 39],
    'grey': [90, 39],
    'black': [30, 39],
    'blue': [34, 39],
    'cyan': [36, 39],
    'green': [32, 39],
    'magenta': [35, 39],
    'red': [31, 39],
    'yellow': [33, 39]
  }; // Don't use 'blue' not visible on cmd.exe

  inspect.styles = {
    'special': 'cyan',
    'number': 'yellow',
    'boolean': 'yellow',
    'undefined': 'grey',
    'null': 'bold',
    'string': 'green',
    'date': 'magenta',
    // "name": intentionally not styling
    'regexp': 'red'
  };

  function stylizeWithColor(str, styleType) {
    var style = inspect.styles[styleType];

    if (style) {
      return '\u001b[' + inspect.colors[style][0] + 'm' + str + '\u001b[' + inspect.colors[style][1] + 'm';
    } else {
      return str;
    }
  }

  function stylizeNoColor(str, styleType) {
    return str;
  }

  function arrayToHash(array) {
    var hash = {};
    array.forEach(function (val, idx) {
      hash[val] = true;
    });
    return hash;
  }

  function formatValue(ctx, value, recurseTimes) {
    // Provide a hook for user-specified inspect functions.
    // Check that value is an object with an inspect function on it
    if (ctx.customInspect && value && isFunction(value.inspect) && // Filter out the util module, it's inspect function is special
    value.inspect !== exports.inspect && // Also filter out any prototype objects using the circular check.
    !(value.constructor && value.constructor.prototype === value)) {
      var ret = value.inspect(recurseTimes, ctx);

      if (!isString(ret)) {
        ret = formatValue(ctx, ret, recurseTimes);
      }

      return ret;
    } // Primitive types cannot have properties


    var primitive = formatPrimitive(ctx, value);

    if (primitive) {
      return primitive;
    } // Look up the keys of the object.


    var keys = Object.keys(value);
    var visibleKeys = arrayToHash(keys);

    if (ctx.showHidden) {
      keys = Object.getOwnPropertyNames(value);
    } // IE doesn't make error fields non-enumerable
    // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx


    if (isError(value) && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
      return formatError(value);
    } // Some type of object without properties can be shortcutted.


    if (keys.length === 0) {
      if (isFunction(value)) {
        var name = value.name ? ': ' + value.name : '';
        return ctx.stylize('[Function' + name + ']', 'special');
      }

      if (isRegExp(value)) {
        return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
      }

      if (isDate(value)) {
        return ctx.stylize(Date.prototype.toString.call(value), 'date');
      }

      if (isError(value)) {
        return formatError(value);
      }
    }

    var base = '',
        array = false,
        braces = ['{', '}']; // Make Array say that they are Array

    if (isArray(value)) {
      array = true;
      braces = ['[', ']'];
    } // Make functions say that they are functions


    if (isFunction(value)) {
      var n = value.name ? ': ' + value.name : '';
      base = ' [Function' + n + ']';
    } // Make RegExps say that they are RegExps


    if (isRegExp(value)) {
      base = ' ' + RegExp.prototype.toString.call(value);
    } // Make dates with properties first say the date


    if (isDate(value)) {
      base = ' ' + Date.prototype.toUTCString.call(value);
    } // Make error with message first say the error


    if (isError(value)) {
      base = ' ' + formatError(value);
    }

    if (keys.length === 0 && (!array || value.length == 0)) {
      return braces[0] + base + braces[1];
    }

    if (recurseTimes < 0) {
      if (isRegExp(value)) {
        return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
      } else {
        return ctx.stylize('[Object]', 'special');
      }
    }

    ctx.seen.push(value);
    var output;

    if (array) {
      output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
    } else {
      output = keys.map(function (key) {
        return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
      });
    }

    ctx.seen.pop();
    return reduceToSingleString(output, base, braces);
  }

  function formatPrimitive(ctx, value) {
    if (isUndefined(value)) return ctx.stylize('undefined', 'undefined');

    if (isString(value)) {
      var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '').replace(/'/g, "\\'").replace(/\\"/g, '"') + '\'';
      return ctx.stylize(simple, 'string');
    }

    if (isNumber(value)) return ctx.stylize('' + value, 'number');
    if (isBoolean(value)) return ctx.stylize('' + value, 'boolean'); // For some reason typeof null is "object", so special case here.

    if (isNull(value)) return ctx.stylize('null', 'null');
  }

  function formatError(value) {
    return '[' + Error.prototype.toString.call(value) + ']';
  }

  function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
    var output = [];

    for (var i = 0, l = value.length; i < l; ++i) {
      if (hasOwnProperty(value, String(i))) {
        output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, String(i), true));
      } else {
        output.push('');
      }
    }

    keys.forEach(function (key) {
      if (!key.match(/^\d+$/)) {
        output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, key, true));
      }
    });
    return output;
  }

  function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
    var name, str, desc;
    desc = Object.getOwnPropertyDescriptor(value, key) || {
      value: value[key]
    };

    if (desc.get) {
      if (desc.set) {
        str = ctx.stylize('[Getter/Setter]', 'special');
      } else {
        str = ctx.stylize('[Getter]', 'special');
      }
    } else {
      if (desc.set) {
        str = ctx.stylize('[Setter]', 'special');
      }
    }

    if (!hasOwnProperty(visibleKeys, key)) {
      name = '[' + key + ']';
    }

    if (!str) {
      if (ctx.seen.indexOf(desc.value) < 0) {
        if (isNull(recurseTimes)) {
          str = formatValue(ctx, desc.value, null);
        } else {
          str = formatValue(ctx, desc.value, recurseTimes - 1);
        }

        if (str.indexOf('\n') > -1) {
          if (array) {
            str = str.split('\n').map(function (line) {
              return '  ' + line;
            }).join('\n').substr(2);
          } else {
            str = '\n' + str.split('\n').map(function (line) {
              return '   ' + line;
            }).join('\n');
          }
        }
      } else {
        str = ctx.stylize('[Circular]', 'special');
      }
    }

    if (isUndefined(name)) {
      if (array && key.match(/^\d+$/)) {
        return str;
      }

      name = JSON.stringify('' + key);

      if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
        name = name.substr(1, name.length - 2);
        name = ctx.stylize(name, 'name');
      } else {
        name = name.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'");
        name = ctx.stylize(name, 'string');
      }
    }

    return name + ': ' + str;
  }

  function reduceToSingleString(output, base, braces) {
    var length = output.reduce(function (prev, cur) {
      if (cur.indexOf('\n') >= 0) ;
      return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
    }, 0);

    if (length > 60) {
      return braces[0] + (base === '' ? '' : base + '\n ') + ' ' + output.join(',\n  ') + ' ' + braces[1];
    }

    return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
  } // NOTE: These type checking functions intentionally don't use `instanceof`
  // because it is fragile and can be easily faked with `Object.create()`.


  function isArray(ar) {
    return Array.isArray(ar);
  }

  exports.isArray = isArray;

  function isBoolean(arg) {
    return typeof arg === 'boolean';
  }

  exports.isBoolean = isBoolean;

  function isNull(arg) {
    return arg === null;
  }

  exports.isNull = isNull;

  function isNullOrUndefined(arg) {
    return arg == null;
  }

  exports.isNullOrUndefined = isNullOrUndefined;

  function isNumber(arg) {
    return typeof arg === 'number';
  }

  exports.isNumber = isNumber;

  function isString(arg) {
    return typeof arg === 'string';
  }

  exports.isString = isString;

  function isSymbol(arg) {
    return typeof arg === 'symbol';
  }

  exports.isSymbol = isSymbol;

  function isUndefined(arg) {
    return arg === void 0;
  }

  exports.isUndefined = isUndefined;

  function isRegExp(re) {
    return isObject(re) && objectToString(re) === '[object RegExp]';
  }

  exports.isRegExp = isRegExp;

  function isObject(arg) {
    return typeof arg === 'object' && arg !== null;
  }

  exports.isObject = isObject;

  function isDate(d) {
    return isObject(d) && objectToString(d) === '[object Date]';
  }

  exports.isDate = isDate;

  function isError(e) {
    return isObject(e) && (objectToString(e) === '[object Error]' || e instanceof Error);
  }

  exports.isError = isError;

  function isFunction(arg) {
    return typeof arg === 'function';
  }

  exports.isFunction = isFunction;

  function isPrimitive(arg) {
    return arg === null || typeof arg === 'boolean' || typeof arg === 'number' || typeof arg === 'string' || typeof arg === 'symbol' || // ES6 symbol
    typeof arg === 'undefined';
  }

  exports.isPrimitive = isPrimitive;
  exports.isBuffer = isBuffer;

  function objectToString(o) {
    return Object.prototype.toString.call(o);
  }

  function pad(n) {
    return n < 10 ? '0' + n.toString(10) : n.toString(10);
  }

  var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']; // 26 Feb 16:19:34

  function timestamp() {
    var d = new Date();
    var time = [pad(d.getHours()), pad(d.getMinutes()), pad(d.getSeconds())].join(':');
    return [d.getDate(), months[d.getMonth()], time].join(' ');
  } // log is just a thin wrapper to console.log that prepends a timestamp


  exports.log = function () {
    console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
  };
  /**
   * Inherit the prototype methods from one constructor into another.
   *
   * The Function.prototype.inherits from lang.js rewritten as a standalone
   * function (not on Function.prototype). NOTE: If this file is to be loaded
   * during bootstrapping this function needs to be rewritten using some native
   * functions as prototype setup using normal JavaScript does not work as
   * expected during bootstrapping (see mirror.js in r114903).
   *
   * @param {function} ctor Constructor function which needs to inherit the
   *     prototype.
   * @param {function} superCtor Constructor function to inherit prototype from.
   */


  exports.inherits = inherits.exports;

  exports._extend = function (origin, add) {
    // Don't do anything if add isn't an object
    if (!add || !isObject(add)) return origin;
    var keys = Object.keys(add);
    var i = keys.length;

    while (i--) {
      origin[keys[i]] = add[keys[i]];
    }

    return origin;
  };

  function hasOwnProperty(obj, prop) {
    return Object.prototype.hasOwnProperty.call(obj, prop);
  }

  var kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;

  exports.promisify = function promisify(original) {
    if (typeof original !== 'function') throw new TypeError('The "original" argument must be of type Function');

    if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {
      var fn = original[kCustomPromisifiedSymbol];

      if (typeof fn !== 'function') {
        throw new TypeError('The "util.promisify.custom" argument must be of type Function');
      }

      Object.defineProperty(fn, kCustomPromisifiedSymbol, {
        value: fn,
        enumerable: false,
        writable: false,
        configurable: true
      });
      return fn;
    }

    function fn() {
      var promiseResolve, promiseReject;
      var promise = new Promise(function (resolve, reject) {
        promiseResolve = resolve;
        promiseReject = reject;
      });
      var args = [];

      for (var i = 0; i < arguments.length; i++) {
        args.push(arguments[i]);
      }

      args.push(function (err, value) {
        if (err) {
          promiseReject(err);
        } else {
          promiseResolve(value);
        }
      });

      try {
        original.apply(this, args);
      } catch (err) {
        promiseReject(err);
      }

      return promise;
    }

    Object.setPrototypeOf(fn, Object.getPrototypeOf(original));
    if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {
      value: fn,
      enumerable: false,
      writable: false,
      configurable: true
    });
    return Object.defineProperties(fn, getOwnPropertyDescriptors(original));
  };

  exports.promisify.custom = kCustomPromisifiedSymbol;

  function callbackifyOnRejected(reason, cb) {
    // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).
    // Because `null` is a special error value in callbacks which means "no error
    // occurred", we error-wrap so the callback consumer can distinguish between
    // "the promise rejected with null" or "the promise fulfilled with undefined".
    if (!reason) {
      var newReason = new Error('Promise was rejected with a falsy value');
      newReason.reason = reason;
      reason = newReason;
    }

    return cb(reason);
  }

  function callbackify(original) {
    if (typeof original !== 'function') {
      throw new TypeError('The "original" argument must be of type Function');
    } // We DO NOT return the promise as it gives the user a false sense that
    // the promise is actually somehow related to the callback's execution
    // and that the callback throwing will reject the promise.


    function callbackified() {
      var args = [];

      for (var i = 0; i < arguments.length; i++) {
        args.push(arguments[i]);
      }

      var maybeCb = args.pop();

      if (typeof maybeCb !== 'function') {
        throw new TypeError('The last argument must be of type Function');
      }

      var self = this;

      var cb = function () {
        return maybeCb.apply(self, arguments);
      }; // In true node style we process the callback on `nextTick` with all the
      // implications (stack, `uncaughtException`, `async_hooks`)


      original.apply(this, args).then(function (ret) {
        process.nextTick(cb, null, ret);
      }, function (rej) {
        process.nextTick(callbackifyOnRejected, rej, cb);
      });
    }

    Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));
    Object.defineProperties(callbackified, getOwnPropertyDescriptors(original));
    return callbackified;
  }

  exports.callbackify = callbackify;
})(util$1); // for now just expose the builtin process global from node.js


var process$1 = commonjsGlobal.process;
var buffer = {};
var base64Js = {};
base64Js.byteLength = byteLength;
base64Js.toByteArray = toByteArray;
base64Js.fromByteArray = fromByteArray;
var lookup = [];
var revLookup = [];
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;
var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i];
  revLookup[code.charCodeAt(i)] = i;
} // Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications


revLookup['-'.charCodeAt(0)] = 62;
revLookup['_'.charCodeAt(0)] = 63;

function getLens(b64) {
  var len = b64.length;

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4');
  } // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42


  var validLen = b64.indexOf('=');
  if (validLen === -1) validLen = len;
  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;
  return [validLen, placeHoldersLen];
} // base64 is 4/3 + up to two characters of the original data


function byteLength(b64) {
  var lens = getLens(b64);
  var validLen = lens[0];
  var placeHoldersLen = lens[1];
  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
}

function _byteLength(b64, validLen, placeHoldersLen) {
  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
}

function toByteArray(b64) {
  var tmp;
  var lens = getLens(b64);
  var validLen = lens[0];
  var placeHoldersLen = lens[1];
  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));
  var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars

  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;
  var i;

  for (i = 0; i < len; i += 4) {
    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];
    arr[curByte++] = tmp >> 16 & 0xFF;
    arr[curByte++] = tmp >> 8 & 0xFF;
    arr[curByte++] = tmp & 0xFF;
  }

  if (placeHoldersLen === 2) {
    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;
    arr[curByte++] = tmp & 0xFF;
  }

  if (placeHoldersLen === 1) {
    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;
    arr[curByte++] = tmp >> 8 & 0xFF;
    arr[curByte++] = tmp & 0xFF;
  }

  return arr;
}

function tripletToBase64(num) {
  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];
}

function encodeChunk(uint8, start, end) {
  var tmp;
  var output = [];

  for (var i = start; i < end; i += 3) {
    tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);
    output.push(tripletToBase64(tmp));
  }

  return output.join('');
}

function fromByteArray(uint8) {
  var tmp;
  var len = uint8.length;
  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes

  var parts = [];
  var maxChunkLength = 16383; // must be multiple of 3
  // go through the array every three bytes, we'll deal with trailing stuff later

  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));
  } // pad the end with zeros, but make sure to not forget the extra bytes


  if (extraBytes === 1) {
    tmp = uint8[len - 1];
    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1];
    parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');
  }

  return parts.join('');
}

var ieee754 = {};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */

ieee754.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m;
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var nBits = -7;
  var i = isLE ? nBytes - 1 : 0;
  var d = isLE ? -1 : 1;
  var s = buffer[offset + i];
  i += d;
  e = s & (1 << -nBits) - 1;
  s >>= -nBits;
  nBits += eLen;

  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & (1 << -nBits) - 1;
  e >>= -nBits;
  nBits += mLen;

  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias;
  } else if (e === eMax) {
    return m ? NaN : (s ? -1 : 1) * Infinity;
  } else {
    m = m + Math.pow(2, mLen);
    e = e - eBias;
  }

  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);
};

ieee754.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c;
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;
  var i = isLE ? 0 : nBytes - 1;
  var d = isLE ? 1 : -1;
  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;
  value = Math.abs(value);

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0;
    e = eMax;
  } else {
    e = Math.floor(Math.log(value) / Math.LN2);

    if (value * (c = Math.pow(2, -e)) < 1) {
      e--;
      c *= 2;
    }

    if (e + eBias >= 1) {
      value += rt / c;
    } else {
      value += rt * Math.pow(2, 1 - eBias);
    }

    if (value * c >= 2) {
      e++;
      c /= 2;
    }

    if (e + eBias >= eMax) {
      m = 0;
      e = eMax;
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen);
      e = e + eBias;
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);
      e = 0;
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = e << mLen | m;
  eLen += mLen;

  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128;
};

var toString = {}.toString;

var isarray = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */


(function (exports) {
  var base64 = base64Js;
  var ieee754$1 = ieee754;
  var isArray = isarray;
  exports.Buffer = Buffer;
  exports.SlowBuffer = SlowBuffer;
  exports.INSPECT_MAX_BYTES = 50;
  /**
   * If `Buffer.TYPED_ARRAY_SUPPORT`:
   *   === true    Use Uint8Array implementation (fastest)
   *   === false   Use Object implementation (most compatible, even IE6)
   *
   * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
   * Opera 11.6+, iOS 4.2+.
   *
   * Due to various browser bugs, sometimes the Object implementation will be used even
   * when the browser supports typed arrays.
   *
   * Note:
   *
   *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
   *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
   *
   *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
   *
   *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
   *     incorrect length in some situations.
  
   * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
   * get the Object implementation, which is slower but behaves correctly.
   */

  Buffer.TYPED_ARRAY_SUPPORT = commonjsGlobal.TYPED_ARRAY_SUPPORT !== undefined ? commonjsGlobal.TYPED_ARRAY_SUPPORT : typedArraySupport();
  /*
   * Export kMaxLength after typed array support is determined.
   */

  exports.kMaxLength = kMaxLength();

  function typedArraySupport() {
    try {
      var arr = new Uint8Array(1);
      arr.__proto__ = {
        __proto__: Uint8Array.prototype,
        foo: function () {
          return 42;
        }
      };
      return arr.foo() === 42 && // typed array instances can be augmented
      typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
      arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`
    } catch (e) {
      return false;
    }
  }

  function kMaxLength() {
    return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;
  }

  function createBuffer(that, length) {
    if (kMaxLength() < length) {
      throw new RangeError('Invalid typed array length');
    }

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      // Return an augmented `Uint8Array` instance, for best performance
      that = new Uint8Array(length);
      that.__proto__ = Buffer.prototype;
    } else {
      // Fallback: Return an object instance of the Buffer class
      if (that === null) {
        that = new Buffer(length);
      }

      that.length = length;
    }

    return that;
  }
  /**
   * The Buffer constructor returns instances of `Uint8Array` that have their
   * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
   * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
   * and the `Uint8Array` methods. Square bracket notation works as expected -- it
   * returns a single octet.
   *
   * The `Uint8Array` prototype remains unmodified.
   */


  function Buffer(arg, encodingOrOffset, length) {
    if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
      return new Buffer(arg, encodingOrOffset, length);
    } // Common case.


    if (typeof arg === 'number') {
      if (typeof encodingOrOffset === 'string') {
        throw new Error('If encoding is specified then the first argument must be a string');
      }

      return allocUnsafe(this, arg);
    }

    return from(this, arg, encodingOrOffset, length);
  }

  Buffer.poolSize = 8192; // not used by this implementation
  // TODO: Legacy, not needed anymore. Remove in next major version.

  Buffer._augment = function (arr) {
    arr.__proto__ = Buffer.prototype;
    return arr;
  };

  function from(that, value, encodingOrOffset, length) {
    if (typeof value === 'number') {
      throw new TypeError('"value" argument must not be a number');
    }

    if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
      return fromArrayBuffer(that, value, encodingOrOffset, length);
    }

    if (typeof value === 'string') {
      return fromString(that, value, encodingOrOffset);
    }

    return fromObject(that, value);
  }
  /**
   * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
   * if value is a number.
   * Buffer.from(str[, encoding])
   * Buffer.from(array)
   * Buffer.from(buffer)
   * Buffer.from(arrayBuffer[, byteOffset[, length]])
   **/


  Buffer.from = function (value, encodingOrOffset, length) {
    return from(null, value, encodingOrOffset, length);
  };

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    Buffer.prototype.__proto__ = Uint8Array.prototype;
    Buffer.__proto__ = Uint8Array;

    if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {
      // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
      Object.defineProperty(Buffer, Symbol.species, {
        value: null,
        configurable: true
      });
    }
  }

  function assertSize(size) {
    if (typeof size !== 'number') {
      throw new TypeError('"size" argument must be a number');
    } else if (size < 0) {
      throw new RangeError('"size" argument must not be negative');
    }
  }

  function alloc(that, size, fill, encoding) {
    assertSize(size);

    if (size <= 0) {
      return createBuffer(that, size);
    }

    if (fill !== undefined) {
      // Only pay attention to encoding if it's a string. This
      // prevents accidentally sending in a number that would
      // be interpretted as a start offset.
      return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);
    }

    return createBuffer(that, size);
  }
  /**
   * Creates a new filled Buffer instance.
   * alloc(size[, fill[, encoding]])
   **/


  Buffer.alloc = function (size, fill, encoding) {
    return alloc(null, size, fill, encoding);
  };

  function allocUnsafe(that, size) {
    assertSize(size);
    that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);

    if (!Buffer.TYPED_ARRAY_SUPPORT) {
      for (var i = 0; i < size; ++i) {
        that[i] = 0;
      }
    }

    return that;
  }
  /**
   * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
   * */


  Buffer.allocUnsafe = function (size) {
    return allocUnsafe(null, size);
  };
  /**
   * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
   */


  Buffer.allocUnsafeSlow = function (size) {
    return allocUnsafe(null, size);
  };

  function fromString(that, string, encoding) {
    if (typeof encoding !== 'string' || encoding === '') {
      encoding = 'utf8';
    }

    if (!Buffer.isEncoding(encoding)) {
      throw new TypeError('"encoding" must be a valid string encoding');
    }

    var length = byteLength(string, encoding) | 0;
    that = createBuffer(that, length);
    var actual = that.write(string, encoding);

    if (actual !== length) {
      // Writing a hex string, for example, that contains invalid characters will
      // cause everything after the first invalid character to be ignored. (e.g.
      // 'abxxcd' will be treated as 'ab')
      that = that.slice(0, actual);
    }

    return that;
  }

  function fromArrayLike(that, array) {
    var length = array.length < 0 ? 0 : checked(array.length) | 0;
    that = createBuffer(that, length);

    for (var i = 0; i < length; i += 1) {
      that[i] = array[i] & 255;
    }

    return that;
  }

  function fromArrayBuffer(that, array, byteOffset, length) {
    array.byteLength; // this throws if `array` is not a valid ArrayBuffer

    if (byteOffset < 0 || array.byteLength < byteOffset) {
      throw new RangeError('\'offset\' is out of bounds');
    }

    if (array.byteLength < byteOffset + (length || 0)) {
      throw new RangeError('\'length\' is out of bounds');
    }

    if (byteOffset === undefined && length === undefined) {
      array = new Uint8Array(array);
    } else if (length === undefined) {
      array = new Uint8Array(array, byteOffset);
    } else {
      array = new Uint8Array(array, byteOffset, length);
    }

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      // Return an augmented `Uint8Array` instance, for best performance
      that = array;
      that.__proto__ = Buffer.prototype;
    } else {
      // Fallback: Return an object instance of the Buffer class
      that = fromArrayLike(that, array);
    }

    return that;
  }

  function fromObject(that, obj) {
    if (Buffer.isBuffer(obj)) {
      var len = checked(obj.length) | 0;
      that = createBuffer(that, len);

      if (that.length === 0) {
        return that;
      }

      obj.copy(that, 0, 0, len);
      return that;
    }

    if (obj) {
      if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {
        if (typeof obj.length !== 'number' || isnan(obj.length)) {
          return createBuffer(that, 0);
        }

        return fromArrayLike(that, obj);
      }

      if (obj.type === 'Buffer' && isArray(obj.data)) {
        return fromArrayLike(that, obj.data);
      }
    }

    throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');
  }

  function checked(length) {
    // Note: cannot use `length < kMaxLength()` here because that fails when
    // length is NaN (which is otherwise coerced to zero.)
    if (length >= kMaxLength()) {
      throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');
    }

    return length | 0;
  }

  function SlowBuffer(length) {
    if (+length != length) {
      // eslint-disable-line eqeqeq
      length = 0;
    }

    return Buffer.alloc(+length);
  }

  Buffer.isBuffer = function isBuffer(b) {
    return !!(b != null && b._isBuffer);
  };

  Buffer.compare = function compare(a, b) {
    if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
      throw new TypeError('Arguments must be Buffers');
    }

    if (a === b) return 0;
    var x = a.length;
    var y = b.length;

    for (var i = 0, len = Math.min(x, y); i < len; ++i) {
      if (a[i] !== b[i]) {
        x = a[i];
        y = b[i];
        break;
      }
    }

    if (x < y) return -1;
    if (y < x) return 1;
    return 0;
  };

  Buffer.isEncoding = function isEncoding(encoding) {
    switch (String(encoding).toLowerCase()) {
      case 'hex':
      case 'utf8':
      case 'utf-8':
      case 'ascii':
      case 'latin1':
      case 'binary':
      case 'base64':
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return true;

      default:
        return false;
    }
  };

  Buffer.concat = function concat(list, length) {
    if (!isArray(list)) {
      throw new TypeError('"list" argument must be an Array of Buffers');
    }

    if (list.length === 0) {
      return Buffer.alloc(0);
    }

    var i;

    if (length === undefined) {
      length = 0;

      for (i = 0; i < list.length; ++i) {
        length += list[i].length;
      }
    }

    var buffer = Buffer.allocUnsafe(length);
    var pos = 0;

    for (i = 0; i < list.length; ++i) {
      var buf = list[i];

      if (!Buffer.isBuffer(buf)) {
        throw new TypeError('"list" argument must be an Array of Buffers');
      }

      buf.copy(buffer, pos);
      pos += buf.length;
    }

    return buffer;
  };

  function byteLength(string, encoding) {
    if (Buffer.isBuffer(string)) {
      return string.length;
    }

    if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
      return string.byteLength;
    }

    if (typeof string !== 'string') {
      string = '' + string;
    }

    var len = string.length;
    if (len === 0) return 0; // Use a for loop to avoid recursion

    var loweredCase = false;

    for (;;) {
      switch (encoding) {
        case 'ascii':
        case 'latin1':
        case 'binary':
          return len;

        case 'utf8':
        case 'utf-8':
        case undefined:
          return utf8ToBytes(string).length;

        case 'ucs2':
        case 'ucs-2':
        case 'utf16le':
        case 'utf-16le':
          return len * 2;

        case 'hex':
          return len >>> 1;

        case 'base64':
          return base64ToBytes(string).length;

        default:
          if (loweredCase) return utf8ToBytes(string).length; // assume utf8

          encoding = ('' + encoding).toLowerCase();
          loweredCase = true;
      }
    }
  }

  Buffer.byteLength = byteLength;

  function slowToString(encoding, start, end) {
    var loweredCase = false; // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
    // property of a typed array.
    // This behaves neither like String nor Uint8Array in that we set start/end
    // to their upper/lower bounds if the value passed is out of range.
    // undefined is handled specially as per ECMA-262 6th Edition,
    // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.

    if (start === undefined || start < 0) {
      start = 0;
    } // Return early if start > this.length. Done here to prevent potential uint32
    // coercion fail below.


    if (start > this.length) {
      return '';
    }

    if (end === undefined || end > this.length) {
      end = this.length;
    }

    if (end <= 0) {
      return '';
    } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.


    end >>>= 0;
    start >>>= 0;

    if (end <= start) {
      return '';
    }

    if (!encoding) encoding = 'utf8';

    while (true) {
      switch (encoding) {
        case 'hex':
          return hexSlice(this, start, end);

        case 'utf8':
        case 'utf-8':
          return utf8Slice(this, start, end);

        case 'ascii':
          return asciiSlice(this, start, end);

        case 'latin1':
        case 'binary':
          return latin1Slice(this, start, end);

        case 'base64':
          return base64Slice(this, start, end);

        case 'ucs2':
        case 'ucs-2':
        case 'utf16le':
        case 'utf-16le':
          return utf16leSlice(this, start, end);

        default:
          if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);
          encoding = (encoding + '').toLowerCase();
          loweredCase = true;
      }
    }
  } // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
  // Buffer instances.


  Buffer.prototype._isBuffer = true;

  function swap(b, n, m) {
    var i = b[n];
    b[n] = b[m];
    b[m] = i;
  }

  Buffer.prototype.swap16 = function swap16() {
    var len = this.length;

    if (len % 2 !== 0) {
      throw new RangeError('Buffer size must be a multiple of 16-bits');
    }

    for (var i = 0; i < len; i += 2) {
      swap(this, i, i + 1);
    }

    return this;
  };

  Buffer.prototype.swap32 = function swap32() {
    var len = this.length;

    if (len % 4 !== 0) {
      throw new RangeError('Buffer size must be a multiple of 32-bits');
    }

    for (var i = 0; i < len; i += 4) {
      swap(this, i, i + 3);
      swap(this, i + 1, i + 2);
    }

    return this;
  };

  Buffer.prototype.swap64 = function swap64() {
    var len = this.length;

    if (len % 8 !== 0) {
      throw new RangeError('Buffer size must be a multiple of 64-bits');
    }

    for (var i = 0; i < len; i += 8) {
      swap(this, i, i + 7);
      swap(this, i + 1, i + 6);
      swap(this, i + 2, i + 5);
      swap(this, i + 3, i + 4);
    }

    return this;
  };

  Buffer.prototype.toString = function toString() {
    var length = this.length | 0;
    if (length === 0) return '';
    if (arguments.length === 0) return utf8Slice(this, 0, length);
    return slowToString.apply(this, arguments);
  };

  Buffer.prototype.equals = function equals(b) {
    if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');
    if (this === b) return true;
    return Buffer.compare(this, b) === 0;
  };

  Buffer.prototype.inspect = function inspect() {
    var str = '';
    var max = exports.INSPECT_MAX_BYTES;

    if (this.length > 0) {
      str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');
      if (this.length > max) str += ' ... ';
    }

    return '<Buffer ' + str + '>';
  };

  Buffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {
    if (!Buffer.isBuffer(target)) {
      throw new TypeError('Argument must be a Buffer');
    }

    if (start === undefined) {
      start = 0;
    }

    if (end === undefined) {
      end = target ? target.length : 0;
    }

    if (thisStart === undefined) {
      thisStart = 0;
    }

    if (thisEnd === undefined) {
      thisEnd = this.length;
    }

    if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
      throw new RangeError('out of range index');
    }

    if (thisStart >= thisEnd && start >= end) {
      return 0;
    }

    if (thisStart >= thisEnd) {
      return -1;
    }

    if (start >= end) {
      return 1;
    }

    start >>>= 0;
    end >>>= 0;
    thisStart >>>= 0;
    thisEnd >>>= 0;
    if (this === target) return 0;
    var x = thisEnd - thisStart;
    var y = end - start;
    var len = Math.min(x, y);
    var thisCopy = this.slice(thisStart, thisEnd);
    var targetCopy = target.slice(start, end);

    for (var i = 0; i < len; ++i) {
      if (thisCopy[i] !== targetCopy[i]) {
        x = thisCopy[i];
        y = targetCopy[i];
        break;
      }
    }

    if (x < y) return -1;
    if (y < x) return 1;
    return 0;
  }; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
  // OR the last index of `val` in `buffer` at offset <= `byteOffset`.
  //
  // Arguments:
  // - buffer - a Buffer to search
  // - val - a string, Buffer, or number
  // - byteOffset - an index into `buffer`; will be clamped to an int32
  // - encoding - an optional encoding, relevant is val is a string
  // - dir - true for indexOf, false for lastIndexOf


  function bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {
    // Empty buffer means no match
    if (buffer.length === 0) return -1; // Normalize byteOffset

    if (typeof byteOffset === 'string') {
      encoding = byteOffset;
      byteOffset = 0;
    } else if (byteOffset > 0x7fffffff) {
      byteOffset = 0x7fffffff;
    } else if (byteOffset < -0x80000000) {
      byteOffset = -0x80000000;
    }

    byteOffset = +byteOffset; // Coerce to Number.

    if (isNaN(byteOffset)) {
      // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
      byteOffset = dir ? 0 : buffer.length - 1;
    } // Normalize byteOffset: negative offsets start from the end of the buffer


    if (byteOffset < 0) byteOffset = buffer.length + byteOffset;

    if (byteOffset >= buffer.length) {
      if (dir) return -1;else byteOffset = buffer.length - 1;
    } else if (byteOffset < 0) {
      if (dir) byteOffset = 0;else return -1;
    } // Normalize val


    if (typeof val === 'string') {
      val = Buffer.from(val, encoding);
    } // Finally, search either indexOf (if dir is true) or lastIndexOf


    if (Buffer.isBuffer(val)) {
      // Special case: looking for empty string/buffer always fails
      if (val.length === 0) {
        return -1;
      }

      return arrayIndexOf(buffer, val, byteOffset, encoding, dir);
    } else if (typeof val === 'number') {
      val = val & 0xFF; // Search for a byte value [0-255]

      if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {
        if (dir) {
          return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);
        } else {
          return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);
        }
      }

      return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);
    }

    throw new TypeError('val must be string, number or Buffer');
  }

  function arrayIndexOf(arr, val, byteOffset, encoding, dir) {
    var indexSize = 1;
    var arrLength = arr.length;
    var valLength = val.length;

    if (encoding !== undefined) {
      encoding = String(encoding).toLowerCase();

      if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {
        if (arr.length < 2 || val.length < 2) {
          return -1;
        }

        indexSize = 2;
        arrLength /= 2;
        valLength /= 2;
        byteOffset /= 2;
      }
    }

    function read(buf, i) {
      if (indexSize === 1) {
        return buf[i];
      } else {
        return buf.readUInt16BE(i * indexSize);
      }
    }

    var i;

    if (dir) {
      var foundIndex = -1;

      for (i = byteOffset; i < arrLength; i++) {
        if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
          if (foundIndex === -1) foundIndex = i;
          if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;
        } else {
          if (foundIndex !== -1) i -= i - foundIndex;
          foundIndex = -1;
        }
      }
    } else {
      if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;

      for (i = byteOffset; i >= 0; i--) {
        var found = true;

        for (var j = 0; j < valLength; j++) {
          if (read(arr, i + j) !== read(val, j)) {
            found = false;
            break;
          }
        }

        if (found) return i;
      }
    }

    return -1;
  }

  Buffer.prototype.includes = function includes(val, byteOffset, encoding) {
    return this.indexOf(val, byteOffset, encoding) !== -1;
  };

  Buffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {
    return bidirectionalIndexOf(this, val, byteOffset, encoding, true);
  };

  Buffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {
    return bidirectionalIndexOf(this, val, byteOffset, encoding, false);
  };

  function hexWrite(buf, string, offset, length) {
    offset = Number(offset) || 0;
    var remaining = buf.length - offset;

    if (!length) {
      length = remaining;
    } else {
      length = Number(length);

      if (length > remaining) {
        length = remaining;
      }
    } // must be an even number of digits


    var strLen = string.length;
    if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');

    if (length > strLen / 2) {
      length = strLen / 2;
    }

    for (var i = 0; i < length; ++i) {
      var parsed = parseInt(string.substr(i * 2, 2), 16);
      if (isNaN(parsed)) return i;
      buf[offset + i] = parsed;
    }

    return i;
  }

  function utf8Write(buf, string, offset, length) {
    return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);
  }

  function asciiWrite(buf, string, offset, length) {
    return blitBuffer(asciiToBytes(string), buf, offset, length);
  }

  function latin1Write(buf, string, offset, length) {
    return asciiWrite(buf, string, offset, length);
  }

  function base64Write(buf, string, offset, length) {
    return blitBuffer(base64ToBytes(string), buf, offset, length);
  }

  function ucs2Write(buf, string, offset, length) {
    return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);
  }

  Buffer.prototype.write = function write(string, offset, length, encoding) {
    // Buffer#write(string)
    if (offset === undefined) {
      encoding = 'utf8';
      length = this.length;
      offset = 0; // Buffer#write(string, encoding)
    } else if (length === undefined && typeof offset === 'string') {
      encoding = offset;
      length = this.length;
      offset = 0; // Buffer#write(string, offset[, length][, encoding])
    } else if (isFinite(offset)) {
      offset = offset | 0;

      if (isFinite(length)) {
        length = length | 0;
        if (encoding === undefined) encoding = 'utf8';
      } else {
        encoding = length;
        length = undefined;
      } // legacy write(string, encoding, offset, length) - remove in v0.13

    } else {
      throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');
    }

    var remaining = this.length - offset;
    if (length === undefined || length > remaining) length = remaining;

    if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {
      throw new RangeError('Attempt to write outside buffer bounds');
    }

    if (!encoding) encoding = 'utf8';
    var loweredCase = false;

    for (;;) {
      switch (encoding) {
        case 'hex':
          return hexWrite(this, string, offset, length);

        case 'utf8':
        case 'utf-8':
          return utf8Write(this, string, offset, length);

        case 'ascii':
          return asciiWrite(this, string, offset, length);

        case 'latin1':
        case 'binary':
          return latin1Write(this, string, offset, length);

        case 'base64':
          // Warning: maxLength not taken into account in base64Write
          return base64Write(this, string, offset, length);

        case 'ucs2':
        case 'ucs-2':
        case 'utf16le':
        case 'utf-16le':
          return ucs2Write(this, string, offset, length);

        default:
          if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);
          encoding = ('' + encoding).toLowerCase();
          loweredCase = true;
      }
    }
  };

  Buffer.prototype.toJSON = function toJSON() {
    return {
      type: 'Buffer',
      data: Array.prototype.slice.call(this._arr || this, 0)
    };
  };

  function base64Slice(buf, start, end) {
    if (start === 0 && end === buf.length) {
      return base64.fromByteArray(buf);
    } else {
      return base64.fromByteArray(buf.slice(start, end));
    }
  }

  function utf8Slice(buf, start, end) {
    end = Math.min(buf.length, end);
    var res = [];
    var i = start;

    while (i < end) {
      var firstByte = buf[i];
      var codePoint = null;
      var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;

      if (i + bytesPerSequence <= end) {
        var secondByte, thirdByte, fourthByte, tempCodePoint;

        switch (bytesPerSequence) {
          case 1:
            if (firstByte < 0x80) {
              codePoint = firstByte;
            }

            break;

          case 2:
            secondByte = buf[i + 1];

            if ((secondByte & 0xC0) === 0x80) {
              tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;

              if (tempCodePoint > 0x7F) {
                codePoint = tempCodePoint;
              }
            }

            break;

          case 3:
            secondByte = buf[i + 1];
            thirdByte = buf[i + 2];

            if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
              tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;

              if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
                codePoint = tempCodePoint;
              }
            }

            break;

          case 4:
            secondByte = buf[i + 1];
            thirdByte = buf[i + 2];
            fourthByte = buf[i + 3];

            if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
              tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;

              if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
                codePoint = tempCodePoint;
              }
            }

        }
      }

      if (codePoint === null) {
        // we did not generate a valid codePoint so insert a
        // replacement char (U+FFFD) and advance only 1 byte
        codePoint = 0xFFFD;
        bytesPerSequence = 1;
      } else if (codePoint > 0xFFFF) {
        // encode to utf16 (surrogate pair dance)
        codePoint -= 0x10000;
        res.push(codePoint >>> 10 & 0x3FF | 0xD800);
        codePoint = 0xDC00 | codePoint & 0x3FF;
      }

      res.push(codePoint);
      i += bytesPerSequence;
    }

    return decodeCodePointsArray(res);
  } // Based on http://stackoverflow.com/a/22747272/680742, the browser with
  // the lowest limit is Chrome, with 0x10000 args.
  // We go 1 magnitude less, for safety


  var MAX_ARGUMENTS_LENGTH = 0x1000;

  function decodeCodePointsArray(codePoints) {
    var len = codePoints.length;

    if (len <= MAX_ARGUMENTS_LENGTH) {
      return String.fromCharCode.apply(String, codePoints); // avoid extra slice()
    } // Decode in chunks to avoid "call stack size exceeded".


    var res = '';
    var i = 0;

    while (i < len) {
      res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));
    }

    return res;
  }

  function asciiSlice(buf, start, end) {
    var ret = '';
    end = Math.min(buf.length, end);

    for (var i = start; i < end; ++i) {
      ret += String.fromCharCode(buf[i] & 0x7F);
    }

    return ret;
  }

  function latin1Slice(buf, start, end) {
    var ret = '';
    end = Math.min(buf.length, end);

    for (var i = start; i < end; ++i) {
      ret += String.fromCharCode(buf[i]);
    }

    return ret;
  }

  function hexSlice(buf, start, end) {
    var len = buf.length;
    if (!start || start < 0) start = 0;
    if (!end || end < 0 || end > len) end = len;
    var out = '';

    for (var i = start; i < end; ++i) {
      out += toHex(buf[i]);
    }

    return out;
  }

  function utf16leSlice(buf, start, end) {
    var bytes = buf.slice(start, end);
    var res = '';

    for (var i = 0; i < bytes.length; i += 2) {
      res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);
    }

    return res;
  }

  Buffer.prototype.slice = function slice(start, end) {
    var len = this.length;
    start = ~~start;
    end = end === undefined ? len : ~~end;

    if (start < 0) {
      start += len;
      if (start < 0) start = 0;
    } else if (start > len) {
      start = len;
    }

    if (end < 0) {
      end += len;
      if (end < 0) end = 0;
    } else if (end > len) {
      end = len;
    }

    if (end < start) end = start;
    var newBuf;

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      newBuf = this.subarray(start, end);
      newBuf.__proto__ = Buffer.prototype;
    } else {
      var sliceLen = end - start;
      newBuf = new Buffer(sliceLen, undefined);

      for (var i = 0; i < sliceLen; ++i) {
        newBuf[i] = this[i + start];
      }
    }

    return newBuf;
  };
  /*
   * Need to make sure that buffer isn't trying to write out of bounds.
   */


  function checkOffset(offset, ext, length) {
    if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');
    if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');
  }

  Buffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {
    offset = offset | 0;
    byteLength = byteLength | 0;
    if (!noAssert) checkOffset(offset, byteLength, this.length);
    var val = this[offset];
    var mul = 1;
    var i = 0;

    while (++i < byteLength && (mul *= 0x100)) {
      val += this[offset + i] * mul;
    }

    return val;
  };

  Buffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {
    offset = offset | 0;
    byteLength = byteLength | 0;

    if (!noAssert) {
      checkOffset(offset, byteLength, this.length);
    }

    var val = this[offset + --byteLength];
    var mul = 1;

    while (byteLength > 0 && (mul *= 0x100)) {
      val += this[offset + --byteLength] * mul;
    }

    return val;
  };

  Buffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 1, this.length);
    return this[offset];
  };

  Buffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 2, this.length);
    return this[offset] | this[offset + 1] << 8;
  };

  Buffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 2, this.length);
    return this[offset] << 8 | this[offset + 1];
  };

  Buffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length);
    return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;
  };

  Buffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length);
    return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);
  };

  Buffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {
    offset = offset | 0;
    byteLength = byteLength | 0;
    if (!noAssert) checkOffset(offset, byteLength, this.length);
    var val = this[offset];
    var mul = 1;
    var i = 0;

    while (++i < byteLength && (mul *= 0x100)) {
      val += this[offset + i] * mul;
    }

    mul *= 0x80;
    if (val >= mul) val -= Math.pow(2, 8 * byteLength);
    return val;
  };

  Buffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {
    offset = offset | 0;
    byteLength = byteLength | 0;
    if (!noAssert) checkOffset(offset, byteLength, this.length);
    var i = byteLength;
    var mul = 1;
    var val = this[offset + --i];

    while (i > 0 && (mul *= 0x100)) {
      val += this[offset + --i] * mul;
    }

    mul *= 0x80;
    if (val >= mul) val -= Math.pow(2, 8 * byteLength);
    return val;
  };

  Buffer.prototype.readInt8 = function readInt8(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 1, this.length);
    if (!(this[offset] & 0x80)) return this[offset];
    return (0xff - this[offset] + 1) * -1;
  };

  Buffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 2, this.length);
    var val = this[offset] | this[offset + 1] << 8;
    return val & 0x8000 ? val | 0xFFFF0000 : val;
  };

  Buffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 2, this.length);
    var val = this[offset + 1] | this[offset] << 8;
    return val & 0x8000 ? val | 0xFFFF0000 : val;
  };

  Buffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length);
    return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;
  };

  Buffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length);
    return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];
  };

  Buffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length);
    return ieee754$1.read(this, offset, true, 23, 4);
  };

  Buffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length);
    return ieee754$1.read(this, offset, false, 23, 4);
  };

  Buffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 8, this.length);
    return ieee754$1.read(this, offset, true, 52, 8);
  };

  Buffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {
    if (!noAssert) checkOffset(offset, 8, this.length);
    return ieee754$1.read(this, offset, false, 52, 8);
  };

  function checkInt(buf, value, offset, ext, max, min) {
    if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance');
    if (value > max || value < min) throw new RangeError('"value" argument is out of bounds');
    if (offset + ext > buf.length) throw new RangeError('Index out of range');
  }

  Buffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {
    value = +value;
    offset = offset | 0;
    byteLength = byteLength | 0;

    if (!noAssert) {
      var maxBytes = Math.pow(2, 8 * byteLength) - 1;
      checkInt(this, value, offset, byteLength, maxBytes, 0);
    }

    var mul = 1;
    var i = 0;
    this[offset] = value & 0xFF;

    while (++i < byteLength && (mul *= 0x100)) {
      this[offset + i] = value / mul & 0xFF;
    }

    return offset + byteLength;
  };

  Buffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {
    value = +value;
    offset = offset | 0;
    byteLength = byteLength | 0;

    if (!noAssert) {
      var maxBytes = Math.pow(2, 8 * byteLength) - 1;
      checkInt(this, value, offset, byteLength, maxBytes, 0);
    }

    var i = byteLength - 1;
    var mul = 1;
    this[offset + i] = value & 0xFF;

    while (--i >= 0 && (mul *= 0x100)) {
      this[offset + i] = value / mul & 0xFF;
    }

    return offset + byteLength;
  };

  Buffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {
    value = +value;
    offset = offset | 0;
    if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);
    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);
    this[offset] = value & 0xff;
    return offset + 1;
  };

  function objectWriteUInt16(buf, value, offset, littleEndian) {
    if (value < 0) value = 0xffff + value + 1;

    for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
      buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;
    }
  }

  Buffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {
    value = +value;
    offset = offset | 0;
    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      this[offset] = value & 0xff;
      this[offset + 1] = value >>> 8;
    } else {
      objectWriteUInt16(this, value, offset, true);
    }

    return offset + 2;
  };

  Buffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {
    value = +value;
    offset = offset | 0;
    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      this[offset] = value >>> 8;
      this[offset + 1] = value & 0xff;
    } else {
      objectWriteUInt16(this, value, offset, false);
    }

    return offset + 2;
  };

  function objectWriteUInt32(buf, value, offset, littleEndian) {
    if (value < 0) value = 0xffffffff + value + 1;

    for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
      buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;
    }
  }

  Buffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {
    value = +value;
    offset = offset | 0;
    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      this[offset + 3] = value >>> 24;
      this[offset + 2] = value >>> 16;
      this[offset + 1] = value >>> 8;
      this[offset] = value & 0xff;
    } else {
      objectWriteUInt32(this, value, offset, true);
    }

    return offset + 4;
  };

  Buffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {
    value = +value;
    offset = offset | 0;
    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      this[offset] = value >>> 24;
      this[offset + 1] = value >>> 16;
      this[offset + 2] = value >>> 8;
      this[offset + 3] = value & 0xff;
    } else {
      objectWriteUInt32(this, value, offset, false);
    }

    return offset + 4;
  };

  Buffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {
    value = +value;
    offset = offset | 0;

    if (!noAssert) {
      var limit = Math.pow(2, 8 * byteLength - 1);
      checkInt(this, value, offset, byteLength, limit - 1, -limit);
    }

    var i = 0;
    var mul = 1;
    var sub = 0;
    this[offset] = value & 0xFF;

    while (++i < byteLength && (mul *= 0x100)) {
      if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
        sub = 1;
      }

      this[offset + i] = (value / mul >> 0) - sub & 0xFF;
    }

    return offset + byteLength;
  };

  Buffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {
    value = +value;
    offset = offset | 0;

    if (!noAssert) {
      var limit = Math.pow(2, 8 * byteLength - 1);
      checkInt(this, value, offset, byteLength, limit - 1, -limit);
    }

    var i = byteLength - 1;
    var mul = 1;
    var sub = 0;
    this[offset + i] = value & 0xFF;

    while (--i >= 0 && (mul *= 0x100)) {
      if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
        sub = 1;
      }

      this[offset + i] = (value / mul >> 0) - sub & 0xFF;
    }

    return offset + byteLength;
  };

  Buffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {
    value = +value;
    offset = offset | 0;
    if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);
    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);
    if (value < 0) value = 0xff + value + 1;
    this[offset] = value & 0xff;
    return offset + 1;
  };

  Buffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {
    value = +value;
    offset = offset | 0;
    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      this[offset] = value & 0xff;
      this[offset + 1] = value >>> 8;
    } else {
      objectWriteUInt16(this, value, offset, true);
    }

    return offset + 2;
  };

  Buffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {
    value = +value;
    offset = offset | 0;
    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      this[offset] = value >>> 8;
      this[offset + 1] = value & 0xff;
    } else {
      objectWriteUInt16(this, value, offset, false);
    }

    return offset + 2;
  };

  Buffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {
    value = +value;
    offset = offset | 0;
    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      this[offset] = value & 0xff;
      this[offset + 1] = value >>> 8;
      this[offset + 2] = value >>> 16;
      this[offset + 3] = value >>> 24;
    } else {
      objectWriteUInt32(this, value, offset, true);
    }

    return offset + 4;
  };

  Buffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {
    value = +value;
    offset = offset | 0;
    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);
    if (value < 0) value = 0xffffffff + value + 1;

    if (Buffer.TYPED_ARRAY_SUPPORT) {
      this[offset] = value >>> 24;
      this[offset + 1] = value >>> 16;
      this[offset + 2] = value >>> 8;
      this[offset + 3] = value & 0xff;
    } else {
      objectWriteUInt32(this, value, offset, false);
    }

    return offset + 4;
  };

  function checkIEEE754(buf, value, offset, ext, max, min) {
    if (offset + ext > buf.length) throw new RangeError('Index out of range');
    if (offset < 0) throw new RangeError('Index out of range');
  }

  function writeFloat(buf, value, offset, littleEndian, noAssert) {
    if (!noAssert) {
      checkIEEE754(buf, value, offset, 4);
    }

    ieee754$1.write(buf, value, offset, littleEndian, 23, 4);
    return offset + 4;
  }

  Buffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {
    return writeFloat(this, value, offset, true, noAssert);
  };

  Buffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {
    return writeFloat(this, value, offset, false, noAssert);
  };

  function writeDouble(buf, value, offset, littleEndian, noAssert) {
    if (!noAssert) {
      checkIEEE754(buf, value, offset, 8);
    }

    ieee754$1.write(buf, value, offset, littleEndian, 52, 8);
    return offset + 8;
  }

  Buffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {
    return writeDouble(this, value, offset, true, noAssert);
  };

  Buffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {
    return writeDouble(this, value, offset, false, noAssert);
  }; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)


  Buffer.prototype.copy = function copy(target, targetStart, start, end) {
    if (!start) start = 0;
    if (!end && end !== 0) end = this.length;
    if (targetStart >= target.length) targetStart = target.length;
    if (!targetStart) targetStart = 0;
    if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done

    if (end === start) return 0;
    if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions

    if (targetStart < 0) {
      throw new RangeError('targetStart out of bounds');
    }

    if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');
    if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?

    if (end > this.length) end = this.length;

    if (target.length - targetStart < end - start) {
      end = target.length - targetStart + start;
    }

    var len = end - start;
    var i;

    if (this === target && start < targetStart && targetStart < end) {
      // descending copy from end
      for (i = len - 1; i >= 0; --i) {
        target[i + targetStart] = this[i + start];
      }
    } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
      // ascending copy from start
      for (i = 0; i < len; ++i) {
        target[i + targetStart] = this[i + start];
      }
    } else {
      Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);
    }

    return len;
  }; // Usage:
  //    buffer.fill(number[, offset[, end]])
  //    buffer.fill(buffer[, offset[, end]])
  //    buffer.fill(string[, offset[, end]][, encoding])


  Buffer.prototype.fill = function fill(val, start, end, encoding) {
    // Handle string cases:
    if (typeof val === 'string') {
      if (typeof start === 'string') {
        encoding = start;
        start = 0;
        end = this.length;
      } else if (typeof end === 'string') {
        encoding = end;
        end = this.length;
      }

      if (val.length === 1) {
        var code = val.charCodeAt(0);

        if (code < 256) {
          val = code;
        }
      }

      if (encoding !== undefined && typeof encoding !== 'string') {
        throw new TypeError('encoding must be a string');
      }

      if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
        throw new TypeError('Unknown encoding: ' + encoding);
      }
    } else if (typeof val === 'number') {
      val = val & 255;
    } // Invalid ranges are not set to a default, so can range check early.


    if (start < 0 || this.length < start || this.length < end) {
      throw new RangeError('Out of range index');
    }

    if (end <= start) {
      return this;
    }

    start = start >>> 0;
    end = end === undefined ? this.length : end >>> 0;
    if (!val) val = 0;
    var i;

    if (typeof val === 'number') {
      for (i = start; i < end; ++i) {
        this[i] = val;
      }
    } else {
      var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());
      var len = bytes.length;

      for (i = 0; i < end - start; ++i) {
        this[i + start] = bytes[i % len];
      }
    }

    return this;
  }; // HELPER FUNCTIONS
  // ================


  var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g;

  function base64clean(str) {
    // Node strips out invalid characters like \n and \t from the string, base64-js does not
    str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''

    if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not

    while (str.length % 4 !== 0) {
      str = str + '=';
    }

    return str;
  }

  function stringtrim(str) {
    if (str.trim) return str.trim();
    return str.replace(/^\s+|\s+$/g, '');
  }

  function toHex(n) {
    if (n < 16) return '0' + n.toString(16);
    return n.toString(16);
  }

  function utf8ToBytes(string, units) {
    units = units || Infinity;
    var codePoint;
    var length = string.length;
    var leadSurrogate = null;
    var bytes = [];

    for (var i = 0; i < length; ++i) {
      codePoint = string.charCodeAt(i); // is surrogate component

      if (codePoint > 0xD7FF && codePoint < 0xE000) {
        // last char was a lead
        if (!leadSurrogate) {
          // no lead yet
          if (codePoint > 0xDBFF) {
            // unexpected trail
            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);
            continue;
          } else if (i + 1 === length) {
            // unpaired lead
            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);
            continue;
          } // valid lead


          leadSurrogate = codePoint;
          continue;
        } // 2 leads in a row


        if (codePoint < 0xDC00) {
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);
          leadSurrogate = codePoint;
          continue;
        } // valid surrogate pair


        codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;
      } else if (leadSurrogate) {
        // valid bmp char, but last char was a lead
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);
      }

      leadSurrogate = null; // encode utf8

      if (codePoint < 0x80) {
        if ((units -= 1) < 0) break;
        bytes.push(codePoint);
      } else if (codePoint < 0x800) {
        if ((units -= 2) < 0) break;
        bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);
      } else if (codePoint < 0x10000) {
        if ((units -= 3) < 0) break;
        bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);
      } else if (codePoint < 0x110000) {
        if ((units -= 4) < 0) break;
        bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);
      } else {
        throw new Error('Invalid code point');
      }
    }

    return bytes;
  }

  function asciiToBytes(str) {
    var byteArray = [];

    for (var i = 0; i < str.length; ++i) {
      // Node's code seems to be doing this and not & 0x7F..
      byteArray.push(str.charCodeAt(i) & 0xFF);
    }

    return byteArray;
  }

  function utf16leToBytes(str, units) {
    var c, hi, lo;
    var byteArray = [];

    for (var i = 0; i < str.length; ++i) {
      if ((units -= 2) < 0) break;
      c = str.charCodeAt(i);
      hi = c >> 8;
      lo = c % 256;
      byteArray.push(lo);
      byteArray.push(hi);
    }

    return byteArray;
  }

  function base64ToBytes(str) {
    return base64.toByteArray(base64clean(str));
  }

  function blitBuffer(src, dst, offset, length) {
    for (var i = 0; i < length; ++i) {
      if (i + offset >= dst.length || i >= src.length) break;
      dst[i + offset] = src[i];
    }

    return i;
  }

  function isnan(val) {
    return val !== val; // eslint-disable-line no-self-compare
  }
})(buffer);

function BufferList() {
  this.head = null;
  this.tail = null;
  this.length = 0;
}

BufferList.prototype.push = function (v) {
  var entry = {
    data: v,
    next: null
  };
  if (this.length > 0) this.tail.next = entry;else this.head = entry;
  this.tail = entry;
  ++this.length;
};

BufferList.prototype.unshift = function (v) {
  var entry = {
    data: v,
    next: this.head
  };
  if (this.length === 0) this.tail = entry;
  this.head = entry;
  ++this.length;
};

BufferList.prototype.shift = function () {
  if (this.length === 0) return;
  var ret = this.head.data;
  if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;
  --this.length;
  return ret;
};

BufferList.prototype.clear = function () {
  this.head = this.tail = null;
  this.length = 0;
};

BufferList.prototype.join = function (s) {
  if (this.length === 0) return '';
  var p = this.head;
  var ret = '' + p.data;

  while (p = p.next) {
    ret += s + p.data;
  }

  return ret;
};

BufferList.prototype.concat = function (n) {
  if (this.length === 0) return buffer.Buffer.alloc(0);
  if (this.length === 1) return this.head.data;
  var ret = buffer.Buffer.allocUnsafe(n >>> 0);
  var p = this.head;
  var i = 0;

  while (p) {
    p.data.copy(ret, i);
    i += p.data.length;
    p = p.next;
  }

  return ret;
};

var safeBuffer = {
  exports: {}
};
/* eslint-disable node/no-deprecated-api */

(function (module, exports) {
  var buffer$1 = buffer;
  var Buffer = buffer$1.Buffer; // alternative to using Object.keys for old browsers

  function copyProps(src, dst) {
    for (var key in src) {
      dst[key] = src[key];
    }
  }

  if (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {
    module.exports = buffer$1;
  } else {
    // Copy properties from require('buffer')
    copyProps(buffer$1, exports);
    exports.Buffer = SafeBuffer;
  }

  function SafeBuffer(arg, encodingOrOffset, length) {
    return Buffer(arg, encodingOrOffset, length);
  } // Copy static methods from Buffer


  copyProps(Buffer, SafeBuffer);

  SafeBuffer.from = function (arg, encodingOrOffset, length) {
    if (typeof arg === 'number') {
      throw new TypeError('Argument must not be a number');
    }

    return Buffer(arg, encodingOrOffset, length);
  };

  SafeBuffer.alloc = function (size, fill, encoding) {
    if (typeof size !== 'number') {
      throw new TypeError('Argument must be a number');
    }

    var buf = Buffer(size);

    if (fill !== undefined) {
      if (typeof encoding === 'string') {
        buf.fill(fill, encoding);
      } else {
        buf.fill(fill);
      }
    } else {
      buf.fill(0);
    }

    return buf;
  };

  SafeBuffer.allocUnsafe = function (size) {
    if (typeof size !== 'number') {
      throw new TypeError('Argument must be a number');
    }

    return Buffer(size);
  };

  SafeBuffer.allocUnsafeSlow = function (size) {
    if (typeof size !== 'number') {
      throw new TypeError('Argument must be a number');
    }

    return buffer$1.SlowBuffer(size);
  };
})(safeBuffer, safeBuffer.exports);
/*<replacement>*/


var Buffer$1 = safeBuffer.exports.Buffer;
/*</replacement>*/

var isEncoding = Buffer$1.isEncoding || function (encoding) {
  encoding = '' + encoding;

  switch (encoding && encoding.toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
    case 'raw':
      return true;

    default:
      return false;
  }
};

function _normalizeEncoding(enc) {
  if (!enc) return 'utf8';
  var retried;

  while (true) {
    switch (enc) {
      case 'utf8':
      case 'utf-8':
        return 'utf8';

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return 'utf16le';

      case 'latin1':
      case 'binary':
        return 'latin1';

      case 'base64':
      case 'ascii':
      case 'hex':
        return enc;

      default:
        if (retried) return; // undefined

        enc = ('' + enc).toLowerCase();
        retried = true;
    }
  }
} // Do not cache `Buffer.isEncoding` when checking encoding names as some
// modules monkey-patch it to support additional encodings


function normalizeEncoding(enc) {
  var nenc = _normalizeEncoding(enc);

  if (typeof nenc !== 'string' && (Buffer$1.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);
  return nenc || enc;
} // StringDecoder provides an interface for efficiently splitting a series of
// buffers into a series of JS strings without breaking apart multi-byte
// characters.


var StringDecoder_1 = StringDecoder;

function StringDecoder(encoding) {
  this.encoding = normalizeEncoding(encoding);
  var nb;

  switch (this.encoding) {
    case 'utf16le':
      this.text = utf16Text;
      this.end = utf16End;
      nb = 4;
      break;

    case 'utf8':
      this.fillLast = utf8FillLast;
      nb = 4;
      break;

    case 'base64':
      this.text = base64Text;
      this.end = base64End;
      nb = 3;
      break;

    default:
      this.write = simpleWrite;
      this.end = simpleEnd;
      return;
  }

  this.lastNeed = 0;
  this.lastTotal = 0;
  this.lastChar = Buffer$1.allocUnsafe(nb);
}

StringDecoder.prototype.write = function (buf) {
  if (buf.length === 0) return '';
  var r;
  var i;

  if (this.lastNeed) {
    r = this.fillLast(buf);
    if (r === undefined) return '';
    i = this.lastNeed;
    this.lastNeed = 0;
  } else {
    i = 0;
  }

  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);
  return r || '';
};

StringDecoder.prototype.end = utf8End; // Returns only complete characters in a Buffer

StringDecoder.prototype.text = utf8Text; // Attempts to complete a partial non-UTF-8 character using bytes from a Buffer

StringDecoder.prototype.fillLast = function (buf) {
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }

  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);
  this.lastNeed -= buf.length;
}; // Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a
// continuation byte. If an invalid byte is detected, -2 is returned.


function utf8CheckByte(byte) {
  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;
  return byte >> 6 === 0x02 ? -1 : -2;
} // Checks at most 3 bytes at the end of a Buffer in order to detect an
// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)
// needed to complete the UTF-8 character (if applicable) are returned.


function utf8CheckIncomplete(self, buf, i) {
  var j = buf.length - 1;
  if (j < i) return 0;
  var nb = utf8CheckByte(buf[j]);

  if (nb >= 0) {
    if (nb > 0) self.lastNeed = nb - 1;
    return nb;
  }

  if (--j < i || nb === -2) return 0;
  nb = utf8CheckByte(buf[j]);

  if (nb >= 0) {
    if (nb > 0) self.lastNeed = nb - 2;
    return nb;
  }

  if (--j < i || nb === -2) return 0;
  nb = utf8CheckByte(buf[j]);

  if (nb >= 0) {
    if (nb > 0) {
      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;
    }

    return nb;
  }

  return 0;
} // Validates as many continuation bytes for a multi-byte UTF-8 character as
// needed or are available. If we see a non-continuation byte where we expect
// one, we "replace" the validated continuation bytes we've seen so far with
// a single UTF-8 replacement character ('\ufffd'), to match v8's UTF-8 decoding
// behavior. The continuation byte check is included three times in the case
// where all of the continuation bytes for a character exist in the same buffer.
// It is also done this way as a slight performance increase instead of using a
// loop.


function utf8CheckExtraBytes(self, buf, p) {
  if ((buf[0] & 0xC0) !== 0x80) {
    self.lastNeed = 0;
    return '\ufffd';
  }

  if (self.lastNeed > 1 && buf.length > 1) {
    if ((buf[1] & 0xC0) !== 0x80) {
      self.lastNeed = 1;
      return '\ufffd';
    }

    if (self.lastNeed > 2 && buf.length > 2) {
      if ((buf[2] & 0xC0) !== 0x80) {
        self.lastNeed = 2;
        return '\ufffd';
      }
    }
  }
} // Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.


function utf8FillLast(buf) {
  var p = this.lastTotal - this.lastNeed;
  var r = utf8CheckExtraBytes(this, buf);
  if (r !== undefined) return r;

  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, p, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }

  buf.copy(this.lastChar, p, 0, buf.length);
  this.lastNeed -= buf.length;
} // Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a
// partial character, the character's bytes are buffered until the required
// number of bytes are available.


function utf8Text(buf, i) {
  var total = utf8CheckIncomplete(this, buf, i);
  if (!this.lastNeed) return buf.toString('utf8', i);
  this.lastTotal = total;
  var end = buf.length - (total - this.lastNeed);
  buf.copy(this.lastChar, 0, end);
  return buf.toString('utf8', i, end);
} // For UTF-8, a replacement character is added when ending on a partial
// character.


function utf8End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) return r + '\ufffd';
  return r;
} // UTF-16LE typically needs two bytes per character, but even if we have an even
// number of bytes available, we need to check if we end on a leading/high
// surrogate. In that case, we need to wait for the next two bytes in order to
// decode the last character properly.


function utf16Text(buf, i) {
  if ((buf.length - i) % 2 === 0) {
    var r = buf.toString('utf16le', i);

    if (r) {
      var c = r.charCodeAt(r.length - 1);

      if (c >= 0xD800 && c <= 0xDBFF) {
        this.lastNeed = 2;
        this.lastTotal = 4;
        this.lastChar[0] = buf[buf.length - 2];
        this.lastChar[1] = buf[buf.length - 1];
        return r.slice(0, -1);
      }
    }

    return r;
  }

  this.lastNeed = 1;
  this.lastTotal = 2;
  this.lastChar[0] = buf[buf.length - 1];
  return buf.toString('utf16le', i, buf.length - 1);
} // For UTF-16LE we do not explicitly append special replacement characters if we
// end on a partial character, we simply let v8 handle that.


function utf16End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';

  if (this.lastNeed) {
    var end = this.lastTotal - this.lastNeed;
    return r + this.lastChar.toString('utf16le', 0, end);
  }

  return r;
}

function base64Text(buf, i) {
  var n = (buf.length - i) % 3;
  if (n === 0) return buf.toString('base64', i);
  this.lastNeed = 3 - n;
  this.lastTotal = 3;

  if (n === 1) {
    this.lastChar[0] = buf[buf.length - 1];
  } else {
    this.lastChar[0] = buf[buf.length - 2];
    this.lastChar[1] = buf[buf.length - 1];
  }

  return buf.toString('base64', i, buf.length - n);
}

function base64End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);
  return r;
} // Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)


function simpleWrite(buf) {
  return buf.toString(this.encoding);
}

function simpleEnd(buf) {
  return buf && buf.length ? this.write(buf) : '';
}

Readable.ReadableState = ReadableState;
var debug = util$1.debuglog('stream');
util$1.inherits(Readable, EE);

function prependListener(emitter, event, fn) {
  // Sadly this is not cacheable as some libraries bundle their own
  // event emitter implementation with them.
  if (typeof emitter.prependListener === 'function') {
    return emitter.prependListener(event, fn);
  } else {
    // This is a hack to make sure that our error handler is attached before any
    // userland ones.  NEVER DO THIS. This is here only because this code needs
    // to continue to work with older versions of Node.js that do not include
    // the prependListener() method. The goal is to eventually remove this hack.
    if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];
  }
}

function listenerCount(emitter, type) {
  return emitter.listeners(type).length;
}

function ReadableState(options, stream) {
  options = options || {}; // object stream flag. Used to make read(n) ignore n and to
  // make all the buffer merging and length checks go away

  this.objectMode = !!options.objectMode;
  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.readableObjectMode; // the point at which it stops calling _read() to fill the buffer
  // Note: 0 is a valid value, means "don't call _read preemptively ever"

  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm; // cast to ints.

  this.highWaterMark = ~~this.highWaterMark; // A linked list is used to store data chunks instead of an array because the
  // linked list can remove elements from the beginning faster than
  // array.shift()

  this.buffer = new BufferList();
  this.length = 0;
  this.pipes = null;
  this.pipesCount = 0;
  this.flowing = null;
  this.ended = false;
  this.endEmitted = false;
  this.reading = false; // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.

  this.sync = true; // whenever we return null, then we set a flag to say
  // that we're awaiting a 'readable' event emission.

  this.needReadable = false;
  this.emittedReadable = false;
  this.readableListening = false;
  this.resumeScheduled = false; // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.

  this.defaultEncoding = options.defaultEncoding || 'utf8'; // when piping, we only care about 'readable' events that happen
  // after read()ing all the bytes and not getting any pushback.

  this.ranOut = false; // the number of writers that are awaiting a drain event in .pipe()s

  this.awaitDrain = 0; // if true, a maybeReadMore has been scheduled

  this.readingMore = false;
  this.decoder = null;
  this.encoding = null;

  if (options.encoding) {
    this.decoder = new StringDecoder_1(options.encoding);
    this.encoding = options.encoding;
  }
}

function Readable(options) {
  if (!(this instanceof Readable)) return new Readable(options);
  this._readableState = new ReadableState(options, this); // legacy

  this.readable = true;
  if (options && typeof options.read === 'function') this._read = options.read;
  EE.call(this);
} // Manually shove something into the read() buffer.
// This returns true if the highWaterMark has not been hit yet,
// similar to how Writable.write() returns true if you should
// write() some more.


Readable.prototype.push = function (chunk, encoding) {
  var state = this._readableState;

  if (!state.objectMode && typeof chunk === 'string') {
    encoding = encoding || state.defaultEncoding;

    if (encoding !== state.encoding) {
      chunk = Buffer.from(chunk, encoding);
      encoding = '';
    }
  }

  return readableAddChunk(this, state, chunk, encoding, false);
}; // Unshift should *always* be something directly out of read()


Readable.prototype.unshift = function (chunk) {
  var state = this._readableState;
  return readableAddChunk(this, state, chunk, '', true);
};

Readable.prototype.isPaused = function () {
  return this._readableState.flowing === false;
};

function readableAddChunk(stream, state, chunk, encoding, addToFront) {
  var er = chunkInvalid(state, chunk);

  if (er) {
    stream.emit('error', er);
  } else if (chunk === null) {
    state.reading = false;
    onEofChunk(stream, state);
  } else if (state.objectMode || chunk && chunk.length > 0) {
    if (state.ended && !addToFront) {
      var e = new Error('stream.push() after EOF');
      stream.emit('error', e);
    } else if (state.endEmitted && addToFront) {
      var _e = new Error('stream.unshift() after end event');

      stream.emit('error', _e);
    } else {
      var skipAdd;

      if (state.decoder && !addToFront && !encoding) {
        chunk = state.decoder.write(chunk);
        skipAdd = !state.objectMode && chunk.length === 0;
      }

      if (!addToFront) state.reading = false; // Don't add to the buffer if we've decoded to an empty string chunk and
      // we're not in object mode

      if (!skipAdd) {
        // if we want the data now, just emit it.
        if (state.flowing && state.length === 0 && !state.sync) {
          stream.emit('data', chunk);
          stream.read(0);
        } else {
          // update the buffer info.
          state.length += state.objectMode ? 1 : chunk.length;
          if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);
          if (state.needReadable) emitReadable(stream);
        }
      }

      maybeReadMore(stream, state);
    }
  } else if (!addToFront) {
    state.reading = false;
  }

  return needMoreData(state);
} // if it's past the high water mark, we can push in some more.
// Also, if we have no data yet, we can stand some
// more bytes.  This is to work around cases where hwm=0,
// such as the repl.  Also, if the push() triggered a
// readable event, and the user called read(largeNumber) such that
// needReadable was set, then we ought to push more, so that another
// 'readable' event will be triggered.


function needMoreData(state) {
  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);
} // backwards compatibility.


Readable.prototype.setEncoding = function (enc) {
  this._readableState.decoder = new StringDecoder_1(enc);
  this._readableState.encoding = enc;
  return this;
}; // Don't raise the hwm > 8MB


var MAX_HWM = 0x800000;

function computeNewHighWaterMark(n) {
  if (n >= MAX_HWM) {
    n = MAX_HWM;
  } else {
    // Get the next highest power of 2 to prevent increasing hwm excessively in
    // tiny amounts
    n--;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    n++;
  }

  return n;
} // This function is designed to be inlinable, so please take care when making
// changes to the function body.


function howMuchToRead(n, state) {
  if (n <= 0 || state.length === 0 && state.ended) return 0;
  if (state.objectMode) return 1;

  if (n !== n) {
    // Only flow one buffer at a time
    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;
  } // If we're asking for more than the current hwm, then raise the hwm.


  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);
  if (n <= state.length) return n; // Don't have enough

  if (!state.ended) {
    state.needReadable = true;
    return 0;
  }

  return state.length;
} // you can override either this method, or the async _read(n) below.


Readable.prototype.read = function (n) {
  debug('read', n);
  n = parseInt(n, 10);
  var state = this._readableState;
  var nOrig = n;
  if (n !== 0) state.emittedReadable = false; // if we're doing read(0) to trigger a readable event, but we
  // already have a bunch of data in the buffer, then just trigger
  // the 'readable' event and move on.

  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {
    debug('read: emitReadable', state.length, state.ended);
    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);
    return null;
  }

  n = howMuchToRead(n, state); // if we've ended, and we're now clear, then finish it up.

  if (n === 0 && state.ended) {
    if (state.length === 0) endReadable(this);
    return null;
  } // All the actual chunk generation logic needs to be
  // *below* the call to _read.  The reason is that in certain
  // synthetic stream cases, such as passthrough streams, _read
  // may be a completely synchronous operation which may change
  // the state of the read buffer, providing enough data when
  // before there was *not* enough.
  //
  // So, the steps are:
  // 1. Figure out what the state of things will be after we do
  // a read from the buffer.
  //
  // 2. If that resulting state will trigger a _read, then call _read.
  // Note that this may be asynchronous, or synchronous.  Yes, it is
  // deeply ugly to write APIs this way, but that still doesn't mean
  // that the Readable class should behave improperly, as streams are
  // designed to be sync/async agnostic.
  // Take note if the _read call is sync or async (ie, if the read call
  // has returned yet), so that we know whether or not it's safe to emit
  // 'readable' etc.
  //
  // 3. Actually pull the requested chunks out of the buffer and return.
  // if we need a readable event, then we need to do some reading.


  var doRead = state.needReadable;
  debug('need readable', doRead); // if we currently have less than the highWaterMark, then also read some

  if (state.length === 0 || state.length - n < state.highWaterMark) {
    doRead = true;
    debug('length less than watermark', doRead);
  } // however, if we've ended, then there's no point, and if we're already
  // reading, then it's unnecessary.


  if (state.ended || state.reading) {
    doRead = false;
    debug('reading or ended', doRead);
  } else if (doRead) {
    debug('do read');
    state.reading = true;
    state.sync = true; // if the length is currently zero, then we *need* a readable event.

    if (state.length === 0) state.needReadable = true; // call internal read method

    this._read(state.highWaterMark);

    state.sync = false; // If _read pushed data synchronously, then `reading` will be false,
    // and we need to re-evaluate how much data we can return to the user.

    if (!state.reading) n = howMuchToRead(nOrig, state);
  }

  var ret;
  if (n > 0) ret = fromList(n, state);else ret = null;

  if (ret === null) {
    state.needReadable = true;
    n = 0;
  } else {
    state.length -= n;
  }

  if (state.length === 0) {
    // If we have nothing in the buffer, then we want to know
    // as soon as we *do* get something into the buffer.
    if (!state.ended) state.needReadable = true; // If we tried to read() past the EOF, then emit end on the next tick.

    if (nOrig !== n && state.ended) endReadable(this);
  }

  if (ret !== null) this.emit('data', ret);
  return ret;
};

function chunkInvalid(state, chunk) {
  var er = null;

  if (!Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== null && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }

  return er;
}

function onEofChunk(stream, state) {
  if (state.ended) return;

  if (state.decoder) {
    var chunk = state.decoder.end();

    if (chunk && chunk.length) {
      state.buffer.push(chunk);
      state.length += state.objectMode ? 1 : chunk.length;
    }
  }

  state.ended = true; // emit 'readable' now to make sure it gets picked up.

  emitReadable(stream);
} // Don't emit readable right away in sync mode, because this can trigger
// another read() call => stack overflow.  This way, it might trigger
// a nextTick recursion warning, but that's not so bad.


function emitReadable(stream) {
  var state = stream._readableState;
  state.needReadable = false;

  if (!state.emittedReadable) {
    debug('emitReadable', state.flowing);
    state.emittedReadable = true;
    if (state.sync) process$1.nextTick(emitReadable_, stream);else emitReadable_(stream);
  }
}

function emitReadable_(stream) {
  debug('emit readable');
  stream.emit('readable');
  flow(stream);
} // at this point, the user has presumably seen the 'readable' event,
// and called read() to consume some data.  that may have triggered
// in turn another _read(n) call, in which case reading = true if
// it's in progress.
// However, if we're not ended, or reading, and the length < hwm,
// then go ahead and try to read some more preemptively.


function maybeReadMore(stream, state) {
  if (!state.readingMore) {
    state.readingMore = true;
    process$1.nextTick(maybeReadMore_, stream, state);
  }
}

function maybeReadMore_(stream, state) {
  var len = state.length;

  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {
    debug('maybeReadMore read 0');
    stream.read(0);
    if (len === state.length) // didn't get any data, stop spinning.
      break;else len = state.length;
  }

  state.readingMore = false;
} // abstract method.  to be overridden in specific implementation classes.
// call cb(er, data) where data is <= n in length.
// for virtual (non-string, non-buffer) streams, "length" is somewhat
// arbitrary, and perhaps not very meaningful.


Readable.prototype._read = function (n) {
  this.emit('error', new Error('not implemented'));
};

Readable.prototype.pipe = function (dest, pipeOpts) {
  var src = this;
  var state = this._readableState;

  switch (state.pipesCount) {
    case 0:
      state.pipes = dest;
      break;

    case 1:
      state.pipes = [state.pipes, dest];
      break;

    default:
      state.pipes.push(dest);
      break;
  }

  state.pipesCount += 1;
  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);
  var doEnd = !pipeOpts || pipeOpts.end !== false;
  var endFn = doEnd ? onend : cleanup;
  if (state.endEmitted) process$1.nextTick(endFn);else src.once('end', endFn);
  dest.on('unpipe', onunpipe);

  function onunpipe(readable) {
    debug('onunpipe');

    if (readable === src) {
      cleanup();
    }
  }

  function onend() {
    debug('onend');
    dest.end();
  } // when the dest drains, it reduces the awaitDrain counter
  // on the source.  This would be more elegant with a .once()
  // handler in flow(), but adding and removing repeatedly is
  // too slow.


  var ondrain = pipeOnDrain(src);
  dest.on('drain', ondrain);
  var cleanedUp = false;

  function cleanup() {
    debug('cleanup'); // cleanup event handlers once the pipe is broken

    dest.removeListener('close', onclose);
    dest.removeListener('finish', onfinish);
    dest.removeListener('drain', ondrain);
    dest.removeListener('error', onerror);
    dest.removeListener('unpipe', onunpipe);
    src.removeListener('end', onend);
    src.removeListener('end', cleanup);
    src.removeListener('data', ondata);
    cleanedUp = true; // if the reader is waiting for a drain event from this
    // specific writer, then it would cause it to never start
    // flowing again.
    // So, if this is awaiting a drain, then we just call it now.
    // If we don't know, then assume that we are waiting for one.

    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();
  } // If the user pushes more data while we're writing to dest then we'll end up
  // in ondata again. However, we only want to increase awaitDrain once because
  // dest will only emit one 'drain' event for the multiple writes.
  // => Introduce a guard on increasing awaitDrain.


  var increasedAwaitDrain = false;
  src.on('data', ondata);

  function ondata(chunk) {
    debug('ondata');
    increasedAwaitDrain = false;
    var ret = dest.write(chunk);

    if (false === ret && !increasedAwaitDrain) {
      // If the user unpiped during `dest.write()`, it is possible
      // to get stuck in a permanently paused state if that write
      // also returned false.
      // => Check whether `dest` is still a piping destination.
      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {
        debug('false write response, pause', src._readableState.awaitDrain);
        src._readableState.awaitDrain++;
        increasedAwaitDrain = true;
      }

      src.pause();
    }
  } // if the dest has an error, then stop piping into it.
  // however, don't suppress the throwing behavior for this.


  function onerror(er) {
    debug('onerror', er);
    unpipe();
    dest.removeListener('error', onerror);
    if (listenerCount(dest, 'error') === 0) dest.emit('error', er);
  } // Make sure our error handler is attached before userland ones.


  prependListener(dest, 'error', onerror); // Both close and finish should trigger unpipe, but only once.

  function onclose() {
    dest.removeListener('finish', onfinish);
    unpipe();
  }

  dest.once('close', onclose);

  function onfinish() {
    debug('onfinish');
    dest.removeListener('close', onclose);
    unpipe();
  }

  dest.once('finish', onfinish);

  function unpipe() {
    debug('unpipe');
    src.unpipe(dest);
  } // tell the dest that it's being piped to


  dest.emit('pipe', src); // start the flow if it hasn't been started already.

  if (!state.flowing) {
    debug('pipe resume');
    src.resume();
  }

  return dest;
};

function pipeOnDrain(src) {
  return function () {
    var state = src._readableState;
    debug('pipeOnDrain', state.awaitDrain);
    if (state.awaitDrain) state.awaitDrain--;

    if (state.awaitDrain === 0 && src.listeners('data').length) {
      state.flowing = true;
      flow(src);
    }
  };
}

Readable.prototype.unpipe = function (dest) {
  var state = this._readableState; // if we're not piping anywhere, then do nothing.

  if (state.pipesCount === 0) return this; // just one destination.  most common case.

  if (state.pipesCount === 1) {
    // passed in one, but it's not the right one.
    if (dest && dest !== state.pipes) return this;
    if (!dest) dest = state.pipes; // got a match.

    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;
    if (dest) dest.emit('unpipe', this);
    return this;
  } // slow case. multiple pipe destinations.


  if (!dest) {
    // remove all.
    var dests = state.pipes;
    var len = state.pipesCount;
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;

    for (var _i = 0; _i < len; _i++) {
      dests[_i].emit('unpipe', this);
    }

    return this;
  } // try to find the right one.


  var i = indexOf(state.pipes, dest);
  if (i === -1) return this;
  state.pipes.splice(i, 1);
  state.pipesCount -= 1;
  if (state.pipesCount === 1) state.pipes = state.pipes[0];
  dest.emit('unpipe', this);
  return this;
}; // set up data events if they are asked for
// Ensure readable listeners eventually get something


Readable.prototype.on = function (ev, fn) {
  var res = EE.prototype.on.call(this, ev, fn);

  if (ev === 'data') {
    // Start flowing on next tick if stream isn't explicitly paused
    if (this._readableState.flowing !== false) this.resume();
  } else if (ev === 'readable') {
    var state = this._readableState;

    if (!state.endEmitted && !state.readableListening) {
      state.readableListening = state.needReadable = true;
      state.emittedReadable = false;

      if (!state.reading) {
        process$1.nextTick(nReadingNextTick, this);
      } else if (state.length) {
        emitReadable(this);
      }
    }
  }

  return res;
};

Readable.prototype.addListener = Readable.prototype.on;

function nReadingNextTick(self) {
  debug('readable nexttick read 0');
  self.read(0);
} // pause() and resume() are remnants of the legacy readable stream API
// If the user uses them, then switch into old mode.


Readable.prototype.resume = function () {
  var state = this._readableState;

  if (!state.flowing) {
    debug('resume');
    state.flowing = true;
    resume(this, state);
  }

  return this;
};

function resume(stream, state) {
  if (!state.resumeScheduled) {
    state.resumeScheduled = true;
    process$1.nextTick(resume_, stream, state);
  }
}

function resume_(stream, state) {
  if (!state.reading) {
    debug('resume read 0');
    stream.read(0);
  }

  state.resumeScheduled = false;
  state.awaitDrain = 0;
  stream.emit('resume');
  flow(stream);
  if (state.flowing && !state.reading) stream.read(0);
}

Readable.prototype.pause = function () {
  debug('call pause flowing=%j', this._readableState.flowing);

  if (false !== this._readableState.flowing) {
    debug('pause');
    this._readableState.flowing = false;
    this.emit('pause');
  }

  return this;
};

function flow(stream) {
  var state = stream._readableState;
  debug('flow', state.flowing);

  while (state.flowing && stream.read() !== null) {}
} // wrap an old-style stream as the async data source.
// This is *not* part of the readable stream interface.
// It is an ugly unfortunate mess of history.


Readable.prototype.wrap = function (stream) {
  var state = this._readableState;
  var paused = false;
  var self = this;
  stream.on('end', function () {
    debug('wrapped end');

    if (state.decoder && !state.ended) {
      var chunk = state.decoder.end();
      if (chunk && chunk.length) self.push(chunk);
    }

    self.push(null);
  });
  stream.on('data', function (chunk) {
    debug('wrapped data');
    if (state.decoder) chunk = state.decoder.write(chunk); // don't skip over falsy values in objectMode

    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;
    var ret = self.push(chunk);

    if (!ret) {
      paused = true;
      stream.pause();
    }
  }); // proxy all the other methods.
  // important when wrapping filters and duplexes.

  for (var i in stream) {
    if (this[i] === undefined && typeof stream[i] === 'function') {
      this[i] = function (method) {
        return function () {
          return stream[method].apply(stream, arguments);
        };
      }(i);
    }
  } // proxy certain important events.


  var events = ['error', 'close', 'destroy', 'pause', 'resume'];
  forEach(events, function (ev) {
    stream.on(ev, self.emit.bind(self, ev));
  }); // when we try to consume some more bytes, simply unpause the
  // underlying stream.

  self._read = function (n) {
    debug('wrapped _read', n);

    if (paused) {
      paused = false;
      stream.resume();
    }
  };

  return self;
}; // exposed for testing purposes only.


Readable._fromList = fromList; // Pluck off n bytes from an array of buffers.
// Length is the combined lengths of all the buffers in the list.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.

function fromList(n, state) {
  // nothing buffered
  if (state.length === 0) return null;
  var ret;
  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {
    // read it all, truncate the list
    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);
    state.buffer.clear();
  } else {
    // read part of list
    ret = fromListPartial(n, state.buffer, state.decoder);
  }
  return ret;
} // Extracts only enough buffered data to satisfy the amount requested.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.


function fromListPartial(n, list, hasStrings) {
  var ret;

  if (n < list.head.data.length) {
    // slice is the same for buffers and strings
    ret = list.head.data.slice(0, n);
    list.head.data = list.head.data.slice(n);
  } else if (n === list.head.data.length) {
    // first chunk is a perfect match
    ret = list.shift();
  } else {
    // result spans more than one buffer
    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);
  }

  return ret;
} // Copies a specified amount of characters from the list of buffered data
// chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.


function copyFromBufferString(n, list) {
  var p = list.head;
  var c = 1;
  var ret = p.data;
  n -= ret.length;

  while (p = p.next) {
    var str = p.data;
    var nb = n > str.length ? str.length : n;
    if (nb === str.length) ret += str;else ret += str.slice(0, n);
    n -= nb;

    if (n === 0) {
      if (nb === str.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = str.slice(nb);
      }

      break;
    }

    ++c;
  }

  list.length -= c;
  return ret;
} // Copies a specified amount of bytes from the list of buffered data chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.


function copyFromBuffer(n, list) {
  var ret = Buffer.allocUnsafe(n);
  var p = list.head;
  var c = 1;
  p.data.copy(ret);
  n -= p.data.length;

  while (p = p.next) {
    var buf = p.data;
    var nb = n > buf.length ? buf.length : n;
    buf.copy(ret, ret.length - n, 0, nb);
    n -= nb;

    if (n === 0) {
      if (nb === buf.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = buf.slice(nb);
      }

      break;
    }

    ++c;
  }

  list.length -= c;
  return ret;
}

function endReadable(stream) {
  var state = stream._readableState; // If we get here before consuming all the bytes, then that is a
  // bug in node.  Should never happen.

  if (state.length > 0) throw new Error('"endReadable()" called on non-empty stream');

  if (!state.endEmitted) {
    state.ended = true;
    process$1.nextTick(endReadableNT, state, stream);
  }
}

function endReadableNT(state, stream) {
  // Check that we didn't get one last unshift.
  if (!state.endEmitted && state.length === 0) {
    state.endEmitted = true;
    stream.readable = false;
    stream.emit('end');
  }
}

function forEach(xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}

function indexOf(xs, x) {
  for (var i = 0, l = xs.length; i < l; i++) {
    if (xs[i] === x) return i;
  }

  return -1;
} // A bit simpler than readable streams.


Writable.WritableState = WritableState;
util$1.inherits(Writable, events.exports.EventEmitter);

function nop() {}

function WriteReq(chunk, encoding, cb) {
  this.chunk = chunk;
  this.encoding = encoding;
  this.callback = cb;
  this.next = null;
}

function WritableState(options, stream) {
  Object.defineProperty(this, 'buffer', {
    get: util$1.deprecate(function () {
      return this.getBuffer();
    }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.')
  });
  options = options || {}; // object stream flag to indicate whether or not this stream
  // contains buffers or objects.

  this.objectMode = !!options.objectMode;
  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.writableObjectMode; // the point at which write() starts returning false
  // Note: 0 is a valid value, means that we always return false if
  // the entire buffer is not flushed immediately on write()

  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm; // cast to ints.

  this.highWaterMark = ~~this.highWaterMark;
  this.needDrain = false; // at the start of calling end()

  this.ending = false; // when end() has been called, and returned

  this.ended = false; // when 'finish' is emitted

  this.finished = false; // should we decode strings into buffers before passing to _write?
  // this is here so that some node-core streams can optimize string
  // handling at a lower level.

  var noDecode = options.decodeStrings === false;
  this.decodeStrings = !noDecode; // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.

  this.defaultEncoding = options.defaultEncoding || 'utf8'; // not an actual buffer we keep track of, but a measurement
  // of how much we're waiting to get pushed to some underlying
  // socket or file.

  this.length = 0; // a flag to see when we're in the middle of a write.

  this.writing = false; // when true all writes will be buffered until .uncork() call

  this.corked = 0; // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.

  this.sync = true; // a flag to know if we're processing previously buffered items, which
  // may call the _write() callback in the same tick, so that we don't
  // end up in an overlapped onwrite situation.

  this.bufferProcessing = false; // the callback that's passed to _write(chunk,cb)

  this.onwrite = function (er) {
    onwrite(stream, er);
  }; // the callback that the user supplies to write(chunk,encoding,cb)


  this.writecb = null; // the amount that is being written when _write is called.

  this.writelen = 0;
  this.bufferedRequest = null;
  this.lastBufferedRequest = null; // number of pending user-supplied write callbacks
  // this must be 0 before 'finish' can be emitted

  this.pendingcb = 0; // emit prefinish if the only thing we're waiting for is _write cbs
  // This is relevant for synchronous Transform streams

  this.prefinished = false; // True if the error was already emitted and should not be thrown again

  this.errorEmitted = false; // count buffered requests

  this.bufferedRequestCount = 0; // allocate the first CorkedRequest, there is always
  // one allocated and free to use, and we maintain at most two

  this.corkedRequestsFree = new CorkedRequest(this);
}

WritableState.prototype.getBuffer = function writableStateGetBuffer() {
  var current = this.bufferedRequest;
  var out = [];

  while (current) {
    out.push(current);
    current = current.next;
  }

  return out;
};

function Writable(options) {
  // Writable ctor is applied to Duplexes, though they're not
  // instanceof Writable, they're instanceof Readable.
  if (!(this instanceof Writable) && !(this instanceof Duplex)) return new Writable(options);
  this._writableState = new WritableState(options, this); // legacy.

  this.writable = true;

  if (options) {
    if (typeof options.write === 'function') this._write = options.write;
    if (typeof options.writev === 'function') this._writev = options.writev;
  }

  events.exports.EventEmitter.call(this);
} // Otherwise people can pipe Writable streams, which is just wrong.


Writable.prototype.pipe = function () {
  this.emit('error', new Error('Cannot pipe, not readable'));
};

function writeAfterEnd(stream, cb) {
  var er = new Error('write after end'); // TODO: defer error events consistently everywhere, not just the cb

  stream.emit('error', er);
  process$1.nextTick(cb, er);
} // If we get something that is not a buffer, string, null, or undefined,
// and we're not in objectMode, then that's an error.
// Otherwise stream chunks are all considered to be of length=1, and the
// watermarks determine how many objects to keep in the buffer, rather than
// how many bytes or characters.


function validChunk(stream, state, chunk, cb) {
  var valid = true;
  var er = false; // Always throw error if a null is written
  // if we are not in object mode then throw
  // if it is not a buffer, string, or undefined.

  if (chunk === null) {
    er = new TypeError('May not write null values to stream');
  } else if (!buffer.Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }

  if (er) {
    stream.emit('error', er);
    process$1.nextTick(cb, er);
    valid = false;
  }

  return valid;
}

Writable.prototype.write = function (chunk, encoding, cb) {
  var state = this._writableState;
  var ret = false;

  if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (buffer.Buffer.isBuffer(chunk)) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;
  if (typeof cb !== 'function') cb = nop;
  if (state.ended) writeAfterEnd(this, cb);else if (validChunk(this, state, chunk, cb)) {
    state.pendingcb++;
    ret = writeOrBuffer(this, state, chunk, encoding, cb);
  }
  return ret;
};

Writable.prototype.cork = function () {
  var state = this._writableState;
  state.corked++;
};

Writable.prototype.uncork = function () {
  var state = this._writableState;

  if (state.corked) {
    state.corked--;
    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);
  }
};

Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {
  // node::ParseEncoding() requires lower case.
  if (typeof encoding === 'string') encoding = encoding.toLowerCase();
  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);
  this._writableState.defaultEncoding = encoding;
  return this;
};

function decodeChunk(state, chunk, encoding) {
  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {
    chunk = buffer.Buffer.from(chunk, encoding);
  }

  return chunk;
} // if we're already writing something, then just put this
// in the queue, and wait our turn.  Otherwise, call _write
// If we return false, then we need a drain event, so set that flag.


function writeOrBuffer(stream, state, chunk, encoding, cb) {
  chunk = decodeChunk(state, chunk, encoding);
  if (buffer.Buffer.isBuffer(chunk)) encoding = 'buffer';
  var len = state.objectMode ? 1 : chunk.length;
  state.length += len;
  var ret = state.length < state.highWaterMark; // we must ensure that previous needDrain will not be reset to false.

  if (!ret) state.needDrain = true;

  if (state.writing || state.corked) {
    var last = state.lastBufferedRequest;
    state.lastBufferedRequest = new WriteReq(chunk, encoding, cb);

    if (last) {
      last.next = state.lastBufferedRequest;
    } else {
      state.bufferedRequest = state.lastBufferedRequest;
    }

    state.bufferedRequestCount += 1;
  } else {
    doWrite(stream, state, false, len, chunk, encoding, cb);
  }

  return ret;
}

function doWrite(stream, state, writev, len, chunk, encoding, cb) {
  state.writelen = len;
  state.writecb = cb;
  state.writing = true;
  state.sync = true;
  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);
  state.sync = false;
}

function onwriteError(stream, state, sync, er, cb) {
  --state.pendingcb;
  if (sync) process$1.nextTick(cb, er);else cb(er);
  stream._writableState.errorEmitted = true;
  stream.emit('error', er);
}

function onwriteStateUpdate(state) {
  state.writing = false;
  state.writecb = null;
  state.length -= state.writelen;
  state.writelen = 0;
}

function onwrite(stream, er) {
  var state = stream._writableState;
  var sync = state.sync;
  var cb = state.writecb;
  onwriteStateUpdate(state);
  if (er) onwriteError(stream, state, sync, er, cb);else {
    // Check if we're actually ready to finish, but don't emit yet
    var finished = needFinish(state);

    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {
      clearBuffer(stream, state);
    }

    if (sync) {
      /*<replacement>*/
      process$1.nextTick(afterWrite, stream, state, finished, cb);
      /*</replacement>*/
    } else {
      afterWrite(stream, state, finished, cb);
    }
  }
}

function afterWrite(stream, state, finished, cb) {
  if (!finished) onwriteDrain(stream, state);
  state.pendingcb--;
  cb();
  finishMaybe(stream, state);
} // Must force callback to be called on nextTick, so that we don't
// emit 'drain' before the write() consumer gets the 'false' return
// value, and has a chance to attach a 'drain' listener.


function onwriteDrain(stream, state) {
  if (state.length === 0 && state.needDrain) {
    state.needDrain = false;
    stream.emit('drain');
  }
} // if there's something in the buffer waiting, then process it


function clearBuffer(stream, state) {
  state.bufferProcessing = true;
  var entry = state.bufferedRequest;

  if (stream._writev && entry && entry.next) {
    // Fast case, write everything using _writev()
    var l = state.bufferedRequestCount;
    var buffer = new Array(l);
    var holder = state.corkedRequestsFree;
    holder.entry = entry;
    var count = 0;

    while (entry) {
      buffer[count] = entry;
      entry = entry.next;
      count += 1;
    }

    doWrite(stream, state, true, state.length, buffer, '', holder.finish); // doWrite is almost always async, defer these to save a bit of time
    // as the hot path ends with doWrite

    state.pendingcb++;
    state.lastBufferedRequest = null;

    if (holder.next) {
      state.corkedRequestsFree = holder.next;
      holder.next = null;
    } else {
      state.corkedRequestsFree = new CorkedRequest(state);
    }
  } else {
    // Slow case, write chunks one-by-one
    while (entry) {
      var chunk = entry.chunk;
      var encoding = entry.encoding;
      var cb = entry.callback;
      var len = state.objectMode ? 1 : chunk.length;
      doWrite(stream, state, false, len, chunk, encoding, cb);
      entry = entry.next; // if we didn't call the onwrite immediately, then
      // it means that we need to wait until it does.
      // also, that means that the chunk and cb are currently
      // being processed, so move the buffer counter past them.

      if (state.writing) {
        break;
      }
    }

    if (entry === null) state.lastBufferedRequest = null;
  }

  state.bufferedRequestCount = 0;
  state.bufferedRequest = entry;
  state.bufferProcessing = false;
}

Writable.prototype._write = function (chunk, encoding, cb) {
  cb(new Error('not implemented'));
};

Writable.prototype._writev = null;

Writable.prototype.end = function (chunk, encoding, cb) {
  var state = this._writableState;

  if (typeof chunk === 'function') {
    cb = chunk;
    chunk = null;
    encoding = null;
  } else if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding); // .end() fully uncorks

  if (state.corked) {
    state.corked = 1;
    this.uncork();
  } // ignore unnecessary end() calls.


  if (!state.ending && !state.finished) endWritable(this, state, cb);
};

function needFinish(state) {
  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;
}

function prefinish(stream, state) {
  if (!state.prefinished) {
    state.prefinished = true;
    stream.emit('prefinish');
  }
}

function finishMaybe(stream, state) {
  var need = needFinish(state);

  if (need) {
    if (state.pendingcb === 0) {
      prefinish(stream, state);
      state.finished = true;
      stream.emit('finish');
    } else {
      prefinish(stream, state);
    }
  }

  return need;
}

function endWritable(stream, state, cb) {
  state.ending = true;
  finishMaybe(stream, state);

  if (cb) {
    if (state.finished) process$1.nextTick(cb);else stream.once('finish', cb);
  }

  state.ended = true;
  stream.writable = false;
} // It seems a linked list but it is not
// there will be only 2 of these for each stream


function CorkedRequest(state) {
  var _this = this;

  this.next = null;
  this.entry = null;

  this.finish = function (err) {
    var entry = _this.entry;
    _this.entry = null;

    while (entry) {
      var cb = entry.callback;
      state.pendingcb--;
      cb(err);
      entry = entry.next;
    }

    if (state.corkedRequestsFree) {
      state.corkedRequestsFree.next = _this;
    } else {
      state.corkedRequestsFree = _this;
    }
  };
}

util$1.inherits(Duplex, Readable);
var keys = Object.keys(Writable.prototype);

for (var v = 0; v < keys.length; v++) {
  var method = keys[v];
  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];
}

function Duplex(options) {
  if (!(this instanceof Duplex)) return new Duplex(options);
  Readable.call(this, options);
  Writable.call(this, options);
  if (options && options.readable === false) this.readable = false;
  if (options && options.writable === false) this.writable = false;
  this.allowHalfOpen = true;
  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;
  this.once('end', onend);
} // the no-half-open enforcer


function onend() {
  // if we allow half-open state, or if the writable side ended,
  // then we're ok.
  if (this.allowHalfOpen || this._writableState.ended) return; // no more data can be written.
  // But allow more writes to happen in this tick.

  process$1.nextTick(onEndNT, this);
}

function onEndNT(self) {
  self.end();
} // a transform stream is a readable/writable stream where you do


util$1.inherits(Transform, Duplex);

function TransformState(stream) {
  this.afterTransform = function (er, data) {
    return afterTransform(stream, er, data);
  };

  this.needTransform = false;
  this.transforming = false;
  this.writecb = null;
  this.writechunk = null;
  this.writeencoding = null;
}

function afterTransform(stream, er, data) {
  var ts = stream._transformState;
  ts.transforming = false;
  var cb = ts.writecb;
  if (!cb) return stream.emit('error', new Error('no writecb in Transform class'));
  ts.writechunk = null;
  ts.writecb = null;
  if (data !== null && data !== undefined) stream.push(data);
  cb(er);
  var rs = stream._readableState;
  rs.reading = false;

  if (rs.needReadable || rs.length < rs.highWaterMark) {
    stream._read(rs.highWaterMark);
  }
}

function Transform(options) {
  if (!(this instanceof Transform)) return new Transform(options);
  Duplex.call(this, options);
  this._transformState = new TransformState(this); // when the writable side finishes, then flush out anything remaining.

  var stream = this; // start out asking for a readable event once data is transformed.

  this._readableState.needReadable = true; // we have implemented the _read method, and done the other things
  // that Readable wants before the first _read call, so unset the
  // sync guard flag.

  this._readableState.sync = false;

  if (options) {
    if (typeof options.transform === 'function') this._transform = options.transform;
    if (typeof options.flush === 'function') this._flush = options.flush;
  }

  this.once('prefinish', function () {
    if (typeof this._flush === 'function') this._flush(function (er) {
      done(stream, er);
    });else done(stream);
  });
}

Transform.prototype.push = function (chunk, encoding) {
  this._transformState.needTransform = false;
  return Duplex.prototype.push.call(this, chunk, encoding);
}; // This is the part where you do stuff!
// override this function in implementation classes.
// 'chunk' is an input chunk.
//
// Call `push(newChunk)` to pass along transformed output
// to the readable side.  You may call 'push' zero or more times.
//
// Call `cb(err)` when you are done with this chunk.  If you pass
// an error, then that'll put the hurt on the whole operation.  If you
// never call cb(), then you'll never get another chunk.


Transform.prototype._transform = function (chunk, encoding, cb) {
  throw new Error('Not implemented');
};

Transform.prototype._write = function (chunk, encoding, cb) {
  var ts = this._transformState;
  ts.writecb = cb;
  ts.writechunk = chunk;
  ts.writeencoding = encoding;

  if (!ts.transforming) {
    var rs = this._readableState;
    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);
  }
}; // Doesn't matter what the args are here.
// _transform does all the work.
// That we got here means that the readable side wants more data.


Transform.prototype._read = function (n) {
  var ts = this._transformState;

  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {
    ts.transforming = true;

    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    // mark that we need a transform, so that any data that comes in
    // will get processed, now that we've asked for it.
    ts.needTransform = true;
  }
};

function done(stream, er) {
  if (er) return stream.emit('error', er); // if there's nothing in the write buffer, then that means
  // that nothing more will ever be provided

  var ws = stream._writableState;
  var ts = stream._transformState;
  if (ws.length) throw new Error('Calling transform done when ws.length != 0');
  if (ts.transforming) throw new Error('Calling transform done when still transforming');
  return stream.push(null);
}

util$1.inherits(PassThrough, Transform);

function PassThrough(options) {
  if (!(this instanceof PassThrough)) return new PassThrough(options);
  Transform.call(this, options);
}

PassThrough.prototype._transform = function (chunk, encoding, cb) {
  cb(null, chunk);
};

util$1.inherits(Stream, EE);
Stream.Readable = Readable;
Stream.Writable = Writable;
Stream.Duplex = Duplex;
Stream.Transform = Transform;
Stream.PassThrough = PassThrough; // Backwards-compat with node 0.4.x

Stream.Stream = Stream; // old-style streams.  Note that the pipe method (the only relevant
// part of this class) is overridden in the Readable class.

function Stream() {
  EE.call(this);
}

Stream.prototype.pipe = function (dest, options) {
  var source = this;

  function ondata(chunk) {
    if (dest.writable) {
      if (false === dest.write(chunk) && source.pause) {
        source.pause();
      }
    }
  }

  source.on('data', ondata);

  function ondrain() {
    if (source.readable && source.resume) {
      source.resume();
    }
  }

  dest.on('drain', ondrain); // If the 'end' option is not supplied, dest.end() will be called when
  // source gets the 'end' or 'close' events.  Only dest.end() once.

  if (!dest._isStdio && (!options || options.end !== false)) {
    source.on('end', onend);
    source.on('close', onclose);
  }

  var didOnEnd = false;

  function onend() {
    if (didOnEnd) return;
    didOnEnd = true;
    dest.end();
  }

  function onclose() {
    if (didOnEnd) return;
    didOnEnd = true;
    if (typeof dest.destroy === 'function') dest.destroy();
  } // don't leave dangling pipes when there are errors.


  function onerror(er) {
    cleanup();

    if (EE.listenerCount(this, 'error') === 0) {
      throw er; // Unhandled stream error in pipe.
    }
  }

  source.on('error', onerror);
  dest.on('error', onerror); // remove all the event listeners that were added.

  function cleanup() {
    source.removeListener('data', ondata);
    dest.removeListener('drain', ondrain);
    source.removeListener('end', onend);
    source.removeListener('close', onclose);
    source.removeListener('error', onerror);
    dest.removeListener('error', onerror);
    source.removeListener('end', cleanup);
    source.removeListener('close', cleanup);
    dest.removeListener('close', cleanup);
  }

  source.on('end', cleanup);
  source.on('close', cleanup);
  dest.on('close', cleanup);
  dest.emit('pipe', source); // Allow for unix-like usage: A.pipe(B).pipe(C)

  return dest;
};

var _polyfillNode_stream = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': Stream,
  Readable: Readable,
  Writable: Writable,
  Duplex: Duplex,
  Transform: Transform,
  PassThrough: PassThrough,
  Stream: Stream
});

var require$$2 = /*@__PURE__*/getAugmentedNamespace(_polyfillNode_stream);
/** @license React v17.0.2
 * react-dom-server.node.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var l = objectAssign,
    n = React__default__default["default"],
    aa = require$$2;

function p(a) {
  for (var b = "https://reactjs.org/docs/error-decoder.html?invariant=" + a, c = 1; c < arguments.length; c++) b += "&args[]=" + encodeURIComponent(arguments[c]);

  return "Minified React error #" + a + "; visit " + b + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
}

var q = 60106,
    r = 60107,
    u = 60108,
    z = 60114,
    B = 60109,
    ba = 60110,
    ca = 60112,
    D = 60113,
    da = 60120,
    ea = 60115,
    fa = 60116,
    ha = 60121,
    ia = 60117,
    ja = 60119,
    ka = 60129,
    la = 60131;

if ("function" === typeof Symbol && Symbol.for) {
  var E = Symbol.for;
  q = E("react.portal");
  r = E("react.fragment");
  u = E("react.strict_mode");
  z = E("react.profiler");
  B = E("react.provider");
  ba = E("react.context");
  ca = E("react.forward_ref");
  D = E("react.suspense");
  da = E("react.suspense_list");
  ea = E("react.memo");
  fa = E("react.lazy");
  ha = E("react.block");
  ia = E("react.fundamental");
  ja = E("react.scope");
  ka = E("react.debug_trace_mode");
  la = E("react.legacy_hidden");
}

function F(a) {
  if (null == a) return null;
  if ("function" === typeof a) return a.displayName || a.name || null;
  if ("string" === typeof a) return a;

  switch (a) {
    case r:
      return "Fragment";

    case q:
      return "Portal";

    case z:
      return "Profiler";

    case u:
      return "StrictMode";

    case D:
      return "Suspense";

    case da:
      return "SuspenseList";
  }

  if ("object" === typeof a) switch (a.$$typeof) {
    case ba:
      return (a.displayName || "Context") + ".Consumer";

    case B:
      return (a._context.displayName || "Context") + ".Provider";

    case ca:
      var b = a.render;
      b = b.displayName || b.name || "";
      return a.displayName || ("" !== b ? "ForwardRef(" + b + ")" : "ForwardRef");

    case ea:
      return F(a.type);

    case ha:
      return F(a._render);

    case fa:
      b = a._payload;
      a = a._init;

      try {
        return F(a(b));
      } catch (c) {}

  }
  return null;
}

var ma = n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,
    na = {};

function I(a, b) {
  for (var c = a._threadCount | 0; c <= b; c++) a[c] = a._currentValue2, a._threadCount = c + 1;
}

function oa(a, b, c, d) {
  if (d && (d = a.contextType, "object" === typeof d && null !== d)) return I(d, c), d[c];

  if (a = a.contextTypes) {
    c = {};

    for (var f in a) c[f] = b[f];

    b = c;
  } else b = na;

  return b;
}

for (var J = new Uint16Array(16), K = 0; 15 > K; K++) J[K] = K + 1;

J[15] = 0;
var pa = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
    qa = Object.prototype.hasOwnProperty,
    ra = {},
    sa = {};

function ta(a) {
  if (qa.call(sa, a)) return !0;
  if (qa.call(ra, a)) return !1;
  if (pa.test(a)) return sa[a] = !0;
  ra[a] = !0;
  return !1;
}

function ua(a, b, c, d) {
  if (null !== c && 0 === c.type) return !1;

  switch (typeof b) {
    case "function":
    case "symbol":
      return !0;

    case "boolean":
      if (d) return !1;
      if (null !== c) return !c.acceptsBooleans;
      a = a.toLowerCase().slice(0, 5);
      return "data-" !== a && "aria-" !== a;

    default:
      return !1;
  }
}

function va(a, b, c, d) {
  if (null === b || "undefined" === typeof b || ua(a, b, c, d)) return !0;
  if (d) return !1;
  if (null !== c) switch (c.type) {
    case 3:
      return !b;

    case 4:
      return !1 === b;

    case 5:
      return isNaN(b);

    case 6:
      return isNaN(b) || 1 > b;
  }
  return !1;
}

function M(a, b, c, d, f, h, t) {
  this.acceptsBooleans = 2 === b || 3 === b || 4 === b;
  this.attributeName = d;
  this.attributeNamespace = f;
  this.mustUseProperty = c;
  this.propertyName = a;
  this.type = b;
  this.sanitizeURL = h;
  this.removeEmptyString = t;
}

var N = {};
"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function (a) {
  N[a] = new M(a, 0, !1, a, null, !1, !1);
});
[["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach(function (a) {
  var b = a[0];
  N[b] = new M(b, 1, !1, a[1], null, !1, !1);
});
["contentEditable", "draggable", "spellCheck", "value"].forEach(function (a) {
  N[a] = new M(a, 2, !1, a.toLowerCase(), null, !1, !1);
});
["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach(function (a) {
  N[a] = new M(a, 2, !1, a, null, !1, !1);
});
"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function (a) {
  N[a] = new M(a, 3, !1, a.toLowerCase(), null, !1, !1);
});
["checked", "multiple", "muted", "selected"].forEach(function (a) {
  N[a] = new M(a, 3, !0, a, null, !1, !1);
});
["capture", "download"].forEach(function (a) {
  N[a] = new M(a, 4, !1, a, null, !1, !1);
});
["cols", "rows", "size", "span"].forEach(function (a) {
  N[a] = new M(a, 6, !1, a, null, !1, !1);
});
["rowSpan", "start"].forEach(function (a) {
  N[a] = new M(a, 5, !1, a.toLowerCase(), null, !1, !1);
});
var wa = /[\-:]([a-z])/g;

function xa(a) {
  return a[1].toUpperCase();
}

"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function (a) {
  var b = a.replace(wa, xa);
  N[b] = new M(b, 1, !1, a, null, !1, !1);
});
"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function (a) {
  var b = a.replace(wa, xa);
  N[b] = new M(b, 1, !1, a, "http://www.w3.org/1999/xlink", !1, !1);
});
["xml:base", "xml:lang", "xml:space"].forEach(function (a) {
  var b = a.replace(wa, xa);
  N[b] = new M(b, 1, !1, a, "http://www.w3.org/XML/1998/namespace", !1, !1);
});
["tabIndex", "crossOrigin"].forEach(function (a) {
  N[a] = new M(a, 1, !1, a.toLowerCase(), null, !1, !1);
});
N.xlinkHref = new M("xlinkHref", 1, !1, "xlink:href", "http://www.w3.org/1999/xlink", !0, !1);
["src", "href", "action", "formAction"].forEach(function (a) {
  N[a] = new M(a, 1, !1, a.toLowerCase(), null, !0, !0);
});
var ya = /["'&<>]/;

function O(a) {
  if ("boolean" === typeof a || "number" === typeof a) return "" + a;
  a = "" + a;
  var b = ya.exec(a);

  if (b) {
    var c = "",
        d,
        f = 0;

    for (d = b.index; d < a.length; d++) {
      switch (a.charCodeAt(d)) {
        case 34:
          b = "&quot;";
          break;

        case 38:
          b = "&amp;";
          break;

        case 39:
          b = "&#x27;";
          break;

        case 60:
          b = "&lt;";
          break;

        case 62:
          b = "&gt;";
          break;

        default:
          continue;
      }

      f !== d && (c += a.substring(f, d));
      f = d + 1;
      c += b;
    }

    a = f !== d ? c + a.substring(f, d) : c;
  }

  return a;
}

function za(a, b) {
  var c = N.hasOwnProperty(a) ? N[a] : null;
  var d;
  if (d = "style" !== a) d = null !== c ? 0 === c.type : !(2 < a.length) || "o" !== a[0] && "O" !== a[0] || "n" !== a[1] && "N" !== a[1] ? !1 : !0;
  if (d || va(a, b, c, !1)) return "";

  if (null !== c) {
    a = c.attributeName;
    d = c.type;
    if (3 === d || 4 === d && !0 === b) return a + '=""';
    c.sanitizeURL && (b = "" + b);
    return a + '="' + (O(b) + '"');
  }

  return ta(a) ? a + '="' + (O(b) + '"') : "";
}

function Aa(a, b) {
  return a === b && (0 !== a || 1 / a === 1 / b) || a !== a && b !== b;
}

var Ba = "function" === typeof Object.is ? Object.is : Aa,
    P = null,
    Q = null,
    R = null,
    S = !1,
    T = !1,
    U = null,
    V = 0;

function W() {
  if (null === P) throw Error(p(321));
  return P;
}

function Ca() {
  if (0 < V) throw Error(p(312));
  return {
    memoizedState: null,
    queue: null,
    next: null
  };
}

function Da() {
  null === R ? null === Q ? (S = !1, Q = R = Ca()) : (S = !0, R = Q) : null === R.next ? (S = !1, R = R.next = Ca()) : (S = !0, R = R.next);
  return R;
}

function Ea(a, b, c, d) {
  for (; T;) T = !1, V += 1, R = null, c = a(b, d);

  Fa();
  return c;
}

function Fa() {
  P = null;
  T = !1;
  Q = null;
  V = 0;
  R = U = null;
}

function Ga(a, b) {
  return "function" === typeof b ? b(a) : b;
}

function Ha(a, b, c) {
  P = W();
  R = Da();

  if (S) {
    var d = R.queue;
    b = d.dispatch;

    if (null !== U && (c = U.get(d), void 0 !== c)) {
      U.delete(d);
      d = R.memoizedState;

      do d = a(d, c.action), c = c.next; while (null !== c);

      R.memoizedState = d;
      return [d, b];
    }

    return [R.memoizedState, b];
  }

  a = a === Ga ? "function" === typeof b ? b() : b : void 0 !== c ? c(b) : b;
  R.memoizedState = a;
  a = R.queue = {
    last: null,
    dispatch: null
  };
  a = a.dispatch = Ia.bind(null, P, a);
  return [R.memoizedState, a];
}

function Ja(a, b) {
  P = W();
  R = Da();
  b = void 0 === b ? null : b;

  if (null !== R) {
    var c = R.memoizedState;

    if (null !== c && null !== b) {
      var d = c[1];

      a: if (null === d) d = !1;else {
        for (var f = 0; f < d.length && f < b.length; f++) if (!Ba(b[f], d[f])) {
          d = !1;
          break a;
        }

        d = !0;
      }

      if (d) return c[0];
    }
  }

  a = a();
  R.memoizedState = [a, b];
  return a;
}

function Ia(a, b, c) {
  if (!(25 > V)) throw Error(p(301));
  if (a === P) if (T = !0, a = {
    action: c,
    next: null
  }, null === U && (U = new Map()), c = U.get(b), void 0 === c) U.set(b, a);else {
    for (b = c; null !== b.next;) b = b.next;

    b.next = a;
  }
}

function Ka() {}

var X = null,
    La = {
  readContext: function (a) {
    var b = X.threadID;
    I(a, b);
    return a[b];
  },
  useContext: function (a) {
    W();
    var b = X.threadID;
    I(a, b);
    return a[b];
  },
  useMemo: Ja,
  useReducer: Ha,
  useRef: function (a) {
    P = W();
    R = Da();
    var b = R.memoizedState;
    return null === b ? (a = {
      current: a
    }, R.memoizedState = a) : b;
  },
  useState: function (a) {
    return Ha(Ga, a);
  },
  useLayoutEffect: function () {},
  useCallback: function (a, b) {
    return Ja(function () {
      return a;
    }, b);
  },
  useImperativeHandle: Ka,
  useEffect: Ka,
  useDebugValue: Ka,
  useDeferredValue: function (a) {
    W();
    return a;
  },
  useTransition: function () {
    W();
    return [function (a) {
      a();
    }, !1];
  },
  useOpaqueIdentifier: function () {
    return (X.identifierPrefix || "") + "R:" + (X.uniqueID++).toString(36);
  },
  useMutableSource: function (a, b) {
    W();
    return b(a._source);
  }
},
    Ma = {
  html: "http://www.w3.org/1999/xhtml",
  mathml: "http://www.w3.org/1998/Math/MathML",
  svg: "http://www.w3.org/2000/svg"
};

function Na(a) {
  switch (a) {
    case "svg":
      return "http://www.w3.org/2000/svg";

    case "math":
      return "http://www.w3.org/1998/Math/MathML";

    default:
      return "http://www.w3.org/1999/xhtml";
  }
}

var Oa = {
  area: !0,
  base: !0,
  br: !0,
  col: !0,
  embed: !0,
  hr: !0,
  img: !0,
  input: !0,
  keygen: !0,
  link: !0,
  meta: !0,
  param: !0,
  source: !0,
  track: !0,
  wbr: !0
},
    Pa = l({
  menuitem: !0
}, Oa),
    Y = {
  animationIterationCount: !0,
  borderImageOutset: !0,
  borderImageSlice: !0,
  borderImageWidth: !0,
  boxFlex: !0,
  boxFlexGroup: !0,
  boxOrdinalGroup: !0,
  columnCount: !0,
  columns: !0,
  flex: !0,
  flexGrow: !0,
  flexPositive: !0,
  flexShrink: !0,
  flexNegative: !0,
  flexOrder: !0,
  gridArea: !0,
  gridRow: !0,
  gridRowEnd: !0,
  gridRowSpan: !0,
  gridRowStart: !0,
  gridColumn: !0,
  gridColumnEnd: !0,
  gridColumnSpan: !0,
  gridColumnStart: !0,
  fontWeight: !0,
  lineClamp: !0,
  lineHeight: !0,
  opacity: !0,
  order: !0,
  orphans: !0,
  tabSize: !0,
  widows: !0,
  zIndex: !0,
  zoom: !0,
  fillOpacity: !0,
  floodOpacity: !0,
  stopOpacity: !0,
  strokeDasharray: !0,
  strokeDashoffset: !0,
  strokeMiterlimit: !0,
  strokeOpacity: !0,
  strokeWidth: !0
},
    Qa = ["Webkit", "ms", "Moz", "O"];
Object.keys(Y).forEach(function (a) {
  Qa.forEach(function (b) {
    b = b + a.charAt(0).toUpperCase() + a.substring(1);
    Y[b] = Y[a];
  });
});
var Ra = /([A-Z])/g,
    Sa = /^ms-/,
    Z = n.Children.toArray,
    Ta = ma.ReactCurrentDispatcher,
    Ua = {
  listing: !0,
  pre: !0,
  textarea: !0
},
    Va = /^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,
    Wa = {},
    Xa = {};

function Ya(a) {
  if (void 0 === a || null === a) return a;
  var b = "";
  n.Children.forEach(a, function (a) {
    null != a && (b += a);
  });
  return b;
}

var Za = Object.prototype.hasOwnProperty,
    $a = {
  children: null,
  dangerouslySetInnerHTML: null,
  suppressContentEditableWarning: null,
  suppressHydrationWarning: null
};

function ab(a, b) {
  if (void 0 === a) throw Error(p(152, F(b) || "Component"));
}

function bb(a, b, c) {
  function d(d, h) {
    var e = h.prototype && h.prototype.isReactComponent,
        f = oa(h, b, c, e),
        t = [],
        g = !1,
        m = {
      isMounted: function () {
        return !1;
      },
      enqueueForceUpdate: function () {
        if (null === t) return null;
      },
      enqueueReplaceState: function (a, b) {
        g = !0;
        t = [b];
      },
      enqueueSetState: function (a, b) {
        if (null === t) return null;
        t.push(b);
      }
    };

    if (e) {
      if (e = new h(d.props, f, m), "function" === typeof h.getDerivedStateFromProps) {
        var k = h.getDerivedStateFromProps.call(null, d.props, e.state);
        null != k && (e.state = l({}, e.state, k));
      }
    } else if (P = {}, e = h(d.props, f, m), e = Ea(h, d.props, e, f), null == e || null == e.render) {
      a = e;
      ab(a, h);
      return;
    }

    e.props = d.props;
    e.context = f;
    e.updater = m;
    m = e.state;
    void 0 === m && (e.state = m = null);
    if ("function" === typeof e.UNSAFE_componentWillMount || "function" === typeof e.componentWillMount) if ("function" === typeof e.componentWillMount && "function" !== typeof h.getDerivedStateFromProps && e.componentWillMount(), "function" === typeof e.UNSAFE_componentWillMount && "function" !== typeof h.getDerivedStateFromProps && e.UNSAFE_componentWillMount(), t.length) {
      m = t;
      var v = g;
      t = null;
      g = !1;
      if (v && 1 === m.length) e.state = m[0];else {
        k = v ? m[0] : e.state;
        var H = !0;

        for (v = v ? 1 : 0; v < m.length; v++) {
          var x = m[v];
          x = "function" === typeof x ? x.call(e, k, d.props, f) : x;
          null != x && (H ? (H = !1, k = l({}, k, x)) : l(k, x));
        }

        e.state = k;
      }
    } else t = null;
    a = e.render();
    ab(a, h);

    if ("function" === typeof e.getChildContext && (d = h.childContextTypes, "object" === typeof d)) {
      var y = e.getChildContext();

      for (var A in y) if (!(A in d)) throw Error(p(108, F(h) || "Unknown", A));
    }

    y && (b = l({}, b, y));
  }

  for (; n.isValidElement(a);) {
    var f = a,
        h = f.type;
    if ("function" !== typeof h) break;
    d(f, h);
  }

  return {
    child: a,
    context: b
  };
}

var cb = function () {
  function a(a, b, f) {
    n.isValidElement(a) ? a.type !== r ? a = [a] : (a = a.props.children, a = n.isValidElement(a) ? [a] : Z(a)) : a = Z(a);
    a = {
      type: null,
      domNamespace: Ma.html,
      children: a,
      childIndex: 0,
      context: na,
      footer: ""
    };
    var c = J[0];

    if (0 === c) {
      var d = J;
      c = d.length;
      var g = 2 * c;
      if (!(65536 >= g)) throw Error(p(304));
      var e = new Uint16Array(g);
      e.set(d);
      J = e;
      J[0] = c + 1;

      for (d = c; d < g - 1; d++) J[d] = d + 1;

      J[g - 1] = 0;
    } else J[0] = J[c];

    this.threadID = c;
    this.stack = [a];
    this.exhausted = !1;
    this.currentSelectValue = null;
    this.previousWasTextNode = !1;
    this.makeStaticMarkup = b;
    this.suspenseDepth = 0;
    this.contextIndex = -1;
    this.contextStack = [];
    this.contextValueStack = [];
    this.uniqueID = 0;
    this.identifierPrefix = f && f.identifierPrefix || "";
  }

  var b = a.prototype;

  b.destroy = function () {
    if (!this.exhausted) {
      this.exhausted = !0;
      this.clearProviders();
      var a = this.threadID;
      J[a] = J[0];
      J[0] = a;
    }
  };

  b.pushProvider = function (a) {
    var b = ++this.contextIndex,
        c = a.type._context,
        h = this.threadID;
    I(c, h);
    var t = c[h];
    this.contextStack[b] = c;
    this.contextValueStack[b] = t;
    c[h] = a.props.value;
  };

  b.popProvider = function () {
    var a = this.contextIndex,
        b = this.contextStack[a],
        f = this.contextValueStack[a];
    this.contextStack[a] = null;
    this.contextValueStack[a] = null;
    this.contextIndex--;
    b[this.threadID] = f;
  };

  b.clearProviders = function () {
    for (var a = this.contextIndex; 0 <= a; a--) this.contextStack[a][this.threadID] = this.contextValueStack[a];
  };

  b.read = function (a) {
    if (this.exhausted) return null;
    var b = X;
    X = this;
    var c = Ta.current;
    Ta.current = La;

    try {
      for (var h = [""], t = !1; h[0].length < a;) {
        if (0 === this.stack.length) {
          this.exhausted = !0;
          var g = this.threadID;
          J[g] = J[0];
          J[0] = g;
          break;
        }

        var e = this.stack[this.stack.length - 1];

        if (t || e.childIndex >= e.children.length) {
          var L = e.footer;
          "" !== L && (this.previousWasTextNode = !1);
          this.stack.pop();
          if ("select" === e.type) this.currentSelectValue = null;else if (null != e.type && null != e.type.type && e.type.type.$$typeof === B) this.popProvider(e.type);else if (e.type === D) {
            this.suspenseDepth--;
            var G = h.pop();

            if (t) {
              t = !1;
              var C = e.fallbackFrame;
              if (!C) throw Error(p(303));
              this.stack.push(C);
              h[this.suspenseDepth] += "\x3c!--$!--\x3e";
              continue;
            } else h[this.suspenseDepth] += G;
          }
          h[this.suspenseDepth] += L;
        } else {
          var m = e.children[e.childIndex++],
              k = "";

          try {
            k += this.render(m, e.context, e.domNamespace);
          } catch (v) {
            if (null != v && "function" === typeof v.then) throw Error(p(294));
            throw v;
          } finally {}

          h.length <= this.suspenseDepth && h.push("");
          h[this.suspenseDepth] += k;
        }
      }

      return h[0];
    } finally {
      Ta.current = c, X = b, Fa();
    }
  };

  b.render = function (a, b, f) {
    if ("string" === typeof a || "number" === typeof a) {
      f = "" + a;
      if ("" === f) return "";
      if (this.makeStaticMarkup) return O(f);
      if (this.previousWasTextNode) return "\x3c!-- --\x3e" + O(f);
      this.previousWasTextNode = !0;
      return O(f);
    }

    b = bb(a, b, this.threadID);
    a = b.child;
    b = b.context;
    if (null === a || !1 === a) return "";

    if (!n.isValidElement(a)) {
      if (null != a && null != a.$$typeof) {
        f = a.$$typeof;
        if (f === q) throw Error(p(257));
        throw Error(p(258, f.toString()));
      }

      a = Z(a);
      this.stack.push({
        type: null,
        domNamespace: f,
        children: a,
        childIndex: 0,
        context: b,
        footer: ""
      });
      return "";
    }

    var c = a.type;
    if ("string" === typeof c) return this.renderDOM(a, b, f);

    switch (c) {
      case la:
      case ka:
      case u:
      case z:
      case da:
      case r:
        return a = Z(a.props.children), this.stack.push({
          type: null,
          domNamespace: f,
          children: a,
          childIndex: 0,
          context: b,
          footer: ""
        }), "";

      case D:
        throw Error(p(294));

      case ja:
        throw Error(p(343));
    }

    if ("object" === typeof c && null !== c) switch (c.$$typeof) {
      case ca:
        P = {};
        var d = c.render(a.props, a.ref);
        d = Ea(c.render, a.props, d, a.ref);
        d = Z(d);
        this.stack.push({
          type: null,
          domNamespace: f,
          children: d,
          childIndex: 0,
          context: b,
          footer: ""
        });
        return "";

      case ea:
        return a = [n.createElement(c.type, l({
          ref: a.ref
        }, a.props))], this.stack.push({
          type: null,
          domNamespace: f,
          children: a,
          childIndex: 0,
          context: b,
          footer: ""
        }), "";

      case B:
        return c = Z(a.props.children), f = {
          type: a,
          domNamespace: f,
          children: c,
          childIndex: 0,
          context: b,
          footer: ""
        }, this.pushProvider(a), this.stack.push(f), "";

      case ba:
        c = a.type;
        d = a.props;
        var g = this.threadID;
        I(c, g);
        c = Z(d.children(c[g]));
        this.stack.push({
          type: a,
          domNamespace: f,
          children: c,
          childIndex: 0,
          context: b,
          footer: ""
        });
        return "";

      case ia:
        throw Error(p(338));

      case fa:
        return c = a.type, d = c._init, c = d(c._payload), a = [n.createElement(c, l({
          ref: a.ref
        }, a.props))], this.stack.push({
          type: null,
          domNamespace: f,
          children: a,
          childIndex: 0,
          context: b,
          footer: ""
        }), "";
    }
    throw Error(p(130, null == c ? c : typeof c, ""));
  };

  b.renderDOM = function (a, b, f) {
    var c = a.type.toLowerCase();

    if (!Wa.hasOwnProperty(c)) {
      if (!Va.test(c)) throw Error(p(65, c));
      Wa[c] = !0;
    }

    var d = a.props;
    if ("input" === c) d = l({
      type: void 0
    }, d, {
      defaultChecked: void 0,
      defaultValue: void 0,
      value: null != d.value ? d.value : d.defaultValue,
      checked: null != d.checked ? d.checked : d.defaultChecked
    });else if ("textarea" === c) {
      var g = d.value;

      if (null == g) {
        g = d.defaultValue;
        var e = d.children;

        if (null != e) {
          if (null != g) throw Error(p(92));

          if (Array.isArray(e)) {
            if (!(1 >= e.length)) throw Error(p(93));
            e = e[0];
          }

          g = "" + e;
        }

        null == g && (g = "");
      }

      d = l({}, d, {
        value: void 0,
        children: "" + g
      });
    } else if ("select" === c) this.currentSelectValue = null != d.value ? d.value : d.defaultValue, d = l({}, d, {
      value: void 0
    });else if ("option" === c) {
      e = this.currentSelectValue;
      var L = Ya(d.children);

      if (null != e) {
        var G = null != d.value ? d.value + "" : L;
        g = !1;
        if (Array.isArray(e)) for (var C = 0; C < e.length; C++) {
          if ("" + e[C] === G) {
            g = !0;
            break;
          }
        } else g = "" + e === G;
        d = l({
          selected: void 0,
          children: void 0
        }, d, {
          selected: g,
          children: L
        });
      }
    }

    if (g = d) {
      if (Pa[c] && (null != g.children || null != g.dangerouslySetInnerHTML)) throw Error(p(137, c));

      if (null != g.dangerouslySetInnerHTML) {
        if (null != g.children) throw Error(p(60));
        if (!("object" === typeof g.dangerouslySetInnerHTML && "__html" in g.dangerouslySetInnerHTML)) throw Error(p(61));
      }

      if (null != g.style && "object" !== typeof g.style) throw Error(p(62));
    }

    g = d;
    e = this.makeStaticMarkup;
    L = 1 === this.stack.length;
    G = "<" + a.type;

    b: if (-1 === c.indexOf("-")) C = "string" === typeof g.is;else switch (c) {
      case "annotation-xml":
      case "color-profile":
      case "font-face":
      case "font-face-src":
      case "font-face-uri":
      case "font-face-format":
      case "font-face-name":
      case "missing-glyph":
        C = !1;
        break b;

      default:
        C = !0;
    }

    for (w in g) if (Za.call(g, w)) {
      var m = g[w];

      if (null != m) {
        if ("style" === w) {
          var k = void 0,
              v = "",
              H = "";

          for (k in m) if (m.hasOwnProperty(k)) {
            var x = 0 === k.indexOf("--"),
                y = m[k];

            if (null != y) {
              if (x) var A = k;else if (A = k, Xa.hasOwnProperty(A)) A = Xa[A];else {
                var eb = A.replace(Ra, "-$1").toLowerCase().replace(Sa, "-ms-");
                A = Xa[A] = eb;
              }
              v += H + A + ":";
              H = k;
              x = null == y || "boolean" === typeof y || "" === y ? "" : x || "number" !== typeof y || 0 === y || Y.hasOwnProperty(H) && Y[H] ? ("" + y).trim() : y + "px";
              v += x;
              H = ";";
            }
          }

          m = v || null;
        }

        k = null;
        C ? $a.hasOwnProperty(w) || (k = w, k = ta(k) && null != m ? k + '="' + (O(m) + '"') : "") : k = za(w, m);
        k && (G += " " + k);
      }
    }

    e || L && (G += ' data-reactroot=""');
    var w = G;
    g = "";
    Oa.hasOwnProperty(c) ? w += "/>" : (w += ">", g = "</" + a.type + ">");

    a: {
      e = d.dangerouslySetInnerHTML;

      if (null != e) {
        if (null != e.__html) {
          e = e.__html;
          break a;
        }
      } else if (e = d.children, "string" === typeof e || "number" === typeof e) {
        e = O(e);
        break a;
      }

      e = null;
    }

    null != e ? (d = [], Ua.hasOwnProperty(c) && "\n" === e.charAt(0) && (w += "\n"), w += e) : d = Z(d.children);
    a = a.type;
    f = null == f || "http://www.w3.org/1999/xhtml" === f ? Na(a) : "http://www.w3.org/2000/svg" === f && "foreignObject" === a ? "http://www.w3.org/1999/xhtml" : f;
    this.stack.push({
      domNamespace: f,
      type: c,
      children: d,
      childIndex: 0,
      context: b,
      footer: g
    });
    this.previousWasTextNode = !1;
    return w;
  };

  return a;
}();

function db(a, b) {
  a.prototype = Object.create(b.prototype);
  a.prototype.constructor = a;
  a.__proto__ = b;
}

var fb = function (a) {
  function b(b, c, h) {
    var d = a.call(this, {}) || this;
    d.partialRenderer = new cb(b, c, h);
    return d;
  }

  db(b, a);
  var c = b.prototype;

  c._destroy = function (a, b) {
    this.partialRenderer.destroy();
    b(a);
  };

  c._read = function (a) {
    try {
      this.push(this.partialRenderer.read(a));
    } catch (f) {
      this.destroy(f);
    }
  };

  return b;
}(aa.Readable);

reactDomServer_node_production_min.renderToNodeStream = function (a, b) {
  return new fb(a, !1, b);
};

reactDomServer_node_production_min.renderToStaticMarkup = function (a, b) {
  a = new cb(a, !0, b);

  try {
    return a.read(Infinity);
  } finally {
    a.destroy();
  }
};

reactDomServer_node_production_min.renderToStaticNodeStream = function (a, b) {
  return new fb(a, !0, b);
};

reactDomServer_node_production_min.renderToString = function (a, b) {
  a = new cb(a, !1, b);

  try {
    return a.read(Infinity);
  } finally {
    a.destroy();
  }
};

reactDomServer_node_production_min.version = "17.0.2";
var reactDomServer_node_development = {};
/** @license React v17.0.2
 * react-dom-server.node.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

if (process.env.NODE_ENV !== "production") {
  (function () {
    var React = React__default__default["default"];
    var _assign = objectAssign;
    var stream = require$$2; // TODO: this is special because it gets imported during build.

    var ReactVersion = '17.0.2'; // Do not require this module directly! Use normal `invariant` calls with
    // template literal strings. The messages will be replaced with error codes
    // during build.

    function formatProdErrorMessage(code) {
      var url = 'https://reactjs.org/docs/error-decoder.html?invariant=' + code;

      for (var i = 1; i < arguments.length; i++) {
        url += '&args[]=' + encodeURIComponent(arguments[i]);
      }

      return "Minified React error #" + code + "; visit " + url + " for the full message or " + 'use the non-minified dev environment for full errors and additional ' + 'helpful warnings.';
    }

    var ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED; // by calls to these methods by a Babel plugin.
    //
    // In PROD (or in packages without access to React internals),
    // they are left as they are instead.

    function warn(format) {
      {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        printWarning('warn', format, args);
      }
    }

    function error(format) {
      {
        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }

        printWarning('error', format, args);
      }
    }

    function printWarning(level, format, args) {
      // When changing this logic, you might want to also
      // update consoleWithStackDev.www.js as well.
      {
        var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;
        var stack = ReactDebugCurrentFrame.getStackAddendum();

        if (stack !== '') {
          format += '%s';
          args = args.concat([stack]);
        }

        var argsWithFormat = args.map(function (item) {
          return '' + item;
        }); // Careful: RN currently depends on this prefix

        argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it
        // breaks IE9: https://github.com/facebook/react/issues/13610
        // eslint-disable-next-line react-internal/no-production-logging

        Function.prototype.apply.call(console[level], console, argsWithFormat);
      }
    }

    var REACT_PORTAL_TYPE = 0xeaca;
    var REACT_FRAGMENT_TYPE = 0xeacb;
    var REACT_STRICT_MODE_TYPE = 0xeacc;
    var REACT_PROFILER_TYPE = 0xead2;
    var REACT_PROVIDER_TYPE = 0xeacd;
    var REACT_CONTEXT_TYPE = 0xeace;
    var REACT_FORWARD_REF_TYPE = 0xead0;
    var REACT_SUSPENSE_TYPE = 0xead1;
    var REACT_SUSPENSE_LIST_TYPE = 0xead8;
    var REACT_MEMO_TYPE = 0xead3;
    var REACT_LAZY_TYPE = 0xead4;
    var REACT_BLOCK_TYPE = 0xead9;
    var REACT_FUNDAMENTAL_TYPE = 0xead5;
    var REACT_SCOPE_TYPE = 0xead7;
    var REACT_DEBUG_TRACING_MODE_TYPE = 0xeae1;
    var REACT_LEGACY_HIDDEN_TYPE = 0xeae3;

    if (typeof Symbol === 'function' && Symbol.for) {
      var symbolFor = Symbol.for;
      symbolFor('react.element');
      REACT_PORTAL_TYPE = symbolFor('react.portal');
      REACT_FRAGMENT_TYPE = symbolFor('react.fragment');
      REACT_STRICT_MODE_TYPE = symbolFor('react.strict_mode');
      REACT_PROFILER_TYPE = symbolFor('react.profiler');
      REACT_PROVIDER_TYPE = symbolFor('react.provider');
      REACT_CONTEXT_TYPE = symbolFor('react.context');
      REACT_FORWARD_REF_TYPE = symbolFor('react.forward_ref');
      REACT_SUSPENSE_TYPE = symbolFor('react.suspense');
      REACT_SUSPENSE_LIST_TYPE = symbolFor('react.suspense_list');
      REACT_MEMO_TYPE = symbolFor('react.memo');
      REACT_LAZY_TYPE = symbolFor('react.lazy');
      REACT_BLOCK_TYPE = symbolFor('react.block');
      symbolFor('react.server.block');
      REACT_FUNDAMENTAL_TYPE = symbolFor('react.fundamental');
      REACT_SCOPE_TYPE = symbolFor('react.scope');
      symbolFor('react.opaque.id');
      REACT_DEBUG_TRACING_MODE_TYPE = symbolFor('react.debug_trace_mode');
      symbolFor('react.offscreen');
      REACT_LEGACY_HIDDEN_TYPE = symbolFor('react.legacy_hidden');
    }

    function getWrappedName(outerType, innerType, wrapperName) {
      var functionName = innerType.displayName || innerType.name || '';
      return outerType.displayName || (functionName !== '' ? wrapperName + "(" + functionName + ")" : wrapperName);
    }

    function getContextName(type) {
      return type.displayName || 'Context';
    }

    function getComponentName(type) {
      if (type == null) {
        // Host root, text node or just invalid type.
        return null;
      }

      {
        if (typeof type.tag === 'number') {
          error('Received an unexpected object in getComponentName(). ' + 'This is likely a bug in React. Please file an issue.');
        }
      }

      if (typeof type === 'function') {
        return type.displayName || type.name || null;
      }

      if (typeof type === 'string') {
        return type;
      }

      switch (type) {
        case REACT_FRAGMENT_TYPE:
          return 'Fragment';

        case REACT_PORTAL_TYPE:
          return 'Portal';

        case REACT_PROFILER_TYPE:
          return 'Profiler';

        case REACT_STRICT_MODE_TYPE:
          return 'StrictMode';

        case REACT_SUSPENSE_TYPE:
          return 'Suspense';

        case REACT_SUSPENSE_LIST_TYPE:
          return 'SuspenseList';
      }

      if (typeof type === 'object') {
        switch (type.$$typeof) {
          case REACT_CONTEXT_TYPE:
            var context = type;
            return getContextName(context) + '.Consumer';

          case REACT_PROVIDER_TYPE:
            var provider = type;
            return getContextName(provider._context) + '.Provider';

          case REACT_FORWARD_REF_TYPE:
            return getWrappedName(type, type.render, 'ForwardRef');

          case REACT_MEMO_TYPE:
            return getComponentName(type.type);

          case REACT_BLOCK_TYPE:
            return getComponentName(type._render);

          case REACT_LAZY_TYPE:
            {
              var lazyComponent = type;
              var payload = lazyComponent._payload;
              var init = lazyComponent._init;

              try {
                return getComponentName(init(payload));
              } catch (x) {
                return null;
              }
            }
        }
      }

      return null;
    } // Filter certain DOM attributes (e.g. src, href) if their values are empty strings.


    var enableSuspenseServerRenderer = false; // Helpers to patch console.logs to avoid logging during side-effect free
    // replaying on render function. This currently only patches the object
    // lazily which won't cover if the log function was extracted eagerly.
    // We could also eagerly patch the method.

    var disabledDepth = 0;
    var prevLog;
    var prevInfo;
    var prevWarn;
    var prevError;
    var prevGroup;
    var prevGroupCollapsed;
    var prevGroupEnd;

    function disabledLog() {}

    disabledLog.__reactDisabledLog = true;

    function disableLogs() {
      {
        if (disabledDepth === 0) {
          /* eslint-disable react-internal/no-production-logging */
          prevLog = console.log;
          prevInfo = console.info;
          prevWarn = console.warn;
          prevError = console.error;
          prevGroup = console.group;
          prevGroupCollapsed = console.groupCollapsed;
          prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099

          var props = {
            configurable: true,
            enumerable: true,
            value: disabledLog,
            writable: true
          }; // $FlowFixMe Flow thinks console is immutable.

          Object.defineProperties(console, {
            info: props,
            log: props,
            warn: props,
            error: props,
            group: props,
            groupCollapsed: props,
            groupEnd: props
          });
          /* eslint-enable react-internal/no-production-logging */
        }

        disabledDepth++;
      }
    }

    function reenableLogs() {
      {
        disabledDepth--;

        if (disabledDepth === 0) {
          /* eslint-disable react-internal/no-production-logging */
          var props = {
            configurable: true,
            enumerable: true,
            writable: true
          }; // $FlowFixMe Flow thinks console is immutable.

          Object.defineProperties(console, {
            log: _assign({}, props, {
              value: prevLog
            }),
            info: _assign({}, props, {
              value: prevInfo
            }),
            warn: _assign({}, props, {
              value: prevWarn
            }),
            error: _assign({}, props, {
              value: prevError
            }),
            group: _assign({}, props, {
              value: prevGroup
            }),
            groupCollapsed: _assign({}, props, {
              value: prevGroupCollapsed
            }),
            groupEnd: _assign({}, props, {
              value: prevGroupEnd
            })
          });
          /* eslint-enable react-internal/no-production-logging */
        }

        if (disabledDepth < 0) {
          error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');
        }
      }
    }

    var ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;
    var prefix;

    function describeBuiltInComponentFrame(name, source, ownerFn) {
      {
        if (prefix === undefined) {
          // Extract the VM specific prefix used by each line.
          try {
            throw Error();
          } catch (x) {
            var match = x.stack.trim().match(/\n( *(at )?)/);
            prefix = match && match[1] || '';
          }
        } // We use the prefix to ensure our stacks line up with native stack frames.


        return '\n' + prefix + name;
      }
    }

    var reentry = false;
    var componentFrameCache;
    {
      var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;
      componentFrameCache = new PossiblyWeakMap();
    }

    function describeNativeComponentFrame(fn, construct) {
      // If something asked for a stack inside a fake render, it should get ignored.
      if (!fn || reentry) {
        return '';
      }

      {
        var frame = componentFrameCache.get(fn);

        if (frame !== undefined) {
          return frame;
        }
      }
      var control;
      reentry = true;
      var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.

      Error.prepareStackTrace = undefined;
      var previousDispatcher;
      {
        previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function
        // for warnings.

        ReactCurrentDispatcher.current = null;
        disableLogs();
      }

      try {
        // This should throw.
        if (construct) {
          // Something should be setting the props in the constructor.
          var Fake = function () {
            throw Error();
          }; // $FlowFixMe


          Object.defineProperty(Fake.prototype, 'props', {
            set: function () {
              // We use a throwing setter instead of frozen or non-writable props
              // because that won't throw in a non-strict mode function.
              throw Error();
            }
          });

          if (typeof Reflect === 'object' && Reflect.construct) {
            // We construct a different control for this case to include any extra
            // frames added by the construct call.
            try {
              Reflect.construct(Fake, []);
            } catch (x) {
              control = x;
            }

            Reflect.construct(fn, [], Fake);
          } else {
            try {
              Fake.call();
            } catch (x) {
              control = x;
            }

            fn.call(Fake.prototype);
          }
        } else {
          try {
            throw Error();
          } catch (x) {
            control = x;
          }

          fn();
        }
      } catch (sample) {
        // This is inlined manually because closure doesn't do it for us.
        if (sample && control && typeof sample.stack === 'string') {
          // This extracts the first frame from the sample that isn't also in the control.
          // Skipping one frame that we assume is the frame that calls the two.
          var sampleLines = sample.stack.split('\n');
          var controlLines = control.stack.split('\n');
          var s = sampleLines.length - 1;
          var c = controlLines.length - 1;

          while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {
            // We expect at least one stack frame to be shared.
            // Typically this will be the root most one. However, stack frames may be
            // cut off due to maximum stack limits. In this case, one maybe cut off
            // earlier than the other. We assume that the sample is longer or the same
            // and there for cut off earlier. So we should find the root most frame in
            // the sample somewhere in the control.
            c--;
          }

          for (; s >= 1 && c >= 0; s--, c--) {
            // Next we find the first one that isn't the same which should be the
            // frame that called our sample function and the control.
            if (sampleLines[s] !== controlLines[c]) {
              // In V8, the first line is describing the message but other VMs don't.
              // If we're about to return the first line, and the control is also on the same
              // line, that's a pretty good indicator that our sample threw at same line as
              // the control. I.e. before we entered the sample frame. So we ignore this result.
              // This can happen if you passed a class to function component, or non-function.
              if (s !== 1 || c !== 1) {
                do {
                  s--;
                  c--; // We may still have similar intermediate frames from the construct call.
                  // The next one that isn't the same should be our match though.

                  if (c < 0 || sampleLines[s] !== controlLines[c]) {
                    // V8 adds a "new" prefix for native classes. Let's remove it to make it prettier.
                    var _frame = '\n' + sampleLines[s].replace(' at new ', ' at ');

                    {
                      if (typeof fn === 'function') {
                        componentFrameCache.set(fn, _frame);
                      }
                    } // Return the line we found.

                    return _frame;
                  }
                } while (s >= 1 && c >= 0);
              }

              break;
            }
          }
        }
      } finally {
        reentry = false;
        {
          ReactCurrentDispatcher.current = previousDispatcher;
          reenableLogs();
        }
        Error.prepareStackTrace = previousPrepareStackTrace;
      } // Fallback to just using the name if we couldn't make it throw.


      var name = fn ? fn.displayName || fn.name : '';
      var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';
      {
        if (typeof fn === 'function') {
          componentFrameCache.set(fn, syntheticFrame);
        }
      }
      return syntheticFrame;
    }

    function describeFunctionComponentFrame(fn, source, ownerFn) {
      {
        return describeNativeComponentFrame(fn, false);
      }
    }

    function shouldConstruct(Component) {
      var prototype = Component.prototype;
      return !!(prototype && prototype.isReactComponent);
    }

    function describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {
      if (type == null) {
        return '';
      }

      if (typeof type === 'function') {
        {
          return describeNativeComponentFrame(type, shouldConstruct(type));
        }
      }

      if (typeof type === 'string') {
        return describeBuiltInComponentFrame(type);
      }

      switch (type) {
        case REACT_SUSPENSE_TYPE:
          return describeBuiltInComponentFrame('Suspense');

        case REACT_SUSPENSE_LIST_TYPE:
          return describeBuiltInComponentFrame('SuspenseList');
      }

      if (typeof type === 'object') {
        switch (type.$$typeof) {
          case REACT_FORWARD_REF_TYPE:
            return describeFunctionComponentFrame(type.render);

          case REACT_MEMO_TYPE:
            // Memo may contain any component type so we recursively resolve it.
            return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);

          case REACT_BLOCK_TYPE:
            return describeFunctionComponentFrame(type._render);

          case REACT_LAZY_TYPE:
            {
              var lazyComponent = type;
              var payload = lazyComponent._payload;
              var init = lazyComponent._init;

              try {
                // Lazy may contain any component type so we recursively resolve it.
                return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);
              } catch (x) {}
            }
        }
      }

      return '';
    }

    var loggedTypeFailures = {};
    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;

    function setCurrentlyValidatingElement(element) {
      {
        if (element) {
          var owner = element._owner;
          var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);
          ReactDebugCurrentFrame.setExtraStackFrame(stack);
        } else {
          ReactDebugCurrentFrame.setExtraStackFrame(null);
        }
      }
    }

    function checkPropTypes(typeSpecs, values, location, componentName, element) {
      {
        // $FlowFixMe This is okay but Flow doesn't know it.
        var has = Function.call.bind(Object.prototype.hasOwnProperty);

        for (var typeSpecName in typeSpecs) {
          if (has(typeSpecs, typeSpecName)) {
            var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to
            // fail the render phase where it didn't fail before. So we log it.
            // After these have been cleaned up, we'll let them throw.

            try {
              // This is intentionally an invariant that gets caught. It's the same
              // behavior as without this statement except with a better message.
              if (typeof typeSpecs[typeSpecName] !== 'function') {
                var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');
                err.name = 'Invariant Violation';
                throw err;
              }

              error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');
            } catch (ex) {
              error$1 = ex;
            }

            if (error$1 && !(error$1 instanceof Error)) {
              setCurrentlyValidatingElement(element);
              error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);
              setCurrentlyValidatingElement(null);
            }

            if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {
              // Only monitor this failure once because there tends to be a lot of the
              // same error.
              loggedTypeFailures[error$1.message] = true;
              setCurrentlyValidatingElement(element);
              error('Failed %s type: %s', location, error$1.message);
              setCurrentlyValidatingElement(null);
            }
          }
        }
      }
    }

    var didWarnAboutInvalidateContextType;
    {
      didWarnAboutInvalidateContextType = new Set();
    }
    var emptyObject = {};
    {
      Object.freeze(emptyObject);
    }

    function maskContext(type, context) {
      var contextTypes = type.contextTypes;

      if (!contextTypes) {
        return emptyObject;
      }

      var maskedContext = {};

      for (var contextName in contextTypes) {
        maskedContext[contextName] = context[contextName];
      }

      return maskedContext;
    }

    function checkContextTypes(typeSpecs, values, location) {
      {
        checkPropTypes(typeSpecs, values, location, 'Component');
      }
    }

    function validateContextBounds(context, threadID) {
      // If we don't have enough slots in this context to store this threadID,
      // fill it in without leaving any holes to ensure that the VM optimizes
      // this as non-holey index properties.
      // (Note: If `react` package is < 16.6, _threadCount is undefined.)
      for (var i = context._threadCount | 0; i <= threadID; i++) {
        // We assume that this is the same as the defaultValue which might not be
        // true if we're rendering inside a secondary renderer but they are
        // secondary because these use cases are very rare.
        context[i] = context._currentValue2;
        context._threadCount = i + 1;
      }
    }

    function processContext(type, context, threadID, isClass) {
      if (isClass) {
        var contextType = type.contextType;
        {
          if ('contextType' in type) {
            var isValid = // Allow null for conditional declaration
            contextType === null || contextType !== undefined && contextType.$$typeof === REACT_CONTEXT_TYPE && contextType._context === undefined; // Not a <Context.Consumer>

            if (!isValid && !didWarnAboutInvalidateContextType.has(type)) {
              didWarnAboutInvalidateContextType.add(type);
              var addendum = '';

              if (contextType === undefined) {
                addendum = ' However, it is set to undefined. ' + 'This can be caused by a typo or by mixing up named and default imports. ' + 'This can also happen due to a circular dependency, so ' + 'try moving the createContext() call to a separate file.';
              } else if (typeof contextType !== 'object') {
                addendum = ' However, it is set to a ' + typeof contextType + '.';
              } else if (contextType.$$typeof === REACT_PROVIDER_TYPE) {
                addendum = ' Did you accidentally pass the Context.Provider instead?';
              } else if (contextType._context !== undefined) {
                // <Context.Consumer>
                addendum = ' Did you accidentally pass the Context.Consumer instead?';
              } else {
                addendum = ' However, it is set to an object with keys {' + Object.keys(contextType).join(', ') + '}.';
              }

              error('%s defines an invalid contextType. ' + 'contextType should point to the Context object returned by React.createContext().%s', getComponentName(type) || 'Component', addendum);
            }
          }
        }

        if (typeof contextType === 'object' && contextType !== null) {
          validateContextBounds(contextType, threadID);
          return contextType[threadID];
        }

        {
          var maskedContext = maskContext(type, context);
          {
            if (type.contextTypes) {
              checkContextTypes(type.contextTypes, maskedContext, 'context');
            }
          }
          return maskedContext;
        }
      } else {
        {
          var _maskedContext = maskContext(type, context);

          {
            if (type.contextTypes) {
              checkContextTypes(type.contextTypes, _maskedContext, 'context');
            }
          }
          return _maskedContext;
        }
      }
    }

    var nextAvailableThreadIDs = new Uint16Array(16);

    for (var i = 0; i < 15; i++) {
      nextAvailableThreadIDs[i] = i + 1;
    }

    nextAvailableThreadIDs[15] = 0;

    function growThreadCountAndReturnNextAvailable() {
      var oldArray = nextAvailableThreadIDs;
      var oldSize = oldArray.length;
      var newSize = oldSize * 2;

      if (!(newSize <= 0x10000)) {
        {
          throw Error("Maximum number of concurrent React renderers exceeded. This can happen if you are not properly destroying the Readable provided by React. Ensure that you call .destroy() on it if you no longer want to read from it, and did not read to the end. If you use .pipe() this should be automatic.");
        }
      }

      var newArray = new Uint16Array(newSize);
      newArray.set(oldArray);
      nextAvailableThreadIDs = newArray;
      nextAvailableThreadIDs[0] = oldSize + 1;

      for (var _i = oldSize; _i < newSize - 1; _i++) {
        nextAvailableThreadIDs[_i] = _i + 1;
      }

      nextAvailableThreadIDs[newSize - 1] = 0;
      return oldSize;
    }

    function allocThreadID() {
      var nextID = nextAvailableThreadIDs[0];

      if (nextID === 0) {
        return growThreadCountAndReturnNextAvailable();
      }

      nextAvailableThreadIDs[0] = nextAvailableThreadIDs[nextID];
      return nextID;
    }

    function freeThreadID(id) {
      nextAvailableThreadIDs[id] = nextAvailableThreadIDs[0];
      nextAvailableThreadIDs[0] = id;
    } // A reserved attribute.
    // It is handled by React separately and shouldn't be written to the DOM.


    var RESERVED = 0; // A simple string attribute.
    // Attributes that aren't in the filter are presumed to have this type.

    var STRING = 1; // A string attribute that accepts booleans in React. In HTML, these are called
    // "enumerated" attributes with "true" and "false" as possible values.
    // When true, it should be set to a "true" string.
    // When false, it should be set to a "false" string.

    var BOOLEANISH_STRING = 2; // A real boolean attribute.
    // When true, it should be present (set either to an empty string or its name).
    // When false, it should be omitted.

    var BOOLEAN = 3; // An attribute that can be used as a flag as well as with a value.
    // When true, it should be present (set either to an empty string or its name).
    // When false, it should be omitted.
    // For any other value, should be present with that value.

    var OVERLOADED_BOOLEAN = 4; // An attribute that must be numeric or parse as a numeric.
    // When falsy, it should be removed.

    var NUMERIC = 5; // An attribute that must be positive numeric or parse as a positive numeric.
    // When falsy, it should be removed.

    var POSITIVE_NUMERIC = 6;
    /* eslint-disable max-len */

    var ATTRIBUTE_NAME_START_CHAR = ":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";
    /* eslint-enable max-len */

    var ATTRIBUTE_NAME_CHAR = ATTRIBUTE_NAME_START_CHAR + "\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040";
    var ROOT_ATTRIBUTE_NAME = 'data-reactroot';
    var VALID_ATTRIBUTE_NAME_REGEX = new RegExp('^[' + ATTRIBUTE_NAME_START_CHAR + '][' + ATTRIBUTE_NAME_CHAR + ']*$');
    var hasOwnProperty = Object.prototype.hasOwnProperty;
    var illegalAttributeNameCache = {};
    var validatedAttributeNameCache = {};

    function isAttributeNameSafe(attributeName) {
      if (hasOwnProperty.call(validatedAttributeNameCache, attributeName)) {
        return true;
      }

      if (hasOwnProperty.call(illegalAttributeNameCache, attributeName)) {
        return false;
      }

      if (VALID_ATTRIBUTE_NAME_REGEX.test(attributeName)) {
        validatedAttributeNameCache[attributeName] = true;
        return true;
      }

      illegalAttributeNameCache[attributeName] = true;
      {
        error('Invalid attribute name: `%s`', attributeName);
      }
      return false;
    }

    function shouldIgnoreAttribute(name, propertyInfo, isCustomComponentTag) {
      if (propertyInfo !== null) {
        return propertyInfo.type === RESERVED;
      }

      if (isCustomComponentTag) {
        return false;
      }

      if (name.length > 2 && (name[0] === 'o' || name[0] === 'O') && (name[1] === 'n' || name[1] === 'N')) {
        return true;
      }

      return false;
    }

    function shouldRemoveAttributeWithWarning(name, value, propertyInfo, isCustomComponentTag) {
      if (propertyInfo !== null && propertyInfo.type === RESERVED) {
        return false;
      }

      switch (typeof value) {
        case 'function': // $FlowIssue symbol is perfectly valid here

        case 'symbol':
          // eslint-disable-line
          return true;

        case 'boolean':
          {
            if (isCustomComponentTag) {
              return false;
            }

            if (propertyInfo !== null) {
              return !propertyInfo.acceptsBooleans;
            } else {
              var prefix = name.toLowerCase().slice(0, 5);
              return prefix !== 'data-' && prefix !== 'aria-';
            }
          }

        default:
          return false;
      }
    }

    function shouldRemoveAttribute(name, value, propertyInfo, isCustomComponentTag) {
      if (value === null || typeof value === 'undefined') {
        return true;
      }

      if (shouldRemoveAttributeWithWarning(name, value, propertyInfo, isCustomComponentTag)) {
        return true;
      }

      if (isCustomComponentTag) {
        return false;
      }

      if (propertyInfo !== null) {
        switch (propertyInfo.type) {
          case BOOLEAN:
            return !value;

          case OVERLOADED_BOOLEAN:
            return value === false;

          case NUMERIC:
            return isNaN(value);

          case POSITIVE_NUMERIC:
            return isNaN(value) || value < 1;
        }
      }

      return false;
    }

    function getPropertyInfo(name) {
      return properties.hasOwnProperty(name) ? properties[name] : null;
    }

    function PropertyInfoRecord(name, type, mustUseProperty, attributeName, attributeNamespace, sanitizeURL, removeEmptyString) {
      this.acceptsBooleans = type === BOOLEANISH_STRING || type === BOOLEAN || type === OVERLOADED_BOOLEAN;
      this.attributeName = attributeName;
      this.attributeNamespace = attributeNamespace;
      this.mustUseProperty = mustUseProperty;
      this.propertyName = name;
      this.type = type;
      this.sanitizeURL = sanitizeURL;
      this.removeEmptyString = removeEmptyString;
    } // When adding attributes to this list, be sure to also add them to
    // the `possibleStandardNames` module to ensure casing and incorrect
    // name warnings.


    var properties = {}; // These props are reserved by React. They shouldn't be written to the DOM.

    var reservedProps = ['children', 'dangerouslySetInnerHTML', // TODO: This prevents the assignment of defaultValue to regular
    // elements (not just inputs). Now that ReactDOMInput assigns to the
    // defaultValue property -- do we need this?
    'defaultValue', 'defaultChecked', 'innerHTML', 'suppressContentEditableWarning', 'suppressHydrationWarning', 'style'];
    reservedProps.forEach(function (name) {
      properties[name] = new PropertyInfoRecord(name, RESERVED, false, // mustUseProperty
      name, // attributeName
      null, // attributeNamespace
      false, // sanitizeURL
      false);
    }); // A few React string attributes have a different name.
    // This is a mapping from React prop names to the attribute names.

    [['acceptCharset', 'accept-charset'], ['className', 'class'], ['htmlFor', 'for'], ['httpEquiv', 'http-equiv']].forEach(function (_ref) {
      var name = _ref[0],
          attributeName = _ref[1];
      properties[name] = new PropertyInfoRecord(name, STRING, false, // mustUseProperty
      attributeName, // attributeName
      null, // attributeNamespace
      false, // sanitizeURL
      false);
    }); // These are "enumerated" HTML attributes that accept "true" and "false".
    // In React, we let users pass `true` and `false` even though technically
    // these aren't boolean attributes (they are coerced to strings).

    ['contentEditable', 'draggable', 'spellCheck', 'value'].forEach(function (name) {
      properties[name] = new PropertyInfoRecord(name, BOOLEANISH_STRING, false, // mustUseProperty
      name.toLowerCase(), // attributeName
      null, // attributeNamespace
      false, // sanitizeURL
      false);
    }); // These are "enumerated" SVG attributes that accept "true" and "false".
    // In React, we let users pass `true` and `false` even though technically
    // these aren't boolean attributes (they are coerced to strings).
    // Since these are SVG attributes, their attribute names are case-sensitive.

    ['autoReverse', 'externalResourcesRequired', 'focusable', 'preserveAlpha'].forEach(function (name) {
      properties[name] = new PropertyInfoRecord(name, BOOLEANISH_STRING, false, // mustUseProperty
      name, // attributeName
      null, // attributeNamespace
      false, // sanitizeURL
      false);
    }); // These are HTML boolean attributes.

    ['allowFullScreen', 'async', // Note: there is a special case that prevents it from being written to the DOM
    // on the client side because the browsers are inconsistent. Instead we call focus().
    'autoFocus', 'autoPlay', 'controls', 'default', 'defer', 'disabled', 'disablePictureInPicture', 'disableRemotePlayback', 'formNoValidate', 'hidden', 'loop', 'noModule', 'noValidate', 'open', 'playsInline', 'readOnly', 'required', 'reversed', 'scoped', 'seamless', // Microdata
    'itemScope'].forEach(function (name) {
      properties[name] = new PropertyInfoRecord(name, BOOLEAN, false, // mustUseProperty
      name.toLowerCase(), // attributeName
      null, // attributeNamespace
      false, // sanitizeURL
      false);
    }); // These are the few React props that we set as DOM properties
    // rather than attributes. These are all booleans.

    ['checked', // Note: `option.selected` is not updated if `select.multiple` is
    // disabled with `removeAttribute`. We have special logic for handling this.
    'multiple', 'muted', 'selected' // NOTE: if you add a camelCased prop to this list,
    // you'll need to set attributeName to name.toLowerCase()
    // instead in the assignment below.
    ].forEach(function (name) {
      properties[name] = new PropertyInfoRecord(name, BOOLEAN, true, // mustUseProperty
      name, // attributeName
      null, // attributeNamespace
      false, // sanitizeURL
      false);
    }); // These are HTML attributes that are "overloaded booleans": they behave like
    // booleans, but can also accept a string value.

    ['capture', 'download' // NOTE: if you add a camelCased prop to this list,
    // you'll need to set attributeName to name.toLowerCase()
    // instead in the assignment below.
    ].forEach(function (name) {
      properties[name] = new PropertyInfoRecord(name, OVERLOADED_BOOLEAN, false, // mustUseProperty
      name, // attributeName
      null, // attributeNamespace
      false, // sanitizeURL
      false);
    }); // These are HTML attributes that must be positive numbers.

    ['cols', 'rows', 'size', 'span' // NOTE: if you add a camelCased prop to this list,
    // you'll need to set attributeName to name.toLowerCase()
    // instead in the assignment below.
    ].forEach(function (name) {
      properties[name] = new PropertyInfoRecord(name, POSITIVE_NUMERIC, false, // mustUseProperty
      name, // attributeName
      null, // attributeNamespace
      false, // sanitizeURL
      false);
    }); // These are HTML attributes that must be numbers.

    ['rowSpan', 'start'].forEach(function (name) {
      properties[name] = new PropertyInfoRecord(name, NUMERIC, false, // mustUseProperty
      name.toLowerCase(), // attributeName
      null, // attributeNamespace
      false, // sanitizeURL
      false);
    });
    var CAMELIZE = /[\-\:]([a-z])/g;

    var capitalize = function (token) {
      return token[1].toUpperCase();
    }; // This is a list of all SVG attributes that need special casing, namespacing,
    // or boolean value assignment. Regular attributes that just accept strings
    // and have the same names are omitted, just like in the HTML attribute filter.
    // Some of these attributes can be hard to find. This list was created by
    // scraping the MDN documentation.


    ['accent-height', 'alignment-baseline', 'arabic-form', 'baseline-shift', 'cap-height', 'clip-path', 'clip-rule', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'dominant-baseline', 'enable-background', 'fill-opacity', 'fill-rule', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'glyph-name', 'glyph-orientation-horizontal', 'glyph-orientation-vertical', 'horiz-adv-x', 'horiz-origin-x', 'image-rendering', 'letter-spacing', 'lighting-color', 'marker-end', 'marker-mid', 'marker-start', 'overline-position', 'overline-thickness', 'paint-order', 'panose-1', 'pointer-events', 'rendering-intent', 'shape-rendering', 'stop-color', 'stop-opacity', 'strikethrough-position', 'strikethrough-thickness', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke-width', 'text-anchor', 'text-decoration', 'text-rendering', 'underline-position', 'underline-thickness', 'unicode-bidi', 'unicode-range', 'units-per-em', 'v-alphabetic', 'v-hanging', 'v-ideographic', 'v-mathematical', 'vector-effect', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'word-spacing', 'writing-mode', 'xmlns:xlink', 'x-height' // NOTE: if you add a camelCased prop to this list,
    // you'll need to set attributeName to name.toLowerCase()
    // instead in the assignment below.
    ].forEach(function (attributeName) {
      var name = attributeName.replace(CAMELIZE, capitalize);
      properties[name] = new PropertyInfoRecord(name, STRING, false, // mustUseProperty
      attributeName, null, // attributeNamespace
      false, // sanitizeURL
      false);
    }); // String SVG attributes with the xlink namespace.

    ['xlink:actuate', 'xlink:arcrole', 'xlink:role', 'xlink:show', 'xlink:title', 'xlink:type' // NOTE: if you add a camelCased prop to this list,
    // you'll need to set attributeName to name.toLowerCase()
    // instead in the assignment below.
    ].forEach(function (attributeName) {
      var name = attributeName.replace(CAMELIZE, capitalize);
      properties[name] = new PropertyInfoRecord(name, STRING, false, // mustUseProperty
      attributeName, 'http://www.w3.org/1999/xlink', false, // sanitizeURL
      false);
    }); // String SVG attributes with the xml namespace.

    ['xml:base', 'xml:lang', 'xml:space' // NOTE: if you add a camelCased prop to this list,
    // you'll need to set attributeName to name.toLowerCase()
    // instead in the assignment below.
    ].forEach(function (attributeName) {
      var name = attributeName.replace(CAMELIZE, capitalize);
      properties[name] = new PropertyInfoRecord(name, STRING, false, // mustUseProperty
      attributeName, 'http://www.w3.org/XML/1998/namespace', false, // sanitizeURL
      false);
    }); // These attribute exists both in HTML and SVG.
    // The attribute name is case-sensitive in SVG so we can't just use
    // the React name like we do for attributes that exist only in HTML.

    ['tabIndex', 'crossOrigin'].forEach(function (attributeName) {
      properties[attributeName] = new PropertyInfoRecord(attributeName, STRING, false, // mustUseProperty
      attributeName.toLowerCase(), // attributeName
      null, // attributeNamespace
      false, // sanitizeURL
      false);
    }); // These attributes accept URLs. These must not allow javascript: URLS.
    // These will also need to accept Trusted Types object in the future.

    var xlinkHref = 'xlinkHref';
    properties[xlinkHref] = new PropertyInfoRecord('xlinkHref', STRING, false, // mustUseProperty
    'xlink:href', 'http://www.w3.org/1999/xlink', true, // sanitizeURL
    false);
    ['src', 'href', 'action', 'formAction'].forEach(function (attributeName) {
      properties[attributeName] = new PropertyInfoRecord(attributeName, STRING, false, // mustUseProperty
      attributeName.toLowerCase(), // attributeName
      null, // attributeNamespace
      true, // sanitizeURL
      true);
    }); // and any newline or tab are filtered out as if they're not part of the URL.
    // https://url.spec.whatwg.org/#url-parsing
    // Tab or newline are defined as \r\n\t:
    // https://infra.spec.whatwg.org/#ascii-tab-or-newline
    // A C0 control is a code point in the range \u0000 NULL to \u001F
    // INFORMATION SEPARATOR ONE, inclusive:
    // https://infra.spec.whatwg.org/#c0-control-or-space

    /* eslint-disable max-len */

    var isJavaScriptProtocol = /^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;
    var didWarn = false;

    function sanitizeURL(url) {
      {
        if (!didWarn && isJavaScriptProtocol.test(url)) {
          didWarn = true;
          error('A future version of React will block javascript: URLs as a security precaution. ' + 'Use event handlers instead if you can. If you need to generate unsafe HTML try ' + 'using dangerouslySetInnerHTML instead. React was passed %s.', JSON.stringify(url));
        }
      }
    } // code copied and modified from escape-html

    /**
     * Module variables.
     * @private
     */


    var matchHtmlRegExp = /["'&<>]/;
    /**
     * Escapes special characters and HTML entities in a given html string.
     *
     * @param  {string} string HTML string to escape for later insertion
     * @return {string}
     * @public
     */

    function escapeHtml(string) {
      var str = '' + string;
      var match = matchHtmlRegExp.exec(str);

      if (!match) {
        return str;
      }

      var escape;
      var html = '';
      var index;
      var lastIndex = 0;

      for (index = match.index; index < str.length; index++) {
        switch (str.charCodeAt(index)) {
          case 34:
            // "
            escape = '&quot;';
            break;

          case 38:
            // &
            escape = '&amp;';
            break;

          case 39:
            // '
            escape = '&#x27;'; // modified from escape-html; used to be '&#39'

            break;

          case 60:
            // <
            escape = '&lt;';
            break;

          case 62:
            // >
            escape = '&gt;';
            break;

          default:
            continue;
        }

        if (lastIndex !== index) {
          html += str.substring(lastIndex, index);
        }

        lastIndex = index + 1;
        html += escape;
      }

      return lastIndex !== index ? html + str.substring(lastIndex, index) : html;
    } // end code copied and modified from escape-html

    /**
     * Escapes text to prevent scripting attacks.
     *
     * @param {*} text Text value to escape.
     * @return {string} An escaped string.
     */


    function escapeTextForBrowser(text) {
      if (typeof text === 'boolean' || typeof text === 'number') {
        // this shortcircuit helps perf for types that we know will never have
        // special characters, especially given that this function is used often
        // for numeric dom ids.
        return '' + text;
      }

      return escapeHtml(text);
    }
    /**
     * Escapes attribute value to prevent scripting attacks.
     *
     * @param {*} value Value to escape.
     * @return {string} An escaped string.
     */


    function quoteAttributeValueForBrowser(value) {
      return '"' + escapeTextForBrowser(value) + '"';
    }

    function createMarkupForRoot() {
      return ROOT_ATTRIBUTE_NAME + '=""';
    }
    /**
     * Creates markup for a property.
     *
     * @param {string} name
     * @param {*} value
     * @return {?string} Markup string, or null if the property was invalid.
     */


    function createMarkupForProperty(name, value) {
      var propertyInfo = getPropertyInfo(name);

      if (name !== 'style' && shouldIgnoreAttribute(name, propertyInfo, false)) {
        return '';
      }

      if (shouldRemoveAttribute(name, value, propertyInfo, false)) {
        return '';
      }

      if (propertyInfo !== null) {
        var attributeName = propertyInfo.attributeName;
        var type = propertyInfo.type;

        if (type === BOOLEAN || type === OVERLOADED_BOOLEAN && value === true) {
          return attributeName + '=""';
        } else {
          if (propertyInfo.sanitizeURL) {
            value = '' + value;
            sanitizeURL(value);
          }

          return attributeName + '=' + quoteAttributeValueForBrowser(value);
        }
      } else if (isAttributeNameSafe(name)) {
        return name + '=' + quoteAttributeValueForBrowser(value);
      }

      return '';
    }
    /**
     * Creates markup for a custom property.
     *
     * @param {string} name
     * @param {*} value
     * @return {string} Markup string, or empty string if the property was invalid.
     */


    function createMarkupForCustomAttribute(name, value) {
      if (!isAttributeNameSafe(name) || value == null) {
        return '';
      }

      return name + '=' + quoteAttributeValueForBrowser(value);
    }
    /**
     * inlined Object.is polyfill to avoid requiring consumers ship their own
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is
     */


    function is(x, y) {
      return x === y && (x !== 0 || 1 / x === 1 / y) || x !== x && y !== y // eslint-disable-line no-self-compare
      ;
    }

    var objectIs = typeof Object.is === 'function' ? Object.is : is;
    var currentlyRenderingComponent = null;
    var firstWorkInProgressHook = null;
    var workInProgressHook = null; // Whether the work-in-progress hook is a re-rendered hook

    var isReRender = false; // Whether an update was scheduled during the currently executing render pass.

    var didScheduleRenderPhaseUpdate = false; // Lazily created map of render-phase updates

    var renderPhaseUpdates = null; // Counter to prevent infinite loops.

    var numberOfReRenders = 0;
    var RE_RENDER_LIMIT = 25;
    var isInHookUserCodeInDev = false; // In DEV, this is the name of the currently executing primitive hook

    var currentHookNameInDev;

    function resolveCurrentlyRenderingComponent() {
      if (!(currentlyRenderingComponent !== null)) {
        {
          throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.");
        }
      }

      {
        if (isInHookUserCodeInDev) {
          error('Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. ' + 'You can only call Hooks at the top level of your React function. ' + 'For more information, see ' + 'https://reactjs.org/link/rules-of-hooks');
        }
      }
      return currentlyRenderingComponent;
    }

    function areHookInputsEqual(nextDeps, prevDeps) {
      if (prevDeps === null) {
        {
          error('%s received a final argument during this render, but not during ' + 'the previous render. Even though the final argument is optional, ' + 'its type cannot change between renders.', currentHookNameInDev);
        }
        return false;
      }

      {
        // Don't bother comparing lengths in prod because these arrays should be
        // passed inline.
        if (nextDeps.length !== prevDeps.length) {
          error('The final argument passed to %s changed size between renders. The ' + 'order and size of this array must remain constant.\n\n' + 'Previous: %s\n' + 'Incoming: %s', currentHookNameInDev, "[" + nextDeps.join(', ') + "]", "[" + prevDeps.join(', ') + "]");
        }
      }

      for (var i = 0; i < prevDeps.length && i < nextDeps.length; i++) {
        if (objectIs(nextDeps[i], prevDeps[i])) {
          continue;
        }

        return false;
      }

      return true;
    }

    function createHook() {
      if (numberOfReRenders > 0) {
        {
          {
            throw Error("Rendered more hooks than during the previous render");
          }
        }
      }

      return {
        memoizedState: null,
        queue: null,
        next: null
      };
    }

    function createWorkInProgressHook() {
      if (workInProgressHook === null) {
        // This is the first hook in the list
        if (firstWorkInProgressHook === null) {
          isReRender = false;
          firstWorkInProgressHook = workInProgressHook = createHook();
        } else {
          // There's already a work-in-progress. Reuse it.
          isReRender = true;
          workInProgressHook = firstWorkInProgressHook;
        }
      } else {
        if (workInProgressHook.next === null) {
          isReRender = false; // Append to the end of the list

          workInProgressHook = workInProgressHook.next = createHook();
        } else {
          // There's already a work-in-progress. Reuse it.
          isReRender = true;
          workInProgressHook = workInProgressHook.next;
        }
      }

      return workInProgressHook;
    }

    function prepareToUseHooks(componentIdentity) {
      currentlyRenderingComponent = componentIdentity;
      {
        isInHookUserCodeInDev = false;
      } // The following should have already been reset
      // didScheduleRenderPhaseUpdate = false;
      // firstWorkInProgressHook = null;
      // numberOfReRenders = 0;
      // renderPhaseUpdates = null;
      // workInProgressHook = null;
    }

    function finishHooks(Component, props, children, refOrContext) {
      // This must be called after every function component to prevent hooks from
      // being used in classes.
      while (didScheduleRenderPhaseUpdate) {
        // Updates were scheduled during the render phase. They are stored in
        // the `renderPhaseUpdates` map. Call the component again, reusing the
        // work-in-progress hooks and applying the additional updates on top. Keep
        // restarting until no more updates are scheduled.
        didScheduleRenderPhaseUpdate = false;
        numberOfReRenders += 1; // Start over from the beginning of the list

        workInProgressHook = null;
        children = Component(props, refOrContext);
      }

      resetHooksState();
      return children;
    } // Reset the internal hooks state if an error occurs while rendering a component


    function resetHooksState() {
      {
        isInHookUserCodeInDev = false;
      }
      currentlyRenderingComponent = null;
      didScheduleRenderPhaseUpdate = false;
      firstWorkInProgressHook = null;
      numberOfReRenders = 0;
      renderPhaseUpdates = null;
      workInProgressHook = null;
    }

    function readContext(context, observedBits) {
      var threadID = currentPartialRenderer.threadID;
      validateContextBounds(context, threadID);
      {
        if (isInHookUserCodeInDev) {
          error('Context can only be read while React is rendering. ' + 'In classes, you can read it in the render method or getDerivedStateFromProps. ' + 'In function components, you can read it directly in the function body, but not ' + 'inside Hooks like useReducer() or useMemo().');
        }
      }
      return context[threadID];
    }

    function useContext(context, observedBits) {
      {
        currentHookNameInDev = 'useContext';
      }
      resolveCurrentlyRenderingComponent();
      var threadID = currentPartialRenderer.threadID;
      validateContextBounds(context, threadID);
      return context[threadID];
    }

    function basicStateReducer(state, action) {
      // $FlowFixMe: Flow doesn't like mixed types
      return typeof action === 'function' ? action(state) : action;
    }

    function useState(initialState) {
      {
        currentHookNameInDev = 'useState';
      }
      return useReducer(basicStateReducer, // useReducer has a special case to support lazy useState initializers
      initialState);
    }

    function useReducer(reducer, initialArg, init) {
      {
        if (reducer !== basicStateReducer) {
          currentHookNameInDev = 'useReducer';
        }
      }
      currentlyRenderingComponent = resolveCurrentlyRenderingComponent();
      workInProgressHook = createWorkInProgressHook();

      if (isReRender) {
        // This is a re-render. Apply the new render phase updates to the previous
        // current hook.
        var queue = workInProgressHook.queue;
        var dispatch = queue.dispatch;

        if (renderPhaseUpdates !== null) {
          // Render phase updates are stored in a map of queue -> linked list
          var firstRenderPhaseUpdate = renderPhaseUpdates.get(queue);

          if (firstRenderPhaseUpdate !== undefined) {
            renderPhaseUpdates.delete(queue);
            var newState = workInProgressHook.memoizedState;
            var update = firstRenderPhaseUpdate;

            do {
              // Process this render phase update. We don't have to check the
              // priority because it will always be the same as the current
              // render's.
              var action = update.action;
              {
                isInHookUserCodeInDev = true;
              }
              newState = reducer(newState, action);
              {
                isInHookUserCodeInDev = false;
              }
              update = update.next;
            } while (update !== null);

            workInProgressHook.memoizedState = newState;
            return [newState, dispatch];
          }
        }

        return [workInProgressHook.memoizedState, dispatch];
      } else {
        {
          isInHookUserCodeInDev = true;
        }
        var initialState;

        if (reducer === basicStateReducer) {
          // Special case for `useState`.
          initialState = typeof initialArg === 'function' ? initialArg() : initialArg;
        } else {
          initialState = init !== undefined ? init(initialArg) : initialArg;
        }

        {
          isInHookUserCodeInDev = false;
        }
        workInProgressHook.memoizedState = initialState;

        var _queue = workInProgressHook.queue = {
          last: null,
          dispatch: null
        };

        var _dispatch = _queue.dispatch = dispatchAction.bind(null, currentlyRenderingComponent, _queue);

        return [workInProgressHook.memoizedState, _dispatch];
      }
    }

    function useMemo(nextCreate, deps) {
      currentlyRenderingComponent = resolveCurrentlyRenderingComponent();
      workInProgressHook = createWorkInProgressHook();
      var nextDeps = deps === undefined ? null : deps;

      if (workInProgressHook !== null) {
        var prevState = workInProgressHook.memoizedState;

        if (prevState !== null) {
          if (nextDeps !== null) {
            var prevDeps = prevState[1];

            if (areHookInputsEqual(nextDeps, prevDeps)) {
              return prevState[0];
            }
          }
        }
      }

      {
        isInHookUserCodeInDev = true;
      }
      var nextValue = nextCreate();
      {
        isInHookUserCodeInDev = false;
      }
      workInProgressHook.memoizedState = [nextValue, nextDeps];
      return nextValue;
    }

    function useRef(initialValue) {
      currentlyRenderingComponent = resolveCurrentlyRenderingComponent();
      workInProgressHook = createWorkInProgressHook();
      var previousRef = workInProgressHook.memoizedState;

      if (previousRef === null) {
        var ref = {
          current: initialValue
        };
        {
          Object.seal(ref);
        }
        workInProgressHook.memoizedState = ref;
        return ref;
      } else {
        return previousRef;
      }
    }

    function useLayoutEffect(create, inputs) {
      {
        currentHookNameInDev = 'useLayoutEffect';
        error('useLayoutEffect does nothing on the server, because its effect cannot ' + "be encoded into the server renderer's output format. This will lead " + 'to a mismatch between the initial, non-hydrated UI and the intended ' + 'UI. To avoid this, useLayoutEffect should only be used in ' + 'components that render exclusively on the client. ' + 'See https://reactjs.org/link/uselayouteffect-ssr for common fixes.');
      }
    }

    function dispatchAction(componentIdentity, queue, action) {
      if (!(numberOfReRenders < RE_RENDER_LIMIT)) {
        {
          throw Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");
        }
      }

      if (componentIdentity === currentlyRenderingComponent) {
        // This is a render phase update. Stash it in a lazily-created map of
        // queue -> linked list of updates. After this render pass, we'll restart
        // and apply the stashed updates on top of the work-in-progress hook.
        didScheduleRenderPhaseUpdate = true;
        var update = {
          action: action,
          next: null
        };

        if (renderPhaseUpdates === null) {
          renderPhaseUpdates = new Map();
        }

        var firstRenderPhaseUpdate = renderPhaseUpdates.get(queue);

        if (firstRenderPhaseUpdate === undefined) {
          renderPhaseUpdates.set(queue, update);
        } else {
          // Append the update to the end of the list.
          var lastRenderPhaseUpdate = firstRenderPhaseUpdate;

          while (lastRenderPhaseUpdate.next !== null) {
            lastRenderPhaseUpdate = lastRenderPhaseUpdate.next;
          }

          lastRenderPhaseUpdate.next = update;
        }
      }
    }

    function useCallback(callback, deps) {
      return useMemo(function () {
        return callback;
      }, deps);
    } // TODO Decide on how to implement this hook for server rendering.
    // If a mutation occurs during render, consider triggering a Suspense boundary
    // and falling back to client rendering.


    function useMutableSource(source, getSnapshot, subscribe) {
      resolveCurrentlyRenderingComponent();
      return getSnapshot(source._source);
    }

    function useDeferredValue(value) {
      resolveCurrentlyRenderingComponent();
      return value;
    }

    function useTransition() {
      resolveCurrentlyRenderingComponent();

      var startTransition = function (callback) {
        callback();
      };

      return [startTransition, false];
    }

    function useOpaqueIdentifier() {
      return (currentPartialRenderer.identifierPrefix || '') + 'R:' + (currentPartialRenderer.uniqueID++).toString(36);
    }

    function noop() {}

    var currentPartialRenderer = null;

    function setCurrentPartialRenderer(renderer) {
      currentPartialRenderer = renderer;
    }

    var Dispatcher = {
      readContext: readContext,
      useContext: useContext,
      useMemo: useMemo,
      useReducer: useReducer,
      useRef: useRef,
      useState: useState,
      useLayoutEffect: useLayoutEffect,
      useCallback: useCallback,
      // useImperativeHandle is not run in the server environment
      useImperativeHandle: noop,
      // Effects are not run in the server environment.
      useEffect: noop,
      // Debugging effect
      useDebugValue: noop,
      useDeferredValue: useDeferredValue,
      useTransition: useTransition,
      useOpaqueIdentifier: useOpaqueIdentifier,
      // Subscriptions are not setup in a server environment.
      useMutableSource: useMutableSource
    };
    var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';
    var MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';
    var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';
    var Namespaces = {
      html: HTML_NAMESPACE,
      mathml: MATH_NAMESPACE,
      svg: SVG_NAMESPACE
    }; // Assumes there is no parent namespace.

    function getIntrinsicNamespace(type) {
      switch (type) {
        case 'svg':
          return SVG_NAMESPACE;

        case 'math':
          return MATH_NAMESPACE;

        default:
          return HTML_NAMESPACE;
      }
    }

    function getChildNamespace(parentNamespace, type) {
      if (parentNamespace == null || parentNamespace === HTML_NAMESPACE) {
        // No (or default) parent namespace: potential entry point.
        return getIntrinsicNamespace(type);
      }

      if (parentNamespace === SVG_NAMESPACE && type === 'foreignObject') {
        // We're leaving SVG.
        return HTML_NAMESPACE;
      } // By default, pass namespace below.


      return parentNamespace;
    }

    var hasReadOnlyValue = {
      button: true,
      checkbox: true,
      image: true,
      hidden: true,
      radio: true,
      reset: true,
      submit: true
    };

    function checkControlledValueProps(tagName, props) {
      {
        if (!(hasReadOnlyValue[props.type] || props.onChange || props.onInput || props.readOnly || props.disabled || props.value == null)) {
          error('You provided a `value` prop to a form field without an ' + '`onChange` handler. This will render a read-only field. If ' + 'the field should be mutable use `defaultValue`. Otherwise, ' + 'set either `onChange` or `readOnly`.');
        }

        if (!(props.onChange || props.readOnly || props.disabled || props.checked == null)) {
          error('You provided a `checked` prop to a form field without an ' + '`onChange` handler. This will render a read-only field. If ' + 'the field should be mutable use `defaultChecked`. Otherwise, ' + 'set either `onChange` or `readOnly`.');
        }
      }
    } // For HTML, certain tags should omit their close tag. We keep a list for
    // those special-case tags.


    var omittedCloseTags = {
      area: true,
      base: true,
      br: true,
      col: true,
      embed: true,
      hr: true,
      img: true,
      input: true,
      keygen: true,
      link: true,
      meta: true,
      param: true,
      source: true,
      track: true,
      wbr: true // NOTE: menuitem's close tag should be omitted, but that causes problems.

    }; // `omittedCloseTags` except that `menuitem` should still have its closing tag.

    var voidElementTags = _assign({
      menuitem: true
    }, omittedCloseTags);

    var HTML = '__html';

    function assertValidProps(tag, props) {
      if (!props) {
        return;
      } // Note the use of `==` which checks for null or undefined.


      if (voidElementTags[tag]) {
        if (!(props.children == null && props.dangerouslySetInnerHTML == null)) {
          {
            throw Error(tag + " is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");
          }
        }
      }

      if (props.dangerouslySetInnerHTML != null) {
        if (!(props.children == null)) {
          {
            throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");
          }
        }

        if (!(typeof props.dangerouslySetInnerHTML === 'object' && HTML in props.dangerouslySetInnerHTML)) {
          {
            throw Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.");
          }
        }
      }

      {
        if (!props.suppressContentEditableWarning && props.contentEditable && props.children != null) {
          error('A component is `contentEditable` and contains `children` managed by ' + 'React. It is now your responsibility to guarantee that none of ' + 'those nodes are unexpectedly modified or duplicated. This is ' + 'probably not intentional.');
        }
      }

      if (!(props.style == null || typeof props.style === 'object')) {
        {
          throw Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");
        }
      }
    }
    /**
     * CSS properties which accept numbers but are not in units of "px".
     */


    var isUnitlessNumber = {
      animationIterationCount: true,
      borderImageOutset: true,
      borderImageSlice: true,
      borderImageWidth: true,
      boxFlex: true,
      boxFlexGroup: true,
      boxOrdinalGroup: true,
      columnCount: true,
      columns: true,
      flex: true,
      flexGrow: true,
      flexPositive: true,
      flexShrink: true,
      flexNegative: true,
      flexOrder: true,
      gridArea: true,
      gridRow: true,
      gridRowEnd: true,
      gridRowSpan: true,
      gridRowStart: true,
      gridColumn: true,
      gridColumnEnd: true,
      gridColumnSpan: true,
      gridColumnStart: true,
      fontWeight: true,
      lineClamp: true,
      lineHeight: true,
      opacity: true,
      order: true,
      orphans: true,
      tabSize: true,
      widows: true,
      zIndex: true,
      zoom: true,
      // SVG-related properties
      fillOpacity: true,
      floodOpacity: true,
      stopOpacity: true,
      strokeDasharray: true,
      strokeDashoffset: true,
      strokeMiterlimit: true,
      strokeOpacity: true,
      strokeWidth: true
    };
    /**
     * @param {string} prefix vendor-specific prefix, eg: Webkit
     * @param {string} key style name, eg: transitionDuration
     * @return {string} style name prefixed with `prefix`, properly camelCased, eg:
     * WebkitTransitionDuration
     */

    function prefixKey(prefix, key) {
      return prefix + key.charAt(0).toUpperCase() + key.substring(1);
    }
    /**
     * Support style names that may come passed in prefixed by adding permutations
     * of vendor prefixes.
     */


    var prefixes = ['Webkit', 'ms', 'Moz', 'O']; // Using Object.keys here, or else the vanilla for-in loop makes IE8 go into an
    // infinite loop, because it iterates over the newly added props too.

    Object.keys(isUnitlessNumber).forEach(function (prop) {
      prefixes.forEach(function (prefix) {
        isUnitlessNumber[prefixKey(prefix, prop)] = isUnitlessNumber[prop];
      });
    });
    /**
     * Convert a value into the proper css writable value. The style name `name`
     * should be logical (no hyphens), as specified
     * in `CSSProperty.isUnitlessNumber`.
     *
     * @param {string} name CSS property name such as `topMargin`.
     * @param {*} value CSS property value such as `10px`.
     * @return {string} Normalized style value with dimensions applied.
     */

    function dangerousStyleValue(name, value, isCustomProperty) {
      // Note that we've removed escapeTextForBrowser() calls here since the
      // whole string will be escaped when the attribute is injected into
      // the markup. If you provide unsafe user data here they can inject
      // arbitrary CSS which may be problematic (I couldn't repro this):
      // https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet
      // http://www.thespanner.co.uk/2007/11/26/ultimate-xss-css-injection/
      // This is not an XSS hole but instead a potential CSS injection issue
      // which has lead to a greater discussion about how we're going to
      // trust URLs moving forward. See #2115901
      var isEmpty = value == null || typeof value === 'boolean' || value === '';

      if (isEmpty) {
        return '';
      }

      if (!isCustomProperty && typeof value === 'number' && value !== 0 && !(isUnitlessNumber.hasOwnProperty(name) && isUnitlessNumber[name])) {
        return value + 'px'; // Presumes implicit 'px' suffix for unitless numbers
      }

      return ('' + value).trim();
    }

    var uppercasePattern = /([A-Z])/g;
    var msPattern = /^ms-/;
    /**
     * Hyphenates a camelcased CSS property name, for example:
     *
     *   > hyphenateStyleName('backgroundColor')
     *   < "background-color"
     *   > hyphenateStyleName('MozTransition')
     *   < "-moz-transition"
     *   > hyphenateStyleName('msTransition')
     *   < "-ms-transition"
     *
     * As Modernizr suggests (http://modernizr.com/docs/#prefixed), an `ms` prefix
     * is converted to `-ms-`.
     */

    function hyphenateStyleName(name) {
      return name.replace(uppercasePattern, '-$1').toLowerCase().replace(msPattern, '-ms-');
    }

    function isCustomComponent(tagName, props) {
      if (tagName.indexOf('-') === -1) {
        return typeof props.is === 'string';
      }

      switch (tagName) {
        // These are reserved SVG and MathML elements.
        // We don't mind this list too much because we expect it to never grow.
        // The alternative is to track the namespace in a few places which is convoluted.
        // https://w3c.github.io/webcomponents/spec/custom/#custom-elements-core-concepts
        case 'annotation-xml':
        case 'color-profile':
        case 'font-face':
        case 'font-face-src':
        case 'font-face-uri':
        case 'font-face-format':
        case 'font-face-name':
        case 'missing-glyph':
          return false;

        default:
          return true;
      }
    }

    var warnValidStyle = function () {};

    {
      // 'msTransform' is correct, but the other prefixes should be capitalized
      var badVendoredStyleNamePattern = /^(?:webkit|moz|o)[A-Z]/;
      var msPattern$1 = /^-ms-/;
      var hyphenPattern = /-(.)/g; // style values shouldn't contain a semicolon

      var badStyleValueWithSemicolonPattern = /;\s*$/;
      var warnedStyleNames = {};
      var warnedStyleValues = {};
      var warnedForNaNValue = false;
      var warnedForInfinityValue = false;

      var camelize = function (string) {
        return string.replace(hyphenPattern, function (_, character) {
          return character.toUpperCase();
        });
      };

      var warnHyphenatedStyleName = function (name) {
        if (warnedStyleNames.hasOwnProperty(name) && warnedStyleNames[name]) {
          return;
        }

        warnedStyleNames[name] = true;
        error('Unsupported style property %s. Did you mean %s?', name, // As Andi Smith suggests
        // (http://www.andismith.com/blog/2012/02/modernizr-prefixed/), an `-ms` prefix
        // is converted to lowercase `ms`.
        camelize(name.replace(msPattern$1, 'ms-')));
      };

      var warnBadVendoredStyleName = function (name) {
        if (warnedStyleNames.hasOwnProperty(name) && warnedStyleNames[name]) {
          return;
        }

        warnedStyleNames[name] = true;
        error('Unsupported vendor-prefixed style property %s. Did you mean %s?', name, name.charAt(0).toUpperCase() + name.slice(1));
      };

      var warnStyleValueWithSemicolon = function (name, value) {
        if (warnedStyleValues.hasOwnProperty(value) && warnedStyleValues[value]) {
          return;
        }

        warnedStyleValues[value] = true;
        error("Style property values shouldn't contain a semicolon. " + 'Try "%s: %s" instead.', name, value.replace(badStyleValueWithSemicolonPattern, ''));
      };

      var warnStyleValueIsNaN = function (name, value) {
        if (warnedForNaNValue) {
          return;
        }

        warnedForNaNValue = true;
        error('`NaN` is an invalid value for the `%s` css style property.', name);
      };

      var warnStyleValueIsInfinity = function (name, value) {
        if (warnedForInfinityValue) {
          return;
        }

        warnedForInfinityValue = true;
        error('`Infinity` is an invalid value for the `%s` css style property.', name);
      };

      warnValidStyle = function (name, value) {
        if (name.indexOf('-') > -1) {
          warnHyphenatedStyleName(name);
        } else if (badVendoredStyleNamePattern.test(name)) {
          warnBadVendoredStyleName(name);
        } else if (badStyleValueWithSemicolonPattern.test(value)) {
          warnStyleValueWithSemicolon(name, value);
        }

        if (typeof value === 'number') {
          if (isNaN(value)) {
            warnStyleValueIsNaN(name, value);
          } else if (!isFinite(value)) {
            warnStyleValueIsInfinity(name, value);
          }
        }
      };
    }
    var warnValidStyle$1 = warnValidStyle;
    var ariaProperties = {
      'aria-current': 0,
      // state
      'aria-details': 0,
      'aria-disabled': 0,
      // state
      'aria-hidden': 0,
      // state
      'aria-invalid': 0,
      // state
      'aria-keyshortcuts': 0,
      'aria-label': 0,
      'aria-roledescription': 0,
      // Widget Attributes
      'aria-autocomplete': 0,
      'aria-checked': 0,
      'aria-expanded': 0,
      'aria-haspopup': 0,
      'aria-level': 0,
      'aria-modal': 0,
      'aria-multiline': 0,
      'aria-multiselectable': 0,
      'aria-orientation': 0,
      'aria-placeholder': 0,
      'aria-pressed': 0,
      'aria-readonly': 0,
      'aria-required': 0,
      'aria-selected': 0,
      'aria-sort': 0,
      'aria-valuemax': 0,
      'aria-valuemin': 0,
      'aria-valuenow': 0,
      'aria-valuetext': 0,
      // Live Region Attributes
      'aria-atomic': 0,
      'aria-busy': 0,
      'aria-live': 0,
      'aria-relevant': 0,
      // Drag-and-Drop Attributes
      'aria-dropeffect': 0,
      'aria-grabbed': 0,
      // Relationship Attributes
      'aria-activedescendant': 0,
      'aria-colcount': 0,
      'aria-colindex': 0,
      'aria-colspan': 0,
      'aria-controls': 0,
      'aria-describedby': 0,
      'aria-errormessage': 0,
      'aria-flowto': 0,
      'aria-labelledby': 0,
      'aria-owns': 0,
      'aria-posinset': 0,
      'aria-rowcount': 0,
      'aria-rowindex': 0,
      'aria-rowspan': 0,
      'aria-setsize': 0
    };
    var warnedProperties = {};
    var rARIA = new RegExp('^(aria)-[' + ATTRIBUTE_NAME_CHAR + ']*$');
    var rARIACamel = new RegExp('^(aria)[A-Z][' + ATTRIBUTE_NAME_CHAR + ']*$');
    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;

    function validateProperty(tagName, name) {
      {
        if (hasOwnProperty$1.call(warnedProperties, name) && warnedProperties[name]) {
          return true;
        }

        if (rARIACamel.test(name)) {
          var ariaName = 'aria-' + name.slice(4).toLowerCase();
          var correctName = ariaProperties.hasOwnProperty(ariaName) ? ariaName : null; // If this is an aria-* attribute, but is not listed in the known DOM
          // DOM properties, then it is an invalid aria-* attribute.

          if (correctName == null) {
            error('Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.', name);
            warnedProperties[name] = true;
            return true;
          } // aria-* attributes should be lowercase; suggest the lowercase version.


          if (name !== correctName) {
            error('Invalid ARIA attribute `%s`. Did you mean `%s`?', name, correctName);
            warnedProperties[name] = true;
            return true;
          }
        }

        if (rARIA.test(name)) {
          var lowerCasedName = name.toLowerCase();
          var standardName = ariaProperties.hasOwnProperty(lowerCasedName) ? lowerCasedName : null; // If this is an aria-* attribute, but is not listed in the known DOM
          // DOM properties, then it is an invalid aria-* attribute.

          if (standardName == null) {
            warnedProperties[name] = true;
            return false;
          } // aria-* attributes should be lowercase; suggest the lowercase version.


          if (name !== standardName) {
            error('Unknown ARIA attribute `%s`. Did you mean `%s`?', name, standardName);
            warnedProperties[name] = true;
            return true;
          }
        }
      }
      return true;
    }

    function warnInvalidARIAProps(type, props) {
      {
        var invalidProps = [];

        for (var key in props) {
          var isValid = validateProperty(type, key);

          if (!isValid) {
            invalidProps.push(key);
          }
        }

        var unknownPropString = invalidProps.map(function (prop) {
          return '`' + prop + '`';
        }).join(', ');

        if (invalidProps.length === 1) {
          error('Invalid aria prop %s on <%s> tag. ' + 'For details, see https://reactjs.org/link/invalid-aria-props', unknownPropString, type);
        } else if (invalidProps.length > 1) {
          error('Invalid aria props %s on <%s> tag. ' + 'For details, see https://reactjs.org/link/invalid-aria-props', unknownPropString, type);
        }
      }
    }

    function validateProperties(type, props) {
      if (isCustomComponent(type, props)) {
        return;
      }

      warnInvalidARIAProps(type, props);
    }

    var didWarnValueNull = false;

    function validateProperties$1(type, props) {
      {
        if (type !== 'input' && type !== 'textarea' && type !== 'select') {
          return;
        }

        if (props != null && props.value === null && !didWarnValueNull) {
          didWarnValueNull = true;

          if (type === 'select' && props.multiple) {
            error('`value` prop on `%s` should not be null. ' + 'Consider using an empty array when `multiple` is set to `true` ' + 'to clear the component or `undefined` for uncontrolled components.', type);
          } else {
            error('`value` prop on `%s` should not be null. ' + 'Consider using an empty string to clear the component or `undefined` ' + 'for uncontrolled components.', type);
          }
        }
      }
    } // When adding attributes to the HTML or SVG allowed attribute list, be sure to
    // also add them to this module to ensure casing and incorrect name
    // warnings.


    var possibleStandardNames = {
      // HTML
      accept: 'accept',
      acceptcharset: 'acceptCharset',
      'accept-charset': 'acceptCharset',
      accesskey: 'accessKey',
      action: 'action',
      allowfullscreen: 'allowFullScreen',
      alt: 'alt',
      as: 'as',
      async: 'async',
      autocapitalize: 'autoCapitalize',
      autocomplete: 'autoComplete',
      autocorrect: 'autoCorrect',
      autofocus: 'autoFocus',
      autoplay: 'autoPlay',
      autosave: 'autoSave',
      capture: 'capture',
      cellpadding: 'cellPadding',
      cellspacing: 'cellSpacing',
      challenge: 'challenge',
      charset: 'charSet',
      checked: 'checked',
      children: 'children',
      cite: 'cite',
      class: 'className',
      classid: 'classID',
      classname: 'className',
      cols: 'cols',
      colspan: 'colSpan',
      content: 'content',
      contenteditable: 'contentEditable',
      contextmenu: 'contextMenu',
      controls: 'controls',
      controlslist: 'controlsList',
      coords: 'coords',
      crossorigin: 'crossOrigin',
      dangerouslysetinnerhtml: 'dangerouslySetInnerHTML',
      data: 'data',
      datetime: 'dateTime',
      default: 'default',
      defaultchecked: 'defaultChecked',
      defaultvalue: 'defaultValue',
      defer: 'defer',
      dir: 'dir',
      disabled: 'disabled',
      disablepictureinpicture: 'disablePictureInPicture',
      disableremoteplayback: 'disableRemotePlayback',
      download: 'download',
      draggable: 'draggable',
      enctype: 'encType',
      enterkeyhint: 'enterKeyHint',
      for: 'htmlFor',
      form: 'form',
      formmethod: 'formMethod',
      formaction: 'formAction',
      formenctype: 'formEncType',
      formnovalidate: 'formNoValidate',
      formtarget: 'formTarget',
      frameborder: 'frameBorder',
      headers: 'headers',
      height: 'height',
      hidden: 'hidden',
      high: 'high',
      href: 'href',
      hreflang: 'hrefLang',
      htmlfor: 'htmlFor',
      httpequiv: 'httpEquiv',
      'http-equiv': 'httpEquiv',
      icon: 'icon',
      id: 'id',
      innerhtml: 'innerHTML',
      inputmode: 'inputMode',
      integrity: 'integrity',
      is: 'is',
      itemid: 'itemID',
      itemprop: 'itemProp',
      itemref: 'itemRef',
      itemscope: 'itemScope',
      itemtype: 'itemType',
      keyparams: 'keyParams',
      keytype: 'keyType',
      kind: 'kind',
      label: 'label',
      lang: 'lang',
      list: 'list',
      loop: 'loop',
      low: 'low',
      manifest: 'manifest',
      marginwidth: 'marginWidth',
      marginheight: 'marginHeight',
      max: 'max',
      maxlength: 'maxLength',
      media: 'media',
      mediagroup: 'mediaGroup',
      method: 'method',
      min: 'min',
      minlength: 'minLength',
      multiple: 'multiple',
      muted: 'muted',
      name: 'name',
      nomodule: 'noModule',
      nonce: 'nonce',
      novalidate: 'noValidate',
      open: 'open',
      optimum: 'optimum',
      pattern: 'pattern',
      placeholder: 'placeholder',
      playsinline: 'playsInline',
      poster: 'poster',
      preload: 'preload',
      profile: 'profile',
      radiogroup: 'radioGroup',
      readonly: 'readOnly',
      referrerpolicy: 'referrerPolicy',
      rel: 'rel',
      required: 'required',
      reversed: 'reversed',
      role: 'role',
      rows: 'rows',
      rowspan: 'rowSpan',
      sandbox: 'sandbox',
      scope: 'scope',
      scoped: 'scoped',
      scrolling: 'scrolling',
      seamless: 'seamless',
      selected: 'selected',
      shape: 'shape',
      size: 'size',
      sizes: 'sizes',
      span: 'span',
      spellcheck: 'spellCheck',
      src: 'src',
      srcdoc: 'srcDoc',
      srclang: 'srcLang',
      srcset: 'srcSet',
      start: 'start',
      step: 'step',
      style: 'style',
      summary: 'summary',
      tabindex: 'tabIndex',
      target: 'target',
      title: 'title',
      type: 'type',
      usemap: 'useMap',
      value: 'value',
      width: 'width',
      wmode: 'wmode',
      wrap: 'wrap',
      // SVG
      about: 'about',
      accentheight: 'accentHeight',
      'accent-height': 'accentHeight',
      accumulate: 'accumulate',
      additive: 'additive',
      alignmentbaseline: 'alignmentBaseline',
      'alignment-baseline': 'alignmentBaseline',
      allowreorder: 'allowReorder',
      alphabetic: 'alphabetic',
      amplitude: 'amplitude',
      arabicform: 'arabicForm',
      'arabic-form': 'arabicForm',
      ascent: 'ascent',
      attributename: 'attributeName',
      attributetype: 'attributeType',
      autoreverse: 'autoReverse',
      azimuth: 'azimuth',
      basefrequency: 'baseFrequency',
      baselineshift: 'baselineShift',
      'baseline-shift': 'baselineShift',
      baseprofile: 'baseProfile',
      bbox: 'bbox',
      begin: 'begin',
      bias: 'bias',
      by: 'by',
      calcmode: 'calcMode',
      capheight: 'capHeight',
      'cap-height': 'capHeight',
      clip: 'clip',
      clippath: 'clipPath',
      'clip-path': 'clipPath',
      clippathunits: 'clipPathUnits',
      cliprule: 'clipRule',
      'clip-rule': 'clipRule',
      color: 'color',
      colorinterpolation: 'colorInterpolation',
      'color-interpolation': 'colorInterpolation',
      colorinterpolationfilters: 'colorInterpolationFilters',
      'color-interpolation-filters': 'colorInterpolationFilters',
      colorprofile: 'colorProfile',
      'color-profile': 'colorProfile',
      colorrendering: 'colorRendering',
      'color-rendering': 'colorRendering',
      contentscripttype: 'contentScriptType',
      contentstyletype: 'contentStyleType',
      cursor: 'cursor',
      cx: 'cx',
      cy: 'cy',
      d: 'd',
      datatype: 'datatype',
      decelerate: 'decelerate',
      descent: 'descent',
      diffuseconstant: 'diffuseConstant',
      direction: 'direction',
      display: 'display',
      divisor: 'divisor',
      dominantbaseline: 'dominantBaseline',
      'dominant-baseline': 'dominantBaseline',
      dur: 'dur',
      dx: 'dx',
      dy: 'dy',
      edgemode: 'edgeMode',
      elevation: 'elevation',
      enablebackground: 'enableBackground',
      'enable-background': 'enableBackground',
      end: 'end',
      exponent: 'exponent',
      externalresourcesrequired: 'externalResourcesRequired',
      fill: 'fill',
      fillopacity: 'fillOpacity',
      'fill-opacity': 'fillOpacity',
      fillrule: 'fillRule',
      'fill-rule': 'fillRule',
      filter: 'filter',
      filterres: 'filterRes',
      filterunits: 'filterUnits',
      floodopacity: 'floodOpacity',
      'flood-opacity': 'floodOpacity',
      floodcolor: 'floodColor',
      'flood-color': 'floodColor',
      focusable: 'focusable',
      fontfamily: 'fontFamily',
      'font-family': 'fontFamily',
      fontsize: 'fontSize',
      'font-size': 'fontSize',
      fontsizeadjust: 'fontSizeAdjust',
      'font-size-adjust': 'fontSizeAdjust',
      fontstretch: 'fontStretch',
      'font-stretch': 'fontStretch',
      fontstyle: 'fontStyle',
      'font-style': 'fontStyle',
      fontvariant: 'fontVariant',
      'font-variant': 'fontVariant',
      fontweight: 'fontWeight',
      'font-weight': 'fontWeight',
      format: 'format',
      from: 'from',
      fx: 'fx',
      fy: 'fy',
      g1: 'g1',
      g2: 'g2',
      glyphname: 'glyphName',
      'glyph-name': 'glyphName',
      glyphorientationhorizontal: 'glyphOrientationHorizontal',
      'glyph-orientation-horizontal': 'glyphOrientationHorizontal',
      glyphorientationvertical: 'glyphOrientationVertical',
      'glyph-orientation-vertical': 'glyphOrientationVertical',
      glyphref: 'glyphRef',
      gradienttransform: 'gradientTransform',
      gradientunits: 'gradientUnits',
      hanging: 'hanging',
      horizadvx: 'horizAdvX',
      'horiz-adv-x': 'horizAdvX',
      horizoriginx: 'horizOriginX',
      'horiz-origin-x': 'horizOriginX',
      ideographic: 'ideographic',
      imagerendering: 'imageRendering',
      'image-rendering': 'imageRendering',
      in2: 'in2',
      in: 'in',
      inlist: 'inlist',
      intercept: 'intercept',
      k1: 'k1',
      k2: 'k2',
      k3: 'k3',
      k4: 'k4',
      k: 'k',
      kernelmatrix: 'kernelMatrix',
      kernelunitlength: 'kernelUnitLength',
      kerning: 'kerning',
      keypoints: 'keyPoints',
      keysplines: 'keySplines',
      keytimes: 'keyTimes',
      lengthadjust: 'lengthAdjust',
      letterspacing: 'letterSpacing',
      'letter-spacing': 'letterSpacing',
      lightingcolor: 'lightingColor',
      'lighting-color': 'lightingColor',
      limitingconeangle: 'limitingConeAngle',
      local: 'local',
      markerend: 'markerEnd',
      'marker-end': 'markerEnd',
      markerheight: 'markerHeight',
      markermid: 'markerMid',
      'marker-mid': 'markerMid',
      markerstart: 'markerStart',
      'marker-start': 'markerStart',
      markerunits: 'markerUnits',
      markerwidth: 'markerWidth',
      mask: 'mask',
      maskcontentunits: 'maskContentUnits',
      maskunits: 'maskUnits',
      mathematical: 'mathematical',
      mode: 'mode',
      numoctaves: 'numOctaves',
      offset: 'offset',
      opacity: 'opacity',
      operator: 'operator',
      order: 'order',
      orient: 'orient',
      orientation: 'orientation',
      origin: 'origin',
      overflow: 'overflow',
      overlineposition: 'overlinePosition',
      'overline-position': 'overlinePosition',
      overlinethickness: 'overlineThickness',
      'overline-thickness': 'overlineThickness',
      paintorder: 'paintOrder',
      'paint-order': 'paintOrder',
      panose1: 'panose1',
      'panose-1': 'panose1',
      pathlength: 'pathLength',
      patterncontentunits: 'patternContentUnits',
      patterntransform: 'patternTransform',
      patternunits: 'patternUnits',
      pointerevents: 'pointerEvents',
      'pointer-events': 'pointerEvents',
      points: 'points',
      pointsatx: 'pointsAtX',
      pointsaty: 'pointsAtY',
      pointsatz: 'pointsAtZ',
      prefix: 'prefix',
      preservealpha: 'preserveAlpha',
      preserveaspectratio: 'preserveAspectRatio',
      primitiveunits: 'primitiveUnits',
      property: 'property',
      r: 'r',
      radius: 'radius',
      refx: 'refX',
      refy: 'refY',
      renderingintent: 'renderingIntent',
      'rendering-intent': 'renderingIntent',
      repeatcount: 'repeatCount',
      repeatdur: 'repeatDur',
      requiredextensions: 'requiredExtensions',
      requiredfeatures: 'requiredFeatures',
      resource: 'resource',
      restart: 'restart',
      result: 'result',
      results: 'results',
      rotate: 'rotate',
      rx: 'rx',
      ry: 'ry',
      scale: 'scale',
      security: 'security',
      seed: 'seed',
      shaperendering: 'shapeRendering',
      'shape-rendering': 'shapeRendering',
      slope: 'slope',
      spacing: 'spacing',
      specularconstant: 'specularConstant',
      specularexponent: 'specularExponent',
      speed: 'speed',
      spreadmethod: 'spreadMethod',
      startoffset: 'startOffset',
      stddeviation: 'stdDeviation',
      stemh: 'stemh',
      stemv: 'stemv',
      stitchtiles: 'stitchTiles',
      stopcolor: 'stopColor',
      'stop-color': 'stopColor',
      stopopacity: 'stopOpacity',
      'stop-opacity': 'stopOpacity',
      strikethroughposition: 'strikethroughPosition',
      'strikethrough-position': 'strikethroughPosition',
      strikethroughthickness: 'strikethroughThickness',
      'strikethrough-thickness': 'strikethroughThickness',
      string: 'string',
      stroke: 'stroke',
      strokedasharray: 'strokeDasharray',
      'stroke-dasharray': 'strokeDasharray',
      strokedashoffset: 'strokeDashoffset',
      'stroke-dashoffset': 'strokeDashoffset',
      strokelinecap: 'strokeLinecap',
      'stroke-linecap': 'strokeLinecap',
      strokelinejoin: 'strokeLinejoin',
      'stroke-linejoin': 'strokeLinejoin',
      strokemiterlimit: 'strokeMiterlimit',
      'stroke-miterlimit': 'strokeMiterlimit',
      strokewidth: 'strokeWidth',
      'stroke-width': 'strokeWidth',
      strokeopacity: 'strokeOpacity',
      'stroke-opacity': 'strokeOpacity',
      suppresscontenteditablewarning: 'suppressContentEditableWarning',
      suppresshydrationwarning: 'suppressHydrationWarning',
      surfacescale: 'surfaceScale',
      systemlanguage: 'systemLanguage',
      tablevalues: 'tableValues',
      targetx: 'targetX',
      targety: 'targetY',
      textanchor: 'textAnchor',
      'text-anchor': 'textAnchor',
      textdecoration: 'textDecoration',
      'text-decoration': 'textDecoration',
      textlength: 'textLength',
      textrendering: 'textRendering',
      'text-rendering': 'textRendering',
      to: 'to',
      transform: 'transform',
      typeof: 'typeof',
      u1: 'u1',
      u2: 'u2',
      underlineposition: 'underlinePosition',
      'underline-position': 'underlinePosition',
      underlinethickness: 'underlineThickness',
      'underline-thickness': 'underlineThickness',
      unicode: 'unicode',
      unicodebidi: 'unicodeBidi',
      'unicode-bidi': 'unicodeBidi',
      unicoderange: 'unicodeRange',
      'unicode-range': 'unicodeRange',
      unitsperem: 'unitsPerEm',
      'units-per-em': 'unitsPerEm',
      unselectable: 'unselectable',
      valphabetic: 'vAlphabetic',
      'v-alphabetic': 'vAlphabetic',
      values: 'values',
      vectoreffect: 'vectorEffect',
      'vector-effect': 'vectorEffect',
      version: 'version',
      vertadvy: 'vertAdvY',
      'vert-adv-y': 'vertAdvY',
      vertoriginx: 'vertOriginX',
      'vert-origin-x': 'vertOriginX',
      vertoriginy: 'vertOriginY',
      'vert-origin-y': 'vertOriginY',
      vhanging: 'vHanging',
      'v-hanging': 'vHanging',
      videographic: 'vIdeographic',
      'v-ideographic': 'vIdeographic',
      viewbox: 'viewBox',
      viewtarget: 'viewTarget',
      visibility: 'visibility',
      vmathematical: 'vMathematical',
      'v-mathematical': 'vMathematical',
      vocab: 'vocab',
      widths: 'widths',
      wordspacing: 'wordSpacing',
      'word-spacing': 'wordSpacing',
      writingmode: 'writingMode',
      'writing-mode': 'writingMode',
      x1: 'x1',
      x2: 'x2',
      x: 'x',
      xchannelselector: 'xChannelSelector',
      xheight: 'xHeight',
      'x-height': 'xHeight',
      xlinkactuate: 'xlinkActuate',
      'xlink:actuate': 'xlinkActuate',
      xlinkarcrole: 'xlinkArcrole',
      'xlink:arcrole': 'xlinkArcrole',
      xlinkhref: 'xlinkHref',
      'xlink:href': 'xlinkHref',
      xlinkrole: 'xlinkRole',
      'xlink:role': 'xlinkRole',
      xlinkshow: 'xlinkShow',
      'xlink:show': 'xlinkShow',
      xlinktitle: 'xlinkTitle',
      'xlink:title': 'xlinkTitle',
      xlinktype: 'xlinkType',
      'xlink:type': 'xlinkType',
      xmlbase: 'xmlBase',
      'xml:base': 'xmlBase',
      xmllang: 'xmlLang',
      'xml:lang': 'xmlLang',
      xmlns: 'xmlns',
      'xml:space': 'xmlSpace',
      xmlnsxlink: 'xmlnsXlink',
      'xmlns:xlink': 'xmlnsXlink',
      xmlspace: 'xmlSpace',
      y1: 'y1',
      y2: 'y2',
      y: 'y',
      ychannelselector: 'yChannelSelector',
      z: 'z',
      zoomandpan: 'zoomAndPan'
    };

    var validateProperty$1 = function () {};

    {
      var warnedProperties$1 = {};
      var _hasOwnProperty = Object.prototype.hasOwnProperty;
      var EVENT_NAME_REGEX = /^on./;
      var INVALID_EVENT_NAME_REGEX = /^on[^A-Z]/;
      var rARIA$1 = new RegExp('^(aria)-[' + ATTRIBUTE_NAME_CHAR + ']*$');
      var rARIACamel$1 = new RegExp('^(aria)[A-Z][' + ATTRIBUTE_NAME_CHAR + ']*$');

      validateProperty$1 = function (tagName, name, value, eventRegistry) {
        if (_hasOwnProperty.call(warnedProperties$1, name) && warnedProperties$1[name]) {
          return true;
        }

        var lowerCasedName = name.toLowerCase();

        if (lowerCasedName === 'onfocusin' || lowerCasedName === 'onfocusout') {
          error('React uses onFocus and onBlur instead of onFocusIn and onFocusOut. ' + 'All React events are normalized to bubble, so onFocusIn and onFocusOut ' + 'are not needed/supported by React.');
          warnedProperties$1[name] = true;
          return true;
        } // We can't rely on the event system being injected on the server.


        if (eventRegistry != null) {
          var registrationNameDependencies = eventRegistry.registrationNameDependencies,
              possibleRegistrationNames = eventRegistry.possibleRegistrationNames;

          if (registrationNameDependencies.hasOwnProperty(name)) {
            return true;
          }

          var registrationName = possibleRegistrationNames.hasOwnProperty(lowerCasedName) ? possibleRegistrationNames[lowerCasedName] : null;

          if (registrationName != null) {
            error('Invalid event handler property `%s`. Did you mean `%s`?', name, registrationName);
            warnedProperties$1[name] = true;
            return true;
          }

          if (EVENT_NAME_REGEX.test(name)) {
            error('Unknown event handler property `%s`. It will be ignored.', name);
            warnedProperties$1[name] = true;
            return true;
          }
        } else if (EVENT_NAME_REGEX.test(name)) {
          // If no event plugins have been injected, we are in a server environment.
          // So we can't tell if the event name is correct for sure, but we can filter
          // out known bad ones like `onclick`. We can't suggest a specific replacement though.
          if (INVALID_EVENT_NAME_REGEX.test(name)) {
            error('Invalid event handler property `%s`. ' + 'React events use the camelCase naming convention, for example `onClick`.', name);
          }

          warnedProperties$1[name] = true;
          return true;
        } // Let the ARIA attribute hook validate ARIA attributes


        if (rARIA$1.test(name) || rARIACamel$1.test(name)) {
          return true;
        }

        if (lowerCasedName === 'innerhtml') {
          error('Directly setting property `innerHTML` is not permitted. ' + 'For more information, lookup documentation on `dangerouslySetInnerHTML`.');
          warnedProperties$1[name] = true;
          return true;
        }

        if (lowerCasedName === 'aria') {
          error('The `aria` attribute is reserved for future use in React. ' + 'Pass individual `aria-` attributes instead.');
          warnedProperties$1[name] = true;
          return true;
        }

        if (lowerCasedName === 'is' && value !== null && value !== undefined && typeof value !== 'string') {
          error('Received a `%s` for a string attribute `is`. If this is expected, cast ' + 'the value to a string.', typeof value);
          warnedProperties$1[name] = true;
          return true;
        }

        if (typeof value === 'number' && isNaN(value)) {
          error('Received NaN for the `%s` attribute. If this is expected, cast ' + 'the value to a string.', name);
          warnedProperties$1[name] = true;
          return true;
        }

        var propertyInfo = getPropertyInfo(name);
        var isReserved = propertyInfo !== null && propertyInfo.type === RESERVED; // Known attributes should match the casing specified in the property config.

        if (possibleStandardNames.hasOwnProperty(lowerCasedName)) {
          var standardName = possibleStandardNames[lowerCasedName];

          if (standardName !== name) {
            error('Invalid DOM property `%s`. Did you mean `%s`?', name, standardName);
            warnedProperties$1[name] = true;
            return true;
          }
        } else if (!isReserved && name !== lowerCasedName) {
          // Unknown attributes should have lowercase casing since that's how they
          // will be cased anyway with server rendering.
          error('React does not recognize the `%s` prop on a DOM element. If you ' + 'intentionally want it to appear in the DOM as a custom ' + 'attribute, spell it as lowercase `%s` instead. ' + 'If you accidentally passed it from a parent component, remove ' + 'it from the DOM element.', name, lowerCasedName);
          warnedProperties$1[name] = true;
          return true;
        }

        if (typeof value === 'boolean' && shouldRemoveAttributeWithWarning(name, value, propertyInfo, false)) {
          if (value) {
            error('Received `%s` for a non-boolean attribute `%s`.\n\n' + 'If you want to write it to the DOM, pass a string instead: ' + '%s="%s" or %s={value.toString()}.', value, name, name, value, name);
          } else {
            error('Received `%s` for a non-boolean attribute `%s`.\n\n' + 'If you want to write it to the DOM, pass a string instead: ' + '%s="%s" or %s={value.toString()}.\n\n' + 'If you used to conditionally omit it with %s={condition && value}, ' + 'pass %s={condition ? value : undefined} instead.', value, name, name, value, name, name, name);
          }

          warnedProperties$1[name] = true;
          return true;
        } // Now that we've validated casing, do not validate
        // data types for reserved props


        if (isReserved) {
          return true;
        } // Warn when a known attribute is a bad type


        if (shouldRemoveAttributeWithWarning(name, value, propertyInfo, false)) {
          warnedProperties$1[name] = true;
          return false;
        } // Warn when passing the strings 'false' or 'true' into a boolean prop


        if ((value === 'false' || value === 'true') && propertyInfo !== null && propertyInfo.type === BOOLEAN) {
          error('Received the string `%s` for the boolean attribute `%s`. ' + '%s ' + 'Did you mean %s={%s}?', value, name, value === 'false' ? 'The browser will interpret it as a truthy value.' : 'Although this works, it will not work as expected if you pass the string "false".', name, value);
          warnedProperties$1[name] = true;
          return true;
        }

        return true;
      };
    }

    var warnUnknownProperties = function (type, props, eventRegistry) {
      {
        var unknownProps = [];

        for (var key in props) {
          var isValid = validateProperty$1(type, key, props[key], eventRegistry);

          if (!isValid) {
            unknownProps.push(key);
          }
        }

        var unknownPropString = unknownProps.map(function (prop) {
          return '`' + prop + '`';
        }).join(', ');

        if (unknownProps.length === 1) {
          error('Invalid value for prop %s on <%s> tag. Either remove it from the element, ' + 'or pass a string or number value to keep it in the DOM. ' + 'For details, see https://reactjs.org/link/attribute-behavior ', unknownPropString, type);
        } else if (unknownProps.length > 1) {
          error('Invalid values for props %s on <%s> tag. Either remove them from the element, ' + 'or pass a string or number value to keep them in the DOM. ' + 'For details, see https://reactjs.org/link/attribute-behavior ', unknownPropString, type);
        }
      }
    };

    function validateProperties$2(type, props, eventRegistry) {
      if (isCustomComponent(type, props)) {
        return;
      }

      warnUnknownProperties(type, props, eventRegistry);
    }

    var toArray = React.Children.toArray; // This is only used in DEV.
    // Each entry is `this.stack` from a currently executing renderer instance.
    // (There may be more than one because ReactDOMServer is reentrant).
    // Each stack is an array of frames which may contain nested stacks of elements.

    var currentDebugStacks = [];
    var ReactCurrentDispatcher$1 = ReactSharedInternals.ReactCurrentDispatcher;
    var ReactDebugCurrentFrame$1;
    var prevGetCurrentStackImpl = null;

    var getCurrentServerStackImpl = function () {
      return '';
    };

    var describeStackFrame = function (element) {
      return '';
    };

    var validatePropertiesInDevelopment = function (type, props) {};

    var pushCurrentDebugStack = function (stack) {};

    var pushElementToDebugStack = function (element) {};

    var popCurrentDebugStack = function () {};

    var hasWarnedAboutUsingContextAsConsumer = false;
    {
      ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;

      validatePropertiesInDevelopment = function (type, props) {
        validateProperties(type, props);
        validateProperties$1(type, props);
        validateProperties$2(type, props, null);
      };

      describeStackFrame = function (element) {
        return describeUnknownElementTypeFrameInDEV(element.type, element._source, null);
      };

      pushCurrentDebugStack = function (stack) {
        currentDebugStacks.push(stack);

        if (currentDebugStacks.length === 1) {
          // We are entering a server renderer.
          // Remember the previous (e.g. client) global stack implementation.
          prevGetCurrentStackImpl = ReactDebugCurrentFrame$1.getCurrentStack;
          ReactDebugCurrentFrame$1.getCurrentStack = getCurrentServerStackImpl;
        }
      };

      pushElementToDebugStack = function (element) {
        // For the innermost executing ReactDOMServer call,
        var stack = currentDebugStacks[currentDebugStacks.length - 1]; // Take the innermost executing frame (e.g. <Foo>),

        var frame = stack[stack.length - 1]; // and record that it has one more element associated with it.

        frame.debugElementStack.push(element); // We only need this because we tail-optimize single-element
        // children and directly handle them in an inner loop instead of
        // creating separate frames for them.
      };

      popCurrentDebugStack = function () {
        currentDebugStacks.pop();

        if (currentDebugStacks.length === 0) {
          // We are exiting the server renderer.
          // Restore the previous (e.g. client) global stack implementation.
          ReactDebugCurrentFrame$1.getCurrentStack = prevGetCurrentStackImpl;
          prevGetCurrentStackImpl = null;
        }
      };

      getCurrentServerStackImpl = function () {
        if (currentDebugStacks.length === 0) {
          // Nothing is currently rendering.
          return '';
        } // ReactDOMServer is reentrant so there may be multiple calls at the same time.
        // Take the frames from the innermost call which is the last in the array.


        var frames = currentDebugStacks[currentDebugStacks.length - 1];
        var stack = ''; // Go through every frame in the stack from the innermost one.

        for (var i = frames.length - 1; i >= 0; i--) {
          var frame = frames[i]; // Every frame might have more than one debug element stack entry associated with it.
          // This is because single-child nesting doesn't create materialized frames.
          // Instead it would push them through `pushElementToDebugStack()`.

          var debugElementStack = frame.debugElementStack;

          for (var ii = debugElementStack.length - 1; ii >= 0; ii--) {
            stack += describeStackFrame(debugElementStack[ii]);
          }
        }

        return stack;
      };
    }
    var didWarnDefaultInputValue = false;
    var didWarnDefaultChecked = false;
    var didWarnDefaultSelectValue = false;
    var didWarnDefaultTextareaValue = false;
    var didWarnInvalidOptionChildren = false;
    var didWarnAboutNoopUpdateForComponent = {};
    var didWarnAboutBadClass = {};
    var didWarnAboutModulePatternComponent = {};
    var didWarnAboutDeprecatedWillMount = {};
    var didWarnAboutUndefinedDerivedState = {};
    var didWarnAboutUninitializedState = {};
    var valuePropNames = ['value', 'defaultValue'];
    var newlineEatingTags = {
      listing: true,
      pre: true,
      textarea: true
    }; // We accept any tag to be rendered but since this gets injected into arbitrary
    // HTML, we want to make sure that it's a safe tag.
    // http://www.w3.org/TR/REC-xml/#NT-Name

    var VALID_TAG_REGEX = /^[a-zA-Z][a-zA-Z:_\.\-\d]*$/; // Simplified subset

    var validatedTagCache = {};

    function validateDangerousTag(tag) {
      if (!validatedTagCache.hasOwnProperty(tag)) {
        if (!VALID_TAG_REGEX.test(tag)) {
          {
            throw Error("Invalid tag: " + tag);
          }
        }

        validatedTagCache[tag] = true;
      }
    }

    var styleNameCache = {};

    var processStyleName = function (styleName) {
      if (styleNameCache.hasOwnProperty(styleName)) {
        return styleNameCache[styleName];
      }

      var result = hyphenateStyleName(styleName);
      styleNameCache[styleName] = result;
      return result;
    };

    function createMarkupForStyles(styles) {
      var serialized = '';
      var delimiter = '';

      for (var styleName in styles) {
        if (!styles.hasOwnProperty(styleName)) {
          continue;
        }

        var isCustomProperty = styleName.indexOf('--') === 0;
        var styleValue = styles[styleName];
        {
          if (!isCustomProperty) {
            warnValidStyle$1(styleName, styleValue);
          }
        }

        if (styleValue != null) {
          serialized += delimiter + (isCustomProperty ? styleName : processStyleName(styleName)) + ':';
          serialized += dangerousStyleValue(styleName, styleValue, isCustomProperty);
          delimiter = ';';
        }
      }

      return serialized || null;
    }

    function warnNoop(publicInstance, callerName) {
      {
        var _constructor = publicInstance.constructor;
        var componentName = _constructor && getComponentName(_constructor) || 'ReactClass';
        var warningKey = componentName + '.' + callerName;

        if (didWarnAboutNoopUpdateForComponent[warningKey]) {
          return;
        }

        error('%s(...): Can only update a mounting component. ' + 'This usually means you called %s() outside componentWillMount() on the server. ' + 'This is a no-op.\n\nPlease check the code for the %s component.', callerName, callerName, componentName);
        didWarnAboutNoopUpdateForComponent[warningKey] = true;
      }
    }

    function shouldConstruct$1(Component) {
      return Component.prototype && Component.prototype.isReactComponent;
    }

    function getNonChildrenInnerMarkup(props) {
      var innerHTML = props.dangerouslySetInnerHTML;

      if (innerHTML != null) {
        if (innerHTML.__html != null) {
          return innerHTML.__html;
        }
      } else {
        var content = props.children;

        if (typeof content === 'string' || typeof content === 'number') {
          return escapeTextForBrowser(content);
        }
      }

      return null;
    }

    function flattenTopLevelChildren(children) {
      if (!React.isValidElement(children)) {
        return toArray(children);
      }

      var element = children;

      if (element.type !== REACT_FRAGMENT_TYPE) {
        return [element];
      }

      var fragmentChildren = element.props.children;

      if (!React.isValidElement(fragmentChildren)) {
        return toArray(fragmentChildren);
      }

      var fragmentChildElement = fragmentChildren;
      return [fragmentChildElement];
    }

    function flattenOptionChildren(children) {
      if (children === undefined || children === null) {
        return children;
      }

      var content = ''; // Flatten children and warn if they aren't strings or numbers;
      // invalid types are ignored.

      React.Children.forEach(children, function (child) {
        if (child == null) {
          return;
        }

        content += child;
        {
          if (!didWarnInvalidOptionChildren && typeof child !== 'string' && typeof child !== 'number') {
            didWarnInvalidOptionChildren = true;
            error('Only strings and numbers are supported as <option> children.');
          }
        }
      });
      return content;
    }

    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;
    var STYLE = 'style';
    var RESERVED_PROPS = {
      children: null,
      dangerouslySetInnerHTML: null,
      suppressContentEditableWarning: null,
      suppressHydrationWarning: null
    };

    function createOpenTagMarkup(tagVerbatim, tagLowercase, props, namespace, makeStaticMarkup, isRootElement) {
      var ret = '<' + tagVerbatim;
      var isCustomComponent$1 = isCustomComponent(tagLowercase, props);

      for (var propKey in props) {
        if (!hasOwnProperty$2.call(props, propKey)) {
          continue;
        }

        var propValue = props[propKey];

        if (propValue == null) {
          continue;
        }

        if (propKey === STYLE) {
          propValue = createMarkupForStyles(propValue);
        }

        var markup = null;

        if (isCustomComponent$1) {
          if (!RESERVED_PROPS.hasOwnProperty(propKey)) {
            markup = createMarkupForCustomAttribute(propKey, propValue);
          }
        } else {
          markup = createMarkupForProperty(propKey, propValue);
        }

        if (markup) {
          ret += ' ' + markup;
        }
      } // For static pages, no need to put React ID and checksum. Saves lots of
      // bytes.


      if (makeStaticMarkup) {
        return ret;
      }

      if (isRootElement) {
        ret += ' ' + createMarkupForRoot();
      }

      return ret;
    }

    function validateRenderResult(child, type) {
      if (child === undefined) {
        {
          {
            throw Error((getComponentName(type) || 'Component') + "(...): Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.");
          }
        }
      }
    }

    function resolve(child, context, threadID) {
      while (React.isValidElement(child)) {
        // Safe because we just checked it's an element.
        var element = child;
        var Component = element.type;
        {
          pushElementToDebugStack(element);
        }

        if (typeof Component !== 'function') {
          break;
        }

        processChild(element, Component);
      } // Extra closure so queue and replace can be captured properly


      function processChild(element, Component) {
        var isClass = shouldConstruct$1(Component);
        var publicContext = processContext(Component, context, threadID, isClass);
        var queue = [];
        var replace = false;
        var updater = {
          isMounted: function (publicInstance) {
            return false;
          },
          enqueueForceUpdate: function (publicInstance) {
            if (queue === null) {
              warnNoop(publicInstance, 'forceUpdate');
              return null;
            }
          },
          enqueueReplaceState: function (publicInstance, completeState) {
            replace = true;
            queue = [completeState];
          },
          enqueueSetState: function (publicInstance, currentPartialState) {
            if (queue === null) {
              warnNoop(publicInstance, 'setState');
              return null;
            }

            queue.push(currentPartialState);
          }
        };
        var inst;

        if (isClass) {
          inst = new Component(element.props, publicContext, updater);

          if (typeof Component.getDerivedStateFromProps === 'function') {
            {
              if (inst.state === null || inst.state === undefined) {
                var componentName = getComponentName(Component) || 'Unknown';

                if (!didWarnAboutUninitializedState[componentName]) {
                  error('`%s` uses `getDerivedStateFromProps` but its initial state is ' + '%s. This is not recommended. Instead, define the initial state by ' + 'assigning an object to `this.state` in the constructor of `%s`. ' + 'This ensures that `getDerivedStateFromProps` arguments have a consistent shape.', componentName, inst.state === null ? 'null' : 'undefined', componentName);
                  didWarnAboutUninitializedState[componentName] = true;
                }
              }
            }
            var partialState = Component.getDerivedStateFromProps.call(null, element.props, inst.state);
            {
              if (partialState === undefined) {
                var _componentName = getComponentName(Component) || 'Unknown';

                if (!didWarnAboutUndefinedDerivedState[_componentName]) {
                  error('%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. ' + 'You have returned undefined.', _componentName);
                  didWarnAboutUndefinedDerivedState[_componentName] = true;
                }
              }
            }

            if (partialState != null) {
              inst.state = _assign({}, inst.state, partialState);
            }
          }
        } else {
          {
            if (Component.prototype && typeof Component.prototype.render === 'function') {
              var _componentName2 = getComponentName(Component) || 'Unknown';

              if (!didWarnAboutBadClass[_componentName2]) {
                error("The <%s /> component appears to have a render method, but doesn't extend React.Component. " + 'This is likely to cause errors. Change %s to extend React.Component instead.', _componentName2, _componentName2);
                didWarnAboutBadClass[_componentName2] = true;
              }
            }
          }
          var componentIdentity = {};
          prepareToUseHooks(componentIdentity);
          inst = Component(element.props, publicContext, updater);
          inst = finishHooks(Component, element.props, inst, publicContext);
          {
            // Support for module components is deprecated and is removed behind a flag.
            // Whether or not it would crash later, we want to show a good message in DEV first.
            if (inst != null && inst.render != null) {
              var _componentName3 = getComponentName(Component) || 'Unknown';

              if (!didWarnAboutModulePatternComponent[_componentName3]) {
                error('The <%s /> component appears to be a function component that returns a class instance. ' + 'Change %s to a class that extends React.Component instead. ' + "If you can't use a class try assigning the prototype on the function as a workaround. " + "`%s.prototype = React.Component.prototype`. Don't use an arrow function since it " + 'cannot be called with `new` by React.', _componentName3, _componentName3, _componentName3);
                didWarnAboutModulePatternComponent[_componentName3] = true;
              }
            }
          } // If the flag is on, everything is assumed to be a function component.
          // Otherwise, we also do the unfortunate dynamic checks.

          if (inst == null || inst.render == null) {
            child = inst;
            validateRenderResult(child, Component);
            return;
          }
        }

        inst.props = element.props;
        inst.context = publicContext;
        inst.updater = updater;
        var initialState = inst.state;

        if (initialState === undefined) {
          inst.state = initialState = null;
        }

        if (typeof inst.UNSAFE_componentWillMount === 'function' || typeof inst.componentWillMount === 'function') {
          if (typeof inst.componentWillMount === 'function') {
            {
              if (inst.componentWillMount.__suppressDeprecationWarning !== true) {
                var _componentName4 = getComponentName(Component) || 'Unknown';

                if (!didWarnAboutDeprecatedWillMount[_componentName4]) {
                  warn( // keep this warning in sync with ReactStrictModeWarning.js
                  'componentWillMount has been renamed, and is not recommended for use. ' + 'See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n' + '* Move code from componentWillMount to componentDidMount (preferred in most cases) ' + 'or the constructor.\n' + '\nPlease update the following components: %s', _componentName4);
                  didWarnAboutDeprecatedWillMount[_componentName4] = true;
                }
              }
            } // In order to support react-lifecycles-compat polyfilled components,
            // Unsafe lifecycles should not be invoked for any component with the new gDSFP.

            if (typeof Component.getDerivedStateFromProps !== 'function') {
              inst.componentWillMount();
            }
          }

          if (typeof inst.UNSAFE_componentWillMount === 'function' && typeof Component.getDerivedStateFromProps !== 'function') {
            // In order to support react-lifecycles-compat polyfilled components,
            // Unsafe lifecycles should not be invoked for any component with the new gDSFP.
            inst.UNSAFE_componentWillMount();
          }

          if (queue.length) {
            var oldQueue = queue;
            var oldReplace = replace;
            queue = null;
            replace = false;

            if (oldReplace && oldQueue.length === 1) {
              inst.state = oldQueue[0];
            } else {
              var nextState = oldReplace ? oldQueue[0] : inst.state;
              var dontMutate = true;

              for (var i = oldReplace ? 1 : 0; i < oldQueue.length; i++) {
                var partial = oldQueue[i];

                var _partialState = typeof partial === 'function' ? partial.call(inst, nextState, element.props, publicContext) : partial;

                if (_partialState != null) {
                  if (dontMutate) {
                    dontMutate = false;
                    nextState = _assign({}, nextState, _partialState);
                  } else {
                    _assign(nextState, _partialState);
                  }
                }
              }

              inst.state = nextState;
            }
          } else {
            queue = null;
          }
        }

        child = inst.render();
        {
          if (child === undefined && inst.render._isMockFunction) {
            // This is probably bad practice. Consider warning here and
            // deprecating this convenience.
            child = null;
          }
        }
        validateRenderResult(child, Component);
        var childContext;
        {
          if (typeof inst.getChildContext === 'function') {
            var _childContextTypes = Component.childContextTypes;

            if (typeof _childContextTypes === 'object') {
              childContext = inst.getChildContext();

              for (var contextKey in childContext) {
                if (!(contextKey in _childContextTypes)) {
                  {
                    throw Error((getComponentName(Component) || 'Unknown') + ".getChildContext(): key \"" + contextKey + "\" is not defined in childContextTypes.");
                  }
                }
              }
            } else {
              {
                error('%s.getChildContext(): childContextTypes must be defined in order to ' + 'use getChildContext().', getComponentName(Component) || 'Unknown');
              }
            }
          }

          if (childContext) {
            context = _assign({}, context, childContext);
          }
        }
      }

      return {
        child: child,
        context: context
      };
    }

    var ReactDOMServerRenderer = /*#__PURE__*/function () {
      // TODO: type this more strictly:
      // DEV-only
      function ReactDOMServerRenderer(children, makeStaticMarkup, options) {
        var flatChildren = flattenTopLevelChildren(children);
        var topFrame = {
          type: null,
          // Assume all trees start in the HTML namespace (not totally true, but
          // this is what we did historically)
          domNamespace: Namespaces.html,
          children: flatChildren,
          childIndex: 0,
          context: emptyObject,
          footer: ''
        };
        {
          topFrame.debugElementStack = [];
        }
        this.threadID = allocThreadID();
        this.stack = [topFrame];
        this.exhausted = false;
        this.currentSelectValue = null;
        this.previousWasTextNode = false;
        this.makeStaticMarkup = makeStaticMarkup;
        this.suspenseDepth = 0; // Context (new API)

        this.contextIndex = -1;
        this.contextStack = [];
        this.contextValueStack = []; // useOpaqueIdentifier ID

        this.uniqueID = 0;
        this.identifierPrefix = options && options.identifierPrefix || '';
        {
          this.contextProviderStack = [];
        }
      }

      var _proto = ReactDOMServerRenderer.prototype;

      _proto.destroy = function destroy() {
        if (!this.exhausted) {
          this.exhausted = true;
          this.clearProviders();
          freeThreadID(this.threadID);
        }
      }
      /**
       * Note: We use just two stacks regardless of how many context providers you have.
       * Providers are always popped in the reverse order to how they were pushed
       * so we always know on the way down which provider you'll encounter next on the way up.
       * On the way down, we push the current provider, and its context value *before*
       * we mutated it, onto the stacks. Therefore, on the way up, we always know which
       * provider needs to be "restored" to which value.
       * https://github.com/facebook/react/pull/12985#issuecomment-396301248
       */
      ;

      _proto.pushProvider = function pushProvider(provider) {
        var index = ++this.contextIndex;
        var context = provider.type._context;
        var threadID = this.threadID;
        validateContextBounds(context, threadID);
        var previousValue = context[threadID]; // Remember which value to restore this context to on our way up.

        this.contextStack[index] = context;
        this.contextValueStack[index] = previousValue;
        {
          // Only used for push/pop mismatch warnings.
          this.contextProviderStack[index] = provider;
        } // Mutate the current value.

        context[threadID] = provider.props.value;
      };

      _proto.popProvider = function popProvider(provider) {
        var index = this.contextIndex;
        {
          if (index < 0 || provider !== this.contextProviderStack[index]) {
            error('Unexpected pop.');
          }
        }
        var context = this.contextStack[index];
        var previousValue = this.contextValueStack[index]; // "Hide" these null assignments from Flow by using `any`
        // because conceptually they are deletions--as long as we
        // promise to never access values beyond `this.contextIndex`.

        this.contextStack[index] = null;
        this.contextValueStack[index] = null;
        {
          this.contextProviderStack[index] = null;
        }
        this.contextIndex--; // Restore to the previous value we stored as we were walking down.
        // We've already verified that this context has been expanded to accommodate
        // this thread id, so we don't need to do it again.

        context[this.threadID] = previousValue;
      };

      _proto.clearProviders = function clearProviders() {
        // Restore any remaining providers on the stack to previous values
        for (var index = this.contextIndex; index >= 0; index--) {
          var context = this.contextStack[index];
          var previousValue = this.contextValueStack[index];
          context[this.threadID] = previousValue;
        }
      };

      _proto.read = function read(bytes) {
        if (this.exhausted) {
          return null;
        }

        var prevPartialRenderer = currentPartialRenderer;
        setCurrentPartialRenderer(this);
        var prevDispatcher = ReactCurrentDispatcher$1.current;
        ReactCurrentDispatcher$1.current = Dispatcher;

        try {
          // Markup generated within <Suspense> ends up buffered until we know
          // nothing in that boundary suspended
          var out = [''];
          var suspended = false;

          while (out[0].length < bytes) {
            if (this.stack.length === 0) {
              this.exhausted = true;
              freeThreadID(this.threadID);
              break;
            }

            var frame = this.stack[this.stack.length - 1];

            if (suspended || frame.childIndex >= frame.children.length) {
              var footer = frame.footer;

              if (footer !== '') {
                this.previousWasTextNode = false;
              }

              this.stack.pop();

              if (frame.type === 'select') {
                this.currentSelectValue = null;
              } else if (frame.type != null && frame.type.type != null && frame.type.type.$$typeof === REACT_PROVIDER_TYPE) {
                var provider = frame.type;
                this.popProvider(provider);
              } else if (frame.type === REACT_SUSPENSE_TYPE) {
                this.suspenseDepth--;
                var buffered = out.pop();

                if (suspended) {
                  suspended = false; // If rendering was suspended at this boundary, render the fallbackFrame

                  var fallbackFrame = frame.fallbackFrame;

                  if (!fallbackFrame) {
                    {
                      throw Error(true ? "ReactDOMServer did not find an internal fallback frame for Suspense. This is a bug in React. Please file an issue." : formatProdErrorMessage(303));
                    }
                  }

                  this.stack.push(fallbackFrame);
                  out[this.suspenseDepth] += '<!--$!-->'; // Skip flushing output since we're switching to the fallback

                  continue;
                } else {
                  out[this.suspenseDepth] += buffered;
                }
              } // Flush output


              out[this.suspenseDepth] += footer;
              continue;
            }

            var child = frame.children[frame.childIndex++];
            var outBuffer = '';

            if (true) {
              pushCurrentDebugStack(this.stack); // We're starting work on this frame, so reset its inner stack.

              frame.debugElementStack.length = 0;
            }

            try {
              outBuffer += this.render(child, frame.context, frame.domNamespace);
            } catch (err) {
              if (err != null && typeof err.then === 'function') {
                if (enableSuspenseServerRenderer) ;else {
                  if (!false) {
                    {
                      throw Error(true ? "ReactDOMServer does not yet support Suspense." : formatProdErrorMessage(294));
                    }
                  }
                }
              } else {
                throw err;
              }
            } finally {
              if (true) {
                popCurrentDebugStack();
              }
            }

            if (out.length <= this.suspenseDepth) {
              out.push('');
            }

            out[this.suspenseDepth] += outBuffer;
          }

          return out[0];
        } finally {
          ReactCurrentDispatcher$1.current = prevDispatcher;
          setCurrentPartialRenderer(prevPartialRenderer);
          resetHooksState();
        }
      };

      _proto.render = function render(child, context, parentNamespace) {
        if (typeof child === 'string' || typeof child === 'number') {
          var text = '' + child;

          if (text === '') {
            return '';
          }

          if (this.makeStaticMarkup) {
            return escapeTextForBrowser(text);
          }

          if (this.previousWasTextNode) {
            return '<!-- -->' + escapeTextForBrowser(text);
          }

          this.previousWasTextNode = true;
          return escapeTextForBrowser(text);
        } else {
          var nextChild;

          var _resolve = resolve(child, context, this.threadID);

          nextChild = _resolve.child;
          context = _resolve.context;

          if (nextChild === null || nextChild === false) {
            return '';
          } else if (!React.isValidElement(nextChild)) {
            if (nextChild != null && nextChild.$$typeof != null) {
              // Catch unexpected special types early.
              var $$typeof = nextChild.$$typeof;

              if (!($$typeof !== REACT_PORTAL_TYPE)) {
                {
                  throw Error("Portals are not currently supported by the server renderer. Render them conditionally so that they only appear on the client render.");
                }
              } // Catch-all to prevent an infinite loop if React.Children.toArray() supports some new type.


              {
                {
                  throw Error("Unknown element-like object type: " + $$typeof.toString() + ". This is likely a bug in React. Please file an issue.");
                }
              }
            }

            var nextChildren = toArray(nextChild);
            var frame = {
              type: null,
              domNamespace: parentNamespace,
              children: nextChildren,
              childIndex: 0,
              context: context,
              footer: ''
            };
            {
              frame.debugElementStack = [];
            }
            this.stack.push(frame);
            return '';
          } // Safe because we just checked it's an element.


          var nextElement = nextChild;
          var elementType = nextElement.type;

          if (typeof elementType === 'string') {
            return this.renderDOM(nextElement, context, parentNamespace);
          }

          switch (elementType) {
            // TODO: LegacyHidden acts the same as a fragment. This only works
            // because we currently assume that every instance of LegacyHidden is
            // accompanied by a host component wrapper. In the hidden mode, the host
            // component is given a `hidden` attribute, which ensures that the
            // initial HTML is not visible. To support the use of LegacyHidden as a
            // true fragment, without an extra DOM node, we would have to hide the
            // initial HTML in some other way.
            case REACT_LEGACY_HIDDEN_TYPE:
            case REACT_DEBUG_TRACING_MODE_TYPE:
            case REACT_STRICT_MODE_TYPE:
            case REACT_PROFILER_TYPE:
            case REACT_SUSPENSE_LIST_TYPE:
            case REACT_FRAGMENT_TYPE:
              {
                var _nextChildren = toArray(nextChild.props.children);

                var _frame = {
                  type: null,
                  domNamespace: parentNamespace,
                  children: _nextChildren,
                  childIndex: 0,
                  context: context,
                  footer: ''
                };
                {
                  _frame.debugElementStack = [];
                }
                this.stack.push(_frame);
                return '';
              }

            case REACT_SUSPENSE_TYPE:
              {
                {
                  {
                    {
                      throw Error("ReactDOMServer does not yet support Suspense.");
                    }
                  }
                }
              }
            // eslint-disable-next-line-no-fallthrough

            case REACT_SCOPE_TYPE:
              {
                {
                  {
                    throw Error("ReactDOMServer does not yet support scope components.");
                  }
                }
              }
          }

          if (typeof elementType === 'object' && elementType !== null) {
            switch (elementType.$$typeof) {
              case REACT_FORWARD_REF_TYPE:
                {
                  var element = nextChild;

                  var _nextChildren5;

                  var componentIdentity = {};
                  prepareToUseHooks(componentIdentity);
                  _nextChildren5 = elementType.render(element.props, element.ref);
                  _nextChildren5 = finishHooks(elementType.render, element.props, _nextChildren5, element.ref);
                  _nextChildren5 = toArray(_nextChildren5);
                  var _frame5 = {
                    type: null,
                    domNamespace: parentNamespace,
                    children: _nextChildren5,
                    childIndex: 0,
                    context: context,
                    footer: ''
                  };
                  {
                    _frame5.debugElementStack = [];
                  }
                  this.stack.push(_frame5);
                  return '';
                }

              case REACT_MEMO_TYPE:
                {
                  var _element = nextChild;
                  var _nextChildren6 = [React.createElement(elementType.type, _assign({
                    ref: _element.ref
                  }, _element.props))];
                  var _frame6 = {
                    type: null,
                    domNamespace: parentNamespace,
                    children: _nextChildren6,
                    childIndex: 0,
                    context: context,
                    footer: ''
                  };
                  {
                    _frame6.debugElementStack = [];
                  }
                  this.stack.push(_frame6);
                  return '';
                }

              case REACT_PROVIDER_TYPE:
                {
                  var provider = nextChild;
                  var nextProps = provider.props;

                  var _nextChildren7 = toArray(nextProps.children);

                  var _frame7 = {
                    type: provider,
                    domNamespace: parentNamespace,
                    children: _nextChildren7,
                    childIndex: 0,
                    context: context,
                    footer: ''
                  };
                  {
                    _frame7.debugElementStack = [];
                  }
                  this.pushProvider(provider);
                  this.stack.push(_frame7);
                  return '';
                }

              case REACT_CONTEXT_TYPE:
                {
                  var reactContext = nextChild.type; // The logic below for Context differs depending on PROD or DEV mode. In
                  // DEV mode, we create a separate object for Context.Consumer that acts
                  // like a proxy to Context. This proxy object adds unnecessary code in PROD
                  // so we use the old behaviour (Context.Consumer references Context) to
                  // reduce size and overhead. The separate object references context via
                  // a property called "_context", which also gives us the ability to check
                  // in DEV mode if this property exists or not and warn if it does not.

                  {
                    if (reactContext._context === undefined) {
                      // This may be because it's a Context (rather than a Consumer).
                      // Or it may be because it's older React where they're the same thing.
                      // We only want to warn if we're sure it's a new React.
                      if (reactContext !== reactContext.Consumer) {
                        if (!hasWarnedAboutUsingContextAsConsumer) {
                          hasWarnedAboutUsingContextAsConsumer = true;
                          error('Rendering <Context> directly is not supported and will be removed in ' + 'a future major release. Did you mean to render <Context.Consumer> instead?');
                        }
                      }
                    } else {
                      reactContext = reactContext._context;
                    }
                  }
                  var _nextProps = nextChild.props;
                  var threadID = this.threadID;
                  validateContextBounds(reactContext, threadID);
                  var nextValue = reactContext[threadID];

                  var _nextChildren8 = toArray(_nextProps.children(nextValue));

                  var _frame8 = {
                    type: nextChild,
                    domNamespace: parentNamespace,
                    children: _nextChildren8,
                    childIndex: 0,
                    context: context,
                    footer: ''
                  };
                  {
                    _frame8.debugElementStack = [];
                  }
                  this.stack.push(_frame8);
                  return '';
                }
              // eslint-disable-next-line-no-fallthrough

              case REACT_FUNDAMENTAL_TYPE:
                {
                  {
                    {
                      throw Error("ReactDOMServer does not yet support the fundamental API.");
                    }
                  }
                }
              // eslint-disable-next-line-no-fallthrough

              case REACT_LAZY_TYPE:
                {
                  var _element2 = nextChild;
                  var lazyComponent = nextChild.type; // Attempt to initialize lazy component regardless of whether the
                  // suspense server-side renderer is enabled so synchronously
                  // resolved constructors are supported.

                  var payload = lazyComponent._payload;
                  var init = lazyComponent._init;
                  var result = init(payload);
                  var _nextChildren10 = [React.createElement(result, _assign({
                    ref: _element2.ref
                  }, _element2.props))];
                  var _frame10 = {
                    type: null,
                    domNamespace: parentNamespace,
                    children: _nextChildren10,
                    childIndex: 0,
                    context: context,
                    footer: ''
                  };
                  {
                    _frame10.debugElementStack = [];
                  }
                  this.stack.push(_frame10);
                  return '';
                }
            }
          }

          var info = '';
          {
            var owner = nextElement._owner;

            if (elementType === undefined || typeof elementType === 'object' && elementType !== null && Object.keys(elementType).length === 0) {
              info += ' You likely forgot to export your component from the file ' + "it's defined in, or you might have mixed up default and " + 'named imports.';
            }

            var ownerName = owner ? getComponentName(owner) : null;

            if (ownerName) {
              info += '\n\nCheck the render method of `' + ownerName + '`.';
            }
          }
          {
            {
              throw Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: " + (elementType == null ? elementType : typeof elementType) + "." + info);
            }
          }
        }
      };

      _proto.renderDOM = function renderDOM(element, context, parentNamespace) {
        var tag = element.type.toLowerCase();
        var namespace = parentNamespace;

        if (parentNamespace === Namespaces.html) {
          namespace = getIntrinsicNamespace(tag);
        }

        {
          if (namespace === Namespaces.html) {
            // Should this check be gated by parent namespace? Not sure we want to
            // allow <SVG> or <mATH>.
            if (tag !== element.type) {
              error('<%s /> is using incorrect casing. ' + 'Use PascalCase for React components, ' + 'or lowercase for HTML elements.', element.type);
            }
          }
        }
        validateDangerousTag(tag);
        var props = element.props;

        if (tag === 'input') {
          {
            checkControlledValueProps('input', props);

            if (props.checked !== undefined && props.defaultChecked !== undefined && !didWarnDefaultChecked) {
              error('%s contains an input of type %s with both checked and defaultChecked props. ' + 'Input elements must be either controlled or uncontrolled ' + '(specify either the checked prop, or the defaultChecked prop, but not ' + 'both). Decide between using a controlled or uncontrolled input ' + 'element and remove one of these props. More info: ' + 'https://reactjs.org/link/controlled-components', 'A component', props.type);
              didWarnDefaultChecked = true;
            }

            if (props.value !== undefined && props.defaultValue !== undefined && !didWarnDefaultInputValue) {
              error('%s contains an input of type %s with both value and defaultValue props. ' + 'Input elements must be either controlled or uncontrolled ' + '(specify either the value prop, or the defaultValue prop, but not ' + 'both). Decide between using a controlled or uncontrolled input ' + 'element and remove one of these props. More info: ' + 'https://reactjs.org/link/controlled-components', 'A component', props.type);
              didWarnDefaultInputValue = true;
            }
          }
          props = _assign({
            type: undefined
          }, props, {
            defaultChecked: undefined,
            defaultValue: undefined,
            value: props.value != null ? props.value : props.defaultValue,
            checked: props.checked != null ? props.checked : props.defaultChecked
          });
        } else if (tag === 'textarea') {
          {
            checkControlledValueProps('textarea', props);

            if (props.value !== undefined && props.defaultValue !== undefined && !didWarnDefaultTextareaValue) {
              error('Textarea elements must be either controlled or uncontrolled ' + '(specify either the value prop, or the defaultValue prop, but not ' + 'both). Decide between using a controlled or uncontrolled textarea ' + 'and remove one of these props. More info: ' + 'https://reactjs.org/link/controlled-components');
              didWarnDefaultTextareaValue = true;
            }
          }
          var initialValue = props.value;

          if (initialValue == null) {
            var defaultValue = props.defaultValue; // TODO (yungsters): Remove support for children content in <textarea>.

            var textareaChildren = props.children;

            if (textareaChildren != null) {
              {
                error('Use the `defaultValue` or `value` props instead of setting ' + 'children on <textarea>.');
              }

              if (!(defaultValue == null)) {
                {
                  throw Error("If you supply `defaultValue` on a <textarea>, do not pass children.");
                }
              }

              if (Array.isArray(textareaChildren)) {
                if (!(textareaChildren.length <= 1)) {
                  {
                    throw Error("<textarea> can only have at most one child.");
                  }
                }

                textareaChildren = textareaChildren[0];
              }

              defaultValue = '' + textareaChildren;
            }

            if (defaultValue == null) {
              defaultValue = '';
            }

            initialValue = defaultValue;
          }

          props = _assign({}, props, {
            value: undefined,
            children: '' + initialValue
          });
        } else if (tag === 'select') {
          {
            checkControlledValueProps('select', props);

            for (var i = 0; i < valuePropNames.length; i++) {
              var propName = valuePropNames[i];

              if (props[propName] == null) {
                continue;
              }

              var isArray = Array.isArray(props[propName]);

              if (props.multiple && !isArray) {
                error('The `%s` prop supplied to <select> must be an array if ' + '`multiple` is true.', propName);
              } else if (!props.multiple && isArray) {
                error('The `%s` prop supplied to <select> must be a scalar ' + 'value if `multiple` is false.', propName);
              }
            }

            if (props.value !== undefined && props.defaultValue !== undefined && !didWarnDefaultSelectValue) {
              error('Select elements must be either controlled or uncontrolled ' + '(specify either the value prop, or the defaultValue prop, but not ' + 'both). Decide between using a controlled or uncontrolled select ' + 'element and remove one of these props. More info: ' + 'https://reactjs.org/link/controlled-components');
              didWarnDefaultSelectValue = true;
            }
          }
          this.currentSelectValue = props.value != null ? props.value : props.defaultValue;
          props = _assign({}, props, {
            value: undefined
          });
        } else if (tag === 'option') {
          var selected = null;
          var selectValue = this.currentSelectValue;
          var optionChildren = flattenOptionChildren(props.children);

          if (selectValue != null) {
            var value;

            if (props.value != null) {
              value = props.value + '';
            } else {
              value = optionChildren;
            }

            selected = false;

            if (Array.isArray(selectValue)) {
              // multiple
              for (var j = 0; j < selectValue.length; j++) {
                if ('' + selectValue[j] === value) {
                  selected = true;
                  break;
                }
              }
            } else {
              selected = '' + selectValue === value;
            }

            props = _assign({
              selected: undefined,
              children: undefined
            }, props, {
              selected: selected,
              children: optionChildren
            });
          }
        }

        {
          validatePropertiesInDevelopment(tag, props);
        }
        assertValidProps(tag, props);
        var out = createOpenTagMarkup(element.type, tag, props, namespace, this.makeStaticMarkup, this.stack.length === 1);
        var footer = '';

        if (omittedCloseTags.hasOwnProperty(tag)) {
          out += '/>';
        } else {
          out += '>';
          footer = '</' + element.type + '>';
        }

        var children;
        var innerMarkup = getNonChildrenInnerMarkup(props);

        if (innerMarkup != null) {
          children = [];

          if (newlineEatingTags.hasOwnProperty(tag) && innerMarkup.charAt(0) === '\n') {
            // text/html ignores the first character in these tags if it's a newline
            // Prefer to break application/xml over text/html (for now) by adding
            // a newline specifically to get eaten by the parser. (Alternately for
            // textareas, replacing "^\n" with "\r\n" doesn't get eaten, and the first
            // \r is normalized out by HTMLTextAreaElement#value.)
            // See: <http://www.w3.org/TR/html-polyglot/#newlines-in-textarea-and-pre>
            // See: <http://www.w3.org/TR/html5/syntax.html#element-restrictions>
            // See: <http://www.w3.org/TR/html5/syntax.html#newlines>
            // See: Parsing of "textarea" "listing" and "pre" elements
            //  from <http://www.w3.org/TR/html5/syntax.html#parsing-main-inbody>
            out += '\n';
          }

          out += innerMarkup;
        } else {
          children = toArray(props.children);
        }

        var frame = {
          domNamespace: getChildNamespace(parentNamespace, element.type),
          type: tag,
          children: children,
          childIndex: 0,
          context: context,
          footer: footer
        };
        {
          frame.debugElementStack = [];
        }
        this.stack.push(frame);
        this.previousWasTextNode = false;
        return out;
      };

      return ReactDOMServerRenderer;
    }();
    /**
     * Render a ReactElement to its initial HTML. This should only be used on the
     * server.
     * See https://reactjs.org/docs/react-dom-server.html#rendertostring
     */


    function renderToString(element, options) {
      var renderer = new ReactDOMServerRenderer(element, false, options);

      try {
        var markup = renderer.read(Infinity);
        return markup;
      } finally {
        renderer.destroy();
      }
    }
    /**
     * Similar to renderToString, except this doesn't create extra DOM attributes
     * such as data-react-id that React uses internally.
     * See https://reactjs.org/docs/react-dom-server.html#rendertostaticmarkup
     */


    function renderToStaticMarkup(element, options) {
      var renderer = new ReactDOMServerRenderer(element, true, options);

      try {
        var markup = renderer.read(Infinity);
        return markup;
      } finally {
        renderer.destroy();
      }
    }

    function _inheritsLoose(subClass, superClass) {
      subClass.prototype = Object.create(superClass.prototype);
      subClass.prototype.constructor = subClass;
      subClass.__proto__ = superClass;
    }

    var ReactMarkupReadableStream = /*#__PURE__*/function (_Readable) {
      _inheritsLoose(ReactMarkupReadableStream, _Readable);

      function ReactMarkupReadableStream(element, makeStaticMarkup, options) {
        var _this; // Calls the stream.Readable(options) constructor. Consider exposing built-in
        // features like highWaterMark in the future.


        _this = _Readable.call(this, {}) || this;
        _this.partialRenderer = new ReactDOMServerRenderer(element, makeStaticMarkup, options);
        return _this;
      }

      var _proto = ReactMarkupReadableStream.prototype;

      _proto._destroy = function _destroy(err, callback) {
        this.partialRenderer.destroy();
        callback(err);
      };

      _proto._read = function _read(size) {
        try {
          this.push(this.partialRenderer.read(size));
        } catch (err) {
          this.destroy(err);
        }
      };

      return ReactMarkupReadableStream;
    }(stream.Readable);
    /**
     * Render a ReactElement to its initial HTML. This should only be used on the
     * server.
     * See https://reactjs.org/docs/react-dom-server.html#rendertonodestream
     */


    function renderToNodeStream(element, options) {
      return new ReactMarkupReadableStream(element, false, options);
    }
    /**
     * Similar to renderToNodeStream, except this doesn't create extra DOM attributes
     * such as data-react-id that React uses internally.
     * See https://reactjs.org/docs/react-dom-server.html#rendertostaticnodestream
     */


    function renderToStaticNodeStream(element, options) {
      return new ReactMarkupReadableStream(element, true, options);
    }

    reactDomServer_node_development.renderToNodeStream = renderToNodeStream;
    reactDomServer_node_development.renderToStaticMarkup = renderToStaticMarkup;
    reactDomServer_node_development.renderToStaticNodeStream = renderToStaticNodeStream;
    reactDomServer_node_development.renderToString = renderToString;
    reactDomServer_node_development.version = ReactVersion;
  })();
}

if (process.env.NODE_ENV === 'production') {
  server_node.exports = reactDomServer_node_production_min;
} else {
  server_node.exports = reactDomServer_node_development;
}

var server = server_node.exports;
var TEXT_FIELD_ID = 'sendbird-message-input-text-field';
var LINE_HEIGHT = 76;

var noop = function noop() {};

var handleUploadFile = function handleUploadFile(callback) {
  return function (event) {
    if (event.target.files && event.target.files[0]) {
      callback(event.target.files[0]);
    } // eslint-disable-next-line no-param-reassign


    event.target.value = '';
  };
};

var initialTargetStringInfo = {
  targetString: '',
  startNodeIndex: null,
  startOffsetIndex: null,
  endNodeIndex: null,
  endOffsetIndex: null
};
var MessageInput = /*#__PURE__*/React__default__default["default"].forwardRef(function (props, ref) {
  var className = props.className,
      isEdit = props.isEdit,
      isMentionEnabled = props.isMentionEnabled,
      disabled = props.disabled,
      message = props.message,
      placeholder = props.placeholder,
      maxLength = props.maxLength,
      onFileUpload = props.onFileUpload,
      onSendMessage = props.onSendMessage,
      onUpdateMessage = props.onUpdateMessage,
      onCancelEdit = props.onCancelEdit,
      onStartTyping = props.onStartTyping,
      channelUrl = props.channelUrl,
      mentionSelectedUser = props.mentionSelectedUser,
      onUserMentioned = props.onUserMentioned,
      onMentionStringChange = props.onMentionStringChange,
      onMentionedUserIdsUpdated = props.onMentionedUserIdsUpdated,
      _onKeyUp = props.onKeyUp,
      _onKeyDown = props.onKeyDown;

  var _useContext = React__default.useContext(LocalizationContext),
      stringSet = _useContext.stringSet;

  var fileInputRef = React__default.useRef(null);

  var _useState = React__default.useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      isInput = _useState2[0],
      setIsInput = _useState2[1];

  var _useState3 = React__default.useState([]),
      _useState4 = _slicedToArray(_useState3, 2),
      mentionedUserIds = _useState4[0],
      setMentionedUserIds = _useState4[1];

  var _useState5 = React__default.useState(_objectSpread2({}, initialTargetStringInfo)),
      _useState6 = _slicedToArray(_useState5, 2),
      targetStringInfo = _useState6[0],
      setTargetStringInfo = _useState6[1];

  var setHeight = React__default.useMemo(function () {
    return function () {
      try {
        var elem = ref.current;
        var MAX_HEIGHT = window.document.body.offsetHeight * 0.6;

        if (elem && elem.scrollHeight >= LINE_HEIGHT) {
          if (MAX_HEIGHT < elem.scrollHeight) {
            elem.style.height = 'auto';
            elem.style.height = "".concat(MAX_HEIGHT, "px");
          } else {
            elem.style.height = 'auto';
            elem.style.height = "".concat(elem.scrollHeight, "px");
          }
        } else {
          elem.style.height = '';
        }
      } catch (error) {// error
      }
    };
  }, []); // #Mention | Clear input value when channel changes

  React__default.useEffect(function () {
    if (!isEdit) {
      setIsInput(false);
      document.getElementById(TEXT_FIELD_ID).innerHTML = '';
    }
  }, [channelUrl]); // #Mention | Fill message input values

  React__default.useEffect(function () {
    if (isEdit && message !== null && message !== void 0 && message.messageId) {
      var _message$mentionedUse, _message$mentionedMes, _textField$innerText; // const textField = document.getElementById(TEXT_FIELD_ID);


      var textField = ref.current;

      if (isMentionEnabled && (message === null || message === void 0 ? void 0 : (_message$mentionedUse = message.mentionedUsers) === null || _message$mentionedUse === void 0 ? void 0 : _message$mentionedUse.length) > 0 && (message === null || message === void 0 ? void 0 : (_message$mentionedMes = message.mentionedMessageTemplate) === null || _message$mentionedMes === void 0 ? void 0 : _message$mentionedMes.length) > 0) {
        var _message$mentionedMes2;
        /* mention enabled */


        var _message$mentionedUse2 = message.mentionedUsers,
            mentionedUsers = _message$mentionedUse2 === void 0 ? [] : _message$mentionedUse2;
        textField.innerHTML = message === null || message === void 0 ? void 0 : (_message$mentionedMes2 = message.mentionedMessageTemplate) === null || _message$mentionedMes2 === void 0 ? void 0 : _message$mentionedMes2.split(' ').map(function (word) {
          return convertWordToStringObj(word, mentionedUsers).map(function (stringObj) {
            var type = stringObj.type,
                value = stringObj.value,
                userId = stringObj.userId;

            if (type === StringObjType.mention && mentionedUsers.some(function (user) {
              return (user === null || user === void 0 ? void 0 : user.userId) === userId;
            })) {
              var _mentionedUsers$find;

              return server.renderToString( /*#__PURE__*/React__default__default["default"].createElement(MentionUserLabel, {
                userId: userId
              }, "".concat(USER_MENTION_TEMP_CHAR).concat(((_mentionedUsers$find = mentionedUsers.find(function (user) {
                return (user === null || user === void 0 ? void 0 : user.userId) === userId;
              })) === null || _mentionedUsers$find === void 0 ? void 0 : _mentionedUsers$find.nickname) || value || stringSet.MENTION_NAME__NO_NAME)));
            }

            return value;
          }).join('');
        }).join(' ');
      } else {
        /* mention disabled */
        textField.innerHTML = message === null || message === void 0 ? void 0 : message.message;
        setMentionedUserIds([]);
      }

      setIsInput((textField === null || textField === void 0 ? void 0 : (_textField$innerText = textField.innerText) === null || _textField$innerText === void 0 ? void 0 : _textField$innerText.length) > 0);
      setHeight();
    }
  }, [isEdit, message]); // #Mention | Detect MentionedLabel modified

  var useMentionedLabelDetection = React__default.useCallback(function () {
    var textField = ref.current;

    if (isMentionEnabled) {
      var newMentionedUserIds = _toConsumableArray(textField.getElementsByClassName('sendbird-mention-user-label')).map(function (node) {
        var _node$dataset;

        return node === null || node === void 0 ? void 0 : (_node$dataset = node.dataset) === null || _node$dataset === void 0 ? void 0 : _node$dataset.userid;
      });

      if (!arrayEqual(mentionedUserIds, newMentionedUserIds) || newMentionedUserIds.length === 0) {
        onMentionedUserIdsUpdated(newMentionedUserIds);
        setMentionedUserIds(newMentionedUserIds);
      }
    }

    setIsInput(textField.innerText.length > 0);
  }, [targetStringInfo, isMentionEnabled]); // #Mention | Replace selected user nickname to the MentionedUserLabel

  React__default.useEffect(function () {
    if (isMentionEnabled && mentionSelectedUser) {
      var targetString = targetStringInfo.targetString,
          startNodeIndex = targetStringInfo.startNodeIndex,
          startOffsetIndex = targetStringInfo.startOffsetIndex,
          endNodeIndex = targetStringInfo.endNodeIndex,
          endOffsetIndex = targetStringInfo.endOffsetIndex;

      if (targetString && startNodeIndex !== null && startOffsetIndex !== null) {
        var _document, _childNodes$startNode, _document2, _childNodes$endNodeIn; // const textField = document.getElementById(TEXT_FIELD_ID);


        var textField = ref.current;

        var childNodes = _toConsumableArray(textField === null || textField === void 0 ? void 0 : textField.childNodes);

        var frontTextNode = (_document = document) === null || _document === void 0 ? void 0 : _document.createTextNode((_childNodes$startNode = childNodes[startNodeIndex]) === null || _childNodes$startNode === void 0 ? void 0 : _childNodes$startNode.textContent.slice(0, startOffsetIndex));
        var backTextNode = (_document2 = document) === null || _document2 === void 0 ? void 0 : _document2.createTextNode("\xA0".concat((_childNodes$endNodeIn = childNodes[endNodeIndex]) === null || _childNodes$endNodeIn === void 0 ? void 0 : _childNodes$endNodeIn.textContent.slice(endOffsetIndex)));
        var mentionLabel = server.renderToString( /*#__PURE__*/React__default__default["default"].createElement(MentionUserLabel, {
          userId: mentionSelectedUser === null || mentionSelectedUser === void 0 ? void 0 : mentionSelectedUser.userId
        }, "".concat(USER_MENTION_TEMP_CHAR).concat((mentionSelectedUser === null || mentionSelectedUser === void 0 ? void 0 : mentionSelectedUser.nickname) || stringSet.MENTION_NAME__NO_NAME)));
        var div = document.createElement('div');
        div.innerHTML = mentionLabel;
        var newNodes = [].concat(_toConsumableArray(childNodes.slice(0, startNodeIndex)), [frontTextNode, div.childNodes[0], backTextNode], _toConsumableArray(childNodes.slice(endNodeIndex + 1)));
        textField.innerHTML = '';
        newNodes.forEach(function (newNode) {
          textField.appendChild(newNode);
        });
        onUserMentioned(mentionSelectedUser);

        if (window.getSelection || document.getSelection) {
          // set caret postion
          var selection = window.getSelection() || document.getSelection();
          selection.removeAllRanges();
          var range = new Range();
          range.selectNodeContents(textField);
          range.setStart(textField.childNodes[startNodeIndex + 2], 1);
          range.setEnd(textField.childNodes[startNodeIndex + 2], 1);
          range.collapse(false);
          selection.addRange(range);
          textField.focus();
        }

        setTargetStringInfo(_objectSpread2({}, initialTargetStringInfo));
        setHeight();
        useMentionedLabelDetection();
      }
    }
  }, [mentionSelectedUser, isMentionEnabled]); // #Mention | Detect mentioning user nickname

  var useMentionInputDetection = React__default.useCallback(function () {
    var _window, _window$getSelection, _document3, _document3$getSelecti;

    var selection = ((_window = window) === null || _window === void 0 ? void 0 : (_window$getSelection = _window.getSelection) === null || _window$getSelection === void 0 ? void 0 : _window$getSelection.call(_window)) || ((_document3 = document) === null || _document3 === void 0 ? void 0 : (_document3$getSelecti = _document3.getSelection) === null || _document3$getSelecti === void 0 ? void 0 : _document3$getSelecti.call(_document3));
    var textField = ref.current;

    if (selection.anchorNode === textField) {
      onMentionStringChange('');
    }

    if (isMentionEnabled && selection && selection.anchorNode === selection.focusNode && selection.anchorOffset === selection.focusOffset) {
      var textStack = '';
      var startNodeIndex = null;
      var startOffsetIndex = null;

      for (var index = 0; index < textField.childNodes.length; index += 1) {
        var currentNode = textField.childNodes[index];

        if (currentNode.nodeType === NodeTypes.TextNode) {
          /* text node */
          var textContent = currentNode === selection.anchorNode ? (currentNode === null || currentNode === void 0 ? void 0 : currentNode.textContent.slice(0, selection.anchorOffset)) || '' : (currentNode === null || currentNode === void 0 ? void 0 : currentNode.textContent) || '';

          if (textStack.length > 0) {
            textStack += textContent;
          } else {
            var charLastIndex = textContent.lastIndexOf(USER_MENTION_TEMP_CHAR);

            for (var i = charLastIndex - 1; i > -1; i -= 1) {
              if (textContent[i] === USER_MENTION_TEMP_CHAR) {
                charLastIndex = i;
              } else {
                break;
              }
            }

            if (charLastIndex > -1) {
              textStack = textContent;
              startNodeIndex = index;
              startOffsetIndex = charLastIndex;
            }
          }
        } else {
          /* other nodes */
          textStack = '';
          startNodeIndex = null;
          startOffsetIndex = null;
        }

        if (currentNode === selection.anchorNode) {
          /**
           * targetString could be ''
           * startNodeIndex and startOffsetIndex could be null
           */
          var targetString = textStack ? textStack.slice(startOffsetIndex) : ''; // include template character

          setTargetStringInfo({
            targetString: targetString,
            startNodeIndex: startNodeIndex,
            startOffsetIndex: startOffsetIndex,
            endNodeIndex: index,
            endOffsetIndex: selection.anchorOffset
          });
          onMentionStringChange(targetString);
          return;
        }
      }
    }
  }, [isMentionEnabled]);

  var sendMessage = function sendMessage() {
    var textField = ref.current;

    if (!isEdit && textField !== null && textField !== void 0 && textField.innerText) {
      var messageText = '';
      var mentionTemplate = '';
      textField.childNodes.forEach(function (node) {
        if (node.nodeType === NodeTypes.ElementNode && node.nodeName === NodeNames.Span) {
          var innerText = node.innerText,
              _node$dataset2 = node.dataset,
              dataset = _node$dataset2 === void 0 ? {} : _node$dataset2;
          var _dataset$userid = dataset.userid,
              userid = _dataset$userid === void 0 ? '' : _dataset$userid;
          messageText += innerText;
          mentionTemplate += "".concat(USER_MENTION_TEMP_CHAR, "{").concat(userid, "}");
        } else if (node.nodeType === NodeTypes.ElementNode && node.nodeName === NodeNames.Br) {
          messageText += '\n';
          mentionTemplate += '\n';
        } else {
          // other nodes including text node
          var _node$textContent = node.textContent,
              textContent = _node$textContent === void 0 ? '' : _node$textContent;
          messageText += textContent;
          mentionTemplate += textContent;
        }
      });
      var params = {
        message: messageText,
        mentionTemplate: mentionTemplate
      };
      onSendMessage(params);
      document.getElementById(TEXT_FIELD_ID).innerHTML = '';
      setIsInput(false);
      setHeight();
    }
  };

  var editMessage = function editMessage() {
    var textField = ref.current;
    var messageId = message === null || message === void 0 ? void 0 : message.messageId;

    if (isEdit && messageId) {
      var messageText = '';
      var mentionTemplate = '';
      textField.childNodes.forEach(function (node) {
        if (node.nodeType === NodeTypes.ElementNode && node.nodeName === NodeNames.Span) {
          var innerText = node.innerText,
              _node$dataset3 = node.dataset,
              dataset = _node$dataset3 === void 0 ? {} : _node$dataset3;
          var _dataset$userid2 = dataset.userid,
              userid = _dataset$userid2 === void 0 ? '' : _dataset$userid2;
          messageText += innerText;
          mentionTemplate += "".concat(USER_MENTION_TEMP_CHAR, "{").concat(userid, "}");
        } else if (node.nodeType === NodeTypes.ElementNode && node.nodeName === NodeNames.Span) {
          messageText += '\n';
          mentionTemplate += '\n';
        } else {
          // other nodes including text node
          var _node$textContent2 = node.textContent,
              textContent = _node$textContent2 === void 0 ? '' : _node$textContent2;
          messageText += textContent;
          mentionTemplate += textContent;
        }
      });
      var params = {
        messageId: messageId,
        message: messageText,
        mentionTemplate: mentionTemplate
      };
      onUpdateMessage(params);
      document.getElementById(TEXT_FIELD_ID).innerHTML = '';
    }
  };

  return /*#__PURE__*/React__default__default["default"].createElement("form", {
    className: getClassName([className, isEdit ? 'sendbird-message-input__edit' : '', disabled ? 'sendbird-message-input-form__disabled' : ''])
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: getClassName(['sendbird-message-input', disabled ? 'sendbird-message-input__disabled' : ''])
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    id: "".concat(TEXT_FIELD_ID).concat(isEdit ? message === null || message === void 0 ? void 0 : message.messageId : ''),
    className: "sendbird-message-input--textarea",
    contentEditable: !disabled,
    role: "textbox",
    "aria-label": "Text Input",
    disabled: disabled,
    ref: ref,
    maxLength: maxLength,
    onKeyDown: function onKeyDown(e) {
      var preventEvent = _onKeyDown(e);

      if (preventEvent) {
        e.preventDefault();
      } else {
        var _e$nativeEvent, _ref$current, _ref$current$childNod, _ref$current2, _ref$current2$childNo, _ref$current2$childNo2, _ref$current$childNod2, _ref$current$childNod3;

        if (!e.shiftKey && e.key === MessageInputKeys.Enter && (e === null || e === void 0 ? void 0 : (_e$nativeEvent = e.nativeEvent) === null || _e$nativeEvent === void 0 ? void 0 : _e$nativeEvent.isComposing) !== true) {
          e.preventDefault();
          sendMessage();
        }

        if (e.key === MessageInputKeys.Backspace && (ref === null || ref === void 0 ? void 0 : (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : (_ref$current$childNod = _ref$current.childNodes) === null || _ref$current$childNod === void 0 ? void 0 : _ref$current$childNod.length) === 2 && !(ref !== null && ref !== void 0 && (_ref$current2 = ref.current) !== null && _ref$current2 !== void 0 && (_ref$current2$childNo = _ref$current2.childNodes) !== null && _ref$current2$childNo !== void 0 && (_ref$current2$childNo2 = _ref$current2$childNo[0]) !== null && _ref$current2$childNo2 !== void 0 && _ref$current2$childNo2.textContent) && ((_ref$current$childNod2 = ref.current.childNodes) === null || _ref$current$childNod2 === void 0 ? void 0 : (_ref$current$childNod3 = _ref$current$childNod2[1]) === null || _ref$current$childNod3 === void 0 ? void 0 : _ref$current$childNod3.nodeType) === NodeTypes.ElementNode) {
          ref.current.removeChild(ref.current.childNodes[1]);
        }
      }
    },
    onKeyUp: function onKeyUp(e) {
      var preventEvent = _onKeyUp(e);

      if (preventEvent) {
        e.preventDefault();
      } else {
        useMentionInputDetection();
      }
    },
    onClick: function onClick() {
      useMentionInputDetection();
    },
    onInput: function onInput() {
      var _document4, _document4$getElement, _document4$getElement2, _document4$getElement3;

      setHeight();
      onStartTyping();
      setIsInput(((_document4 = document) === null || _document4 === void 0 ? void 0 : (_document4$getElement = _document4.getElementById) === null || _document4$getElement === void 0 ? void 0 : (_document4$getElement2 = _document4$getElement.call(_document4, TEXT_FIELD_ID)) === null || _document4$getElement2 === void 0 ? void 0 : (_document4$getElement3 = _document4$getElement2.innerText) === null || _document4$getElement3 === void 0 ? void 0 : _document4$getElement3.length) > 0);
      useMentionedLabelDetection();
    },
    onPaste: function onPaste(e) {
      e.preventDefault();
      document.execCommand("insertHTML", false, e === null || e === void 0 ? void 0 : e.clipboardData.getData('text'));
    }
  }), !isInput && /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-message-input--placeholder",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_3
  }, placeholder || stringSet.MESSAGE_INPUT__PLACE_HOLDER), !isEdit && isInput && /*#__PURE__*/React__default__default["default"].createElement(IconButton, {
    className: "sendbird-message-input--send",
    height: "32px",
    width: "32px",
    onClick: function onClick() {
      return sendMessage();
    }
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    type: IconTypes.SEND,
    fillColor: IconColors.PRIMARY,
    width: "20px",
    height: "20px"
  })), !isEdit && !isInput && /*#__PURE__*/React__default__default["default"].createElement(IconButton, {
    className: "sendbird-message-input--attach",
    height: "32px",
    width: "32px",
    onClick: function onClick() {
      // todo: clear previous input
      fileInputRef.current.click();
    }
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    type: IconTypes.ATTACH,
    fillColor: IconColors.CONTENT_INVERSE,
    width: "20px",
    height: "20px"
  }), /*#__PURE__*/React__default__default["default"].createElement("input", {
    className: "sendbird-message-input--attach-input",
    type: "file",
    ref: fileInputRef,
    onChange: handleUploadFile(onFileUpload)
  }))), isEdit && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-message-input--edit-action"
  }, /*#__PURE__*/React__default__default["default"].createElement(Button, {
    className: "sendbird-message-input--edit-action__cancel",
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: onCancelEdit
  }, stringSet.BUTTON__CANCEL), /*#__PURE__*/React__default__default["default"].createElement(Button, {
    className: "sendbird-message-input--edit-action__save",
    type: ButtonTypes.PRIMARY,
    size: ButtonSizes.SMALL,
    onClick: function onClick() {
      return editMessage();
    }
  }, stringSet.BUTTON__SAVE)));
});
MessageInput.propTypes = {
  className: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.arrayOf(propTypes.exports.string)]),
  placeholder: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.bool]),
  isEdit: propTypes.exports.bool,
  isMentionEnabled: propTypes.exports.bool,
  message: propTypes.exports.shape({
    messageId: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.number]),
    message: propTypes.exports.string,
    mentionedMessageTemplate: propTypes.exports.string,
    mentionedUsers: propTypes.exports.arrayOf(propTypes.exports.shape({}))
  }),
  disabled: propTypes.exports.bool,
  maxLength: propTypes.exports.number,
  onFileUpload: propTypes.exports.func,
  onSendMessage: propTypes.exports.func,
  onUpdateMessage: propTypes.exports.func,
  onStartTyping: propTypes.exports.func,
  onCancelEdit: propTypes.exports.func,
  channelUrl: propTypes.exports.string,
  mentionSelectedUser: propTypes.exports.shape({
    userId: propTypes.exports.string,
    nickname: propTypes.exports.string
  }),
  onUserMentioned: propTypes.exports.func,
  onMentionStringChange: propTypes.exports.func,
  onMentionedUserIdsUpdated: propTypes.exports.func,
  onKeyUp: propTypes.exports.func,
  onKeyDown: propTypes.exports.func
};
MessageInput.defaultProps = {
  className: '',
  channelUrl: '',
  onSendMessage: noop,
  onUpdateMessage: noop,
  message: null,
  isEdit: false,
  isMentionEnabled: false,
  disabled: false,
  placeholder: '',
  maxLength: 5000,
  onFileUpload: noop,
  onCancelEdit: noop,
  onStartTyping: noop,
  mentionSelectedUser: null,
  onUserMentioned: noop,
  onMentionStringChange: noop,
  onMentionedUserIdsUpdated: noop,
  onKeyUp: noop,
  onKeyDown: noop
};

var http = /https?:\/\//;

function LinkLabel(_ref) {
  var className = _ref.className,
      src = _ref.src,
      type = _ref.type,
      color = _ref.color,
      children = _ref.children;
  var url = http.test(src) ? src : "http://".concat(src);
  return /*#__PURE__*/React__default__default["default"].createElement("a", {
    className: [].concat(_toConsumableArray(Array.isArray(className) ? className : [className]), ['sendbird-link-label', color ? changeColorToClassName$2(color) : '']).join(' '),
    href: url,
    target: "_blank",
    rel: "noopener noreferrer"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-link-label__label",
    type: type,
    color: color
  }, children));
}

LinkLabel.propTypes = {
  className: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.arrayOf(propTypes.exports.string)]),
  src: propTypes.exports.string.isRequired,
  type: propTypes.exports.oneOf(Object.keys(LabelTypography)).isRequired,
  color: propTypes.exports.oneOf(Object.keys(LabelColors)).isRequired,
  children: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.element, propTypes.exports.arrayOf(propTypes.exports.string), propTypes.exports.arrayOf(propTypes.exports.element)]).isRequired
};
LinkLabel.defaultProps = {
  className: ''
};

var Context = /*#__PURE__*/React__default__default["default"].createContext({
  opened: '',
  setOpened: noop$1
});
Context.Consumer;
Context.Provider;

var MessageSearchOrder;

(function (MessageSearchOrder) {
  MessageSearchOrder["SCORE"] = "score";
  MessageSearchOrder["TIMESTAMP"] = "ts";
})(MessageSearchOrder || (MessageSearchOrder = {}));

({
  appId: propTypes.exports.string.isRequired,
  userId: propTypes.exports.string.isRequired,
  accessToken: propTypes.exports.string,
  customApiHost: propTypes.exports.string,
  customWebSocketHost: propTypes.exports.string,
  theme: propTypes.exports.string,
  userListQuery: propTypes.exports.func,
  nickname: propTypes.exports.string,
  profileUrl: propTypes.exports.string,
  allowProfileEdit: propTypes.exports.bool,
  disableUserProfile: propTypes.exports.bool,
  renderUserProfile: propTypes.exports.func,
  onProfileEditSuccess: propTypes.exports.func,
  dateLocale: propTypes.exports.shape({}),
  config: propTypes.exports.shape({
    // None Error Warning Info 'All/Debug'
    logLevel: propTypes.exports.oneOfType([propTypes.exports.string, propTypes.exports.arrayOf(propTypes.exports.string)]),
    isREMUnitEnabled: propTypes.exports.bool
  }),
  isReactionEnabled: propTypes.exports.bool,
  replyType: propTypes.exports.oneOf(['NONE', 'QUOTE_REPLY', 'THREAD']),
  showSearchIcon: propTypes.exports.bool,
  isMessageGroupingEnabled: propTypes.exports.bool,
  stringSet: propTypes.exports.objectOf(propTypes.exports.string),
  colorSet: propTypes.exports.objectOf(propTypes.exports.string),
  imageCompression: propTypes.exports.shape({
    compressionRate: propTypes.exports.number,
    resizingWidth: propTypes.exports.oneOfType([propTypes.exports.number, propTypes.exports.string]),
    resizingHeight: propTypes.exports.oneOfType([propTypes.exports.number, propTypes.exports.string])
  }),
  disableAutoSelect: propTypes.exports.bool,
  isMentionEnabled: propTypes.exports.bool,
  isTypingIndicatorEnabledOnChannelList: propTypes.exports.bool,
  isMessageReceiptStatusEnabledOnChannelList: propTypes.exports.bool
});

var getMessageCreatedAt = function getMessageCreatedAt(message) {
  return format$1(message.createdAt, 'p');
};

var shouldFetchMore = function shouldFetchMore(messageLength, maxMessages) {
  if (typeof maxMessages !== 'number') {
    return true;
  }

  if (typeof maxMessages === 'number' && maxMessages > messageLength) {
    return true;
  }

  return false;
};

var scrollIntoLast = function scrollIntoLast(intialTry) {
  if (intialTry === void 0) {
    intialTry = 0;
  }

  var MAX_TRIES = 10;
  var currentTry = intialTry;

  if (currentTry > MAX_TRIES) {
    return;
  }

  try {
    var scrollDOM = document.querySelector('.sendbird-openchannel-conversation-scroll__container__item-container'); // eslint-disable-next-line no-multi-assign

    scrollDOM.scrollTop = scrollDOM.scrollHeight;
  } catch (error) {
    setTimeout(function () {
      scrollIntoLast(currentTry + 1);
    }, 500 * currentTry);
  }
};

var isSameGroup = function isSameGroup(message, comparingMessage) {
  var _a, _b, _c, _d;

  if (!(message && comparingMessage && (message === null || message === void 0 ? void 0 : message.messageType) && message.messageType !== 'admin' && (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.messageType) && comparingMessage.messageType !== 'admin' && (message === null || message === void 0 ? void 0 : message.sender) && (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.sender) && (message === null || message === void 0 ? void 0 : message.createdAt) && (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.createdAt) && ((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId) && ((_b = comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.sender) === null || _b === void 0 ? void 0 : _b.userId))) {
    return false;
  } // to fix typecasting


  var message_ = message;
  var comparingMessage_ = comparingMessage;
  return (message_ === null || message_ === void 0 ? void 0 : message_.sendingStatus) === (comparingMessage_ === null || comparingMessage_ === void 0 ? void 0 : comparingMessage_.sendingStatus) && ((_c = message_ === null || message_ === void 0 ? void 0 : message_.sender) === null || _c === void 0 ? void 0 : _c.userId) === ((_d = comparingMessage_ === null || comparingMessage_ === void 0 ? void 0 : comparingMessage_.sender) === null || _d === void 0 ? void 0 : _d.userId) && getMessageCreatedAt(message) === getMessageCreatedAt(comparingMessage);
};

var compareMessagesForGrouping = function compareMessagesForGrouping(prevMessage, currMessage, nextMessage) {
  return [isSameGroup(prevMessage, currMessage), isSameGroup(currMessage, nextMessage)];
};

var kFormatter = function kFormatter(num) {
  if (Math.abs(num) > 999999) {
    return "".concat((Math.abs(num) / 1000000).toFixed(1), "M");
  }

  if (Math.abs(num) > 999) {
    return "".concat((Math.abs(num) / 1000).toFixed(1), "K");
  }

  return "".concat(num);
};

var isOperator = function isOperator(openChannel, userId) {
  var operators = openChannel === null || openChannel === void 0 ? void 0 : openChannel.operators;

  if (operators.map(function (operator) {
    return operator.userId;
  }).indexOf(userId) < 0) {
    return false;
  }

  return true;
};

var isDisabledBecauseFrozen = function isDisabledBecauseFrozen(openChannel, userId) {
  var isFrozen = openChannel === null || openChannel === void 0 ? void 0 : openChannel.isFrozen;
  return isFrozen && !isOperator(openChannel, userId);
};

var isDisabledBecauseMuted = function isDisabledBecauseMuted(mutedParticipantIds, userId) {
  return mutedParticipantIds.indexOf(userId) > -1;
};

var fetchWithListQuery = function fetchWithListQuery(listQuery, logger, eachQueryNextCallback) {
  var fetchList = function fetchList(query) {
    var hasNext = query.hasNext;

    if (hasNext) {
      query.next().then(function (users) {
        eachQueryNextCallback(users);
        fetchList(query);
      }).catch(function (error) {
        logger.warning('OpenChannel | FetchUserList failed', error);
      });
    } else {
      logger.info('OpenChannel | FetchUserList finished');
    }
  };

  logger.info('OpenChannel | FetchUserList start', listQuery);
  fetchList(listQuery);
};

var pxToNumber = function pxToNumber(px) {
  if (typeof px === 'number') {
    return px;
  }

  if (typeof px === 'string') {
    var parsed = Number.parseFloat(px);

    if (!Number.isNaN(parsed)) {
      return parsed;
    }
  }

  return null;
};

var SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';
var SET_CHANNEL_INVALID = 'SET_CHANNEL_INVALID';
var RESET_MESSAGES = 'RESET_MESSAGES';
var EXIT_CURRENT_CHANNEL = 'EXIT_CURRENT_CHANNEL';
var GET_PREV_MESSAGES_START = 'GET_PREV_MESSAGES_START';
var GET_PREV_MESSAGES_SUCESS = 'GET_PREV_MESSAGES_SUCESS';
var GET_PREV_MESSAGES_FAIL = 'GET_PREV_MESSAGES_FAIL';
var SENDING_MESSAGE_FAILED = 'SENDING_MESSAGE_FAILED';
var SENDING_MESSAGE_SUCCEEDED = 'SENDING_MESSAGE_SUCCEEDED';
var SENDING_MESSAGE_START = 'SENDING_MESSAGE_START';
var RESENDING_MESSAGE_START = 'RESENDING_MESSAGE_START';
var FETCH_PARTICIPANT_LIST = 'FETCH_PARTICIPANT_LIST';
var FETCH_BANNED_USER_LIST = 'FETCH_BANNED_USER_LIST';
var FETCH_MUTED_USER_LIST = 'FETCH_MUTED_USER_LIST';
var TRIM_MESSAGE_LIST = 'TRIM_MESSAGE_LIST'; // event handlers

var ON_MESSAGE_RECEIVED = 'ON_MESSAGE_RECEIVED';
var ON_MESSAGE_UPDATED = 'ON_MESSAGE_UPDATED';
var ON_MESSAGE_DELETED = 'ON_MESSAGE_DELETED';
var ON_MESSAGE_DELETED_BY_REQ_ID = 'ON_MESSAGE_DELETED_BY_REQ_ID';
var ON_OPERATOR_UPDATED = 'ON_OPERATOR_UPDATED';
var ON_USER_ENTERED = 'ON_USER_ENTERED';
var ON_USER_EXITED = 'ON_USER_EXITED';
var ON_USER_MUTED = 'ON_USER_MUTED';
var ON_USER_UNMUTED = 'ON_USER_UNMUTED';
var ON_USER_BANNED = 'ON_USER_BANNED';
var ON_USER_UNBANNED = 'ON_USER_UNBANNED';
var ON_CHANNEL_FROZEN = 'ON_CHANNEL_FROZEN';
var ON_CHANNEL_UNFROZEN = 'ON_CHANNEL_UNFROZEN';
var ON_CHANNEL_CHANGED = 'ON_CHANNEL_CHANGED';
var ON_CHANNEL_DELETED = 'ON_CHANNEL_DELETED';
var ON_META_DATA_CREATED = 'ON_META_DATA_CREATED';
var ON_META_DATA_UPDATED = 'ON_META_DATA_UPDATED';
var ON_META_DATA_DELETED = 'ON_META_DATA_DELETED';
var ON_META_COUNTERS_CREATED = 'ON_META_COUNTERS_CREATED';
var ON_META_COUNTERS_UPDATED = 'ON_META_COUNTERS_UPDATED';
var ON_META_COUNTERS_DELETED = 'ON_META_COUNTERS_DELETED';
var ON_MENTION_RECEIVED = 'ON_MENTION_RECEIVED';

function reducer(state, action) {
  var _a, _b, _c;

  switch (action.type) {
    case RESET_MESSAGES:
      {
        return __assign(__assign({}, state), {
          allMessages: []
        });
      }

    case EXIT_CURRENT_CHANNEL:
      {
        if (((_a = action.payload) === null || _a === void 0 ? void 0 : _a.url) === ((_b = state.currentOpenChannel) === null || _b === void 0 ? void 0 : _b.url)) {
          return __assign(__assign({}, state), {
            currentOpenChannel: null
          });
        }

        return state;
      }

    case SET_CURRENT_CHANNEL:
      {
        var gottenChannel = action.payload;
        var operators = gottenChannel.operators;

        if (!state.isInvalid && state.currentOpenChannel && state.currentOpenChannel.url && state.currentOpenChannel.url === gottenChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          currentOpenChannel: gottenChannel,
          isInvalid: false,
          operators: operators,
          participants: operators,
          bannedParticipantIds: [],
          mutedParticipantIds: []
        });
      }

    case SET_CHANNEL_INVALID:
      {
        return __assign(__assign({}, state), {
          isInvalid: true
        });
      }

    case GET_PREV_MESSAGES_START:
      {
        return __assign(__assign({}, state), {
          loading: true
        });
      }

    case GET_PREV_MESSAGES_SUCESS:
    case GET_PREV_MESSAGES_FAIL:
      {
        var isFailed = action.type === GET_PREV_MESSAGES_FAIL;
        var _d = action.payload,
            _e = _d.currentOpenChannel,
            currentOpenChannel = _e === void 0 ? {} : _e,
            _f = _d.messages,
            messages = _f === void 0 ? [] : _f,
            hasMore = _d.hasMore,
            lastMessageTimestamp = _d.lastMessageTimestamp;
        var actionChannelUrl = currentOpenChannel.url;
        var receivedMessages_1 = isFailed ? [] : messages;

        var _hasMore = isFailed ? false : hasMore;

        var _lastMessageTimestamp = isFailed ? 0 : lastMessageTimestamp;

        var stateChannel = state.currentOpenChannel;
        var stateChannelUrl = stateChannel.url;

        if (actionChannelUrl !== stateChannelUrl) {
          return state;
        }

        var filteredAllMessages = state.allMessages.filter(function (message) {
          return !receivedMessages_1.find(function (_a) {
            var messageId = _a.messageId;
            return compareIds(messageId, message.messageId);
          });
        });
        return __assign(__assign({}, state), {
          loading: false,
          initialized: true,
          hasMore: _hasMore,
          lastMessageTimestamp: _lastMessageTimestamp,
          allMessages: __spreadArray(__spreadArray([], receivedMessages_1, true), filteredAllMessages, true)
        });
      }

    case SENDING_MESSAGE_START:
      {
        var _g = action.payload,
            message_1 = _g.message,
            channel = _g.channel;

        if ((channel === null || channel === void 0 ? void 0 : channel.url) !== state.currentOpenChannel.url || state.allMessages.some(function (m) {
          return m.reqId === message_1.reqId;
        }) // Handing failed first than sending start issue
        ) {
          return state;
        }

        return __assign(__assign({}, state), {
          allMessages: __spreadArray(__spreadArray([], state.allMessages, true), [message_1], false)
        });
      }

    case SENDING_MESSAGE_SUCCEEDED:
      {
        var sentMessage_1 = action.payload;
        var newMessages = state.allMessages.map(function (m) {
          return compareIds(m.reqId, sentMessage_1.reqId) ? sentMessage_1 : m;
        });
        return __assign(__assign({}, state), {
          allMessages: newMessages
        });
      }

    case SENDING_MESSAGE_FAILED:
      {
        var sentMessage_2 = action.payload;
        sentMessage_2.sendingStatus = 'failed';

        if (!state.allMessages.some(function (m) {
          return (m === null || m === void 0 ? void 0 : m.reqId) === (sentMessage_2 === null || sentMessage_2 === void 0 ? void 0 : sentMessage_2.reqId);
        })) {
          // Handling failed first than sending start issue
          return __assign(__assign({}, state), {
            allMessages: __spreadArray(__spreadArray([], state.allMessages.filter(function (m) {
              return !compareIds(m.reqId, sentMessage_2);
            }), true), [sentMessage_2], false)
          });
        } else {
          return __assign(__assign({}, state), {
            allMessages: state.allMessages.map(function (m) {
              return compareIds(m.reqId, sentMessage_2.reqId) ? sentMessage_2 : m;
            })
          });
        }
      }

    case TRIM_MESSAGE_LIST:
      {
        var allMessages = state.allMessages;
        var messageLimit = (_c = action.payload) === null || _c === void 0 ? void 0 : _c.messageLimit;

        if (messageLimit && messageLimit > 0 && (allMessages === null || allMessages === void 0 ? void 0 : allMessages.length) > messageLimit) {
          var sliceAt = allMessages.length - messageLimit;
          return __assign(__assign({}, state), {
            allMessages: allMessages.slice(sliceAt)
          });
        }

        return state;
      }

    case RESENDING_MESSAGE_START:
      {
        var eventedChannel = action.payload.channel;
        var resentMessage_1 = action.payload.message;

        if (eventedChannel.url !== state.currentOpenChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          allMessages: state.allMessages.map(function (m) {
            return compareIds(m.reqId, resentMessage_1.reqId) ? resentMessage_1 : m;
          })
        });
      }

    case FETCH_PARTICIPANT_LIST:
      {
        var eventedChannel = action.payload.channel;
        var fetchedParticipantList = action.payload.users;

        if (eventedChannel.url !== state.currentOpenChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          participants: __spreadArray(__spreadArray([], state.participants, true), fetchedParticipantList, true)
        });
      }

    case FETCH_BANNED_USER_LIST:
      {
        var eventedChannel = action.payload.channel;
        var fetchedBannedUserList = action.payload.users;

        if (eventedChannel.url !== state.currentOpenChannel.url || !fetchedBannedUserList.every(function (user) {
          return typeof user.userId === 'string';
        })) {
          return state;
        }

        return __assign(__assign({}, state), {
          bannedParticipantIds: __spreadArray(__spreadArray([], state.bannedParticipantIds, true), fetchedBannedUserList.map(function (user) {
            return user.userId;
          }), true)
        });
      }

    case FETCH_MUTED_USER_LIST:
      {
        var eventedChannel = action.payload.channel;
        var fetchedMutedUserList = action.payload.users;

        if (eventedChannel.url !== state.currentOpenChannel.url || !fetchedMutedUserList.every(function (user) {
          return typeof user.userId === 'string';
        })) {
          return state;
        }

        return __assign(__assign({}, state), {
          mutedParticipantIds: __spreadArray(__spreadArray([], state.mutedParticipantIds, true), fetchedMutedUserList.map(function (user) {
            return user.userId;
          }), true)
        });
      }
    // events

    case ON_MESSAGE_RECEIVED:
      {
        var eventedChannel = action.payload.channel;
        var receivedMessage = action.payload.message;
        var currentOpenChannel = state.currentOpenChannel;

        if (!compareIds(eventedChannel.url, currentOpenChannel.url) || !(state.allMessages.map(function (message) {
          return message.messageId;
        }).indexOf(receivedMessage.messageId) < 0)) {
          return state;
        }

        return __assign(__assign({}, state), {
          allMessages: __spreadArray(__spreadArray([], state.allMessages, true), [receivedMessage], false)
        });
      }

    case ON_MESSAGE_UPDATED:
      {
        var eventedChannel = action.payload.channel;
        var updatedMessage_1 = action.payload.message;
        var currentChannel = state.currentOpenChannel;

        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          allMessages: state.allMessages.map(function (message) {
            return message.isIdentical(updatedMessage_1) ? updatedMessage_1 : message;
          })
        });
      }

    case ON_MESSAGE_DELETED:
      {
        var eventedChannel = action.payload.channel;
        var deletedMessageId_1 = action.payload.messageId;
        var currentChannel = state.currentOpenChannel;

        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          allMessages: state.allMessages.filter(function (message) {
            return !compareIds(message.messageId, deletedMessageId_1);
          })
        });
      }

    case ON_MESSAGE_DELETED_BY_REQ_ID:
      {
        return __assign(__assign({}, state), {
          allMessages: state.allMessages.filter(function (m) {
            return !compareIds(m.reqId, action.payload);
          })
        });
      }

    case ON_OPERATOR_UPDATED:
      {
        var eventedChannel = action.payload.channel;
        var updatedOperators = action.payload.operators;
        var currentChannel = state.currentOpenChannel;

        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          currentOpenChannel: eventedChannel,
          operators: updatedOperators
        });
      }

    case ON_USER_ENTERED:
      {
        var eventedChannel = action.payload.channel;
        var enteredUser = action.payload.user;
        var currentChannel = state.currentOpenChannel;

        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          participants: __spreadArray(__spreadArray([], state.participants, true), [enteredUser], false)
        });
      }

    case ON_USER_EXITED:
      {
        var eventedChannel = action.payload.channel;
        var exitedUser_1 = action.payload.user;
        var currentChannel = state.currentOpenChannel;

        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          participants: state.participants.filter(function (participant) {
            return !compareIds(participant.userId, exitedUser_1.userId);
          })
        });
      }

    case ON_USER_MUTED:
      {
        var eventedChannel = action.payload.channel;
        var mutedUser = action.payload.user;
        var currentChannel = state.currentOpenChannel;

        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url || state.mutedParticipantIds.indexOf(mutedUser.userId) >= 0) {
          return state;
        }

        return __assign(__assign({}, state), {
          mutedParticipantIds: __spreadArray(__spreadArray([], state.mutedParticipantIds, true), [mutedUser.userId], false)
        });
      }

    case ON_USER_UNMUTED:
      {
        var eventedChannel = action.payload.channel;
        var unmutedUser_1 = action.payload.user;
        var currentChannel = state.currentOpenChannel;

        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url || state.mutedParticipantIds.indexOf(unmutedUser_1.userId) < 0) {
          return state;
        }

        return __assign(__assign({}, state), {
          mutedParticipantIds: state.mutedParticipantIds.filter(function (userId) {
            return userId !== unmutedUser_1.userId;
          })
        });
      }

    case ON_USER_BANNED:
      {
        var eventedChannel = action.payload.channel;
        var bannedUser = action.payload.user;
        var currentUser = action.payload.currentUser;
        var currentChannel = state.currentOpenChannel;

        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (eventedChannel === null || eventedChannel === void 0 ? void 0 : eventedChannel.url) && (bannedUser === null || bannedUser === void 0 ? void 0 : bannedUser.userId) === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId)) {
          return __assign(__assign({}, state), {
            currentOpenChannel: null
          });
        } else if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (eventedChannel === null || eventedChannel === void 0 ? void 0 : eventedChannel.url)) {
          return __assign(__assign({}, state), {
            bannedParticipantIds: __spreadArray(__spreadArray([], state.bannedParticipantIds, true), [bannedUser.userId], false)
          });
        }

        return state;
      }

    case ON_USER_UNBANNED:
      {
        var eventedChannel = action.payload.channel;
        var unbannedUser_1 = action.payload.user;
        var currentChannel = state.currentOpenChannel;

        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (eventedChannel === null || eventedChannel === void 0 ? void 0 : eventedChannel.url)) {
          return __assign(__assign({}, state), {
            bannedParticipantIds: state.bannedParticipantIds.filter(function (userId) {
              return userId !== unbannedUser_1.userId;
            })
          });
        }

        return state;
      }

    case ON_CHANNEL_FROZEN:
      {
        var frozenChannel = action.payload;
        var currentChannel = state.currentOpenChannel;

        if (!currentChannel || currentChannel.url && currentChannel.url !== frozenChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          frozen: true
        });
      }

    case ON_CHANNEL_UNFROZEN:
      {
        var unfrozenChannel = action.payload;
        var currentChannel = state.currentOpenChannel;

        if (!currentChannel || currentChannel.url && currentChannel.url !== unfrozenChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          frozen: false
        });
      }

    case ON_CHANNEL_CHANGED:
      {
        var changedChannel = action.payload;
        var currentChannel = state.currentOpenChannel;

        if (!currentChannel || currentChannel.url && currentChannel.url !== changedChannel.url) {
          return state;
        }

        return __assign(__assign({}, state), {
          currentOpenChannel: changedChannel
        });
      }

    case ON_CHANNEL_DELETED:
      {
        var deletedChannelUrl = action.payload;
        var currentChannel = state === null || state === void 0 ? void 0 : state.currentOpenChannel;

        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === deletedChannelUrl) {
          return __assign(__assign({}, state), {
            currentOpenChannel: null
          });
        }

        return state;
      }

    case ON_META_DATA_CREATED:
      {
        // const eventedChannel = action.payload.channel;
        // const createdMetaData = action.payload.metaData;
        // return {
        //   ...state
        // };
        return state;
      }

    case ON_META_DATA_UPDATED:
      {
        // const eventedChannel = action.payload.channel;
        // const updatedMetaData = action.payload.metaData;
        // return {
        //   ...state
        // };
        return state;
      }

    case ON_META_DATA_DELETED:
      {
        // const eventedChannel = action.payload.channel;
        // const deletedMetaDataKeys = action.payload.metaDataKeys;
        // return {
        //   ...state
        // };
        return state;
      }

    case ON_META_COUNTERS_CREATED:
      {
        // const eventedChannel = action.payload.channel;
        // const createdMetaCounter = action.payload.metaCounter;
        // return {
        //   ...state
        // };
        return state;
      }

    case ON_META_COUNTERS_UPDATED:
      {
        // const eventedChannel = action.payload.channel;
        // const updatedMetaCounter = action.payload.metaCounter;
        // return {
        //   ...state
        // };
        return state;
      }

    case ON_META_COUNTERS_DELETED:
      {
        // const eventedChannel = action.payload.channel;
        // const deletedMetaCounterKeys = action.payload.metaCounterKeys;
        // return {
        //   ...state
        // };
        return state;
      }

    case ON_MENTION_RECEIVED:
      {
        // const eventedChannel = action.payload.channel;
        // const mentionedMessage = action.payload.message;
        // return {
        //   ...state
        // };
        return state;
      }

    default:
      return state;
  }
}

var initialState = {
  allMessages: [],
  loading: false,
  initialized: false,
  currentOpenChannel: null,
  isInvalid: false,
  hasMore: false,
  lastMessageTimestamp: 0,
  frozen: false,
  operators: [],
  participants: [],
  bannedParticipantIds: [],
  mutedParticipantIds: []
};

function useSetChannel(_a, _b) {
  var channelUrl = _a.channelUrl,
      sdkInit = _a.sdkInit,
      fetchingParticipants = _a.fetchingParticipants,
      userId = _a.userId,
      currentOpenChannel = _a.currentOpenChannel;
  var sdk = _b.sdk,
      logger = _b.logger,
      messagesDispatcher = _b.messagesDispatcher;
  React__default.useEffect(function () {
    var _a;

    if (channelUrl && sdkInit && (sdk === null || sdk === void 0 ? void 0 : sdk.openChannel)) {
      if (currentOpenChannel && (currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.exit)) {
        (_a = currentOpenChannel.exit) === null || _a === void 0 ? void 0 : _a.call(currentOpenChannel).then(function () {
          logger.info('OpenChannel | useSetChannel: Exit from the previous open channel', currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.url);
          messagesDispatcher({
            type: EXIT_CURRENT_CHANNEL,
            payload: currentOpenChannel
          });
        });
      }

      logger.info('OpenChannel | useSetChannel: Fetching channel', channelUrl);
      sdk.openChannel.getChannel(channelUrl).then(function (openChannel) {
        logger.info('OpenChannel | useSetChannel: Succeeded to fetch channel', openChannel);
        messagesDispatcher({
          type: SET_CURRENT_CHANNEL,
          payload: openChannel
        });
        openChannel.enter().then(function () {
          if (openChannel.isOperator(userId)) {
            // only operator has a permission to fetch these list
            var bannedParticipantListQuery = openChannel.createBannedUserListQuery();
            var mutedParticipantListQuery = openChannel.createMutedUserListQuery();
            fetchWithListQuery(bannedParticipantListQuery, logger, function (users) {
              messagesDispatcher({
                type: FETCH_BANNED_USER_LIST,
                payload: {
                  channel: openChannel,
                  users: users
                }
              });
            });
            fetchWithListQuery(mutedParticipantListQuery, logger, function (users) {
              messagesDispatcher({
                type: FETCH_MUTED_USER_LIST,
                payload: {
                  channel: openChannel,
                  users: users
                }
              });
            });
          } else {
            openChannel.getMyMutedInfo().then(function (mutedInfo) {
              if (mutedInfo === null || mutedInfo === void 0 ? void 0 : mutedInfo.isMuted) {
                messagesDispatcher({
                  type: FETCH_MUTED_USER_LIST,
                  payload: {
                    channel: openChannel,
                    users: [sdk === null || sdk === void 0 ? void 0 : sdk.currentUser]
                  }
                });
              }
            });
          }

          if (fetchingParticipants) {
            // fetch participants list
            var participantListQuery = openChannel.createParticipantListQuery({
              limit: openChannel.participantCount
            });
            fetchWithListQuery(participantListQuery, logger, function (users) {
              messagesDispatcher({
                type: FETCH_PARTICIPANT_LIST,
                payload: {
                  channel: openChannel,
                  users: users
                }
              });
            });
          }
        }).catch(function (error) {
          logger.warning('OpenChannel | useSetChannel: Failed to enter channel', {
            channelUrl: channelUrl,
            error: error
          });
          messagesDispatcher({
            type: SET_CHANNEL_INVALID,
            payload: null
          });
        });
      }).catch(function (error) {
        logger.warning('OpenChannel | useSetChannel: Failed to fetch channel', {
          channelUrl: channelUrl,
          error: error
        });
        messagesDispatcher({
          type: SET_CHANNEL_INVALID,
          payload: null
        });
      });
    }
  }, [channelUrl, sdkInit, fetchingParticipants]);
}

function useHandleChannelEvents(_a, _b) {
  var currentOpenChannel = _a.currentOpenChannel,
      checkScrollBottom = _a.checkScrollBottom;
  var sdk = _b.sdk,
      logger = _b.logger,
      messagesDispatcher = _b.messagesDispatcher;
  React__default.useEffect(function () {
    var _a, _b;

    var messageReceiverId = uuidv4();

    if (currentOpenChannel && currentOpenChannel.url && ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.openChannel) === null || _a === void 0 ? void 0 : _a.addOpenChannelHandler)) {
      logger.info('OpenChannel | useHandleChannelEvents: Setup evnet handler', messageReceiverId);
      var channelHandlerParams = {
        onMessageReceived: function onMessageReceived(channel, message) {
          var scrollToEnd = checkScrollBottom();
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMessageReceived', {
            channelUrl: channelUrl,
            message: message
          });
          messagesDispatcher({
            type: ON_MESSAGE_RECEIVED,
            payload: {
              channel: channel,
              message: message
            }
          });

          if (scrollToEnd) {
            try {
              setTimeout(function () {
                scrollIntoLast();
              });
            } catch (error) {
              logger.warning('OpenChannel | onMessageReceived | scroll to end failed');
            }
          }
        },
        onMessageUpdated: function onMessageUpdated(channel, message) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMessageUpdated', {
            channelUrl: channelUrl,
            message: message
          });
          messagesDispatcher({
            type: ON_MESSAGE_UPDATED,
            payload: {
              channel: channel,
              message: message
            }
          });
        },
        onMessageDeleted: function onMessageDeleted(channel, messageId) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMessageDeleted', {
            channelUrl: channelUrl,
            messageId: messageId
          });
          messagesDispatcher({
            type: ON_MESSAGE_DELETED,
            payload: {
              channel: channel,
              messageId: messageId
            }
          });
        },
        onOperatorUpdated: function onOperatorUpdated(channel, operators) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onOperatorUpdated', {
            channelUrl: channelUrl,
            operators: operators
          });
          messagesDispatcher({
            type: ON_OPERATOR_UPDATED,
            payload: {
              channel: channel,
              operators: operators
            }
          });
        },
        onUserEntered: function onUserEntered(channel, user) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserEntered', {
            channelUrl: channelUrl,
            user: user
          });
          messagesDispatcher({
            type: ON_USER_ENTERED,
            payload: {
              channel: channel,
              user: user
            }
          });
        },
        onUserExited: function onUserExited(channel, user) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserExited', {
            channelUrl: channelUrl,
            user: user
          });
          messagesDispatcher({
            type: ON_USER_EXITED,
            payload: {
              channel: channel,
              user: user
            }
          });
        },
        onUserMuted: function onUserMuted(channel, user) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserMuted', {
            channelUrl: channelUrl,
            user: user
          });
          messagesDispatcher({
            type: ON_USER_MUTED,
            payload: {
              channel: channel,
              user: user
            }
          });
        },
        onUserUnmuted: function onUserUnmuted(channel, user) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserUnmuted', {
            channelUrl: channelUrl,
            user: user
          });
          messagesDispatcher({
            type: ON_USER_UNMUTED,
            payload: {
              channel: channel,
              user: user
            }
          });
        },
        onUserBanned: function onUserBanned(channel, user) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserBanned', {
            channelUrl: channelUrl,
            user: user
          });
          messagesDispatcher({
            type: ON_USER_BANNED,
            payload: {
              channel: channel,
              user: user,
              currentUser: sdk === null || sdk === void 0 ? void 0 : sdk.currentUser
            }
          });
        },
        onUserUnbanned: function onUserUnbanned(channel, user) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserUnbanned', {
            channelUrl: channelUrl,
            user: user
          });
          messagesDispatcher({
            type: ON_USER_UNBANNED,
            payload: {
              channel: channel,
              user: user
            }
          });
        },
        onChannelFrozen: function onChannelFrozen(channel) {
          logger.info('OpenChannel | useHandleChannelEvents: onChannelFrozen', channel);
          messagesDispatcher({
            type: ON_CHANNEL_FROZEN,
            payload: channel
          });
        },
        onChannelUnfrozen: function onChannelUnfrozen(channel) {
          logger.info('OpenChannel | useHandleChannelEvents: onChannelUnfrozen', channel);
          messagesDispatcher({
            type: ON_CHANNEL_UNFROZEN,
            payload: channel
          });
        },
        onChannelChanged: function onChannelChanged(channel) {
          logger.info('OpenChannel | useHandleChannelEvents: onChannelChanged', channel);
          messagesDispatcher({
            type: ON_CHANNEL_CHANGED,
            payload: channel
          });
        },
        onMetaDataCreated: function onMetaDataCreated(channel, metaData) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaDataCreated', {
            channelUrl: channelUrl,
            metaData: metaData
          });
          messagesDispatcher({
            type: ON_META_DATA_CREATED,
            payload: {
              channel: channel,
              metaData: metaData
            }
          });
        },
        onMetaDataUpdated: function onMetaDataUpdated(channel, metaData) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaDataUpdated', {
            channelUrl: channelUrl,
            metaData: metaData
          });
          messagesDispatcher({
            type: ON_META_DATA_UPDATED,
            payload: {
              channel: channel,
              metaData: metaData
            }
          });
        },
        onMetaDataDeleted: function onMetaDataDeleted(channel, metaDataKeys) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaDataDeleted', {
            channelUrl: channelUrl,
            metaDataKeys: metaDataKeys
          });
          messagesDispatcher({
            type: ON_META_DATA_DELETED,
            payload: {
              channel: channel,
              metaDataKeys: metaDataKeys
            }
          });
        },
        onMetaCounterCreated: function onMetaCounterCreated(channel, metaCounter) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersCreated', {
            channelUrl: channelUrl,
            metaCounter: metaCounter
          });
          messagesDispatcher({
            type: ON_META_COUNTERS_CREATED,
            payload: {
              channel: channel,
              metaCounter: metaCounter
            }
          });
        },
        onMetaCounterUpdated: function onMetaCounterUpdated(channel, metaCounter) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersUpdated', {
            channelUrl: channelUrl,
            metaCounter: metaCounter
          });
          messagesDispatcher({
            type: ON_META_COUNTERS_UPDATED,
            payload: {
              channel: channel,
              metaCounter: metaCounter
            }
          });
        },
        onMetaCounterDeleted: function onMetaCounterDeleted(channel, metaCounterKeys) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersDeleted', {
            channelUrl: channelUrl,
            metaCounterKeys: metaCounterKeys
          });
          messagesDispatcher({
            type: ON_META_COUNTERS_DELETED,
            payload: {
              channel: channel,
              metaCounterKeys: metaCounterKeys
            }
          });
        },
        onMentionReceived: function onMentionReceived(channel, message) {
          var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMentionReceived', {
            channelUrl: channelUrl,
            message: message
          });
          messagesDispatcher({
            type: ON_MENTION_RECEIVED,
            payload: {
              channel: channel,
              message: message
            }
          });
        },
        onChannelDeleted: function onChannelDeleted(channelUrl, channelType) {
          if (channelType === ne$1.OPEN && (currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.url) === channelUrl) {
            messagesDispatcher({
              type: ON_CHANNEL_DELETED,
              payload: channelUrl
            });
          }
        }
      };
      var ChannelHandler = new Un$1(channelHandlerParams);
      (_b = sdk === null || sdk === void 0 ? void 0 : sdk.openChannel) === null || _b === void 0 ? void 0 : _b.addOpenChannelHandler(messageReceiverId, ChannelHandler);
    }

    return function () {
      var _a;

      if ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.openChannel) === null || _a === void 0 ? void 0 : _a.removeOpenChannelHandler) {
        logger.info('OpenChannel | useHandleChannelEvents: Removing message receiver handler', messageReceiverId);
        sdk.openChannel.removeOpenChannelHandler(messageReceiverId);
      }
    };
  }, [currentOpenChannel]);
}

function useInitialMessagesFetch(_a, _b) {
  var currentOpenChannel = _a.currentOpenChannel,
      userFilledMessageListParams = _a.userFilledMessageListParams;
  var logger = _b.logger,
      messagesDispatcher = _b.messagesDispatcher;
  React__default.useEffect(function () {
    logger.info('OpenChannel | useInitialMessagesFetch: Setup started', currentOpenChannel);
    messagesDispatcher({
      type: RESET_MESSAGES,
      payload: null
    });

    if (currentOpenChannel && currentOpenChannel.getMessagesByTimestamp) {
      var messageListParams_1 = {
        nextResultSize: 0,
        prevResultSize: 30,
        isInclusive: true,
        includeReactions: false
      };

      if (userFilledMessageListParams) {
        Object.keys(userFilledMessageListParams).forEach(function (key) {
          messageListParams_1[key] = userFilledMessageListParams[key];
        });
        logger.info('OpenChannel | useInitialMessagesFetch: Used customizedMessageListParams');
      }

      logger.info('OpenChannel | useInitialMessagesFetch: Fetching messages', {
        currentOpenChannel: currentOpenChannel,
        messageListParams: messageListParams_1
      });
      messagesDispatcher({
        type: GET_PREV_MESSAGES_START,
        payload: null
      });
      currentOpenChannel.getMessagesByTimestamp(new Date().getTime(), messageListParams_1).then(function (messages) {
        logger.info('OpenChannel | useInitialMessagesFetch: Fetching messages succeeded', messages);
        var hasMore = messages && messages.length > 0;
        var lastMessageTimestamp = hasMore ? messages[0].createdAt : null;
        messagesDispatcher({
          type: GET_PREV_MESSAGES_SUCESS,
          payload: {
            currentOpenChannel: currentOpenChannel,
            messages: messages,
            hasMore: hasMore,
            lastMessageTimestamp: lastMessageTimestamp
          }
        });
        setTimeout(function () {
          scrollIntoLast();
        });
      }).catch(function (error) {
        logger.error('OpenChannel | useInitialMessagesFetch: Fetching messages failed', error);
        messagesDispatcher({
          type: GET_PREV_MESSAGES_FAIL,
          payload: {
            currentOpenChannel: currentOpenChannel,
            messages: [],
            hasMore: false,
            lastMessageTimestamp: 0
          }
        });
      });
    }
  }, [currentOpenChannel, userFilledMessageListParams]);
}

function useScrollCallback(_a, _b) {
  var currentOpenChannel = _a.currentOpenChannel,
      lastMessageTimestamp = _a.lastMessageTimestamp,
      fetchMore = _a.fetchMore;
  var sdk = _b.sdk,
      logger = _b.logger,
      messagesDispatcher = _b.messagesDispatcher,
      hasMore = _b.hasMore,
      userFilledMessageListParams = _b.userFilledMessageListParams;
  return React__default.useCallback(function (callback) {
    if (fetchMore && hasMore) {
      logger.info('OpenChannel | useScrollCallback: start');
      var messageListParams_1 = {
        prevResultSize: 30,
        includeReactions: false,
        nextResultSize: 0
      };

      if (userFilledMessageListParams) {
        Object.keys(userFilledMessageListParams).forEach(function (key) {
          messageListParams_1[key] = userFilledMessageListParams[key];
        });
        logger.info('OpenChannel | useScrollCallback: Used userFilledMessageListParams', userFilledMessageListParams);
      }

      logger.info('OpenChannel | useScrollCallback: Fetching messages', {
        currentOpenChannel: currentOpenChannel,
        messageListParams: messageListParams_1
      });
      currentOpenChannel.getMessagesByTimestamp(lastMessageTimestamp || new Date().getTime(), messageListParams_1).then(function (messages) {
        logger.info('OpenChannel | useScrollCallback: Fetching messages succeeded', messages);
        var hasMore = messages && messages.length > 0;
        var lastMessageTimestamp = hasMore ? messages[0].createdAt : null;
        messagesDispatcher({
          type: GET_PREV_MESSAGES_SUCESS,
          payload: {
            currentOpenChannel: currentOpenChannel,
            messages: messages,
            hasMore: hasMore,
            lastMessageTimestamp: lastMessageTimestamp
          }
        });
        setTimeout(function () {
          callback();
        });
      }).catch(function (error) {
        logger.error('OpenChannel | useScrollCallback: Fetching messages failed', error);
        messagesDispatcher({
          type: GET_PREV_MESSAGES_FAIL,
          payload: {
            currentOpenChannel: currentOpenChannel,
            messages: [],
            hasMore: false,
            lastMessageTimestamp: 0
          }
        });
      });
    }
  }, [currentOpenChannel, lastMessageTimestamp, fetchMore, sdk]);
}

function useCheckScrollBottom(_a, _b) {
  var conversationScrollRef = _a.conversationScrollRef;
  var logger = _b.logger;
  return React__default.useCallback(function () {
    var isBottom = true;

    if (conversationScrollRef && (conversationScrollRef === null || conversationScrollRef === void 0 ? void 0 : conversationScrollRef.current)) {
      try {
        var conversationScroll = conversationScrollRef.current;
        isBottom = conversationScroll.scrollHeight <= conversationScroll.scrollTop + conversationScroll.clientHeight;
      } catch (error) {
        logger.error('OpenChannel | useCheckScrollBottom', error);
      }
    }

    return isBottom;
  }, [conversationScrollRef]);
}

function useSendMessageCallback(_a, _b) {
  var currentOpenChannel = _a.currentOpenChannel,
      onBeforeSendUserMessage = _a.onBeforeSendUserMessage,
      checkScrollBottom = _a.checkScrollBottom,
      messageInputRef = _a.messageInputRef;
  var sdk = _b.sdk,
      logger = _b.logger,
      messagesDispatcher = _b.messagesDispatcher;
  return React__default.useCallback(function () {
    if (sdk) {
      var text = messageInputRef.current.innerText;

      var createParamsDefault = function createParamsDefault(txt) {
        var message = typeof txt === 'string' ? txt.trim() : txt.toString(10).trim();
        var params = {
          message: message
        };
        return params;
      };

      var createCustomParams = onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function';

      if (createCustomParams) {
        logger.info('OpenChannel | useSendMessageCallback: Creating params using onBeforeSendUserMessage', onBeforeSendUserMessage);
      }

      var params = onBeforeSendUserMessage ? onBeforeSendUserMessage(text) : createParamsDefault(text);
      logger.info('OpenChannel | useSendMessageCallback: Sending message has started', params);
      var isBottom_1 = checkScrollBottom();
      var pendingMsg_1 = null;
      currentOpenChannel.sendUserMessage(params).onPending(function (pendingMessage) {
        messagesDispatcher({
          type: SENDING_MESSAGE_START,
          payload: {
            message: pendingMessage,
            channel: currentOpenChannel
          }
        });
        pendingMsg_1 = pendingMessage;
      }).onSucceeded(function (message) {
        logger.info('OpenChannel | useSendMessageCallback: Sending message succeeded', message);
        messagesDispatcher({
          type: SENDING_MESSAGE_SUCCEEDED,
          payload: message
        });

        if (isBottom_1) {
          setTimeout(function () {
            scrollIntoLast();
          });
        }
      }).onFailed(function (error) {
        logger.warning('OpenChannel | useSendMessageCallback: Sending message failed', error);
        messagesDispatcher({
          type: SENDING_MESSAGE_FAILED,
          payload: pendingMsg_1
        }); // https://sendbird.com/docs/chat/v3/javascript/guides/error-codes#2-server-error-codes
        // TODO: Do we need to handle the error cases?
        // @ts-ignore

        if ((error === null || error === void 0 ? void 0 : error.code) === 900041) {
          messagesDispatcher({
            type: ON_USER_MUTED,
            payload: {
              channel: currentOpenChannel,
              user: sdk.currentUser
            }
          });
        }
      });
    }
  }, [currentOpenChannel, onBeforeSendUserMessage, checkScrollBottom, messageInputRef]);
}

function useFileUploadCallback(_a, _b) {
  var currentOpenChannel = _a.currentOpenChannel,
      checkScrollBottom = _a.checkScrollBottom,
      _c = _a.imageCompression,
      imageCompression = _c === void 0 ? {} : _c,
      onBeforeSendFileMessage = _a.onBeforeSendFileMessage;
  var sdk = _b.sdk,
      logger = _b.logger,
      messagesDispatcher = _b.messagesDispatcher;
  return React__default.useCallback(function (file) {
    if (sdk) {
      var compressionRate_1 = imageCompression.compressionRate,
          resizingWidth_1 = imageCompression.resizingWidth,
          resizingHeight_1 = imageCompression.resizingHeight;
      var createCustomParams_1 = onBeforeSendFileMessage && typeof onBeforeSendFileMessage === 'function';
      var compressibleFileType = file.type === 'image/jpg' || file.type === 'image/png' || file.type === 'image/jpeg';
      var compressibleRatio = compressionRate_1 > 0 && compressionRate_1 < 1; // pxToNumber returns null if values are invalid

      var compressibleDiamensions_1 = pxToNumber(resizingWidth_1) || pxToNumber(resizingHeight_1);
      var canCompressImage = compressibleFileType && (compressibleRatio || compressibleDiamensions_1);

      var createParamsDefault_1 = function createParamsDefault_1(file_) {
        var params = {};
        params.file = file_;
        return params;
      };

      if (canCompressImage) {
        // Using image compression
        try {
          var image_1 = document.createElement('img');
          image_1.src = URL.createObjectURL(file);

          image_1.onload = function () {
            URL.revokeObjectURL(image_1.src);
            var canvas = document.createElement('canvas');
            var imageWidth = image_1.naturalWidth || image_1.width;
            var imageHeight = image_1.naturalHeight || image_1.height;
            var targetWidth = pxToNumber(resizingWidth_1) || imageWidth;
            var targetHeight = pxToNumber(resizingHeight_1) || imageHeight; // In canvas.toBlob(callback, mimeType, qualityArgument)
            // qualityArgument doesnt work
            // so in case compressibleDiamensions are not present, we use ratio

            if (file.type === 'image/png' && !compressibleDiamensions_1) {
              targetWidth *= compressionRate_1;
              targetHeight *= compressionRate_1;
            }

            canvas.width = targetWidth;
            canvas.height = targetHeight;
            var context = canvas.getContext('2d');
            context.drawImage(image_1, 0, 0, targetWidth, targetHeight);
            context.canvas.toBlob(function (newImageBlob) {
              var compressedFile = new File([newImageBlob], file.name, {
                type: file.type
              });

              if (createCustomParams_1) {
                logger.info('OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);
              }

              var params = onBeforeSendFileMessage ? onBeforeSendFileMessage(compressedFile) : createParamsDefault_1(compressedFile);
              logger.info('OpenChannel | useFileUploadCallback: Uploading file message start', params);
              var isBottom = checkScrollBottom();
              currentOpenChannel.sendFileMessage(params).onPending(function (pendingMessage) {
                messagesDispatcher({
                  type: SENDING_MESSAGE_START,
                  payload: {
                    message: __assign(__assign({}, pendingMessage), {
                      url: URL.createObjectURL(file),
                      // pending thumbnail message seems to be failed
                      requestState: 'pending'
                    }),
                    channel: currentOpenChannel
                  }
                });
              }).onSucceeded(function (message) {
                logger.info('OpenChannel | useFileUploadCallback: Sending message succeeded', message);
                messagesDispatcher({
                  type: SENDING_MESSAGE_SUCCEEDED,
                  payload: message
                });

                if (isBottom) {
                  setTimeout(function () {
                    scrollIntoLast();
                  });
                }
              }).onFailed(function (error, message) {
                logger.error('OpenChannel | useFileUploadCallback: Sending file message failed', {
                  message: message,
                  error: error
                }); // @ts-ignore

                message.localUrl = URL.createObjectURL(file); // @ts-ignore

                message.file = file;
                messagesDispatcher({
                  type: SENDING_MESSAGE_FAILED,
                  payload: message
                });
              });
            }, file.type, compressionRate_1);
          };
        } catch (error) {
          logger.warning('OpenChannel | useFileUploadCallback: Sending file message with image compression failed', error);
        }
      } else {
        // Not using image compression
        if (createCustomParams_1) {
          logger.info('OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);
        }

        var params = onBeforeSendFileMessage ? onBeforeSendFileMessage(file) : createParamsDefault_1(file);
        logger.info('OpenChannel | useFileUploadCallback: Uploading file message start', params);
        var isBottom_1 = checkScrollBottom();
        currentOpenChannel.sendFileMessage(params).onPending(function (pendingMessage) {
          messagesDispatcher({
            type: SENDING_MESSAGE_START,
            payload: {
              message: __assign(__assign({}, pendingMessage), {
                url: URL.createObjectURL(file),
                // pending thumbnail message seems to be failed
                requestState: 'pending'
              }),
              channel: currentOpenChannel
            }
          });
        }).onSucceeded(function (message) {
          logger.info('OpenChannel | useFileUploadCallback: Sending message succeeded', message);
          messagesDispatcher({
            type: SENDING_MESSAGE_SUCCEEDED,
            payload: message
          });

          if (isBottom_1) {
            setTimeout(function () {
              scrollIntoLast();
            });
          }
        }).onFailed(function (error, message) {
          logger.error('OpenChannel | useFileUploadCallback: Sending file message failed', {
            message: message,
            error: error
          }); // @ts-ignore

          message.localUrl = URL.createObjectURL(file); // @ts-ignore

          message.file = file;
          messagesDispatcher({
            type: SENDING_MESSAGE_FAILED,
            payload: message
          });
        });
      }
    }
  }, [currentOpenChannel, onBeforeSendFileMessage, checkScrollBottom, imageCompression]);
}

function useUpdateMessageCallback(_a, _b) {
  var currentOpenChannel = _a.currentOpenChannel,
      onBeforeSendUserMessage = _a.onBeforeSendUserMessage;
  var logger = _b.logger,
      messagesDispatcher = _b.messagesDispatcher;
  return React__default.useCallback(function (messageId, text, callback) {
    var createParamsDefault = function createParamsDefault(txt) {
      var params = {
        message: txt
      };
      return params;
    };

    if (onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function') {
      logger.info('OpenChannel | useUpdateMessageCallback: Creating params using onBeforeUpdateUserMessage');
    }

    var params = onBeforeSendUserMessage ? onBeforeSendUserMessage(text) : createParamsDefault(text);
    currentOpenChannel.updateUserMessage(messageId, params).then(function (message) {
      if (callback) {
        callback();
      }

      logger.info('OpenChannel | useUpdateMessageCallback: Updating message succeeded', {
        message: message,
        params: params
      });
      messagesDispatcher({
        type: ON_MESSAGE_UPDATED,
        payload: {
          channel: currentOpenChannel,
          message: message
        }
      });
    });
  }, [currentOpenChannel, onBeforeSendUserMessage]);
}

function useDeleteMessageCallback(_a, _b) {
  var currentOpenChannel = _a.currentOpenChannel;
  var logger = _b.logger,
      messagesDispatcher = _b.messagesDispatcher;
  return React__default.useCallback(function (message, callback) {
    logger.info('OpenChannel | useDeleteMessageCallback: Deleting message', message);
    var sendingStatus = message.sendingStatus;
    logger.info('OpenChannel | useDeleteMessageCallback: Deleting message requestState', sendingStatus);

    if (sendingStatus === 'failed' || sendingStatus === 'pending') {
      logger.info('OpenChannel | useDeleteMessageCallback: Deleted message from local', message);
      messagesDispatcher({
        type: ON_MESSAGE_DELETED_BY_REQ_ID,
        payload: message.reqId
      });

      if (callback) {
        callback();
      }
    } else {
      if (!(message.messageType === 'file' || message.messageType === 'user')) {
        return;
      }

      var messageToDelete = message;
      currentOpenChannel.deleteMessage(messageToDelete).then(function () {
        logger.info('OpenChannel | useDeleteMessageCallback: Deleting message on server', sendingStatus);

        if (callback) {
          callback();
        }

        logger.info('OpenChannel | useDeleteMessageCallback: Deleting message succeeded', message);
        messagesDispatcher({
          type: ON_MESSAGE_DELETED,
          payload: {
            channel: currentOpenChannel,
            messageId: message.messageId
          }
        });
      }).catch(function (error) {
        logger.warning('OpenChannel | useDeleteMessageCallback: Deleting message failed', error);
      });
    }
  }, [currentOpenChannel]);
}

function useResendMessageCallback(_a, _b) {
  var currentOpenChannel = _a.currentOpenChannel;
  var logger = _b.logger,
      messagesDispatcher = _b.messagesDispatcher;
  return React__default.useCallback(function (failedMessage) {
    logger.info('OpenChannel | useResendMessageCallback: Resending message has started', failedMessage); // eslint-disable-next-line no-param-reassign

    var _a = failedMessage,
        messageType = _a.messageType,
        file = _a.file;

    if (failedMessage && typeof failedMessage.isResendable === 'function' && failedMessage.isResendable) {
      // eslint-disable-next-line no-param-reassign
      failedMessage.requestState = 'pending';
      messagesDispatcher({
        type: RESENDING_MESSAGE_START,
        payload: {
          channel: currentOpenChannel,
          message: failedMessage
        }
      }); // userMessage

      if (messageType === 'user' && failedMessage.messageType === 'user') {
        currentOpenChannel.resendUserMessage(failedMessage).then(function (message) {
          logger.info('OpenChannel | useResendMessageCallback: Reseding message succeeded', message);
          messagesDispatcher({
            type: SENDING_MESSAGE_SUCCEEDED,
            payload: message
          });
        }).catch(function (error) {
          logger.warning('OpenChannel | useResendMessageCallback: Resending message failed', error); // eslint-disable-next-line no-param-reassign

          failedMessage.requestState = 'failed';
          messagesDispatcher({
            type: SENDING_MESSAGE_FAILED,
            payload: failedMessage
          });
        });
      } // fileMessage


      if (messageType === 'file' && failedMessage.messageType === 'file') {
        currentOpenChannel.resendFileMessage(failedMessage, file).then(function (message) {
          logger.info('OpenChannel | useResendMessageCallback: Resending file message succeeded', message);
          messagesDispatcher({
            type: SENDING_MESSAGE_SUCCEEDED,
            payload: message
          });
        }).catch(function (error) {
          logger.warning('OpenChannel | useResendMessageCallback: Resending file message failed', error); // eslint-disable-next-line no-param-reassign

          failedMessage.requestState = 'failed';
          messagesDispatcher({
            type: SENDING_MESSAGE_FAILED,
            payload: failedMessage
          });
        });
      }
    } else {
      // to alert user on console
      // eslint-disable-next-line no-console
      console.error('OpenChannel | useResendMessageCallback: Message is not resendable');
      logger.warning('OpenChannel | useResendMessageCallback: Message is not resendable', failedMessage);
    }
  }, [currentOpenChannel]);
}

var THROTTLE_TIMER = 5000; // to trim message list so that we wont keep thousands of messages in memory
// We are throttling here; not debouncing
// it will be called once very 5 sec if messagesLength, messageLimit changes
// we check if messagesLength > messageLimit before dispatching action

function useTrimMessageList(_a, _b) {
  var messagesLength = _a.messagesLength,
      messageLimit = _a.messageLimit;
  var messagesDispatcher = _b.messagesDispatcher,
      logger = _b.logger;

  var _c = React__default.useState(false),
      inProgress = _c[0],
      setInProgress = _c[1];

  React__default.useEffect(function () {
    if (inProgress) {
      return;
    }

    if (typeof messagesLength === 'number' && messagesLength > messageLimit) {
      logger.info('Trimming MessageList');
      messagesDispatcher({
        type: TRIM_MESSAGE_LIST,
        payload: {
          messageLimit: messageLimit
        }
      });
    }

    setInProgress(true);
    setTimeout(function () {
      setInProgress(false);
    }, THROTTLE_TIMER);
  }, [messagesLength, messageLimit]);
}

var OpenChannelContext = /*#__PURE__*/React__default__default["default"].createContext(undefined);

var OpenChannelProvider = function OpenChannelProvider(props) {
  var _a, _b, _c, _d, _e, _f;

  var channelUrl = props.channelUrl,
      children = props.children,
      _g = props.isMessageGroupingEnabled,
      isMessageGroupingEnabled = _g === void 0 ? true : _g,
      queries = props.queries,
      onBeforeSendUserMessage = props.onBeforeSendUserMessage,
      messageLimit = props.messageLimit,
      onBeforeSendFileMessage = props.onBeforeSendFileMessage,
      onChatHeaderActionClick = props.onChatHeaderActionClick; // We didn't decide to support fetching participant list

  var fetchingParticipants = false;
  var globalStore = useSendbirdStateContext();
  var sdk = (_b = (_a = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _a === void 0 ? void 0 : _a.sdkStore) === null || _b === void 0 ? void 0 : _b.sdk;
  var sdkInit = (_d = (_c = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _c === void 0 ? void 0 : _c.sdkStore) === null || _d === void 0 ? void 0 : _d.initialized;
  var user = (_f = (_e = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _e === void 0 ? void 0 : _e.userStore) === null || _f === void 0 ? void 0 : _f.user;
  var config = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config;
  var userId = config.userId,
      isOnline = config.isOnline,
      logger = config.logger,
      pubSub = config.pubSub,
      imageCompression = config.imageCompression; // hook variables

  var _h = React__default.useReducer(reducer, initialState),
      messagesStore = _h[0],
      messagesDispatcher = _h[1];

  var allMessages = messagesStore.allMessages,
      loading = messagesStore.loading,
      initialized = messagesStore.initialized,
      currentOpenChannel = messagesStore.currentOpenChannel,
      isInvalid = messagesStore.isInvalid,
      hasMore = messagesStore.hasMore,
      lastMessageTimestamp = messagesStore.lastMessageTimestamp,
      operators = messagesStore.operators,
      bannedParticipantIds = messagesStore.bannedParticipantIds,
      mutedParticipantIds = messagesStore.mutedParticipantIds; // ref

  var messageInputRef = React__default.useRef(null); // useSendMessageCallback

  var conversationScrollRef = React__default.useRef(null); // useScrollAfterSendMessageCallback
  // const

  var userFilledMessageListParams = queries === null || queries === void 0 ? void 0 : queries.messageListParams;
  var disabled = !initialized || !isOnline || isDisabledBecauseFrozen(currentOpenChannel, userId) || isDisabledBecauseMuted(mutedParticipantIds, userId); // useMemo

  var amIBanned = React__default.useMemo(function () {
    return bannedParticipantIds.indexOf(user.userId) >= 0;
  }, [channelUrl, bannedParticipantIds, user]);
  var amIMuted = React__default.useMemo(function () {
    return mutedParticipantIds.indexOf(user.userId) >= 0;
  }, [channelUrl, mutedParticipantIds, user]);
  var amIOperator = React__default.useMemo(function () {
    return operators.map(function (operator) {
      return operator.userId;
    }).indexOf(user.userId) >= 0;
  }, [channelUrl, operators, user]); // use hooks

  useSetChannel({
    channelUrl: channelUrl,
    sdkInit: sdkInit,
    fetchingParticipants: fetchingParticipants,
    userId: userId,
    currentOpenChannel: currentOpenChannel
  }, {
    sdk: sdk,
    logger: logger,
    messagesDispatcher: messagesDispatcher
  });
  var checkScrollBottom = useCheckScrollBottom({
    conversationScrollRef: conversationScrollRef
  }, {
    logger: logger
  });
  useHandleChannelEvents({
    currentOpenChannel: currentOpenChannel,
    checkScrollBottom: checkScrollBottom
  }, {
    sdk: sdk,
    logger: logger,
    messagesDispatcher: messagesDispatcher
  });
  useInitialMessagesFetch({
    currentOpenChannel: currentOpenChannel,
    userFilledMessageListParams: userFilledMessageListParams
  }, {
    logger: logger,
    messagesDispatcher: messagesDispatcher
  });
  var fetchMore = shouldFetchMore(allMessages === null || allMessages === void 0 ? void 0 : allMessages.length, messageLimit); // donot fetch more for streaming

  var onScroll = useScrollCallback({
    currentOpenChannel: currentOpenChannel,
    lastMessageTimestamp: lastMessageTimestamp,
    fetchMore: fetchMore
  }, {
    sdk: sdk,
    logger: logger,
    messagesDispatcher: messagesDispatcher,
    hasMore: hasMore,
    userFilledMessageListParams: userFilledMessageListParams
  });
  var handleSendMessage = useSendMessageCallback({
    currentOpenChannel: currentOpenChannel,
    onBeforeSendUserMessage: onBeforeSendUserMessage,
    checkScrollBottom: checkScrollBottom,
    messageInputRef: messageInputRef
  }, {
    sdk: sdk,
    logger: logger,
    messagesDispatcher: messagesDispatcher
  });
  var handleFileUpload = useFileUploadCallback({
    currentOpenChannel: currentOpenChannel,
    onBeforeSendFileMessage: onBeforeSendFileMessage,
    checkScrollBottom: checkScrollBottom,
    imageCompression: imageCompression
  }, {
    sdk: sdk,
    logger: logger,
    messagesDispatcher: messagesDispatcher
  });
  var updateMessage = useUpdateMessageCallback({
    currentOpenChannel: currentOpenChannel,
    onBeforeSendUserMessage: onBeforeSendUserMessage
  }, {
    logger: logger,
    messagesDispatcher: messagesDispatcher
  });
  var deleteMessage = useDeleteMessageCallback({
    currentOpenChannel: currentOpenChannel
  }, {
    logger: logger,
    messagesDispatcher: messagesDispatcher
  });
  var resendMessage = useResendMessageCallback({
    currentOpenChannel: currentOpenChannel
  }, {
    logger: logger,
    messagesDispatcher: messagesDispatcher
  });
  useTrimMessageList({
    messagesLength: allMessages === null || allMessages === void 0 ? void 0 : allMessages.length,
    messageLimit: messageLimit
  }, {
    messagesDispatcher: messagesDispatcher,
    logger: logger
  }); // handle API calls from withSendbird

  React__default.useEffect(function () {
    var subscriber = new Map();

    if (!pubSub || !pubSub.subscribe) {
      return;
    }

    subscriber.set(SEND_USER_MESSAGE, pubSub.subscribe(SEND_USER_MESSAGE, function (msg) {
      var channel = msg.channel,
          message = msg.message;
      scrollIntoLast();

      if (channel && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
        messagesDispatcher({
          type: SENDING_MESSAGE_SUCCEEDED,
          payload: message
        });
      }
    }));
    subscriber.set(SEND_MESSAGE_START, pubSub.subscribe(SEND_MESSAGE_START, function (msg) {
      var channel = msg.channel,
          message = msg.message;

      if (channel && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
        messagesDispatcher({
          type: SENDING_MESSAGE_START,
          payload: {
            message: message,
            channel: channel
          }
        });
      }
    }));
    subscriber.set(SEND_FILE_MESSAGE, pubSub.subscribe(SEND_FILE_MESSAGE, function (msg) {
      var channel = msg.channel,
          message = msg.message;
      scrollIntoLast();

      if (channel && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
        messagesDispatcher({
          type: SENDING_MESSAGE_SUCCEEDED,
          payload: {
            message: message,
            channel: channel
          }
        });
      }
    }));
    subscriber.set(UPDATE_USER_MESSAGE, pubSub.subscribe(UPDATE_USER_MESSAGE, function (msg) {
      var channel = msg.channel,
          message = msg.message,
          fromSelector = msg.fromSelector;

      if (fromSelector && channel && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
        messagesDispatcher({
          type: ON_MESSAGE_UPDATED,
          payload: {
            channel: channel,
            message: message
          }
        });
      }
    }));
    subscriber.set(DELETE_MESSAGE, pubSub.subscribe(DELETE_MESSAGE, function (msg) {
      var channel = msg.channel,
          messageId = msg.messageId;

      if (channel && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
        messagesDispatcher({
          type: ON_MESSAGE_DELETED,
          payload: messageId
        });
      }
    }));
    return function () {
      if (subscriber) {
        subscriber.forEach(function (s) {
          try {
            s.remove();
          } catch (_a) {//
          }
        });
      }
    };
  }, [channelUrl, sdkInit]);
  return /*#__PURE__*/React__default__default["default"].createElement(OpenChannelContext.Provider, {
    value: {
      // props
      channelUrl: channelUrl,
      children: children,
      isMessageGroupingEnabled: isMessageGroupingEnabled,
      queries: queries,
      onBeforeSendUserMessage: onBeforeSendUserMessage,
      messageLimit: messageLimit,
      onBeforeSendFileMessage: onBeforeSendFileMessage,
      onChatHeaderActionClick: onChatHeaderActionClick,
      // store
      allMessages: allMessages,
      loading: loading,
      initialized: initialized,
      currentOpenChannel: currentOpenChannel,
      isInvalid: isInvalid,
      hasMore: hasMore,
      lastMessageTimestamp: lastMessageTimestamp,
      operators: operators,
      bannedParticipantIds: bannedParticipantIds,
      mutedParticipantIds: mutedParticipantIds,
      // derived/utils
      messageInputRef: messageInputRef,
      conversationScrollRef: conversationScrollRef,
      disabled: disabled,
      amIBanned: amIBanned,
      amIMuted: amIMuted,
      amIOperator: amIOperator,
      checkScrollBottom: checkScrollBottom,
      fetchMore: fetchMore,
      onScroll: onScroll,
      handleSendMessage: handleSendMessage,
      handleFileUpload: handleFileUpload,
      updateMessage: updateMessage,
      deleteMessage: deleteMessage,
      resendMessage: resendMessage
    }
  }, /*#__PURE__*/React__default__default["default"].createElement(UserProfileProvider, {
    isOpenChannel: true,
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile,
    disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile
  }, children));
};

var useOpenChannelContext = function useOpenChannelContext() {
  return React__default__default["default"].useContext(OpenChannelContext);
};

var MessageInputWrapper = function MessageInputWrapper(props, ref) {
  var _a = useOpenChannelContext(),
      currentOpenChannel = _a.currentOpenChannel,
      disabled = _a.disabled,
      handleSendMessage = _a.handleSendMessage,
      handleFileUpload = _a.handleFileUpload;

  var channel = currentOpenChannel;

  if (!channel) {
    return;
  }

  var stringSet = React__default.useContext(LocalizationContext).stringSet;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-footer"
  }, /*#__PURE__*/React__default__default["default"].createElement(MessageInput, {
    ref: ref,
    disabled: disabled,
    onSendMessage: handleSendMessage,
    onFileUpload: handleFileUpload,
    placeholder: disabled && stringSet.MESSAGE_INPUT__PLACE_HOLDER__DISABLED // add disabled because of muted state

  }));
};

var OpenChannelInput = /*#__PURE__*/React__default__default["default"].forwardRef(MessageInputWrapper);

var FrozenNotification = function FrozenNotification() {
  var stringSet = React__default.useContext(LocalizationContext).stringSet;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-frozen-channel-notification"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-frozen-channel-notification__text",
    type: LabelTypography.CAPTION_2
  }, stringSet.CHANNEL_FROZEN));
};

function OpenchannelConversationHeader() {
  var stringSet = React__default.useContext(LocalizationContext).stringSet;

  var _a = useOpenChannelContext(),
      currentOpenChannel = _a.currentOpenChannel,
      onChatHeaderActionClick = _a.onChatHeaderActionClick,
      amIOperator = _a.amIOperator;

  var title = currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.name;
  var subTitle = "".concat(kFormatter(currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.participantCount), " ").concat(stringSet.OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS);
  var coverImage = currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.coverUrl;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-conversation-header"
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-conversation-header__left"
  }, coverImage ? /*#__PURE__*/React__default__default["default"].createElement(Avatar$1, {
    className: "sendbird-openchannel-conversation-header__left__cover-image",
    src: coverImage,
    alt: "channel cover image",
    width: "32px",
    height: "32px"
  }) : /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-conversation-header__left__cover-image--icon",
    style: {
      width: 32,
      height: 32
    }
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    type: IconTypes.CHANNELS,
    fillColor: IconColors.CONTENT,
    width: "18px",
    height: "18px"
  })), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-conversation-header__left__title",
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, title || stringSet.NO_TITLE), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-conversation-header__left__sub-title",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_2
  }, subTitle || stringSet.NO_TITLE)), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-conversation-header__right"
  }, /*#__PURE__*/React__default__default["default"].createElement(IconButton, {
    className: "sendbird-openchannel-conversation-header__right__trigger",
    width: "32px",
    height: "32px",
    onClick: onChatHeaderActionClick
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    type: amIOperator ? IconTypes.INFO : IconTypes.MEMBERS,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  }))));
}

var copyToClipboard = function copyToClipboard(text) {
  // @ts-ignore: Unreachable code error
  if (window.clipboardData && window.clipboardData.setData) {
    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.
    // @ts-ignore: Unreachable code error
    return window.clipboardData.setData('Text', text);
  }

  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
    var textarea = document.createElement('textarea');
    textarea.textContent = text;
    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.

    document.body.appendChild(textarea);
    textarea.select();

    try {
      return document.execCommand('copy'); // Security exception may be thrown by some browsers.
    } catch (ex) {
      return false;
    } finally {
      document.body.removeChild(textarea);
    }
  }

  return false;
};

var OpenChannelMessageStatusTypes = {
  NONE: 'none',
  PENDING: 'pending',
  FAILED: 'failed',
  CANCELED: 'canceled',
  SUCCEEDED: 'succeeded'
};

var getSenderFromMessage = function getSenderFromMessage(message) {
  // @ts-ignore
  return message.sender || message._sender;
};

var checkIsSent = function checkIsSent(status) {
  return status === OpenChannelMessageStatusTypes.SUCCEEDED;
};

var checkIsPending = function checkIsPending(status) {
  return status === OpenChannelMessageStatusTypes.PENDING;
};

var checkIsFailed = function checkIsFailed(status) {
  return status === OpenChannelMessageStatusTypes.FAILED;
};

var checkIsByMe = function checkIsByMe(message, userId) {
  return getSenderFromMessage(message).userId === userId;
};

var isFineCopy = function isFineCopy(_a) {
  var _b;

  var message = _a.message;
  return (message === null || message === void 0 ? void 0 : message.messageType) === 'user' && ((_b = message === null || message === void 0 ? void 0 : message.message) === null || _b === void 0 ? void 0 : _b.length) > 0;
};

var isFineResend = function isFineResend(_a) {
  var message = _a.message,
      status = _a.status,
      userId = _a.userId;
  return checkIsByMe(message, userId) && checkIsFailed(status) // @ts-ignore
  && (message === null || message === void 0 ? void 0 : message.isResendable());
};

var isFineEdit = function isFineEdit(_a) {
  var message = _a.message,
      status = _a.status,
      userId = _a.userId;
  return checkIsByMe(message, userId) && checkIsSent(status);
};

var isFineDelete = function isFineDelete(_a) {
  var message = _a.message,
      userId = _a.userId;
  return checkIsByMe(message, userId);
};

var showMenuTrigger = function showMenuTrigger(props) {
  var message = props.message,
      status = props.status,
      userId = props.userId; // @ts-ignore

  if (message.messageType === 'user') {
    return isFineDelete({
      message: message,
      status: status,
      userId: userId
    }) || isFineEdit({
      message: message,
      status: status,
      userId: userId
    }) // @ts-ignore
    || isFineCopy({
      message: message,
      status: status,
      userId: userId
    }) || isFineResend({
      message: message,
      status: status,
      userId: userId
    });
  } else {
    return isFineDelete({
      message: message,
      status: status,
      userId: userId
    }) || isFineResend({
      message: message,
      status: status,
      userId: userId
    });
  }
};

function OpenchannelUserMessage(_a) {
  var className = _a.className,
      message = _a.message,
      isOperator = _a.isOperator,
      userId = _a.userId,
      resendMessage = _a.resendMessage,
      disabled = _a.disabled,
      showEdit = _a.showEdit,
      showRemove = _a.showRemove,
      chainTop = _a.chainTop;

  if (!message || message.messageType !== 'user') {
    return null;
  } // hooks


  var _b = useLocalization(),
      stringSet = _b.stringSet,
      dateLocale = _b.dateLocale;

  var _c = React__default.useContext(UserProfileContext),
      disableUserProfile = _c.disableUserProfile,
      renderUserProfile = _c.renderUserProfile;

  var messageRef = React__default.useRef(null);
  var avatarRef = React__default.useRef(null);
  var contextMenuRef = React__default.useRef(null);

  var _d = React__default.useState({}),
      contextStyle = _d[0],
      setContextStyle = _d[1]; // consts


  var status = message === null || message === void 0 ? void 0 : message.sendingStatus;
  var isPending = checkIsPending(status);
  var isFailed = checkIsFailed(status);
  var sender = getSenderFromMessage(message);
  var MemoizedMessageText = React__default.useMemo(function () {
    return function () {
      var splitMessage = message.message.split(/\r/);
      var matchedMessage = splitMessage.map(function (word) {
        return word !== '' ? word : /*#__PURE__*/React__default__default["default"].createElement("br", null);
      });

      if (message.updatedAt > 0) {
        matchedMessage.push( /*#__PURE__*/React__default__default["default"].createElement(Label, {
          key: uuidv4(),
          type: LabelTypography.BODY_1,
          color: LabelColors.ONBACKGROUND_2,
          calssName: "sendbird-openchannel-user-message-word"
        }, " ".concat(stringSet.MESSAGE_EDITED, " ")));
      }

      return matchedMessage;
    };
  }, [message, message.updatedAt]); // place context menu top depending clientHeight of message component

  React__default.useEffect(function () {
    var _a;

    if (((_a = messageRef === null || messageRef === void 0 ? void 0 : messageRef.current) === null || _a === void 0 ? void 0 : _a.clientHeight) > 36) {
      setContextStyle({
        top: '8px '
      });
    } else {
      setContextStyle({
        top: '2px'
      });
    }
  }, [window.innerWidth]);
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-openchannel-user-message'], false).join(' '),
    ref: messageRef
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-user-message__left"
  }, !chainTop && /*#__PURE__*/React__default__default["default"].createElement(ContextMenu, {
    menuTrigger: function menuTrigger(toggleDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(Avatar$1, {
        className: "sendbird-openchannel-user-message__left__avatar",
        src: sender.profileUrl || '',
        ref: avatarRef,
        width: "28px",
        height: "28px",
        onClick: function onClick() {
          if (!disableUserProfile) {
            toggleDropdown();
          }
        }
      });
    },
    menuItems: function menuItems(closeDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(MenuItems, {
        parentRef: avatarRef,
        parentContainRef: avatarRef,
        closeDropdown: closeDropdown,
        style: {
          paddingTop: 0,
          paddingBottom: 0
        }
      }, renderUserProfile ? renderUserProfile({
        user: sender,
        close: closeDropdown
      }) : /*#__PURE__*/React__default__default["default"].createElement(ConnectedUserProfile, {
        user: sender,
        onSuccess: closeDropdown,
        disableMessaging: true
      }));
    }
  })), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-user-message__right"
  }, !chainTop && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-user-message__right__top"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-user-message__right__top__sender-name",
    type: LabelTypography.CAPTION_2,
    color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2
  }, sender && (sender.friendName || sender.nickname || sender.userId)), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-user-message__right__top__sent-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_3
  }, (message === null || message === void 0 ? void 0 : message.createdAt) && format$1(message === null || message === void 0 ? void 0 : message.createdAt, 'p', {
    locale: dateLocale
  }))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-user-message__right__bottom"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-user-message__right__bottom__message",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, MemoizedMessageText())), (isPending || isFailed) && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-user-message__right__tail"
  }, isPending && /*#__PURE__*/React__default__default["default"].createElement(Loader, {
    width: "16px",
    height: "16px"
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-user-message__right__tail__pending",
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "16px",
    height: "16px"
  })), isFailed && /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-user-message__right__tail__failed",
    type: IconTypes.ERROR,
    fillColor: IconColors.ERROR,
    width: "16px",
    height: "16px"
  }))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-user-message__context-menu",
    ref: contextMenuRef,
    style: contextStyle
  }, /*#__PURE__*/React__default__default["default"].createElement(ContextMenu, {
    menuTrigger: function menuTrigger(toggleDropdown) {
      return showMenuTrigger({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(IconButton, {
        className: "sendbird-openchannel-user-message__context-menu--icon",
        width: "32px",
        height: "32px",
        onClick: function onClick() {
          toggleDropdown();
        }
      }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
        type: IconTypes.MORE,
        fillColor: IconColors.CONTENT_INVERSE,
        width: "24px",
        height: "24px"
      }));
    },
    menuItems: function menuItems(closeDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(MenuItems, {
        parentRef: contextMenuRef,
        parentContainRef: contextMenuRef,
        closeDropdown: closeDropdown,
        openLeft: true
      }, isFineCopy({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        className: "sendbird-openchannel-user-message__context-menu__copy",
        onClick: function onClick() {
          copyToClipboard(message.message);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__COPY), isFineEdit({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        className: "sendbird-openchannel-user-message__context-menu__edit",
        onClick: function onClick() {
          if (disabled) {
            return;
          }

          showEdit(true);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__EDIT), isFineResend({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        className: "sendbird-openchannel-user-message__context-menu__resend",
        onClick: function onClick() {
          resendMessage(message);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND), isFineDelete({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        className: "sendbird-openchannel-user-message__context-menu__delete",
        onClick: function onClick() {
          if (disabled) {
            return;
          }

          showRemove(true);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE));
    }
  })));
}

function OpenChannelAdminMessage(_a) {
  var className = _a.className,
      message = _a.message;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-openchannel-admin-message'], false).join(' ')
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-admin-message__text",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, message.message || ''));
}

var URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;

var createUrlTester = function createUrlTester(regexp) {
  return function (text) {
    return regexp.test(text);
  };
};

var checkOGIsEnalbed = function checkOGIsEnalbed(message) {
  var ogMetaData = message.ogMetaData;

  if (!ogMetaData) {
    return false;
  }

  var url = ogMetaData.url;

  if (!url) {
    return false;
  }

  return true;
};

function OpenchannelOGMessage(_a) {
  var message = _a.message,
      isOperator = _a.isOperator,
      className = _a.className,
      disabled = _a.disabled,
      showEdit = _a.showEdit,
      showRemove = _a.showRemove,
      resendMessage = _a.resendMessage,
      chainTop = _a.chainTop,
      userId = _a.userId;

  if (!message || message.messageType !== 'user') {
    return null;
  }

  var status = message === null || message === void 0 ? void 0 : message.sendingStatus;
  var ogMetaData = message.ogMetaData;
  var defaultImage = ogMetaData.defaultImage;

  var _b = useLocalization(),
      stringSet = _b.stringSet,
      dateLocale = _b.dateLocale;

  var _c = React__default.useContext(UserProfileContext),
      disableUserProfile = _c.disableUserProfile,
      renderUserProfile = _c.renderUserProfile;

  var _d = React__default.useState({}),
      contextStyle = _d[0],
      setContextStyle = _d[1];

  var messageComponentRef = React__default.useRef(null);
  var contextMenuRef = React__default.useRef(null);
  var avatarRef = React__default.useRef(null);
  var isUrl = createUrlTester(URL_REG);
  var isPending = checkIsPending(status);
  var isFailed = checkIsFailed(status);
  var sender = getSenderFromMessage(message);
  var MemoizedMessageText = React__default.useMemo(function () {
    return function () {
      var wordClassName = 'sendbird-openchannel-og-message--word';
      var splitMessage = message.message.split(' ');
      var matchedMessage = splitMessage.map(function (word) {
        return isUrl(word) ? /*#__PURE__*/React__default__default["default"].createElement(LinkLabel, {
          key: uuidv4(),
          className: [wordClassName, 'sendbird-openchannel-og-message--word--link'],
          src: word,
          type: LabelTypography.BODY_1,
          color: LabelColors.PRIMARY
        }, word) : /*#__PURE__*/React__default__default["default"].createElement(Label, {
          key: uuidv4(),
          className: wordClassName,
          type: LabelTypography.BODY_1,
          color: LabelColors.ONBACKGROUND_1
        }, word);
      });

      if (message.updatedAt > 0) {
        matchedMessage.push( /*#__PURE__*/React__default__default["default"].createElement(Label, {
          key: uuidv4(),
          className: wordClassName,
          type: LabelTypography.BODY_1,
          color: LabelColors.ONBACKGROUND_2
        }, stringSet.MESSAGE_EDITED));
      }

      return matchedMessage;
    };
  }, [message, message.updatedAt]);

  var openLink = function openLink() {
    if (checkOGIsEnalbed(message)) {
      var url = ogMetaData.url;
      window.open(url);
    }
  }; // place conxt menu top depending clientHeight of message component


  React__default.useEffect(function () {
    var _a;

    if (((_a = messageComponentRef === null || messageComponentRef === void 0 ? void 0 : messageComponentRef.current) === null || _a === void 0 ? void 0 : _a.clientHeight) > 36) {
      setContextStyle({
        top: '8px '
      });
    } else {
      setContextStyle({
        top: '2px'
      });
    }
  }, [window.innerWidth]);
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-openchannel-og-message'], false).join(' '),
    ref: messageComponentRef
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-og-message__top"
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-og-message__top__left"
  }, !chainTop && /*#__PURE__*/React__default__default["default"].createElement(ContextMenu, {
    menuTrigger: function menuTrigger(toggleDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(Avatar$1, {
        className: "sendbird-openchannel-og-message__top__left__avatar",
        src: sender.profileUrl || '',
        ref: avatarRef,
        width: "28px",
        height: "28px",
        onClick: function onClick() {
          if (!disableUserProfile) {
            toggleDropdown();
          }
        }
      });
    },
    menuItems: function menuItems(closeDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(MenuItems, {
        parentRef: avatarRef,
        parentContainRef: avatarRef,
        closeDropdown: closeDropdown,
        style: {
          paddingTop: 0,
          paddingBottom: 0
        }
      }, renderUserProfile ? renderUserProfile({
        user: sender,
        close: closeDropdown
      }) : /*#__PURE__*/React__default__default["default"].createElement(ConnectedUserProfile, {
        user: sender,
        onSuccess: closeDropdown,
        disableMessaging: true
      }));
    }
  })), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-og-message__top__right"
  }, !chainTop && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-og-message__top__right__title"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-og-message__top__right__title__sender-name",
    type: LabelTypography.CAPTION_2,
    color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2
  }, sender && (sender.friendName || sender.nickname || sender.userId)), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-og-message__top__right__title__sent-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_3
  }, (message === null || message === void 0 ? void 0 : message.createdAt) && format$1(message === null || message === void 0 ? void 0 : message.createdAt, 'p', {
    locale: dateLocale
  }))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-og-message__top__right__description"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-og-message__top__right__description__message",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, MemoizedMessageText()))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-og-message__top__context-menu",
    ref: contextMenuRef,
    style: contextStyle
  }, /*#__PURE__*/React__default__default["default"].createElement(ContextMenu, {
    menuTrigger: function menuTrigger(toggleDropdown) {
      return showMenuTrigger({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(IconButton, {
        className: "sendbird-openchannel-og-message__top__context-menu--icon",
        width: "32px",
        height: "32px",
        onClick: function onClick() {
          toggleDropdown();
        }
      }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
        type: IconTypes.MORE,
        fillColor: IconColors.CONTENT_INVERSE,
        width: "24px",
        height: "24px"
      }));
    },
    menuItems: function menuItems(closeDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(MenuItems, {
        parentRef: contextMenuRef,
        parentContainRef: contextMenuRef,
        closeDropdown: closeDropdown,
        openLeft: true
      }, isFineCopy({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        className: "sendbird-openchannel-og-message__top__context-menu__copy",
        onClick: function onClick() {
          copyToClipboard(message.message);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__COPY), isFineEdit({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        className: "sendbird-openchannel-og-message__top__context-menu__edit",
        onClick: function onClick() {
          if (disabled) {
            return;
          }

          showEdit(true);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__EDIT), isFineResend({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        className: "sendbird-openchannel-og-message__top__context-menu__resend",
        onClick: function onClick() {
          resendMessage(message);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND), isFineDelete({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        className: "sendbird-openchannel-og-message__top__context-menu__delete",
        onClick: function onClick() {
          if (disabled) {
            return;
          }

          showRemove(true);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE));
    }
  }))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-og-message__bottom"
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-og-message__bottom__og-tag"
  }, ogMetaData.url && /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-og-message__bottom__og-tag__url",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, ogMetaData.url), ogMetaData.title && /*#__PURE__*/React__default__default["default"].createElement(LinkLabel, {
    className: "sendbird-openchannel-og-message__bottom__og-tag__title",
    src: ogMetaData.url,
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.PRIMARY
  }, ogMetaData.title), ogMetaData.description && /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-og-message__bottom__og-tag__description",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_1
  }, ogMetaData.description), ogMetaData.url && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-og-message__bottom__og-tag__thumbnail",
    role: "button",
    onClick: openLink,
    onKeyDown: openLink,
    tabIndex: 0
  }, defaultImage && /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
    className: "sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image",
    url: defaultImage.url || '',
    alt: defaultImage.alt || '',
    height: "189px",
    defaultComponent: /*#__PURE__*/React__default__default["default"].createElement("div", {
      className: "sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder"
    }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
      type: IconTypes.THUMBNAIL_NONE,
      width: "56px",
      height: "56px"
    }))
  }))), (isPending || isFailed) && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-og-message__top__right__tail"
  }, isPending && /*#__PURE__*/React__default__default["default"].createElement(Loader, {
    width: "16px",
    height: "16px"
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-og-message__top__right__tail__pending",
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "16px",
    height: "16px"
  })), isFailed && /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-og-message__top__right__tail__failed",
    type: IconTypes.ERROR,
    fillColor: IconColors.ERROR,
    width: "16px",
    height: "16px"
  }))));
}

var SUPPORTING_TYPES = {
  IMAGE: 'IMAGE',
  VIDEO: 'VIDEO',
  UNSUPPORTED: 'UNSUPPORTED'
};
var SUPPORTED_MIMES$1 = {
  IMAGE: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'],
  VIDEO: ['video/mpeg', 'video/ogg', 'video/webm', 'video/mp4']
};

var getSupportingFileType = function getSupportingFileType(type) {
  if (SUPPORTED_MIMES$1.IMAGE.indexOf(type) >= 0) {
    return SUPPORTING_TYPES.IMAGE;
  }

  if (SUPPORTED_MIMES$1.VIDEO.indexOf(type) >= 0) {
    return SUPPORTING_TYPES.VIDEO;
  }

  return SUPPORTING_TYPES.UNSUPPORTED;
};

function OpenchannelThumbnailMessage(_a) {
  var _b;

  var className = _a.className,
      message = _a.message,
      isOperator = _a.isOperator,
      disabled = _a.disabled,
      userId = _a.userId,
      chainTop = _a.chainTop,
      _onClick = _a.onClick,
      showRemove = _a.showRemove,
      resendMessage = _a.resendMessage;
  var type = message.type,
      url = message.url,
      thumbnails = message.thumbnails,
      localUrl = message.localUrl;
  var status = message === null || message === void 0 ? void 0 : message.sendingStatus;
  var thumbnailUrl = thumbnails && thumbnails.length > 0 && thumbnails[0].url || null;

  var _c = useLocalization(),
      stringSet = _c.stringSet,
      dateLocale = _c.dateLocale;

  var _d = React__default.useContext(UserProfileContext),
      disableUserProfile = _d.disableUserProfile,
      renderUserProfile = _d.renderUserProfile;

  var _e = React__default.useState(360),
      messageWidth = _e[0],
      setMessageWidth = _e[1];

  var messageRef = React__default.useRef(null);
  var contextMenuRef = React__default.useRef(null);
  var avatarRef = React__default.useRef(null);
  var memorizedThumbnailPlaceHolder = React__default.useMemo(function () {
    return function (type) {
      return function (_a) {
        var style = _a.style;
        return (
          /*#__PURE__*/
          // eslint-disable-line
          React__default__default["default"].createElement("div", {
            style: style
          }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
            type: type,
            fillColor: IconColors.ON_BACKGROUND_2,
            width: "56px",
            height: "56px"
          }))
        );
      };
    };
  }, []);
  var isMessageSent = checkIsSent(status);
  var isPending = checkIsPending(status);
  var isFailed = checkIsFailed(status);
  var sender = getSenderFromMessage(message);
  React__default.useEffect(function () {
    var _a;

    var thumbnailWidth = ((_a = messageRef === null || messageRef === void 0 ? void 0 : messageRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth) - 80;
    setMessageWidth(thumbnailWidth > 360 ? 360 : thumbnailWidth);
  }, []);
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-openchannel-thumbnail-message'], false).join(' '),
    ref: messageRef
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__left"
  }, !chainTop && /*#__PURE__*/React__default__default["default"].createElement(ContextMenu, {
    menuTrigger: function menuTrigger(toggleDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(Avatar$1, {
        className: "sendbird-openchannel-thumbnail-message__left__avatar",
        src: sender.profileUrl || '',
        ref: avatarRef,
        width: "28px",
        height: "28px",
        onClick: function onClick() {
          if (!disableUserProfile) {
            toggleDropdown();
          }
        }
      });
    },
    menuItems: function menuItems(closeDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(MenuItems, {
        parentRef: avatarRef,
        parentContainRef: avatarRef,
        closeDropdown: closeDropdown,
        style: {
          paddingTop: 0,
          paddingBottom: 0
        }
      }, renderUserProfile ? renderUserProfile({
        user: sender,
        close: closeDropdown
      }) : /*#__PURE__*/React__default__default["default"].createElement(ConnectedUserProfile, {
        user: sender,
        onSuccess: closeDropdown,
        disableMessaging: true
      }));
    }
  })), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right"
  }, !chainTop && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right__title"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-thumbnail-message__right__title__sender-name",
    type: LabelTypography.CAPTION_2,
    color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2
  }, sender && (sender.friendName || sender.nickname || sender.userId)), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-thumbnail-message__right__title__sent-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_3
  }, (message === null || message === void 0 ? void 0 : message.createdAt) && format$1(message.createdAt, 'p', {
    locale: dateLocale
  }))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right__body"
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap",
    role: "button",
    onClick: function onClick() {
      if (isMessageSent) {
        _onClick(true);
      }
    },
    onKeyDown: function onKeyDown() {
      if (isMessageSent) {
        _onClick(true);
      }
    },
    tabIndex: 0
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap__overlay"
  }), (_b = {}, _b[SUPPORTING_TYPES.VIDEO] = url || localUrl ? /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video"
  }, thumbnailUrl ? /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video",
    url: thumbnailUrl,
    width: messageWidth,
    height: "270px",
    alt: "image",
    placeHolder: memorizedThumbnailPlaceHolder(IconTypes.PLAY)
  }) : /*#__PURE__*/React__default__default["default"].createElement("video", {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video__video"
  }, /*#__PURE__*/React__default__default["default"].createElement("source", {
    src: url || localUrl,
    type: type
  })), /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon",
    type: IconTypes.PLAY,
    fillColor: IconColors.ON_BACKGROUND_2,
    width: "56px",
    height: "56px"
  })) : /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon",
    type: IconTypes.PHOTO,
    fillColor: IconColors.ON_BACKGROUND_2,
    width: "56px",
    height: "56px"
  }), _b[SUPPORTING_TYPES.IMAGE] = url || localUrl ? /*#__PURE__*/React__default__default["default"].createElement(ImageRenderer, {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap__image",
    url: thumbnailUrl || url || localUrl,
    alt: "image",
    width: messageWidth,
    height: "270px",
    placeHolder: memorizedThumbnailPlaceHolder(IconTypes.PHOTO)
  }) : /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon",
    type: IconTypes.PHOTO,
    fillColor: IconColors.ON_BACKGROUND_2,
    width: "56px",
    height: "56px"
  }), _b[SUPPORTING_TYPES.UNSUPPORTED] = /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap__unknown",
    type: IconTypes.PHOTO,
    fillColor: IconColors.ON_BACKGROUND_2,
    width: "56px",
    height: "56px"
  }), _b)[getSupportingFileType(type)])), (isPending || isFailed) && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right__tail"
  }, isPending && /*#__PURE__*/React__default__default["default"].createElement(Loader, {
    width: "16px",
    height: "16px"
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-thumbnail-message__right__tail__pending",
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "16px",
    height: "16px"
  })), isFailed && /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-thumbnail-message__right__tail__failed",
    type: IconTypes.ERROR,
    fillColor: IconColors.ERROR,
    width: "16px",
    height: "16px"
  }))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__context-menu",
    ref: contextMenuRef
  }, /*#__PURE__*/React__default__default["default"].createElement(ContextMenu, {
    menuTrigger: function menuTrigger(toggleDropdown) {
      return showMenuTrigger({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(IconButton, {
        className: "sendbird-openchannel-thumbnail-message__context-menu--icon",
        width: "32px",
        height: "32px",
        onClick: toggleDropdown
      }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
        type: IconTypes.MORE,
        fillColor: IconColors.CONTENT_INVERSE,
        width: "24px",
        height: "24px"
      }));
    },
    menuItems: function menuItems(closeDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(MenuItems, {
        parentRef: contextMenuRef,
        parentContainRef: contextMenuRef,
        closeDropdown: closeDropdown,
        openLeft: true
      }, isFineResend({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        onClick: function onClick() {
          resendMessage(message);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND), isFineDelete({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        onClick: function onClick() {
          if (disabled) {
            return;
          }

          showRemove(true);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE));
    }
  })));
}

var checkFileType = function checkFileType(fileUrl) {
  var audioFile = /(\.mp3)$/i;
  var gifFile = /(\.gif)$/i;

  if (audioFile.test(fileUrl)) {
    return IconTypes.FILE_AUDIO;
  }

  if (gifFile.test(fileUrl)) {
    return IconTypes.GIF;
  }

  return IconTypes.FILE_DOCUMENT;
};

var truncate = function truncate(fullStr, strLen) {
  if (fullStr === null || fullStr === undefined) return '';
  if (fullStr.length <= strLen) return fullStr;
  var separator = '...';
  var sepLen = separator.length;
  var charsToShow = strLen - sepLen;
  var frontChars = Math.ceil(charsToShow / 2);
  var backChars = Math.floor(charsToShow / 2);
  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);
};

function OpenchannelFileMessage(_a) {
  var className = _a.className,
      message = _a.message,
      isOperator = _a.isOperator,
      userId = _a.userId,
      disabled = _a.disabled,
      chainTop = _a.chainTop,
      showRemove = _a.showRemove,
      resendMessage = _a.resendMessage;
  var status = message === null || message === void 0 ? void 0 : message.sendingStatus;

  var _b = useLocalization(),
      dateLocale = _b.dateLocale,
      stringSet = _b.stringSet;

  var contextMenuRef = React__default.useRef(null);
  var avatarRef = React__default.useRef(null);

  var _c = React__default.useContext(UserProfileContext),
      disableUserProfile = _c.disableUserProfile,
      renderUserProfile = _c.renderUserProfile;

  var openFileUrl = function openFileUrl() {
    window.open(message.url);
  };

  var isPending = checkIsPending(status);
  var isFailed = checkIsFailed(status);
  var sender = getSenderFromMessage(message);
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-openchannel-file-message'], false).join(' ')
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-file-message__left"
  }, !chainTop && /*#__PURE__*/React__default__default["default"].createElement(ContextMenu, {
    menuTrigger: function menuTrigger(toggleDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(Avatar$1, {
        className: "sendbird-openchannel-file-message__left__avatar",
        src: sender.profileUrl || '',
        ref: avatarRef,
        width: "28px",
        height: "28px",
        onClick: function onClick() {
          if (!disableUserProfile) {
            toggleDropdown();
          }
        }
      });
    },
    menuItems: function menuItems(closeDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(MenuItems, {
        parentRef: avatarRef,
        parentContainRef: avatarRef,
        closeDropdown: closeDropdown,
        style: {
          paddingTop: 0,
          paddingBottom: 0
        }
      }, renderUserProfile ? renderUserProfile({
        user: sender,
        close: closeDropdown
      }) : /*#__PURE__*/React__default__default["default"].createElement(ConnectedUserProfile, {
        user: sender,
        onSuccess: closeDropdown,
        disableMessaging: true
      }));
    }
  })), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-file-message__right"
  }, !chainTop && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-file-message__right__title"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-file-message__right__title__sender-name",
    type: LabelTypography.CAPTION_2,
    color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2
  }, sender && (sender.friendName || sender.nickname || sender.userId)), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-openchannel-file-message__right__title__sent-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_3
  }, (message === null || message === void 0 ? void 0 : message.createdAt) && format$1(message.createdAt, 'p', {
    locale: dateLocale
  }))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-file-message__right__body"
  }, checkFileType(message.url) && /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-file-message__right__body__icon",
    type: checkFileType(message.url),
    fillColor: IconColors.PRIMARY,
    width: "48px",
    height: "48px"
  }), /*#__PURE__*/React__default__default["default"].createElement(TextButton, {
    className: "sendbird-openchannel-file-message__right__body__file-name",
    onClick: openFileUrl
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, truncate(message.name || message.url, 40)))), (isPending || isFailed) && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-file-message__right__tail"
  }, isPending && /*#__PURE__*/React__default__default["default"].createElement(Loader, {
    width: "16px",
    height: "16px"
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-file-message__right__tail__pending",
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "16px",
    height: "16px"
  })), isFailed && /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: "sendbird-openchannel-file-message__right__tail__failed",
    type: IconTypes.ERROR,
    fillColor: IconColors.ERROR,
    width: "16px",
    height: "16px"
  }))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-file-message__context-menu",
    ref: contextMenuRef
  }, /*#__PURE__*/React__default__default["default"].createElement(ContextMenu, {
    menuTrigger: function menuTrigger(toggleDropdown) {
      return showMenuTrigger({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(IconButton, {
        className: "sendbird-openchannel-file-message__context-menu__icon",
        width: "32px",
        height: "32px",
        onClick: toggleDropdown
      }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
        type: IconTypes.MORE,
        width: "24px",
        height: "24px"
      }));
    },
    menuItems: function menuItems(closeDropdown) {
      return /*#__PURE__*/React__default__default["default"].createElement(MenuItems, {
        parentRef: contextMenuRef,
        parentContainRef: contextMenuRef,
        closeDropdown: closeDropdown,
        openLeft: true
      }, isFineResend({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        onClick: function onClick() {
          if (disabled) {
            return;
          }

          resendMessage(message);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND), isFineDelete({
        message: message,
        userId: userId,
        status: status
      }) && /*#__PURE__*/React__default__default["default"].createElement(MenuItem, {
        onClick: function onClick() {
          if (disabled) {
            return;
          }

          showRemove(true);
          closeDropdown();
        }
      }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE));
    }
  })));
}

var FileViewerComponent = function FileViewerComponent(_a) {
  var profileUrl = _a.profileUrl,
      nickname = _a.nickname,
      name = _a.name,
      type = _a.type,
      url = _a.url,
      _b = _a.isByMe,
      isByMe = _b === void 0 ? true : _b,
      _c = _a.disableDelete,
      disableDelete = _c === void 0 ? false : _c,
      onClose = _a.onClose,
      onDelete = _a.onDelete;
  var stringSet = React__default.useContext(LocalizationContext).stringSet;
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-fileviewer"
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-fileviewer__header"
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-fileviewer__header__left"
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-fileviewer__header__left__avatar"
  }, /*#__PURE__*/React__default__default["default"].createElement(Avatar$1, {
    height: "32px",
    width: "32px",
    src: profileUrl
  })), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-fileviewer__header__left__filename",
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, name), /*#__PURE__*/React__default__default["default"].createElement(Label, {
    className: "sendbird-fileviewer__header__left__sender-name",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, nickname)), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-fileviewer__header__right"
  }, isSupportedFileView(type) && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-fileviewer__header__right__actions"
  }, /*#__PURE__*/React__default__default["default"].createElement("a", {
    className: "sendbird-fileviewer__header__right__actions__download",
    rel: "noopener noreferrer",
    href: url,
    target: "_blank"
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    type: IconTypes.DOWNLOAD,
    fillColor: IconColors.ON_BACKGROUND_1,
    height: "24px",
    width: "24px"
  })), onDelete && isByMe && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-fileviewer__header__right__actions__delete"
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    className: disableDelete ? 'disabled' : '',
    type: IconTypes.DELETE,
    fillColor: disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1,
    height: "24px",
    width: "24px",
    onClick: function onClick(e) {
      if (!disableDelete) {
        onDelete === null || onDelete === void 0 ? void 0 : onDelete(e);
      }
    }
  }))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-fileviewer__header__right__actions__close"
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    type: IconTypes.CLOSE,
    fillColor: IconColors.ON_BACKGROUND_1,
    height: "24px",
    width: "24px",
    onClick: function onClick(e) {
      return onClose === null || onClose === void 0 ? void 0 : onClose(e);
    }
  })))), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-fileviewer__content"
  }, isVideo$1(type) && /*#__PURE__*/React__default__default["default"].createElement("video", {
    controls: true,
    className: "sendbird-fileviewer__content__video"
  }, /*#__PURE__*/React__default__default["default"].createElement("source", {
    src: url,
    type: type
  })), isImage$1(type) && /*#__PURE__*/React__default__default["default"].createElement("img", {
    src: url,
    alt: name,
    className: "sendbird-fileviewer__content__img"
  }), !isSupportedFileView(type) && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-fileviewer__content__unsupported"
  }, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    type: LabelTypography.H_1,
    color: LabelColors.ONBACKGROUND_1
  }, (stringSet === null || stringSet === void 0 ? void 0 : stringSet.UI__FILE_VIEWER__UNSUPPORT) || 'Unsupported message'))));
};

function FileViewer(_a) {
  var _b, _c, _d;

  var message = _a.message,
      _e = _a.isByMe,
      isByMe = _e === void 0 ? false : _e,
      onClose = _a.onClose,
      onDelete = _a.onDelete;
  return /*#__PURE__*/reactDom.createPortal( /*#__PURE__*/React__default__default["default"].createElement(FileViewerComponent, {
    profileUrl: (_b = message === null || message === void 0 ? void 0 : message.sender) === null || _b === void 0 ? void 0 : _b.profileUrl,
    nickname: (_c = message === null || message === void 0 ? void 0 : message.sender) === null || _c === void 0 ? void 0 : _c.nickname,
    name: message === null || message === void 0 ? void 0 : message.name,
    type: message === null || message === void 0 ? void 0 : message.type,
    url: message === null || message === void 0 ? void 0 : message.url,
    isByMe: isByMe,
    disableDelete: ((_d = message === null || message === void 0 ? void 0 : message.threadInfo) === null || _d === void 0 ? void 0 : _d.replyCount) > 0,
    onClose: onClose,
    onDelete: onDelete
  }), document.getElementById(MODAL_ROOT));
}

function RemoveMessageModal(_a) {
  var onCloseModal = _a.onCloseModal,
      onDeleteMessage = _a.onDeleteMessage;
  var stringSet = React__default.useContext(LocalizationContext).stringSet;
  return /*#__PURE__*/React__default__default["default"].createElement(Modal, {
    onCancel: onCloseModal,
    onSubmit: onDeleteMessage,
    submitText: stringSet.MESSAGE_MENU__DELETE,
    titleText: stringSet.MODAL__DELETE_MESSAGE__TITLE
  });
} // https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types


var SUPPORTED_MIMES = {
  IMAGE: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/svg+xml', 'image/webp'],
  VIDEO: ['video/mpeg', 'video/ogg', 'video/webm', 'video/mp4']
};

var isImage = function isImage(type) {
  return SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;
};

var isVideo = function isVideo(type) {
  return SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;
};

__assign({}, SUPPORTED_MIMES);

var MessageTypes = {
  ADMIN: 'ADMIN',
  USER: 'USER',
  FILE: 'FILE',
  THUMBNAIL: 'THUMBNAIL',
  OG: 'OG',
  UNKNOWN: 'UNKNOWN'
};
var SendingMessageStatus = {
  NONE: 'none',
  SUCCEEDED: 'succeeded',
  FAILED: 'failed',
  PENDING: 'pending'
};

var getMessageType = function getMessageType(message) {
  var _a, _b;

  if (((_a = message === null || message === void 0 ? void 0 : message.isUserMessage) === null || _a === void 0 ? void 0 : _a.call(message)) || (message === null || message === void 0 ? void 0 : message.messageType) === 'user') {
    return (message === null || message === void 0 ? void 0 : message.ogMetaData) ? MessageTypes.OG : MessageTypes.USER;
  }

  if ((_b = message === null || message === void 0 ? void 0 : message.isAdminMessage) === null || _b === void 0 ? void 0 : _b.call(message)) {
    return MessageTypes.ADMIN;
  }

  if ((message === null || message === void 0 ? void 0 : message.messageType) === 'file') {
    return isImage(message.type) || isVideo(message.type) ? MessageTypes.THUMBNAIL : MessageTypes.FILE;
  }

  return MessageTypes.UNKNOWN;
};

function MessagOpenChannelMessageeHoc(props) {
  var _a;

  var _b;

  var message = props.message,
      chainTop = props.chainTop,
      chainBottom = props.chainBottom,
      hasSeparator = props.hasSeparator,
      renderMessage = props.renderMessage;

  var _c = useOpenChannelContext(),
      currentOpenChannel = _c.currentOpenChannel,
      deleteMessage = _c.deleteMessage,
      updateMessage = _c.updateMessage,
      resendMessage = _c.resendMessage;

  var dateLocale = useLocalization().dateLocale;
  var editDisabled = currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isFrozen;
  var globalState = useSendbirdStateContext();
  var userId = (_b = globalState === null || globalState === void 0 ? void 0 : globalState.config) === null || _b === void 0 ? void 0 : _b.userId;
  var sender = null;

  if ((message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
    sender = message === null || message === void 0 ? void 0 : message.sender;
  }

  var RenderedMessage = React__default.useMemo(function () {
    return function (props) {
      return /*#__PURE__*/React__default__default["default"].createElement(React__default__default["default"].Fragment, null, renderMessage ? renderMessage(props) : null);
    };
  }, [message, renderMessage]);

  var _d = React__default.useState(false),
      showEdit = _d[0],
      setShowEdit = _d[1];

  var _e = React__default.useState(false),
      showRemove = _e[0],
      setShowRemove = _e[1];

  var _f = React__default.useState(false),
      showFileViewer = _f[0],
      setShowFileViewer = _f[1];

  var editMessageInputRef = React__default.useRef(null);
  var isByMe = false;

  if (sender && (message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
    // pending and failed messages are by me
    isByMe = userId === sender.userId || (message === null || message === void 0 ? void 0 : message.sendingStatus) === SendingMessageStatus.PENDING || (message === null || message === void 0 ? void 0 : message.sendingStatus) === SendingMessageStatus.FAILED;
  }

  if (renderMessage && RenderedMessage) {
    return /*#__PURE__*/React__default__default["default"].createElement("div", {
      className: "sendbird-msg-hoc sendbird-msg--scroll-ref"
    }, /*#__PURE__*/React__default__default["default"].createElement(RenderedMessage, {
      message: message,
      chainTop: chainTop,
      chainBottom: chainBottom
    }));
  }

  if ((message === null || message === void 0 ? void 0 : message.messageType) === 'user' && showEdit) {
    return /*#__PURE__*/React__default__default["default"].createElement(MessageInput, {
      isEdit: true,
      disabled: editDisabled,
      ref: editMessageInputRef,
      message: message,
      name: message === null || message === void 0 ? void 0 : message.messageId,
      onUpdateMessage: function onUpdateMessage(_a) {
        var messageId = _a.messageId,
            message = _a.message;
        updateMessage(messageId, message);
        setShowEdit(false);
      },
      onCancelEdit: function onCancelEdit() {
        setShowEdit(false);
      }
    });
  }

  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-msg-hoc sendbird-msg--scroll-ref"
  }, hasSeparator && (message === null || message === void 0 ? void 0 : message.createdAt) && /*#__PURE__*/React__default__default["default"].createElement(DateSeparator, null, /*#__PURE__*/React__default__default["default"].createElement(Label, {
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, format$1(message === null || message === void 0 ? void 0 : message.createdAt, 'MMMM dd, yyyy', {
    locale: dateLocale
  }))), (_a = {}, _a[MessageTypes.ADMIN] = function () {
    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'admin') {
      return /*#__PURE__*/React__default__default["default"].createElement(OpenChannelAdminMessage, {
        message: message
      });
    }
  }(), _a[MessageTypes.FILE] = function () {
    var _a;

    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'file') {
      return /*#__PURE__*/React__default__default["default"].createElement(OpenchannelFileMessage, {
        message: message,
        isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId),
        disabled: editDisabled,
        userId: userId,
        showRemove: setShowRemove,
        resendMessage: resendMessage,
        chainTop: chainTop,
        chainBottom: chainBottom
      });
    }

    return;
  }(), _a[MessageTypes.OG] = function () {
    var _a;

    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'user') {
      return /*#__PURE__*/React__default__default["default"].createElement(OpenchannelOGMessage, {
        message: message,
        isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId),
        userId: userId,
        showEdit: setShowEdit,
        disabled: editDisabled,
        showRemove: setShowRemove,
        resendMessage: resendMessage,
        chainTop: chainTop,
        chainBottom: chainBottom
      });
    }

    return;
  }(), _a[MessageTypes.THUMBNAIL] = function () {
    var _a;

    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'file') {
      return /*#__PURE__*/React__default__default["default"].createElement(OpenchannelThumbnailMessage, {
        message: message,
        isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId),
        disabled: editDisabled,
        userId: userId,
        showRemove: setShowRemove,
        resendMessage: resendMessage,
        onClick: setShowFileViewer,
        chainTop: chainTop,
        chainBottom: chainBottom
      });
    }

    return;
  }(), _a[MessageTypes.USER] = function () {
    var _a;

    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'user') {
      return /*#__PURE__*/React__default__default["default"].createElement(OpenchannelUserMessage, {
        message: message,
        isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId),
        userId: userId,
        disabled: editDisabled,
        showEdit: setShowEdit,
        showRemove: setShowRemove,
        resendMessage: resendMessage,
        chainTop: chainTop,
        chainBottom: chainBottom
      });
    }

    return;
  }(), _a[MessageTypes.UNKNOWN] = function () {
    return; // return (
    //   <OpenChannelUnknownMessage message={message} />
    // );
  }(), _a)[getMessageType(message)], showRemove && /*#__PURE__*/React__default__default["default"].createElement(RemoveMessageModal, {
    onCloseModal: function onCloseModal() {
      return setShowRemove(false);
    },
    onDeleteMessage: function onDeleteMessage() {
      if ((message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
        deleteMessage(message);
      }
    }
  }), showFileViewer && (message === null || message === void 0 ? void 0 : message.messageType) === 'file' && /*#__PURE__*/React__default__default["default"].createElement(FileViewer, {
    onClose: function onClose() {
      return setShowFileViewer(false);
    },
    message: message,
    onDelete: function onDelete() {
      return deleteMessage(message);
    },
    isByMe: isByMe
  }));
}

function OpenchannelMessageList(props, ref) {
  var _a;

  var _b = useOpenChannelContext(),
      _c = _b.isMessageGroupingEnabled,
      isMessageGroupingEnabled = _c === void 0 ? true : _c,
      allMessages = _b.allMessages,
      hasMore = _b.hasMore,
      onScroll = _b.onScroll;

  var scrollRef = ref || React__default.useRef(null);

  var _d = React__default.useState(false),
      showScrollDownButton = _d[0],
      setShowScrollDownButton = _d[1];

  var handleOnScroll = function handleOnScroll(e) {
    var element = e.target;
    var scrollTop = element.scrollTop,
        scrollHeight = element.scrollHeight,
        clientHeight = element.clientHeight;

    if (scrollHeight > scrollTop + clientHeight + 1) {
      setShowScrollDownButton(true);
    } else {
      setShowScrollDownButton(false);
    }

    if (!hasMore) {
      return;
    }

    if (scrollTop === 0) {
      var nodes = scrollRef.current.querySelectorAll('.sendbird-msg--scroll-ref');
      var first_1 = nodes && nodes[0];
      onScroll(function () {
        try {
          first_1.scrollIntoView();
        } catch (error) {}
      });
    }
  };

  var scrollToBottom = function scrollToBottom() {
    if (scrollRef && scrollRef.current) {
      scrollRef.current.scrollTo(0, scrollRef.current.scrollHeight);
      setShowScrollDownButton(false);
    }
  };

  var hasMessage = React__default.useMemo(function () {
    return allMessages.length > 0;
  }, [allMessages.length]);
  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-conversation-scroll"
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-conversation-scroll__container"
  }, /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-conversation-scroll__container__padding"
  }), /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: ['sendbird-openchannel-conversation-scroll__container__item-container', hasMessage ? '' : 'no-messages'].join(' '),
    onScroll: handleOnScroll,
    ref: scrollRef
  }, hasMessage ? allMessages.map(function (message, index) {
    var previousMessage = allMessages[index - 1];
    var nextMessage = allMessages[index - 1];
    var previousMessageCreatedAt = previousMessage && previousMessage.createdAt;
    var currentCreatedAt = message === null || message === void 0 ? void 0 : message.createdAt; // https://stackoverflow.com/a/41855608

    var hasSeparator = !(previousMessageCreatedAt && isSameDay(currentCreatedAt, previousMessageCreatedAt));

    var _a = isMessageGroupingEnabled ? compareMessagesForGrouping(previousMessage, message, nextMessage) : [false, false],
        chainTop = _a[0],
        chainBottom = _a[1];

    return /*#__PURE__*/React__default__default["default"].createElement(MessagOpenChannelMessageeHoc, {
      key: (message === null || message === void 0 ? void 0 : message.messageId) || (message === null || message === void 0 ? void 0 : message.reqId),
      message: message,
      chainTop: chainTop,
      chainBottom: chainBottom,
      hasSeparator: hasSeparator,
      renderMessage: props === null || props === void 0 ? void 0 : props.renderMessage
    });
  }) : ((_a = props === null || props === void 0 ? void 0 : props.renderPlaceHolderEmptyList) === null || _a === void 0 ? void 0 : _a.call(props)) || /*#__PURE__*/React__default__default["default"].createElement(PlaceHolder, {
    className: "sendbird-openchannel-conversation-scroll__container__place-holder",
    type: PlaceHolderTypes.NO_MESSAGES
  }))), showScrollDownButton && /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: "sendbird-openchannel-conversation-scroll__container__scroll-bottom-button",
    onClick: scrollToBottom,
    onKeyDown: scrollToBottom,
    tabIndex: 0,
    role: "button"
  }, /*#__PURE__*/React__default__default["default"].createElement(Icon, {
    width: "24px",
    height: "24px",
    type: IconTypes.CHEVRON_DOWN,
    fillColor: IconColors.CONTENT
  })));
}

var OpenChannelMessageList = /*#__PURE__*/React__default__default["default"].forwardRef(OpenchannelMessageList);

var COMPONENT_CLASS_NAME = 'sendbird-openchannel-conversation';

var OpenChannelUI = function OpenChannelUI(_a) {
  var renderMessage = _a.renderMessage,
      renderHeader = _a.renderHeader,
      renderInput = _a.renderInput,
      renderPlaceHolderEmptyList = _a.renderPlaceHolderEmptyList,
      renderPlaceHolderError = _a.renderPlaceHolderError,
      renderPlaceHolderLoading = _a.renderPlaceHolderLoading;

  var _b = useOpenChannelContext(),
      currentOpenChannel = _b.currentOpenChannel,
      amIBanned = _b.amIBanned,
      loading = _b.loading,
      isInvalid = _b.isInvalid,
      messageInputRef = _b.messageInputRef;

  if (!currentOpenChannel || !(currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.url) || amIBanned) {
    return (renderPlaceHolderError === null || renderPlaceHolderError === void 0 ? void 0 : renderPlaceHolderError()) || /*#__PURE__*/React__default__default["default"].createElement("div", {
      className: COMPONENT_CLASS_NAME
    }, /*#__PURE__*/React__default__default["default"].createElement(PlaceHolder, {
      type: PlaceHolderTypes.NO_CHANNELS
    }));
  }

  if (loading) {
    return (renderPlaceHolderLoading === null || renderPlaceHolderLoading === void 0 ? void 0 : renderPlaceHolderLoading()) || /*#__PURE__*/React__default__default["default"].createElement("div", {
      className: COMPONENT_CLASS_NAME
    }, /*#__PURE__*/React__default__default["default"].createElement(PlaceHolder, {
      type: PlaceHolderTypes.LOADING
    }));
  }

  if (isInvalid) {
    return (renderPlaceHolderError === null || renderPlaceHolderError === void 0 ? void 0 : renderPlaceHolderError()) || /*#__PURE__*/React__default__default["default"].createElement("div", {
      className: COMPONENT_CLASS_NAME
    }, /*#__PURE__*/React__default__default["default"].createElement(PlaceHolder, {
      type: PlaceHolderTypes.WRONG
    }));
  }

  return /*#__PURE__*/React__default__default["default"].createElement("div", {
    className: COMPONENT_CLASS_NAME
  }, (renderHeader === null || renderHeader === void 0 ? void 0 : renderHeader()) || /*#__PURE__*/React__default__default["default"].createElement(OpenchannelConversationHeader, null), (currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isFrozen) && /*#__PURE__*/React__default__default["default"].createElement(FrozenNotification, null), /*#__PURE__*/React__default__default["default"].createElement(OpenChannelMessageList, {
    renderMessage: renderMessage,
    renderPlaceHolderEmptyList: renderPlaceHolderEmptyList
  }), (renderInput === null || renderInput === void 0 ? void 0 : renderInput()) || /*#__PURE__*/React__default__default["default"].createElement(OpenChannelInput, {
    ref: messageInputRef
  }));
};

var OpenChannel = function OpenChannel(props) {
  return /*#__PURE__*/React__default__default["default"].createElement(OpenChannelProvider, {
    channelUrl: props === null || props === void 0 ? void 0 : props.channelUrl,
    isMessageGroupingEnabled: props === null || props === void 0 ? void 0 : props.isMessageGroupingEnabled,
    queries: props === null || props === void 0 ? void 0 : props.queries,
    messageLimit: props === null || props === void 0 ? void 0 : props.messageLimit,
    onBeforeSendUserMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendUserMessage,
    onBeforeSendFileMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendFileMessage,
    onChatHeaderActionClick: props === null || props === void 0 ? void 0 : props.onChatHeaderActionClick,
    disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile,
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile
  }, /*#__PURE__*/React__default__default["default"].createElement(OpenChannelUI, {
    renderMessage: props === null || props === void 0 ? void 0 : props.renderMessage,
    renderHeader: props === null || props === void 0 ? void 0 : props.renderHeader,
    renderInput: props === null || props === void 0 ? void 0 : props.renderInput,
    renderPlaceHolderEmptyList: props === null || props === void 0 ? void 0 : props.renderPlaceHolderEmptyList,
    renderPlaceHolderError: props === null || props === void 0 ? void 0 : props.renderPlaceHolderError,
    renderPlaceHolderLoading: props === null || props === void 0 ? void 0 : props.renderPlaceHolderLoading
  }));
};

var css_248z$b = "@import url(\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap\");\nbody {\n  font-family: \"Roboto\", \"Verdana\", sans-serif;\n  font-size: 14px;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n:root {\n  --sendbird-light-primary-500: #491389;\n  --sendbird-light-primary-400: #6211c8;\n  --sendbird-light-primary-300: #742ddd;\n  --sendbird-light-primary-200: #c2a9fa;\n  --sendbird-light-primary-100: #dbd1ff;\n  --sendbird-light-secondary-500: #066858;\n  --sendbird-light-secondary-400: #027d69;\n  --sendbird-light-secondary-300: #259c72;\n  --sendbird-light-secondary-200: #69c085;\n  --sendbird-light-secondary-100: #a8e2ab;\n  --sendbird-light-information-100: #adc9ff;\n  --sendbird-light-error-500: #9d091e;\n  --sendbird-light-error-400: #bf0711;\n  --sendbird-light-error-300: #de360b;\n  --sendbird-light-error-200: #f66161;\n  --sendbird-light-error-100: #fdaaaa;\n  --sendbird-light-background-700: #000000;\n  --sendbird-light-background-600: #161616;\n  --sendbird-light-background-500: #2C2C2C;\n  --sendbird-light-background-400: #393939;\n  --sendbird-light-background-300: #bdbdbd;\n  --sendbird-light-background-200: #e0e0e0;\n  --sendbird-light-background-100: #eeeeee;\n  --sendbird-light-background-50: #FFFFFF;\n  --sendbird-light-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-light-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-light-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-light-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-light-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-light-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-light-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-light-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-light-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-light-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-light-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n:root {\n  --sendbird-dark-primary-500: #491389;\n  --sendbird-dark-primary-400: #6211c8;\n  --sendbird-dark-primary-300: #742ddd;\n  --sendbird-dark-primary-200: #c2a9fa;\n  --sendbird-dark-primary-100: #dbd1ff;\n  --sendbird-dark-secondary-500: #066858;\n  --sendbird-dark-secondary-400: #027d69;\n  --sendbird-dark-secondary-300: #259c72;\n  --sendbird-dark-secondary-200: #69c085;\n  --sendbird-dark-secondary-100: #a8e2ab;\n  --sendbird-dark-information-100: #adc9ff;\n  --sendbird-dark-error-500: #9d091e;\n  --sendbird-dark-error-400: #bf0711;\n  --sendbird-dark-error-300: #de360b;\n  --sendbird-dark-error-200: #f66161;\n  --sendbird-dark-error-100: #fdaaaa;\n  --sendbird-dark-background-700: #000000;\n  --sendbird-dark-background-600: #161616;\n  --sendbird-dark-background-500: #2C2C2C;\n  --sendbird-dark-background-400: #393939;\n  --sendbird-dark-background-300: #bdbdbd;\n  --sendbird-dark-background-200: #e0e0e0;\n  --sendbird-dark-background-100: #eeeeee;\n  --sendbird-dark-background-50: #FFFFFF;\n  --sendbird-dark-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-dark-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-dark-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-dark-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-dark-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-dark-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-dark-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-dark-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-dark-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-dark-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-dark-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n.create-event-view {\n  position: relative;\n  width: 480px;\n  padding: 20px;\n}\n.create-event-view .title {\n  font-size: 20px;\n  font-weight: 700;\n}\n.create-event-view .section-title {\n  font-size: 12px;\n  margin: 20px 0 10px 0;\n}\n.create-event-view .close {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n}\n.create-event-view .close:hover {\n  cursor: pointer;\n}\n.create-event-view .title-form {\n  width: 100%;\n  border: 1px #aaa solid;\n  border-radius: 3px;\n  padding: 10px 16px;\n  box-sizing: border-box;\n}\n.create-event-view .cover-image-box {\n  display: flex;\n  align-items: center;\n}\n.create-event-view .cover-image-box .cover-image-container {\n  display: flex;\n  width: 136px;\n  height: 80px;\n  background: #bbb;\n  margin-right: 16px;\n  justify-content: center;\n  align-items: center;\n}\n.create-event-view .cover-image-box .cover-image {\n  width: 136px;\n  height: 80px;\n}\n.create-event-view .cover-image-box .cover-image-file {\n  width: 0;\n  height: 0;\n}\n.create-event-view .cover-image-box .cover-image-upload {\n  text-decoration: underline;\n}\n.sendbird-theme--light .create-event-view .cover-image-box .cover-image-upload {\n  color: var(--sendbird-light-primary-400);\n}\n.sendbird-theme--dark .create-event-view .cover-image-box .cover-image-upload {\n  color: var(--sendbird-dark-primary-300);\n}\n.create-event-view .cover-image-box .cover-image-upload:hover {\n  cursor: pointer;\n}\n.create-event-view .cover-image-box .cover-image-remove {\n  margin-left: 16px;\n  text-decoration: underline;\n}\n.sendbird-theme--light .create-event-view .cover-image-box .cover-image-remove {\n  color: var(--sendbird-light-error-300);\n}\n.sendbird-theme--dark .create-event-view .cover-image-box .cover-image-remove {\n  color: var(--sendbird-dark-error-300);\n}\n.create-event-view .cover-image-box .cover-image-remove:hover {\n  cursor: pointer;\n}\n.create-event-view .button-box {\n  display: flex;\n  justify-content: right;\n}\n.create-event-view .button-box .minor-button, .create-event-view .button-box .major-button {\n  padding: 10px 12px;\n  margin: 5px;\n  border-radius: 4px;\n}\n.create-event-view .button-box .minor-button:hover, .create-event-view .button-box .major-button:hover {\n  cursor: pointer;\n  opacity: 0.9;\n}\n.create-event-view .button-box .major-button {\n  color: #fff;\n}\n.sendbird-theme--light .create-event-view .button-box .major-button {\n  background-color: var(--sendbird-light-primary-400);\n  border: 1px var(--sendbird-light-primary-400) solid;\n}\n.sendbird-theme--dark .create-event-view .button-box .major-button {\n  background-color: var(--sendbird-dark-primary-300);\n  border: 1px var(--sendbird-dark-primary-300) solid;\n}\n.create-event-view .button-box .major-button:disabled,\n.create-event-view .button-box .major-button[disabled] {\n  border: 1px #eee solid;\n  background: #eee;\n  color: rgba(0, 0, 0, 0.12);\n}\n.create-event-view .button-box .minor-button {\n  color: #333;\n  border: 1px #333 solid;\n  background-color: #fff;\n}\n\n.event-host-form .input {\n  display: flex;\n  max-height: 154px;\n  border: 1px #aaa solid;\n  border-radius: 3px;\n  padding: 6px 12px;\n  box-sizing: border-box;\n  align-content: flex-start;\n  overflow-y: auto;\n}\n.event-host-form .input .search-type-panel .search-type {\n  margin: 4px 4px 0 0;\n  padding: 4px 6px;\n  border: 0;\n}\n.event-host-form .input .form {\n  flex: 1;\n}\n.event-host-form .input .form .host-form {\n  min-width: 240px;\n  margin: 4px;\n  border: 0;\n}\n.event-host-form .input .form .host-form:focus {\n  outline: none;\n}\n.event-host-form .search-result {\n  position: relative;\n  top: -45px;\n}\n.event-host-form .search-result .users, .event-host-form .search-result .status {\n  background: #fff;\n  border-radius: 4px;\n  box-shadow: 0 3px 5px -3px rgba(0, 0, 0, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  overflow: hidden;\n}\n.event-host-form .search-result .status {\n  display: flex;\n  position: absolute;\n  height: 104px;\n  top: 0;\n  left: 0;\n  right: 0;\n  box-sizing: border-box;\n  align-items: center;\n  justify-content: center;\n}\n.event-host-form .search-result .status .no-result {\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.5);\n}\n.event-host-form .search-result .status .error {\n  font-size: 14px;\n  color: #de360b;\n}\n.event-host-form .search-result .users {\n  position: absolute;\n  max-height: 104px;\n  top: 0;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n}\n\n.event-host-status {\n  display: flex;\n  padding: 6px 4px;\n  margin-bottom: 10px;\n}\n.event-host-status .message {\n  flex: 1;\n  font-size: 12px;\n  color: #666;\n}\n.event-host-status .error {\n  color: #de360b;\n}\n.event-host-status .count {\n  font-size: 12px;\n  color: #666;\n  margin: 0 0 0 8px;\n}\n\n.event-host {\n  display: inline-flex;\n  flex-direction: row;\n  align-items: center;\n  background: #eee;\n  border-radius: 16px;\n  overflow: hidden;\n  margin: 4px;\n  vertical-align: middle;\n}\n.event-host .profile-image {\n  width: 24px;\n  height: 24px;\n  border-radius: 16px;\n  margin-right: -4px;\n  background: #fff;\n}\n.event-host .nickname {\n  font-size: 12px;\n  padding: 6px 10px;\n}\n.event-host .remove-button {\n  width: 18px;\n  height: 18px;\n  border-radius: 12px;\n}\n.event-host .remove-button:hover {\n  cursor: pointer;\n}\n\n.searched-user {\n  display: flex;\n  flex-direction: row;\n  background: #fff;\n  padding: 8px;\n}\n.searched-user:hover {\n  cursor: pointer;\n  background: #eee;\n}\n.searched-user .profile-image {\n  width: 32px;\n  height: 32px;\n  border-radius: 20px;\n  margin-right: 12px;\n  background-color: #bdbdbd;\n}\n.searched-user .info {\n  flex: 1;\n  align-items: center;\n}\n.searched-user .info .nickname {\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.88);\n}\n.searched-user .info .user-id {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.5);\n}";
styleInject(css_248z$b);

var _defs$5, _g$7;

function _extends$f() { _extends$f = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$f.apply(this, arguments); }

var SvgIconsUser = function SvgIconsUser(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$f({
    width: 24,
    height: 24,
    viewBox: "-4 -4 20 20",
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _defs$5 || (_defs$5 = /*#__PURE__*/React__default__namespace.createElement("defs", null, /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-user_svg__a"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M1368 0v4600H0V0h1368z"
  })), /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-user_svg__b"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M6.19 5.714c1.28 0 2.325 1.01 2.38 2.278l.001.103v.953a.476.476 0 0 1-.949.055l-.003-.055v-.953a1.43 1.43 0 0 0-1.345-1.426l-.084-.002H2.381c-.76 0-1.383.594-1.426 1.344l-.003.084v.953a.476.476 0 0 1-.949.055L0 9.048v-.953c0-1.28 1.01-2.324 2.278-2.379l.103-.002h3.81zM4.286 0a2.381 2.381 0 1 1 0 4.762 2.381 2.381 0 0 1 0-4.762zm0 .952a1.429 1.429 0 1 0 0 2.858 1.429 1.429 0 0 0 0-2.858z"
  })))), _g$7 || (_g$7 = /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-user_svg__a)",
    transform: "translate(-531 -1699)"
  }, /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-user_svg__b)",
    transform: "translate(532.714 1700.238)"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    fill: "rgba(210, 210, 210, 0.88)",
    d: "M0 0h8.571v9.524H0V0z"
  })))));
};

var _path$7;

function _extends$e() { _extends$e = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$e.apply(this, arguments); }

var SvgIconsClose = function SvgIconsClose(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$e({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _path$7 || (_path$7 = /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M52.552 11.448a2.667 2.667 0 0 1 .222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.667 2.667 0 0 1-3.52 3.993l-.251-.222L32 35.771 15.219 52.552a2.667 2.667 0 0 1-3.993-3.52l.222-.251L28.228 32l-16.78-16.781a2.667 2.667 0 0 1 3.52-3.993l.251.222 16.78 16.78 16.782-16.78a2.667 2.667 0 0 1 3.771 0z",
    fillRule: "evenodd"
  })));
};

function EventHostView(_a) {
    var key = _a.key, userId = _a.userId, _b = _a.nickname, nickname = _b === void 0 ? '' : _b, _c = _a.profileUrl, profileUrl = _c === void 0 ? '' : _c, _d = _a.hideProfile, hideProfile = _d === void 0 ? false : _d, _e = _a.onRemove, onRemove = _e === void 0 ? function () { } : _e;
    var profile = profileUrl ?
        React__default__default["default"].createElement("img", { src: profileUrl, className: 'profile-image' }) :
        React__default__default["default"].createElement(SvgIconsUser, { fill: '#ccc', className: 'profile-image' });
    return React__default__default["default"].createElement("div", { className: 'event-host', key: key },
        !hideProfile ? profile : null,
        React__default__default["default"].createElement("div", { className: 'nickname' }, nickname),
        React__default__default["default"].createElement("div", { className: 'remove-button', onClick: function () { return onRemove(userId); } },
            React__default__default["default"].createElement(SvgIconsClose, { viewBox: "0 -17 100 100", fill: '#888', width: 18, height: 18 })));
}

var _path$6;

function _extends$d() { _extends$d = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$d.apply(this, arguments); }

var SvgIconsInfo = function SvgIconsInfo(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$d({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _path$6 || (_path$6 = /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm1.667 21.333a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.334a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1h3.334zm-1.667-8a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z",
    fillRule: "evenodd"
  })));
};

function EventHostStatusView(_a) {
    var message = _a.message, count = _a.count, maxLength = _a.maxLength, _b = _a.error, error = _b === void 0 ? false : _b;
    return React__default__default["default"].createElement("div", { className: 'event-host-status' },
        React__default__default["default"].createElement("div", { className: "message ".concat(error ? 'error' : '') }, message),
        React__default__default["default"].createElement("div", { className: 'count' },
            React__default__default["default"].createElement("span", { className: "value ".concat(error ? 'error' : '') }, count),
            " / ",
            maxLength,
            " users"),
        React__default__default["default"].createElement(SvgIconsInfo, { width: 24, height: 24, viewBox: '-32 0 100 100', fill: '#666' }));
}

var _path$5;

function _extends$c() { _extends$c = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$c.apply(this, arguments); }

var SvgIconsSpinner = function SvgIconsSpinner(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$c({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _path$5 || (_path$5 = /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.839 2.839 0 1 0 5.677 0C8.344 18.935 18.935 8.344 32 8.344S55.656 18.935 55.656 32 45.065 55.656 32 55.656a2.839 2.839 0 1 0 0 5.677z",
    fillRule: "evenodd"
  })));
};

function EventHostSearchedUserView(_a) {
    var userId = _a.userId, _b = _a.nickname, nickname = _b === void 0 ? '' : _b, _c = _a.profileUrl, profileUrl = _c === void 0 ? '' : _c, _d = _a.onClick, onClick = _d === void 0 ? function () { } : _d;
    var profile = profileUrl ?
        React__default__default["default"].createElement("img", { src: profileUrl, className: 'profile-image' }) :
        React__default__default["default"].createElement(SvgIconsUser, { fill: '#fff', className: 'profile-image' });
    return React__default__default["default"].createElement("div", { className: 'searched-user', onClick: function () { return onClick(); } },
        profile,
        React__default__default["default"].createElement("div", { className: 'info' },
            React__default__default["default"].createElement("div", { className: 'nickname' }, nickname),
            React__default__default["default"].createElement("div", { className: 'user-id' }, userId)));
}

function EventHostSearchInput(_a) {
    var _b = _a.initialHostUsers, initialHostUsers = _b === void 0 ? [] : _b, _c = _a.maxHostLength, maxHostLength = _c === void 0 ? DEFAULT_MAX_HOST_LENGTH : _c, _d = _a.renderCustomEventHostView, renderCustomEventHostView = _d === void 0 ? EventHostView : _d, _e = _a.onUpdateHost, onUpdateHost = _e === void 0 ? function () { } : _e;
    var _f = React__default.useState([]), searchedUsers = _f[0], setSearchedUsers = _f[1];
    var _g = React__default.useState(0), searchVersion = _g[0], setSearchVersion = _g[1];
    var _h = React__default.useState(false), searching = _h[0], setSearching = _h[1];
    var _j = React__default.useState(false), searchError = _j[0], setSearchError = _j[1];
    var _k = React__default.useState(initialHostUsers), selectedUsers = _k[0], setSelectedUsers = _k[1];
    var _l = React__default.useState('nickname'), searchType = _l[0], setSearchType = _l[1];
    var _m = React__default.useState(''), typedText = _m[0], setTypedText = _m[1];
    var _o = React__default.useState(''), message = _o[0], setMessage = _o[1];
    var _p = React__default.useState(false), error = _p[0], setError = _p[1];
    var context = useSendbirdStateContext();
    React__default.useEffect(function () {
        setSelectedUsers(initialHostUsers);
    }, [initialHostUsers]);
    React__default.useEffect(function () {
        if (selectedUsers.length > maxHostLength) {
            setError(true);
            setMessage('The number of users allowed has exceeded.');
        }
        else {
            setError(false);
            setMessage('');
        }
    }, [selectedUsers]);
    var search = function (searchType, keyword) {
        var sb = sendbirdSelectors.getSdk(context);
        if (sb && keyword) {
            var query = null;
            switch (searchType) {
                case 'nickname': {
                    query = sb.createApplicationUserListQuery({ nicknameStartsWithFilter: keyword });
                    break;
                }
                case 'user ID': {
                    query = sb.createApplicationUserListQuery({ userIdsFilter: [keyword] });
                    break;
                }
            }
            if (query) {
                var currentSearchVersion_1 = searchVersion + 1;
                setSearchVersion(currentSearchVersion_1);
                setSearching(true);
                setSearchError(false);
                query.next()
                    .then(function (users) {
                    if (currentSearchVersion_1 >= searchVersion) {
                        setSearchedUsers(users);
                        setSearching(false);
                        setSearchError(false);
                        setSearchVersion(currentSearchVersion_1);
                    }
                })
                    .catch(function (err) {
                    if (currentSearchVersion_1 >= searchVersion) {
                        setSearching(false);
                        setSearchError(true);
                        setSearchVersion(currentSearchVersion_1);
                    }
                });
            }
        }
    };
    return React__default__default["default"].createElement("div", { className: 'event-host-form' },
        React__default__default["default"].createElement("div", { className: 'input' },
            React__default__default["default"].createElement("div", { className: 'search-type-panel' },
                React__default__default["default"].createElement("select", { className: 'search-type', value: searchType, onChange: function (event) {
                        var newSearchType = event.target.value;
                        setSearchType(newSearchType);
                        switch (newSearchType) {
                            case 'user ID':
                                setMessage('Only an exact match can be found.');
                                break;
                            default:
                                setMessage('');
                        }
                        setError(false);
                        search(newSearchType, typedText);
                    } },
                    React__default__default["default"].createElement("option", { value: 'nickname' }, "Nickname"),
                    React__default__default["default"].createElement("option", { value: 'user ID' }, "User ID"))),
            React__default__default["default"].createElement("div", { className: 'form' },
                selectedUsers.map(function (user) { return renderCustomEventHostView({
                    key: user.userId,
                    userId: user.userId,
                    nickname: user.nickname,
                    profileUrl: user.profileUrl,
                    onRemove: function (targetUserId) {
                        var updatedUsers = selectedUsers.filter(function (user) { return user.userId !== targetUserId; });
                        setSelectedUsers(updatedUsers);
                        onUpdateHost(updatedUsers.map(function (user) { return user.userId; }));
                    },
                }); }),
                React__default__default["default"].createElement("input", { type: 'text', placeholder: "Enter ".concat(searchType), className: 'host-form', value: typedText, onChange: function (event) {
                        var keyword = event.target.value;
                        setTypedText(keyword);
                        search(searchType, keyword);
                    } }))),
        React__default__default["default"].createElement(EventHostStatusView, { message: message, error: error, count: selectedUsers.length, maxLength: maxHostLength }),
        typedText ?
            React__default__default["default"].createElement("div", { className: 'search-result' }, searchedUsers.length > 0 ?
                React__default__default["default"].createElement("div", { className: 'users' }, searchedUsers.map(function (user) { return React__default__default["default"].createElement(EventHostSearchedUserView, { key: user.userId, userId: user.userId, nickname: user.nickname, profileUrl: user.profileUrl, onClick: function () {
                        if (!selectedUsers.map(function (user) { return user.userId; }).includes(user.userId)) {
                            setSelectedUsers(__spreadArray$1(__spreadArray$1([], selectedUsers, true), [user], false));
                        }
                        setTypedText('');
                        setSearchedUsers([]);
                        setSearchError(false);
                        setSearching(false);
                    } }); })) :
                React__default__default["default"].createElement("div", { className: 'status' },
                    searching ? React__default__default["default"].createElement(SvgIconsSpinner, { width: 24, height: 24, viewBox: '-18 -18 100 100', fill: '#333', className: 'spin' }) : null,
                    !searching && !searchError && searchedUsers.length === 0 ? React__default__default["default"].createElement("div", { className: 'no-result' },
                        "No matches found with ",
                        typedText) : null,
                    searchError ? React__default__default["default"].createElement("div", { className: 'error' }, "Search request failed.") : null)) :
            null);
}

function EventHostTextInput(_a) {
    var _b = _a.initialHostUsers, initialHostUsers = _b === void 0 ? [] : _b, _c = _a.maxHostLength, maxHostLength = _c === void 0 ? DEFAULT_MAX_HOST_LENGTH : _c, _d = _a.renderCustomEventHostView, renderCustomEventHostView = _d === void 0 ? EventHostView : _d, _e = _a.onUpdateHost, onUpdateHost = _e === void 0 ? function () { } : _e;
    var _f = React__default.useState([]), selectedUserIds = _f[0], setSelectedUserIds = _f[1];
    var _g = React__default.useState(''), typedText = _g[0], setTypedText = _g[1];
    var _h = React__default.useState(''), message = _h[0], setMessage = _h[1];
    var _j = React__default.useState(false), error = _j[0], setError = _j[1];
    React__default.useEffect(function () {
        setSelectedUserIds(initialHostUsers.map(function (user) { return user.userId; }));
    }, [initialHostUsers]);
    React__default.useEffect(function () {
        if (selectedUserIds.length > maxHostLength) {
            setError(true);
            setMessage('The number of users allowed has exceeded.');
        }
        else {
            setError(false);
            setMessage('If the ACL attributes are turned on, you can access user list information from the SDK.');
        }
    }, [selectedUserIds]);
    return React__default__default["default"].createElement("div", { className: 'event-host-form' },
        React__default__default["default"].createElement("div", { className: 'input' },
            React__default__default["default"].createElement("div", { className: 'form' },
                selectedUserIds.map(function (userId) { return renderCustomEventHostView({
                    key: userId,
                    userId: userId,
                    nickname: userId,
                    hideProfile: true,
                    onRemove: function (targetUserId) {
                        var updatedUserIds = selectedUserIds.filter(function (userId) { return userId !== targetUserId; });
                        setSelectedUserIds(updatedUserIds);
                        onUpdateHost(updatedUserIds);
                    },
                }); }),
                React__default__default["default"].createElement("input", { type: 'text', placeholder: 'Separate each user ID with a comma.', className: 'host-form', value: typedText, onChange: function (event) {
                        var _a;
                        var inputValue = event.target.value;
                        var userIds = inputValue.split(',');
                        setTypedText((_a = userIds.pop()) !== null && _a !== void 0 ? _a : '');
                        var addedUserIds = userIds.filter(function (userId, index) {
                            return userId.length > 0
                                && !selectedUserIds.includes(userId)
                                && userIds.indexOf(userId) === index;
                        });
                        if (addedUserIds.length > 0) {
                            var newlySelectedUserIds = __spreadArray$1(__spreadArray$1([], selectedUserIds, true), addedUserIds, true);
                            setSelectedUserIds(newlySelectedUserIds);
                        }
                    } }))),
        React__default__default["default"].createElement(EventHostStatusView, { message: message, error: error, count: selectedUserIds.length, maxLength: maxHostLength }));
}

var _defs$4, _g$6;

function _extends$b() { _extends$b = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$b.apply(this, arguments); }

var SvgIconsLive = function SvgIconsLive(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$b({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _defs$4 || (_defs$4 = /*#__PURE__*/React__default__namespace.createElement("defs", null, /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-live_svg__a"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M1368 0v1600H0V0h1368z"
  })), /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-live_svg__b"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M26.667 21.333A5.333 5.333 0 0 1 30 30.83v22.297a26.923 26.923 0 0 1-3.323.206h-.02a26.81 26.81 0 0 1-3.324-.206V30.83a5.333 5.333 0 0 1 3.333-9.497zm0-21.333c14.727 0 26.666 11.94 26.666 26.667 0 12.184-8.171 22.46-19.333 25.645V45.28c7.418-2.924 12.667-10.155 12.667-18.612 0-11.046-8.955-20-20-20-11.046 0-20 8.954-20 20 0 8.457 5.249 15.688 12.666 18.612v7.033C8.172 49.127 0 38.851 0 26.667 0 11.939 11.94 0 26.667 0zm0 10.667c8.836 0 16 7.163 16 16 0 6.193-3.52 11.565-8.667 14.224v-8.45a9.294 9.294 0 0 0 2-5.774 9.333 9.333 0 1 0-18.667 0c0 2.18.748 4.185 2 5.774v8.45c-5.147-2.66-8.666-8.03-8.666-14.224 0-8.837 7.163-16 16-16z"
  })))), _g$6 || (_g$6 = /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-live_svg__a)",
    transform: "translate(-1216 -336)"
  }, /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-live_svg__b)",
    transform: "translate(1221.333 341.333)"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    fill: "rgba(255, 255, 255, 1)",
    d: "M0 0h53.333v53.333H0V0z"
  })))));
};

var DEFAULT_MAX_HOST_LENGTH = 10;
function CreateEventView(_a) {
    var _this = this;
    var _b = _a.showUserIdsForHostSelectionView, showUserIdsForHostSelectionView = _b === void 0 ? true : _b, _c = _a.disableAcl, disableAcl = _c === void 0 ? false : _c, _d = _a.renderCustomEventHostView, renderCustomEventHostView = _d === void 0 ? EventHostView : _d, _e = _a.onClose, onClose = _e === void 0 ? function () { } : _e;
    var _f = React__default.useState(''), title = _f[0], setTitle = _f[1];
    var _g = React__default.useState(''), coverImagePath = _g[0], setCoverImagePath = _g[1];
    var coverImage = React__default.useRef(null);
    var coverImageFile = React__default.useRef(null);
    var stringSet = React__default.useContext(SendbirdLiveContext).stringSet;
    var context = useSendbirdStateContext();
    var sb = sendbirdSelectors.getSdk(context);
    var _h = React__default.useState([]), initialHostUsers = _h[0], setInitialHostUsers = _h[1];
    React__default.useEffect(function () {
        if (showUserIdsForHostSelectionView) {
            if (sb === null || sb === void 0 ? void 0 : sb.currentUser) {
                setInitialHostUsers([sb.currentUser]);
            }
        }
    }, [sb === null || sb === void 0 ? void 0 : sb.currentUser]);
    var _j = React__default.useState(initialHostUsers.map(function (user) { return user.userId; })), hostUserIds = _j[0], setHostUserIds = _j[1];
    var checkRequirement = function () { return title.length > 0; };
    return React__default__default["default"].createElement("div", { className: 'create-event-view' },
        React__default__default["default"].createElement("div", { className: 'close', onClick: function () { return onClose(); } },
            React__default__default["default"].createElement(SvgIconsClose, { width: 22, height: 22, viewBox: '0 0 60 60' })),
        React__default__default["default"].createElement("div", { className: 'title' }, stringSet.LIVE_EVENT_CREATE_EVENT_TITLE),
        React__default__default["default"].createElement("div", { className: 'section-title' }, stringSet.LIVE_EVENT_CREATE_EVENT_TITLE),
        React__default__default["default"].createElement("div", null,
            React__default__default["default"].createElement("input", { type: 'text', placeholder: stringSet.LIVE_EVENT_CREATE_EVENT_TITLE_PLACEHOLDER, className: 'title-form', value: title, onChange: function (event) {
                    setTitle(event.target.value);
                } })),
        React__default__default["default"].createElement("div", { className: 'section-title' }, stringSet.LIVE_EVENT_CREATE_EVENT_COVER_IMAGE_TITLE),
        React__default__default["default"].createElement("div", { className: 'cover-image-box' },
            React__default__default["default"].createElement("div", { className: 'cover-image-container', ref: coverImage }, !coverImagePath ?
                React__default__default["default"].createElement(SvgIconsLive, { viewBox: '0 0 64 64', width: 32, height: 32, fill: '#fff' }) :
                React__default__default["default"].createElement("img", { src: coverImagePath, alt: 'Cover image', className: 'cover-image' })),
            React__default__default["default"].createElement("input", { type: 'file', className: 'cover-image-file', ref: coverImageFile, accept: 'image/*', onChange: function () {
                    var _a;
                    var target = coverImageFile.current;
                    var files = (_a = target === null || target === void 0 ? void 0 : target.files) !== null && _a !== void 0 ? _a : [];
                    if (files.length === 1) {
                        var reader_1 = new FileReader();
                        reader_1.onload = function () {
                            if (coverImage.current) {
                                setCoverImagePath(reader_1.result);
                            }
                        };
                        reader_1.readAsDataURL(files[0]);
                    }
                } }),
            React__default__default["default"].createElement("div", { className: 'cover-image-upload', onClick: function () { coverImageFile.current.click(); } }, stringSet.LIVE_EVENT_CREATE_EVENT_COVER_IMAGE_BUTTON),
            React__default__default["default"].createElement("div", { className: 'cover-image-remove', onClick: function () {
                    if (coverImageFile.current)
                        coverImageFile.current.value = '';
                    setCoverImagePath('');
                } }, stringSet.REMOVE_IMAGE)),
        React__default__default["default"].createElement("div", { className: 'section-title' }, stringSet.LIST_USERS_FOR_HOST_HEADER_TITLE),
        !disableAcl ?
            React__default__default["default"].createElement(EventHostSearchInput, { initialHostUsers: initialHostUsers, renderCustomEventHostView: renderCustomEventHostView, onUpdateHost: function (userIds) { return setHostUserIds(userIds); } }) :
            React__default__default["default"].createElement(EventHostTextInput, { initialHostUsers: initialHostUsers, renderCustomEventHostView: renderCustomEventHostView, onUpdateHost: function (userIds) { return setHostUserIds(userIds); } }),
        React__default__default["default"].createElement("div", { className: 'button-box' },
            React__default__default["default"].createElement("input", { type: 'button', className: 'minor-button', value: 'Cancel', onClick: function () { return onClose(); } }),
            React__default__default["default"].createElement("input", { type: 'button', className: 'major-button', value: stringSet.LIVE_EVENT_CREATE_HEADER_BUTTON, disabled: !checkRequirement(), onClick: function () { return __awaiter(_this, void 0, void 0, function () {
                    var liveEvent;
                    var _a, _b;
                    return __generator(this, function (_c) {
                        switch (_c.label) {
                            case 0: return [4 /*yield*/, sendbirdLive_min.exports.SendbirdLive.createLiveEvent({
                                    userIdsForHost: __spreadArray$1([], hostUserIds, true),
                                    title: title,
                                    coverFile: (_b = (_a = coverImageFile === null || coverImageFile === void 0 ? void 0 : coverImageFile.current) === null || _a === void 0 ? void 0 : _a.files) === null || _b === void 0 ? void 0 : _b[0]
                                })];
                            case 1:
                                liveEvent = _c.sent();
                                return [4 /*yield*/, liveEvent.enterAsHost({ turnAudioOn: true, turnVideoOn: true })];
                            case 2:
                                _c.sent();
                                onClose(liveEvent);
                                return [2 /*return*/];
                        }
                    });
                }); } })));
}

var css_248z$a = "@import url(\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap\");\nbody {\n  font-family: \"Roboto\", \"Verdana\", sans-serif;\n  font-size: 14px;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n:root {\n  --sendbird-light-primary-500: #491389;\n  --sendbird-light-primary-400: #6211c8;\n  --sendbird-light-primary-300: #742ddd;\n  --sendbird-light-primary-200: #c2a9fa;\n  --sendbird-light-primary-100: #dbd1ff;\n  --sendbird-light-secondary-500: #066858;\n  --sendbird-light-secondary-400: #027d69;\n  --sendbird-light-secondary-300: #259c72;\n  --sendbird-light-secondary-200: #69c085;\n  --sendbird-light-secondary-100: #a8e2ab;\n  --sendbird-light-information-100: #adc9ff;\n  --sendbird-light-error-500: #9d091e;\n  --sendbird-light-error-400: #bf0711;\n  --sendbird-light-error-300: #de360b;\n  --sendbird-light-error-200: #f66161;\n  --sendbird-light-error-100: #fdaaaa;\n  --sendbird-light-background-700: #000000;\n  --sendbird-light-background-600: #161616;\n  --sendbird-light-background-500: #2C2C2C;\n  --sendbird-light-background-400: #393939;\n  --sendbird-light-background-300: #bdbdbd;\n  --sendbird-light-background-200: #e0e0e0;\n  --sendbird-light-background-100: #eeeeee;\n  --sendbird-light-background-50: #FFFFFF;\n  --sendbird-light-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-light-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-light-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-light-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-light-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-light-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-light-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-light-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-light-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-light-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-light-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n:root {\n  --sendbird-dark-primary-500: #491389;\n  --sendbird-dark-primary-400: #6211c8;\n  --sendbird-dark-primary-300: #742ddd;\n  --sendbird-dark-primary-200: #c2a9fa;\n  --sendbird-dark-primary-100: #dbd1ff;\n  --sendbird-dark-secondary-500: #066858;\n  --sendbird-dark-secondary-400: #027d69;\n  --sendbird-dark-secondary-300: #259c72;\n  --sendbird-dark-secondary-200: #69c085;\n  --sendbird-dark-secondary-100: #a8e2ab;\n  --sendbird-dark-information-100: #adc9ff;\n  --sendbird-dark-error-500: #9d091e;\n  --sendbird-dark-error-400: #bf0711;\n  --sendbird-dark-error-300: #de360b;\n  --sendbird-dark-error-200: #f66161;\n  --sendbird-dark-error-100: #fdaaaa;\n  --sendbird-dark-background-700: #000000;\n  --sendbird-dark-background-600: #161616;\n  --sendbird-dark-background-500: #2C2C2C;\n  --sendbird-dark-background-400: #393939;\n  --sendbird-dark-background-300: #bdbdbd;\n  --sendbird-dark-background-200: #e0e0e0;\n  --sendbird-dark-background-100: #eeeeee;\n  --sendbird-dark-background-50: #FFFFFF;\n  --sendbird-dark-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-dark-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-dark-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-dark-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-dark-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-dark-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-dark-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-dark-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-dark-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-dark-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-dark-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n.dark-background {\n  background: #333 !important;\n}\n\n.host-view {\n  display: flex;\n  flex-grow: 1;\n}\n.host-view .host-view__main {\n  width: 100%;\n  height: 100%;\n  background-color: var(--sendbird-dark-background-700);\n}\n.host-view .host-view__main .video-wrapper {\n  position: relative;\n  width: 100%;\n}\n.host-view .host-view__main .video-wrapper:before {\n  display: block;\n  content: \"\";\n  padding-top: 56.25%; /*What you want the height to be in relation to the width*/\n}\n.host-view .host-view__main .video-wrapper .host-view__video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.host-view .host-view__main .host-view__info {\n  display: flex;\n  padding-top: 16px;\n  background-color: var(--sendbird-dark-background-600);\n}\n.host-view .host-view__main .host-view__info .host-view__profile {\n  width: 56px;\n  height: 56px;\n  margin: 0 16px 12px;\n  border-radius: 50%;\n  background-color: var(--sendbird-dark-background-300);\n}\n.host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state, .host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state--ended, .host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state--ongoing, .host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state--ready, .host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state--created {\n  width: fit-content;\n  box-sizing: border-box;\n  height: 20px;\n  margin-right: 8px;\n  padding: 4px;\n  border-radius: 2px;\n  font-size: 12px;\n  font-weight: bold;\n  line-height: 1;\n}\n.host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state--created {\n  background-color: var(--sendbird-light-primary-100);\n  color: #6211c8;\n}\n.host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state--ready {\n  background-color: #c8d9fa;\n  color: #30308f;\n}\n.host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state--ongoing {\n  background-color: var(--sendbird-light-error-300);\n  color: rgba(255, 255, 255, 0.88);\n}\n.host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state--ended {\n  color: rgba(0, 0, 0, 0.5);\n}\n.sendbird-theme--light .host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state--ended {\n  background-color: var(--sendbird-light-background-200);\n}\n.sendbird-theme--dark .host-view .host-view__main .host-view__info .host-view__info__wrapper .event-state--ended {\n  background-color: var(--sendbird-dark-background-400);\n}\n.host-view .host-view__main .host-view__info .host-view__info__wrapper .host-view__title__wrapper {\n  display: flex;\n  align-items: center;\n}\n.host-view .host-view__main .host-view__info .host-view__info__wrapper .host-view__title__wrapper .host-view__title {\n  font-size: 20px;\n  font-weight: 700;\n  line-height: 1.43;\n  color: rgba(255, 255, 255, 0.88);\n}\n.host-view .host-view__main .host-view__info .host-view__info__wrapper .host-view__detail {\n  margin-top: 4px;\n  font-size: 14px;\n  line-height: 1.43;\n  color: rgba(255, 255, 255, 0.5);\n}\n.host-view .host-view__main .host-view__info .host-view__info__wrapper .host-view__host-name {\n  margin-top: 16px;\n  font-size: 14px;\n  font-weight: 700;\n  line-height: 1.43;\n  color: rgba(255, 255, 255, 0.88);\n}";
styleInject(css_248z$a);

var _path$4;

function _extends$a() { _extends$a = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$a.apply(this, arguments); }

var SvgIconsSettingsFilled = function SvgIconsSettingsFilled(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$a({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _path$4 || (_path$4 = /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M32 2.667A5.333 5.333 0 0 1 37.333 8v.24A4.4 4.4 0 0 0 40 12.267a4.4 4.4 0 0 0 4.853-.88l.16-.16a5.333 5.333 0 0 1 7.547 0 5.333 5.333 0 0 1 0 7.546l-.16.16a4.4 4.4 0 0 0-.88 4.854V24a4.4 4.4 0 0 0 4.027 2.667H56a5.333 5.333 0 1 1 0 10.666h-.24A4.4 4.4 0 0 0 51.733 40a4.4 4.4 0 0 0 .88 4.853l.16.16a5.333 5.333 0 0 1 0 7.547 5.333 5.333 0 0 1-7.546 0l-.16-.16a4.4 4.4 0 0 0-4.854-.88 4.4 4.4 0 0 0-2.666 4.027V56a5.333 5.333 0 0 1-10.667 0v-.24A4.4 4.4 0 0 0 24 51.733a4.4 4.4 0 0 0-4.853.88l-.16.16a5.333 5.333 0 0 1-7.547 0 5.333 5.333 0 0 1 0-7.546l.16-.16a4.4 4.4 0 0 0 .88-4.854 4.4 4.4 0 0 0-4.027-2.666H8A5.333 5.333 0 0 1 8 26.88h.24A4.4 4.4 0 0 0 12.267 24a4.4 4.4 0 0 0-.88-4.853l-.16-.16a5.333 5.333 0 0 1 0-7.547 5.333 5.333 0 0 1 7.546 0l.16.16a4.4 4.4 0 0 0 4.854.88H24a4.4 4.4 0 0 0 2.667-4.027V8A5.333 5.333 0 0 1 32 2.667zM32 24a8 8 0 1 0 0 16 8 8 0 0 0 0-16z",
    fillRule: "evenodd"
  })));
};

var _defs$3, _g$5;

function _extends$9() { _extends$9 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$9.apply(this, arguments); }

var SvgIconsCameraFilled = function SvgIconsCameraFilled(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$9({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _defs$3 || (_defs$3 = /*#__PURE__*/React__default__namespace.createElement("defs", null, /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-camera-filled_svg__a"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M1368 0v1600H0V0h1368z"
  })), /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-camera-filled_svg__b"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M37.333 0a5.333 5.333 0 0 1 5.334 5.333v8L56.594 4.05a1.333 1.333 0 0 1 2.073 1.109v32.35a1.333 1.333 0 0 1-2.073 1.11l-13.927-9.285v8a5.333 5.333 0 0 1-5.334 5.334h-32A5.333 5.333 0 0 1 0 37.333v-32A5.333 5.333 0 0 1 5.333 0h32z"
  })))), _g$5 || (_g$5 = /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-camera-filled_svg__a)",
    transform: "translate(-208 -336)"
  }, /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-camera-filled_svg__b)",
    transform: "translate(210.667 346.667)"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M0 0h58.667v42.667H0V0z"
  })))));
};

var _defs$2, _g$4;

function _extends$8() { _extends$8 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$8.apply(this, arguments); }

var SvgIconsCameraOffFilled = function SvgIconsCameraOffFilled(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$8({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _defs$2 || (_defs$2 = /*#__PURE__*/React__default__namespace.createElement("defs", null, /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-camera-off-filled_svg__a"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M1368 0v1600H0V0h1368z"
  })), /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-camera-off-filled_svg__b"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "m4.301.56.251.221L57.35 53.578a2.667 2.667 0 0 1-3.52 3.993l-.252-.221-11.007-11.008a5.335 5.335 0 0 1-5.238 4.325h-32A5.333 5.333 0 0 1 0 45.333v-32c0-2.6 1.862-4.767 4.325-5.238L.781 4.552A2.667 2.667 0 0 1 4.301.56zM37.333 8a5.333 5.333 0 0 1 5.334 5.333v8l13.927-9.284a1.333 1.333 0 0 1 2.073 1.109v32.35c0 .195-.042.379-.116.545L20.497 8h16.836z"
  })))), _g$4 || (_g$4 = /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-camera-off-filled_svg__a)",
    transform: "translate(-352 -336)"
  }, /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-camera-off-filled_svg__b)",
    transform: "translate(354.667 338.667)"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M0 0h58.667v58.13H0V0z"
  })))));
};

var _defs$1, _g$3;

function _extends$7() { _extends$7 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$7.apply(this, arguments); }

var SvgIconsMicFilled = function SvgIconsMicFilled(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$7({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _defs$1 || (_defs$1 = /*#__PURE__*/React__default__namespace.createElement("defs", null, /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-mic-filled_svg__a"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M1368 0v1600H0V0h1368z"
  })), /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-mic-filled_svg__b"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M34.667 24a2.667 2.667 0 0 1 2.648 2.356l.018.31V32c0 9.408-6.96 17.19-16.01 18.48l.01.187v2.666h5.334a2.667 2.667 0 0 1 .31 5.316l-.31.018h-16a2.667 2.667 0 0 1-.311-5.316l.31-.018H16v-2.666c0-.064.002-.127.007-.19C7.164 49.218.319 41.759.01 32.643L0 32v-5.333a2.667 2.667 0 0 1 5.315-.311l.018.31V32c0 7.364 5.97 13.333 13.334 13.333 7.17 0 13.018-5.66 13.32-12.755L32 32v-5.333A2.667 2.667 0 0 1 34.667 24zm-16-24a8 8 0 0 1 8 8v24a8 8 0 1 1-16 0V8a8 8 0 0 1 8-8z"
  })))), _g$3 || (_g$3 = /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-mic-filled_svg__a)",
    transform: "translate(-496 -336)"
  }, /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-mic-filled_svg__b)",
    transform: "translate(509.79 339.124)"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M0 0h37.333v58.667H0V0z"
  })))));
};

var _defs, _g$2;

function _extends$6() { _extends$6 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$6.apply(this, arguments); }

var SvgIconsMicOffFilled = function SvgIconsMicOffFilled(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$6({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _defs || (_defs = /*#__PURE__*/React__default__namespace.createElement("defs", null, /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-mic-off-filled_svg__a"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M1368 0v1600H0V0h1368z"
  })), /*#__PURE__*/React__default__namespace.createElement("clipPath", {
    id: "icons-mic-off-filled_svg__b"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "m4.301.56.251.221L57.35 53.578a2.667 2.667 0 0 1-3.52 3.993l-.252-.221-11.152-11.152a18.602 18.602 0 0 1-9.98 4.739l.012.187v2.667h5.333a2.667 2.667 0 0 1 .31 5.315l-.31.018h-16a2.667 2.667 0 0 1-.311-5.315l.31-.018h5.334v-2.667c0-.063.002-.126.007-.189-8.843-1.26-15.688-8.72-15.996-17.836l-.01-.641v-5.334a2.667 2.667 0 0 1 5.315-.31l.018.31v5.334c0 7.363 5.97 13.333 13.333 13.333 3.4 0 6.504-1.273 8.86-3.37l-3.783-3.781a8 8 0 0 1-13.078-6.182V25.56L.781 4.552A2.667 2.667 0 0 1 4.301.56zm41.49 23.898a2.667 2.667 0 0 1 2.649 2.355l.018.311v5.334c0 1.099-.095 2.176-.278 3.223l-5.056-5.055v-3.502a2.667 2.667 0 0 1 2.667-2.666zm-16-24a8 8 0 0 1 8 8v16.834l-16-16v-.834a8 8 0 0 1 8-8z"
  })))), _g$2 || (_g$2 = /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-mic-off-filled_svg__a)",
    transform: "translate(-640 -336)"
  }, /*#__PURE__*/React__default__namespace.createElement("g", {
    clipPath: "url(#icons-mic-off-filled_svg__b)",
    transform: "translate(642.667 338.667)"
  }, /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M0 0h58.13v59.124H0V0z"
  })))));
};

var css_248z$9 = "@import url(\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap\");\nbody {\n  font-family: \"Roboto\", \"Verdana\", sans-serif;\n  font-size: 14px;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n:root {\n  --sendbird-light-primary-500: #491389;\n  --sendbird-light-primary-400: #6211c8;\n  --sendbird-light-primary-300: #742ddd;\n  --sendbird-light-primary-200: #c2a9fa;\n  --sendbird-light-primary-100: #dbd1ff;\n  --sendbird-light-secondary-500: #066858;\n  --sendbird-light-secondary-400: #027d69;\n  --sendbird-light-secondary-300: #259c72;\n  --sendbird-light-secondary-200: #69c085;\n  --sendbird-light-secondary-100: #a8e2ab;\n  --sendbird-light-information-100: #adc9ff;\n  --sendbird-light-error-500: #9d091e;\n  --sendbird-light-error-400: #bf0711;\n  --sendbird-light-error-300: #de360b;\n  --sendbird-light-error-200: #f66161;\n  --sendbird-light-error-100: #fdaaaa;\n  --sendbird-light-background-700: #000000;\n  --sendbird-light-background-600: #161616;\n  --sendbird-light-background-500: #2C2C2C;\n  --sendbird-light-background-400: #393939;\n  --sendbird-light-background-300: #bdbdbd;\n  --sendbird-light-background-200: #e0e0e0;\n  --sendbird-light-background-100: #eeeeee;\n  --sendbird-light-background-50: #FFFFFF;\n  --sendbird-light-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-light-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-light-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-light-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-light-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-light-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-light-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-light-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-light-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-light-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-light-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n:root {\n  --sendbird-dark-primary-500: #491389;\n  --sendbird-dark-primary-400: #6211c8;\n  --sendbird-dark-primary-300: #742ddd;\n  --sendbird-dark-primary-200: #c2a9fa;\n  --sendbird-dark-primary-100: #dbd1ff;\n  --sendbird-dark-secondary-500: #066858;\n  --sendbird-dark-secondary-400: #027d69;\n  --sendbird-dark-secondary-300: #259c72;\n  --sendbird-dark-secondary-200: #69c085;\n  --sendbird-dark-secondary-100: #a8e2ab;\n  --sendbird-dark-information-100: #adc9ff;\n  --sendbird-dark-error-500: #9d091e;\n  --sendbird-dark-error-400: #bf0711;\n  --sendbird-dark-error-300: #de360b;\n  --sendbird-dark-error-200: #f66161;\n  --sendbird-dark-error-100: #fdaaaa;\n  --sendbird-dark-background-700: #000000;\n  --sendbird-dark-background-600: #161616;\n  --sendbird-dark-background-500: #2C2C2C;\n  --sendbird-dark-background-400: #393939;\n  --sendbird-dark-background-300: #bdbdbd;\n  --sendbird-dark-background-200: #e0e0e0;\n  --sendbird-dark-background-100: #eeeeee;\n  --sendbird-dark-background-50: #FFFFFF;\n  --sendbird-dark-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-dark-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-dark-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-dark-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-dark-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-dark-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-dark-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-dark-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-dark-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-dark-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-dark-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n.control-bar {\n  display: flex;\n  align-items: center;\n  background-color: var(--sendbird-dark-background-600);\n}\n.control-bar .control-bar__left-buttons {\n  display: flex;\n  margin-left: 16px;\n}\n.control-bar .control-bar__left-buttons .control-bar__settings {\n  width: 22px;\n  height: 22px;\n  margin: 12px 27px 0 0;\n  cursor: pointer;\n}\n.control-bar .control-bar__left-buttons .control-bar__video {\n  width: 22px;\n  height: 22px;\n  margin: 12px 27px 0 0;\n  cursor: pointer;\n}\n.control-bar .control-bar__left-buttons .control-bar__audio__wrapper {\n  display: flex;\n  margin: 12px 0;\n}\n.control-bar .control-bar__left-buttons .control-bar__audio__wrapper .control-bar__audio {\n  margin-right: 4px;\n  width: 22px;\n  height: 22px;\n  cursor: pointer;\n}\n.control-bar .control-bar__right-buttons {\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n  margin-right: 16px;\n}\n.control-bar .control-bar__right-buttons .participant-icon, .control-bar .control-bar__right-buttons .participant-icon--red {\n  width: 8px;\n  height: 8px;\n  margin: 0 4px;\n  border-radius: 50%;\n}\n.control-bar .control-bar__right-buttons .participant-icon--red {\n  background-color: var(--sendbird-dark-error-300);\n}\n.control-bar .control-bar__right-buttons .control-bar__duration {\n  font-size: 14px;\n  color: rgba(255, 255, 255, 0.88);\n}\n.control-bar .control-bar__right-buttons .control-bar__start-live, .control-bar .control-bar__right-buttons .control-bar__end-live {\n  padding: 6px 16px;\n  font-size: 14px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.88);\n  cursor: pointer;\n}\n.control-bar .control-bar__right-buttons .control-bar__end-live {\n  background-color: var(--sendbird-dark-primary-200);\n}\n.control-bar .control-bar__right-buttons .control-bar__start-live {\n  background-color: var(--sendbird-dark-error-200);\n}";
styleInject(css_248z$9);

var css_248z$8 = ".settings {\n  width: 480px;\n}\n.settings .title {\n  font-size: 20px;\n  font-weight: 700;\n}\n.settings .close {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  cursor: pointer;\n}\n.settings .settings__select-container {\n  margin-top: 20px;\n}\n.settings .settings__select-container .settings__select-label {\n  font-size: 12px;\n  line-height: 1;\n}\n.settings .settings__select-container .settings__select-button {\n  width: 100%;\n  height: 40px;\n  margin-top: 8px;\n  padding: 10px 12px 10px 16px;\n  border-radius: 4px;\n  border: solid 1px rgba(255, 255, 255, 0.38);\n}";
styleInject(css_248z$8);

function Settings(props) {
    var liveEvent = props.liveEvent, onClose = props.onClose;
    return (React__default__default["default"].createElement("div", { className: "settings" },
        React__default__default["default"].createElement("div", { className: 'close', onClick: function () { return onClose(); } },
            React__default__default["default"].createElement(SvgIconsClose, { width: 22, height: 22, viewBox: '0 0 60 60' })),
        React__default__default["default"].createElement("div", { className: 'title' }, "Settings"),
        React__default__default["default"].createElement("div", { className: "settings__select-container" },
            React__default__default["default"].createElement("div", { className: "settings__select-label" }, "Camera"),
            React__default__default["default"].createElement("select", { id: "camera-select", className: "settings__select-button", onChange: function (e) {
                    var value = e.target.value;
                    var mediaInfo = sendbirdLive_min.exports.SendbirdLive.getAvailableVideoInputDevices().find(function (device) { return device.deviceId === value; });
                    if (mediaInfo)
                        liveEvent.selectVideoInput(mediaInfo);
                } }, sendbirdLive_min.exports.SendbirdLive.getAvailableVideoInputDevices().map(function (info) { return (React__default__default["default"].createElement("option", { key: info.deviceId, value: info.deviceId }, info.label)); }))),
        React__default__default["default"].createElement("div", { className: "settings__select-container" },
            React__default__default["default"].createElement("div", { className: "settings__select-label" }, "Microphone"),
            React__default__default["default"].createElement("select", { id: "microphone-select", className: "settings__select-button", onChange: function (e) {
                    var value = e.target.value;
                    var mediaInfo = sendbirdLive_min.exports.SendbirdLive.getAvailableAudioInputDevices().find(function (device) { return device.deviceId === value; });
                    if (mediaInfo)
                        liveEvent.selectAudioInput(mediaInfo);
                } }, sendbirdLive_min.exports.SendbirdLive.getAvailableAudioInputDevices().map(function (info) { return (React__default__default["default"].createElement("option", { key: info.deviceId, value: info.deviceId }, info.label)); })))));
}

function ControlBar(props) {
    var _this = this;
    var liveEvent = props.liveEvent, onStart = props.onStart, onEnd = props.onEnd;
    var _a = React__default.useState(liveEvent.state === sendbirdLive_min.exports.LiveEventState.ONGOING), ongoing = _a[0], setOngoing = _a[1];
    var _b = React__default.useState(0), duration = _b[0], setDuration = _b[1];
    var _c = React__default.useState(true), audio = _c[0], setAudio = _c[1];
    var _d = React__default.useState(true), video = _d[0], setVideo = _d[1];
    var _e = useModal(''), SettingsModal = _e[0], openSettingsModal = _e[1], closeSettingsModal = _e[2];
    var stringSet = React__default.useContext(SendbirdLiveContext).stringSet;
    React__default.useEffect(function () {
        var interval = setInterval(function () {
            setDuration(liveEvent.duration);
        }, 1000);
        return function () { return clearInterval(interval); };
    }, []);
    var startLiveEvent = function () { return __awaiter(_this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, liveEvent.startEvent({ turnAudioOn: true, turnVideoOn: true })];
                case 1:
                    _a.sent();
                    setOngoing(true);
                    onStart(liveEvent);
                    return [2 /*return*/];
            }
        });
    }); };
    var toggleVideo = function (on) {
        on ? liveEvent.startVideo() : liveEvent.stopVideo();
        setVideo(on);
    };
    var toggleAudio = function (on) {
        on ? liveEvent.unmuteAudioInput() : liveEvent.muteAudioInput();
        setAudio(on);
    };
    function padTo2Digits(num) {
        return num.toString().padStart(2, '0');
    }
    function getHHMMSS(milliseconds) {
        var seconds = Math.floor(milliseconds / 1000);
        var minutes = Math.floor(seconds / 60);
        var hours = Math.floor(minutes / 60);
        seconds = seconds % 60;
        minutes = minutes % 60;
        return "".concat(padTo2Digits(hours), ":").concat(padTo2Digits(minutes), ":").concat(padTo2Digits(seconds));
    }
    return (React__default__default["default"].createElement("div", { className: "control-bar" },
        React__default__default["default"].createElement("div", { className: "control-bar__left-buttons" },
            React__default__default["default"].createElement("div", { className: "control-bar__settings" },
                React__default__default["default"].createElement(SvgIconsSettingsFilled, { viewBox: "0 0 64 64", width: 22, height: 22, fill: "#ccc", onClick: function () { return openSettingsModal(); } })),
            React__default__default["default"].createElement("div", { className: "control-bar__video" }, video
                ? React__default__default["default"].createElement(SvgIconsCameraFilled, { viewBox: "0 0 64 64", width: 22, height: 22, fill: "#ccc", onClick: function () { return toggleVideo(false); } })
                : React__default__default["default"].createElement(SvgIconsCameraOffFilled, { viewBox: "0 0 64 64", width: 22, height: 22, fill: "#ccc", onClick: function () { return toggleVideo(true); } })),
            React__default__default["default"].createElement("div", { className: "control-bar__audio__wrapper" },
                React__default__default["default"].createElement("div", { className: "control-bar__audio" }, audio
                    ? React__default__default["default"].createElement(SvgIconsMicFilled, { viewBox: "0 0 64 64", width: 22, height: 22, fill: "#ccc", onClick: function () { return toggleAudio(false); } })
                    : React__default__default["default"].createElement(SvgIconsMicOffFilled, { viewBox: "0 0 64 64", width: 22, height: 22, fill: "#ccc", onClick: function () { return toggleAudio(true); } })),
                React__default__default["default"].createElement("div", { className: "control-bar__volume" }))),
        React__default__default["default"].createElement("div", { className: "control-bar__right-buttons" },
            ongoing && React__default__default["default"].createElement("div", { className: "participant-icon--red" }),
            ongoing && React__default__default["default"].createElement("div", { className: "control-bar__duration" }, getHHMMSS(duration)),
            ongoing
                ? React__default__default["default"].createElement("div", { className: "control-bar__end-live", onClick: function () { onEnd(liveEvent); } }, stringSet.LIVE_EVENT_END_DIALOG_OPTION_END)
                : React__default__default["default"].createElement("div", { className: "control-bar__start-live", onClick: startLiveEvent }, stringSet.START_LIVE_EVENT_HEADER_BUTTON)),
        React__default__default["default"].createElement(SettingsModal, null,
            React__default__default["default"].createElement(Settings, { liveEvent: liveEvent, onClose: function () {
                    closeSettingsModal();
                } }))));
}

var css_248z$7 = ".confirm-end-dialog {\n  width: 480px;\n  padding: 18px 24px;\n  background: #333;\n  color: #fff;\n}\n.confirm-end-dialog .header {\n  display: flex;\n  align-items: center;\n}\n.confirm-end-dialog .header .title {\n  flex: 1;\n  font-size: 18px;\n}\n.confirm-end-dialog .header .close:hover {\n  cursor: pointer;\n}\n.confirm-end-dialog .buttons {\n  display: flex;\n  flex-direction: row;\n  justify-content: right;\n  padding-top: 50px;\n}\n.confirm-end-dialog .buttons .major-button, .confirm-end-dialog .buttons .minor-button {\n  margin-left: 8px;\n  padding: 10px 16px;\n  border-radius: 4px;\n}\n.confirm-end-dialog .buttons .major-button:hover, .confirm-end-dialog .buttons .minor-button:hover {\n  cursor: pointer;\n  opacity: 0.9;\n}\n.confirm-end-dialog .buttons .minor-button {\n  border: solid 1px rgba(255, 255, 255, 0.38);\n}\n.confirm-end-dialog .buttons .major-button {\n  background-color: #f66161;\n}";
styleInject(css_248z$7);

function ConfirmEndDialog(_a) {
    var _b = _a.onExit, onExit = _b === void 0 ? function () { } : _b, _c = _a.onClose, onClose = _c === void 0 ? function () { } : _c;
    var stringSet = React__default.useContext(SendbirdLiveContext).stringSet;
    return React__default__default["default"].createElement("div", { className: 'confirm-end-dialog' },
        React__default__default["default"].createElement("div", { className: 'header' },
            React__default__default["default"].createElement("div", { className: 'title' }, stringSet.LIVE_EVENT_END_DIALOG_DESCRIPTION),
            React__default__default["default"].createElement("div", { className: 'close', onClick: function () { return onClose(); } },
                React__default__default["default"].createElement(SvgIconsClose, { width: 22, height: 22, viewBox: '0 0 60 60', fill: '#fff' }))),
        React__default__default["default"].createElement("div", { className: 'buttons' },
            React__default__default["default"].createElement("div", { className: 'minor-button', onClick: function () { return onClose(); } }, "Cancel"),
            React__default__default["default"].createElement("div", { className: 'minor-button', onClick: function () { return onExit(false); } }, stringSet.LIVE_EVENT_END_DIALOG_OPTION_EXIT),
            React__default__default["default"].createElement("div", { className: 'major-button', onClick: function () { return onExit(true); } }, stringSet.LIVE_EVENT_END_DIALOG_OPTION_END)));
}

function toInteger(dirtyNumber) {
  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {
    return NaN;
  }

  var number = Number(dirtyNumber);

  if (isNaN(number)) {
    return number;
  }

  return number < 0 ? Math.ceil(number) : Math.floor(number);
}

function requiredArgs(required, args) {
  if (args.length < required) {
    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');
  }
}

function _typeof$1(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof$1 = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof$1 = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof$1(obj);
}
/**
 * @name toDate
 * @category Common Helpers
 * @summary Convert the given argument to an instance of Date.
 *
 * @description
 * Convert the given argument to an instance of Date.
 *
 * If the argument is an instance of Date, the function returns its clone.
 *
 * If the argument is a number, it is treated as a timestamp.
 *
 * If the argument is none of the above, the function returns Invalid Date.
 *
 * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.
 *
 * @param {Date|Number} argument - the value to convert
 * @returns {Date} the parsed date in the local time zone
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // Clone the date:
 * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))
 * //=> Tue Feb 11 2014 11:30:30
 *
 * @example
 * // Convert the timestamp to date:
 * const result = toDate(1392098430000)
 * //=> Tue Feb 11 2014 11:30:30
 */

function toDate(argument) {
  requiredArgs(1, arguments);
  var argStr = Object.prototype.toString.call(argument); // Clone the date

  if (argument instanceof Date || _typeof$1(argument) === 'object' && argStr === '[object Date]') {
    // Prevent the date to lose the milliseconds when passed to new Date() in IE10
    return new Date(argument.getTime());
  } else if (typeof argument === 'number' || argStr === '[object Number]') {
    return new Date(argument);
  } else {
    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {
      // eslint-disable-next-line no-console
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"); // eslint-disable-next-line no-console

      console.warn(new Error().stack);
    }

    return new Date(NaN);
  }
}

/**
 * @name addMilliseconds
 * @category Millisecond Helpers
 * @summary Add the specified number of milliseconds to the given date.
 *
 * @description
 * Add the specified number of milliseconds to the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the milliseconds added
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Add 750 milliseconds to 10 July 2014 12:45:30.000:
 * const result = addMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:30.750
 */

function addMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var timestamp = toDate(dirtyDate).getTime();
  var amount = toInteger(dirtyAmount);
  return new Date(timestamp + amount);
}

var defaultOptions = {};
function getDefaultOptions() {
  return defaultOptions;
}

/**
 * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.
 * They usually appear for dates that denote time before the timezones were introduced
 * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891
 * and GMT+01:00:00 after that date)
 *
 * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,
 * which would lead to incorrect calculations.
 *
 * This function returns the timezone offset in milliseconds that takes seconds in account.
 */
function getTimezoneOffsetInMilliseconds(date) {
  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));
  utcDate.setUTCFullYear(date.getFullYear());
  return date.getTime() - utcDate.getTime();
}

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}
/**
 * @name isDate
 * @category Common Helpers
 * @summary Is the given value a date?
 *
 * @description
 * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.
 *
 * @param {*} value - the value to check
 * @returns {boolean} true if the given value is a date
 * @throws {TypeError} 1 arguments required
 *
 * @example
 * // For a valid date:
 * const result = isDate(new Date())
 * //=> true
 *
 * @example
 * // For an invalid date:
 * const result = isDate(new Date(NaN))
 * //=> true
 *
 * @example
 * // For some value:
 * const result = isDate('2014-02-31')
 * //=> false
 *
 * @example
 * // For an object:
 * const result = isDate({})
 * //=> false
 */

function isDate(value) {
  requiredArgs(1, arguments);
  return value instanceof Date || _typeof(value) === 'object' && Object.prototype.toString.call(value) === '[object Date]';
}

/**
 * @name isValid
 * @category Common Helpers
 * @summary Is the given date valid?
 *
 * @description
 * Returns false if argument is Invalid Date and true otherwise.
 * Argument is converted to Date using `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}
 * Invalid Date is a Date, whose time value is NaN.
 *
 * Time value of Date: http://es5.github.io/#x15.9.1.1
 *
 * @param {*} date - the date to check
 * @returns {Boolean} the date is valid
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // For the valid date:
 * const result = isValid(new Date(2014, 1, 31))
 * //=> true
 *
 * @example
 * // For the value, convertable into a date:
 * const result = isValid(1393804800000)
 * //=> true
 *
 * @example
 * // For the invalid date:
 * const result = isValid(new Date(''))
 * //=> false
 */

function isValid(dirtyDate) {
  requiredArgs(1, arguments);

  if (!isDate(dirtyDate) && typeof dirtyDate !== 'number') {
    return false;
  }

  var date = toDate(dirtyDate);
  return !isNaN(Number(date));
}

/**
 * @name subMilliseconds
 * @category Millisecond Helpers
 * @summary Subtract the specified number of milliseconds from the given date.
 *
 * @description
 * Subtract the specified number of milliseconds from the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the milliseconds subtracted
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Subtract 750 milliseconds from 10 July 2014 12:45:30.000:
 * const result = subMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:29.250
 */

function subMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addMilliseconds(dirtyDate, -amount);
}

var MILLISECONDS_IN_DAY = 86400000;
function getUTCDayOfYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var timestamp = date.getTime();
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
  var startOfYearTimestamp = date.getTime();
  var difference = timestamp - startOfYearTimestamp;
  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;
}

function startOfUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var weekStartsOn = 1;
  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

function getUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var fourthOfJanuaryOfNextYear = new Date(0);
  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear);
  var fourthOfJanuaryOfThisYear = new Date(0);
  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear);

  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

function startOfUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var year = getUTCISOWeekYear(dirtyDate);
  var fourthOfJanuary = new Date(0);
  fourthOfJanuary.setUTCFullYear(year, 0, 4);
  fourthOfJanuary.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCISOWeek(fourthOfJanuary);
  return date;
}

var MILLISECONDS_IN_WEEK$1 = 604800000;
function getUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCISOWeek(date).getTime() - startOfUTCISOWeekYear(date).getTime(); // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)

  return Math.round(diff / MILLISECONDS_IN_WEEK$1) + 1;
}

function startOfUTCWeek(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;

  requiredArgs(1, arguments);
  var defaultOptions = getDefaultOptions();
  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN

  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }

  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

function getUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;

  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var defaultOptions = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1); // Test if weekStartsOn is between 1 and 7 _and_ is not NaN

  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }

  var firstWeekOfNextYear = new Date(0);
  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, options);
  var firstWeekOfThisYear = new Date(0);
  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, options);

  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

function startOfUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;

  requiredArgs(1, arguments);
  var defaultOptions = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);
  var year = getUTCWeekYear(dirtyDate, options);
  var firstWeek = new Date(0);
  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCWeek(firstWeek, options);
  return date;
}

var MILLISECONDS_IN_WEEK = 604800000;
function getUTCWeek(dirtyDate, options) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCWeek(date, options).getTime() - startOfUTCWeekYear(date, options).getTime(); // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)

  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;
}

function addLeadingZeros(number, targetLength) {
  var sign = number < 0 ? '-' : '';
  var output = Math.abs(number).toString();

  while (output.length < targetLength) {
    output = '0' + output;
  }

  return sign + output;
}

/*
 * |     | Unit                           |     | Unit                           |
 * |-----|--------------------------------|-----|--------------------------------|
 * |  a  | AM, PM                         |  A* |                                |
 * |  d  | Day of month                   |  D  |                                |
 * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
 * |  m  | Minute                         |  M  | Month                          |
 * |  s  | Second                         |  S  | Fraction of second             |
 * |  y  | Year (abs)                     |  Y  |                                |
 *
 * Letters marked by * are not implemented but reserved by Unicode standard.
 */

var formatters$2 = {
  // Year
  y: function y(date, token) {
    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens
    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |
    // |----------|-------|----|-------|-------|-------|
    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |
    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |
    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |
    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |
    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |
    var signedYear = date.getUTCFullYear(); // Returns 1 for 1 BC (which is year 0 in JavaScript)

    var year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === 'yy' ? year % 100 : year, token.length);
  },
  // Month
  M: function M(date, token) {
    var month = date.getUTCMonth();
    return token === 'M' ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  // Day of the month
  d: function d(date, token) {
    return addLeadingZeros(date.getUTCDate(), token.length);
  },
  // AM or PM
  a: function a(date, token) {
    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? 'pm' : 'am';

    switch (token) {
      case 'a':
      case 'aa':
        return dayPeriodEnumValue.toUpperCase();

      case 'aaa':
        return dayPeriodEnumValue;

      case 'aaaaa':
        return dayPeriodEnumValue[0];

      case 'aaaa':
      default:
        return dayPeriodEnumValue === 'am' ? 'a.m.' : 'p.m.';
    }
  },
  // Hour [1-12]
  h: function h(date, token) {
    return addLeadingZeros(date.getUTCHours() % 12 || 12, token.length);
  },
  // Hour [0-23]
  H: function H(date, token) {
    return addLeadingZeros(date.getUTCHours(), token.length);
  },
  // Minute
  m: function m(date, token) {
    return addLeadingZeros(date.getUTCMinutes(), token.length);
  },
  // Second
  s: function s(date, token) {
    return addLeadingZeros(date.getUTCSeconds(), token.length);
  },
  // Fraction of second
  S: function S(date, token) {
    var numberOfDigits = token.length;
    var milliseconds = date.getUTCMilliseconds();
    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};

var dayPeriodEnum = {
  am: 'am',
  pm: 'pm',
  midnight: 'midnight',
  noon: 'noon',
  morning: 'morning',
  afternoon: 'afternoon',
  evening: 'evening',
  night: 'night'
};
/*
 * |     | Unit                           |     | Unit                           |
 * |-----|--------------------------------|-----|--------------------------------|
 * |  a  | AM, PM                         |  A* | Milliseconds in day            |
 * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |
 * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |
 * |  d  | Day of month                   |  D  | Day of year                    |
 * |  e  | Local day of week              |  E  | Day of week                    |
 * |  f  |                                |  F* | Day of week in month           |
 * |  g* | Modified Julian day            |  G  | Era                            |
 * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
 * |  i! | ISO day of week                |  I! | ISO week of year               |
 * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |
 * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |
 * |  l* | (deprecated)                   |  L  | Stand-alone month              |
 * |  m  | Minute                         |  M  | Month                          |
 * |  n  |                                |  N  |                                |
 * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |
 * |  p! | Long localized time            |  P! | Long localized date            |
 * |  q  | Stand-alone quarter            |  Q  | Quarter                        |
 * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |
 * |  s  | Second                         |  S  | Fraction of second             |
 * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |
 * |  u  | Extended year                  |  U* | Cyclic year                    |
 * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |
 * |  w  | Local week of year             |  W* | Week of month                  |
 * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |
 * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |
 * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |
 *
 * Letters marked by * are not implemented but reserved by Unicode standard.
 *
 * Letters marked by ! are non-standard, but implemented by date-fns:
 * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)
 * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,
 *   i.e. 7 for Sunday, 1 for Monday, etc.
 * - `I` is ISO week of year, as opposed to `w` which is local week of year.
 * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.
 *   `R` is supposed to be used in conjunction with `I` and `i`
 *   for universal ISO week-numbering date, whereas
 *   `Y` is supposed to be used in conjunction with `w` and `e`
 *   for week-numbering date specific to the locale.
 * - `P` is long localized date format
 * - `p` is long localized time format
 */

var formatters = {
  // Era
  G: function G(date, token, localize) {
    var era = date.getUTCFullYear() > 0 ? 1 : 0;

    switch (token) {
      // AD, BC
      case 'G':
      case 'GG':
      case 'GGG':
        return localize.era(era, {
          width: 'abbreviated'
        });
      // A, B

      case 'GGGGG':
        return localize.era(era, {
          width: 'narrow'
        });
      // Anno Domini, Before Christ

      case 'GGGG':
      default:
        return localize.era(era, {
          width: 'wide'
        });
    }
  },
  // Year
  y: function y(date, token, localize) {
    // Ordinal number
    if (token === 'yo') {
      var signedYear = date.getUTCFullYear(); // Returns 1 for 1 BC (which is year 0 in JavaScript)

      var year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize.ordinalNumber(year, {
        unit: 'year'
      });
    }

    return formatters$2.y(date, token);
  },
  // Local week-numbering year
  Y: function Y(date, token, localize, options) {
    var signedWeekYear = getUTCWeekYear(date, options); // Returns 1 for 1 BC (which is year 0 in JavaScript)

    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear; // Two digit year

    if (token === 'YY') {
      var twoDigitYear = weekYear % 100;
      return addLeadingZeros(twoDigitYear, 2);
    } // Ordinal number


    if (token === 'Yo') {
      return localize.ordinalNumber(weekYear, {
        unit: 'year'
      });
    } // Padding


    return addLeadingZeros(weekYear, token.length);
  },
  // ISO week-numbering year
  R: function R(date, token) {
    var isoWeekYear = getUTCISOWeekYear(date); // Padding

    return addLeadingZeros(isoWeekYear, token.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function u(date, token) {
    var year = date.getUTCFullYear();
    return addLeadingZeros(year, token.length);
  },
  // Quarter
  Q: function Q(date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);

    switch (token) {
      // 1, 2, 3, 4
      case 'Q':
        return String(quarter);
      // 01, 02, 03, 04

      case 'QQ':
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th

      case 'Qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      // Q1, Q2, Q3, Q4

      case 'QQQ':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)

      case 'QQQQQ':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'formatting'
        });
      // 1st quarter, 2nd quarter, ...

      case 'QQQQ':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone quarter
  q: function q(date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);

    switch (token) {
      // 1, 2, 3, 4
      case 'q':
        return String(quarter);
      // 01, 02, 03, 04

      case 'qq':
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th

      case 'qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      // Q1, Q2, Q3, Q4

      case 'qqq':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)

      case 'qqqqq':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'standalone'
        });
      // 1st quarter, 2nd quarter, ...

      case 'qqqq':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // Month
  M: function M(date, token, localize) {
    var month = date.getUTCMonth();

    switch (token) {
      case 'M':
      case 'MM':
        return formatters$2.M(date, token);
      // 1st, 2nd, ..., 12th

      case 'Mo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      // Jan, Feb, ..., Dec

      case 'MMM':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // J, F, ..., D

      case 'MMMMM':
        return localize.month(month, {
          width: 'narrow',
          context: 'formatting'
        });
      // January, February, ..., December

      case 'MMMM':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone month
  L: function L(date, token, localize) {
    var month = date.getUTCMonth();

    switch (token) {
      // 1, 2, ..., 12
      case 'L':
        return String(month + 1);
      // 01, 02, ..., 12

      case 'LL':
        return addLeadingZeros(month + 1, 2);
      // 1st, 2nd, ..., 12th

      case 'Lo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      // Jan, Feb, ..., Dec

      case 'LLL':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // J, F, ..., D

      case 'LLLLL':
        return localize.month(month, {
          width: 'narrow',
          context: 'standalone'
        });
      // January, February, ..., December

      case 'LLLL':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // Local week of year
  w: function w(date, token, localize, options) {
    var week = getUTCWeek(date, options);

    if (token === 'wo') {
      return localize.ordinalNumber(week, {
        unit: 'week'
      });
    }

    return addLeadingZeros(week, token.length);
  },
  // ISO week of year
  I: function I(date, token, localize) {
    var isoWeek = getUTCISOWeek(date);

    if (token === 'Io') {
      return localize.ordinalNumber(isoWeek, {
        unit: 'week'
      });
    }

    return addLeadingZeros(isoWeek, token.length);
  },
  // Day of the month
  d: function d(date, token, localize) {
    if (token === 'do') {
      return localize.ordinalNumber(date.getUTCDate(), {
        unit: 'date'
      });
    }

    return formatters$2.d(date, token);
  },
  // Day of year
  D: function D(date, token, localize) {
    var dayOfYear = getUTCDayOfYear(date);

    if (token === 'Do') {
      return localize.ordinalNumber(dayOfYear, {
        unit: 'dayOfYear'
      });
    }

    return addLeadingZeros(dayOfYear, token.length);
  },
  // Day of week
  E: function E(date, token, localize) {
    var dayOfWeek = date.getUTCDay();

    switch (token) {
      // Tue
      case 'E':
      case 'EE':
      case 'EEE':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T

      case 'EEEEE':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu

      case 'EEEEEE':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday

      case 'EEEE':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Local day of week
  e: function e(date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;

    switch (token) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case 'e':
        return String(localDayOfWeek);
      // Padded numerical value

      case 'ee':
        return addLeadingZeros(localDayOfWeek, 2);
      // 1st, 2nd, ..., 7th

      case 'eo':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });

      case 'eee':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T

      case 'eeeee':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu

      case 'eeeeee':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday

      case 'eeee':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone local day of week
  c: function c(date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;

    switch (token) {
      // Numerical value (same as in `e`)
      case 'c':
        return String(localDayOfWeek);
      // Padded numerical value

      case 'cc':
        return addLeadingZeros(localDayOfWeek, token.length);
      // 1st, 2nd, ..., 7th

      case 'co':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });

      case 'ccc':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // T

      case 'ccccc':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'standalone'
        });
      // Tu

      case 'cccccc':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'standalone'
        });
      // Tuesday

      case 'cccc':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // ISO day of week
  i: function i(date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;

    switch (token) {
      // 2
      case 'i':
        return String(isoDayOfWeek);
      // 02

      case 'ii':
        return addLeadingZeros(isoDayOfWeek, token.length);
      // 2nd

      case 'io':
        return localize.ordinalNumber(isoDayOfWeek, {
          unit: 'day'
        });
      // Tue

      case 'iii':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T

      case 'iiiii':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu

      case 'iiiiii':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday

      case 'iiii':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // AM or PM
  a: function a(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';

    switch (token) {
      case 'a':
      case 'aa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'aaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();

      case 'aaaaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'aaaa':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // AM, PM, midnight, noon
  b: function b(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;

    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    }

    switch (token) {
      case 'b':
      case 'bb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'bbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();

      case 'bbbbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'bbbb':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function B(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;

    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }

    switch (token) {
      case 'B':
      case 'BB':
      case 'BBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'BBBBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'BBBB':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Hour [1-12]
  h: function h(date, token, localize) {
    if (token === 'ho') {
      var hours = date.getUTCHours() % 12;
      if (hours === 0) hours = 12;
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }

    return formatters$2.h(date, token);
  },
  // Hour [0-23]
  H: function H(date, token, localize) {
    if (token === 'Ho') {
      return localize.ordinalNumber(date.getUTCHours(), {
        unit: 'hour'
      });
    }

    return formatters$2.H(date, token);
  },
  // Hour [0-11]
  K: function K(date, token, localize) {
    var hours = date.getUTCHours() % 12;

    if (token === 'Ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }

    return addLeadingZeros(hours, token.length);
  },
  // Hour [1-24]
  k: function k(date, token, localize) {
    var hours = date.getUTCHours();
    if (hours === 0) hours = 24;

    if (token === 'ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }

    return addLeadingZeros(hours, token.length);
  },
  // Minute
  m: function m(date, token, localize) {
    if (token === 'mo') {
      return localize.ordinalNumber(date.getUTCMinutes(), {
        unit: 'minute'
      });
    }

    return formatters$2.m(date, token);
  },
  // Second
  s: function s(date, token, localize) {
    if (token === 'so') {
      return localize.ordinalNumber(date.getUTCSeconds(), {
        unit: 'second'
      });
    }

    return formatters$2.s(date, token);
  },
  // Fraction of second
  S: function S(date, token) {
    return formatters$2.S(date, token);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function X(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    if (timezoneOffset === 0) {
      return 'Z';
    }

    switch (token) {
      // Hours and optional minutes
      case 'X':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`

      case 'XXXX':
      case 'XX':
        // Hours and minutes without `:` delimiter
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`

      case 'XXXXX':
      case 'XXX': // Hours and minutes with `:` delimiter

      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function x(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    switch (token) {
      // Hours and optional minutes
      case 'x':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`

      case 'xxxx':
      case 'xx':
        // Hours and minutes without `:` delimiter
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`

      case 'xxxxx':
      case 'xxx': // Hours and minutes with `:` delimiter

      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (GMT)
  O: function O(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    switch (token) {
      // Short
      case 'O':
      case 'OO':
      case 'OOO':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');
      // Long

      case 'OOOO':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (specific non-location)
  z: function z(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    switch (token) {
      // Short
      case 'z':
      case 'zz':
      case 'zzz':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');
      // Long

      case 'zzzz':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  // Seconds timestamp
  t: function t(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = Math.floor(originalDate.getTime() / 1000);
    return addLeadingZeros(timestamp, token.length);
  },
  // Milliseconds timestamp
  T: function T(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = originalDate.getTime();
    return addLeadingZeros(timestamp, token.length);
  }
};

function formatTimezoneShort(offset, dirtyDelimiter) {
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = Math.floor(absOffset / 60);
  var minutes = absOffset % 60;

  if (minutes === 0) {
    return sign + String(hours);
  }

  var delimiter = dirtyDelimiter || '';
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}

function formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {
  if (offset % 60 === 0) {
    var sign = offset > 0 ? '-' : '+';
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }

  return formatTimezone(offset, dirtyDelimiter);
}

function formatTimezone(offset, dirtyDelimiter) {
  var delimiter = dirtyDelimiter || '';
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);
  var minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}

var formatters$1 = formatters;

var dateLongFormatter = function dateLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'P':
      return formatLong.date({
        width: 'short'
      });

    case 'PP':
      return formatLong.date({
        width: 'medium'
      });

    case 'PPP':
      return formatLong.date({
        width: 'long'
      });

    case 'PPPP':
    default:
      return formatLong.date({
        width: 'full'
      });
  }
};

var timeLongFormatter = function timeLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'p':
      return formatLong.time({
        width: 'short'
      });

    case 'pp':
      return formatLong.time({
        width: 'medium'
      });

    case 'ppp':
      return formatLong.time({
        width: 'long'
      });

    case 'pppp':
    default:
      return formatLong.time({
        width: 'full'
      });
  }
};

var dateTimeLongFormatter = function dateTimeLongFormatter(pattern, formatLong) {
  var matchResult = pattern.match(/(P+)(p+)?/) || [];
  var datePattern = matchResult[1];
  var timePattern = matchResult[2];

  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong);
  }

  var dateTimeFormat;

  switch (datePattern) {
    case 'P':
      dateTimeFormat = formatLong.dateTime({
        width: 'short'
      });
      break;

    case 'PP':
      dateTimeFormat = formatLong.dateTime({
        width: 'medium'
      });
      break;

    case 'PPP':
      dateTimeFormat = formatLong.dateTime({
        width: 'long'
      });
      break;

    case 'PPPP':
    default:
      dateTimeFormat = formatLong.dateTime({
        width: 'full'
      });
      break;
  }

  return dateTimeFormat.replace('{{date}}', dateLongFormatter(datePattern, formatLong)).replace('{{time}}', timeLongFormatter(timePattern, formatLong));
};

var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};
var longFormatters$1 = longFormatters;

var protectedDayOfYearTokens = ['D', 'DD'];
var protectedWeekYearTokens = ['YY', 'YYYY'];
function isProtectedDayOfYearToken(token) {
  return protectedDayOfYearTokens.indexOf(token) !== -1;
}
function isProtectedWeekYearToken(token) {
  return protectedWeekYearTokens.indexOf(token) !== -1;
}
function throwProtectedError(token, format, input) {
  if (token === 'YYYY') {
    throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'YY') {
    throw new RangeError("Use `yy` instead of `YY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'D') {
    throw new RangeError("Use `d` instead of `D` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'DD') {
    throw new RangeError("Use `dd` instead of `DD` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  }
}

var formatDistanceLocale = {
  lessThanXSeconds: {
    one: 'less than a second',
    other: 'less than {{count}} seconds'
  },
  xSeconds: {
    one: '1 second',
    other: '{{count}} seconds'
  },
  halfAMinute: 'half a minute',
  lessThanXMinutes: {
    one: 'less than a minute',
    other: 'less than {{count}} minutes'
  },
  xMinutes: {
    one: '1 minute',
    other: '{{count}} minutes'
  },
  aboutXHours: {
    one: 'about 1 hour',
    other: 'about {{count}} hours'
  },
  xHours: {
    one: '1 hour',
    other: '{{count}} hours'
  },
  xDays: {
    one: '1 day',
    other: '{{count}} days'
  },
  aboutXWeeks: {
    one: 'about 1 week',
    other: 'about {{count}} weeks'
  },
  xWeeks: {
    one: '1 week',
    other: '{{count}} weeks'
  },
  aboutXMonths: {
    one: 'about 1 month',
    other: 'about {{count}} months'
  },
  xMonths: {
    one: '1 month',
    other: '{{count}} months'
  },
  aboutXYears: {
    one: 'about 1 year',
    other: 'about {{count}} years'
  },
  xYears: {
    one: '1 year',
    other: '{{count}} years'
  },
  overXYears: {
    one: 'over 1 year',
    other: 'over {{count}} years'
  },
  almostXYears: {
    one: 'almost 1 year',
    other: 'almost {{count}} years'
  }
};

var formatDistance = function formatDistance(token, count, options) {
  var result;
  var tokenValue = formatDistanceLocale[token];

  if (typeof tokenValue === 'string') {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace('{{count}}', count.toString());
  }

  if (options !== null && options !== void 0 && options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return 'in ' + result;
    } else {
      return result + ' ago';
    }
  }

  return result;
};

function buildFormatLongFn(args) {
  return function () {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}; // TODO: Remove String()

    var width = options.width ? String(options.width) : args.defaultWidth;
    var format = args.formats[width] || args.formats[args.defaultWidth];
    return format;
  };
}

var dateFormats = {
  full: 'EEEE, MMMM do, y',
  long: 'MMMM do, y',
  medium: 'MMM d, y',
  short: 'MM/dd/yyyy'
};
var timeFormats = {
  full: 'h:mm:ss a zzzz',
  long: 'h:mm:ss a z',
  medium: 'h:mm:ss a',
  short: 'h:mm a'
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: '{{date}}, {{time}}',
  short: '{{date}}, {{time}}'
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: 'full'
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: 'full'
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: 'full'
  })
};

var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: 'P'
};

var formatRelative = function formatRelative(token, _date, _baseDate, _options) {
  return formatRelativeLocale[token];
};

function buildLocalizeFn(args) {
  return function (dirtyIndex, options) {
    var context = options !== null && options !== void 0 && options.context ? String(options.context) : 'standalone';
    var valuesArray;

    if (context === 'formatting' && args.formattingValues) {
      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      var width = options !== null && options !== void 0 && options.width ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      var _defaultWidth = args.defaultWidth;

      var _width = options !== null && options !== void 0 && options.width ? String(options.width) : args.defaultWidth;

      valuesArray = args.values[_width] || args.values[_defaultWidth];
    }

    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex; // @ts-ignore: For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!

    return valuesArray[index];
  };
}

var eraValues = {
  narrow: ['B', 'A'],
  abbreviated: ['BC', 'AD'],
  wide: ['Before Christ', 'Anno Domini']
};
var quarterValues = {
  narrow: ['1', '2', '3', '4'],
  abbreviated: ['Q1', 'Q2', 'Q3', 'Q4'],
  wide: ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter']
}; // Note: in English, the names of days of the week and months are capitalized.
// If you are making a new locale based on this one, check if the same is true for the language you're working on.
// Generally, formatted dates should look like they are in the middle of a sentence,
// e.g. in Spanish language the weekdays and months should be in the lowercase.

var monthValues = {
  narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],
  abbreviated: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
  wide: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
};
var dayValues = {
  narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],
  short: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
  abbreviated: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
  wide: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
};
var dayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  }
};

var ordinalNumber = function ordinalNumber(dirtyNumber, _options) {
  var number = Number(dirtyNumber); // If ordinal numbers depend on context, for example,
  // if they are different for different grammatical genders,
  // use `options.unit`.
  //
  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',
  // 'day', 'hour', 'minute', 'second'.

  var rem100 = number % 100;

  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + 'st';

      case 2:
        return number + 'nd';

      case 3:
        return number + 'rd';
    }
  }

  return number + 'th';
};

var localize = {
  ordinalNumber: ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: 'wide'
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: 'wide',
    argumentCallback: function argumentCallback(quarter) {
      return quarter - 1;
    }
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: 'wide'
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: 'wide'
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: 'wide',
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: 'wide'
  })
};

function buildMatchFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var width = options.width;
    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    var matchResult = string.match(matchPattern);

    if (!matchResult) {
      return null;
    }

    var matchedString = matchResult[0];
    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    }) : findKey(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    });
    var value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}

function findKey(object, predicate) {
  for (var key in object) {
    if (object.hasOwnProperty(key) && predicate(object[key])) {
      return key;
    }
  }

  return undefined;
}

function findIndex(array, predicate) {
  for (var key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }

  return undefined;
}

function buildMatchPatternFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    var matchedString = matchResult[0];
    var parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}

var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],
  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: function valueCallback(value) {
      return parseInt(value, 10);
    }
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseEraPatterns,
    defaultParseWidth: 'any'
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: 'any',
    valueCallback: function valueCallback(index) {
      return index + 1;
    }
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: 'any'
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseDayPatterns,
    defaultParseWidth: 'any'
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: 'any',
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: 'any'
  })
};

/**
 * @type {Locale}
 * @category Locales
 * @summary English locale (United States).
 * @language English
 * @iso-639-2 eng
 * @author Sasha Koss [@kossnocorp]{@link https://github.com/kossnocorp}
 * @author Lesha Koss [@leshakoss]{@link https://github.com/leshakoss}
 */

var locale = {
  code: 'en-US',
  formatDistance: formatDistance,
  formatLong: formatLong,
  formatRelative: formatRelative,
  localize: localize,
  match: match,
  options: {
    weekStartsOn: 0
    /* Sunday */
    ,
    firstWeekContainsDate: 1
  }
};
var defaultLocale = locale;

// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token
//   (one of the certain letters followed by `o`)
// - (\w)\1* matches any sequences of the same letter
// - '' matches two quote characters in a row
// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),
//   except a single quote symbol, which ends the sequence.
//   Two quote characters do not end the sequence.
//   If there is no matching single quote
//   then the sequence will continue until the end of the string.
// - . matches any single character unmatched by previous parts of the RegExps

var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g; // This RegExp catches symbols escaped by quotes, and also
// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`

var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;
/**
 * @name format
 * @category Common Helpers
 * @summary Format the date.
 *
 * @description
 * Return the formatted date string in the given format. The result may vary by locale.
 *
 * > â ï¸ Please note that the `format` tokens differ from Moment.js and other libraries.
 * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * The characters wrapped between two single quotes characters (') are escaped.
 * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.
 * (see the last example)
 *
 * Format of the string is based on Unicode Technical Standard #35:
 * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table
 * with a few additions (see note 7 below the table).
 *
 * Accepted patterns:
 * | Unit                            | Pattern | Result examples                   | Notes |
 * |---------------------------------|---------|-----------------------------------|-------|
 * | Era                             | G..GGG  | AD, BC                            |       |
 * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |
 * |                                 | GGGGG   | A, B                              |       |
 * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |
 * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |
 * |                                 | yy      | 44, 01, 00, 17                    | 5     |
 * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |
 * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |
 * |                                 | yyyyy   | ...                               | 3,5   |
 * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |
 * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |
 * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |
 * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |
 * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |
 * |                                 | YYYYY   | ...                               | 3,5   |
 * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |
 * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |
 * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |
 * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |
 * |                                 | RRRRR   | ...                               | 3,5,7 |
 * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |
 * |                                 | uu      | -43, 01, 1900, 2017               | 5     |
 * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |
 * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |
 * |                                 | uuuuu   | ...                               | 3,5   |
 * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |
 * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |
 * |                                 | QQ      | 01, 02, 03, 04                    |       |
 * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |
 * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |
 * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |
 * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |
 * |                                 | qq      | 01, 02, 03, 04                    |       |
 * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |
 * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |
 * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |
 * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |
 * |                                 | MM      | 01, 02, ..., 12                   |       |
 * |                                 | MMM     | Jan, Feb, ..., Dec                |       |
 * |                                 | MMMM    | January, February, ..., December  | 2     |
 * |                                 | MMMMM   | J, F, ..., D                      |       |
 * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |
 * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |
 * |                                 | LL      | 01, 02, ..., 12                   |       |
 * |                                 | LLL     | Jan, Feb, ..., Dec                |       |
 * |                                 | LLLL    | January, February, ..., December  | 2     |
 * |                                 | LLLLL   | J, F, ..., D                      |       |
 * | Local week of year              | w       | 1, 2, ..., 53                     |       |
 * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |
 * |                                 | ww      | 01, 02, ..., 53                   |       |
 * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |
 * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |
 * |                                 | II      | 01, 02, ..., 53                   | 7     |
 * | Day of month                    | d       | 1, 2, ..., 31                     |       |
 * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |
 * |                                 | dd      | 01, 02, ..., 31                   |       |
 * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |
 * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |
 * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |
 * |                                 | DDD     | 001, 002, ..., 365, 366           |       |
 * |                                 | DDDD    | ...                               | 3     |
 * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |
 * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |
 * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |
 * |                                 | ii      | 01, 02, ..., 07                   | 7     |
 * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |
 * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |
 * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |
 * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |
 * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |
 * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |
 * |                                 | ee      | 02, 03, ..., 01                   |       |
 * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | eeeee   | M, T, W, T, F, S, S               |       |
 * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |
 * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |
 * |                                 | cc      | 02, 03, ..., 01                   |       |
 * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | ccccc   | M, T, W, T, F, S, S               |       |
 * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | AM, PM                          | a..aa   | AM, PM                            |       |
 * |                                 | aaa     | am, pm                            |       |
 * |                                 | aaaa    | a.m., p.m.                        | 2     |
 * |                                 | aaaaa   | a, p                              |       |
 * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |
 * |                                 | bbb     | am, pm, noon, midnight            |       |
 * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |
 * |                                 | bbbbb   | a, p, n, mi                       |       |
 * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |
 * |                                 | BBBB    | at night, in the morning, ...     | 2     |
 * |                                 | BBBBB   | at night, in the morning, ...     |       |
 * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |
 * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |
 * |                                 | hh      | 01, 02, ..., 11, 12               |       |
 * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |
 * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |
 * |                                 | HH      | 00, 01, 02, ..., 23               |       |
 * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |
 * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |
 * |                                 | KK      | 01, 02, ..., 11, 00               |       |
 * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |
 * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |
 * |                                 | kk      | 24, 01, 02, ..., 23               |       |
 * | Minute                          | m       | 0, 1, ..., 59                     |       |
 * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |
 * |                                 | mm      | 00, 01, ..., 59                   |       |
 * | Second                          | s       | 0, 1, ..., 59                     |       |
 * |                                 | so      | 0th, 1st, ..., 59th               | 7     |
 * |                                 | ss      | 00, 01, ..., 59                   |       |
 * | Fraction of second              | S       | 0, 1, ..., 9                      |       |
 * |                                 | SS      | 00, 01, ..., 99                   |       |
 * |                                 | SSS     | 000, 001, ..., 999                |       |
 * |                                 | SSSS    | ...                               | 3     |
 * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |
 * |                                 | XX      | -0800, +0530, Z                   |       |
 * |                                 | XXX     | -08:00, +05:30, Z                 |       |
 * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |
 * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |
 * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |
 * |                                 | xx      | -0800, +0530, +0000               |       |
 * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |
 * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |
 * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |
 * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |
 * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |
 * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |
 * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |
 * | Seconds timestamp               | t       | 512969520                         | 7     |
 * |                                 | tt      | ...                               | 3,7   |
 * | Milliseconds timestamp          | T       | 512969520900                      | 7     |
 * |                                 | TT      | ...                               | 3,7   |
 * | Long localized date             | P       | 04/29/1453                        | 7     |
 * |                                 | PP      | Apr 29, 1453                      | 7     |
 * |                                 | PPP     | April 29th, 1453                  | 7     |
 * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |
 * | Long localized time             | p       | 12:00 AM                          | 7     |
 * |                                 | pp      | 12:00:00 AM                       | 7     |
 * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |
 * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |
 * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |
 * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |
 * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |
 * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |
 * Notes:
 * 1. "Formatting" units (e.g. formatting quarter) in the default en-US locale
 *    are the same as "stand-alone" units, but are different in some languages.
 *    "Formatting" units are declined according to the rules of the language
 *    in the context of a date. "Stand-alone" units are always nominative singular:
 *
 *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`
 *
 *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`
 *
 * 2. Any sequence of the identical letters is a pattern, unless it is escaped by
 *    the single quote characters (see below).
 *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)
 *    the output will be the same as default pattern for this unit, usually
 *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units
 *    are marked with "2" in the last column of the table.
 *
 *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`
 *
 * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).
 *    The output will be padded with zeros to match the length of the pattern.
 *
 *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`
 *
 * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.
 *    These tokens represent the shortest form of the quarter.
 *
 * 5. The main difference between `y` and `u` patterns are B.C. years:
 *
 *    | Year | `y` | `u` |
 *    |------|-----|-----|
 *    | AC 1 |   1 |   1 |
 *    | BC 1 |   1 |   0 |
 *    | BC 2 |   2 |  -1 |
 *
 *    Also `yy` always returns the last two digits of a year,
 *    while `uu` pads single digit years to 2 characters and returns other years unchanged:
 *
 *    | Year | `yy` | `uu` |
 *    |------|------|------|
 *    | 1    |   01 |   01 |
 *    | 14   |   14 |   14 |
 *    | 376  |   76 |  376 |
 *    | 1453 |   53 | 1453 |
 *
 *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),
 *    except local week-numbering years are dependent on `options.weekStartsOn`
 *    and `options.firstWeekContainsDate` (compare [getISOWeekYear]{@link https://date-fns.org/docs/getISOWeekYear}
 *    and [getWeekYear]{@link https://date-fns.org/docs/getWeekYear}).
 *
 * 6. Specific non-location timezones are currently unavailable in `date-fns`,
 *    so right now these tokens fall back to GMT timezones.
 *
 * 7. These patterns are not in the Unicode Technical Standard #35:
 *    - `i`: ISO day of week
 *    - `I`: ISO week of year
 *    - `R`: ISO week-numbering year
 *    - `t`: seconds timestamp
 *    - `T`: milliseconds timestamp
 *    - `o`: ordinal number modifier
 *    - `P`: long localized date
 *    - `p`: long localized time
 *
 * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.
 *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.
 *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * @param {Date|Number} date - the original date
 * @param {String} format - the string of tokens
 * @param {Object} [options] - an object with options.
 * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}
 * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @param {Number} [options.firstWeekContainsDate=1] - the day of January, which is
 * @param {Boolean} [options.useAdditionalWeekYearTokens=false] - if true, allows usage of the week-numbering year tokens `YY` and `YYYY`;
 *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @param {Boolean} [options.useAdditionalDayOfYearTokens=false] - if true, allows usage of the day of year tokens `D` and `DD`;
 *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @returns {String} the formatted date string
 * @throws {TypeError} 2 arguments required
 * @throws {RangeError} `date` must not be Invalid Date
 * @throws {RangeError} `options.locale` must contain `localize` property
 * @throws {RangeError} `options.locale` must contain `formatLong` property
 * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6
 * @throws {RangeError} `options.firstWeekContainsDate` must be between 1 and 7
 * @throws {RangeError} use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} format string contains an unescaped latin alphabet character
 *
 * @example
 * // Represent 11 February 2014 in middle-endian format:
 * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')
 * //=> '02/11/2014'
 *
 * @example
 * // Represent 2 July 2014 in Esperanto:
 * import { eoLocale } from 'date-fns/locale/eo'
 * const result = format(new Date(2014, 6, 2), "do 'de' MMMM yyyy", {
 *   locale: eoLocale
 * })
 * //=> '2-a de julio 2014'
 *
 * @example
 * // Escape string by single quote characters:
 * const result = format(new Date(2014, 6, 2, 15), "h 'o''clock'")
 * //=> "3 o'clock"
 */

function format(dirtyDate, dirtyFormatStr, options) {
  var _ref, _options$locale, _ref2, _ref3, _ref4, _options$firstWeekCon, _options$locale2, _options$locale2$opti, _defaultOptions$local, _defaultOptions$local2, _ref5, _ref6, _ref7, _options$weekStartsOn, _options$locale3, _options$locale3$opti, _defaultOptions$local3, _defaultOptions$local4;

  requiredArgs(2, arguments);
  var formatStr = String(dirtyFormatStr);
  var defaultOptions = getDefaultOptions();
  var locale = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions.locale) !== null && _ref !== void 0 ? _ref : defaultLocale;
  var firstWeekContainsDate = toInteger((_ref2 = (_ref3 = (_ref4 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale2 = options.locale) === null || _options$locale2 === void 0 ? void 0 : (_options$locale2$opti = _options$locale2.options) === null || _options$locale2$opti === void 0 ? void 0 : _options$locale2$opti.firstWeekContainsDate) !== null && _ref4 !== void 0 ? _ref4 : defaultOptions.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : 1); // Test if weekStartsOn is between 1 and 7 _and_ is not NaN

  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }

  var weekStartsOn = toInteger((_ref5 = (_ref6 = (_ref7 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale3 = options.locale) === null || _options$locale3 === void 0 ? void 0 : (_options$locale3$opti = _options$locale3.options) === null || _options$locale3$opti === void 0 ? void 0 : _options$locale3$opti.weekStartsOn) !== null && _ref7 !== void 0 ? _ref7 : defaultOptions.weekStartsOn) !== null && _ref6 !== void 0 ? _ref6 : (_defaultOptions$local3 = defaultOptions.locale) === null || _defaultOptions$local3 === void 0 ? void 0 : (_defaultOptions$local4 = _defaultOptions$local3.options) === null || _defaultOptions$local4 === void 0 ? void 0 : _defaultOptions$local4.weekStartsOn) !== null && _ref5 !== void 0 ? _ref5 : 0); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN

  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }

  if (!locale.localize) {
    throw new RangeError('locale must contain localize property');
  }

  if (!locale.formatLong) {
    throw new RangeError('locale must contain formatLong property');
  }

  var originalDate = toDate(dirtyDate);

  if (!isValid(originalDate)) {
    throw new RangeError('Invalid time value');
  } // Convert the date in system timezone to the same date in UTC+00:00 timezone.
  // This ensures that when UTC functions will be implemented, locales will be compatible with them.
  // See an issue about UTC functions: https://github.com/date-fns/date-fns/issues/376


  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);
  var utcDate = subMilliseconds(originalDate, timezoneOffset);
  var formatterOptions = {
    firstWeekContainsDate: firstWeekContainsDate,
    weekStartsOn: weekStartsOn,
    locale: locale,
    _originalDate: originalDate
  };
  var result = formatStr.match(longFormattingTokensRegExp).map(function (substring) {
    var firstCharacter = substring[0];

    if (firstCharacter === 'p' || firstCharacter === 'P') {
      var longFormatter = longFormatters$1[firstCharacter];
      return longFormatter(substring, locale.formatLong);
    }

    return substring;
  }).join('').match(formattingTokensRegExp).map(function (substring) {
    // Replace two single quote characters with one single quote character
    if (substring === "''") {
      return "'";
    }

    var firstCharacter = substring[0];

    if (firstCharacter === "'") {
      return cleanEscapedString(substring);
    }

    var formatter = formatters$1[firstCharacter];

    if (formatter) {
      if (!(options !== null && options !== void 0 && options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));
      }

      if (!(options !== null && options !== void 0 && options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));
      }

      return formatter(utcDate, substring, locale.localize, formatterOptions);
    }

    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError('Format string contains an unescaped latin alphabet character `' + firstCharacter + '`');
    }

    return substring;
  }).join('');
  return result;
}

function cleanEscapedString(input) {
  var matched = input.match(escapedStringRegExp);

  if (!matched) {
    return input;
  }

  return matched[1].replace(doubleQuoteRegExp, "'");
}

var _path$3;

function _extends$5() { _extends$5 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$5.apply(this, arguments); }

var SvgIconsChevronRight = function SvgIconsChevronRight(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$5({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _path$3 || (_path$3 = /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M22.114 46.114a2.667 2.667 0 0 0 3.772 3.772l16-16a2.667 2.667 0 0 0 0-3.772l-16-16a2.667 2.667 0 0 0-3.772 3.772L36.23 32 22.114 46.114z",
    fillRule: "evenodd"
  })));
};

var _g$1;

function _extends$4() { _extends$4 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$4.apply(this, arguments); }

var SvgIconsToggleon = function SvgIconsToggleon(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$4({
    width: 88,
    height: 48,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _g$1 || (_g$1 = /*#__PURE__*/React__default__namespace.createElement("g", {
    fillRule: "evenodd"
  }, /*#__PURE__*/React__default__namespace.createElement("rect", {
    x: 4,
    y: 4,
    width: 80,
    height: 40,
    rx: 20
  }), /*#__PURE__*/React__default__namespace.createElement("circle", {
    fill: "#FFF",
    cx: 64,
    cy: 24,
    r: 12
  }), /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z",
    fill: "#FFF"
  }), /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"
  }))));
};

var _g;

function _extends$3() { _extends$3 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$3.apply(this, arguments); }

var SvgIconsToggleoff = function SvgIconsToggleoff(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$3({
    width: 88,
    height: 48,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _g || (_g = /*#__PURE__*/React__default__namespace.createElement("g", {
    fillRule: "evenodd"
  }, /*#__PURE__*/React__default__namespace.createElement("rect", {
    x: 4,
    y: 4,
    width: 80,
    height: 40,
    rx: 20
  }), /*#__PURE__*/React__default__namespace.createElement("circle", {
    fill: "#FFF",
    cx: 24,
    cy: 24,
    r: 12
  }), /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z",
    fill: "#FFF"
  }), /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"
  }))));
};

var _path$2;

function _extends$2() { _extends$2 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$2.apply(this, arguments); }

var SvgIconsOperator = function SvgIconsOperator(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$2({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _path$2 || (_path$2 = /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M29.83 6.45a2.667 2.667 0 0 1 4.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.667 2.667 0 0 1 50.667 56H13.333a2.667 2.667 0 0 1-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 0 1-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 0 1-3.632-.281l-.204-.251L32 12.587zM32 32a5.333 5.333 0 1 1 0 10.667A5.333 5.333 0 0 1 32 32z",
    fillRule: "evenodd"
  })));
};

var _path$1;

function _extends$1() { _extends$1 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$1.apply(this, arguments); }

var SvgIconsMembers = function SvgIconsMembers(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends$1({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _path$1 || (_path$1 = /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L42.667 56v-5.333a8 8 0 0 0-7.53-7.987l-.47-.013H13.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.315.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM54 37.765a13.334 13.334 0 0 1 9.986 12.297l.014.605V56a2.667 2.667 0 0 1-5.315.311L58.667 56v-5.331a8 8 0 0 0-6-7.74A2.667 2.667 0 0 1 54 37.765zM24 5.333c7.364 0 13.333 5.97 13.333 13.334C37.333 26.03 31.363 32 24 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm19.328.43a13.333 13.333 0 0 1 0 25.834 2.667 2.667 0 0 1-1.323-5.167 8 8 0 0 0 0-15.5 2.667 2.667 0 1 1 1.323-5.167zM24 10.667a8 8 0 1 0 0 16 8 8 0 0 0 0-16z",
    fillRule: "evenodd"
  })));
};

var _path;

function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgIconsFreeze = function SvgIconsFreeze(props) {
  return /*#__PURE__*/React__default__namespace.createElement("svg", _extends({
    width: 64,
    height: 64,
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _path || (_path = /*#__PURE__*/React__default__namespace.createElement("path", {
    d: "m41.636 3.226.251.222a2.667 2.667 0 0 1 .222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 0 1 5.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.667 2.667 0 0 1 1.952 2.938l-.067.328a2.667 2.667 0 0 1-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.667 2.667 0 0 1 2.937 1.952l.067.328a2.667 2.667 0 0 1-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.667 2.667 0 0 1-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 0 1-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.667 2.667 0 0 1-3.52.222l-.251-.222a2.667 2.667 0 0 1-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.667 2.667 0 0 1-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.667 2.667 0 0 1-1.953-2.937l.067-.328a2.667 2.667 0 0 1 2.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.667 2.667 0 0 1-2.937-1.952l-.067-.328a2.667 2.667 0 0 1 1.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 0 1 5.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.667 2.667 0 0 1 3.52-3.993l.251.222 6.114 6.112 6.115-6.112a2.667 2.667 0 0 1 3.52-.222z",
    fillRule: "evenodd"
  })));
};

var css_248z$6 = ".event-detail-view {\n  position: relative;\n  max-width: 400px;\n  background: #fff;\n}\n.event-detail-view .header {\n  display: flex;\n  align-items: center;\n  padding: 24px;\n  border-bottom: 1px #ddd solid;\n}\n.event-detail-view .header .title {\n  flex: 1;\n  font-size: 18px;\n}\n.event-detail-view .header .close:hover {\n  cursor: pointer;\n}\n.event-detail-view .event-summary {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 24px;\n  border-bottom: 1px #ddd solid;\n}\n.event-detail-view .event-summary .profile {\n  width: 80px;\n  height: 80px;\n  background: #eee;\n  border-radius: 60px;\n  margin-bottom: 8px;\n}\n.event-detail-view .event-summary .title {\n  font-size: 18px;\n  font-weight: bold;\n  color: #333;\n}\n.event-detail-view .event-menu {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: center;\n  padding: 10px;\n  border-bottom: 1px #ddd solid;\n}\n.event-detail-view .event-menu .icon {\n  margin-right: 16px;\n}\n.event-detail-view .event-menu .label {\n  flex: 1;\n}\n.event-detail-view .event-menu .count {\n  background: #ddd;\n  padding: 4px 8px;\n  border-radius: 15px;\n  margin: 0 4px;\n}\n.event-detail-view .event-menu .guide {\n  flex-basis: 100%;\n  color: #999;\n  line-height: 1.43;\n  padding: 8px 4px 10px 4px;\n}\n.event-detail-view .event-info {\n  padding: 16px;\n  border-bottom: 1px #ddd solid;\n}\n.event-detail-view .event-info .label {\n  font-size: 12px;\n  font-weight: bold;\n  color: #999;\n  margin-bottom: 8px;\n}\n.event-detail-view .event-info .value {\n  font-size: 14px;\n  color: #333;\n  line-height: 1.43;\n}\n.event-detail-view .button:hover {\n  cursor: pointer;\n  background: #eee;\n}";
styleInject(css_248z$6);

function EventDetailView(_a) {
    var liveEvent = _a.liveEvent, _b = _a.onHostsClick, onHostsClick = _b === void 0 ? function () { } : _b, _c = _a.onParticipantsClick, onParticipantsClick = _c === void 0 ? function () { } : _c, _d = _a.onClose, onClose = _d === void 0 ? function () { } : _d;
    var openChannel = liveEvent.openChannel;
    var _e = React__default.useState(''), title = _e[0], setTitle = _e[1];
    var _f = React__default.useState(openChannel.isFrozen), frozen = _f[0], setFrozen = _f[1];
    var _g = React__default.useState(liveEvent.userIdsForHost.length), hostCount = _g[0], setHostCount = _g[1];
    var _h = React__default.useState("".concat(openChannel.participantCount)), participantCount = _h[0], setParticipantCount = _h[1];
    React__default.useEffect(function () {
        setTitle(openChannel.name || 'Untitled');
    }, [openChannel.name]);
    React__default.useEffect(function () {
        setHostCount(liveEvent.userIdsForHost.length);
    }, [liveEvent.userIdsForHost.length]);
    React__default.useEffect(function () {
        if (openChannel.participantCount > 1000)
            setParticipantCount("".concat(Math.floor(openChannel.participantCount / 1000), "k"));
        else
            setParticipantCount("".concat(openChannel.participantCount));
    }, [openChannel.participantCount]);
    React__default.useEffect(function () {
        setFrozen(liveEvent.openChannel.isFrozen);
    }, [openChannel.isFrozen]);
    return React__default__default["default"].createElement("div", { className: 'event-detail-view' },
        React__default__default["default"].createElement("div", { className: 'header' },
            React__default__default["default"].createElement("div", { className: 'title' }, "Live event information"),
            React__default__default["default"].createElement("div", { className: 'close', onClick: function () { return onClose(); } },
                React__default__default["default"].createElement(SvgIconsClose, { width: 22, height: 22, viewBox: '0 0 60 60' }))),
        React__default__default["default"].createElement("div", { className: 'event-summary' },
            React__default__default["default"].createElement("div", { className: 'profile' }, liveEvent.host ?
                React__default__default["default"].createElement("img", { src: liveEvent.host.profileURL }) :
                React__default__default["default"].createElement(SvgIconsUser, { width: 80, height: 80, viewBox: '-4 -4 20 20', fill: '#fff' })),
            React__default__default["default"].createElement("div", { className: 'title' }, title)),
        React__default__default["default"].createElement("div", { className: 'event-menu button', onClick: function () { return onHostsClick(); } },
            React__default__default["default"].createElement(SvgIconsOperator, { className: 'icon', width: 24, height: 24, viewBox: '-10 -10 80 80', fill: '#C2A9FA' }),
            React__default__default["default"].createElement("div", { className: 'label' }, "Hosts"),
            React__default__default["default"].createElement("div", { className: 'count' }, hostCount),
            React__default__default["default"].createElement(SvgIconsChevronRight, { width: 24, height: 24, viewBox: '-10 -10 80 80' })),
        React__default__default["default"].createElement("div", { className: 'event-menu button', onClick: function () { return onParticipantsClick(); } },
            React__default__default["default"].createElement(SvgIconsMembers, { className: 'icon', width: 24, height: 24, viewBox: '-10 -10 80 80', fill: '#C2A9FA' }),
            React__default__default["default"].createElement("div", { className: 'label' }, "Participants"),
            React__default__default["default"].createElement("div", { className: 'count' }, participantCount),
            React__default__default["default"].createElement(SvgIconsChevronRight, { width: 24, height: 24, viewBox: '-10 -10 80 80' })),
        React__default__default["default"].createElement("div", { className: 'event-menu' },
            React__default__default["default"].createElement(SvgIconsFreeze, { className: 'icon', width: 24, height: 24, viewBox: '-10 -10 80 80', fill: '#C2A9FA' }),
            React__default__default["default"].createElement("div", { className: 'label' }, "Freeze channel"),
            React__default__default["default"].createElement("div", { className: 'toggle' }, !frozen ?
                React__default__default["default"].createElement(SvgIconsToggleoff, { width: 44, height: 24, viewBox: '2 -8 80 60', fill: '#777' }) :
                React__default__default["default"].createElement(SvgIconsToggleon, { width: 44, height: 24, viewBox: '2 -8 80 60', fill: '#C2A9FA' })),
            React__default__default["default"].createElement("div", { className: 'guide' }, "Freezing a channel lets only operators to communicate in the channel.")),
        React__default__default["default"].createElement("div", { className: 'event-info' },
            React__default__default["default"].createElement("div", { className: 'label' }, "Live event ID"),
            React__default__default["default"].createElement("div", { className: 'value' }, liveEvent.liveEventId)),
        React__default__default["default"].createElement("div", { className: 'event-info' },
            React__default__default["default"].createElement("div", { className: 'label' }, "Created at"),
            React__default__default["default"].createElement("div", { className: 'value' }, format(liveEvent.createdAt, 'PPp'))),
        React__default__default["default"].createElement("div", { className: 'event-info' },
            React__default__default["default"].createElement("div", { className: 'label' }, "Created by"),
            React__default__default["default"].createElement("div", { className: 'value' }, liveEvent.createdBy)),
        liveEvent.startedAt > 0 ?
            React__default__default["default"].createElement("div", { className: 'event-info' },
                React__default__default["default"].createElement("div", { className: 'label' }, "Started at"),
                React__default__default["default"].createElement("div", { className: 'value' }, format(liveEvent.startedAt, 'PPp'))) : null,
        liveEvent.startedAt > 0 ?
            React__default__default["default"].createElement("div", { className: 'event-info' },
                React__default__default["default"].createElement("div", { className: 'label' }, "Started by"),
                React__default__default["default"].createElement("div", { className: 'value' }, liveEvent.startedBy)) : null);
}

var css_248z$5 = ".user-list-view {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  max-width: 400px;\n  max-height: 100vh;\n  background: #fff;\n  overflow: hidden;\n}\n.user-list-view .header {\n  display: flex;\n  align-items: center;\n  padding: 24px;\n  border-bottom: 1px #ddd solid;\n}\n.user-list-view .header .title {\n  flex: 1;\n  font-size: 18px;\n}\n.user-list-view .header .title .count {\n  display: inline-block;\n  background: #ddd;\n  padding: 4px 8px;\n  border-radius: 15px;\n  margin: 0 4px;\n}\n.user-list-view .header .close:hover {\n  cursor: pointer;\n}\n.user-list-view .list {\n  flex: 1;\n  padding: 8px 0;\n  overflow-y: auto;\n}\n\n.user-view {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background: #fff;\n  padding: 8px 16px;\n}\n.user-view .profile-image {\n  width: 24px;\n  height: 24px;\n  border-radius: 16px;\n  background: #eee;\n  margin-right: 16px;\n}\n.user-view .nickname {\n  font-size: 14px;\n  color: #333;\n}";
styleInject(css_248z$5);

function UserView(_a) {
    var _b = _a.nickname, nickname = _b === void 0 ? '' : _b, _c = _a.profileUrl, profileUrl = _c === void 0 ? '' : _c;
    var profile = profileUrl ?
        React__default__default["default"].createElement("img", { src: profileUrl, className: 'profile-image' }) :
        React__default__default["default"].createElement(SvgIconsUser, { fill: '#fff', className: 'profile-image' });
    return React__default__default["default"].createElement("div", { className: 'user-view' },
        profile,
        React__default__default["default"].createElement("div", { className: 'nickname' }, nickname));
}

function UserListView(_a) {
    var title = _a.title, count = _a.count, query = _a.query, _b = _a.onClose, onClose = _b === void 0 ? function () { } : _b;
    var userList = React__default.useRef(null);
    var _c = React__default.useState([]), users = _c[0], setUsers = _c[1];
    var _d = React__default.useState(true), hasNext = _d[0], setHasNext = _d[1];
    React__default.useEffect(function () {
        query()
            .then(function (_a) {
            var result = _a.result, hasNext = _a.hasNext;
            setUsers(__spreadArray$1([], result, true));
            setHasNext(hasNext);
        });
    }, []);
    var onScroll = function () {
        if (userList.current) {
            var _a = userList.current, scrollTop = _a.scrollTop, scrollHeight = _a.scrollHeight, clientHeight = _a.clientHeight;
            if (scrollTop + clientHeight === scrollHeight) {
                if (hasNext) {
                    query()
                        .then(function (_a) {
                        var result = _a.result, hasNext = _a.hasNext;
                        setUsers(__spreadArray$1(__spreadArray$1([], users, true), result, true));
                        setHasNext(hasNext);
                    });
                }
            }
        }
    };
    return React__default__default["default"].createElement("div", { className: 'user-list-view' },
        React__default__default["default"].createElement("div", { className: 'header' },
            React__default__default["default"].createElement("div", { className: 'title' },
                title,
                " ",
                React__default__default["default"].createElement("span", { className: 'count' }, count)),
            React__default__default["default"].createElement("div", { className: 'close', onClick: function () { return onClose(); } },
                React__default__default["default"].createElement(SvgIconsClose, { width: 22, height: 22, viewBox: '0 0 60 60' }))),
        React__default__default["default"].createElement("div", { className: 'list', ref: userList, onScroll: onScroll }, users.map(function (user) { return React__default__default["default"].createElement(UserView, { key: user.userId, userId: user.userId, nickname: user.nickname, profileUrl: user.profileUrl }); })));
}

var css_248z$4 = ".sendbirdlive-right__wrapper {\n  width: 400px;\n  height: 100vh;\n}";
styleInject(css_248z$4);

var RightPanelComponentType;
(function (RightPanelComponentType) {
    RightPanelComponentType[RightPanelComponentType["CHAT"] = 0] = "CHAT";
    RightPanelComponentType[RightPanelComponentType["EVENT_INFO"] = 1] = "EVENT_INFO";
    RightPanelComponentType[RightPanelComponentType["HOST_LIST"] = 2] = "HOST_LIST";
    RightPanelComponentType[RightPanelComponentType["PARTICIPANT_LIST"] = 3] = "PARTICIPANT_LIST";
})(RightPanelComponentType || (RightPanelComponentType = {}));
function RightPanel(_a) {
    var _this = this;
    var liveEvent = _a.liveEvent, _b = _a.initialViewStack, initialViewStack = _b === void 0 ? [RightPanelComponentType.CHAT] : _b;
    var openChannel = liveEvent.openChannel;
    var _c = React__default.useState(openChannel.createParticipantListQuery({})), participantListQuery = _c[0], setParticipantListQuery = _c[1];
    var _d = React__default.useState(__spreadArray$1([], initialViewStack, true)), viewStack = _d[0], setViewStack = _d[1];
    var _e = React__default.useState(initialViewStack[initialViewStack.length - 1]), currentView = _e[0], setCurrentView = _e[1];
    var pushViewStack = function (componentType) {
        setViewStack(__spreadArray$1(__spreadArray$1([], viewStack, true), [componentType], false));
    };
    var popViewStack = function () {
        if (viewStack.length > 1) {
            setViewStack(viewStack.slice(0, -1));
        }
    };
    React__default.useEffect(function () {
        var openChannel = liveEvent.openChannel;
        setParticipantListQuery(openChannel.createParticipantListQuery({}));
        setViewStack(__spreadArray$1([], initialViewStack, true));
    }, [liveEvent]);
    React__default.useEffect(function () {
        setCurrentView(viewStack[viewStack.length - 1]);
    }, [viewStack]);
    return React__default__default["default"].createElement("div", { className: 'sendbirdlive-right__wrapper' },
        currentView === RightPanelComponentType.CHAT ?
            React__default__default["default"].createElement(OpenChannel, { channelUrl: liveEvent.liveEventId, useMessageGrouping: true }) :
            null,
        currentView === RightPanelComponentType.EVENT_INFO ?
            React__default__default["default"].createElement(EventDetailView, { liveEvent: liveEvent, onHostsClick: function () { return pushViewStack(RightPanelComponentType.HOST_LIST); }, onParticipantsClick: function () { return pushViewStack(RightPanelComponentType.PARTICIPANT_LIST); }, onClose: function () { return popViewStack(); } }) :
            null,
        currentView === RightPanelComponentType.HOST_LIST ?
            React__default__default["default"].createElement(UserListView, { title: 'Hosts', count: openChannel.operators.length, query: function () { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        return [2 /*return*/, {
                                result: openChannel.operators,
                                hasNext: false,
                            }];
                    });
                }); }, onClose: function () { return popViewStack(); } }) :
            null,
        currentView === RightPanelComponentType.PARTICIPANT_LIST ?
            React__default__default["default"].createElement(UserListView, { title: 'Participants', count: openChannel.participantCount, query: function () { return __awaiter(_this, void 0, void 0, function () {
                    var participants, _a, hasNext;
                    return __generator(this, function (_b) {
                        switch (_b.label) {
                            case 0:
                                if (!participantListQuery) return [3 /*break*/, 2];
                                return [4 /*yield*/, participantListQuery.next()];
                            case 1:
                                _a = _b.sent();
                                return [3 /*break*/, 3];
                            case 2:
                                _a = [];
                                _b.label = 3;
                            case 3:
                                participants = _a;
                                hasNext = participantListQuery === null || participantListQuery === void 0 ? void 0 : participantListQuery.hasNext;
                                return [2 /*return*/, {
                                        result: participants,
                                        hasNext: hasNext,
                                    }];
                        }
                    });
                }); }, onClose: function () { return popViewStack(); } }) :
            null);
}

function HostView(props) {
    var _this = this;
    var liveEvent = props.liveEvent; props.showDuration; props.onEndEventClick; props.showStatusLabel; props.showParticipantCount; props.eventEndViewDisplayTime; props.allowExitWithoutEnding; props.showEventSummaryView; var onClose = props.onClose;
    var stringSet = React__default.useContext(SendbirdLiveContext).stringSet;
    var video = React__default.useRef(null);
    var _a = React__default.useState(liveEvent.state), state = _a[0], setState = _a[1];
    var _b = React__default.useState(liveEvent.participantCount || 0), participantCount = _b[0], setParticipantCount = _b[1];
    var _c = useModal('', 'dark-background'), EndModal = _c[0], openEndModal = _c[1], closeEndModal = _c[2];
    var mapStateName = function (name) {
        switch (name) {
            case 'created':
                return stringSet.EVENT_STATUS_CREATED;
            case 'ready':
                return stringSet.EVENT_STATUS_READY;
            case 'ongoing':
                return stringSet.EVENT_STATUS_ONGOING;
            case 'ended':
                return stringSet.EVENT_STATUS_ENDED;
        }
    };
    React__default.useEffect(function () {
        var setup = function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(liveEvent.state === sendbirdLive_min.exports.LiveEventState.CREATED)) return [3 /*break*/, 2];
                        return [4 /*yield*/, liveEvent.setEventReady()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        if (!(liveEvent.state === sendbirdLive_min.exports.LiveEventState.ONGOING && !liveEvent.isHostStreaming)) return [3 /*break*/, 4];
                        return [4 /*yield*/, liveEvent.startStreaming({ turnVideoOn: true, turnAudioOn: true })];
                    case 3:
                        _a.sent();
                        liveEvent.setVideoViewForLiveEvent(video.current, liveEvent.host.hostId);
                        _a.label = 4;
                    case 4:
                        video.current.autoplay = true;
                        video.current.muted = true;
                        return [2 /*return*/];
                }
            });
        }); };
        setup();
    }, [liveEvent]);
    React__default.useEffect(function () {
        var unsubscribers = [
            liveEvent.on('participantEntered', function () {
                setParticipantCount(liveEvent.participantCount);
            }),
            liveEvent.on('participantExited', function () {
                setParticipantCount(liveEvent.participantCount);
            }),
        ];
        return function () {
            unsubscribers.map(function (unsubscriber) { return unsubscriber(); });
        };
    }, [liveEvent]);
    function getMM(milliseconds) {
        var seconds = Math.floor(milliseconds / 1000);
        var minutes = Math.floor(seconds / 60);
        minutes = minutes % 60;
        return "".concat(minutes < 0 ? 0 : minutes);
    }
    return (React__default__default["default"].createElement("div", { className: "host-view" },
        React__default__default["default"].createElement("div", { className: "host-view__main" },
            React__default__default["default"].createElement("div", { className: "video-wrapper" },
                React__default__default["default"].createElement("video", { className: "host-view__video", ref: video })),
            React__default__default["default"].createElement("div", { className: "host-view__info" },
                React__default__default["default"].createElement("div", { className: "host-view__profile" }, (liveEvent.host && liveEvent.host.profileURL) ?
                    React__default__default["default"].createElement("img", { src: liveEvent.host.profileURL, alt: 'Host profile image', className: 'host-profile-image' }) :
                    React__default__default["default"].createElement(SvgIconsUser, { viewBox: '-4 -4 20 20', width: 56, height: 56 })),
                React__default__default["default"].createElement("div", { className: "host-view__info__wrapper" },
                    React__default__default["default"].createElement("div", { className: "host-view__title__wrapper" },
                        React__default__default["default"].createElement("div", { className: "event-state--".concat(state) }, mapStateName(state)),
                        React__default__default["default"].createElement("div", { className: "host-view__title" }, liveEvent.title)),
                    React__default__default["default"].createElement("div", { className: "host-view__detail" }, participantCount !== null && participantCount !== void 0 ? participantCount : 0,
                        " watching now \u2219 Started ",
                        getMM(liveEvent.duration),
                        " mins ago"),
                    React__default__default["default"].createElement("div", { className: "host-view__host-name" }, liveEvent.host ? liveEvent.host.nickname : 'No Host'))),
            React__default__default["default"].createElement(ControlBar, { liveEvent: liveEvent, onStart: function (liveEvent) {
                    liveEvent.setVideoViewForLiveEvent(video.current, liveEvent.host.hostId);
                    setState(liveEvent.state);
                }, onEnd: function () {
                    openEndModal();
                } }),
            React__default__default["default"].createElement(EndModal, null,
                React__default__default["default"].createElement(ConfirmEndDialog, { onExit: function (isEnding) { return __awaiter(_this, void 0, void 0, function () {
                        return __generator(this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    if (!isEnding) return [3 /*break*/, 2];
                                    return [4 /*yield*/, liveEvent.endEvent()];
                                case 1:
                                    _a.sent();
                                    return [3 /*break*/, 4];
                                case 2: return [4 /*yield*/, liveEvent.exitAsHost()];
                                case 3:
                                    _a.sent();
                                    _a.label = 4;
                                case 4:
                                    closeEndModal();
                                    onClose(liveEvent);
                                    return [2 /*return*/];
                            }
                        });
                    }); }, onClose: function () {
                        closeEndModal();
                    } }))),
        React__default__default["default"].createElement(RightPanel, { liveEvent: liveEvent })));
}

var css_248z$3 = "@import url(\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap\");\nbody {\n  font-family: \"Roboto\", \"Verdana\", sans-serif;\n  font-size: 14px;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n:root {\n  --sendbird-light-primary-500: #491389;\n  --sendbird-light-primary-400: #6211c8;\n  --sendbird-light-primary-300: #742ddd;\n  --sendbird-light-primary-200: #c2a9fa;\n  --sendbird-light-primary-100: #dbd1ff;\n  --sendbird-light-secondary-500: #066858;\n  --sendbird-light-secondary-400: #027d69;\n  --sendbird-light-secondary-300: #259c72;\n  --sendbird-light-secondary-200: #69c085;\n  --sendbird-light-secondary-100: #a8e2ab;\n  --sendbird-light-information-100: #adc9ff;\n  --sendbird-light-error-500: #9d091e;\n  --sendbird-light-error-400: #bf0711;\n  --sendbird-light-error-300: #de360b;\n  --sendbird-light-error-200: #f66161;\n  --sendbird-light-error-100: #fdaaaa;\n  --sendbird-light-background-700: #000000;\n  --sendbird-light-background-600: #161616;\n  --sendbird-light-background-500: #2C2C2C;\n  --sendbird-light-background-400: #393939;\n  --sendbird-light-background-300: #bdbdbd;\n  --sendbird-light-background-200: #e0e0e0;\n  --sendbird-light-background-100: #eeeeee;\n  --sendbird-light-background-50: #FFFFFF;\n  --sendbird-light-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-light-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-light-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-light-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-light-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-light-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-light-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-light-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-light-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-light-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-light-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n:root {\n  --sendbird-dark-primary-500: #491389;\n  --sendbird-dark-primary-400: #6211c8;\n  --sendbird-dark-primary-300: #742ddd;\n  --sendbird-dark-primary-200: #c2a9fa;\n  --sendbird-dark-primary-100: #dbd1ff;\n  --sendbird-dark-secondary-500: #066858;\n  --sendbird-dark-secondary-400: #027d69;\n  --sendbird-dark-secondary-300: #259c72;\n  --sendbird-dark-secondary-200: #69c085;\n  --sendbird-dark-secondary-100: #a8e2ab;\n  --sendbird-dark-information-100: #adc9ff;\n  --sendbird-dark-error-500: #9d091e;\n  --sendbird-dark-error-400: #bf0711;\n  --sendbird-dark-error-300: #de360b;\n  --sendbird-dark-error-200: #f66161;\n  --sendbird-dark-error-100: #fdaaaa;\n  --sendbird-dark-background-700: #000000;\n  --sendbird-dark-background-600: #161616;\n  --sendbird-dark-background-500: #2C2C2C;\n  --sendbird-dark-background-400: #393939;\n  --sendbird-dark-background-300: #bdbdbd;\n  --sendbird-dark-background-200: #e0e0e0;\n  --sendbird-dark-background-100: #eeeeee;\n  --sendbird-dark-background-50: #FFFFFF;\n  --sendbird-dark-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-dark-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-dark-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-dark-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-dark-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-dark-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-dark-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-dark-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-dark-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-dark-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-dark-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n.sendbirdlive-app__wrapper {\n  display: flex;\n}\n\n.sendbirdlive-app__no-event {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  flex-grow: 1;\n  width: 100%;\n}\n.sendbird-theme--light .sendbirdlive-app__no-event {\n  background-color: var(--sendbird-light-background-100);\n}\n.sendbird-theme--dark .sendbirdlive-app__no-event {\n  background-color: var(--sendbird-dark-background-500);\n}\n.sendbirdlive-app__no-event .sendbirdlive-app__no-event__title {\n  margin-bottom: 8px;\n  font-size: 18px;\n  font-weight: bold;\n  color: rgba(0, 0, 0, 0.88);\n}\n.sendbirdlive-app__no-event .sendbirdlive-app__no-event__description {\n  margin-bottom: 16px;\n  font-size: 14px;\n  line-height: 1.43;\n  color: rgba(0, 0, 0, 0.5);\n}\n.sendbirdlive-app__no-event .sendbirdlive-app__no-event__button {\n  padding: 6px 16px;\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: 500;\n  line-height: 1.43;\n  text-align: center;\n  color: rgba(255, 255, 255, 0.88);\n  cursor: pointer;\n}\n.sendbird-theme--light .sendbirdlive-app__no-event .sendbirdlive-app__no-event__button {\n  background-color: var(--sendbird-light-primary-300);\n}\n.sendbird-theme--dark .sendbirdlive-app__no-event .sendbirdlive-app__no-event__button {\n  background-color: var(--sendbird-dark-primary-200);\n}";
styleInject(css_248z$3);

var css_248z$2 = "@import url(\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap\");\nbody {\n  font-family: \"Roboto\", \"Verdana\", sans-serif;\n  font-size: 14px;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n:root {\n  --sendbird-light-primary-500: #491389;\n  --sendbird-light-primary-400: #6211c8;\n  --sendbird-light-primary-300: #742ddd;\n  --sendbird-light-primary-200: #c2a9fa;\n  --sendbird-light-primary-100: #dbd1ff;\n  --sendbird-light-secondary-500: #066858;\n  --sendbird-light-secondary-400: #027d69;\n  --sendbird-light-secondary-300: #259c72;\n  --sendbird-light-secondary-200: #69c085;\n  --sendbird-light-secondary-100: #a8e2ab;\n  --sendbird-light-information-100: #adc9ff;\n  --sendbird-light-error-500: #9d091e;\n  --sendbird-light-error-400: #bf0711;\n  --sendbird-light-error-300: #de360b;\n  --sendbird-light-error-200: #f66161;\n  --sendbird-light-error-100: #fdaaaa;\n  --sendbird-light-background-700: #000000;\n  --sendbird-light-background-600: #161616;\n  --sendbird-light-background-500: #2C2C2C;\n  --sendbird-light-background-400: #393939;\n  --sendbird-light-background-300: #bdbdbd;\n  --sendbird-light-background-200: #e0e0e0;\n  --sendbird-light-background-100: #eeeeee;\n  --sendbird-light-background-50: #FFFFFF;\n  --sendbird-light-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-light-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-light-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-light-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-light-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-light-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-light-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-light-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-light-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-light-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-light-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n:root {\n  --sendbird-dark-primary-500: #491389;\n  --sendbird-dark-primary-400: #6211c8;\n  --sendbird-dark-primary-300: #742ddd;\n  --sendbird-dark-primary-200: #c2a9fa;\n  --sendbird-dark-primary-100: #dbd1ff;\n  --sendbird-dark-secondary-500: #066858;\n  --sendbird-dark-secondary-400: #027d69;\n  --sendbird-dark-secondary-300: #259c72;\n  --sendbird-dark-secondary-200: #69c085;\n  --sendbird-dark-secondary-100: #a8e2ab;\n  --sendbird-dark-information-100: #adc9ff;\n  --sendbird-dark-error-500: #9d091e;\n  --sendbird-dark-error-400: #bf0711;\n  --sendbird-dark-error-300: #de360b;\n  --sendbird-dark-error-200: #f66161;\n  --sendbird-dark-error-100: #fdaaaa;\n  --sendbird-dark-background-700: #000000;\n  --sendbird-dark-background-600: #161616;\n  --sendbird-dark-background-500: #2C2C2C;\n  --sendbird-dark-background-400: #393939;\n  --sendbird-dark-background-300: #bdbdbd;\n  --sendbird-dark-background-200: #e0e0e0;\n  --sendbird-dark-background-100: #eeeeee;\n  --sendbird-dark-background-50: #FFFFFF;\n  --sendbird-dark-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-dark-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-dark-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-dark-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-dark-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-dark-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-dark-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-dark-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-dark-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-dark-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-dark-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n.participant-view {\n  display: flex;\n  flex-grow: 1;\n}\n.participant-view .participant-view__main {\n  width: 100%;\n  background-color: var(--sendbird-light-background-100);\n}\n.participant-view .participant-view__main .toast-container {\n  position: absolute;\n  top: 10px;\n  z-index: 5000;\n}\n.participant-view .participant-view__main .toast-container .toast {\n  width: 500px;\n  margin: auto;\n  padding: 10px 0 10px 0;\n  background-color: var(--sendbird-dark-information-100);\n  font-size: 12px;\n  font-weight: bold;\n  line-height: 1;\n  text-align: center;\n  color: rgba(0, 0, 0, 0.88);\n}\n.participant-view .participant-view__main .video-wrapper {\n  position: relative;\n  width: 100%;\n}\n.participant-view .participant-view__main .video-wrapper:before {\n  display: block;\n  content: \"\";\n  padding-top: 56.25%; /*What you want the height to be in relation to the width*/\n}\n.participant-view .participant-view__main .video-wrapper .participant-view__video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.participant-view .participant-view__main .participant-view__info {\n  display: flex;\n  padding-top: 16px;\n  background-color: var(--sendbird-light-background-50);\n}\n.participant-view .participant-view__main .participant-view__info .participant-view__profile {\n  width: 56px;\n  height: 56px;\n  margin: 0 16px 12px;\n  border-radius: 50%;\n  background-color: var(--sendbird-dark-background-300);\n}\n.participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state, .participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state--ended, .participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state--ongoing, .participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state--ready, .participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state--created {\n  width: fit-content;\n  box-sizing: border-box;\n  height: 20px;\n  margin-right: 8px;\n  padding: 4px;\n  border-radius: 2px;\n  font-size: 12px;\n  font-weight: bold;\n  line-height: 1;\n}\n.participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state--created {\n  background-color: var(--sendbird-light-primary-100);\n  color: #6211c8;\n}\n.participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state--ready {\n  background-color: #c8d9fa;\n  color: #30308f;\n}\n.participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state--ongoing {\n  background-color: var(--sendbird-light-error-300);\n  color: rgba(255, 255, 255, 0.88);\n}\n.participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state--ended {\n  color: rgba(0, 0, 0, 0.5);\n}\n.sendbird-theme--light .participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state--ended {\n  background-color: var(--sendbird-light-background-200);\n}\n.sendbird-theme--dark .participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .event-state--ended {\n  background-color: var(--sendbird-dark-background-400);\n}\n.participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .participant-view__title__wrapper {\n  display: flex;\n  align-items: center;\n}\n.participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .participant-view__title__wrapper .participant-view__title {\n  font-size: 20px;\n  font-weight: 700;\n  line-height: 1.4;\n  color: rgba(0, 0, 0, 0.88);\n}\n.participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .participant-view__detail {\n  margin-top: 4px;\n  font-size: 14px;\n  line-height: 1.43;\n  color: rgba(0, 0, 0, 0.5);\n}\n.participant-view .participant-view__main .participant-view__info .participant-view__info__wrapper .participant-view__host-name {\n  margin-top: 16px;\n  margin-bottom: 16px;\n  font-size: 14px;\n  font-weight: 700;\n  line-height: 1.43;\n  color: rgba(0, 0, 0, 0.88);\n}";
styleInject(css_248z$2);

var Toast = function (props) {
    var message = props.message;
    return (React__default__default["default"].createElement("div", { className: "toast-container" }, message && React__default__default["default"].createElement("div", { className: "toast" }, message)));
};
var useToast = function () {
    var _a = React__default.useState(undefined), message = _a[0], setMessage = _a[1];
    var _b = React__default.useState(undefined), timer = _b[0], setTimer = _b[1];
    var notify = function (message, time) {
        if (time === void 0) { time = 1000000; }
        setMessage(message);
        var timer = setTimeout(function () {
            reset();
        }, time);
        setTimer(timer);
    };
    var reset = function () {
        clearTimeout(timer);
        setTimer(undefined);
        setMessage(undefined);
    };
    var ToastWrapper = function () { return (React__default__default["default"].createElement(Toast, { message: message })); };
    return [ToastWrapper, notify, reset];
};

var css_248z$1 = "@import url(\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap\");\nbody {\n  font-family: \"Roboto\", \"Verdana\", sans-serif;\n  font-size: 14px;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n:root {\n  --sendbird-light-primary-500: #491389;\n  --sendbird-light-primary-400: #6211c8;\n  --sendbird-light-primary-300: #742ddd;\n  --sendbird-light-primary-200: #c2a9fa;\n  --sendbird-light-primary-100: #dbd1ff;\n  --sendbird-light-secondary-500: #066858;\n  --sendbird-light-secondary-400: #027d69;\n  --sendbird-light-secondary-300: #259c72;\n  --sendbird-light-secondary-200: #69c085;\n  --sendbird-light-secondary-100: #a8e2ab;\n  --sendbird-light-information-100: #adc9ff;\n  --sendbird-light-error-500: #9d091e;\n  --sendbird-light-error-400: #bf0711;\n  --sendbird-light-error-300: #de360b;\n  --sendbird-light-error-200: #f66161;\n  --sendbird-light-error-100: #fdaaaa;\n  --sendbird-light-background-700: #000000;\n  --sendbird-light-background-600: #161616;\n  --sendbird-light-background-500: #2C2C2C;\n  --sendbird-light-background-400: #393939;\n  --sendbird-light-background-300: #bdbdbd;\n  --sendbird-light-background-200: #e0e0e0;\n  --sendbird-light-background-100: #eeeeee;\n  --sendbird-light-background-50: #FFFFFF;\n  --sendbird-light-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-light-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-light-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-light-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-light-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-light-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-light-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-light-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-light-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-light-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-light-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n:root {\n  --sendbird-dark-primary-500: #491389;\n  --sendbird-dark-primary-400: #6211c8;\n  --sendbird-dark-primary-300: #742ddd;\n  --sendbird-dark-primary-200: #c2a9fa;\n  --sendbird-dark-primary-100: #dbd1ff;\n  --sendbird-dark-secondary-500: #066858;\n  --sendbird-dark-secondary-400: #027d69;\n  --sendbird-dark-secondary-300: #259c72;\n  --sendbird-dark-secondary-200: #69c085;\n  --sendbird-dark-secondary-100: #a8e2ab;\n  --sendbird-dark-information-100: #adc9ff;\n  --sendbird-dark-error-500: #9d091e;\n  --sendbird-dark-error-400: #bf0711;\n  --sendbird-dark-error-300: #de360b;\n  --sendbird-dark-error-200: #f66161;\n  --sendbird-dark-error-100: #fdaaaa;\n  --sendbird-dark-background-700: #000000;\n  --sendbird-dark-background-600: #161616;\n  --sendbird-dark-background-500: #2C2C2C;\n  --sendbird-dark-background-400: #393939;\n  --sendbird-dark-background-300: #bdbdbd;\n  --sendbird-dark-background-200: #e0e0e0;\n  --sendbird-dark-background-100: #eeeeee;\n  --sendbird-dark-background-50: #FFFFFF;\n  --sendbird-dark-overlay-01: rgba(0, 0, 0, 0.55);\n  --sendbird-dark-overlay-02: rgba(0, 0, 0, 0.32);\n  --sendbird-dark-onlight-01: rgba(0, 0, 0, 0.88);\n  --sendbird-dark-onlight-02: rgba(0, 0, 0, 0.50);\n  --sendbird-dark-onlight-03: rgba(0, 0, 0, 0.38);\n  --sendbird-dark-onlight-04: rgba(0, 0, 0, 0.12);\n  --sendbird-dark-ondark-01: rgba(255, 255, 255, 0.88);\n  --sendbird-dark-ondark-02: rgba(255, 255, 255, 0.50);\n  --sendbird-dark-ondark-03: rgba(255, 255, 255, 0.38);\n  --sendbird-dark-ondark-04: rgba(255, 255, 255, 0.12);\n  --sendbird-dark-shadow-01: 0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-02: 0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-03: 0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-04: 0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12);\n  --sendbird-light-shadow-05: 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 4px 6px 0 rgba(0, 0, 0, 0.12);\n  --sendbird-dark-shadow-message-input: 0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n\n.ended-modal {\n  width: 480px;\n  padding: 18px 24px;\n}\n.ended-modal .header {\n  display: flex;\n  align-items: center;\n}\n.ended-modal .header .title {\n  flex: 1;\n  font-size: 20px;\n  font-weight: 700;\n  line-height: 1.4;\n  color: rgba(0, 0, 0, 0.88);\n}\n.ended-modal .header .close:hover {\n  cursor: pointer;\n}\n.ended-modal .buttons {\n  display: flex;\n  flex-direction: row;\n  justify-content: right;\n  padding-top: 50px;\n}\n.ended-modal .buttons .major-button {\n  margin-left: 8px;\n  padding: 10px 16px;\n  border-radius: 4px;\n}\n.ended-modal .buttons .major-button:hover {\n  cursor: pointer;\n  opacity: 0.9;\n}\n.ended-modal .buttons .major-button {\n  color: rgba(255, 255, 255, 0.88);\n}\n.sendbird-theme--light .ended-modal .buttons .major-button {\n  background-color: var(--sendbird-light-primary-300);\n}\n.sendbird-theme--dark .ended-modal .buttons .major-button {\n  background-color: var(--sendbird-dark-primary-200);\n}";
styleInject(css_248z$1);

function EndedModalView(props) {
    var onClose = props.onClose;
    return (React__default__default["default"].createElement("div", { className: 'ended-modal' },
        React__default__default["default"].createElement("div", { className: 'header' },
            React__default__default["default"].createElement("div", { className: 'title' }, "Host has ended this live event."),
            React__default__default["default"].createElement("div", { className: 'close', onClick: onClose },
                React__default__default["default"].createElement(SvgIconsClose, { width: 22, height: 22, viewBox: '0 0 60 60', fill: '#000' }))),
        React__default__default["default"].createElement("div", { className: 'buttons' },
            React__default__default["default"].createElement("div", { className: 'major-button', onClick: onClose }, "End live"))));
}

function ParticipantView(props) {
    var _this = this;
    var liveEvent = props.liveEvent, onClose = props.onClose; props.showDuration; props.onEndEventClick; props.showStatusLabel; props.showParticipantCount; var eventEndViewDisplayTime = props.eventEndViewDisplayTime;
    var video = React__default.useRef(null);
    var _a = useToast(), Toast = _a[0], notify = _a[1];
    var _b = React__default.useState(liveEvent.host), host = _b[0], setHost = _b[1];
    var _c = React__default.useState(liveEvent.state), state = _c[0], setState = _c[1];
    var _d = React__default.useState(liveEvent.participantCount || 0), participantCount = _d[0], setParticipantCount = _d[1];
    var _e = useModal('', ''), EndedModal = _e[0], openEndedModal = _e[1], closeEndedModal = _e[2];
    var _f = React__default.useState(), modalTimer = _f[0], setModalTimer = _f[1];
    var stringSet = React__default.useContext(SendbirdLiveContext).stringSet;
    var mapStateName = function (name) {
        switch (name) {
            case 'created':
                return stringSet.EVENT_STATUS_CREATED;
            case 'ready':
                return stringSet.EVENT_STATUS_READY;
            case 'ongoing':
                return stringSet.EVENT_STATUS_ONGOING;
            case 'ended':
                return stringSet.EVENT_STATUS_ENDED;
        }
    };
    var setup = function () { return __awaiter(_this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            video.current.autoplay = true;
            if (host)
                liveEvent.setVideoViewForLiveEvent(video.current, host.hostId);
            return [2 /*return*/];
        });
    }); };
    var _openEndedModal = function () {
        openEndedModal();
        var timer = setTimeout(function () {
            exit();
        }, eventEndViewDisplayTime !== null && eventEndViewDisplayTime !== void 0 ? eventEndViewDisplayTime : 3000);
        setModalTimer(timer);
    };
    var exit = function () { return __awaiter(_this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            clearTimeout(modalTimer);
            setModalTimer(undefined);
            closeEndedModal();
            onClose(liveEvent);
            return [2 /*return*/];
        });
    }); };
    React__default.useEffect(function () {
        return function () {
            exit();
        };
    }, []);
    React__default.useEffect(function () {
        setup();
    }, [host, state]);
    React__default.useEffect(function () {
        var unsubscribers = [
            liveEvent.on('liveEventStarted', function () {
                setState(liveEvent.state);
            }),
            liveEvent.on('liveEventEnded', function () {
                setState(liveEvent.state);
                _openEndedModal();
            }),
            liveEvent.on('hostEntered', function () {
                notify('Host Entered');
                setHost(liveEvent.host);
            }),
            liveEvent.on('hostConnected', function (liveEvent, host) {
                notify('Host Connected');
                setHost(liveEvent.host);
            }),
            liveEvent.on('hostDisconnected', function () {
                notify('Host Disconnected');
                setHost(liveEvent.host);
            }),
            liveEvent.on('hostExited', function () {
                notify('Host Exited');
                setHost(liveEvent.host);
            }),
            liveEvent.on('hostMutedAudio', function () {
                notify('Host is muted');
                setHost(liveEvent.host);
            }),
            liveEvent.on('hostUnmutedAudio', function () {
                notify('Host is unmuted');
                setHost(liveEvent.host);
            }),
            liveEvent.on('participantEntered', function () {
                setParticipantCount(liveEvent.participantCount);
            }),
            liveEvent.on('participantExited', function () {
                setParticipantCount(liveEvent.participantCount);
            })
        ];
        return function () {
            unsubscribers.map(function (unsubscriber) { return unsubscriber(); });
        };
    }, [liveEvent]);
    function getMM(milliseconds) {
        var seconds = Math.floor(milliseconds / 1000);
        var minutes = Math.floor(seconds / 60);
        minutes = minutes % 60;
        return "".concat(minutes < 0 ? 0 : minutes);
    }
    return (React__default__default["default"].createElement("div", { className: "participant-view" },
        React__default__default["default"].createElement("div", { className: "participant-view__main" },
            React__default__default["default"].createElement(Toast, null),
            React__default__default["default"].createElement("div", { className: "video-wrapper" },
                React__default__default["default"].createElement("video", { className: "participant-view__video", ref: video })),
            React__default__default["default"].createElement("div", { className: "participant-view__info" },
                React__default__default["default"].createElement("div", { className: "participant-view__profile" }, (liveEvent.host && liveEvent.host.profileURL) ?
                    React__default__default["default"].createElement("img", { src: liveEvent.host.profileURL, alt: 'Host profile image', className: 'host-profile-image' }) :
                    React__default__default["default"].createElement(SvgIconsUser, { viewBox: '-4 -4 20 20', width: 56, height: 56 })),
                React__default__default["default"].createElement("div", { className: "participant-view__info__wrapper" },
                    React__default__default["default"].createElement("div", { className: "participant-view__title__wrapper" },
                        React__default__default["default"].createElement("div", { className: "event-state--".concat(state) }, mapStateName(state)),
                        React__default__default["default"].createElement("div", { className: "participant-view__title" }, liveEvent.title)),
                    React__default__default["default"].createElement("div", { className: "participant-view__detail" }, participantCount !== null && participantCount !== void 0 ? participantCount : 0,
                        " watching now \u2219 Started streaming ",
                        getMM(liveEvent.duration),
                        " mins ago"),
                    React__default__default["default"].createElement("div", { className: "participant-view__host-name" }, host ? host.nickname || ' ' : 'No Host')))),
        React__default__default["default"].createElement(RightPanel, { liveEvent: liveEvent }),
        React__default__default["default"].createElement(EndedModal, null,
            React__default__default["default"].createElement(EndedModalView, { onClose: exit }))));
}

var css_248z = ".enter-view {\n  width: 480px;\n}\n.enter-view .title {\n  font-size: 20px;\n  font-weight: 700;\n  margin-bottom: 26px;\n}\n.enter-view .close {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  cursor: pointer;\n}\n.enter-view .enter-view__item {\n  display: flex;\n  align-items: center;\n  margin: 8px 0;\n  border-radius: 4px;\n  border: solid 1px rgba(0, 0, 0, 0.12);\n  padding: 22px 24px 22px 22px;\n  cursor: pointer;\n}\n.enter-view .enter-view__item .enter-view__item__icon {\n  width: 28px;\n  height: 28px;\n  margin-right: 22px;\n}\n.enter-view .enter-view__item .enter-view__item__text {\n  font-size: 16px;\n  line-height: 1.38;\n  color: rgba(0, 0, 0, 0.88);\n}";
styleInject(css_248z);

function EnterView(props) {
    var _this = this;
    var liveEventId = props.liveEventId, onClose = props.onClose;
    var stringSet = React__default.useContext(SendbirdLiveContext).stringSet;
    var enterAsHost = function () { return __awaiter(_this, void 0, void 0, function () {
        var liveEvent;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, sendbirdLive_min.exports.SendbirdLive.getLiveEvent(liveEventId)];
                case 1:
                    liveEvent = _a.sent();
                    return [4 /*yield*/, liveEvent.enterAsHost({ turnAudioOn: true, turnVideoOn: true })];
                case 2:
                    _a.sent();
                    onClose(liveEvent, true);
                    return [2 /*return*/];
            }
        });
    }); };
    var enter = function () { return __awaiter(_this, void 0, void 0, function () {
        var liveEvent;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, sendbirdLive_min.exports.SendbirdLive.getLiveEvent(liveEventId)];
                case 1:
                    liveEvent = _a.sent();
                    return [4 /*yield*/, liveEvent.enter()];
                case 2:
                    _a.sent();
                    onClose(liveEvent, false);
                    return [2 /*return*/];
            }
        });
    }); };
    return (React__default__default["default"].createElement("div", { className: 'enter-view' },
        React__default__default["default"].createElement("div", { className: 'close', onClick: function () { return onClose(); } },
            React__default__default["default"].createElement(SvgIconsClose, { width: 22, height: 22, viewBox: '0 0 60 60' })),
        React__default__default["default"].createElement("div", { className: 'title' }, stringSet.LIVE_EVENT_ENTER_ROLE_DIALOG_TITLE),
        React__default__default["default"].createElement("div", { className: 'enter-view__item', onClick: enterAsHost },
            React__default__default["default"].createElement("div", { className: 'enter-view__item__icon' },
                React__default__default["default"].createElement(SvgIconsOperator, { viewBox: "0 0 64 64", width: 28, height: 28 })),
            React__default__default["default"].createElement("div", { className: 'enter-view__item__text' }, stringSet.LIVE_EVENT_ENTER_ROLE_DIALOG_OPTION_HOST)),
        React__default__default["default"].createElement("div", { className: 'enter-view__item', onClick: enter },
            React__default__default["default"].createElement("div", { className: 'enter-view__item__icon' },
                React__default__default["default"].createElement(SvgIconsMembers, { viewBox: "0 0 64 64", width: 28, height: 28 })),
            React__default__default["default"].createElement("div", { className: 'enter-view__item__text' }, stringSet.LIVE_EVENT_ENTER_ROLE_DIALOG_OPTION_PARTICIPANT))));
}

function App(props) {
    var _this = this;
    var userId = props.userId, appId = props.appId, accessToken = props.accessToken, customApiHost = props.customApiHost, customWebSocketHost = props.customWebSocketHost, theme = props.theme, colorSet = props.colorSet, stringSet = props.stringSet, customize = props.customize;
    var _a = React__default.useState(false), isHost = _a[0], setIsHost = _a[1];
    var _b = React__default.useState(''), liveEventId = _b[0], setLiveEventId = _b[1];
    var _c = React__default.useState(), liveEvent = _c[0], setLiveEvent = _c[1];
    var _d = useModal(''), CreateEventModal = _d[0], openCreateEventModal = _d[1], closeCreateEventModal = _d[2];
    var _e = useModal(''), EnterModal = _e[0], openEnterModal = _e[1], closeEnterModal = _e[2];
    var liveEventListProps = __assign$1(__assign$1({}, customize === null || customize === void 0 ? void 0 : customize.liveEventList), { onClickCreate: function () {
            openCreateEventModal();
        }, onClickElem: function (liveEvent) { return __awaiter(_this, void 0, void 0, function () {
            var event;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, sendbirdLive_min.exports.SendbirdLive.getLiveEvent(liveEvent.liveEventId)];
                    case 1:
                        event = _a.sent();
                        if (!event.isHost) return [3 /*break*/, 2];
                        setLiveEventId(liveEvent.liveEventId);
                        openEnterModal();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, event.enter()];
                    case 3:
                        _a.sent();
                        setLiveEvent(event);
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        }); } });
    var LiveEventView = function (_a) {
        var onClose = _a.onClose;
        if (!liveEvent)
            return (React__default__default["default"].createElement("div", { className: "sendbirdlive-app__no-event" },
                React__default__default["default"].createElement("div", { className: "sendbirdlive-app__no-event__title" }, "No live events selected"),
                React__default__default["default"].createElement("div", { className: "sendbirdlive-app__no-event__description" }, "Select a live event from the list or create a live event."),
                React__default__default["default"].createElement("div", { className: "sendbirdlive-app__no-event__button", onClick: openCreateEventModal }, "Create")));
        return ((isHost)
            ? React__default__default["default"].createElement(HostView, { liveEvent: liveEvent, onClose: onClose })
            : React__default__default["default"].createElement(ParticipantView, { liveEvent: liveEvent, onClose: onClose }));
    };
    return (React__default__default["default"].createElement(SendbirdLive, { userId: userId, appId: appId, accessToken: accessToken, customApiHost: customApiHost, customWebSocketHost: customWebSocketHost, theme: theme, colorSet: colorSet, stringSet: stringSet },
        React__default__default["default"].createElement("div", { className: "sendbirdlive-app__wrapper" },
            React__default__default["default"].createElement("div", { className: "sendbirdlive-app__liveeventlist__wrapper" }, !isHost && React__default__default["default"].createElement(LiveEventList, __assign$1({}, liveEventListProps))),
            React__default__default["default"].createElement(EnterModal, null,
                React__default__default["default"].createElement(EnterView, { liveEventId: liveEventId, onClose: function (liveEvent, isHost) {
                        setLiveEvent(liveEvent);
                        if (liveEvent && isHost) {
                            setIsHost(true);
                        }
                        closeEnterModal();
                    } })),
            React__default__default["default"].createElement(CreateEventModal, null,
                React__default__default["default"].createElement(CreateEventView, { onClose: function (liveEvent) {
                        setLiveEvent(liveEvent);
                        if (liveEvent === null || liveEvent === void 0 ? void 0 : liveEvent.isHost) {
                            setIsHost(true);
                        }
                        closeCreateEventModal();
                    } })),
            React__default__default["default"].createElement(LiveEventView, { onClose: function () {
                    setIsHost(false);
                    setLiveEvent(undefined);
                } }))));
}

exports.App = App;
//# sourceMappingURL=index.js.map
